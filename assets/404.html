---
layout: page
title: "Redirecting…"
permalink: /404.html
---

<div id="not-found-content" style="display:none">
  {% include lang.html %}
  <p class="lead">{{ site.data.locales[lang].not_found.statement }}</p>
</div>

<script>
const segments = window.location.pathname.split('/').filter(Boolean);
const notFoundContent = document.getElementById('not-found-content');

if (segments.length >= 2) {
    const lastSegment = segments.pop();
    const lastPath = lastSegment.split("-").filter(Boolean).pop();

    if (segments[0] === "posts" &&
        lastPath !== lastSegment &&
        lastPath.match(/^([a-f0-9]+)$/i)) {

        const isEn = segments.includes("en");
        if (isEn) {
            location.replace("https://en.zhgchg.li/posts/" + lastPath);
        } else {
            location.replace("/posts/" + lastPath);
        }
    } else {
        if (notFoundContent) {
            notFoundContent.style.display = "";
            document.getElementsByClassName("dynamic-title")[0].innerHTML = "404: Page not found";
            document.title = "404: Page not found";
            const spans = document.getElementById("breadcrumb").getElementsByTagName("span");
            for (const span of spans) {
                if (span.textContent.trim() === "Redirecting…") {
                    span.textContent = "404: Page not found";
                }
            }
        }
    }
} else {
    if (notFoundContent) {
        notFoundContent.style.display = "";
        document.getElementsByClassName("dynamic-title")[0].innerHTML = "404: Page not found";
        document.title = "404: Page not found";
        const spans = document.getElementById("breadcrumb").getElementsByTagName("span");
        for (const span of spans) {
            if (span.textContent.trim() === "Redirecting…") {
                span.textContent = "404: Page not found";
            }
        }
    }
}
</script>