---
author: ZhgChgLi
categories:
- ZRealmã®é–‹ç™º
date: 2022-07-15T10:10:04.867+0000
description: iOSé–‹ç™ºè€…å‘ã‘ã«Localizable.stringsã®èª¤ç·¨é›†ãƒªã‚¹ã‚¯ã‚’è§£æ¶ˆã—ã€æ–‡å­—åˆ—ãƒ•ã‚¡ã‚¤ãƒ«ã®å®‰å…¨æ€§ã‚’ç¢ºä¿ã™ã‚‹å…·ä½“çš„ãªå¯¾ç­–ã‚’ç´¹ä»‹ã€‚å¤šè¨€èªå¯¾å¿œã®å“è³ªå‘ä¸Šã¨ä½œæ¥­åŠ¹ç‡ã‚¢ãƒƒãƒ—ã‚’å®Ÿç¾ã—ã¾ã™ã€‚
image:
  path: /assets/48a8526c1300/1*G2UsVr02o122GxI2o1WbQQ.jpeg
last_modified_at: 2024-04-14T02:14:31.859+0000
render_with_liquid: false
tags:
- iosã‚¢ãƒ—ãƒªé–‹ç™º
- ãƒ­ãƒ¼ã‚«ãƒªã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
- å˜ä½“ãƒ†ã‚¹ãƒˆ
- Xcode
- Swift
- japanese
- ai-translation
title: iOSå¤šè¨€èªå¯¾å¿œï¼šLocalizable.stringsã‚’å®‰å…¨ã«ç®¡ç†ã™ã‚‹æœ€é©ç­–ï½œæ–‡å­—åˆ—ç ´æã‚’é˜²ãæ–¹æ³•
---

### iOSã§å¤šè¨€èªæ–‡å­—åˆ—ã®ä¿é™ºã‚’ã‹ã‘ã‚ˆã†ï¼

SwifGen & UnitTest ã‚’ä½¿ã£ã¦å¤šè¨€èªæ“ä½œã®å®‰å…¨æ€§ã‚’ç¢ºä¿ã™ã‚‹

![Photo by [Mick Haupt](https://unsplash.com/es/@rocinante_11?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText){:target="_blank"}](/assets/48a8526c1300/1*G2UsVr02o122GxI2o1WbQQ.jpeg)

Photo by [Mick Haupt](https://unsplash.com/es/@rocinante_11?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText){:target="_blank"}

### å•é¡Œ

#### ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«

![](/assets/48a8526c1300/1*9hxfi00_HcXy0wUMIyU8gA.png)

iOSã®å¤šè¨€èªå¯¾å¿œã¯Localizable.stringsã®ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§è¡Œã‚ã‚Œã€Androidã®ã‚ˆã†ã«XMLå½¢å¼ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€æ—¥å¸¸ã®é–‹ç™ºã§è¨€èªãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª¤ã£ã¦å£Šã—ãŸã‚Šã€è¿½åŠ ã—å¿˜ã‚ŒãŸã‚Šã™ã‚‹ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚ã•ã‚‰ã«ã€å¤šè¨€èªã®ã‚¨ãƒ©ãƒ¼ã¯ãƒ“ãƒ«ãƒ‰æ™‚ã«æ¤œå‡ºã•ã‚Œãªã„ãŸã‚ã€ãƒªãƒªãƒ¼ã‚¹å¾Œã«ç‰¹å®šã®åœ°åŸŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰å ±å‘Šã•ã‚Œã¦åˆã‚ã¦å•é¡ŒãŒåˆ¤æ˜ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¿¡é ¼ã‚’å¤§ããæãªã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

ä»¥å‰ã®ç—›ã„çµŒé¨“ã¨ã—ã¦ã€Swift ã«æ…£ã‚Œã™ãã¦ Localizable.strings ã« `;` ã‚’ä»˜ã‘å¿˜ã‚ŒãŸãŸã‚ã€ã‚ã‚‹è¨€èªã®ãƒªãƒªãƒ¼ã‚¹å¾Œã« `;` ãŒæŠœã‘ãŸè¡Œä»¥é™ãŒã™ã¹ã¦å£Šã‚Œã¦ã—ã¾ã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ï¼›æœ€çµ‚çš„ã«ç·Šæ€¥ Hotfix ã§äº‹ãªãã‚’å¾—ã¾ã—ãŸã€‚

#### **å¤šè¨€èªã«å•é¡ŒãŒã‚ã‚‹ã¨ã€ã‚­ãƒ¼ãŒãã®ã¾ã¾ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¡¨ç¤ºã•ã‚Œã‚‹**

![](/assets/48a8526c1300/1*BwaK_5ac2gxAmrzt4w-oBA.png)

ä¸Šå›³ã®ã‚ˆã†ã«ã€`DESCRIPTION` ã‚­ãƒ¼ãŒæŠœã‘ã¦ã„ã‚‹ã¨ã€ã‚¢ãƒ—ãƒªã¯ãã®ã¾ã¾ `DESCRIPTION` ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¡¨ç¤ºã—ã¾ã™ã€‚

### ãƒã‚§ãƒƒã‚¯é …ç›®

- Localizable.strings ã®å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆæ”¹è¡Œã®æœ«å°¾ã« `;` ã‚’ä»˜ã‘ã‚‹ã€æ­£ã—ã„ Key-Value å¯¾å¿œï¼‰

- ã‚³ãƒ¼ãƒ‰å†…ã§ä½¿ç”¨ã™ã‚‹å¤šè¨€èªã‚­ãƒ¼ã¯ Localizable.strings ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾å¿œã™ã‚‹å®šç¾©ãŒå¿…è¦ã§ã™

- Localizable.strings ãƒ•ã‚¡ã‚¤ãƒ«ã¯å„è¨€èªã”ã¨ã«å¯¾å¿œã™ã‚‹ Key Value ã®è¨˜éŒ²ãŒå¿…è¦ã§ã™

- Localizable.strings ãƒ•ã‚¡ã‚¤ãƒ«ã«é‡è¤‡ã—ãŸã‚­ãƒ¼ãŒã‚ã£ã¦ã¯ã„ã‘ã¾ã›ã‚“ï¼ˆãã†ã—ãªã„ã¨å€¤ãŒæ„å›³ã›ãšä¸Šæ›¸ãã•ã‚Œã¾ã™ï¼‰

### è§£æ±ºç­–

#### Swiftã§å®Œå…¨ãªæ¤œæŸ»ãƒ„ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹

ä»¥å‰ã®æ–¹æ³•ã¯ã€Œ [Xcode ã§ç›´æ¥ Swift ã‚’ä½¿ã£ã¦ Shell Script ã‚’ä½œæˆï¼](../41c49a75a743/) ã€ã‚’å‚è€ƒã«ã—ã€[Localize ğŸ](https://github.com/freshOS/Localize){:target="_blank"} ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ Swift ã§ Command Line Tool ã‚’é–‹ç™ºã—ã€å¤–éƒ¨ã‹ã‚‰å¤šè¨€èªãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã€ãã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ Build Phases ã® Run Script ã«é…ç½®ã—ã¦ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã—ãŸã€‚

**åˆ©ç‚¹ï¼š**  
ãƒã‚§ãƒƒã‚¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯å¤–éƒ¨ã‹ã‚‰æ³¨å…¥ã•ã‚Œã‚‹ãŸã‚ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ä¾å­˜ã›ãšã€Xcodeã‚’ä½¿ã‚ãšã«ãƒ“ãƒ«ãƒ‰ãªã—ã§ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½ã¯ã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½•è¡Œç›®ã‹ã¾ã§æ­£ç¢ºã«ç‰¹å®šå¯èƒ½ã§ã™ã€‚ã¾ãŸã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ©Ÿèƒ½ï¼ˆå¤šè¨€èªã‚­ãƒ¼ã®Aâ†’Zã‚½ãƒ¼ãƒˆï¼‰ã‚‚å®Ÿè¡Œã§ãã¾ã™ã€‚

**æ¬ ç‚¹ï¼š**  
ãƒ“ãƒ«ãƒ‰æ™‚é–“ãŒå¢—åŠ ã™ã‚‹ï¼ˆç´„ +3åˆ†ï¼‰ã€ãƒ—ãƒ­ã‚»ã‚¹ãŒåˆ†æ•£ã—ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å•é¡ŒãŒã‚ã£ãŸã‚Šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã«å¿œã˜ã¦èª¿æ•´ãŒå¿…è¦ãªå ´åˆã€å¼•ãç¶™ãã‚„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒé›£ã—ã„ã§ã™ã€‚ã“ã‚Œã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã«å«ã¾ã‚Œã¦ã„ãªã„ãŸã‚ã€ã“ã®ãƒã‚§ãƒƒã‚¯éƒ¨åˆ†ã‚’è¿½åŠ ã—ãŸäººã ã‘ãŒå…¨ä½“ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç†è§£ã—ã¦ãŠã‚Šã€ä»–ã®å”åŠ›è€…ã¯è§¦ã‚Œã«ãã„ã§ã™ã€‚

> èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯ä»¥å‰ã®è¨˜äº‹ã‚’ã”å‚ç…§ãã ã•ã„ã€‚æœ¬è¨˜äº‹ã§ã¯ä¸»ã« Xcode 13 + SwiftGen + UnitTest ã‚’ä½¿ã£ã¦ Localizable.strings ã®ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’æ¤œè¨¼ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

#### XCode 13 å†…è”µã®ãƒ“ãƒ«ãƒ‰æ™‚ Localizable.strings ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼ãƒã‚§ãƒƒã‚¯

![](/assets/48a8526c1300/1*p28LgNGZYh6S8T2s2UH8lg.png)

Xcode 13 ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã¨ã€ãƒ“ãƒ«ãƒ‰æ™‚ã« Localizable.strings ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ©Ÿèƒ½ãŒæ¨™æº–æ­è¼‰ã•ã‚Œã¾ã—ãŸã€‚ãƒ†ã‚¹ãƒˆã—ãŸã¨ã“ã‚ã€ãƒã‚§ãƒƒã‚¯ã®ä»•æ§˜ã¯éå¸¸ã«å……å®Ÿã—ã¦ãŠã‚Šã€`;` ã®ä»˜ã‘å¿˜ã‚Œã ã‘ã§ãªãã€ä½™åˆ†ã§æ„å‘³ã®ãªã„æ–‡å­—åˆ—ã‚‚ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚

#### SwiftGen ã‚’ä½¿ã£ã¦å…ƒã® NSLocalizedString ã® String Base ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã‚’ç½®ãæ›ãˆã‚‹

[SwiftGen](https://github.com/SwiftGen/SwiftGen){:target="_blank"} ã¯ã€å…ƒã® NSLocalizedString ã®æ–‡å­—åˆ—ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹ã«å¤‰æ›´ã—ã€èª¤å­—ã‚„ã‚­ãƒ¼ã®æœªå®£è¨€ã‚’é˜²ãã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚

[![](https://repository-images.githubusercontent.com/39166950/1826ed00-d6cf-11ea-9736-34829910d1e6)](https://github.com/SwiftGen/SwiftGen){:target="_blank"}

SwiftGen ã®ã‚³ã‚¢ã‚‚ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€ã“ã®ãƒ„ãƒ¼ãƒ«ã¯æ¥­ç•Œã§éå¸¸ã«äººæ°—ãŒã‚ã‚Šã€å……å®Ÿã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒªã‚½ãƒ¼ã‚¹ãŒç¶­æŒã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€å°å…¥å¾Œã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒé›£ã—ã„ã¨ã„ã†å¿ƒé…ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

[**ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**](https://github.com/SwiftGen/SwiftGen#installation){:target="_blank"}

ç’°å¢ƒã‚„ CI/CD ã‚µãƒ¼ãƒ“ã‚¹ã®è¨­å®šã«å¿œã˜ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’é¸æŠã§ãã¾ã™ã€‚ã“ã“ã§ã¯ãƒ‡ãƒ¢ã¨ã—ã¦ã€æœ€ã‚‚ç°¡å˜ãª CocoaPods ã‚’ä½¿ã£ãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

> SwiftGen ã¯æœ¬ç‰©ã® CocoaPods ã§ã¯ãªãã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ¼ãƒ‰ã«ä¾å­˜ã—ã¾ã›ã‚“ã€‚CocoaPods ã§ SwiftGen ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã¯ã€å˜ã«ã“ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã®å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãŸã‚ã ã‘ã§ã™ã€‚

`podfile` ã« swiftgen pod ã‚’è¿½åŠ ï¼š

```plaintext
pod 'SwiftGen', '~> 6.0'
```

**Init**

`pod install` ã®å¾Œã€Terminalã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `cd` ã—ã¦ãã ã•ã„ã€‚

```bash
/L10NTests/Pods/SwiftGen/bin/swiftGen config init
```

init `swiftgen.yml` è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€é–‹ãã¾ã™

```yaml
strings:
  - inputs:
      - "L10NTests/Supporting Files/zh-Hant.lproj/Localizable.strings"
    outputs:
      templateName: structured-swift5
      output: "L10NTests/Supporting Files/SwiftGen-L10n.swift"
      params:
        enumName: "L10n"
```

è²¼ã‚Šä»˜ã‘ã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åˆã£ãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ä¿®æ­£ã—ã¦ãã ã•ã„ï¼š

**inputs:** ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ï¼ˆDevelopmentLocalizationè¨€èªã®ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ï¼‰

**outputs:**
**output:** å¤‰æ›çµæœã® swift ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€  
**params: enumName:** ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå  
**templateName:** å¤‰æ›ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

`swiftGen template list` ã‚³ãƒãƒ³ãƒ‰ã§çµ„ã¿è¾¼ã¿ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä¸€è¦§ã‚’å–å¾—ã§ãã¾ã™

![flat v.s. structured](/assets/48a8526c1300/1*J5ZOMW6BC-fDqSlh-My2Pg.jpeg)

flat ã¨ structured

é•ã„ã¯ã€Key ã®ã‚¹ã‚¿ã‚¤ãƒ«ãŒ `XXX.YYY.ZZZ` ã®å ´åˆã€flat ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯å°æ–‡å­—ã®ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã«å¤‰æ›ã—ã¾ã™ãŒã€structured ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯å…ƒã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä¿æŒã—ã¦ `XXX.YYY.ZZZ` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚

ç´”ç²‹ãª Swift ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯çµ„ã¿è¾¼ã¿ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç›´æ¥ä½¿ç”¨ã§ãã¾ã™ãŒã€Swift ã¨ Objective-C ãŒæ··åœ¨ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

`flat-swift5-objc.stencil` :

```php
// swiftlint:disable all
// SwiftGen ã‚’ä½¿ç”¨ã—ã¦ç”Ÿæˆ â€” https://github.com/SwiftGen/SwiftGen

{% if tables.count > 0 %}
{% set accessModifier %}{% if param.publicAccess %}public{% else %}internal{% endif %}{% endset %}
import Foundation

// swiftlint:disable superfluous_disable_command file_length implicit_return

// MARK: - Strings

{% macro parametersBlock types %}{% filter removeNewlines:"leading" %}
  {% for type in types %}
    {% if type == "String" %}
    _ p{{forloop.counter}}: Any
    {% else %}
    _ p{{forloop.counter}}: {{type}}
    {% endif %}
    {{ ", " if not forloop.last }}
  {% endfor %}
{% endfilter %}{% endmacro %}
{% macro argumentsBlock types %}{% filter removeNewlines:"leading" %}
  {% for type in types %}
    {% if type == "String" %}
    String(describing: p{{forloop.counter}})
    {% elif type == "UnsafeRawPointer" %}
    Int(bitPattern: p{{forloop.counter}})
    {% else %}
    p{{forloop.counter}}
    {% endif %}
    {{ ", " if not forloop.last }}
  {% endfor %}
{% endfilter %}{% endmacro %}
{% macro recursiveBlock table item %}
  {% for string in item.strings %}
  {% if not param.noComments %}
  {% for line in string.translation\\|split:"\n" %}
  /// {{line}}
  {% endfor %}
  {% endif %}
  {% if string.types %}
  {{accessModifier}} static func {{string.key\\|swiftIdentifier:"pretty"\\|lowerFirstWord\\|escapeReservedKeywords}}({% call parametersBlock string.types %}) -> String {
    return {{enumName}}.tr("{{table}}", "{{string.key}}", {% call argumentsBlock string.types %})
  }
  {% elif param.lookupFunction %}
  {# ã‚«ã‚¹ã‚¿ãƒ ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºé–¢æ•°ã¯ä¸»ã«ã‚¢ãƒ—ãƒªå†…è¨€èªé¸æŠç”¨ãªã®ã§ã€å‘¼ã³å‡ºã—ã”ã¨ã«å†è¨ˆç®—ã—ãŸã„ï¼ˆè¨ˆç®—ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ãŸã‚ï¼‰ #}
  {{accessModifier}} static var {{string.key\\|swiftIdentifier:"pretty"\\|lowerFirstWord\\|escapeReservedKeywords}}: String { return {{enumName}}.tr("{{table}}", "{{string.key}}") }
  {% else %}
  {{accessModifier}} static let {{string.key\\|swiftIdentifier:"pretty"\\|lowerFirstWord\\|escapeReservedKeywords}} = {{enumName}}.tr("{{table}}", "{{string.key}}")
  {% endif %}
  {% endfor %}
  {% for child in item.children %}
  {% call recursiveBlock table child %}
  {% endfor %}
{% endmacro %}
// swiftlint:disable function_parameter_count identifier_name line_length type_body_length
{% set enumName %}{{param.enumName\\|default:"L10n"}}{% endset %}
@objcMembers {{accessModifier}} class {{enumName}}: NSObject {
  {% if tables.count > 1 or param.forceFileNameEnum %}
  {% for table in tables %}
  {{accessModifier}} enum {{table.name\\|swiftIdentifier:"pretty"\\|escapeReservedKeywords}} {
    {% filter indent:2 %}{% call recursiveBlock table.name table.levels %}{% endfilter %}
  }
  {% endfor %}
  {% else %}
  {% call recursiveBlock tables.first.name tables.first.levels %}
  {% endif %}
}
// swiftlint:enable function_parameter_count identifier_name line_length type_body_length

// MARK: - å®Ÿè£…ã®è©³ç´°

extension {{enumName}} {
  private static func tr(_ table: String, _ key: String, _ args: CVarArg...) -> String {
    {% if param.lookupFunction %}
    let format = {{ param.lookupFunction }}(key, table)
    {% else %}
    let format = {{param.bundle\\|default:"BundleToken.bundle"}}.localizedString(forKey: key, value: nil, table: table)
    {% endif %}
    return String(format: format, locale: Locale.current, arguments: args)
  }
}
{% if not param.bundle and not param.lookupFunction %}

// swiftlint:disable convenience_type
private final class BundleToken {
  static let bundle: Bundle = {
    #if SWIFT_PACKAGE
    return Bundle.module
    #else
    return Bundle(for: BundleToken.self)
    #endif
  }()
}
// swiftlint:enable convenience_type
{% endif %}
{% else %}
// æ–‡å­—åˆ—ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
{% endif %}
```

ä»¥ä¸Šã¯ãƒãƒƒãƒˆã§åé›†ã—ã€Swift ã¨ Objective-C ã«å¯¾å¿œã™ã‚‹ã‚ˆã†ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã™ã€‚`flat-swift5-objc.stencil` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦å†…å®¹ã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã‹ã€[ã“ã¡ã‚‰ã‹ã‚‰ç›´æ¥ .zip ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://gist.github.com/zhgchgli0718/34cc6af6366add93f16632efd5575691/archive/bcccc0fb7367c8f9e58b8453446f0a52631aa8d1.zip){:target="_blank"} ã—ã¦ãã ã•ã„ã€‚

ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã†å ´åˆã¯ã€templateName ã§ã¯ãªã templatePath ã‚’å®£è¨€ã—ã¾ã™ï¼š

`swiftgen.yml` :

```yaml
strings:
  - inputs:
      - "L10NTests/Supporting Files/zh-Hant.lproj/Localizable.strings"
    outputs:
      templatePath: "path/to/flat-swift5-objc.stencil"
      output: "L10NTests/Supporting Files/SwiftGen-L10n.swift"
      params:
        enumName: "L10n"
```

templatePath ã®ãƒ‘ã‚¹ã‚’ .stencil ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã«ã‚ã‚‹å ´æ‰€ã«æŒ‡å®šã—ã¦ãã ã•ã„ã€‚

**ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼**

è¨­å®šãŒå®Œäº†ã—ãŸã‚‰ã€Terminalã«æˆ»ã£ã¦æ‰‹å‹•ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

```bash
/L10NTests/Pods/SwiftGen/bin/swiftGen
```

å¤‰æ›ã‚’å®Ÿè¡Œã—ãŸã‚‰ã€æœ€åˆã« Finder ã‹ã‚‰å¤‰æ›çµæœãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆSwiftGen-L10n.swiftï¼‰ã‚’æ‰‹å‹•ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ãã ã•ã„ã€‚ãã†ã™ã‚‹ã“ã¨ã§ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ä½¿ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

**Run Script**

![](/assets/48a8526c1300/1*jbpXqjsF9kROgIqRQG9JcA.png)

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š â†’ Build Phases â†’ + â†’ New Run Script Phases â†’ è²¼ã‚Šä»˜ã‘ï¼š

```bash
if [[ -f "${PODS_ROOT}/SwiftGen/bin/swiftgen" ]]; then
  echo "${PODS_ROOT}/SwiftGen/bin/swiftgen"
  "${PODS_ROOT}/SwiftGen/bin/swiftgen"
else
  echo "warning: SwiftGen ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚'pod install --repo-update' ã‚’å®Ÿè¡Œã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚"
fi
```

ã“ã‚Œã«ã‚ˆã‚Šã€æ¯å›ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ãŸã³ã«ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒæœ€æ–°ã®å¤‰æ›çµæœã‚’ç”Ÿæˆã—ã¾ã™ã€‚

**CodeBase ã§ã®ä½¿ã„æ–¹ã¯ï¼Ÿ**

![](/assets/48a8526c1300/1*8AiJIfqe5C1r9ESbfF-Y7w.png)

```swift
L10n.homeTitle
L10n.homeDescription("ZhgChgLi") // å¼•æ•°ä»˜ã
```

> Object Access ãŒã‚ã‚Œã°ã€ã‚¿ã‚¤ãƒ—ãƒŸã‚¹ã‚„ã‚³ãƒ¼ãƒ‰å†…ã§ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚­ãƒ¼ãŒ Localizable.strings ãƒ•ã‚¡ã‚¤ãƒ«ã«å®£è¨€ã•ã‚Œã¦ã„ãªã„çŠ¶æ³ã¯ç™ºç”Ÿã—ã¾ã›ã‚“ã€‚

> ã—ã‹ã—ã€SwiftGen ã¯ç‰¹å®šã®è¨€èªã‹ã‚‰ã®ã¿ç”Ÿæˆã§ãã‚‹ãŸã‚ã€ç”Ÿæˆã•ã‚ŒãŸè¨€èªã«ã‚­ãƒ¼ãŒã‚ã£ã¦ã‚‚ä»–ã®è¨€èªã§å®šç¾©ãŒæ¼ã‚Œã¦ã„ã‚‹çŠ¶æ³ã‚’é˜²ã’ã¾ã›ã‚“ã€‚ã“ã®çŠ¶æ³ã¯ä»¥ä¸‹ã® UnitTest ã§ã®ã¿ä¿è­·ã§ãã¾ã™ã€‚

**å¤‰æ›**

å¤‰æ›ã“ããŒæœ€ã‚‚é›£ã—ã„å•é¡Œã§ã™ã€‚æ—¢ã«é–‹ç™ºæ¸ˆã¿ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å¤§é‡ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ NSLocalizedString ã‚’æ–°ã—ã„ `L10n.XXX` å½¢å¼ã«å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ãã®æ–‡ï¼ˆ`String(format: NSLocalizedString`ï¼‰ã¯ã•ã‚‰ã«è¤‡é›‘ã§ã™ã€‚ã•ã‚‰ã«ã€Objective-C ã¨æ··åœ¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€Objective-C ã®æ–‡æ³•ãŒ Swift ã¨ç•°ãªã‚‹ã“ã¨ã‚‚è€ƒæ…®ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

ç‰¹åˆ¥ãªè§£æ±ºç­–ã¯ãªãã€è‡ªåˆ†ã§ Command Line Tools ã‚’ä½œæˆã™ã‚‹ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚å‰å›ã®è¨˜äº‹([ä¸Šä¸€ç¯‡æ–‡ç« ](../41c49a75a743/))ã§ç´¹ä»‹ã—ãŸã‚ˆã†ã«ã€Swift ã‚’ä½¿ã£ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã€NSLocalizedString ã®æ­£è¦è¡¨ç¾ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦å°ã•ãªãƒ„ãƒ¼ãƒ«ã‚’ä½œæˆã—å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚

ä¸€åº¦ã«ä¸€ã¤ã®ã‚·ãƒŠãƒªã‚ªã‚’å¤‰æ›ã—ã€ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ã¦ã‹ã‚‰æ¬¡ã«é€²ã‚€ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

- Swift -> NSLocalizedString å¼•æ•°ãªã—

- Swift -> NSLocalizedString ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆ

- OC -> NSLocalizedString ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã—

- OC -> ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ãã® NSLocalizedString

#### UnitTest ã‚’ä½¿ã£ã¦å„è¨€èªãƒ•ã‚¡ã‚¤ãƒ«ã¨ä¸»è¦è¨€èªãƒ•ã‚¡ã‚¤ãƒ«ã®æ¬ è½ã‚„ã‚­ãƒ¼ã®é‡è¤‡ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹

Bundle ã‹ã‚‰ `.strings` ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’èª­ã¿å–ã‚Šã€UnitTest ã‚’ä½œæˆã—ã¦ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

**Bundle ã‹ã‚‰ `.strings` ã‚’èª­ã¿è¾¼ã¿ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã™ã‚‹ï¼š**

```swift
class L10NTestsTests: XCTestCase {
    
    private var localizations: [Bundle: [Localization]] = [:]
    
    override func setUp() {
        super.setUp()
        
        let bundles = [Bundle(for: type(of: self))]
        
        //
        bundles.forEach { bundle in
            var localizations: [Localization] = []
            
            bundle.localizations.forEach { lang in
                var localization = Localization(lang: lang)
                
                if let lprojPath = bundle.path(forResource: lang, ofType: "lproj"),
                   let lprojBundle = Bundle(path: lprojPath) {
                    
                    let filesInLPROJ = (try? FileManager.default.contentsOfDirectory(atPath: lprojBundle.bundlePath)) ?? []
                    localization.localizableStringFiles = filesInLPROJ.compactMap { fileFullName -> L10NTestsTests.Localization.LocalizableStringFile? in
                        let fileName = URL(fileURLWithPath: fileFullName).deletingPathExtension().lastPathComponent
                        let fileExtension = URL(fileURLWithPath: fileFullName).pathExtension
                        guard fileExtension == "strings" else { return nil }
                        guard let path = lprojBundle.path(forResource: fileName, ofType: fileExtension) else { return nil }
                        
                        return L10NTestsTests.Localization.LocalizableStringFile(name: fileFullName, path: path)
                    }
                    
                    localization.localizableStringFiles.enumerated().forEach { (index, localizableStringFile) in
                        if let fileContent = try? String(contentsOfFile: localizableStringFile.path, encoding: .utf8) {
                            let lines = fileContent.components(separatedBy: .newlines)
                            let pattern = "\"(.*)\"(\\s*)(=){1}(\\s*)\"(.+)\";"
                            let regex = try? NSRegularExpression(pattern: pattern, options: [])
                            let values = lines.compactMap { line -> Localization.LocalizableStringFile.Value? in
                                let range = NSRange(location: 0, length: (line as NSString).length)
                                guard let matches = regex?.firstMatch(in: line, options: [], range: range) else { return nil }
                                let key = (line as NSString).substring(with: matches.range(at: 1))
                                let value = (line as NSString).substring(with: matches.range(at: 5))
                                return Localization.LocalizableStringFile.Value(key: key, value: value)
                            }
                            localization.localizableStringFiles[index].values = values
                        }
                    }
                    
                    localizations.append(localization)
                }
            }
            
            self.localizations[bundle] = localizations
        }
    }
}

private extension L10NTestsTests {
    struct Localization: Equatable {
        struct LocalizableStringFile {
            struct Value {
                let key: String
                let value: String
            }
            
            let name: String
            let path: String
            var values: [Value] = []
        }
        
        let lang: String
        var localizableStringFiles: [LocalizableStringFile] = []
        
        static func == (lhs: Self, rhs: Self) -> Bool {
            return lhs.lang == rhs.lang
        }
    }
}
```

æˆ‘å€‘å®šç¾©æˆ‘å€‘å®šç¾©äº†ä¸€å€‹ `Localization` ã‚’ä½œæˆã—ã€è§£æã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã—ã¾ã™ã€‚`Bundle` ã‹ã‚‰ `lproj` ã‚’æ¢ã—ã€ãã®ä¸­ã® `.strings` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¤ã‘ã¦ã€æ­£è¦è¡¨ç¾ã‚’ä½¿ã£ã¦å¤šè¨€èªã®æ–‡ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã—ã€`Localization` ã«æˆ»ã—ã¦å¾Œã®ãƒ†ã‚¹ãƒˆã§ä½¿ã„ã‚„ã™ãã—ã¾ã™ã€‚

**ã“ã“ã§ã„ãã¤ã‹æ³¨æ„ç‚¹ãŒã‚ã‚Šã¾ã™ï¼š**

- `Bundle(for: type(of: self))` ã‚’ä½¿ã£ã¦ Test Target ã‹ã‚‰ãƒªã‚½ãƒ¼ã‚¹ã‚’å–å¾—ã™ã‚‹

- Test Target ã® [STRINGS_FILE_OUTPUT_ENCODING](https://developer.apple.com/forums/thread/71779){:target="_blank"} ã‚’ `UTF-8` ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚ãã†ã—ãªã„ã¨ã€String ã§ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’èª­ã¿å–ã‚‹éš›ã«å¤±æ•—ã—ã¾ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ Binary ã§ã™ï¼‰ã€‚

- String ã‚’ä½¿ã£ã¦èª­ã¿è¾¼ã‚€ç†ç”±ã¯ã€é‡è¤‡ã—ãŸã‚­ãƒ¼ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚NSDictionary ã‚’ä½¿ã†ã¨ã€èª­ã¿è¾¼ã¿æ™‚ã«é‡è¤‡ã—ãŸã‚­ãƒ¼ãŒä¸Šæ›¸ãã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚

- `.strings` ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¿…ãš Test Target ã«è¿½åŠ ã—ã¦ãã ã•ã„

![](/assets/48a8526c1300/1*ERr-ef6R7dFHo1ucU6cPOQ.png)

**TestCase 1. åŒã˜ .strings ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§é‡è¤‡ã—ãŸã‚­ãƒ¼ãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’ãƒ†ã‚¹ãƒˆï¼š**

```swift
func testNoDuplicateKeysInSameFile() throws {
    localizations.forEach { (_, localizations) in
        localizations.forEach { localization in
            localization.localizableStringFiles.forEach { localizableStringFile in
                let keys = localizableStringFile.values.map { $0.key }
                let uniqueKeys = Set(keys)
                XCTAssertTrue(keys.count == uniqueKeys.count, "Localized Strings File: \(localizableStringFile.path) ã«é‡è¤‡ã—ãŸã‚­ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚")
            }
        }
    }
}
```

å…¥åŠ›ï¼š

![](/assets/48a8526c1300/1*cB5nXv1wWPzbjAOrKQ835w.png)

çµæœ:

![](/assets/48a8526c1300/1*6qIgcx0EkK7j_R17d6ljuw.png)

**TestCase 2. DevelopmentLocalization è¨€èªã¨æ¯”è¼ƒã—ã¦ã€æ¬ è½ã¾ãŸã¯ä½™åˆ†ãªã‚­ãƒ¼ãŒã‚ã‚‹ã‹ã©ã†ã‹ï¼š**

```swift
func testCompareWithDevLangHasMissingKey() throws {
    localizations.forEach { (bundle, localizations) in
        let developmentLang = bundle.developmentLocalization ?? "en"
        if let developmentLocalization = localizations.first(where: { $0.lang == developmentLang }) {
            let othersLocalization = localizations.filter { $0.lang != developmentLang }
            
            developmentLocalization.localizableStringFiles.forEach { developmentLocalizableStringFile in
                let developmentLocalizableKeys = Set(developmentLocalizableStringFile.values.map { $0.key })
                othersLocalization.forEach { otherLocalization in
                    if let otherLocalizableStringFile = otherLocalization.localizableStringFiles.first(where: { $0.name == developmentLocalizableStringFile.name }) {
                        let otherLocalizableKeys = Set(otherLocalizableStringFile.values.map { $0.key })
                        if developmentLocalizableKeys.count < otherLocalizableKeys.count {
                            XCTFail("Localized Strings File: \(otherLocalizableStringFile.path) ã«å†—é•·ãªã‚­ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚")
                        } else if developmentLocalizableKeys.count > otherLocalizableKeys.count {
                            XCTFail("Localized Strings File: \(otherLocalizableStringFile.path) ã«ä¸è¶³ã—ã¦ã„ã‚‹ã‚­ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚")
                        }
                    } else {
                        XCTFail("è¨€èª: \(otherLocalization.lang) ã« Localized Strings File ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚")
                    }
                }
            }
        } else {
            XCTFail("Bundle: \(bundle) ã« developmentLocalization ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚")
        }
    }
}
```

Input: (DevelopmentLocalization ã¨æ¯”è¼ƒã—ã¦ä»–ã®è¨€èªã§å®£è¨€ã•ã‚Œã¦ã„ãªã„ Key)

![](/assets/48a8526c1300/1*RwO-ploDVoExJmhHRpBXiA.png)

Output:

![](/assets/48a8526c1300/1*Mdt01WLvX2KBtwUhThxOSQ.png)

å…¥åŠ›ï¼šï¼ˆDevelopmentLocalization ã«ã“ã®ã‚­ãƒ¼ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ä»–ã®è¨€èªã«ã¯å­˜åœ¨ã—ã¾ã™ï¼‰

![](/assets/48a8526c1300/1*RwO-ploDVoExJmhHRpBXiA.png)

Output:

![](/assets/48a8526c1300/1*Fr-w-PXEx2N_ftYjfXTa9w.png)

### ã¾ã¨ã‚

ä»¥ä¸Šã®æ–¹æ³•ã‚’ç·åˆã—ã¦ã€ç§ãŸã¡ã¯æ¬¡ã®ã‚‚ã®ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

- æ–°ã—ã„ Xcode ã¯ .strings ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æ­£ç¢ºã•ã‚’ä¿è¨¼ã—ã¾ã™ âœ…

- SwiftGen ã¯ã‚³ãƒ¼ãƒ‰å†…ã§å¤šè¨€èªã‚’å‚ç…§ã™ã‚‹éš›ã®èª¤å­—ã‚„æœªå®£è¨€ã®å‚ç…§ã‚’é˜²ãã¾ã™ âœ…

- UnitTest ã§å¤šè¨€èªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ­£ç¢ºã•ã‚’ä¿è¨¼ã—ã¾ã™ âœ…

[![](https://opengraph.githubassets.com/5e3a8099a333f9bf5a74339f82426afdd235c5a6ca6b9910196a4b961eb2b31a/zhgchgli0718/L10NTests)](https://github.com/zhgchgli0718/L10NTests){:target="_blank"}

#### åˆ©ç‚¹ï¼š

- ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚’é…ãã›ãšã€é«˜é€Ÿã«å®Ÿè¡Œ

- iOS é–‹ç™ºè€…ãªã‚‰èª°ã§ã‚‚ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å¯èƒ½

### ä¸Šç´š

#### ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

ã“ã®è§£æ±ºç­–ã¯å®Ÿç¾ã§ããšã€ã‚„ã¯ã‚Šå…ƒã® [Swiftã§æ›¸ã‹ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†](../41c49a75a743/) å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãŸã ã—ã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆéƒ¨åˆ†ã¯ git ã® pre-commit ã§è¡Œãˆã°ã‚ˆãã€diff ã«å¤‰æ›´ãŒãªã‘ã‚Œã°å®Ÿè¡Œã—ãªã„ã®ã§ã€æ¯å›ãƒ“ãƒ«ãƒ‰æ™‚ã«èµ°ã‚‰ã›ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ï¼š

```bash
#!/bin/sh

diffStaged=${1:-\-\-staged} # $1ãŒã‚ã‚Œã°ä½¿ç”¨ã€ãªã‘ã‚Œã°ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§--stagedã€‚

git diff --diff-filter=d --name-only $diffStaged \\| grep -e 'Localizable.*\.\(strings\\\|stringsdict\)$' \\| \
  while read line; do
    // ${line} ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’è¡Œã†
done
```

#### .stringdict

åŒã˜åŸç†ã¯ `.stringdict` ã«ã‚‚é©ç”¨ã§ãã¾ã™ã€‚

#### CI/CD

swiftgen ã¯æ¯å›ãƒ“ãƒ«ãƒ‰æ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€Build Phase ã«å…¥ã‚Œã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ“ãƒ«ãƒ‰å¾Œã«ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã‚‹ãŸã‚ã€å¤‰æ›´ãŒã‚ã£ãŸã¨ãã ã‘ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ç”Ÿæˆã™ã‚Œã°ååˆ†ã§ã™ã€‚

#### ã©ã® Key ãŒé–“é•ã£ã¦ã„ã‚‹ã‹ã‚’æ˜ç¢ºã«æŠŠæ¡ã™ã‚‹

UnitTest ã®ã‚³ãƒ¼ãƒ‰ã‚’æœ€é©åŒ–ã—ã¦ã€ã©ã®ã‚­ãƒ¼ãŒ Missing/Reductant/Duplicate ã§ã‚ã‚‹ã‹ã‚’æ˜ç¢ºã«å‡ºåŠ›ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

#### ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®å¤šè¨€èªä½œæ¥­ã‚’å®Œå…¨ã«è§£æ”¾ã™ã‚‹

ä»¥å‰ã®ã€Œ[2021 Pinkoi Tech Career Talk â€” é«˜åŠ¹ç‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒãƒ¼ãƒ å¤§è§£å¯†](../11f6c8568154/)ã€ã®è¬›æ¼”å†…å®¹ã¨åŒæ§˜ã«ã€å¤§è¦æ¨¡ãƒãƒ¼ãƒ ã§ã¯å¤šè¨€èªå¯¾å¿œã®ä½œæ¥­ã‚’ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚µãƒ¼ãƒ“ã‚¹ã§åˆ†å‰²ã—ã€å¤šè¨€èªä½œæ¥­ã®ä¾å­˜é–¢ä¿‚ã‚’ç®¡ç†ã§ãã¾ã™ã€‚

![](/assets/48a8526c1300/1*YQi4ti2_MfUapUSRKnF5dg.png)

ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯ã‚­ãƒ¼ã‚’å®šç¾©ã™ã‚‹ã ã‘ã§ã€å¤šè¨€èªã¯CI/CDæ®µéšã§ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰è‡ªå‹•çš„ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã‚‹ãŸã‚ã€æ‰‹å‹•ã§ã®ç®¡ç†ãŒæ¸›ã‚Šã€ãƒŸã‚¹ã‚‚èµ·ã“ã‚Šã«ãããªã‚Šã¾ã™ã€‚

### ç‰¹åˆ¥ãªæ„Ÿè¬

![[Wei Cao](https://www.linkedin.com/in/wei-cao-67b5b315a/){:target="_blank"} , Pinkoiã®iOSé–‹ç™ºè€…](/assets/48a8526c1300/1*CCGSKp2-BvATpDAuRiRuRQ.jpeg)

[Wei Cao](https://www.linkedin.com/in/wei-cao-67b5b315a/){:target="_blank"} ã€Pinkoiã®iOSé–‹ç™ºè€…

ã”è³ªå•ã‚„ã”æ„è¦‹ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€[ã“ã¡ã‚‰ã‹ã‚‰ã”é€£çµ¡ãã ã•ã„](https://www.zhgchg.li/contact){:target="_blank"} ã€‚

*[Post](https://medium.com/zrealm-ios-dev/ios-%E7%82%BA%E5%A4%9A%E8%AA%9E%E7%B3%BB%E5%AD%97%E4%B8%B2%E8%B2%B7%E4%BB%BD%E4%BF%9D%E9%9A%AA%E5%90%A7-48a8526c1300){:target="_blank"} ã¯ [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"} ã«ã‚ˆã£ã¦ Medium ã‹ã‚‰å¤‰æ›ã•ã‚Œã¾ã—ãŸã€‚