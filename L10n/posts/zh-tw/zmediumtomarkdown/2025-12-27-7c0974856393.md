---
author: ZhgChgLi
categories:
- ZRealm Dev.
date: 2025-12-27T09:02:01.853+0000
description: App Store Connect Webhook æ‡‰ç”¨æ¡ˆä¾‹åˆ†æèˆ‡å¯¦éš›ä¸²æ¥ä½¿ç”¨æ•™å­¸ã€‚
image:
  path: /assets/7c0974856393/1*IqytjX72CmAx9WOx4Rm3gg.jpeg
last_modified_at: 2025-12-27T09:05:14.180+0000
render_with_liquid: false
tags:
- ios-app-development
- cicd
- webhooks
- fastlane
- app-store
title: CI/CD ä½¿ç”¨ App Store Connect API Webhook ä¸²æ¥è‡ªå‹•åŒ–å·¥ä½œæµç¨‹
---

### \[CI/CD\] ä½¿ç”¨ App Store Connect API Webhook ä¸²æ¥è‡ªå‹•åŒ–å·¥ä½œæµç¨‹

App Store Connect Webhook æ‡‰ç”¨æ¡ˆä¾‹åˆ†æèˆ‡å¯¦éš›ä¸²æ¥ä½¿ç”¨æ•™å­¸ã€‚



![Photo by [Volodymyr Hryshchenko](https://unsplash.com/@lunarts?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText){:target="_blank"}](/assets/7c0974856393/1*IqytjX72CmAx9WOx4Rm3gg.jpeg)

Photo by [Volodymyr Hryshchenko](https://unsplash.com/@lunarts?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText){:target="_blank"}
#### å‰è¨€

è˜‹æœè¿‘å¹´æŒçºŒæ“´å…… App Store Connect APIï¼Œå°é–‹ç™¼è€…æ˜¯ä¸€å¤§ç¦éŸ³ã€‚æ—©æœŸé€£æ†‘è­‰ç®¡ç†éƒ½å¾—é ã€ŒHardcoreã€çš„ Web Sessionï¼ˆæœ‰æœŸé™ã€é‚„è¦æ”¶ç°¡è¨Šé©—è­‰ç¢¼ï¼‰ï¼Œå¾ˆé›£æ•´åˆé€² CI/CDï¼›åƒå•†åŸè©•åƒ¹ä¹Ÿåªèƒ½ä¾è³´ä¸ç©©å®šçš„ RSSã€‚

é€™å¹¾å¹´å¹¾ä¹æ¯å¹´éƒ½æœ‰æ–°åŠŸèƒ½è£œé½Šï¼Œå¾é–‹ç™¼ã€æ¸¬è©¦åˆ°éƒ¨ç½²æµç¨‹ï¼Œç”šè‡³å¾ŒæœŸçš„è©•åƒ¹ã€è²¡å‹™ã€æ•¸æ“šå ±è¡¨éƒ½é€æ­¥åŸç”Ÿæ”¯æ´ï¼Œå¦å¤–ä¹Ÿå¼·åŒ–äº†ä½¿ç”¨è€…ç®¡ç†ã€ç¾¤çµ„ã€TestFlight ç­‰èƒ½åŠ›ï¼›è®“ **App Store Connect API å¯ä»¥æ›´å¥½çš„æå‡ Apple é–‹ç™¼è€…é–‹ç™¼é«”é©—** ã€‚


> _å»¶ä¼¸é–±è®€ï¼šã€Œ [App Store Connect API ç¾å·²æ”¯æ´ è®€å–å’Œç®¡ç† Customer Reviews](../f1365e51902c/) ã€_ 




#### [WWDC 2025 Automate your development process with the App Store Connect API](https://developer.apple.com/videos/play/wwdc2025/324/){:target="_blank"}


[![](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9859/9859_wide_250x141_2x.jpg)](https://developer.apple.com/videos/play/wwdc2025/324/){:target="_blank"}


**2025 WWDC æ›´å¸¶ä¾†å¼•é ¸æœŸç›¼çš„é‡ç£…åŠŸèƒ½ â€” Webhook é€šçŸ¥ï¼š**
- **å»ºç½®ç‰ˆæœ¬ä¸Šå‚³ç‹€æ…‹ \(The [status of a build upload](https://developer.apple.com/help/app-store-connect/reference/app-uploads/build-upload-statuses){:target="_blank"} changes\. \)** 
ç•¶å»ºç½®ç‰ˆæœ¬ä¸Šå‚³ç‹€æ…‹æ›´æ”¹æ™‚æ”¶åˆ°ç›¸é—œè³‡æ–™ã€‚
`Complete / Failed / Processing`
- **App ç‰ˆæœ¬ç‹€æ…‹ \(The [status of an app version](https://developer.apple.com/help/app-store-connect/reference/app-information/app-and-submission-statuses#app-statuses){:target="_blank"} changes\. \)** 
ç•¶ App ç‰ˆæœ¬ç‹€æ…‹æ›´æ”¹æ™‚æ”¶åˆ°ç›¸é—œè³‡æ–™ã€‚
`Prepare for Submission / Ready for Review / Waiting for Review / Ready for Distribution / Rejectedâ€¦`
- **TestFlight ç‰ˆæœ¬ç‹€æ…‹ \(New [TestFlight feedback](https://developer.apple.com/help/app-store-connect/test-a-beta-version/view-tester-feedback){:target="_blank"} is submitted by a tester\. \)** 
ç•¶æ¸¬è©¦äººå“¡ç•™ä¸‹å›é¥‹\(ç•¶æ©Ÿå›é¥‹/æˆªåœ–å›é¥‹\)æ™‚æ”¶åˆ°ç›¸é—œè³‡æ–™ã€‚
- **Apple\-hosted çš„è³‡æºåŒ…ç‹€æ…‹æ”¹è®Š \(The [status of an Apple\-hosted asset pack version](https://developer.apple.com/help/app-store-connect/reference/app-uploads/apple-hosted-asset-pack-statuses){:target="_blank"} changes\. \)** 
ç•¶ Apple è¨—ç®¡çš„ç´ æåŒ…ç‰ˆæœ¬å‡ºç¾ç‰¹å®šè®Šæ›´æ™‚æ”¶åˆ°ç›¸é—œè³‡æ–™ã€‚

#### [App Store Connect API / Webhook notifications](https://developer.apple.com/documentation/AppStoreConnectAPI/webhook-notifications){:target="_blank"} :


> _Webhooks enable a system to send real\-time data to another system over the web\._ 
 

> _Webhook è®“ä¸€å€‹ç³»çµ±èƒ½å¤ é€éç¶²è·¯å³æ™‚å°‡è³‡æ–™å‚³é€çµ¦å¦ä¸€å€‹ç³»çµ±ã€‚_ 





> _Unlike traditional APIs, where one system must make a request when receiving data, a webhook enables you to push data to the receiving system as soon as an event occurs\._ 
 

> _èˆ‡å‚³çµ± API ä¸åŒçš„æ˜¯ï¼Œå‚³çµ± API éœ€è¦ç”±æ¥æ”¶è³‡æ–™çš„ä¸€æ–¹ä¸»å‹•ç™¼é€è«‹æ±‚ï¼Œè€Œ Webhook å‰‡èƒ½åœ¨äº‹ä»¶ç™¼ç”Ÿçš„ç•¶ä¸‹ï¼Œç«‹å³å°‡è³‡æ–™æ¨é€çµ¦æ¥æ”¶ç³»çµ±ã€‚_ 





> _Webhooks are event\-driven, meaning they are triggered by a specific action or event and immediately send the relevant data to a predefined URL, also called the â€œwebhook URLâ€ or â€œcallback URLâ€\._ 
 

> _Webhook æ˜¯äº‹ä»¶é©…å‹•çš„ï¼Œè¡¨ç¤ºå®ƒå€‘æœƒåœ¨ç‰¹å®šå‹•ä½œæˆ–äº‹ä»¶è¢«è§¸ç™¼æ™‚ï¼Œç«‹å³å°‡ç›¸é—œè³‡æ–™å‚³é€åˆ°ä¸€å€‹é å…ˆè¨­å®šçš„ URLï¼Œè©² URL ä¹Ÿç¨±ç‚ºã€ŒWebhook URLã€æˆ–ã€ŒCallback URLã€ã€‚_ 





> _A notification webhook is an endpoint you create on your server\._ 
 

> _é€šçŸ¥å‹ Webhook æ˜¯ä½ åœ¨è‡ªå·±ä¼ºæœå™¨ä¸Šå»ºç«‹çš„ä¸€å€‹ç«¯é»ï¼ˆendpointï¼‰ã€‚_ 





> _This webhook endpoint receives HTTP POST requests from App Store Connect\._ 
 

> _é€™å€‹ Webhook ç«¯é»æœƒæ¥æ”¶ä¾†è‡ª App Store Connect çš„ HTTP POST è«‹æ±‚ã€‚_ 





> _The POST requests describe important events about your app\._ 
 

> _é€™äº› POST è«‹æ±‚æœƒæè¿°èˆ‡ä½ çš„ App ç›¸é—œçš„é‡è¦äº‹ä»¶ã€‚_ 





> _Use the webhooks notifications endpoint to configure the notifications for events happening to your apps\._ 
 

> _ä½ å¯ä»¥ä½¿ç”¨ Webhook é€šçŸ¥ç«¯é»ï¼Œä¾†è¨­å®šç•¶ä½ çš„ App ç™¼ç”Ÿå„ç¨®äº‹ä»¶æ™‚æ‰€è¦æ¥æ”¶çš„é€šçŸ¥ã€‚_ 




### 5 å€‹æ‡‰ç”¨æ¡ˆä¾‹
#### 1\. å»ºç½®è™•ç†å®Œæˆå¾Œè§¸ç™¼é€å¯©

**Before:**


![](/assets/7c0974856393/1*usYZtMkzAu-bA4fVX8ZbUQ.png)


ä»¥å¾€åœ¨å¯¦ç¾ App CI/CD æ‰“åŒ…é€å¯©æ™‚ï¼Œæ‰“åŒ…ä¸Šå‚³å¾Œ **éœ€è¦ç­‰å¾… Apple è™•ç†å®Œæˆ** æ‰èƒ½ç¹¼çºŒé€å¯©ï¼›Fastlane é»˜èªçš„åšæ³•æ˜¯ Polling App Store Connect æª¢æŸ¥ä¸Šå‚³çš„å»ºç½®ç‹€æ…‹ï¼Œç›´åˆ° Complete å¾Œæ‰æœƒç¹¼çºŒåŸ·è¡Œé€å¯© Laneã€‚


> **_ç­‰å¾…æ™‚é–“å¤§ç´„ 20 åˆ†é˜_** _ï¼Œå¦‚æœæ˜¯ Self\-hosted CI/CD æ²’ä»€éº¼å·®ï¼Œä½†å¦‚æœæ˜¯ä½¿ç”¨é›²ç«¯æœå‹™ï¼Œé€™ 20 åˆ†é˜çš„ç­‰å¾…éå¸¸çš„æµªè²»è³‡æºï¼Œä»¥ GitHub Runner mac\-OS 1 åˆ†é˜ US$ 0\.062ï¼Œ **å…‰ç­‰å¾…é€å¯©æ¯æ¬¡å°±ç”¢ç”Ÿç„¡æ„ç¾©çš„èŠ±è²» 1\.24 US$ã€‚**_ 






![Ref: [Build Completed Processing é€šçŸ¥ä¿¡ æ­é… Gmail Filter \+ Google Apps Script](../d414bdbdb8c9/)](/assets/7c0974856393/1*2-Zn2ApgVYd5S5KzxMLEMQ.png)

Ref: [Build Completed Processing é€šçŸ¥ä¿¡ æ­é… Gmail Filter \+ Google Apps Script](../d414bdbdb8c9/)

åœ¨æ²’æœ‰ Webhook å¯ä»¥ä¸»å‹•é€šçŸ¥çš„å¹´ä»£ï¼Œä¹‹å‰æ›¾ç”¨éã€Œ [Build Completed Processing é€šçŸ¥ä¿¡æ­é… Gmail Filter \+ Google Apps Script ä¾†è§¸ç™¼](../d414bdbdb8c9/) ã€å¯ä»¥é”åˆ°æ•ˆæœï¼Œä½†æ˜¯éç¨‹æœ‰é» Hardcoreã€‚

**After:**


![](/assets/7c0974856393/1*ADkNoScFn4M_dIgv3sAKaw.png)

- æœ‰äº† Webhook ä¹‹å¾Œï¼Œæ‰“åŒ…ä¸Šå‚³çš„æ­¥é©Ÿä¸Šå‚³å®Œç•¢å³å¯çµæŸã€‚
- **App Store Connect Build Process Complete å¾Œæœƒç™¼ Webhook é€šçŸ¥ï¼Œæˆ‘å€‘æ”¶åˆ°é€šçŸ¥å¾Œå†ç¹¼çºŒåŸ·è¡Œé€å¯©æ­¥é©Ÿã€‚**
- **é›¶ä¹¾ç­‰æˆæœ¬**

#### 2\. GitFlow Release æµç¨‹å°é½Š App Release æ™‚æ©Ÿé»

**Before:**


> _GitFlow æœ€å¾Œä¸€æ­¥ä¸Šç·šæ™‚éœ€è¦æŠŠ develop åˆ†æ”¯ merge å› master åˆ†æ”¯ï¼Œmaster åˆ†æ”¯å°æ‡‰çš„æ˜¯ç•¶å‰ç·šä¸Šç‰ˆã€‚_ 





ä»¥å¾€åªèƒ½å®šæ™‚æ‰‹å‹•/è‡ªå‹•åŸ·è¡Œï¼Œä¾‹å¦‚é€±ä¸€ PM æœƒç™¼ä½ˆ Appï¼Œé€±ä¸€å›ºå®šæŠŠ develop å› masterï¼›æ‰‹å‹•åŸ·è¡Œå¾ˆç…©ã€è‡ªå‹•åŸ·è¡Œçš„è©±å‡è¨­å»¶æœŸï¼Ÿé€±ä¸€å‰›å¥½æ”¾å‡ï¼Ÿå¯¦éš› App æ²’æœ‰ Release ä½†æ˜¯ develop å…ˆå› master äº†ã€‚

åœ¨å¤§å¤šæ•¸æƒ…æ³ä¸å¤ªé‡è¦ï¼Œåªæœ‰å¾ˆæ¥µç«¯çš„ç‹€æ³ï¼Œä¾‹å¦‚é€™æ™‚é–“ä¸­é–“åˆè¦æ’ Hotfix å°±æœƒæœ‰å¯èƒ½æœ‰è½å·®ï¼›ä½†è‹¥è¦è¿½æ±‚å®Œæ•´ç©©å®šçš„ CI/CD é–‹ç™¼æµç¨‹ï¼Œé€™ä¹Ÿæ˜¯ä¸€å€‹å€¼å¾—æ¢è¨çš„æ¡ˆä¾‹ã€‚

**å¦ä¸€æ¢æ€è·¯åŒä¸Šï¼Œç”¨ã€Œ [App is Ready for Sale é€šçŸ¥ä¿¡æ­é… Gmail Filter \+ Google Apps Script ä¾†è§¸ç™¼](../d414bdbdb8c9/) ã€æ˜¯å¯è¡Œçš„ã€‚**

**After:**


![](/assets/7c0974856393/1*6JjHC6GKc4fKXrh-WWCJVA.png)

- æœ‰äº† Webhook ä¹‹å¾Œï¼Œå¯ä»¥ç›´æ¥åœ¨æ”¶åˆ° App ç™¼å¸ƒé€šçŸ¥å¾Œè§¸ç™¼ CI/CD Action \(Master to Develop\)ã€‚
- å¯ä»¥ç¢ºä¿ App æ˜¯çœŸçš„ä¸Šç·šæ‰å› Master

#### 3\. App Release Messages


> _App ä¸Šç·šç™¼ä½ˆçµ¦ä½¿ç”¨è€…å¾Œï¼Œé‚„æœ‰å¦ä¸€å€‹å¾ˆå¸¸è¦‹å…§éƒ¨å·¥ä½œæµç¨‹ï¼Œç™¼å¸ƒé€šçŸ¥çµ¦ç›¸é—œåœ˜éšŠã€ç‰ˆæœ¬åŒ…å«çš„ä»»å‹™ã€Complete ç›¸é—œä»»å‹™ã€‚_ 





**Before:**

åŒä¸Šï¼Œåªèƒ½æ‰‹å‹•æˆ–å®šæ™‚è‡ªå‹•æˆ–ä½¿ç”¨ä¿¡ä»¶ [**æ­é… Gmail Filter \+ Google Apps Script ä¾†è§¸ç™¼**](../d414bdbdb8c9/) ã€‚

**After:**


![](/assets/7c0974856393/1*UuGPKonNhXRUMZ71rDQcdw.png)

- æœ‰äº† Webhook ä¹‹å¾Œï¼Œå¯ä»¥åœ¨æ”¶åˆ° App ç™¼å¸ƒé€šçŸ¥å¾Œä¸²æ¥ Jira/Asana API æ’ˆå–å°æ‡‰ç‰ˆè™Ÿçš„å–®æ‰¹æ¬¡ Complete ä¸¦ä¸”ç™¼ä½ˆåŒ…å«çš„ä»»å‹™å–®å®Œæˆé‡‹å‡ºè¨Šæ¯åˆ° Slackã€‚

#### 4\. Build Failed / Review Rejected Notifier


> _å‰é¢ 1,2 æœ‰æåˆ°ä»¥å¾€æœ‰æ©Ÿæœƒé€éæ”¶ä¿¡ä»¶é€šçŸ¥ä¾†è§¸ç™¼å·¥ä½œæµç¨‹ï¼Œä½†åœ¨åœ˜éšŠè¦æ¨¡å¾ˆå¤§æ¬Šé™æ§ç®¡åš´æ ¼çš„çµ„ç¹”è£¡ï¼Œ **iOS é–‹ç™¼è€…åªæœƒæœ‰ã€Œé–‹ç™¼è€…ã€å¾Œå°æ¬Šé™ï¼Œç„¡æ³•é‡‹å‡ºã€ç®¡ç† Appï¼Œå› æ­¤ä¹Ÿç„¡æ³•æ”¶åˆ°ä»»ä½• App ç‹€æ…‹æ”¹è®Šçš„ä¿¡ä»¶é€šçŸ¥ï¼›å…¶ä¸­ä¹ŸåŒ…å«ä¸Šå‚³çš„å»ºç½®ç‰ˆæœ¬è¢«æ‹’æˆ–æ˜¯é€å¯©è¢«æ‹’çš„é€šçŸ¥ä¿¡** ã€‚_ 





**Before:**

ä»¥å¾€åªèƒ½é å¥½å¿ƒäºº \(a\.k\.a PM\) è½‰ç™¼ä¿¡ä»¶çµ¦å·¥ç¨‹ï¼Œå¦‚æœå¥½å¿ƒäººä¹Ÿæ²’æ³¨æ„åˆ°å¯èƒ½å°±çœŸçš„åˆ°è¦ä¸Šç·šæ™‚æ‰ç™¼ç¾ App è¢«æ‹’çµ•äº†ç„¡æ³•ä¸Šç·šï¼

**After:**


![](/assets/7c0974856393/1*unKq9zdc8tJEqlNmfXiRYA.png)

- é€™å€‹æ¡ˆä¾‹ç›¸å°ç°¡å–®ï¼Œå°±æ˜¯æ”¶åˆ° Webhook é€šçŸ¥ä¹‹å¾Œï¼Œè½‰ç™¼è¨Šæ¯åˆ° Slackã€‚

#### 5\. Testflight Feedback Notifier


> _é¡ä¼¼ 4\. åªæ˜¯æ”¹æ¥ Testflight Feedback Webhook é€šçŸ¥ã€‚_ 





**Before:**

ä»¥å¾€é–‹ç™¼è€…åªèƒ½è‡ªå·±ä¸Šå» App Store Connect Testflight å¾Œå°æŸ¥çœ‹æ¸¬è©¦ä½¿ç”¨è€…çš„å›é¥‹æˆ–é–ƒé€€å•é¡Œï¼Œ **éå¸¸å®¹æ˜“è¢«å¿½ç•¥ï¼ˆç”šè‡³æ›¾ç¶“ç™¼ç”Ÿéä¸€å¹´å‰å›å ±çš„å»ºè­°å•é¡Œä¸€å¹´å¾Œæ‰æœ‰äººçœ‹åˆ°ï¼‰** ã€‚

**After:**
- æ”¶åˆ° Testflight Feedback Webhook é€šçŸ¥ä¹‹å¾Œï¼Œè½‰ç™¼è¨Šæ¯åˆ° Slack ã€‚


â€” â€” â€”


> _å…¶ä»–æ‡‰ç”¨æ–¹å¼æ­¡è¿å¤§å®¶å¤©é¦¬è¡Œç©ºç™¼æƒ³ï¼Œå†ä¾†å°‡ä»‹ç´¹å¦‚ä½•ä¸²æ¥ä½¿ç”¨ã€‚_ 



### App Store Connect API Webhook è¨­å®š


> _æ¬Šé™è¦æ±‚ï¼š **éœ€è¦ Admin, Account Holder æ¬Šé™æ‰èƒ½è¨­å®š** ã€‚_ 




#### å»ºç«‹ App Store Connect API Webhook é€šçŸ¥
1. [å‰å¾€ App Store Connect ç®¡ç†å¾Œå°](https://appstoreconnect.apple.com/access/users){:target="_blank"}
2. å‰å¾€ã€Œä½¿ç”¨è€…èˆ‡å­˜å–æ¬Šé™ \(Users and Access\)ã€ \-&gt; ã€Œæ•´åˆ \(Integrations\)ã€
3. é»æ“Šã€Œå…¶ä»–æ•´åˆ \(Additional\)ã€ ä¸‹çš„ ã€ŒWebhooksã€
4. é»æ“Šã€Œå»ºç«‹ Webhookã€æŒ‰éˆ•



![](/assets/7c0974856393/1*e_6oin7tJjAB2gXl3txJow.jpeg)

- åç¨±ï¼šè¼¸å…¥ Webhook åç¨±
- æ‰¿è¼‰ URL\(Payload URL\)ï¼šè¼¸å…¥ä½ çš„ Webhook é€šçŸ¥æ¥æ”¶æœå‹™ç¶²å€
- å¯†é‘°\(Secret\) å­—ä¸²ï¼šWebhook Request é©—è­‰å¯†é‘°\(å¯ [éš¨æ©Ÿç”¢ç”Ÿä¸€å€‹å­—ä¸²](https://www.random.org/strings/?num=1&len=32&digits=on&upperalpha=on&loweralpha=on&unique=on&format=html&rnd=new){:target="_blank"} ä¾†ç”¨\)
- Appï¼šé¸æ“‡é æ¥æ”¶ Webhook é€šçŸ¥çš„ App
- **è§¸ç™¼äº‹ä»¶ï¼š**

```css
TestFlight å›é¥‹
ç•¶æ¸¬è©¦äººå“¡ç•™ä¸‹å›é¥‹æ™‚æ”¶åˆ°ç›¸é—œè³‡æ–™ã€‚
[] ç•¶æ©Ÿå›é¥‹
[] æˆªåœ–å›é¥‹

[] TestFlight ç‰ˆæœ¬ç‹€æ…‹
ç•¶ TestFlight ç‰ˆæœ¬ç‹€æ…‹æ›´æ”¹æ™‚æ”¶åˆ°ç›¸é—œè³‡æ–™ã€‚é€²ä¸€æ­¥ç­è§£

[]App ç‰ˆæœ¬ç‹€æ…‹
ç•¶ App ç‰ˆæœ¬ç‹€æ…‹æ›´æ”¹æ™‚æ”¶åˆ°ç›¸é—œè³‡æ–™ã€‚é€²ä¸€æ­¥ç­è§£

[]å»ºç½®ç‰ˆæœ¬ä¸Šå‚³ç‹€æ…‹
ç•¶å»ºç½®ç‰ˆæœ¬ä¸Šå‚³ç‹€æ…‹æ›´æ”¹æ™‚æ”¶åˆ°ç›¸é—œè³‡æ–™ã€‚é€²ä¸€æ­¥ç­è§£

èƒŒæ™¯ç´ æ
ç•¶ Apple è¨—ç®¡çš„ç´ æåŒ…ç‰ˆæœ¬å‡ºç¾ç‰¹å®šè®Šæ›´æ™‚æ”¶åˆ°ç›¸é—œè³‡æ–™ã€‚é€²ä¸€æ­¥ç­è§£

[]æ›´æ–°App Store ç™¼ä½ˆç‰ˆæœ¬
[]æ›´æ–°å¤–éƒ¨ TestFlight ç™¼ä½ˆç‰ˆæœ¬
[]å»ºç«‹å…§éƒ¨ TestFlight ç™¼ä½ˆç‰ˆæœ¬
[]æ›´æ–°ç´ æåŒ…ç‰ˆæœ¬
```

ä¾ç…§éœ€æ±‚å‹¾é¸ï¼Œä¹Ÿå¯ä»¥å…¨é¸æ”¶åˆ°é€šçŸ¥å¾Œå†åˆ¤æ–·è¦ä¸è¦è™•ç†ã€‚

**æœ€å¾Œé»æ“Šã€Œæ–°å¢ã€å»ºç«‹ Webhookã€‚**
#### æ¸¬è©¦ App Store Connect API Webhook é€šçŸ¥

é€²å…¥ Webhook é ã€‚


![](/assets/7c0974856393/1*-pEVZ24cpSPBabtzMwll4Q.png)


é»æ“Šå³ä¸Šè§’ã€Œæ¸¬è©¦ã€æ¥æ”¶æ¸¬è©¦é€šçŸ¥ã€‚

**æ¸¬è©¦é€šçŸ¥å…§å®¹å¦‚ä¸‹ï¼š**
```json
Headers:
{
  "content-type": "application/json",
  "x-apple-jingle-correlation-key": "PNSCHDQW3MY2AX6VSRFHYYNUL4",
  "x-apple-request-uuid": "7b64238e-16db-31a0-5fd5-944a7c61b45f",
  "x-apple-signature": "hmacsha256=cf50020f0bbd3c5274860594f616f1806965c1f9fb765d8d278f512dff5b4c0e",
}

Body:
{
  "data" : {
    "type" : "webhookPingCreated",
    "id" : "65726e27-cb79-47f2-a3e4-c8ced9f356e8",
    "version" : 1,
    "attributes" : {
      "timestamp" : "2025-12-26T15:47:38.472168681Z"
    }
  }
}
```
#### App Store Connect API Webhook é€šçŸ¥ç™¼é€ç´€éŒ„

Webhook é ä¸‹æ–¹çš„ã€Œæœ€è¿‘çš„æäº¤é …ç›®ã€æœƒé¡¯ç¤ºæœ€è¿‘ç™¼é€çš„ Webhook äº‹ä»¶ã€‚


![](/assets/7c0974856393/1*lacj5lpaDwJtN0hgA5EAVg.png)

#### é©—è­‰ App Store Connect API Webhook é€šçŸ¥

å»ºç«‹ Webhook æ™‚æˆ‘å€‘æœ‰è¼¸å…¥ä¸€å€‹ã€Œå¯†é‘°\(Secret\) å­—ä¸²ã€å»ºè­°å°è«‹æ±‚é€²è¡Œé©—è­‰ï¼Œé˜²æ­¢é€™å€‹ Webhook URL å¤–æ´©ï¼Œæœ‰å¿ƒä¹‹äººèƒ½éš¨æ„å½é€ ç™¼é€ Webhook äº‹ä»¶åˆ°ä½ çš„æœå‹™ä¸Šã€‚

**é©—è­‰æ–¹å¼ï¼š**


> _å° Request Body ç”¨ä½ è¨­å®šçš„å¯†é‘°å­—ä¸²åš HMAC\-SHA256 ä¸¦è¼¸å‡º HEX é€²ä½å­—ä¸²ï¼Œç”¨é€™å€‹å­—ä¸²æ¯”å° Request Headers ä¸­çš„ `x-apple-signature` å€¼çš„ `hmacsha256=` å¾Œé¢å¸¶çš„å­—ä¸²ã€‚_ 





**å¯¦ç¾æ–¹å¼ â€” Nodejs:**
```javascript
import crypto from 'crypto';

function verifyAppleWebhook(rawBody, appleSignature, secret) {
  const hex = crypto
    .createHmac('sha256', secret)
    .update(rawBody, 'utf8')
    .digest('hex');

  return `hmacsha256=${hex}` === appleSignature;
}
```

**å¯¦ç¾æ–¹å¼ â€” Cloudflare Worker:**
```javascript
function bufferToHex(buffer) {
  return [...new Uint8Array(buffer)]
    .map(b => b.toString(16).padStart(2, '0'))
    .join('');
}

async function hmacSha256Hex(secret, message) {
  const enc = new TextEncoder();

  const key = await crypto.subtle.importKey(
    'raw',
    enc.encode(secret),
    { name: 'HMAC', hash: 'SHA-256' },
    false,
    ['sign']
  );

  const signature = await crypto.subtle.sign(
    'HMAC',
    key,
    enc.encode(message)
  );

  return bufferToHex(signature);
}

async function verifyAppleWebhook(request, secret) {
  const appleSignature = request.headers.get('X-Apple-Signature');

  const rawBody = await request.clone().text();
  const calculated = await hmacSha256Hex(secret, rawBody);

  return "hmacsha256="+calculated === appleSignature;
}
```
- Cloudflare Worker ç„¡ crypto moduleï¼Œè¦ä½¿ç”¨ Web Crypto APIï¼ˆcrypto\.subtleï¼‰


**å¯¦ç¾æ–¹å¼ â€” Google Apps Script Web App âŒ**

ç¤™æ–¼æŠ€è¡“é™åˆ¶ï¼ŒGoogle Apps Script Web App `doGet(e)/doPost(e)` ç„¡æ³•å¾ä¸­å–å¾— Request Headersï¼Œå› æ­¤ç„¡æ³•ä½¿ç”¨æ­¤æ–¹æ³•å°è«‹æ±‚ä¾†æºé€²è¡Œé©—è­‰ã€‚

æœ€å¤šåªèƒ½è‡ªå·±åœ¨ URL Query åŠ ä¸€äº›å¯†é‘°åƒæ•¸åšå¾ˆç°¡å–®çš„åˆ¤æ–·ä¿è­·ã€‚
### App Store Connect API Webhook é€šçŸ¥ Payload

é€™é‚Šæœ‰æœé›†äº†å¹¾å€‹ App ä¸Šå‚³ã€é€å¯©éç¨‹æœƒæ”¶åˆ°çš„äº‹ä»¶ Payloadï¼Œæä¾›çµ¦å¤§å®¶åšè‡ªå‹•åŒ–é–‹ç™¼æ™‚å¯ä»¥ç›´æ¥åƒè€ƒã€‚


> _Webhook åªæœƒç™¼é€äº‹ä»¶è·Ÿç‹€æ…‹åç¨±ï¼Œä¸æœƒçµ¦å…¶ä»–è©³ç´°è³‡è¨Šï¼Œä¾‹å¦‚ï¼šç‰ˆæœ¬è™Ÿã€æ‹’å¯©åŸå› â€¦ç­‰ç­‰ï¼› **æˆ‘å€‘éœ€è¦è‡ªå·±å†æ‰“ App Store Connect API å¸¶ä¸Š Event Payload è£¡çš„ Relationships Link æ‰èƒ½å–å¾—å®Œæ•´è³‡è¨Šã€‚**_ 




#### å»ºç½®ç‰ˆæœ¬ä¸Šå‚³ â€” Process Complete
```json
{
  "data" : {
    "type" : "buildUploadStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "oldState" : "PROCESSING",
      "newState" : "COMPLETE"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "buildUploads",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/buildUploads/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```
#### å»ºç½®ç‰ˆæœ¬ä¸Šå‚³ â€” Process Failed
```json
{
  "data": {
    "type": "buildUploadStateUpdated",
    "id": "xxx-xx-xx-xx-xxx",
    "version": 1,
    "attributes": {
      "oldState": "PROCESSING",
      "newState": "FAILED"
    },
    "relationships": {
      "instance": {
        "data": {
          "type": "buildUploads",
          "id": "xxx-xx-xx-xx-xxx"
        },
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```

å¤šåŠç‚º Binary é­æ‹’ï¼Œä¾‹å¦‚æœ‰ç”¨åˆ°éº¥å…‹é¢¨ä½†æ˜¯æ²’å®£å‘Šä¹‹é¡çš„ã€‚
#### App ç‰ˆæœ¬ç‹€æ…‹ â€” Prepare For Submission \(æº–å‚™æäº¤\)
```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "PREPARE_FOR_SUBMISSION",
      "oldValue" : "DEVELOPER_REJECTED",
      "timestamp" : "2025-12-18T05:01:47.118Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```

ç•¶æ–°ç‰ˆæœ¬è™Ÿå»ºç«‹å¥½ï¼Œæº–å‚™æäº¤é€å¯©æ™‚ï¼Œé€™éšæ®µå¯å¡«å¯«ç‰ˆæœ¬è³‡è¨Šã€æ›´æ–°å…§å®¹ã€é¸æ“‡è¦é€å¯©çš„ Buildã€‚
#### **App ç‰ˆæœ¬ç‹€æ…‹ â€” Ready For Review \(æº–å‚™é€å¯©\)**
```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "READY_FOR_REVIEW",
      "oldValue" : "PREPARE_FOR_SUBMISSION",
      "timestamp" : "2025-12-18T03:41:12.516Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```

é€å¯©è³‡æ–™ç¢ºå®šï¼Œæº–å‚™é€å¯©æ™‚ã€‚
#### App ç‰ˆæœ¬ç‹€æ…‹ â€” Waiting For Review \(å·²é€å¯©ï¼Œç­‰å¾…å¯©æ ¸\)
```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "WAITING_FOR_REVIEW",
      "oldValue" : "READY_FOR_REVIEW",
      "timestamp" : "2025-12-18T03:41:21.179Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```

App å·²å®Œæˆé€å¯©ï¼Œæ­£åœ¨ç­‰å¾…å¯©æŸ¥ã€‚
#### App ç‰ˆæœ¬ç‹€æ…‹ â€” Developer Rejected \(é–‹ç™¼è€…æ‹’çµ•\)
```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "DEVELOPER_REJECTED",
      "oldValue" : "WAITING_FOR_REVIEW",
      "timestamp" : "2025-12-18T03:50:30.552Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```

é–‹ç™¼è€…æ’¤å›æ­£åœ¨é€å¯©çš„ç‰ˆæœ¬ã€‚
#### App ç‰ˆæœ¬ç‹€æ…‹ â€” In Review \(å®˜æ–¹æ­£åœ¨å¯©æ ¸\)
```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "IN_REVIEW",
      "oldValue" : "WAITING_FOR_REVIEW",
      "timestamp" : "2025-12-18T22:05:50.038Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```
#### App ç‰ˆæœ¬ç‹€æ…‹ â€” Pending Developer Release \(å¯©æ ¸å®Œç•¢ç­‰å¾…ç™¼ä½ˆ\)
```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "PENDING_DEVELOPER_RELEASE",
      "oldValue" : "IN_REVIEW",
      "timestamp" : "2025-12-18T22:34:18.785Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```


> _Pending Developer Release äº‹ä»¶çš„æ™‚é–“ æ¸›æ‰ Waiting For Review äº‹ä»¶çš„æ™‚é–“å°± ç­‰æ–¼ App é€å¯©åˆ°å¯ç™¼ä½ˆç‹€æ…‹ä¸­é–“ç­‰å¾…çš„æ™‚é–“äº†ã€‚_ 




#### App ç‰ˆæœ¬ç‹€æ…‹ â€” Ready for Distribution \(App æº–å‚™ç™¼ä½ˆ\) a\.k\.a Ready For Sale
```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "READY_FOR_DISTRIBUTION",
      "oldValue" : "PENDING_DEVELOPER_RELEASE",
      "timestamp" : "2025-12-23T06:03:50.925Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```

App å·²æº–å‚™ç™¼ä½ˆ \(å¹¾ä¹ç­‰åŒ Ready For Saleï¼Œæ²’æœ‰ Ready For Sale é€™å€‹äº‹ä»¶\)ã€‚


> _Your app has been accepted and is ready for distribution\._ 





> _To distribute your app, your [agreements](https://developer.apple.com/help/app-store-connect/manage-agreements/view-agreements-status){:target="_blank"} must be in effect\. The Account Holder can accept the latest agreements in the Business section\._ 




### App Store Connect API Webhook å·¥ä½œæµç¨‹ä¸²æ¥
#### æ–¹æ³• 1 â€” å€Ÿç”¨ Fastlane ä¸²æ¥ App Store Connect API

é€™é‚Šæœ€å¿«çš„æ–¹å¼æ˜¯ç›´æ¥ç”¨ CI/CD æœå‹™è§¸ç™¼ï¼Œç„¶å¾Œå€Ÿç”¨ Fastlane è‡ªå¸¶çš„ Spaceship ä¸²æ¥ App Store Connect APIã€‚


> _å¦‚æœä½ æœ¬ä¾† [Fastlane å°±æœ‰ä½¿ç”¨ App Store Connect API](https://docs.fastlane.tools/app-store-connect-api/){:target="_blank"} ç®¡ç† Match æ†‘è­‰ã€é€å¯©ï¼Œé€™å€‹æ–¹æ³•å¯ä»¥ç›´æ¥ç„¡ç—›ä½¿ç”¨ï¼›å¦‚æœæ²’æœ‰è¦å…ˆ [åƒè€ƒå®˜æ–¹æ–‡ä»¶](https://docs.fastlane.tools/app-store-connect-api/){:target="_blank"} ç”¢ç”Ÿ API Key è·Ÿå®‰å…¨å­˜æ”¾åœ¨ CI/CD æœå‹™çš„å¯†é‘°ä¸­ã€‚_ 






![](/assets/7c0974856393/1*FrJoXtV2lrk09KnAt2Hydg.png)

- **App Store Connect** 
1\. App æœ‰ç‹€æ…‹æ”¹è®Šæ™‚
2\. è§¸ç™¼ Webhook
- **Webhook Endpoint** 
`å¯ä»¥æ˜¯ è‡ªæ¶æœå‹™/API æˆ–æ˜¯ ç°¡å–®ç”¨ FAAS æœå‹™ (Cloudflare Worker / AWS Lambda / Cloud Functions / Google Apps Script)` 
3\. é©—è­‰ Webhook \(optional\)
4\. è™•ç† Webhook äº‹ä»¶ã€è½‰ç™¼äº‹ä»¶è«‹æ±‚åˆ° CI/CD æœå‹™ä¸ŠåŸ·è¡Œ
`e.g. é€é GitHub API è§¸ç™¼ GitHub Actions..`
- **CI/CD Service** 
`GitHub Actions / Bitbucket Pipeline / Gitlab Runnerâ€¦` 
5\. è§¸ç™¼ Action 
6\. åŸ·è¡Œ Fastlane è…³æœ¬ï¼Œå¾©ç”¨ Fastlane Spaceship é©—è­‰
- **App Store Connect** 
7\. æ‰“ App Store Connect API å–å¾—å®Œæ•´è³‡è¨Š
- **CI/CD Service** 
8\. å¾ŒçºŒæ­¥é©Ÿï¼Œä¾‹å¦‚ç™¼é€šçŸ¥ã€è§¸ç™¼å¦ä¸€å€‹ Action


**Fastlane Example:**
```ruby
  # Usage:
  #   bundle exec fastlane appStoreConnectWebhookHandler \
  #     data:'{"data":{"type":"buildUploadStateUpdated","id":"xxx-xxx-xxx-xx-xxx","version":1,"attributes":{"oldState":"PROCESSING","newState":"COMPLETE"},"relationships":{"instance":{"data":{"type":"buildUploads","id":"xxx-xxx-xxx-xx-xxx"},"links":{"self":"https://api.appstoreconnect.apple.com/v1/buildUploads/xxx-xxx-xxx-xx-xxx"}}}}}'
  # Notes:
  # - `data:` must be a JSON string.
  # - This lane is intended for local debugging (it prints the GET response).
  desc "[Automation] Handle App Store Connect webhook payload and fetch related instance via ASC API"
  lane :appStoreConnectWebhookHandler do |options|
    begin
      data = options[:data]
      UI.user_error!("Missing data") if data.empty?
      data = JSON.parse(data)
      url = data.dig("data", "relationships", "instance", "links", "self").to_s.strip
      UI.user_error!("Missing instance self url in JSON") if url.empty?

      api_key = app_store_connect_api_key(
        key_id: "xxxx",
        issuer_id: "xxxx-xxxx-xxxx-xxxx-165aa6465141",
        key_filepath: "./AuthKey_xxxx.p8",
        duration: 1200, # optional (maximum 1200)
        in_house: false # optional but may be required if using match/sigh
      )

      loadAppStoreConnectAPIKey
      #
      uri = URI.parse(url)
      http = Net::HTTP.new(uri.host, uri.port)
      http.use_ssl = true
      http.verify_mode = OpenSSL::SSL::VERIFY_PEER
      store = OpenSSL::X509::Store.new
      store.set_default_paths
      http.cert_store = store

      request = Net::HTTP::Get.new(uri.request_uri)
      token = Spaceship::ConnectAPI.token
      UI.user_error!("App Store Connect API token is not available. Make sure app_store_connect_api_key is configured correctly.") if token.nil?
      request['Authorization'] = "Bearer #{token.text}"

      request['Content-Type'] = 'application/json'
      request['Accept'] = 'application/json'

      response = http.request(request)
      UI.message("ğŸ“¡ GET #{url} Response: [#{response.code}] #{response.message}")
      UI.message(response.body)
      #

      response
      ## handle response...do next actions...
      
    rescue => e
        UI.error("âŒ Failed handle App Store Connect API Webhook: #{e}")
    end

  end
```
#### æ–¹æ³• 2â€” åœ¨ Webhook Endpoint è‡ªè¡Œè™•ç†

ç¬¬äºŒå€‹æ–¹æ³•å°±æ˜¯ç›´æ¥åœ¨ Webhook Endpoint æœå‹™ä¸Šè™•ç†å®Œæ‰€æœ‰äº‹æƒ…ï¼Œä½† **ç¼ºé»æ˜¯éœ€è¦æŠŠ App Store Connect API Key æ”¾åˆ°æœå‹™ä¸Šè·Ÿè¦è‡ªå·±åš Token é©—è­‰** ã€‚


![](/assets/7c0974856393/1*AUw59sLt97RquLhoRBp5Rw.png)


**Ruby Example:**
```php
require 'jwt'
require 'net/http'
require 'time'

keyFile = File.read('./AuthKey_XXXX.p8') # replace to your .p8 private key file (donwload from app stroe connect)
privateKey = OpenSSL::PKey::EC.new(keyFile)

payload = {
            iss: 'YOUR_ISSUE_ID', # replace to your issue id (get in app store connect user access->key->app store connect api page)
            iat: Time.now.to_i,
            exp: Time.now.to_i + 60*20,
            aud: 'appstoreconnect-v1'
          }

token = JWT.encode payload, privateKey, 'ES256', header_fields={kid:"YOUR_KEY_ID", typ:"JWT"} # replace to your key id (get in app store connect user access->key->app store connect api page)
puts token

decoded_token = JWT.decode token, privateKey, true, { algorithm: 'ES256' }
puts decoded_token

# æ›¿æ›æˆ Webhook Payload ä¸­çš„ relationships link
uri = URI("https://api.appstoreconnect.apple.com/v1/apps/APPID/customerReviews") # repleace APPID to your app id in app store connect -> your app -> app information -> apple id
https = Net::HTTP.new(uri.host, uri.port)
https.use_ssl = true

request = Net::HTTP::Get.new(uri)
request['Authorization'] = "Bearer #{token}";

response = https.request(request)
puts response.read_body
```


> _App Store Connect API Key ç”¢ç”Ÿæ–¹å¼ã€Token ç”¢ç”Ÿæ–¹å¼ã€API ä½¿ç”¨è«‹åƒè€ƒã€Œ [App Store Connect API ç¾å·²æ”¯æ´ è®€å–å’Œç®¡ç† Customer Reviews](../f1365e51902c/) ã€ã€‚_ 




### App Store Connect API Response

é€™è£¡é™„ä¸Šä¸€äº›æ”¶åˆ° Webhook Event å¾Œå†æ‰“ Relationships Link å–å¾—å®Œæ•´è³‡è¨Šçš„ä¸€äº› Response ç¯„ä¾‹ã€‚
#### å»ºç½®ç‰ˆæœ¬ä¸Šå‚³ â€” Process Complete

`https://api.appstoreconnect.apple.com/v1/buildUploads/xxx-xx-xx-xx-xxx`
```json
{
  "data": {
    "type": "buildUploads",
    "id": "xx-xx-xx-xxx-xx",
    "attributes": {
      "cfBundleShortVersionString": "1.101.0",
      "cfBundleVersion": "1",
      "createdDate": "2025-12-25T08:26:43-08:00",
      "state": {
        "errors": [],
        "warnings": [],
        "infos": [],
        "state": "COMPLETE"
      },
      "platform": "IOS",
      "uploadedDate": "2025-12-25T08:28:35-08:00"
    },
    "relationships": {
      "buildUploadFiles": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xxx-xx/relationships/buildUploadFiles",
          "related": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xxx-xx/buildUploadFiles"
        }
      }
    },
    "links": {
      "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xxx-xx"
    }
  },
  "links": {
    "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xxx-xx"
  }
}
```
#### å»ºç½®ç‰ˆæœ¬ä¸Šå‚³ â€” Process Failed

`https://api.appstoreconnect.apple.com/v1/buildUploads/xxx-xx-xx-xx-xxx`
```json
{
  "data": {
    "type": "buildUploads",
    "id": "xx-xx-xx-xx-xxx",
    "attributes": {
      "cfBundleShortVersionString": "1.101.0",
      "cfBundleVersion": "3",
      "createdDate": "2025-12-12T09:03:32-08:00",
      "state": {
        "errors": [
          {
            "code": "90683",
            "description": "Missing purpose string in Info.plist. Your appâ€™s code references one or more APIs that access sensitive user data, or the app has one or more entitlements that permit such access. The Info.plist file for the â€œMy.appâ€ bundle should contain a NSMicrophoneUsageDescription key with a user-facing purpose string explaining clearly and completely why your app needs the data. If youâ€™re using external libraries or SDKs, they may reference APIs that require a purpose string. While your app might not use these APIs, a purpose string is still required. For details, visit: https://developer.apple.com/documentation/uikit/protecting_the_user_s_privacy/requesting_access_to_protected_resources."
          }
        ],
        "warnings": [],
        "infos": [],
        "state": "FAILED"
      },
      "platform": "IOS",
      "uploadedDate": "2025-12-12T09:05:26-08:00"
    },
    "relationships": {
      "buildUploadFiles": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xx-xxx/relationships/buildUploadFiles",
          "related": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xx-xxx/buildUploadFiles"
        }
      }
    },
    "links": {
      "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xx-xxx"
    }
  },
  "links": {
    "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xx-xxx"
  }
}
```

ITMS\-90683 ç‚ºä¾‹ã€‚
#### App ç‰ˆæœ¬ç‹€æ…‹

`https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx`
```json
{
  "data": {
    "type": "appStoreVersions",
    "id": "xxx-xxx-xxx-xxx",
    "attributes": {
      "platform": "IOS",
      "versionString": "1.101.0",
      "appStoreState": "READY_FOR_SALE",
      "appVersionState": "READY_FOR_DISTRIBUTION",
      "copyright": "Â© 2025 ZhgChgLi.",
      "reviewType": "APP_STORE",
      "releaseType": "MANUAL",
      "earliestReleaseDate": null,
      "usesIdfa": null,
      "downloadable": true,
      "createdDate": "2025-12-15T19:12:55-08:00"
    },
    "relationships": {
      "ageRatingDeclaration": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/ageRatingDeclaration",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/ageRatingDeclaration"
        }
      },
      "appStoreVersionLocalizations": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appStoreVersionLocalizations",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appStoreVersionLocalizations"
        }
      },
      "build": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/build",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/build"
        }
      },
      "appStoreVersionPhasedRelease": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appStoreVersionPhasedRelease",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appStoreVersionPhasedRelease"
        }
      },
      "gameCenterAppVersion": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/gameCenterAppVersion",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/gameCenterAppVersion"
        }
      },
      "routingAppCoverage": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/routingAppCoverage",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/routingAppCoverage"
        }
      },
      "appStoreReviewDetail": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appStoreReviewDetail",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appStoreReviewDetail"
        }
      },
      "appStoreVersionSubmission": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appStoreVersionSubmission",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appStoreVersionSubmission"
        }
      },
      "appClipDefaultExperience": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appClipDefaultExperience",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appClipDefaultExperience"
        }
      },
      "appStoreVersionExperiments": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appStoreVersionExperiments",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appStoreVersionExperiments"
        }
      },
      "appStoreVersionExperimentsV2": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appStoreVersionExperimentsV2",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appStoreVersionExperimentsV2"
        }
      },
      "customerReviews": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/customerReviews",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/customerReviews"
        }
      },
      "alternativeDistributionPackage": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/alternativeDistributionPackage",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/alternativeDistributionPackage"
        }
      }
    },
    "links": {
      "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx"
    }
  },
  "links": {
    "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx"
  }
}
```


> _å¦‚å‰è¿°ï¼Œè©³ç´° App è³‡è¨Šã€ç‰ˆè™Ÿã€éŒ¯èª¤åŸå› éƒ½è¦æ‰“ API æ‰æœƒæ‹¿åˆ°ã€‚_ 




### Done

è‡³æ­¤æˆ‘å€‘å·²ç¶“å¯ä»¥é€é App Store Connect API Webhook æ›´å¥½åœ°å®Œå–„ App CI/CD åŠè‡ªå‹•åŒ–å·¥ä½œæµç¨‹ï¼Œæå‡åœ˜éšŠé–‹ç™¼æ•ˆç‡ã€‚
#### å»¶ä¼¸é–±è®€
- [**CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šCI/CD æ˜¯ä»€éº¼ï¼Ÿå¦‚ä½•é€é CI/CD æ‰“é€ ç©©å®šé«˜æ•ˆçš„é–‹ç™¼åœ˜éšŠï¼Ÿå·¥å…·é¸æ“‡ï¼Ÿ**](../c008a9e8ceca/)
- [ZReviewTender â€” å…è²»é–‹æºçš„ App Reviews ç›£æ§æ©Ÿå™¨äºº](../e36e48bb9265/)
- [App Store Connect API ç¾å·²æ”¯æ´ è®€å–å’Œç®¡ç† Customer Reviews](../f1365e51902c/)


æœ‰ä»»ä½•å•é¡ŒåŠæŒ‡æ•™æ­¡è¿ [èˆ‡æˆ‘è¯çµ¡](https://www.zhgchg.li/contact){:target="_blank"} ã€‚




_[Post](https://medium.com/zrealm-ios-dev/ci-cd-%E4%BD%BF%E7%94%A8-app-store-connect-api-webhook-%E4%B8%B2%E6%8E%A5%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B-7c0974856393){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._