---
author: ZhgChgLi
categories:
- ZRealm Dev.
date: 2018-11-12T14:38:42.897+0000
description: 除了从系统关闭通知，让使用者还有其他选择 .providesAppNotificationSettings/openSettingsFor
image:
  path: /assets/f644db1bb8bf/1*DEOMdPwDxyHca-GnYr8HIQ.jpeg
last_modified_at: 2024-04-13T07:32:20.248+0000
render_with_liquid: false
tags:
- simplified-chinese
- ios-app-development
- ios
- swift
- push-notification
- ios-12
title: iOS ≥ 12 在使用者的「设定」中增加「APP通知设定页」捷径 (Swift)
---

### iOS ≥ 12 在使用者的「设定」中增加「APP通知设定页」捷径 (Swift)



除了从系统关闭通知，让使用者还有其他选择



#### 紧接著前三篇文章：



- [iOS ≥ 10 Notification Service Extension 应用 (Swift)](../cb6eba52a342/)


- [什么？iOS 12 不需使用者授权就能传送推播通知(Swift)](../ade9e745a4bf/)


- [从 iOS 9 到 iOS 12 推播通知权限状态处理(Swift)](../fd7f92d52baa/)



我们继续针对推播进行改进，不管是原有的技术或是新开放的功能，都来尝试尝试！



### 这次是啥？



iOS ≥ 12 可以在使用者的「设定」中增加您的APP通知设定页面捷径，让使用者想要调整通知时，能有其他选择；可以跳转到「APP内」而不是从「系统面」直接关闭，ㄧ样不啰唆先上图：



![「设定」-&gt;「APP」-&gt;「通知」-&gt;「在APP中设定」](/assets/f644db1bb8bf/1*BAdVMElIjgg34meOSdHhOw.gif)



「设定」-&gt;「APP」-&gt;「通知」-&gt;「在APP中设定」



另外在使用者收到通知时，若欲使用3D Touch调整设定「关闭」通知，会多一个「在APP中设定」的选项供使用者选择



![「通知」-&gt;「3D Touch」-&gt;「…」-&gt;「关闭…」-&gt;「在APP中设定」](/assets/f644db1bb8bf/1*KMKbYQU3nPfF9XpMS5NbPQ.gif)



「通知」-&gt;「3D Touch」-&gt;「…」-&gt;「关闭…」-&gt;「在APP中设定」



### 怎么实作？



这部分的实作非常简单，第一步仅需在要求推播权限时多要求一个 **.providesAppNotificationSettings** 权限即可



```swift
//appDelegate.swift didFinishLaunchingWithOptions or....
if #available(iOS 12.0, *) {
    let center = UNUserNotificationCenter.current()
    let permissiones:UNAuthorizationOptions = [.badge, .alert, .sound, .provisional,.providesAppNotificationSettings]
    center.requestAuthorization(options: permissiones) { (granted, error) in
        
    }
}
```



![](/assets/f644db1bb8bf/1*_xztNYANTU6ilOXY_qKOKA.png)



在询问过使用者要不要允许通知之后，通知若为开启状态下方就会出现选项啰（ **不论前面使用者按允许或不允许** ）。



#### 第二步：



第二步，也是最后一步；我们要让 **appDelegate** 遵守 **UNUserNotificationCenterDelegate** 代理并实作 **userNotificationCenter( _ center: UNUserNotificationCenter, openSettingsFor notification: UNNotification?)** 方法即可！



```swift
//appDelegate.swift
import UserNotifications
@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {
    var window: UIWindow?
    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
        if #available(iOS 10.0, *) {
            UNUserNotificationCenter.current().delegate = self
        }
        
        return true
    }
    //其他部份省略...
}
extension AppDelegate: UNUserNotificationCenterDelegate {
    @available(iOS 10.0, *)
    func userNotificationCenter(_ center: UNUserNotificationCenter, openSettingsFor notification: UNNotification?) {
        //跳转到你的设定页面位置..
        //EX:
        //let VC = SettingViewController();
        //self.window?.rootViewController.present(alertController, animated: true)
    }
}
```



- 在Appdelegate的didFinishLaunchingWithOptions中实现代理


- Appdelegate遵守代理并实作方法



完成！相较于前几篇文章，这个功能实作相较起来非常简单 🏆



### 总结



这个功能跟 [前一篇](../ade9e745a4bf/) 提到的先不用使用者授权就发干扰性较低的静音推播给使用者试试水温有点类似！



都是在开发者与使用者之前架起新的桥梁，以往APP太吵，我们会直接进到设定页无情地关闭所有通知，但这样对开发者来说，以后不管好的坏的有用的…任何通知都无法再发给使用者，使用者可能也因此错过重要消息或限定优惠．



这个功能让使用者欲关闭通知时能有进到APP调整通知的选择，开发者可以针对推播项目细分，让使用者决定自己想要收到什么类型的推播。



![](/assets/f644db1bb8bf/1*ju98WxxFonEimTx2tEFO3Q.jpeg)



以 [结婚吧APP](https://itunes.apple.com/tw/app/%E7%B5%90%E5%A9%9A%E5%90%A7-%E4%B8%8D%E6%89%BE%E6%9C%80%E8%B2%B4-%E5%8F%AA%E6%89%BE%E6%9C%80%E5%B0%8D/id1356057329?ls=1&mt=8){:target="_blank"} 来说，使用者若觉得专栏通知太干扰，可个别关闭；但依然能收到重要系统消息通知．



> **p.s 个别关闭通知功能是我们APP本来就有的功能，但透过结合iOS ≥12的新通知特性能有更好的效果及使用者体验的提升**



![](/assets/f644db1bb8bf/1*DEOMdPwDxyHca-GnYr8HIQ.jpeg)



有任何问题及指教欢迎 [与我联络](https://www.zhgchg.li/contact){:target="_blank"} 。



*[Post](https://medium.com/zrealm-ios-dev/ios-12-%E5%9C%A8%E4%BD%BF%E7%94%A8%E8%80%85%E7%9A%84-%E8%A8%AD%E5%AE%9A-%E4%B8%AD%E5%A2%9E%E5%8A%A0-app%E9%80%9A%E7%9F%A5%E8%A8%AD%E5%AE%9A%E9%A0%81-%E6%8D%B7%E5%BE%91-swift-f644db1bb8bf){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}.*