---
author: ZhgChgLi
categories:
- ZRealm Dev.
date: 2025-12-27T09:02:01.853+0000
description: App Store Connect Webhook åº”ç”¨æ¡ˆä¾‹åˆ†æä¸å®é™…ä¸²æ¥ä½¿ç”¨æ•™å­¦ã€‚
image:
  path: /assets/7c0974856393/1*IqytjX72CmAx9WOx4Rm3gg.jpeg
last_modified_at: 2025-12-27T09:05:14.180+0000
render_with_liquid: false
tags:
- ios-app-development
- cicd
- webhooks
- fastlane
- app-store
- simplified-chinese
title: CI/CD ä½¿ç”¨ App Store Connect API Webhook ä¸²æ¥è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹
---

### [CI/CD] ä½¿ç”¨ App Store Connect API Webhook ä¸²æ¥è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹



App Store Connect Webhook åº”ç”¨æ¡ˆä¾‹åˆ†æä¸å®é™…ä¸²æ¥ä½¿ç”¨æ•™å­¦ã€‚



![Photo by [Volodymyr Hryshchenko](https://unsplash.com/@lunarts?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText){:target="_blank"}](/assets/7c0974856393/1*IqytjX72CmAx9WOx4Rm3gg.jpeg)



Photo by [Volodymyr Hryshchenko](https://unsplash.com/@lunarts?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText){:target="_blank"}



#### å‰è¨€



è‹¹æœè¿‘å¹´æŒç»­æ‰©å…… App Store Connect APIï¼Œå¯¹å¼€å‘è€…æ˜¯ä¸€å¤§ç¦éŸ³ã€‚æ—©æœŸè¿å‡­è¯ç®¡ç†éƒ½å¾—é ã€ŒHardcoreã€çš„ Web Sessionï¼ˆæœ‰æœŸé™ã€è¿˜è¦æ”¶ç®€è®¯éªŒè¯ç ï¼‰ï¼Œå¾ˆéš¾æ•´åˆè¿› CI/CDï¼›åƒå•†åŸè¯„ä»·ä¹Ÿåªèƒ½ä¾èµ–ä¸ç¨³å®šçš„ RSSã€‚



è¿™å‡ å¹´å‡ ä¹æ¯å¹´éƒ½æœ‰æ–°åŠŸèƒ½è¡¥é½ï¼Œä»å¼€å‘ã€æµ‹è¯•åˆ°éƒ¨ç½²æµç¨‹ï¼Œç”šè‡³åæœŸçš„è¯„ä»·ã€è´¢åŠ¡ã€æ•°æ®æŠ¥è¡¨éƒ½é€æ­¥åŸç”Ÿæ”¯æ´ï¼Œå¦å¤–ä¹Ÿå¼ºåŒ–äº†ä½¿ç”¨è€…ç®¡ç†ã€ç¾¤ç»„ã€TestFlight ç­‰èƒ½åŠ›ï¼›è®© **App Store Connect API å¯ä»¥æ›´å¥½çš„æå‡ Apple å¼€å‘è€…å¼€å‘ä½“éªŒ** ã€‚



> *å»¶ä¼¸é˜…è¯»ï¼šã€Œ [App Store Connect API ç°å·²æ”¯æ´ è¯»å–å’Œç®¡ç† Customer Reviews](../f1365e51902c/) ã€*



#### [WWDC 2025 Automate your development process with the App Store Connect API](https://developer.apple.com/videos/play/wwdc2025/324/){:target="_blank"}



[![](https://devimages-cdn.apple.com/wwdc-services/images/3055294D-836B-4513-B7B0-0BC5666246B0/9859/9859_wide_250x141_2x.jpg)](https://developer.apple.com/videos/play/wwdc2025/324/){:target="_blank"}



**2025 WWDC æ›´å¸¦æ¥å¼•é¢ˆæœŸç›¼çš„é‡ç£…åŠŸèƒ½ â€” Webhook é€šçŸ¥ï¼š**



- **å»ºç½®ç‰ˆæœ¬ä¸Šä¼ çŠ¶æ€ (The [status of a build upload](https://developer.apple.com/help/app-store-connect/reference/app-uploads/build-upload-statuses){:target="_blank"} changes. )**
  å½“å»ºç½®ç‰ˆæœ¬ä¸Šä¼ çŠ¶æ€æ›´æ”¹æ—¶æ”¶åˆ°ç›¸å…³èµ„æ–™ã€‚
  `Complete / Failed / Processing`


- **App ç‰ˆæœ¬çŠ¶æ€ (The [status of an app version](https://developer.apple.com/help/app-store-connect/reference/app-information/app-and-submission-statuses#app-statuses){:target="_blank"} changes. )**
  å½“ App ç‰ˆæœ¬çŠ¶æ€æ›´æ”¹æ—¶æ”¶åˆ°ç›¸å…³èµ„æ–™ã€‚
  `Prepare for Submission / Ready for Review / Waiting for Review / Ready for Distribution / Rejectedâ€¦`


- **TestFlight ç‰ˆæœ¬çŠ¶æ€ (New [TestFlight feedback](https://developer.apple.com/help/app-store-connect/test-a-beta-version/view-tester-feedback){:target="_blank"} is submitted by a tester. )**
  å½“æµ‹è¯•äººå‘˜ç•™ä¸‹å›é¦ˆ(å½“æœºå›é¦ˆ/æˆªå›¾å›é¦ˆ)æ—¶æ”¶åˆ°ç›¸å…³èµ„æ–™ã€‚


- **Apple-hosted çš„èµ„æºåŒ…çŠ¶æ€æ”¹å˜ (The [status of an Apple-hosted asset pack version](https://developer.apple.com/help/app-store-connect/reference/app-uploads/apple-hosted-asset-pack-statuses){:target="_blank"} changes. )**
  å½“ Apple æ‰˜ç®¡çš„ç´ æåŒ…ç‰ˆæœ¬å‡ºç°ç‰¹å®šå˜æ›´æ—¶æ”¶åˆ°ç›¸å…³èµ„æ–™ã€‚



#### [App Store Connect API / Webhook notifications](https://developer.apple.com/documentation/AppStoreConnectAPI/webhook-notifications){:target="_blank"} :



> *Webhooks enable a system to send real-time data to another system over the web.*



> *Webhook è®©ä¸€ä¸ªç³»ç»Ÿèƒ½å¤Ÿé€è¿‡ç½‘è·¯å³æ—¶å°†èµ„æ–™ä¼ é€ç»™å¦ä¸€ä¸ªç³»ç»Ÿã€‚*



> *Unlike traditional APIs, where one system must make a request when receiving data, a webhook enables you to push data to the receiving system as soon as an event occurs.*



> *ä¸ä¼ ç»Ÿ API ä¸åŒçš„æ˜¯ï¼Œä¼ ç»Ÿ API éœ€è¦ç”±æ¥æ”¶èµ„æ–™çš„ä¸€æ–¹ä¸»åŠ¨å‘é€è¯·æ±‚ï¼Œè€Œ Webhook åˆ™èƒ½åœ¨äº‹ä»¶å‘ç”Ÿçš„å½“ä¸‹ï¼Œç«‹å³å°†èµ„æ–™æ¨é€ç»™æ¥æ”¶ç³»ç»Ÿã€‚*



> *Webhooks are event-driven, meaning they are triggered by a specific action or event and immediately send the relevant data to a predefined URL, also called the â€œwebhook URLâ€ or â€œcallback URLâ€.*



> *Webhook æ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œè¡¨ç¤ºå®ƒä»¬ä¼šåœ¨ç‰¹å®šåŠ¨ä½œæˆ–äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œç«‹å³å°†ç›¸å…³èµ„æ–™ä¼ é€åˆ°ä¸€ä¸ªé¢„å…ˆè®¾å®šçš„ URLï¼Œè¯¥ URL ä¹Ÿç§°ä¸ºã€ŒWebhook URLã€æˆ–ã€ŒCallback URLã€ã€‚*



> *A notification webhook is an endpoint you create on your server.*



> *é€šçŸ¥å‹ Webhook æ˜¯ä½ åœ¨è‡ªå·±ä¼ºæœå™¨ä¸Šå»ºç«‹çš„ä¸€ä¸ªç«¯ç‚¹ï¼ˆendpointï¼‰ã€‚*



> *This webhook endpoint receives HTTP POST requests from App Store Connect.*



> *è¿™ä¸ª Webhook ç«¯ç‚¹ä¼šæ¥æ”¶æ¥è‡ª App Store Connect çš„ HTTP POST è¯·æ±‚ã€‚*



> *The POST requests describe important events about your app.*



> *è¿™äº› POST è¯·æ±‚ä¼šæè¿°ä¸ä½ çš„ App ç›¸å…³çš„é‡è¦äº‹ä»¶ã€‚*



> *Use the webhooks notifications endpoint to configure the notifications for events happening to your apps.*



> *ä½ å¯ä»¥ä½¿ç”¨ Webhook é€šçŸ¥ç«¯ç‚¹ï¼Œæ¥è®¾å®šå½“ä½ çš„ App å‘ç”Ÿå„ç§äº‹ä»¶æ—¶æ‰€è¦æ¥æ”¶çš„é€šçŸ¥ã€‚*



### 5 ä¸ªåº”ç”¨æ¡ˆä¾‹



#### 1. å»ºç½®å¤„ç†å®Œæˆåè§¦å‘é€å®¡



**Before:**



![](/assets/7c0974856393/1*usYZtMkzAu-bA4fVX8ZbUQ.png)



ä»¥å¾€åœ¨å®ç° App CI/CD æ‰“åŒ…é€å®¡æ—¶ï¼Œæ‰“åŒ…ä¸Šä¼ å **éœ€è¦ç­‰å¾… Apple å¤„ç†å®Œæˆ** æ‰èƒ½ç»§ç»­é€å®¡ï¼›Fastlane é»˜è®¤çš„åšæ³•æ˜¯ Polling App Store Connect æ£€æŸ¥ä¸Šä¼ çš„å»ºç½®çŠ¶æ€ï¼Œç›´åˆ° Complete åæ‰ä¼šç»§ç»­æ‰§è¡Œé€å®¡ Laneã€‚



> ***ç­‰å¾…æ—¶é—´å¤§çº¦ 20 åˆ†é’Ÿ*** *ï¼Œå¦‚æœæ˜¯ Self-hosted CI/CD æ²¡ä»€ä¹ˆå·®ï¼Œä½†å¦‚æœæ˜¯ä½¿ç”¨äº‘ç«¯æœåŠ¡ï¼Œè¿™ 20 åˆ†é’Ÿçš„ç­‰å¾…éå¸¸çš„æµªè´¹èµ„æºï¼Œä»¥ GitHub Runner mac-OS 1 åˆ†é’Ÿ US$ 0.062ï¼Œ **å…‰ç­‰å¾…é€å®¡æ¯æ¬¡å°±äº§ç”Ÿæ— æ„ä¹‰çš„èŠ±è´¹ 1.24 US$ã€‚***



![Ref: [Build Completed Processing é€šçŸ¥ä¿¡ æ­é… Gmail Filter + Google Apps Script](../d414bdbdb8c9/)](/assets/7c0974856393/1*2-Zn2ApgVYd5S5KzxMLEMQ.png)



Ref: [Build Completed Processing é€šçŸ¥ä¿¡ æ­é… Gmail Filter + Google Apps Script](../d414bdbdb8c9/)



åœ¨æ²¡æœ‰ Webhook å¯ä»¥ä¸»åŠ¨é€šçŸ¥çš„å¹´ä»£ï¼Œä¹‹å‰æ›¾ç”¨è¿‡ã€Œ [Build Completed Processing é€šçŸ¥ä¿¡æ­é… Gmail Filter + Google Apps Script æ¥è§¦å‘](../d414bdbdb8c9/) ã€å¯ä»¥è¾¾åˆ°æ•ˆæœï¼Œä½†æ˜¯è¿‡ç¨‹æœ‰ç‚¹ Hardcoreã€‚



**After:**



![](/assets/7c0974856393/1*ADkNoScFn4M_dIgv3sAKaw.png)



- æœ‰äº† Webhook ä¹‹åï¼Œæ‰“åŒ…ä¸Šä¼ çš„æ­¥éª¤ä¸Šä¼ å®Œæ¯•å³å¯ç»“æŸã€‚


- **App Store Connect Build Process Complete åä¼šå‘ Webhook é€šçŸ¥ï¼Œæˆ‘ä»¬æ”¶åˆ°é€šçŸ¥åå†ç»§ç»­æ‰§è¡Œé€å®¡æ­¥éª¤ã€‚**


- **é›¶å¹²ç­‰æˆæœ¬**



#### 2. GitFlow Release æµç¨‹å¯¹é½ App Release æ—¶æœºç‚¹



**Before:**



> *GitFlow æœ€åä¸€æ­¥ä¸Šçº¿æ—¶éœ€è¦æŠŠ develop åˆ†æ”¯ merge å› master åˆ†æ”¯ï¼Œmaster åˆ†æ”¯å¯¹åº”çš„æ˜¯å½“å‰çº¿ä¸Šç‰ˆã€‚*



ä»¥å¾€åªèƒ½å®šæ—¶æ‰‹åŠ¨/è‡ªåŠ¨æ‰§è¡Œï¼Œä¾‹å¦‚å‘¨ä¸€ PM ä¼šå‘å¸ƒ Appï¼Œå‘¨ä¸€å›ºå®šæŠŠ develop å› masterï¼›æ‰‹åŠ¨æ‰§è¡Œå¾ˆçƒ¦ã€è‡ªåŠ¨æ‰§è¡Œçš„è¯å‡è®¾å»¶æœŸï¼Ÿå‘¨ä¸€åˆšå¥½æ”¾å‡ï¼Ÿå®é™… App æ²¡æœ‰ Release ä½†æ˜¯ develop å…ˆå› master äº†ã€‚



åœ¨å¤§å¤šæ•°æƒ…å†µä¸å¤ªé‡è¦ï¼Œåªæœ‰å¾ˆæç«¯çš„çŠ¶å†µï¼Œä¾‹å¦‚è¿™æ—¶é—´ä¸­é—´åˆè¦æ’ Hotfix å°±ä¼šæœ‰å¯èƒ½æœ‰è½å·®ï¼›ä½†è‹¥è¦è¿½æ±‚å®Œæ•´ç¨³å®šçš„ CI/CD å¼€å‘æµç¨‹ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå€¼å¾—æ¢è®¨çš„æ¡ˆä¾‹ã€‚



**å¦ä¸€æ¡æ€è·¯åŒä¸Šï¼Œç”¨ã€Œ [App is Ready for Sale é€šçŸ¥ä¿¡æ­é… Gmail Filter + Google Apps Script æ¥è§¦å‘](../d414bdbdb8c9/) ã€æ˜¯å¯è¡Œçš„ã€‚**



**After:**



![](/assets/7c0974856393/1*6JjHC6GKc4fKXrh-WWCJVA.png)



- æœ‰äº† Webhook ä¹‹åï¼Œå¯ä»¥ç›´æ¥åœ¨æ”¶åˆ° App å‘å¸ƒé€šçŸ¥åè§¦å‘ CI/CD Action (Master to Develop)ã€‚


- å¯ä»¥ç¡®ä¿ App æ˜¯çœŸçš„ä¸Šçº¿æ‰å› Master



#### 3. App Release Messages



> *App ä¸Šçº¿å‘å¸ƒç»™ä½¿ç”¨è€…åï¼Œè¿˜æœ‰å¦ä¸€ä¸ªå¾ˆå¸¸è§å†…éƒ¨å·¥ä½œæµç¨‹ï¼Œå‘å¸ƒé€šçŸ¥ç»™ç›¸å…³å›¢é˜Ÿã€ç‰ˆæœ¬åŒ…å«çš„ä»»åŠ¡ã€Complete ç›¸å…³ä»»åŠ¡ã€‚*



**Before:**



åŒä¸Šï¼Œåªèƒ½æ‰‹åŠ¨æˆ–å®šæ—¶è‡ªåŠ¨æˆ–ä½¿ç”¨ä¿¡ä»¶ [**æ­é… Gmail Filter + Google Apps Script æ¥è§¦å‘**](../d414bdbdb8c9/) ã€‚



**After:**



![](/assets/7c0974856393/1*UuGPKonNhXRUMZ71rDQcdw.png)



- æœ‰äº† Webhook ä¹‹åï¼Œå¯ä»¥åœ¨æ”¶åˆ° App å‘å¸ƒé€šçŸ¥åä¸²æ¥ Jira/Asana API æå–å¯¹åº”ç‰ˆå·çš„å•æ‰¹æ¬¡ Complete å¹¶ä¸”å‘å¸ƒåŒ…å«çš„ä»»åŠ¡å•å®Œæˆé‡Šå‡ºè®¯æ¯åˆ° Slackã€‚



#### 4. Build Failed / Review Rejected Notifier



> *å‰é¢ 1,2 æœ‰æåˆ°ä»¥å¾€æœ‰æœºä¼šé€è¿‡æ”¶ä¿¡ä»¶é€šçŸ¥æ¥è§¦å‘å·¥ä½œæµç¨‹ï¼Œä½†åœ¨å›¢é˜Ÿè§„æ¨¡å¾ˆå¤§æƒé™æ§ç®¡ä¸¥æ ¼çš„ç»„ç»‡é‡Œï¼Œ **iOS å¼€å‘è€…åªä¼šæœ‰ã€Œå¼€å‘è€…ã€åå°æƒé™ï¼Œæ— æ³•é‡Šå‡ºã€ç®¡ç† Appï¼Œå› æ­¤ä¹Ÿæ— æ³•æ”¶åˆ°ä»»ä½• App çŠ¶æ€æ”¹å˜çš„ä¿¡ä»¶é€šçŸ¥ï¼›å…¶ä¸­ä¹ŸåŒ…å«ä¸Šä¼ çš„å»ºç½®ç‰ˆæœ¬è¢«æ‹’æˆ–æ˜¯é€å®¡è¢«æ‹’çš„é€šçŸ¥ä¿¡** ã€‚*



**Before:**



ä»¥å¾€åªèƒ½é å¥½å¿ƒäºº (a.k.a PM) è½¬å‘ä¿¡ä»¶ç»™å·¥ç¨‹ï¼Œå¦‚æœå¥½å¿ƒäººä¹Ÿæ²¡æ³¨æ„åˆ°å¯èƒ½å°±çœŸçš„åˆ°è¦ä¸Šçº¿æ—¶æ‰å‘ç° App è¢«æ‹’ç»äº†æ— æ³•ä¸Šçº¿ï¼



**After:**



![](/assets/7c0974856393/1*unKq9zdc8tJEqlNmfXiRYA.png)



- è¿™ä¸ªæ¡ˆä¾‹ç›¸å¯¹ç®€å•ï¼Œå°±æ˜¯æ”¶åˆ° Webhook é€šçŸ¥ä¹‹åï¼Œè½¬å‘è®¯æ¯åˆ° Slackã€‚



#### 5. Testflight Feedback Notifier



> *ç±»ä¼¼ 4. åªæ˜¯æ”¹æ¥ Testflight Feedback Webhook é€šçŸ¥ã€‚*



**Before:**



ä»¥å¾€å¼€å‘è€…åªèƒ½è‡ªå·±ä¸Šå» App Store Connect Testflight åå°æŸ¥çœ‹æµ‹è¯•ä½¿ç”¨è€…çš„å›é¦ˆæˆ–é—ªé€€é—®é¢˜ï¼Œ **éå¸¸å®¹æ˜“è¢«å¿½ç•¥ï¼ˆç”šè‡³æ›¾ç»å‘ç”Ÿè¿‡ä¸€å¹´å‰å›æŠ¥çš„å»ºè®®é—®é¢˜ä¸€å¹´åæ‰æœ‰äººçœ‹åˆ°ï¼‰** ã€‚



**After:**



- æ”¶åˆ° Testflight Feedback Webhook é€šçŸ¥ä¹‹åï¼Œè½¬å‘è®¯æ¯åˆ° Slack ã€‚



â€” â€” â€”



> *å…¶ä»–åº”ç”¨æ–¹å¼æ¬¢è¿å¤§å®¶å¤©é©¬è¡Œç©ºå‘æƒ³ï¼Œå†æ¥å°†ä»‹ç»å¦‚ä½•ä¸²æ¥ä½¿ç”¨ã€‚*



### App Store Connect API Webhook è®¾å®š



> *æƒé™è¦æ±‚ï¼š **éœ€è¦ Admin, Account Holder æƒé™æ‰èƒ½è®¾å®š** ã€‚*



#### å»ºç«‹ App Store Connect API Webhook é€šçŸ¥



1. [å‰å¾€ App Store Connect ç®¡ç†åå°](https://appstoreconnect.apple.com/access/users){:target="_blank"}


2. å‰å¾€ã€Œä½¿ç”¨è€…ä¸å­˜å–æƒé™ (Users and Access)ã€ -&gt; ã€Œæ•´åˆ (Integrations)ã€


3. ç‚¹å‡»ã€Œå…¶ä»–æ•´åˆ (Additional)ã€ ä¸‹çš„ ã€ŒWebhooksã€


4. ç‚¹å‡»ã€Œå»ºç«‹ Webhookã€æŒ‰é’®



![](/assets/7c0974856393/1*e_6oin7tJjAB2gXl3txJow.jpeg)



- åç§°ï¼šè¾“å…¥ Webhook åç§°


- æ‰¿è½½ URL(Payload URL)ï¼šè¾“å…¥ä½ çš„ Webhook é€šçŸ¥æ¥æ”¶æœåŠ¡ç½‘å€


- å¯†é’¥(Secret) å­—ä¸²ï¼šWebhook Request éªŒè¯å¯†é’¥(å¯ [éšæœºäº§ç”Ÿä¸€ä¸ªå­—ä¸²](https://www.random.org/strings/?num=1&len=32&digits=on&upperalpha=on&loweralpha=on&unique=on&format=html&rnd=new){:target="_blank"} æ¥ç”¨)


- Appï¼šé€‰æ‹©é¢„æ¥æ”¶ Webhook é€šçŸ¥çš„ App


- **è§¦å‘äº‹ä»¶ï¼š**



```css
TestFlight å›é¦ˆ
å½“æµ‹è¯•äººå‘˜ç•™ä¸‹å›é¦ˆæ—¶æ”¶åˆ°ç›¸å…³èµ„æ–™ã€‚
[] å½“æœºå›é¦ˆ
[] æˆªå›¾å›é¦ˆ

[] TestFlight ç‰ˆæœ¬çŠ¶æ€
å½“ TestFlight ç‰ˆæœ¬çŠ¶æ€æ›´æ”¹æ—¶æ”¶åˆ°ç›¸å…³èµ„æ–™ã€‚è¿›ä¸€æ­¥äº†è§£

[]App ç‰ˆæœ¬çŠ¶æ€
å½“ App ç‰ˆæœ¬çŠ¶æ€æ›´æ”¹æ—¶æ”¶åˆ°ç›¸å…³èµ„æ–™ã€‚è¿›ä¸€æ­¥äº†è§£

[]å»ºç½®ç‰ˆæœ¬ä¸Šä¼ çŠ¶æ€
å½“å»ºç½®ç‰ˆæœ¬ä¸Šä¼ çŠ¶æ€æ›´æ”¹æ—¶æ”¶åˆ°ç›¸å…³èµ„æ–™ã€‚è¿›ä¸€æ­¥äº†è§£

èƒŒæ™¯ç´ æ
å½“ Apple æ‰˜ç®¡çš„ç´ æåŒ…ç‰ˆæœ¬å‡ºç°ç‰¹å®šå˜æ›´æ—¶æ”¶åˆ°ç›¸å…³èµ„æ–™ã€‚è¿›ä¸€æ­¥äº†è§£

[]æ›´æ–°App Store å‘å¸ƒç‰ˆæœ¬
[]æ›´æ–°å¤–éƒ¨ TestFlight å‘å¸ƒç‰ˆæœ¬
[]å»ºç«‹å†…éƒ¨ TestFlight å‘å¸ƒç‰ˆæœ¬
[]æ›´æ–°ç´ æåŒ…ç‰ˆæœ¬
```



ä¾ç…§éœ€æ±‚å‹¾é€‰ï¼Œä¹Ÿå¯ä»¥å…¨é€‰æ”¶åˆ°é€šçŸ¥åå†åˆ¤æ–­è¦ä¸è¦å¤„ç†ã€‚



**æœ€åç‚¹å‡»ã€Œæ–°å¢ã€å»ºç«‹ Webhookã€‚**



#### æµ‹è¯• App Store Connect API Webhook é€šçŸ¥



è¿›å…¥ Webhook é¡µã€‚



![](/assets/7c0974856393/1*-pEVZ24cpSPBabtzMwll4Q.png)



ç‚¹å‡»å³ä¸Šè§’ã€Œæµ‹è¯•ã€æ¥æ”¶æµ‹è¯•é€šçŸ¥ã€‚



**æµ‹è¯•é€šçŸ¥å†…å®¹å¦‚ä¸‹ï¼š**



```json
Headers:
{
  "content-type": "application/json",
  "x-apple-jingle-correlation-key": "PNSCHDQW3MY2AX6VSRFHYYNUL4",
  "x-apple-request-uuid": "7b64238e-16db-31a0-5fd5-944a7c61b45f",
  "x-apple-signature": "hmacsha256=cf50020f0bbd3c5274860594f616f1806965c1f9fb765d8d278f512dff5b4c0e",
}

Body:
{
  "data" : {
    "type" : "webhookPingCreated",
    "id" : "65726e27-cb79-47f2-a3e4-c8ced9f356e8",
    "version" : 1,
    "attributes" : {
      "timestamp" : "2025-12-26T15:47:38.472168681Z"
    }
  }
}
```



#### App Store Connect API Webhook é€šçŸ¥å‘é€çºªå½•



Webhook é¡µä¸‹æ–¹çš„ã€Œæœ€è¿‘çš„æäº¤é¡¹ç›®ã€ä¼šæ˜¾ç¤ºæœ€è¿‘å‘é€çš„ Webhook äº‹ä»¶ã€‚



![](/assets/7c0974856393/1*lacj5lpaDwJtN0hgA5EAVg.png)



#### éªŒè¯ App Store Connect API Webhook é€šçŸ¥



å»ºç«‹ Webhook æ—¶æˆ‘ä»¬æœ‰è¾“å…¥ä¸€ä¸ªã€Œå¯†é’¥(Secret) å­—ä¸²ã€å»ºè®®å¯¹è¯·æ±‚è¿›è¡ŒéªŒè¯ï¼Œé˜²æ­¢è¿™ä¸ª Webhook URL å¤–æ³„ï¼Œæœ‰å¿ƒä¹‹äººèƒ½éšæ„ä¼ªé€ å‘é€ Webhook äº‹ä»¶åˆ°ä½ çš„æœåŠ¡ä¸Šã€‚



**éªŒè¯æ–¹å¼ï¼š**



> *å¯¹ Request Body ç”¨ä½ è®¾å®šçš„å¯†é’¥å­—ä¸²åš HMAC-SHA256 å¹¶è¾“å‡º HEX è¿›ä½å­—ä¸²ï¼Œç”¨è¿™ä¸ªå­—ä¸²æ¯”å¯¹ Request Headers ä¸­çš„ `x-apple-signature` å€¼çš„ `hmacsha256=` åé¢å¸¦çš„å­—ä¸²ã€‚*



**å®ç°æ–¹å¼ â€” Nodejs:**



```javascript
import crypto from 'crypto';

function verifyAppleWebhook(rawBody, appleSignature, secret) {
  const hex = crypto
    .createHmac('sha256', secret)
    .update(rawBody, 'utf8')
    .digest('hex');

  return `hmacsha256=${hex}` === appleSignature;
}
```



**å®ç°æ–¹å¼ â€” Cloudflare Worker:**



```javascript
function bufferToHex(buffer) {
  return [...new Uint8Array(buffer)]
    .map(b => b.toString(16).padStart(2, '0'))
    .join('');
}

async function hmacSha256Hex(secret, message) {
  const enc = new TextEncoder();

  const key = await crypto.subtle.importKey(
    'raw',
    enc.encode(secret),
    { name: 'HMAC', hash: 'SHA-256' },
    false,
    ['sign']
  );

  const signature = await crypto.subtle.sign(
    'HMAC',
    key,
    enc.encode(message)
  );

  return bufferToHex(signature);
}

async function verifyAppleWebhook(request, secret) {
  const appleSignature = request.headers.get('X-Apple-Signature');

  const rawBody = await request.clone().text();
  const calculated = await hmacSha256Hex(secret, rawBody);

  return "hmacsha256="+calculated === appleSignature;
}
```



- Cloudflare Worker æ—  crypto moduleï¼Œè¦ä½¿ç”¨ Web Crypto APIï¼ˆcrypto.subtleï¼‰



**å®ç°æ–¹å¼ â€” Google Apps Script Web App âŒ**



ç¢äºæŠ€æœ¯é™åˆ¶ï¼ŒGoogle Apps Script Web App `doGet(e)/doPost(e)` æ— æ³•ä»ä¸­å–å¾— Request Headersï¼Œå› æ­¤æ— æ³•ä½¿ç”¨æ­¤æ–¹æ³•å¯¹è¯·æ±‚æ¥æºè¿›è¡ŒéªŒè¯ã€‚



æœ€å¤šåªèƒ½è‡ªå·±åœ¨ URL Query åŠ ä¸€äº›å¯†é’¥å‚æ•°åšå¾ˆç®€å•çš„åˆ¤æ–­ä¿æŠ¤ã€‚



### App Store Connect API Webhook é€šçŸ¥ Payload



è¿™è¾¹æœ‰æœé›†äº†å‡ ä¸ª App ä¸Šä¼ ã€é€å®¡è¿‡ç¨‹ä¼šæ”¶åˆ°çš„äº‹ä»¶ Payloadï¼Œæä¾›ç»™å¤§å®¶åšè‡ªåŠ¨åŒ–å¼€å‘æ—¶å¯ä»¥ç›´æ¥å‚è€ƒã€‚



> *Webhook åªä¼šå‘é€äº‹ä»¶è·ŸçŠ¶æ€åç§°ï¼Œä¸ä¼šç»™å…¶ä»–è¯¦ç»†èµ„è®¯ï¼Œä¾‹å¦‚ï¼šç‰ˆæœ¬å·ã€æ‹’å®¡åŸå› â€¦ç­‰ç­‰ï¼› **æˆ‘ä»¬éœ€è¦è‡ªå·±å†æ‰“ App Store Connect API å¸¦ä¸Š Event Payload é‡Œçš„ Relationships Link æ‰èƒ½å–å¾—å®Œæ•´èµ„è®¯ã€‚***



#### å»ºç½®ç‰ˆæœ¬ä¸Šä¼  â€” Process Complete



```json
{
  "data" : {
    "type" : "buildUploadStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "oldState" : "PROCESSING",
      "newState" : "COMPLETE"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "buildUploads",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/buildUploads/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```



#### å»ºç½®ç‰ˆæœ¬ä¸Šä¼  â€” Process Failed



```json
{
  "data": {
    "type": "buildUploadStateUpdated",
    "id": "xxx-xx-xx-xx-xxx",
    "version": 1,
    "attributes": {
      "oldState": "PROCESSING",
      "newState": "FAILED"
    },
    "relationships": {
      "instance": {
        "data": {
          "type": "buildUploads",
          "id": "xxx-xx-xx-xx-xxx"
        },
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```



å¤šåŠä¸º Binary é­æ‹’ï¼Œä¾‹å¦‚æœ‰ç”¨åˆ°éº¦å…‹é£ä½†æ˜¯æ²¡å®£å‘Šä¹‹ç±»çš„ã€‚



#### App ç‰ˆæœ¬çŠ¶æ€ â€” Prepare For Submission (å‡†å¤‡æäº¤)



```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "PREPARE_FOR_SUBMISSION",
      "oldValue" : "DEVELOPER_REJECTED",
      "timestamp" : "2025-12-18T05:01:47.118Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```



å½“æ–°ç‰ˆæœ¬å·å»ºç«‹å¥½ï¼Œå‡†å¤‡æäº¤é€å®¡æ—¶ï¼Œè¿™é˜¶æ®µå¯å¡«å†™ç‰ˆæœ¬èµ„è®¯ã€æ›´æ–°å†…å®¹ã€é€‰æ‹©è¦é€å®¡çš„ Buildã€‚



#### **App ç‰ˆæœ¬çŠ¶æ€ â€” Ready For Review (å‡†å¤‡é€å®¡)**



```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "READY_FOR_REVIEW",
      "oldValue" : "PREPARE_FOR_SUBMISSION",
      "timestamp" : "2025-12-18T03:41:12.516Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```



é€å®¡èµ„æ–™ç¡®å®šï¼Œå‡†å¤‡é€å®¡æ—¶ã€‚



#### App ç‰ˆæœ¬çŠ¶æ€ â€” Waiting For Review (å·²é€å®¡ï¼Œç­‰å¾…å®¡æ ¸)



```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "WAITING_FOR_REVIEW",
      "oldValue" : "READY_FOR_REVIEW",
      "timestamp" : "2025-12-18T03:41:21.179Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```



App å·²å®Œæˆé€å®¡ï¼Œæ­£åœ¨ç­‰å¾…å®¡æŸ¥ã€‚



#### App ç‰ˆæœ¬çŠ¶æ€ â€” Developer Rejected (å¼€å‘è€…æ‹’ç»)



```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "DEVELOPER_REJECTED",
      "oldValue" : "WAITING_FOR_REVIEW",
      "timestamp" : "2025-12-18T03:50:30.552Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```



å¼€å‘è€…æ’¤å›æ­£åœ¨é€å®¡çš„ç‰ˆæœ¬ã€‚



#### App ç‰ˆæœ¬çŠ¶æ€ â€” In Review (å®˜æ–¹æ­£åœ¨å®¡æ ¸)



```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "IN_REVIEW",
      "oldValue" : "WAITING_FOR_REVIEW",
      "timestamp" : "2025-12-18T22:05:50.038Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```



#### App ç‰ˆæœ¬çŠ¶æ€ â€” Pending Developer Release (å®¡æ ¸å®Œæ¯•ç­‰å¾…å‘å¸ƒ)



```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "PENDING_DEVELOPER_RELEASE",
      "oldValue" : "IN_REVIEW",
      "timestamp" : "2025-12-18T22:34:18.785Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```



> *Pending Developer Release äº‹ä»¶çš„æ—¶é—´ å‡æ‰ Waiting For Review äº‹ä»¶çš„æ—¶é—´å°± ç­‰äº App é€å®¡åˆ°å¯å‘å¸ƒçŠ¶æ€ä¸­é—´ç­‰å¾…çš„æ—¶é—´äº†ã€‚*



#### App ç‰ˆæœ¬çŠ¶æ€ â€” Ready for Distribution (App å‡†å¤‡å‘å¸ƒ) a.k.a Ready For Sale



```json
{
  "data" : {
    "type" : "appStoreVersionAppVersionStateUpdated",
    "id" : "xxx-xx-xx-xx-xxx",
    "version" : 1,
    "attributes" : {
      "newValue" : "READY_FOR_DISTRIBUTION",
      "oldValue" : "PENDING_DEVELOPER_RELEASE",
      "timestamp" : "2025-12-23T06:03:50.925Z"
    },
    "relationships" : {
      "instance" : {
        "data" : {
          "type" : "appStoreVersions",
          "id" : "xxx-xx-xx-xx-xxx"
        },
        "links" : {
          "self" : "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx"
        }
      }
    }
  }
}
```



App å·²å‡†å¤‡å‘å¸ƒ (å‡ ä¹ç­‰åŒ Ready For Saleï¼Œæ²¡æœ‰ Ready For Sale è¿™ä¸ªäº‹ä»¶)ã€‚



> *Your app has been accepted and is ready for distribution.*



> *To distribute your app, your [agreements](https://developer.apple.com/help/app-store-connect/manage-agreements/view-agreements-status){:target="_blank"} must be in effect. The Account Holder can accept the latest agreements in the Business section.*



### App Store Connect API Webhook å·¥ä½œæµç¨‹ä¸²æ¥



#### æ–¹æ³• 1 â€” å€Ÿç”¨ Fastlane ä¸²æ¥ App Store Connect API



è¿™è¾¹æœ€å¿«çš„æ–¹å¼æ˜¯ç›´æ¥ç”¨ CI/CD æœåŠ¡è§¦å‘ï¼Œç„¶åå€Ÿç”¨ Fastlane è‡ªå¸¦çš„ Spaceship ä¸²æ¥ App Store Connect APIã€‚



> *å¦‚æœä½ æœ¬æ¥ [Fastlane å°±æœ‰ä½¿ç”¨ App Store Connect API](https://docs.fastlane.tools/app-store-connect-api/){:target="_blank"} ç®¡ç† Match å‡­è¯ã€é€å®¡ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥ç›´æ¥æ— ç—›ä½¿ç”¨ï¼›å¦‚æœæ²¡æœ‰è¦å…ˆ [å‚è€ƒå®˜æ–¹æ–‡ä»¶](https://docs.fastlane.tools/app-store-connect-api/){:target="_blank"} äº§ç”Ÿ API Key è·Ÿå®‰å…¨å­˜æ”¾åœ¨ CI/CD æœåŠ¡çš„å¯†é’¥ä¸­ã€‚*



![](/assets/7c0974856393/1*FrJoXtV2lrk09KnAt2Hydg.png)



- **App Store Connect**
  1. App æœ‰çŠ¶æ€æ”¹å˜æ—¶
  2. è§¦å‘ Webhook


- **Webhook Endpoint**
  `å¯ä»¥æ˜¯ è‡ªæ¶æœåŠ¡/API æˆ–æ˜¯ ç®€å•ç”¨ FAAS æœåŠ¡ (Cloudflare Worker / AWS Lambda / Cloud Functions / Google Apps Script)`
  3. éªŒè¯ Webhook (optional)
  4. å¤„ç† Webhook äº‹ä»¶ã€è½¬å‘äº‹ä»¶è¯·æ±‚åˆ° CI/CD æœåŠ¡ä¸Šæ‰§è¡Œ
  `e.g. é€è¿‡ GitHub API è§¦å‘ GitHub Actions..`


- **CI/CD Service**
  `GitHub Actions / Bitbucket Pipeline / Gitlab Runnerâ€¦`
  5. è§¦å‘ Action
  6. æ‰§è¡Œ Fastlane è„šæœ¬ï¼Œå¤ç”¨ Fastlane Spaceship éªŒè¯


- **App Store Connect**
  7. æ‰“ App Store Connect API å–å¾—å®Œæ•´èµ„è®¯


- **CI/CD Service**
  8. åç»­æ­¥éª¤ï¼Œä¾‹å¦‚å‘é€šçŸ¥ã€è§¦å‘å¦ä¸€ä¸ª Action



**Fastlane Example:**



```ruby
  # Usage:
  #   bundle exec fastlane appStoreConnectWebhookHandler \
  #     data:'{"data":{"type":"buildUploadStateUpdated","id":"xxx-xxx-xxx-xx-xxx","version":1,"attributes":{"oldState":"PROCESSING","newState":"COMPLETE"},"relationships":{"instance":{"data":{"type":"buildUploads","id":"xxx-xxx-xxx-xx-xxx"},"links":{"self":"https://api.appstoreconnect.apple.com/v1/buildUploads/xxx-xxx-xxx-xx-xxx"}}}}}'
  # Notes:
  # - `data:` must be a JSON string.
  # - This lane is intended for local debugging (it prints the GET response).
  desc "[Automation] Handle App Store Connect webhook payload and fetch related instance via ASC API"
  lane :appStoreConnectWebhookHandler do \\|options\\|
    begin
      data = options[:data]
      UI.user_error!("Missing data") if data.empty?
      data = JSON.parse(data)
      url = data.dig("data", "relationships", "instance", "links", "self").to_s.strip
      UI.user_error!("Missing instance self url in JSON") if url.empty?

      api_key = app_store_connect_api_key(
        key_id: "xxxx",
        issuer_id: "xxxx-xxxx-xxxx-xxxx-165aa6465141",
        key_filepath: "./AuthKey_xxxx.p8",
        duration: 1200, # optional (maximum 1200)
        in_house: false # optional but may be required if using match/sigh
      )

      loadAppStoreConnectAPIKey
      #
      uri = URI.parse(url)
      http = Net::HTTP.new(uri.host, uri.port)
      http.use_ssl = true
      http.verify_mode = OpenSSL::SSL::VERIFY_PEER
      store = OpenSSL::X509::Store.new
      store.set_default_paths
      http.cert_store = store

      request = Net::HTTP::Get.new(uri.request_uri)
      token = Spaceship::ConnectAPI.token
      UI.user_error!("App Store Connect API token is not available. Make sure app_store_connect_api_key is configured correctly.") if token.nil?
      request['Authorization'] = "Bearer #{token.text}"

      request['Content-Type'] = 'application/json'
      request['Accept'] = 'application/json'

      response = http.request(request)
      UI.message("ğŸ“¡ GET #{url} Response: [#{response.code}] #{response.message}")
      UI.message(response.body)
      #

      response
      ## handle response...do next actions...
      
    rescue => e
        UI.error("âŒ Failed handle App Store Connect API Webhook: #{e}")
    end

  end
```



#### æ–¹æ³• 2â€” åœ¨ Webhook Endpoint è‡ªè¡Œå¤„ç†



ç¬¬äºŒä¸ªæ–¹æ³•å°±æ˜¯ç›´æ¥åœ¨ Webhook Endpoint æœåŠ¡ä¸Šå¤„ç†å®Œæ‰€æœ‰äº‹æƒ…ï¼Œä½† **ç¼ºç‚¹æ˜¯éœ€è¦æŠŠ App Store Connect API Key æ”¾åˆ°æœåŠ¡ä¸Šè·Ÿè¦è‡ªå·±åš Token éªŒè¯** ã€‚



![](/assets/7c0974856393/1*AUw59sLt97RquLhoRBp5Rw.png)



**Ruby Example:**



```php
require 'jwt'
require 'net/http'
require 'time'

keyFile = File.read('./AuthKey_XXXX.p8') # replace to your .p8 private key file (donwload from app stroe connect)
privateKey = OpenSSL::PKey::EC.new(keyFile)

payload = {
            iss: 'YOUR_ISSUE_ID', # replace to your issue id (get in app store connect user access->key->app store connect api page)
            iat: Time.now.to_i,
            exp: Time.now.to_i + 60*20,
            aud: 'appstoreconnect-v1'
          }

token = JWT.encode payload, privateKey, 'ES256', header_fields={kid:"YOUR_KEY_ID", typ:"JWT"} # replace to your key id (get in app store connect user access->key->app store connect api page)
puts token

decoded_token = JWT.decode token, privateKey, true, { algorithm: 'ES256' }
puts decoded_token

# æ›¿æ¢æˆ Webhook Payload ä¸­çš„ relationships link
uri = URI("https://api.appstoreconnect.apple.com/v1/apps/APPID/customerReviews") # repleace APPID to your app id in app store connect -> your app -> app information -> apple id
https = Net::HTTP.new(uri.host, uri.port)
https.use_ssl = true

request = Net::HTTP::Get.new(uri)
request['Authorization'] = "Bearer #{token}";

response = https.request(request)
puts response.read_body
```



> *App Store Connect API Key äº§ç”Ÿæ–¹å¼ã€Token äº§ç”Ÿæ–¹å¼ã€API ä½¿ç”¨è¯·å‚è€ƒã€Œ [App Store Connect API ç°å·²æ”¯æ´ è¯»å–å’Œç®¡ç† Customer Reviews](../f1365e51902c/) ã€ã€‚*



### App Store Connect API Response



è¿™é‡Œé™„ä¸Šä¸€äº›æ”¶åˆ° Webhook Event åå†æ‰“ Relationships Link å–å¾—å®Œæ•´èµ„è®¯çš„ä¸€äº› Response èŒƒä¾‹ã€‚



#### å»ºç½®ç‰ˆæœ¬ä¸Šä¼  â€” Process Complete



`https://api.appstoreconnect.apple.com/v1/buildUploads/xxx-xx-xx-xx-xxx`



```json
{
  "data": {
    "type": "buildUploads",
    "id": "xx-xx-xx-xxx-xx",
    "attributes": {
      "cfBundleShortVersionString": "1.101.0",
      "cfBundleVersion": "1",
      "createdDate": "2025-12-25T08:26:43-08:00",
      "state": {
        "errors": [],
        "warnings": [],
        "infos": [],
        "state": "COMPLETE"
      },
      "platform": "IOS",
      "uploadedDate": "2025-12-25T08:28:35-08:00"
    },
    "relationships": {
      "buildUploadFiles": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xxx-xx/relationships/buildUploadFiles",
          "related": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xxx-xx/buildUploadFiles"
        }
      }
    },
    "links": {
      "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xxx-xx"
    }
  },
  "links": {
    "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xxx-xx"
  }
}
```



#### å»ºç½®ç‰ˆæœ¬ä¸Šä¼  â€” Process Failed



`https://api.appstoreconnect.apple.com/v1/buildUploads/xxx-xx-xx-xx-xxx`



```json
{
  "data": {
    "type": "buildUploads",
    "id": "xx-xx-xx-xx-xxx",
    "attributes": {
      "cfBundleShortVersionString": "1.101.0",
      "cfBundleVersion": "3",
      "createdDate": "2025-12-12T09:03:32-08:00",
      "state": {
        "errors": [
          {
            "code": "90683",
            "description": "Missing purpose string in Info.plist. Your appâ€™s code references one or more APIs that access sensitive user data, or the app has one or more entitlements that permit such access. The Info.plist file for the â€œMy.appâ€ bundle should contain a NSMicrophoneUsageDescription key with a user-facing purpose string explaining clearly and completely why your app needs the data. If youâ€™re using external libraries or SDKs, they may reference APIs that require a purpose string. While your app might not use these APIs, a purpose string is still required. For details, visit: https://developer.apple.com/documentation/uikit/protecting_the_user_s_privacy/requesting_access_to_protected_resources."
          }
        ],
        "warnings": [],
        "infos": [],
        "state": "FAILED"
      },
      "platform": "IOS",
      "uploadedDate": "2025-12-12T09:05:26-08:00"
    },
    "relationships": {
      "buildUploadFiles": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xx-xxx/relationships/buildUploadFiles",
          "related": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xx-xxx/buildUploadFiles"
        }
      }
    },
    "links": {
      "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xx-xxx"
    }
  },
  "links": {
    "self": "https://api.appstoreconnect.apple.com/v1/buildUploads/xx-xx-xx-xx-xxx"
  }
}
```



ITMS-90683 ä¸ºä¾‹ã€‚



#### App ç‰ˆæœ¬çŠ¶æ€



`https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xx-xx-xx-xxx`



```json
{
  "data": {
    "type": "appStoreVersions",
    "id": "xxx-xxx-xxx-xxx",
    "attributes": {
      "platform": "IOS",
      "versionString": "1.101.0",
      "appStoreState": "READY_FOR_SALE",
      "appVersionState": "READY_FOR_DISTRIBUTION",
      "copyright": "Â© 2025 ZhgChgLi.",
      "reviewType": "APP_STORE",
      "releaseType": "MANUAL",
      "earliestReleaseDate": null,
      "usesIdfa": null,
      "downloadable": true,
      "createdDate": "2025-12-15T19:12:55-08:00"
    },
    "relationships": {
      "ageRatingDeclaration": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/ageRatingDeclaration",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/ageRatingDeclaration"
        }
      },
      "appStoreVersionLocalizations": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appStoreVersionLocalizations",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appStoreVersionLocalizations"
        }
      },
      "build": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/build",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/build"
        }
      },
      "appStoreVersionPhasedRelease": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appStoreVersionPhasedRelease",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appStoreVersionPhasedRelease"
        }
      },
      "gameCenterAppVersion": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/gameCenterAppVersion",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/gameCenterAppVersion"
        }
      },
      "routingAppCoverage": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/routingAppCoverage",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/routingAppCoverage"
        }
      },
      "appStoreReviewDetail": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appStoreReviewDetail",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appStoreReviewDetail"
        }
      },
      "appStoreVersionSubmission": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appStoreVersionSubmission",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appStoreVersionSubmission"
        }
      },
      "appClipDefaultExperience": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appClipDefaultExperience",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appClipDefaultExperience"
        }
      },
      "appStoreVersionExperiments": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appStoreVersionExperiments",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appStoreVersionExperiments"
        }
      },
      "appStoreVersionExperimentsV2": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/appStoreVersionExperimentsV2",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/appStoreVersionExperimentsV2"
        }
      },
      "customerReviews": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/customerReviews",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/customerReviews"
        }
      },
      "alternativeDistributionPackage": {
        "links": {
          "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/relationships/alternativeDistributionPackage",
          "related": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx/alternativeDistributionPackage"
        }
      }
    },
    "links": {
      "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx"
    }
  },
  "links": {
    "self": "https://api.appstoreconnect.apple.com/v1/appStoreVersions/xxx-xxx-xxx-xxx"
  }
}
```



> *å¦‚å‰è¿°ï¼Œè¯¦ç»† App èµ„è®¯ã€ç‰ˆå·ã€é”™è¯¯åŸå› éƒ½è¦æ‰“ API æ‰ä¼šæ‹¿åˆ°ã€‚*



### Done



è‡³æ­¤æˆ‘ä»¬å·²ç»å¯ä»¥é€è¿‡ App Store Connect API Webhook æ›´å¥½åœ°å®Œå–„ App CI/CD åŠè‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹ï¼Œæå‡å›¢é˜Ÿå¼€å‘æ•ˆç‡ã€‚



#### å»¶ä¼¸é˜…è¯»



- [**CI/CD å®æˆ˜æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šCI/CD æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•é€è¿‡ CI/CD æ‰“é€ ç¨³å®šé«˜æ•ˆçš„å¼€å‘å›¢é˜Ÿï¼Ÿå·¥å…·é€‰æ‹©ï¼Ÿ**](../c008a9e8ceca/)


- [ZReviewTender â€” å…è´¹å¼€æºçš„ App Reviews ç›‘æ§æœºå™¨äºº](../e36e48bb9265/)


- [App Store Connect API ç°å·²æ”¯æ´ è¯»å–å’Œç®¡ç† Customer Reviews](../f1365e51902c/)



æœ‰ä»»ä½•é—®é¢˜åŠæŒ‡æ•™æ¬¢è¿ [ä¸æˆ‘è”ç»œ](https://www.zhgchg.li/contact){:target="_blank"} ã€‚



*[Post](https://medium.com/zrealm-ios-dev/ci-cd-%E4%BD%BF%E7%94%A8-app-store-connect-api-webhook-%E4%B8%B2%E6%8E%A5%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B-7c0974856393){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}.*