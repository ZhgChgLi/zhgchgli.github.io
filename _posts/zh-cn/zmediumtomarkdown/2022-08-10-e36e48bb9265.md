---
author: ZhgChgLi
categories:
- ZRealm Dev.
date: 2022-08-10T11:56:05.731+0000
description: å®æ—¶ç›‘æµ‹ App çš„æœ€æ–°è¯„ä»·å†…å®¹å¹¶å³æ—¶ç»™äºˆåé¦ˆï¼Œæå‡åä½œæ•ˆç‡åŠæ¶ˆè´¹è€…æ»¡æ„åº¦
image:
  path: /assets/e36e48bb9265/1*DjHhZ7Yq-rE3LkFDiYW9lg.jpeg
last_modified_at: 2024-09-26T12:48:18.465+0000
render_with_liquid: false
tags:
- ios-app-development
- app-store
- google-play
- app-review
- automation
title: ZReviewTenderâ€Šâ€”â€Šå…è´¹å¼€æºçš„ App Reviews ç›‘æ§æœºå™¨äºº
---

### ZReviewTender â€” å…è´¹å¼€æºçš„ App Reviews ç›‘æ§æœºå™¨äºº



å®æ—¶ç›‘æµ‹ App çš„æœ€æ–°è¯„ä»·å†…å®¹å¹¶å³æ—¶ç»™äºˆåé¦ˆï¼Œæå‡åä½œæ•ˆç‡åŠæ¶ˆè´¹è€…æ»¡æ„åº¦



![[ZhgChgLi](https://github.com/ZhgChgLi){:target="_blank"} / [ZReviewTender](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}](/assets/e36e48bb9265/1*DjHhZ7Yq-rE3LkFDiYW9lg.jpeg)



[ZhgChgLi](https://github.com/ZhgChgLi){:target="_blank"} / [ZReviewTender](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}



#### [ZhgChgLi](https://github.com/ZhgChgLi){:target="_blank"} / [ZReviewTender](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}



![App Reviews to Slack Channel](/assets/e36e48bb9265/1*wlGNbHopjPwFsP8j9LpKcw.jpeg)



App Reviews to Slack Channel



[**ZReviewTender**](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"} **â€”** ä¸ºæ‚¨è‡ªåŠ¨ç›‘æ§ App Store iOS/macOS App ä¸ Google Play Android App çš„ä½¿ç”¨è€…æœ€æ–°è¯„ä»·è®¯æ¯ï¼Œå¹¶æä¾›æŒç»­æ•´åˆå·¥å…·ï¼Œä¸²æ¥è¿›å›¢é˜Ÿå·¥ä½œæµç¨‹ï¼Œæå‡åä½œæ•ˆç‡åŠæ¶ˆè´¹è€…æ»¡æ„åº¦ã€‚



[![](https://repository-images.githubusercontent.com/516425682/1cc1a829-d87d-4d4a-925b-60471b912b23)](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}



### ç‰¹è‰²åŠŸèƒ½



- å–å¾— App Store iOS/macOS App ä¸ Google Play Android App è¯„ä»·åˆ—è¡¨å¹¶ç­›é€‰å‡ºå°šæœªçˆ¬å–è¿‡çš„æœ€æ–°è¯„ä»·å†…å®¹


- [é¢„è®¾åŠŸèƒ½] è½¬å‘çˆ¬å–åˆ°çš„æœ€æ–°è¯„ä»·åˆ° Slackï¼Œç‚¹å‡»è®¯æ¯ Timestamp è¿ç»“èƒ½å¿«é€Ÿè¿›å…¥åå°å›å¤è¯„ä»·


- [é¢„è®¾åŠŸèƒ½] æ”¯æ´ä½¿ç”¨ Google Translate API è‡ªåŠ¨ç¿»è¯‘éæŒ‡å®šè¯­ç³»ã€åœ°åŒºçš„è¯„ä»·å†…å®¹æˆæ‚¨çš„è¯­è¨€


- [é¢„è®¾åŠŸèƒ½] æ”¯æ´è‡ªåŠ¨è®°å½•è¯„ä»·åˆ° Google Sheet


- æ”¯æ´å¼¹æ€§æ‰©å……ï¼Œé™¤åŒ…å«çš„é¢„è®¾åŠŸèƒ½å¤–æ‚¨ä»å¯ä¾ç…§å›¢é˜Ÿå·¥ä½œæµç¨‹ï¼Œè‡ªè¡Œå¼€å‘æ‰€éœ€åŠŸèƒ½å¹¶æ•´åˆè¿›å·¥å…·ä¸­
  e.g. è½¬å‘è¯„ä»·åˆ° Discord, Line, Telegramâ€¦


- ä½¿ç”¨æ—¶é—´æˆ³çºªå½•çˆ¬å–ä½ç½®ï¼Œé˜²æ­¢é‡å¤çˆ¬å–è¯„ä»·


- æ”¯æ´è¿‡æ»¤åŠŸèƒ½ï¼Œå¯æŒ‡å®šåªçˆ¬å– å¤šå°‘è¯„åˆ†ã€è¯„ä»·å†…å®¹åŒ…å«ä»€ä¹ˆå…³é”®å­—ã€ä»€ä¹ˆåœ°åŒº/è¯­ç³» çš„è¯„ä»·


- Apple åŸºäº [**å…¨æ–°çš„ App Store Connect API**](https://developer.apple.com/documentation/appstoreconnectapi/list_all_customer_reviews_for_an_app){:target="_blank"} ï¼Œæä¾›ç¨³å®šå¯é çš„ App Store App è¯„ä»·èµ„æ–™æ¥æºï¼Œä¸å†åƒ [ä»¥å¾€ä½¿ç”¨ XML èµ„æ–™ä¸å¯é  or Fastlane Spaceship Session ä¼šè¿‡æœŸéœ€å®šæ—¶äººå·¥ç»´æŠ¤](../f1365e51902c/)


- Android åŒæ ·ä½¿ç”¨å®˜æ–¹ AndroidpublisherV3 API æå–è¯„ä»·èµ„æ–™


- æ”¯æ´ä½¿ç”¨ Github Repo w/ Github Action éƒ¨ç½²ï¼Œè®©æ‚¨å…è´¹å¿«é€Ÿçš„å»ºç«‹ ZReviewTender App Reviews æœºå™¨äºº


- 100% Ruby @ [RubyGem](https://rubygems.org/gems/ZReviewTender){:target="_blank"}



### TL;DR [2024/09/27] Update



> [***æ•´ç†å¿«é€Ÿéƒ¨ç½²æ•™å­¦æ–‡ä»¶ï¼Œè¯·å‚è€ƒæœ€æ–°æ–‡ç« ï¼š[Quick Start! ] Github Action x ZReviewTender å…è´¹å¿«é€Ÿéƒ¨ç½²ä½ çš„ App å•†åŸè¯„ä»·ç›‘æ§æœºå™¨äººã€‚***](../0095528cf875/)



#### ä¸ç±»ä¼¼æœåŠ¡æ¯”è¾ƒ



![](/assets/e36e48bb9265/1*zarnSqZqa9Kgnq8T8JQL9Q.png)



#### App Reviews å·¥ä½œæµç¨‹æ•´åˆèŒƒä¾‹ (in Pinkoi)



**é—®é¢˜ï¼š**



![](/assets/e36e48bb9265/1*ZULed1sGV4YzAAezw_fCaQ.png)



å•†åŸçš„è¯„ä»·å¯¹äº§å“å¾ˆé‡è¦ä½†ä»–å´æ˜¯ä¸€ä¸ªéå¸¸äººå·¥è·Ÿé‡å¤è½¬ä»‹æ²Ÿé€šçš„äº‹ã€‚



å› ä¸ºè¦æ—¶ä¸æ—¶äººå·¥ä¸Šå»çœ‹ä¸€ä¸‹æ–°è¯„ä»·ï¼Œå¦‚è¿‡æœ‰å®¢æœé—®é¢˜å†å°†é—®é¢˜è½¬å‘ç»™å®¢æœååŠ©å¤„ç†ï¼Œå¾ˆé‡å¤ã€äººå·¥ã€‚



![](/assets/e36e48bb9265/1*Ptph8qaLqoTaNw9Fp7VTqw.png)



é€è¿‡ ZReviewTender è¯„ä»·æœºå™¨äººï¼Œå°†è¯„ä»·è‡ªåŠ¨è½¬å‘åˆ° Slack Channelï¼Œå¤§å®¶èƒ½å¿«é€Ÿæ”¶åˆ°æœ€æ–°è¯„ä»·èµ„è®¯ï¼Œå¹¶å³æ—¶è¿½è¸ªã€è®¨è®ºï¼›ä¹Ÿèƒ½è®©æ•´ä¸ªå›¢é˜Ÿäº†è§£ç›®å‰ä½¿ç”¨è€…å¯¹äº§å“çš„è¯„ä»·ã€å»ºè®®ã€‚



æ›´å¤šèµ„è®¯å¯å‚è€ƒï¼š [2021 Pinkoi Tech Career Talk â€” é«˜æ•ˆç‡å·¥ç¨‹å›¢é˜Ÿå¤§è§£å¯†](../11f6c8568154/) ã€‚



### éƒ¨ç½² â€” åªä½¿ç”¨é¢„è®¾åŠŸèƒ½



å¦‚æœæ‚¨åªéœ€è¦ ZReviewTender è‡ªå¸¦çš„é¢„è®¾åŠŸèƒ½ (to Slack/Google Translate/Filter) åˆ™å¯ä½¿ç”¨ä»¥ä¸‹å¿«é€Ÿéƒ¨ç½²æ–¹å¼ã€‚



ZReviewTender å·²æ‰“åŒ…å‘å¸ƒåˆ° [RubyGems](https://rubygems.org/gems/ZReviewTender){:target="_blank"} ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿæ–¹ä¾¿çš„ä½¿ç”¨ RubyGems å®‰è£…ä½¿ç”¨ ZReviewTenderã€‚



#### [æ¨è] ç›´æ¥ä½¿ç”¨ Github Repo Template éƒ¨ç½²



- æ— éœ€ä»»ä½•ä¸»æœºç©ºé—´ âœ…


- æ— éœ€ä»»ä½•ç¯å¢ƒè¦æ±‚ âœ…


- æ— éœ€äº†è§£å·¥ç¨‹åŸç† âœ…


- å®Œæˆ Config æ¡£æ¡ˆé…ç½®å³å®Œæˆéƒ¨ç½² âœ…


- 8 ä¸ªæ­¥éª¤å³å¯å®Œæˆéƒ¨ç½² âœ…


- å®Œå…¨å…è´¹ âœ…
  Github Action æä¾›æ¯ä¸ªå¸å· 2,000+åˆ†é’Ÿ/æœˆ æ‰§è¡Œç”¨é‡ï¼Œæ‰§è¡Œä¸€æ¬¡ ZReviewTender è¯„ä»·æå–çº¦åªéœ€è¦ 15~30 ç§’ã€‚
  é¢„è®¾æ¯ 6 å°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œä¸€å¤©æ‰§è¡Œ 4 æ¬¡ï¼Œ **ä¸€ä¸ªæœˆçº¦åªæ¶ˆè€— 60 åˆ†é’Ÿé¢åº¦** ã€‚
  Github Private Repo å…è´¹æ— é™åˆ¶å»ºç«‹ã€‚



1.å‰å¾€ ZReviewTender Template Repo: [**ZReviewTender-deploy-with-github-action**](https://github.com/ZhgChgLi/ZReviewTender-deploy-with-github-action){:target="_blank"}



![](/assets/e36e48bb9265/1*1pn3bxyBO0FoY4oIRvKCNg.png)



ç‚¹å‡»å³ä¸Šæ–¹ã€ŒUse this templateã€æŒ‰é’®ã€‚



2. å»ºç«‹ Repo



![](/assets/e36e48bb9265/1*YCBJJlSN4ZYjKMz7WBVIAQ.png)



- Repository name: è¾“å…¥ä½ æƒ³è¦çš„ Repo ä¸“æ¡ˆåç§°


- Access: **Private**



> âš ï¸âš ï¸ è¯·åŠ¡å¿…å»ºç«‹ **Private Repo** âš ï¸âš ï¸



> **å› ä¸ºä½ å°†ä¸Šä¼ è®¾å®šåŠç§å¯†é‡‘é’¥åˆ°ä¸“æ¡ˆä¸­**



æœ€åç‚¹å‡»ä¸‹æ–¹ã€ŒCreate repository from templateã€æŒ‰é’®ã€‚



3. ç¡®è®¤ä½ å»ºç«‹çš„ Repo æ˜¯ Private Repo



![](/assets/e36e48bb9265/1*1ZHF9CIOMV8S12Xw2P4B8g.png)



ç¡®è®¤å³ä¸Šæ–¹ Repo åç§°æœ‰å‡ºç°ã€ŒğŸ”’ã€å’Œ Private æ ‡ç­¾ã€‚



è‹¥æ— åˆ™ä»£è¡¨æ‚¨å»ºç«‹çš„äº‹ **Public Repo éå¸¸å±é™©** ï¼Œè¯·å‰å¾€ä¸Šæ–¹ Tabã€ŒSettingsã€-&gt; ã€ŒGeneralã€-&gt; åº•éƒ¨ã€ŒDanger Zoneã€-&gt; ã€ŒChange repository visibilityã€-&gt;ã€ŒMake privateã€ **æ”¹å› Private Repo** ã€‚



4. ç­‰å¾… Project init æˆåŠŸ



å¯åœ¨ Repo é¦–é¡µ Readme ä¸­çš„



![](/assets/e36e48bb9265/1*aN9IkRx2BnAKFk8VW9ORVw.png)



åŒºå—æŸ¥çœ‹ Badgeï¼Œå¦‚æœ passing å³ä»£è¡¨ init æˆåŠŸã€‚



æˆ–æ˜¯ç‚¹å‡»ä¸Šæ–¹ Tabã€ŒActionsã€-&gt; ç­‰å¾…ã€ŒInit ZReviewTenderã€Workflow æ‰§è¡Œå®Œæˆï¼š



![](/assets/e36e48bb9265/1*jThU3BbKvOT6nl51yklqtg.png)



æ‰§è¡Œå®ŒæˆçŠ¶æ€ä¼šå˜ 3ã€Œâœ… Init ZReviewTenderã€-&gt; Project init æˆåŠŸã€‚



5. ç¡®è®¤ init æ¡£æ¡ˆåŠç›®å½•æ˜¯å¦æ­£ç¡®å»ºç«‹



![](/assets/e36e48bb9265/1*XEh53SaAjDV9YVk4T41O5Q.png)



ç‚¹å‡»ä¸Šæ–¹ Tabã€ŒCodeã€å›åˆ°ä¸“æ¡ˆç›®å½•ï¼ŒProject init æˆåŠŸçš„è¯ä¼šå‡ºç°:



- ç›®å½•ï¼š `config/`


- æ¡£æ¡ˆï¼š `config/android.yml`


- æ¡£æ¡ˆï¼š `config/apple.yml`


- ç›®å½•ï¼š `latestCheckTimestamp/`


- æ¡£æ¡ˆï¼š `latestCheckTimestamp/.keep`



6. å®Œæˆ Configuration é…ç½®å¥½ `android.yml` & `apple.yml`



è¿›å…¥ `config/` ç›®å½•å®Œæˆ `android.yml` & `apple.yml` æ¡£æ¡ˆé…ç½®ã€‚



![](/assets/e36e48bb9265/1*SiqBOk6BU38SRJAccC2hEg.png)



ç‚¹å‡»è¿›å…¥è¦ç¼–è¾‘çš„ confi YML æ¡£æ¡ˆç‚¹å‡»å³ä¸Šæ–¹ã€Œâœï¸ã€ç¼–è¾‘æ¡£æ¡ˆã€‚



å‚è€ƒæœ¬æ–‡ä¸‹æ–¹ã€Œ **è®¾å®š** ã€åŒºå—å®Œæˆé…ç½®å¥½ `android.yml` & `apple.yml` ã€‚



![](/assets/e36e48bb9265/1*QZ0wQTtbcoN9tgyElYgYAw.png)



ç¼–è¾‘å®Œæˆåå¯ä»¥ç›´æ¥åœ¨ä¸‹æ–¹ã€ŒCommit changesã€å‚¨å­˜è®¾å®šã€‚



ä¸Šä¼ ç›¸åº”çš„ Key æ¡£æ¡ˆåˆ° `config/` ç›®å½•ä¸‹:



![](/assets/e36e48bb9265/1*pAsWumPT57pLrY3Rn3UZhA.png)



åœ¨ `config/` ç›®å½•ä¸‹ï¼Œå³ä¸Šè§’é€‰æ‹©ã€ŒAdd fileã€-&gt;ã€ŒUpload filesã€



![](/assets/e36e48bb9265/1*CUVQlxKrJjsZZfy3jQErww.png)



å°† config yml é‡Œé…ç½®çš„ç›¸åº” Keyã€å¤–éƒ¨æ¡£æ¡ˆè·¯å¾„ä¸€å¹¶ä¸Šä¼ åˆ° `config/` ç›®å½•ä¸‹ï¼Œæ‹–æ›³æ¡£æ¡ˆåˆ°ã€Œä¸Šæ–¹åŒºå—ã€-&gt; ç­‰å¾…æ¡£æ¡ˆä¸Šä¼ å®Œæˆ -&gt; ä¸‹æ–¹ç›´æ¥ã€ŒCommit changesã€å‚¨å­˜ã€‚



ä¸Šä¼ å®Œæˆåå›åˆ° `/config` ç›®å½•æŸ¥çœ‹æ¡£æ¡ˆæ˜¯å¦æ­£ç¡®å‚¨å­˜&ä¸Šä¼ ã€‚



![](/assets/e36e48bb9265/1*NyeoQzNvhnQJqoXvupnjgQ.png)



7. åˆå§‹åŒ– ZReviewTender (æ‰‹åŠ¨è§¦å‘æ‰§è¡Œä¸€æ¬¡)



![](/assets/e36e48bb9265/1*4QTEqr_DeFndqoWuP7YLsQ.png)



ç‚¹å‡»ä¸Šæ–¹ Tabã€ŒActionsã€-&gt; å·¦æ–¹é€‰æ‹©ã€ŒZReviewTenderã€-&gt; å³æ–¹æŒ‰é’®é€‰æ‹©ã€ŒRun workflowã€-&gt; ç‚¹å‡»ã€ŒRun workflowã€æŒ‰é’®æ‰§è¡Œä¸€æ¬¡ ZReviewTenderã€‚



**ç‚¹å‡»åï¼Œé‡æ–°æ•´ç†ç½‘é¡µ** ä¼šå‡ºç°ï¼š



![](/assets/e36e48bb9265/1*_zTIiPyGsAejyH1BpggzhQ.png)



ç‚¹å‡»ã€ŒZReviewTenderã€å¯è¿›å…¥æŸ¥çœ‹æ‰§è¡ŒçŠ¶å†µã€‚



![](/assets/e36e48bb9265/1*-Xso56jtpCVicp56w1y6sQ.png)



å±•å¼€ã€Œ `Run ZreviewTender -r` ã€åŒºå—å¯æŸ¥çœ‹æ‰§è¡Œ Logã€‚



è¿™è¾¹å¯ä»¥çœ‹åˆ°å‡ºç° Errorï¼Œå› ä¸ºæˆ‘è¿˜æ²¡é…ç½®å¥½æˆ‘çš„ config yml æ¡£æ¡ˆã€‚



å›å¤´è°ƒæ•´å¥½ android/apple config yml åå†å›åˆ° 6. æ­¥éª¤ä¸€å¼€å§‹é‡æ–°è§¦å‘æ‰§è¡Œä¸€æ¬¡ã€‚



![](/assets/e36e48bb9265/1*SAiaDofDwiFI8Z3ndDGz2w.png)



æŸ¥çœ‹ ã€Œ `ZReviewTender -r` ã€åŒºå—çš„ log ç¡®è®¤æ‰§è¡ŒæˆåŠŸï¼



![](/assets/e36e48bb9265/1*W5PHoBzHQxV1WQ82TrZqfA.png)



Slack æŒ‡å®šæ¥æ”¶æœ€æ–°è¯„ä»·è®¯æ¯çš„ Channel ä¹Ÿä¼šå‡ºç° init Success æˆåŠŸè®¯æ¯ ğŸ‰



8. **Done!** ğŸ‰ ğŸ‰ ğŸ‰



![](/assets/e36e48bb9265/1*8WcmenKeWSd92DjWeAQSGg.png)



é…ç½®å®Œæˆï¼å°”åæ¯ 6 ä¸ªå°æ—¶ä¼šè‡ªåŠ¨çˆ¬å–æœŸé—´å†…çš„æœ€æ–°è¯„ä»·å¹¶è½¬å‘åˆ°ä½ çš„ Slack Channel ä¸­ï¼



å¯åœ¨ Repo é¦–é¡µ Readme ä¸­çš„é¡¶éƒ¨æŸ¥çœ‹æœ€æ–°ä¸€æ¬¡æ‰§è¡ŒçŠ¶å†µï¼š



![](/assets/e36e48bb9265/1*sz4piAAAhOqEGP0EFbMmKg.png)



è‹¥å‡ºç° Error å³ä»£è¡¨æ‰§è¡Œå‘ç”Ÿé”™è¯¯ï¼Œè¯·ä» Acions -&gt; ZReviewTender è¿›å…¥æŸ¥çœ‹çºªå½•ï¼›å¦‚æœæœ‰æ„å¤–çš„é”™è¯¯ï¼Œè¯· [**å»ºç«‹ä¸€ä¸ª Issue**](https://github.com/ZhgChgLi/ZReviewTender/issues){:target="_blank"} **é™„ä¸Šçºªå½•èµ„è®¯ï¼Œå°†ä¼šå°½å¿«ä¿®æ­£ï¼**



> âŒâŒâŒæ‰§è¡Œå‘ç”Ÿé”™è¯¯åŒæ—¶ Github ä¹Ÿä¼šå¯„ä¿¡é€šçŸ¥ï¼Œä¸æ€•å‘ç”Ÿé”™è¯¯æœºå™¨äººæŒ‚æ‰ä½†æ²¡äººå‘ç°ï¼



#### Github Action è°ƒæ•´



æ‚¨è¿˜å¯ä»¥ä¾ç…§è‡ªå·±éœ€æ±‚é…ç½® Github Action æ‰§è¡Œè§„åˆ™ã€‚



ç‚¹å‡»ä¸Šæ–¹ Tabã€ŒActionsã€-&gt; å·¦æ–¹ã€ŒZReviewTenderã€-&gt; å³ä¸Šæ–¹ã€Œ `ZReviewTender.yml` ã€



![](/assets/e36e48bb9265/1*DnquiwKTgYY6R2ysNx8F1w.png)



![](/assets/e36e48bb9265/1*onoSoGPahBOaAsBo6Ou-3g.png)



ç‚¹å‡»å³ä¸Šæ–¹ã€Œâœï¸ã€ç¼–è¾‘æ¡£æ¡ˆã€‚



![](/assets/e36e48bb9265/1*HY_f3zOivHGQv5tuwUyw8Q.png)



**æœ‰ä¸¤ä¸ªå‚æ•°å¯ä¾›è°ƒæ•´ï¼š**



**cron** : è®¾å®šå¤šä¹…æ£€æŸ¥ä¸€æ¬¡æœ‰æ— æ–°è¯„ä»·ï¼Œé¢„è®¾æ˜¯ `15 */6 * * *` ä»£è¡¨æ¯ 6 å°æ—¶ 15 åˆ†é’Ÿä¼šæ‰§è¡Œä¸€æ¬¡ã€‚



![](/assets/e36e48bb9265/1*cUGMHPmjlMRV_rRXItN4qg.png)



å¯å‚è€ƒ [crontab.guru](https://crontab.guru/#15_*/6_*_*_*){:target="_blank"} ä¾ç…§è‡ªå·±çš„éœ€æ±‚é…ç½®ã€‚



> **è¯·æ³¨æ„ï¼š**



> 1. Github Action ä½¿ç”¨çš„æ˜¯ UTC æ—¶åŒº



> 2. æ‰§è¡Œé¢‘ç‡è¶Šé«˜ä¼šæ¶ˆè€—è¶Šå¤šGithub Action æ‰§è¡Œé¢åº¦



**run** : è®¾å®šè¦æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œå¯å‚è€ƒæœ¬æ–‡ä¸‹æ–¹ã€Œ **æ‰§è¡Œ** ã€åŒºå—ï¼Œé¢„è®¾æ˜¯ `ZReviewTender -r`



- é¢„è®¾æ‰§è¡Œ Android App & Apple(iOS/macOS App)ï¼š `ZReviewTender -r`


- åªæ‰§è¡Œ Android Appï¼š `ZReviewTender -g`


- åªæ‰§è¡Œ Apple(iOS/macOS App) Appï¼š `ZReviewTender -a`



ç¼–è¾‘å®Œæˆåç‚¹å‡»å³ä¸Šæ–¹ã€ŒStart commitã€é€‰æ‹©ã€ŒCommit changesã€å‚¨å­˜è®¾å®šã€‚



#### æ‰‹åŠ¨è§¦å‘æ‰§è¡Œ ZReviewTender



å‚è€ƒå‰æ–‡ã€Œ6. åˆå§‹åŒ– ZReviewTender (æ‰‹åŠ¨è§¦å‘æ‰§è¡Œä¸€æ¬¡)ã€



#### ä½¿ç”¨ Gem å®‰è£…



å¦‚æœç†Ÿæ‚‰ Gems å¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å®‰è£… `ZReviewTender`



```bash
gem install ZReviewTender
```



#### ä½¿ç”¨ Gem å®‰è£… (ä¸ç†Ÿæ‚‰ Ruby/Gems)



å¦‚æœä¸ç†Ÿæ‚‰ Ruby or Gems å¯ä»¥ Follow ä»¥ä¸‹æ­¥éª¤ Step by Step å®‰è£… `ZReviewTender`



1. macOS è™½è‡ªå¸¦ Rubyï¼Œä½†å»ºè®®ä½¿ç”¨ [rbenv](https://github.com/rbenv/rbenv){:target="_blank"} or [rvm](https://rvm.io/){:target="_blank"} å®‰è£…æ–°çš„ Ruby åŠç®¡ç† Ruby ç‰ˆæœ¬ (æˆ‘ä½¿ç”¨ `2.6.5` )


2. ä½¿ç”¨ [rbenv](https://github.com/rbenv/rbenv){:target="_blank"} or [rvm](https://rvm.io/){:target="_blank"} å®‰è£… Ruby 2.6.5ï¼Œå¹¶åˆ‡æ¢è‡³ rbenv/rvm çš„ Ruby


3. ä½¿ç”¨ `which ruby` ç¡®è®¤å½“å‰ä½¿ç”¨çš„ Ruby **é** `/usr/bin/ruby` ç³»ç»Ÿ Ruby


4. Ruby ç¯å¢ƒ Ok åä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å®‰è£… `ZReviewTender`



```typescript
gem install ZReviewTender
```



### éƒ¨ç½² â€” æƒ³è‡ªè¡Œæ‰©å……åŠŸèƒ½



#### æ‰‹åŠ¨



1. git clone [**ZReviewTender**](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"} Source Code


2. ç¡®è®¤ & å®Œå–„ Ruby ç¯å¢ƒ


3. è¿›å…¥ç›®å½•ï¼Œæ‰§è¡Œ `bundle install` [**ZReviewTender**](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"} å®‰è£…ç›¸å…³ä¾èµ–



Processor å»ºç«‹æ–¹å¼å¯å‚è€ƒåé¢æ–‡ç« å†…å®¹ã€‚



### è®¾å®š



[**ZReviewTender**](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"} â€” ä½¿ç”¨ yaml æ¡£è®¾å®š Apple/Google è¯„ä»·æœºå™¨äººã€‚



**[æ¨è]** ç›´æ¥ä½¿ç”¨æ–‡ç« ä¸‹æ–¹çš„æ‰§è¡ŒæŒ‡ä»¤ â€” ã€Œäº§ç”Ÿè®¾å®šæ¡£æ¡ˆã€:



```bash
ZReviewTender -i
```



ç›´æ¥äº§ç”Ÿç©ºç™½çš„ `apple.yml` & `android.yml` è®¾å®šæ¡£ã€‚



#### Apple (iOS/macOS App)



å‚è€ƒ apple.example.yml æ¡£æ¡ˆï¼š



[![](https://repository-images.githubusercontent.com/516425682/1cc1a829-d87d-4d4a-925b-60471b912b23)](https://github.com/ZhgChgLi/ZReviewTender/blob/main/config/apple.example.yml){:target="_blank"}



> âš ï¸ ä¸‹è½½ä¸‹æ¥ `apple.example.yml` åè®°å¾—å°†æ¡£åæ”¹æˆ `apple.yml`



apple.yml:



```yaml
platform: 'apple'
appStoreConnectP8PrivateKeyFilePath: '' # APPLE STORE CONNECT API PRIVATE .p8 KEY File Path
appStoreConnectP8PrivateKeyID: '' # APPLE STORE CONNECT API PRIVATE KEY ID
appStoreConnectIssueID: '' # APPLE STORE CONNECT ISSUE ID
appID: '' # APP ID
...
```



**appStoreConnectIssueIDï¼š**



![](/assets/e36e48bb9265/1*FsgHMeCGLVbuetBC4gIP_w.png)



- App Store Connect -&gt; Keys -&gt; [App Store Connect API](https://appstoreconnect.apple.com/access/api){:target="_blank"}


- Issuer ID: `appStoreConnectIssueID`



**appStoreConnectP8PrivateKeyID & appStoreConnectP8PrivateKeyFilePathï¼š**



![](/assets/e36e48bb9265/1*xBtkRFEKO2xHU26TMdXJZQ.png)



- Name: `ZReviewTender`


- Access: `App Manager`



![](/assets/e36e48bb9265/1*DvjiO3IkHEiPXp0M_dnnww.png)



- appStoreConnectP8PrivateKeyID: `Key ID`


- appStoreConnectP8PrivateKeyFilePath: `/AuthKey_XXXXXXXXXX.p8` ï¼ŒDownload API Keyï¼Œå¹¶å°†æ¡£æ¡ˆæ”¾å…¥ä¸ config yml åŒç›®å½•ä¸‹ã€‚



**appID:**



![](/assets/e36e48bb9265/1*Ov2pyW9anRVqNCpbxhHtJQ.png)



appID: [App Store Connect](https://appstoreconnect.apple.com/apps){:target="_blank"} -&gt; App Store -&gt; General -&gt; App Information -&gt; `Apple ID`



#### GCP Service Account



ZReviewTender æ‰€ä½¿ç”¨åˆ°çš„ Google API æœåŠ¡ (æå–å•†åŸè¯„ä»·ã€Google ç¿»è¯‘ã€Google Sheet) éƒ½æ˜¯ä½¿ç”¨ Service Account éªŒè¯æ–¹å¼ã€‚



å¯å…ˆä¾ç…§ [**å®˜æ–¹æ­¥éª¤å»ºç«‹ GCP & Service Account**](https://cloud.google.com/docs/authentication/production#create_service_account){:target="_blank"} ä¸‹è½½ä¿å­˜ GCP Service Account èº«ä»½æƒé™é‡‘é’¥ ( `*.json` )ã€‚



- å¦‚è¦ä½¿ç”¨è‡ªåŠ¨ç¿»è¯‘åŠŸèƒ½è¯·ç¡®è®¤ GCPæœ‰å¯ç”¨ `Cloud Translation API` å’Œä½¿ç”¨çš„ Service Account ä¹Ÿæœ‰åŠ å…¥


- å¦‚è¦ä½¿ç”¨è®°å½•åˆ° Google Sheet åŠŸèƒ½è¯·ç¡®è®¤ GCP æœ‰å¯ç”¨ `Google Sheets API` ã€ `Google Drive API` å’Œä½¿ç”¨çš„ Service Account ä¹Ÿæœ‰åŠ å…¥



![](/assets/e36e48bb9265/1*VaVD2bdnbVwWCAuwhV90sA.png)



#### Google Play Console (Android App)



å‚è€ƒ android.example.yml æ¡£æ¡ˆï¼š



[![](https://repository-images.githubusercontent.com/516425682/1cc1a829-d87d-4d4a-925b-60471b912b23)](https://github.com/ZhgChgLi/ZReviewTender/blob/main/config/android.example.yml){:target="_blank"}



> âš ï¸ ä¸‹è½½ä¸‹æ¥ `android.example.yml` åè®°å¾—å°†æ¡£åæ”¹æˆ `android.yml`



android.yml:



```yaml
platform: 'android'
packageName: '' # Android App Package Name
keyFilePath: '' # Google Android Publisher API Credential .json File Path
playConsoleDeveloperAccountID: '' # Google Console Developer Account ID
playConsoleAppID: '' # Google Console App ID
......
```



**packageName:**



![](/assets/e36e48bb9265/1*XRzKNGhVbBef7Hl9XPcaWw.png)



packageName: `com.XXXXX` å¯äº [Google Play Console](https://play.google.com/console/){:target="_blank"} -&gt; Dashboard -&gt; App ä¸­å–å¾—



**playConsoleDeveloperAccountID & playConsoleAppID:**



å¯ç”± [Google Play Console](https://play.google.com/console/){:target="_blank"} -&gt; Dashboard -&gt; App é¡µé¢ç½‘å€ä¸­å–å¾—ï¼š



[https://play.google.com/console/developers/ **playConsoleDeveloperAccountID** /app/ **playConsoleAppID** /app-dashboard](https://play.google.com/console/developers/playConsoleDeveloperAccountID/app/playConsoleAppID/app-dashboard){:target="_blank"}



å°†ç”¨äºç»„åˆè¯„ä»·è®¯æ¯è¿ç»“ï¼Œè®©å›¢é˜Ÿå¯ä»¥ç‚¹å‡»è¿ç»“å¿«é€Ÿè¿›å…¥åå°è¯„ä»·å›å¤é¡µé¢ã€‚



**keyFilePath:**



æœ€é‡è¦çš„èµ„è®¯ï¼ŒGCP Service Account èº«ä»½æƒé™é‡‘é’¥ ( `*.json` )



éœ€è¦æŒ‰ç…§ [å®˜æ–¹æ–‡ä»¶](https://developers.google.com/android-publisher/getting_started){:target="_blank"} æ­¥éª¤ï¼Œå»ºç«‹ Google Cloud Project & Service Account å¹¶åˆ° Google Play Console -&gt; Setup -&gt; API Access ä¸­å®Œæˆå¯ç”¨ `Google Play Android Developer API` ï¼†è¿ç»“ä¸“æ¡ˆï¼Œåˆ° GCP ç‚¹å‡»ä¸‹è½½æœåŠ¡å¸æˆ·çš„ JSON é‡‘é’¥ã€‚



![](/assets/e36e48bb9265/1*yQhAVOuF_CvM49Vayl40zA.png)



![](/assets/e36e48bb9265/1*-AKvlk9P6R0YkuZwsXJaLA.png)



**JSON é‡‘é’¥èŒƒä¾‹å†…å®¹å¦‚ä¸‹ï¼š**



gcp_key.json:



```javascript
{
    "type": "service_account",
    "project_id": "XXXX",
    "private_key_id": "XXXX",
    "private_key": "-----BEGIN PRIVATE KEY-----\nXXXX\n-----END PRIVATE KEY-----\n",
    "client_email": "XXXX@XXXX.iam.gserviceaccount.com",
    "client_id": "XXXX",
    "auth_uri": "https://accounts.google.com/o/oauth2/auth",
    "token_uri": "https://oauth2.googleapis.com/token",
    "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
    "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/XXXX.iam.gserviceaccount.com"
}
```



- keyFilePath: `/gcp_key.json` é‡‘é’¥æ¡£æ¡ˆè·¯å¾„ï¼Œå°†æ¡£æ¡ˆæ”¾å…¥ä¸ config yml åŒç›®å½•ä¸‹ã€‚



#### Processors



```yaml
processors:
    - FilterProcessor:
        class: "FilterProcessor"
        enable: true # enable
        keywordsInclude: [] # keywords you want to filter out
        ratingsInclude: [] # ratings you want to filter out
        territoriesInclude: [] # territories you want to filter out
    - GoogleTranslateProcessor: # Google Translate Processor, will translate review text to your language, you can remove whole block if you don't needed it.
        class: "GoogleTranslateProcessor"
        enable: false # enable
        googleTranslateAPIKeyFilePath: '' # Google Translate API Credential .json File Path
        googleTranslateTargetLang: 'zh-TW' # Translate to what Language
        googleTranslateTerritoriesExclude: ["TWN","CHN"] # Review origin Territory (language) that you don't want to translate.
    - SlackProcessor: # Slack Processor, resend App Review to Slack.
        class: "SlackProcessor"
        enable: true # enable
        slackTimeZoneOffset: "+08:00" # Review Created Date TimeZone
        slackAttachmentGroupByNumber: "1" # 1~100, how many review message in 1 slack message.
        slackBotToken: "" # Slack Bot Token, send slack message throught Slack Bot.
        slackBotTargetChannel: "" # Slack Bot Token, send slack message throught Slack Bot. (recommended, first priority)
        slackInCommingWebHookURL: "" # Slack In-Comming WebHook URL, Send slack message throught In-Comming WebHook, not recommended, deprecated.
    ...More Processors...
```



ZReviewTender è‡ªå¸¦å››ä¸ª Processorï¼Œå…ˆåé¡ºåºä¼šå½±å“åˆ°èµ„æ–™å¤„ç†æµç¨‹ FilterProcessor-&gt;GoogleTranslateProcessor-&gt;SlackProcessor-&gt; GoogleSheetProcessorã€‚



**FilterProcessor:**



ä¾ç…§æŒ‡å®šæ¡ä»¶è¿‡æ»¤æå–çš„è¯„ä»·ï¼Œåªå¤„ç†ç¬¦åˆæ¡ä»¶çš„è¯„ä»·ã€‚



- class: `FilterProcessor` æ— éœ€è°ƒæ•´ï¼ŒæŒ‡å‘ lib/Processors/ `FilterProcessor` .rb


- enable: `true` / `false` å¯ç”¨æ­¤ Processor or Not


- keywordsInclude: [â€œ `å…³é”®å­—1` â€,â€œ `å…³é”®å­—2` â€â€¦] ç­›é€‰å‡ºå†…å®¹åŒ…å«è¿™äº›å…³é”®å­—çš„è¯„ä»·


- ratingsInclude: [ `1` , `2` â€¦] 1~5 ç­›é€‰å‡ºåŒ…å«è¿™äº›è¯„ä»·åˆ†æ•°çš„è¯„ä»·


- territoriesInclude: [â€œ `zh-hant` â€,â€ `TWN` â€â€¦] ç­›é€‰å‡ºåŒ…å«è¿™äº›åœ°åŒº(Apple)æˆ–è¯­ç³»(Android)çš„è¯„ä»·



**GoogleTranslateProcessor:**



å°†è¯„ä»·ç¿»è¯‘æˆæŒ‡å®šè¯­è¨€ã€‚



- class: `GoogleTranslateProcessor` æ— éœ€è°ƒæ•´ï¼ŒæŒ‡å‘ lib/Processors/ `GoogleTranslateProcessor` .rb


- enable: `true` / `false` å¯ç”¨æ­¤ Processor or Not


- googleTranslateAPIKeyFilePath: `/gcp_key.json` GCP Service Account èº«ä»½æƒé™é‡‘é’¥ File Path `*.json` ï¼Œå°†æ¡£æ¡ˆæ”¾å…¥ä¸ config yml åŒç›®å½•ä¸‹ï¼Œå†…å®¹èŒƒä¾‹å¯å‚è€ƒä¸Šæ–¹ Google Play Console JSON é‡‘é’¥èŒƒä¾‹ã€‚
  (è¯·ç¡®è®¤è¯¥ JSON key ä¹‹ service account æœ‰ `Cloud Translation API` ä½¿ç”¨æƒé™)


- googleTranslateTargetLang: `zh-TW` ã€ `en` â€¦ç›®æ ‡ç¿»è¯‘è¯­è¨€


- googleTranslateTerritoriesExclude: [â€œ `zh-hant` â€,â€ `TWN` â€â€¦] ä¸éœ€ç¿»è¯‘çš„åœ°åŒº(Apple)æˆ–è¯­ç³»(Android)



**SlackProcessor:**



è½¬å‘è¯„ä»·åˆ° Slackã€‚



- class: `SlackProcessor` æ— éœ€è°ƒæ•´ï¼ŒæŒ‡å‘ lib/Processors/ `SlackProcessor` .rb


- enable: `true` / `false` å¯ç”¨æ­¤ Processor or Not


- slackTimeZoneOffset: `+08:00` è¯„ä»·æ—¶é—´æ˜¾ç¤ºæ—¶åŒº


- slackAttachmentGroupByNumber: `1` è®¾å®šå‡ åˆ™ Reviews åˆå¹¶æˆåŒä¸€åˆ™è®¯æ¯ï¼ŒåŠ é€Ÿå‘é€ï¼›é¢„è®¾ 1 åˆ™ Review 1 åˆ™ Slack è®¯æ¯ã€‚


- slackBotToken: `xoxb-xxxx-xxxx-xxxx` [Slack Bot Token](https://slack.com/help/articles/115005265703-Create-a-bot-for-your-workspace){:target="_blank"} ï¼ŒSlack å»ºè®®å»ºç«‹ä¸€ä¸ª Slack Bot åŒ…å« `postMessages` Scope å¹¶ä½¿ç”¨å…¶å‘é€ Slack è®¯æ¯


- slackBotTargetChannel: `CXXXXXX` ç¾¤ç»„ ID ( **éç¾¤ç»„åç§°** )ï¼ŒSlack Bot è¦å‘é€åˆ°å“ªä¸ª Channel ç¾¤ç»„ï¼›ä¸” **éœ€è¦æŠŠä½ çš„ Slack Bot åŠ å…¥åˆ°è¯¥ç¾¤ç»„**


- slackInCommingWebHookURL: `https://hooks.slack.com/services/XXXXX` ä½¿ç”¨æ—§çš„ [InComming WebHookURL](https://slack.com/apps/A0F7XDUAZ-incoming-webhooks){:target="_blank"} å‘é€è®¯æ¯åˆ° Slackï¼Œæ³¨æ„ï¼Slack ä¸å»ºè®®å†ç»§ç»­ä½¿ç”¨æ­¤æ–¹æ³•å‘é€è®¯æ¯ã€‚



> Please note, this is a legacy custom integration â€” an outdated way for teams to integrate with Slack. These integrations lack newer features and they will be deprecated and possibly removed in the future. **We do not recommend their use.** Instead, we suggest that you check out their replacement: [Slack apps](https://api.slack.com/start){:target="_blank"} .



- slackBotToken ä¸ slackInCommingWebHookURLï¼ŒSlackProcessor ä¼šä¼˜é€‰é€‰æ‹©ä½¿ç”¨ slackBotToken



![](/assets/e36e48bb9265/1*D1kt_6jH0UaJo2kvf9l5Qw.png)



![](/assets/e36e48bb9265/1*UjE_LxtZ0adwS6tr2-vgbw.png)



### GoogleSheetProcessor



çºªå½•è¯„ä»·åˆ° Google Sheetã€‚



- class: `GoogleSheetProcessor` æ— éœ€è°ƒæ•´ï¼ŒæŒ‡å‘ lib/Processors/ `SlackProcessor` .rb


- enable: `true` / `false` å¯ç”¨æ­¤ Processor or Not


- googleSheetAPIKeyFilePath: `/gcp_key.json` GCP Service Account èº«ä»½æƒé™é‡‘é’¥ File Path `*.json` ï¼Œå°†æ¡£æ¡ˆæ”¾å…¥ä¸ config yml åŒç›®å½•ä¸‹ï¼Œå†…å®¹èŒƒä¾‹å¯å‚è€ƒä¸Šæ–¹ Google Play Console JSON é‡‘é’¥èŒƒä¾‹ã€‚
  (è¯·ç¡®è®¤è¯¥ JSON key ä¹‹ service account æœ‰ `Google Sheets API` ã€ `Google Drive API` ä½¿ç”¨æƒé™)


- googleSheetTimeZoneOffset: `+08:00` è¯„ä»·æ—¶é—´æ˜¾ç¤ºæ—¶åŒº


- googleSheetID: `Google Sheet ID`
  å¯ç”± Google Sheet ç½‘å€ä¸­å–å¾—ï¼šhttps://docs.google.com/spreadsheets/d/ `googleSheetID` /


- googleSheetName: Sheet åç§°, e.g. `Sheet1`


- keywordsInclude: [â€œ `å…³é”®å­—1` â€,â€œ `å…³é”®å­—2` â€â€¦] ç­›é€‰å‡ºå†…å®¹åŒ…å«è¿™äº›å…³é”®å­—çš„è¯„ä»·


- ratingsInclude: [ `1` , `2` â€¦] 1~5 ç­›é€‰å‡ºåŒ…å«è¿™äº›è¯„ä»·åˆ†æ•°çš„è¯„ä»·


- territoriesInclude: [â€œ `zh-hant` â€,â€ `TWN` â€â€¦] ç­›é€‰å‡ºåŒ…å«è¿™äº›åœ°åŒº(Apple)æˆ–è¯­ç³»(Android)çš„è¯„ä»·


- values: [ ] è¯„ä»·èµ„è®¯çš„æ ä½ç»„åˆ



```
%TITLE% è¯„ä»·æ ‡é¢˜
%BODY% è¯„ä»·å†…å®¹
%RATING% è¯„ä»·åˆ†æ•° 1~5
%PLATFORM% è¯„ä»·æ¥æºå¹³å° Apple or Android
%ID% è¯„ä»·ID
%USERNAME% è¯„ä»·
%URL% è¯„ä»·å‰å¾€è¿ç»“
%TERRITORY% è¯„ä»·åœ°åŒº(Apple)æˆ–è¯„ä»·è¯­ç³»(Android)
%APPVERSION% è¢«è¯„ä»·çš„ App ç‰ˆæœ¬
%CREATEDDATE% è¯„ä»·å»ºç«‹æ—¥æœŸ
```



ä¾‹å¦‚æˆ‘çš„ Google Sheet æ ä½å¦‚ä¸‹ï¼š



```
è¯„ä»·åˆ†æ•°,è¯„ä»·æ ‡é¢˜,è¯„ä»·å†…å®¹,è¯„ä»·èµ„è®¯
```



åˆ™ values å¯è®¾å®šæˆï¼š



```
values: ["%TITLE%","%BODY%","%RATING%","%PLATFORM% - %APPVERSION%"]
```



#### è‡ªè®¢ Processor ä¸²æ¥è‡ªå·±çš„å·¥ä½œæµç¨‹



è‹¥éœ€è¦è‡ªè®¢ Processor è¯·æ”¹ç”¨æ‰‹åŠ¨éƒ¨ç½²ï¼Œå›  gem ä¸Šçš„ ZReviewTender å·²æ‰“åŒ…æ— æ³•åŠ¨æ€è°ƒæ•´ã€‚



æ‚¨å¯å‚è€ƒ [lib/Processors/ProcessorTemplate.rb](https://github.com/ZhgChgLi/ZReviewTender/blob/main/lib/Processors/ProcessorTemplate.rb){:target="_blank"} å»ºç«‹æ‚¨çš„æ‰©å……åŠŸèƒ½:



```ruby
$lib = File.expand_path('../lib', File.dirname(__FILE__))

require "Models/Review"
require "Models/Processor"
require "Helper"
require "ZLogger"

# Add to config.yml:
#
# processors:
#   - ProcessorTemplate:
#       class: "ProcessorTemplate"
#       parameter1: "value"
#       parameter2: "value"
#       parameter3: "value"
#       ...
#

class ProcessorTemplate < Processor

    def initialize(config, configFilePath, baseExecutePath)
        # init Processor
        # get paraemter from config e.g. config["parameter1"]
        # configFilePath: file path of config file (apple.yml/android.yml)
        # baseExecutePath: user excute path
    end

    def processReviews(reviews, platform)
        if reviews.length < 1
            return reviews
        end

        ## do what your want to do with reviews...
        
        ## return result reviews
        return reviews
    end
end
```



**initialize ä¼šç»™äºˆ:**



- config Object: å¯¹åº” config yml å†…çš„è®¾å®šå€¼


- configFilePath: ä½¿ç”¨çš„ config yml æ¡£æ¡ˆè·¯å¾„


- baseExecutePath: ä½¿ç”¨è€…åœ¨å“ªä¸ªè·¯å¾„æ‰§è¡Œ ZReviewTender



**processReviews(reviews, platform):**



çˆ¬å–å®Œæ–°è¯„ä»·åï¼Œä¼šè¿›å…¥è¿™ä¸ª function è®© Processor æœ‰æœºä¼šå¤„ç†ï¼Œå¤„ç†å®Œè¯· return ç»“æœçš„ Reviewsã€‚



Review èµ„æ–™ç»“æ„å®šä¹‰åœ¨ lib/Models/ [Review.rb](https://github.com/ZhgChgLi/ZReviewTender/blob/main/lib/Models/Review.rb){:target="_blank"}



#### é™„æ³¨



`XXXterritorXXX` **å‚æ•°ï¼š**



- Apple ä½¿ç”¨åœ°åŒºï¼šTWM/JPNâ€¦


- Android ä½¿ç”¨è¯­ç³»ï¼šzh-hant/en/â€¦



**è‹¥ä¸éœ€è¦æŸä¸ª Processorï¼š**
å¯ä»¥è®¾å®š `enable: false` æˆ–æ˜¯ç›´æ¥ç§»é™¤è¯¥ Processor Config Blockã€‚



**Processors æ‰§è¡Œé¡ºåºå¯ä¾ç…§æ‚¨çš„éœ€æ±‚è‡ªè¡Œè°ƒæ•´ï¼š**
e.g. å…ˆæ‰§è¡Œ Filter å†æ‰§è¡Œç¿»è¯‘å†æ‰§è¡Œ Slack å†æ‰§è¡Œ Log to Google Sheetâ€¦



### æ‰§è¡Œ



> âš ï¸ ä½¿ç”¨ Gem å¯ç›´æ¥ä¸‹ `ZReviewTender` ï¼Œè‹¥ä¸ºæ‰‹åŠ¨éƒ¨ç½²ä¸“æ¡ˆè¯·ä½¿ç”¨ `bundle exec ruby bin/ZReviewTender` æ‰§è¡Œã€‚



#### äº§ç”Ÿè®¾å®šæ¡£æ¡ˆï¼š



```css
ZReviewTender -i
```



ä» apple.example.yml & android.example.yml äº§ç”Ÿ apple.yml & android.yml åˆ°å½“å‰æ‰§è¡Œç›®å½•çš„ `config/` ç›®å½•ä¸‹ã€‚



#### æ‰§è¡Œ Apple & Android è¯„ä»·çˆ¬å–ï¼š



```bash
ZReviewTender -r
```



- é»˜è®¤è¯»å– `/config/` ä¸‹ `apple.yml` & `android.yml` è®¾å®š



#### æ‰§è¡Œ Apple & Android è¯„ä»·çˆ¬å– & æŒ‡å®šè®¾å®šæ¡£ç›®å½•ï¼š



```bash
ZReviewTender --run=è®¾å®šæ¡£ç›®å½•
```



- é»˜è®¤è¯»å– `/config/` ä¸‹ `apple.yml` & `android.yml` è®¾å®š



#### åªæ‰§è¡Œ Apple è¯„ä»·çˆ¬å–ï¼š



```bash
ZReviewTender -a
```



- é»˜è®¤è¯»å– `/config/` ä¸‹ `apple.yml` è®¾å®š



#### åªæ‰§è¡Œ Apple è¯„ä»·çˆ¬å– & æŒ‡å®šè®¾å®šæ¡£ä½ç½®ï¼š



```bash
ZReviewTender --apple=apple.ymlè®¾å®šæ¡£ä½ç½®
```



#### åªæ‰§è¡Œ Android è¯„ä»·çˆ¬å–ï¼š



```bash
ZReviewTender -g
```



- é»˜è®¤è¯»å– `/config/` ä¸‹ `android.yml` è®¾å®š



#### åªæ‰§è¡Œ Android è¯„ä»·çˆ¬å– & æŒ‡å®šè®¾å®šæ¡£ä½ç½®ï¼š



```bash
ZReviewTender --googleAndroid=android.ymlè®¾å®šæ¡£ä½ç½®
```



#### æ¸…é™¤æ‰§è¡Œçºªå½•å›åˆ°åˆå§‹è®¾å®š



```bash
ZReviewTender -d
```



ä¼šåˆ é™¤ `/latestCheckTimestamp` é‡Œçš„ Timestamp çºªå½•æ¡£æ¡ˆï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œå†æ¬¡æ‰§è¡Œçˆ¬å–ä¼šå†æ¬¡æ”¶åˆ° init success è®¯æ¯:



![](/assets/e36e48bb9265/1*8qVrSt1pXwNncPG_GEgm9A.png)



#### å½“å‰ ZReviewTender ç‰ˆæœ¬



```bash
ZReviewTender -v
```



æ˜¾ç¤ºå½“å‰ ZReviewTender å† [RubyGem](https://rubygems.org/gems/ZReviewTender){:target="_blank"} ä¸Šçš„æœ€æ–°ç‰ˆæœ¬å·ã€‚



#### æ›´æ–° ZReviewTender åˆ°æœ€æ–°ç‰ˆ (rubygem only)



```bash
ZReviewTender -n
```



#### ç¬¬ä¸€æ¬¡æ‰§è¡Œ



![](/assets/e36e48bb9265/1*62VO8mbJWxXHSeFo3fEUog.png)



ç¬¬ä¸€æ¬¡æ‰§è¡ŒæˆåŠŸä¼šå‘é€åˆå§‹åŒ–æˆåŠŸè®¯æ¯åˆ°æŒ‡å®š Slack Channelï¼Œå¹¶åœ¨æ‰§è¡Œç›¸åº”ç›®å½•ä¸‹äº§ç”Ÿ `latestCheckTimestamp/Apple` , `latestCheckTimestamp/Android` æ¡£æ¡ˆçºªå½•æœ€åçˆ¬å–çš„è¯„ä»· Timestampã€‚



![](/assets/e36e48bb9265/1*U8vjWSHvY2RzUBcUbQoBvQ.png)



å¦å¤–è¿˜ä¼šäº§ç”Ÿä¸€ä¸ª `execute.log` çºªå½•æ‰§è¡Œé”™è¯¯ã€‚



![](/assets/e36e48bb9265/1*TR8IMke6FC1ZktFOiXUWLw.png)



#### è®¾å®šæ’ç¨‹æŒç»­æ‰§è¡Œ



è®¾å®šæ’ç¨‹å®šæ—¶( [crontab](https://crontab.guru/){:target="_blank"} )æŒç»­æ‰§è¡Œçˆ¬å–æ–°è¯„ä»·ï¼ŒZReviewTender ä¼šçˆ¬å– `latestCheckTimestamp` ä¸Šæ¬¡çˆ¬å–çš„è¯„ä»· Timestamp åˆ°è¿™æ¬¡çˆ¬å–æ—¶é—´å†…çš„æ–°è¯„ä»·ï¼Œå¹¶æ›´æ–° Timestamp çºªå½•æ¡£æ¡ˆã€‚



e.g. crontab: `15 */6 * * * ZReviewTender -r`



å¦å¤–è¦æ³¨æ„å› ä¸º Android API åªæä¾›æŸ¥è¯¢è¿‘ 7 å¤©æ–°å¢æˆ–ç¼–ä¿®çš„è¯„ä»·ï¼Œæ‰€ä»¥æ’æˆå‘¨æœŸè¯·å‹¿è¶…è¿‡ 7 å¤©ï¼Œä»¥å…æœ‰è¯„ä»·é—æ¼ã€‚



![<https://developers.google.com/android-publisher/reply-to-reviews#retrieving_a_set_of_reviews>{:target="_blank"}](/assets/e36e48bb9265/0*4atedIT5pjLul10U.png)



<https://developers.google.com/android-publisher/reply-to-reviews#retrieving_a_set_of_reviews>{:target="_blank"}



#### [Github Action éƒ¨ç½²](https://github.com/marketplace/actions/zreviewtender-app-reviews-automatic-bot){:target="_blank"}



![[ZReviewTender App Reviews Automatic Bot](https://github.com/marketplace/actions/zreviewtender-app-reviews-automatic-bot){:target="_blank"}](/assets/e36e48bb9265/1*uDsJPUqtiltvCsNBFDTz-w.png)



[ZReviewTender App Reviews Automatic Bot](https://github.com/marketplace/actions/zreviewtender-app-reviews-automatic-bot){:target="_blank"}



```yaml
name: ZReviewTender
on:
  workflow_dispatch:
  schedule:
    - cron: "15 */6 * * *" #æ¯å…­å°æ—¶è·‘ä¸€æ¬¡ï¼Œå¯å‚ç…§ä¸Šæ–¹ crontab è‡ªè¡Œæ›´æ”¹è®¾å®š

jobs:
  ZReviewTender:
    runs-on: ubuntu-latest
    steps:
    - name: ZReviewTender Automatic Bot
      uses: ZhgChgLi/ZReviewTender@main
      with:
        command: '-r' #æ‰§è¡Œ Apple & iOS App è¯„ä»·æ£€æŸ¥ï¼Œå¯å‚ç…§ä¸Šæ–¹æ”¹æˆå…¶ä»–æ‰§è¡ŒæŒ‡ä»¤
```



### **âš ï¸ï¸ï¸ï¸ï¸ å†æ¬¡è­¦å‘Šï¼**



**åŠ¡å¿…ç¡®ä¿ä½ çš„è®¾å®šæ¡£åŠé‡‘é’¥æ— æ³•è¢«å…¬å¼€å­˜å–ï¼Œå› å…¶ä¸­çš„æ•æ„Ÿèµ„è®¯å¯èƒ½å¯¼è‡´ App/Slack æƒé™è¢«ç›—ç”¨ï¼›ä½œè€…ä¸å¯¹è¢«ç›—ç”¨è´Ÿä»»ä½•è´£ä»»ã€‚**



å¦‚æœæœ‰å‘ç”Ÿæ„å¤–çš„é”™è¯¯ï¼Œè¯· [**å»ºç«‹ä¸€ä¸ª Issue**](https://github.com/ZhgChgLi/ZReviewTender/issues){:target="_blank"} **é™„ä¸Šçºªå½•èµ„è®¯ï¼Œå°†ä¼šå°½å¿«ä¿®æ­£ï¼**



### Done



ä½¿ç”¨æ•™å­¦ç»“æŸï¼Œå†æ¥æ˜¯å¹•åå¼€å‘ç§˜è¾›åˆ†äº«ã€‚



=========================



#### ä¸ App Reviews çš„æˆ˜äº‰



æœ¬ä»¥ä¸ºå»å¹´æ€»ç»“çš„ [**AppStore APPâ€™s Reviews Slack Bot é‚£äº›äº‹**](../cb0c68c33994/) åŠè¿ç”¨ç›¸å…³æŠ€æœ¯å®ç°çš„ [**ZReviewsBot â€” Slack App Review é€šçŸ¥æœºå™¨äºº**](../33f6aabb744f/) ï¼Œä¸æ•´åˆ App æœ€æ–°è¯„ä»·è¿›å…¥å…¬å¸å·¥ä½œæµç¨‹è¿™ä»¶äº‹å°±å‘Šä¸€æ®µè½äº†ï¼›æ²¡æƒ³åˆ° Apple å±…ç„¶åœ¨ä»Šå¹´ [æ›´æ–°äº† App Store Connect API](../f1365e51902c/) ï¼Œè®©è¿™ä»¶äº‹èƒ½æŒç»­æ¼”è¿›ã€‚



å»å¹´æ€»ç»“å‡ºæ¥çš„ Apple iOS/macOS App æå–è¯„ä»·çš„è§£å†³æ–¹æ¡ˆï¼š



- Public URL API (RSS) âš ï¸: æ— æ³•å¼¹æ€§ç­›é€‰ã€ç»™çš„èµ„è®¯ä¹Ÿå°‘ã€æœ‰æ•°é‡ä¸Šé™ã€è¿˜æœ‰æˆ‘ä»¬å¶å°”ä¼šé‡åˆ°èµ„æ–™é”™ä¹±é—®é¢˜ï¼Œå¾ˆä¸ç¨³å®šï¼›å®˜æ–¹æœªæ¥å¯èƒ½å¼ƒç”¨


- é€è¿‡ [**Fastlane**](https://fastlane.tools/){:target="_blank"} **â€” [SpaceShip](https://github.com/fastlane/fastlane/tree/master/spaceship){:target="_blank"}** å¸®æˆ‘ä»¬å°è£…å¤æ‚çš„ç½‘é¡µæ“ä½œã€Session ç®¡ç†ï¼Œå» App Store Connection ç½‘ç«™åå°æå–è¯„ä»·èµ„æ–™ (ç­‰äºæ˜¯èµ·ä¸€ä¸ªç½‘é¡µæ¨¡æ‹Ÿå™¨çˆ¬è™«å»åå°çˆ¬èµ„æ–™)ã€‚



ä¾ç…§å»å¹´åšæ³•å°±åªèƒ½ä½¿ç”¨æ–¹æ³•äºŒæ¥è¾¾æˆï¼Œä½†æ•ˆæœä¸å¤ªå®Œç¾ï¼›Session ä¼šè¿‡æœŸï¼Œéœ€è¦äººå·¥å®šæœŸæ›´æ–°ï¼Œä¸”æ— æ³•æ”¾åœ¨ CI/CD Server ä¸Šï¼Œå› ä¸º IP ä¸€å˜ Session ä¼šé©¬ä¸Šè¿‡æœŸã€‚



![[important-note-about-session-duration](https://docs.fastlane.tools/best-practices/continuous-integration/#important-note-about-session-duration){:target="_blank"} by Fastlane](/assets/e36e48bb9265/1*N6B1H_PdtB4bNDrX4BIYRA.png)



[important-note-about-session-duration](https://docs.fastlane.tools/best-practices/continuous-integration/#important-note-about-session-duration){:target="_blank"} by Fastlane



ä»Šå¹´æ”¶åˆ° Apple [æ›´æ–°äº† App Store Connect API](../f1365e51902c/) æ¶ˆæ¯åç«‹é©¬è‘—æ‰‹é‡æ–°è®¾è®¡æ–°çš„è¯„ä»·æœºå™¨äººï¼Œé™¤äº†æ”¹ç”¨å®˜æ–¹ API å¤–ï¼›è¿˜ä¼˜åŒ–äº†ä¹‹å‰çš„æ¶æ„è®¾è®¡åŠæ›´ç†Ÿæ‚‰ Ruby ç”¨æ³•ã€‚



#### [App Store Connect API](../f1365e51902c/) å¼€å‘ä¸Šé‡åˆ°çš„é—®é¢˜



- [List All Customer Reviews for an App](https://developer.apple.com/documentation/appstoreconnectapi/list_all_customer_reviews_for_an_app){:target="_blank"} è¿™ä¸ª Endpoint ä¸ä¼šç»™ App ç‰ˆæœ¬èµ„è®¯



å¾ˆè¯¡å¼‚ï¼Œåªèƒ½ workaround å…ˆæ‰“è¿™ä¸ª endpoint ç­›å‡ºæœ€æ–°è¯„ä»·ï¼Œå†æ‰“ [List All App Store Versions for an App](https://developer.apple.com/documentation/appstoreconnectapi/list_all_app_store_versions_for_an_app){:target="_blank"} & [List All Customer Reviews for an App Store Version](https://developer.apple.com/documentation/appstoreconnectapi/list_all_customer_reviews_for_an_app_store_version){:target="_blank"} ç»„åˆå‡º App ç‰ˆæœ¬èµ„è®¯ã€‚



#### AndroidpublisherV3 å¼€å‘ä¸Šé‡åˆ°çš„é—®é¢˜



- API ä¸æä¾›å–å¾—æ‰€æœ‰è¯„ä»·åˆ—è¡¨çš„æ–¹æ³•ï¼Œåªèƒ½å–å¾—è¿‘ 7 å¤©æ–°å¢/ç¼–ä¿®çš„è¯„ä»·ã€‚


- åŒæ ·ä½¿ç”¨ JWT ä¸²æ¥ Google API (ä¸ä¾èµ–ç›¸å…³ç±»åˆ«åº“ e.g. google-apis-androidpublisher_v3)


- é™„ä¸Šä¸ª Google API JWT äº§ç”Ÿ&ä½¿ç”¨èŒƒä¾‹ï¼š



```ruby
require "jwt"
require "time"

payload = {
  iss: "GCP API èº«ä»½æƒé™é‡‘é’¥ (*.json) æ¡£æ¡ˆä¸­çš„ client_email æ ä½",
  sub: "GCP API èº«ä»½æƒé™é‡‘é’¥ (*.json) æ¡£æ¡ˆä¸­çš„ client_email æ ä½",
  scope: ["https://www.googleapis.com/auth/androidpublisher"]].join(' '),
  aud: "GCP API èº«ä»½æƒé™é‡‘é’¥ (*.json) æ¡£æ¡ˆä¸­çš„ token_uri æ ä½",
  iat: Time.now.to_i,
  exp: Time.now.to_i + 60*20
}

rsa_private = OpenSSL::PKey::RSA.new("GCP API èº«ä»½æƒé™é‡‘é’¥ (*.json) æ¡£æ¡ˆä¸­çš„ private_key æ ä½")
token = JWT.encode payload, rsa_private, 'RS256', header_fields = {kid:"GCP API èº«ä»½æƒé™é‡‘é’¥ (*.json) æ¡£æ¡ˆä¸­çš„ private_key_id æ ä½", typ:"JWT"}

uri = URI("API èº«ä»½æƒé™é‡‘é’¥ (*.json) æ¡£æ¡ˆä¸­çš„ token_uri æ ä½")
https = Net::HTTP.new(uri.host, uri.port)
https.use_ssl = true
request = Net::HTTP::Post.new(uri)
request.body = "grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer&assertion=#{token}"

response = https.request(request).read_body

bearer = result["access_token"]

### use bearer token

uri = URI("https://androidpublisher.googleapis.com/androidpublisher/v3/applications/APP_PACKAGE_NAME/reviews")
https = Net::HTTP.new(uri.host, uri.port)
https.use_ssl = true
        
request = Net::HTTP::Get.new(uri)
request['Authorization'] = "Bearer #{bearer}";
        
response = https.request(request).read_body
        
result = JSON.parse(response)

# success!
```



[![](https://repository-images.githubusercontent.com/516425682/1cc1a829-d87d-4d4a-925b-60471b912b23)](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}



æœ‰ä»»ä½•é—®é¢˜åŠæŒ‡æ•™æ¬¢è¿ [ä¸æˆ‘è”ç»œ](https://www.zhgchg.li/contact){:target="_blank"} ã€‚



*[Post](https://medium.com/zrealm-ios-dev/zreviewtender-%E5%85%8D%E8%B2%BB%E9%96%8B%E6%BA%90%E7%9A%84-app-reviews-%E7%9B%A3%E6%8E%A7%E6%A9%9F%E5%99%A8%E4%BA%BA-e36e48bb9265){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}.*