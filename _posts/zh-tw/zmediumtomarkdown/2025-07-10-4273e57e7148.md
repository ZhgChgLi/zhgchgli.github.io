---
title: "CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆå››ï¼‰ï¼šä½¿ç”¨ Google Apps Script Web App ä¸²æ¥ GitHub Actions å»ºç½®å…è²»æ˜“ç”¨çš„æ‰“åŒ…å·¥å…·å¹³å°"
author: "ZhgChgLi"
date: 2025-07-10T12:30:51.530+0000
last_modified_at: 2025-07-10T12:57:29.484+0000
categories: ["ZRealm Dev."]
tags: ["ios-app-development","cicd","google-apps-script","web-development","tools"]
description: "GAS Web App ä¸²æ¥ GitHub, Slack, Firebase æˆ– Asana/Jira APIï¼Œå»ºç½®ä¸­ç¹¼ç«™ï¼Œæä¾›è·¨åœ˜éšŠå…±ç”¨çš„æ‰“åŒ…å·¥å…·å¹³å°"
image:
  path: /assets/4273e57e7148/1*kJhD4PCaIphZ9G1BG_dtNw.jpeg
render_with_liquid: false
---

### CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆå››ï¼‰ï¼šä½¿ç”¨ Google Apps Script Web App ä¸²æ¥ GitHub Actions å»ºç½®å…è²»æ˜“ç”¨çš„æ‰“åŒ…å·¥å…·å¹³å°

GAS Web App ä¸²æ¥ GitHub, Slack, Firebase æˆ– Asana/Jira APIï¼Œå»ºç½®ä¸­ç¹¼ç«™ï¼Œæä¾›è·¨åœ˜éšŠå…±ç”¨çš„æ‰“åŒ…å·¥å…·å¹³å°



![Photo by [Lee Campbell](https://unsplash.com/@leecampbell?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash){:target="_blank"}](/assets/4273e57e7148/1*kJhD4PCaIphZ9G1BG_dtNw.jpeg)

Photo by [Lee Campbell](https://unsplash.com/@leecampbell?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash){:target="_blank"}
### å‰è¨€

å‰ç¯‡ã€Œ [**CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å¯¦ä½œ App iOS CI èˆ‡ CD å·¥ä½œæµç¨‹**](../4b001d2e8440/) ã€æˆ‘å€‘å·²ç¶“å®Œæˆäº† App iOS å°ˆæ¡ˆçš„ CI/CD åº•å±¤åŠŸèƒ½å»ºè¨­ï¼Œç¾åœ¨å·²ç¶“å¯ä»¥ CI è‡ªå‹•æ¸¬è©¦é©—è­‰è·Ÿ CD æ‰“åŒ…éƒ¨ç½²ï¼›ç„¶è€Œåœ¨å¯¦å‹™ç”¢å“é–‹ç™¼æµç¨‹ä¸Šï¼Œ **æ‰“åŒ…éƒ¨ç½²å·¥ä½œå¤šåŠæ˜¯ç‚ºäº†å¾ŒçºŒäº¤ä»˜çµ¦å…¶ä»–è·èƒ½å¤¥ä¼´** é€² è¡Œ QA\(Quality Assurance\) åŠŸèƒ½é©—è­‰ï¼Œé€™æ™‚å€™ CD å ´æ™¯å°±ä¸åœ¨åªä¾·é™åœ¨å·¥ç¨‹ç«¯äº†ï¼Œå¯èƒ½è·¨è¶³ QAã€PMã€è¨­è¨ˆ\(Design QA\) ç”šè‡³æ˜¯è€é—†æƒ³å…ˆç©çœ‹çœ‹ã€‚

GitHub Actions `workflow_dispatch` æ‰‹å‹•è¡¨å–®è§¸ç™¼äº‹ä»¶ï¼Œé›–ç„¶èƒ½æä¾›ç°¡æ˜“çš„è¡¨å–®è®“ä½¿ç”¨è€…æ“ä½œæ‰“åŒ…ï¼Œä½†å¦‚æœæ“ä½œçš„å°è±¡æ˜¯éå·¥ç¨‹äººå“¡å°±ç›¸å°å¾ˆä¸å‹å–„ï¼Œä»–å€‘ä¸æ‡‚ï¼šä»€éº¼æ˜¯åˆ†æ”¯ï¼Ÿæ¬„ä½è¦ä¸è¦å¡«ï¼Ÿæ€éº¼çŸ¥é“æ‰“åŒ…å¥½äº†ï¼Ÿå¥½äº†æ€éº¼ä¸‹è¼‰ï¼Ÿâ€¦etc
å¦å¤–é‚„æœ‰æ¬Šé™æ§ç®¡å•é¡Œï¼Œå¦‚æœè¦è®“å…¶ä»–è·èƒ½å¤¥ä¼´ç›´æ¥ä½¿ç”¨ GitHub Actions æ‰“åŒ…ï¼Œå°±éœ€è¦æŠŠä»–çš„å¸³è™ŸåŠ åˆ° Repo ç•¶ä¸­ï¼Œ **è³‡å®‰æ§ç®¡ä¸Šå¾ˆä¸å®‰å…¨ä¹Ÿä¸åˆç†** ï¼Œåªæ˜¯è¦æ“ä½œæ‰“åŒ…è¡¨å–®å»è¦é–‹æ•´å€‹ Source Code çµ¦ä»–ã€‚


![`workflow_dispatch çš„è¡¨å–®æ¨£å¼`](/assets/4273e57e7148/1*qDD8HAAHxDxPEU3vJPEhjA.png)

`workflow_dispatch çš„è¡¨å–®æ¨£å¼`

å› æ­¤ **æˆ‘å€‘éœ€è¦ä¸€å€‹ä¸­ç¹¼ç«™æ‰“åŒ…å¹³å°ï¼Œç”¨ä¾†æœå‹™å…¶ä»–è·èƒ½ä½¿ç”¨è€…** ï¼Œæ•´åˆ Asana/Jira çš„ä»»å‹™å–®ï¼Œè®“ä½¿ç”¨çš„äººå¯ä»¥ç›´æ¥ç”¨ä»»å‹™å–®æ‰“åŒ… Appï¼Œä¸¦ä¸”ç›´æ¥åœ¨ä¸Šé¢æŸ¥çœ‹é€²åº¦ã€ä¸‹è¼‰æ‰“åŒ…çµæœã€‚


![GAS Web App ä¸­ç¹¼ç«™](/assets/4273e57e7148/1*bHYawmSnhqwB4TzIJVfGow.png)

GAS Web App ä¸­ç¹¼ç«™

[ä¸Šä¸€ç¯‡](../4b001d2e8440/) é—œæ³¨çš„æ˜¯å³é‚Šæ ¸å¿ƒ GitHub Actions CI/CD å·¥ä½œæµç¨‹é–‹ç™¼ï¼›æœ¬æ–‡é—œæ³¨çš„æ˜¯å·¦åŠéƒ¨ to End\-User æ‰“åŒ…å·¥å…·å¹³å°ã€å¢åŠ ä½¿ç”¨è€…é«”é©—çš„éƒ¨åˆ†ã€‚
#### Google Apps Script â€” Web App æ‰“åŒ…å·¥å…·å¹³å° æˆæœåœ–


![](/assets/4273e57e7148/1*yXMeaOELhqdvMCxIJ5ElBw.gif)



![](/assets/4273e57e7148/1*EM0goWpuDeHGVkZoybLm8g.png)



![](/assets/4273e57e7148/1*haoGMvAUroz7rUMDEez9gA.png)



![](/assets/4273e57e7148/1*afCwKITlerG1g6swB_2wZA.png)



![](/assets/4273e57e7148/1*mvwpHBdrC73_PjL8H32nkw.jpeg)



![](/assets/4273e57e7148/1*BbbEd_thhUOdbAQqsCt-Tw.png)



![](/assets/4273e57e7148/1*HXjfMpUPssaw3sJgH6KKJQ.png)

- **æ‰“åŒ…è¡¨å–®ï¼š** æ•´åˆå°ˆæ¡ˆç®¡ç†å·¥å…·æ’ˆå–å–®è™Ÿã€æ•´åˆ GitHub æ’ˆå–é–‹å•Ÿä¸­çš„ Pull Request
- **æŠŠåŒ…ç´€éŒ„ï¼š** é¡¯ç¤ºæ‰“åŒ…æ­·å²ç´€éŒ„ã€æ­£åœ¨æ‰“åŒ…çš„ä»»å‹™é€²åº¦ç‹€æ…‹ã€é»æ“Šå–å¾—ä¸‹è¼‰é€£çµæ’ˆå– Firebase App Distribution ä¸‹è¼‰é€£çµã€è³‡è¨Š
- **Runner ç‹€æ…‹ï¼š** é¡¯ç¤º Self\-hosted Runner ç‹€æ…‹ã€‚
- **Slack æ‰“åŒ…é€²åº¦é€šçŸ¥ã€‚**
- æ”¯æ´æ‰‹æ©Ÿç‰ˆ
- æ”¯æ´é™åˆ¶çµ„ç¹”åœ˜éšŠå…§å¸³è™Ÿä½¿ç”¨


**ä¸»è¦è·è²¬**

0 ç‹€æ…‹ã€0 è³‡æ–™åº«ï¼Œ **å–®ç´”ç‚ºä¸­ç¹¼äº¤æ›ç«™** ï¼Œæ•´åˆé¡¯ç¤ºå„å€‹ API è³‡æ–™ \(e\.g\. Asana/Jira/GitHub\)ã€è½‰ç™¼è¡¨å–®è«‹æ±‚åˆ° GitHub Actionsã€‚

**æ“ä½œè¦æ±‚ï¼š** æ”¯æ´æ‰‹æ©Ÿèˆ‡é›»è…¦ã€‚

**æ¬Šé™è¦æ±‚ï¼š** èƒ½é™åˆ¶åªæœ‰åœ˜éšŠçµ„ç¹”æˆå“¡èƒ½å­˜å–ã€‚
#### Online Demo Web App

[**Sign in**](https://script.google.com/macros/s/AKfycbxk1nYhzfBzqny34rvBlxmcWMEQbWTL5a28mBmYId0NDaCZd0S-U3ytpBoTi2wZp0d6cg/exec){:target="_blank"} 
[_Edit description_ script\.google\.com](https://script.google.com/macros/s/AKfycbxk1nYhzfBzqny34rvBlxmcWMEQbWTL5a28mBmYId0NDaCZd0S-U3ytpBoTi2wZp0d6cg/exec){:target="_blank"}
### æŠ€è¡“é¸æ“‡

[ç¬¬ä¸€ç¯‡æ–‡ç« ](../c008a9e8ceca/) æœ‰æåˆ°éï¼Œé€™é‚Šå†è©³ç´°æ•´ç†ä¸€æ¬¡ã€‚
#### æ•´åˆé€² Slack

æˆ‘å€‘å˜—è©¦éè®“ Slack æ“”ä»»æ‰“åŒ…å¹³å°ï¼Œè‡ªè¡Œé–‹ç™¼å¾Œç«¯æœå‹™ä¸¦æ¶è¨­åœ¨ GCP ä¸Šï¼Œèˆ‡ Slack APIã€Asana API é€²è¡Œä¸²æ¥æ•´åˆï¼Œå†å°‡ Slack é€ä¾†çš„è¡¨å–®è½‰æ‰‹ç™¼é€çµ¦ GitHub API è§¸ç™¼å¾ŒçºŒ GitHub Actionsï¼›é«”é©—ä¸Šéå¸¸çˆ½è€Œä¸”çµ±ä¸€åœ¨åœ˜éšŠçš„å”ä½œå·¥å…·ä¸Šï¼Œå¯ä»¥ç„¡ç—›ä½¿ç”¨ï¼› **ç¼ºé»æ˜¯é–‹ç™¼åŠå¾ŒçºŒç¶­è­·æˆæœ¬å¾ˆé«˜** ï¼Œå› ç‚ºæ˜¯è‡ªå·±ç”¨ Ktor é–‹ç™¼çš„å¾Œç«¯æœå‹™ï¼Œéœ€è¦ App å·¥ç¨‹å¸«åŒæ™‚å…¼åšå¾Œç«¯ã€è™•ç† Google æœå‹™ OAuth æ•´åˆå•é¡Œã€éƒ¨åˆ†åŠŸèƒ½å¯èƒ½åœ¨é€™åšæ‰\(ä¾‹å¦‚ï¼šé€å¯©\)â€¦åŠŸèƒ½è¤‡é›œï¼›å¦‚æœå¾Œä¾†çš„æ–°äººæ²’éŠœæ¥å¥½é€™æ•´å¡Šå¹¾ä¹æ²’è¾¦æ³•ç¶­è­·ä¸‹å»äº†ï¼Œå¦å¤–æ¯å€‹æœˆé‚„è¦èŠ± $15 USD GCP ä¼ºæœå™¨è²»ç”¨ã€‚

åˆæœŸä¹Ÿå˜—è©¦éç”¨ FaaS æœå‹™ä¸²æ¥ Slack APIï¼Œä¾‹å¦‚ Cloud Funtionsï¼Œä½†æ˜¯ Slack API è¦æ±‚ä¸²æ¥çš„æœå‹™è¦èƒ½åœ¨ 3 ç§’å…§å›æ‡‰è«‹æ±‚ï¼Œå¦å‰‡è¦–ç‚ºå¤±æ•—ï¼›FaaS æœƒæœ‰ [å†·å•Ÿå‹•å•é¡Œ](https://www.cloudflare.com/zh-tw/learning/serverless/what-is-serverless/){:target="_blank"} ï¼Œç•¶æœå‹™ä¸€æ®µæ™‚é–“æ²’å‘¼å«å°±æœƒé€²å…¥ä¼‘çœ ï¼Œå†æ¬¡å‘¼å«æ™‚æœƒéœ€è¦è¼ƒé•·æ™‚é–“æ‰èƒ½éŸ¿æ‡‰ \(â‰¥ 5ç§’\)ï¼Œæœƒé€ æˆ Slack æ‰“åŒ…è¡¨å–®å¾ˆä¸ç©©å®šï¼Œæ™‚å¸¸å‡ºç¾ Timeout Errorã€‚
#### æ•´åˆé€²å…§éƒ¨ç³»çµ±

é€™ç•¶ç„¶æ˜¯æœ€å„ªè§£ï¼Œå¦‚æœåœ˜éšŠæœ‰ Webã€å¾Œç«¯äººåŠ›ï¼Œç›´æ¥èˆ‡ç¾æœ‰ç³»çµ±æ•´åˆæ˜¯æœ€å¥½ä¹Ÿæœ€å®‰å…¨çš„ã€‚


> _æœ¬æ–‡çš„å‰ææ˜¯ï¼šæ²’æœ‰ï¼ŒApp è‡ªç«‹è‡ªå¼·ã€‚_ 




#### Google Apps Script â€” Web App

Google Apps Script æ˜¯æˆ‘å€‘çš„è€å¤¥ä¼´ï¼Œä¹‹å‰åšéå¾ˆå¤š RPA å°ˆæ¡ˆéƒ½æ˜¯ç”¨ä»–å»åšæ’ç¨‹è§¸ç™¼åŸ·è¡Œä»»å‹™ï¼Œä¾‹å¦‚ï¼šã€Œ [Crashlytics \+ Google Analytics è‡ªå‹•æŸ¥è©¢ App Crash\-Free Users Rate](../793cb8f89b72/) ã€ã€ã€Œ [ä½¿ç”¨ Google Apps Script å¯¦ç¾æ¯æ—¥æ•¸æ“šå ±è¡¨ RPA è‡ªå‹•åŒ–](../f6713ba3fee3/) ã€ï¼Œé€™æ™‚å€™æˆ‘åˆæƒ³èµ·äº†å®ƒï¼›GAS æœ‰ä¸€å€‹åŠŸèƒ½æ˜¯éƒ¨ç½²æˆ Web \(App\) ç›´æ¥ç•¶ç¶²é æœå‹™ã€‚

**Google Apps Script å„ªé»ï¼š**
- âœ… å…è²»ã€ [æ­£å¸¸ä½¿ç”¨ä¸‹å¹¾ä¹æ‘¸ä¸åˆ°ä¸Šé™](https://developers.google.com/apps-script/guides/services/quotas?hl=zh-tw){:target="_blank"}
- âœ… Functions as a Service æ–¹æ³•å³æœå‹™ï¼Œä¸éœ€è‡ªè¡Œæ¶è¨­ç¶­è­·ä¼ºæœå™¨
- âœ… æ¬Šé™æ§ç®¡åŒ Google Workspaceï¼Œå¯è¨­å®šåƒ…é™çµ„ç¹”å…§ Google å¸³è™Ÿä½¿ç”¨
- âœ… ç„¡ç—›æ•´åˆ Google ç”Ÿæ…‹ç³»ç›¸é—œæœå‹™\(e\.g\. Firebase, GAâ€¦etc\)èˆ‡è³‡æ–™ \(ä¸ç”¨è‡ªå·±åš OAuth\)
- âœ… ç¨‹å¼èªè¨€ä½¿ç”¨ JavaScript æ˜“ä¸Šæ‰‹ \(V8 Runtime æ”¯æ´ ES6\+ \)
- âœ… å¿«é€Ÿæ’°å¯«ã€å¿«é€Ÿä¸Šç·šã€å¿«é€Ÿä½¿ç”¨
- âœ… æœå‹™ç©©å®šã€é•·ä¹… \(å·²æ¨å‡ºè¶…é 16 å¹´\)
- **âœ… AI Can Help\! å¯¦æ¸¬ä½¿ç”¨ ChatGPT è¼”åŠ©é–‹ç™¼ï¼Œæº–ç¢ºç‡å¯é” 95%**


**Google Apps Script ç¼ºé»ï¼š**
- âŒ å…§å»ºçš„ç‰ˆæœ¬ç®¡æ§ä¸€è¨€é›£ç›¡
- âŒ å…§å»ºä¸æ”¯æ´æª”æ¡ˆã€è³‡æ–™å„²å­˜ã€é‡‘é‘°/æ†‘è­‰ç®¡ç†
- âŒ Web App ç„¡æ³•åšåˆ° 100% é«”é©—çš„ RWD
- âŒ å°ˆæ¡ˆåªèƒ½ç¶åœ¨å€‹äººå¸³è™Ÿè€Œä¸æ˜¯çµ„ç¹”
- âŒ é›–ç„¶ Google æœ‰æŒçºŒåœ¨é–‹ç™¼ç¶­è­·ï¼Œä½†æ•´é«”åŠŸèƒ½æ›´æ–°ç·©æ…¢
- âŒ ç¶²è·¯è«‹æ±‚ `UrlFetchApp` ä¸æ”¯æ´è¨­å®š User\-Agent
- âŒ Web App `doGet` / `doPost` ä¸æ”¯æ´å–å¾— Headers è³‡è¨Š
- âŒ FaaS [å†·å•Ÿå‹•å•é¡Œ](https://www.cloudflare.com/zh-tw/learning/serverless/what-is-serverless/){:target="_blank"} 
ä½†åœ¨ Web App å½±éŸ¿ä¸å¤§ï¼Œé ‚å¤šè¦å¤šç­‰å¹¾ç§’æ‰é€²å…¥ç¶²é ã€‚


ä»¥ä¸Šæ˜¯ GAS æœ¬èº«æœå‹™çš„å„ªç¼ºé»ï¼Œå°åšæ‰“åŒ…å·¥å…· Web å½±éŸ¿ä¸å¤§ï¼›é¸æ“‡ä½¿ç”¨æ­¤æ–¹æ¡ˆå°æ¯” Slack æ–¹æ¡ˆï¼Œæ›´å¿«é€Ÿã€è¼•é‡è·Ÿå®¹æ˜“äº¤æ¥ä¸Šæ‰‹ï¼Œ **ç¼ºé»æ˜¯åœ˜éšŠéœ€è¦å¤šçŸ¥é“é€™å€‹å·¥å…·çš„ç¶²å€åœ¨å“ªè·Ÿæ€éº¼ç”¨ã€é‚„æœ‰å›  GAS ç¨‹å¼åº«åŠŸèƒ½æœ‰é™** \(e\.g\. ç„¡å…§å»ºåŠ å¯†æ¼”ç®—æ³•åº«\) åŸºæœ¬ä¸Šåªèƒ½åšç´”ä¸­ç¹¼å¹³å°ï¼Œä¾‹å¦‚é€å¯©ï¼Œé‚£ä¹Ÿåªèƒ½è½‰ç™¼é€å¯©è«‹æ±‚è«‹ GitHub Actions åšã€‚


> **_å¦å¤–ä¹Ÿåƒ…é©ç”¨æ˜¯ Google Workspace å·¥ä½œç’°å¢ƒçš„åœ˜éšŠï¼›_** _æ¬Šè¡¡äº†è³‡æºèˆ‡éœ€æ±‚ï¼Œå› æ­¤æ¡ç”¨ Google Apps Script â€” Web App ä¾†å¯¦ç¾æ‰“åŒ…å·¥å…·å¹³å°ã€‚_ 




#### UI Framework


[![](https://getbootstrap.com/docs/5.3/assets/brand/bootstrap-social.png)](https://getbootstrap.com/){:target="_blank"}


æˆ‘å€‘ç›´æ¥ä½¿ç”¨ Bootstrap CDNï¼Œä¸ç„¶è¦è‡ªå·±å¼„ CSS æ¨£å¼å¤ªéº»ç…©äº†ï¼ŒBootstrap å• AI æ€éº¼çµ„åˆä½¿ç”¨ä¹Ÿæ›´æº–ç¢ºæ–¹ä¾¿ã€‚
### å‹•æ‰‹åš

é€™é‚Šå·²ç¶“æŠŠæ•´å€‹å¹³å°æ¶æ§‹é–‹æºäº†ï¼Œå¤§å®¶å¯ä»¥ä¾ç…§è‡ªå·±åœ˜éšŠçš„éœ€æ±‚åŸºæ–¼é€™å€‹ç‰ˆæœ¬å†å®¢è£½åŒ–å³å¯ã€‚
#### é–‹æºç¯„ä¾‹å°ˆæ¡ˆ

åœ¨ GAS ä¸Šç›´æ¥æª¢è¦–å°ˆæ¡ˆï¼š

[**Google Drive: Sign\-in**](https://script.google.com/d/1CBB39OMedqP9Ro1WSlvgDnMBin4-ksyhgly2h_KrbOuFiPHTalNgwHOp/edit?usp=sharing){:target="_blank"} 
[_Access Google Drive with a Google account \(for personal use\) or Google Workspace account \(for business use\) \._ script\.google\.com](https://script.google.com/d/1CBB39OMedqP9Ro1WSlvgDnMBin4-ksyhgly2h_KrbOuFiPHTalNgwHOp/edit?usp=sharing){:target="_blank"}


![](/assets/4273e57e7148/1*Xzh2eBpVR92uZq-8POPegw.png)


GitHub Repo å‚™ä»½ï¼š


[![](https://opengraph.githubassets.com/76b799d955054d25914a1131336c3059955c5293e739da871e7ce84349e1eb57/ZhgChgLi/google-apps-script-cd-web-app-demo)](https://github.com/ZhgChgLi/google-apps-script-cd-web-app-demo){:target="_blank"}

#### æª”æ¡ˆæ¶æ§‹


![](/assets/4273e57e7148/1*ohVakhlaflRXCI_3j2-cOA.png)



![](/assets/4273e57e7148/1*AyIEF0wqEFdMDBuRzQXDEQ.png)


å¯«äº†ä¸€å€‹å¾ˆé™½æ˜¥çš„ é¡\-MVC æ¶æ§‹ï¼Œå¦‚è¦èª¿æ•´æˆ–ä¸çŸ¥é“åŠŸèƒ½å• AI éƒ½èƒ½å¾—åˆ°æº–ç¢ºç­”æ¡ˆã€‚

**ç³»çµ±**
- appsscript\.json: GAS ç³»çµ±çš„ Metadata è¨­å®šæª”æ¡ˆ
**é‡é»æ˜¯ã€ŒoauthScopesã€è®Šæ•¸ï¼Œå®£å‘Šé€™å€‹ Script æœƒç”¨åˆ°çš„å¤–éƒ¨æ¬Šé™ã€‚**
- Entrypoint\.gs: å®šç¾© doGet\( \) é€²å…¥é»


**Controller**
- Controller\_iOS\.gs: iOS æ‰“åŒ…å·¥å…·é é¢ Controllerï¼Œè² è²¬æ’ˆæ•¸æ“šçµ¦ View é¡¯ç¤º


**View**
- View\_index\.html: æ•´å€‹æ‰“åŒ…å·¥å…·éª¨æ¶ã€é¦–é 
- View\_iOS\.html: iOS æ‰“åŒ…å·¥å…·é é¢éª¨æ¶
- View\_iOS\_Runs\.html: iOS æ‰“åŒ…å·¥å…· â€” æ‰“åŒ…ç´€éŒ„å…§å®¹é é¢
- View\_iOS\_Form\.html: iOS æ‰“åŒ…å·¥å…· â€”æ‰“åŒ…è¡¨å–®é é¢
- View\_iOS\_Runners\.html: iOS æ‰“åŒ…å·¥å…· â€” Self\-hosted Runner ç‹€æ…‹é é¢


**Model\(Lib\)**
- Credentials\.gs: å®šç¾©é‡‘é‘°å…§å®¹
\(âš ï¸ï¸ï¸è«‹æ³¨æ„ï¸ï¼ŒGAS å¦‚æœè¦èµ° GCP IAM æœƒè »è¤‡é›œçš„å› æ­¤æˆ‘å€‘ç›´æ¥å®šç¾©é‡‘é‘°åœ¨æ­¤ï¼Œ **æ‰€ä»¥é€™å€‹ GAS å°ˆæ¡ˆæœƒåŒ…å«æ©Ÿå¯†è³‡è¨Šï¼Œè«‹ä¸è¦éš¨æ„å…±äº«å°ˆæ¡ˆæª¢è¦–ç·¨è¼¯æ¬Šé™** \)
- StubData\.gs: Online Demo ç”¨çš„ Stub æ–¹æ³•ã€è³‡æ–™ã€‚
- Settings\.gs: ä¸€äº›å¸¸ç”¨è¨­å®šï¼Œè·Ÿ lib initã€‚
- GitHub\.gs: GitHub API æ“ä½œå°è£ã€‚
- Slack\.gs: Slack API æ“ä½œå°è£ã€‚
- Firebase\.gs: Firebase â€” App Distribution API æ“ä½œå°è£ã€‚

#### å»ºç«‹è‡ªå·±çš„æ‰“åŒ…å¹³å°

1\.å»ºç«‹ä¸€å€‹ [Google Apps Script å°ˆæ¡ˆ](https://script.google.com/home){:target="_blank"} ã€å‘½å


![](/assets/4273e57e7148/1*_uVqy6cDNvFSEL0feOS-pw.png)


åˆ°å°ˆæ¡ˆè¨­å®š â†’ å‹¾é¸ã€Œåœ¨ç·¨è¼¯å™¨ä¸­é¡¯ç¤ºã€Œappsscript\.jsonã€è³‡è¨Šæ¸…å–®æª”æ¡ˆã€æ‰æœƒå‡ºç¾ã€Œappsscript\.jsonã€Metadata æª”æ¡ˆã€‚


![](/assets/4273e57e7148/1*tvXsQufQs5-5UzV0bg5WLA.png)


2\.åƒè€ƒæˆ‘çš„ [é–‹æºå°ˆæ¡ˆæª”æ¡ˆ](https://script.google.com/home/projects/1CBB39OMedqP9Ro1WSlvgDnMBin4-ksyhgly2h_KrbOuFiPHTalNgwHOp/edit){:target="_blank"} ï¼ŒæŠŠæ‰€æœ‰æª”æ¡ˆæŒ‰ç…§ç¯„ä¾‹å»ºç«‹å¥½è·ŸæŠŠå…§å®¹ç„¡è…¦è¤‡è£½éä¾†


![](/assets/4273e57e7148/1*PxZvHNeW6PFaaqmZqifFfg.png)



> **_å¾ˆè ¢ï¼Œä½†æ²’è¾¦æ³•ï¼ŒGAS ä¸æ”¯æ´ Git ç‰ˆæ§ã€‚_** 
 

> _StubData\.gs å…ˆä¸€èµ·è¤‡è£½éä¾†ï¼Œç¬¬ä¸€æ¬¡éƒ¨ç½²æ¸¬è©¦å¯ä»¥ä½¿ç”¨ã€‚_ 






![](/assets/4273e57e7148/1*FLM2SGIhAI7Z7OWIJpeT9A.png)


è¤‡è£½å®Œé•·å¾—æœƒè·Ÿç¯„ä¾‹å°ˆæ¡ˆä¸€æ¨¡ä¸€æ¨£ã€‚

3\. é¦–æ¬¡éƒ¨ç½²ã€Œç¶²é æ‡‰ç”¨ç¨‹å¼ã€æŸ¥çœ‹çµæœ


![](/assets/4273e57e7148/1*KbWpaEinVZh6M8o8bCCl6A.png)



![](/assets/4273e57e7148/1*2RrwNxZVidodX6Kq037Yvw.png)



![](/assets/4273e57e7148/1*CZSIfASW4hmQeXwTS3x7Fg.png)


å°ˆæ¡ˆå³ä¸Šè§’ã€Œéƒ¨ç½²ã€ â†’ ã€Œæ–°å¢éƒ¨ç½²ä½œæ¥­ã€ â†’ é¡å‹ã€Œç¶²é æ‡‰ç”¨ç¨‹å¼ã€:

**åŸ·è¡Œèº«ä»½ï¼š**
- æˆ‘ `çµ±ä¸€éƒ½ç”¨ä½ çš„å¸³è™Ÿèº«åˆ†åŸ·è¡Œè…³æœ¬ã€‚`
- å­˜å–ç¶²é ç¨‹å¼çš„ä½¿ç”¨è€… `æœƒä»¥ç•¶å‰ç™»å…¥çš„ Google å¸³è™Ÿä½¿ç”¨è€…èº«ä»½åŸ·è¡Œè…³æœ¬ã€‚`


**èª°å¯ä»¥å­˜å–ï¼š**
- åªæœ‰æˆ‘è‡ªå·±
- **XXX åŒå€‹çµ„ç¹”ä¸­çš„æ‰€æœ‰ä½¿ç”¨è€…** `åªæœ‰åŒçµ„ç¹”ï¼‹å·²ç™»å…¥çš„ Google å¸³è™Ÿä½¿ç”¨è€…å¯ä»¥å­˜å–ã€‚`
- æ‰€æœ‰å·²ç™»å…¥ Google å¸³è™Ÿçš„ä½¿ç”¨è€… `å·²ç™»å…¥çš„ Google å¸³è™Ÿä½¿ç”¨è€…éƒ½å¯ä»¥å­˜å–ã€‚`
- æ‰€æœ‰äºº `ä¸éœ€è¦ç™»å…¥ Google å¸³è™Ÿã€æ‰€æœ‰äººéƒ½å¯ä»¥å…¬é–‹å­˜å–ã€‚`



> _å¦‚æœæ˜¯å…§éƒ¨å·¥å…·ï¼šå¯ä»¥é¸æ“‡ã€Œ **èª°å¯ä»¥å­˜å–ï¼šXXX åŒå€‹çµ„ç¹”ä¸­çš„æ‰€æœ‰ä½¿ç”¨è€…ã€\+ã€ŒåŸ·è¡Œèº«ä»½ï¼šå­˜å–ç¶²é ç¨‹å¼çš„ä½¿ç”¨è€…ã€é€²è¡Œå®‰å…¨æ§ç®¡ã€‚**_ 





å®Œæˆéƒ¨ç½²å¾Œçš„ã€Œç¶²é æ‡‰ç”¨ç¨‹å¼ã€ç¶²å€ï¼Œå°±æ˜¯ä½ çš„ Web App æ‰“åŒ…å·¥å…·ç¶²å€ï¼Œå¯ä»¥åˆ†äº«çµ¦åœ˜éšŠæˆå“¡ä½¿ç”¨ã€‚\(ç¶²å€å¾ˆé†œï¼Œå¯ä»¥è‡ªå·±ç”¨çŸ­ç¶²å€æœå‹™åŒ…è£ä¸€ä¸‹ã€ **æ›´æ–°éƒ¨ç½²å…§å®¹ä¸æœƒç•°å‹•ç¶²å€** \)
#### ä½¿ç”¨è€…é¦–æ¬¡ä½¿ç”¨éœ€è¦åŒæ„æˆæ¬Š

é¦–æ¬¡é»æ“Š Web App ç¶²å€ï¼Œéœ€è¦å…ˆåŒæ„æˆæ¬Šã€‚


![](/assets/4273e57e7148/1*lckRkGtc7EVqz9aTZaBIOw.png)



![](/assets/4273e57e7148/1*l1t290T_4xs1ly-RjjZXtg.png)



![](/assets/4273e57e7148/1*O9ItCSBNoBcuqepd-6ygCA.png)

- Review Permission â†’ é¸æ“‡è¦ä½¿ç”¨æ­¤ Web App çš„å¸³æˆ¶èº«ä»½
- æœªé©—è­‰è­¦å‘Šè¦–çª—ï¼Œé»æ“Šã€Œé€²éšã€å±•é–‹ â†’ é»æ“Š å‰å¾€ã€ŒXXXã€\(ä¸å®‰å…¨\)



![](/assets/4273e57e7148/1*cYloLsBROLbZDPIciYUm5g.png)

- é»æ“Šã€Œå…è¨±ã€



> _çˆ¾å¾Œå¦‚æœè…³æœ¬æ¬Šé™æ²’æ›´å‹•ä¸ç”¨é‡æ–°æˆæ¬Šã€‚_ 





**å®Œæˆæˆæ¬ŠåŒæ„å¾Œå°±æœƒé€²å…¥æ‰“åŒ…å·¥å…·é¦–é ï¼š**


![](/assets/4273e57e7148/1*vG5SsVFHPPDukc4ej0hqLA.png)



> Demo æ‰“åŒ…å·¥å…·éƒ¨ç½²æˆåŠŸ ğŸ‰ğŸ‰ğŸ‰ 




è¨»:ã€Œé€™å€‹æ‡‰ç”¨ç¨‹å¼æ˜¯ç”± Google Apps Script çš„ä½¿ç”¨è€…å»ºç«‹ã€é€™å€‹æç¤ºç„¡æ³•è‡ªå‹•éš±æ¬Œã€‚
#### æ›´æ–°éƒ¨ç½²


> âš ï¸æ‰€æœ‰ç¨‹å¼ç¢¼çš„è®Šå‹•éƒ½éœ€è¦æ›´æ–°éƒ¨ç½²æ‰æœƒç”Ÿæ•ˆã€‚
 

> ï¸ï¸âš ï¸æ‰€æœ‰ç¨‹å¼ç¢¼çš„è®Šå‹•éƒ½éœ€è¦æ›´æ–°éƒ¨ç½²æ‰æœƒç”Ÿæ•ˆã€‚
 

> âš ï¸æ‰€æœ‰ç¨‹å¼ç¢¼çš„è®Šå‹•éƒ½éœ€è¦æ›´æ–°éƒ¨ç½²æ‰æœƒç”Ÿæ•ˆã€‚ 




é€™é‚Šè¦æ³¨æ„ç¨‹å¼ç¢¼è®Šå‹•å„²å­˜å®Œä¸æœƒç›´æ¥è®Šå‹•åˆ° Web App ä¸Šï¼Œæ‰€ä»¥ç™¼ç¾é‡æ•´æ²’æ•ˆæœå°±æ˜¯é€™å€‹åŸå› ï¼› **éœ€è¦åˆ°ã€Œéƒ¨ç½²ã€ â†’ ã€Œç®¡ç†éƒ¨ç½²ä½œæ¥­ã€â†’ã€Œç·¨è¼¯ã€â†’ ç‰ˆæœ¬ã€Œå»ºç«‹æ–°ç‰ˆæœ¬ã€ â†’ é»æ“Šã€Œéƒ¨ç½²ã€ â†’ ã€Œå®Œæˆã€** ã€‚


![](/assets/4273e57e7148/1*VsfCEfwnPlx9RbQ8DtXpnA.png)



![](/assets/4273e57e7148/1*n62MVd6o8W3hUtQpfn9Q0w.png)



> _æ›´æ–°éƒ¨ç½²å®Œå†é‡æ•´ç¶²é å°±èƒ½çœ‹åˆ°æ”¹å‹•ç”Ÿæ•ˆã€‚_ 




#### æ–°å¢æ¸¬è©¦éƒ¨ç½²æ–¹ä¾¿é–‹ç™¼


![](/assets/4273e57e7148/1*4fLoW6jf8z1AIXvULW-AOA.png)



![](/assets/4273e57e7148/1*yvTxeaImQ4Mr7FwESsuf5A.png)


å¦‚åŒå‰è¿°ï¼Œæ‰€æœ‰æ”¹å‹•è¦ç”Ÿæ•ˆéƒ½è¦æ›´æ–°éƒ¨ç½²ï¼›é€™åœ¨é–‹ç™¼éšæ®µéå¸¸éº»ç…©ï¼Œå› æ­¤åœ¨é–‹ç™¼éšæ®µæˆ‘å€‘å¯ä»¥ç”¨ã€Œæ¸¬è©¦éƒ¨ç½²ã€ä¾†å¿«é€Ÿé©—è­‰æ”¹å‹•æ˜¯å¦æ­£ç¢ºã€‚

**åˆ°ã€Œéƒ¨ç½²ã€ â†’ ã€Œæ¸¬è©¦éƒ¨ç½²ä½œæ¥­ã€ â†’ å–å¾—æ¸¬è©¦ç”¨ã€Œç¶²é æ‡‰ç”¨ç¨‹å¼ã€ç¶²å€ã€‚**


![](/assets/4273e57e7148/1*Rt0XEw9uAev58isLEnsoPA.png)


åœ¨é–‹ç™¼éšæ®µæˆ‘å€‘ç›´æ¥ä½¿ç”¨æ­¤ç¶²å€å°±èƒ½å„²å­˜ï¼Œæª”æ¡ˆæ›´æ”¹å„²å­˜å®Œï¼Œå›åˆ°é€™å€‹é–‹ç™¼ç”¨ç¶²å€é‡æ•´ç¶²é å°±èƒ½çœ‹åˆ°æˆæœï¼


> **_éƒ½é–‹ç™¼å¥½ä¹‹å¾Œå†ç…§å‰æ–‡èªªçš„æ›´æ–°éƒ¨ç½²ï¼Œé‡‹å‡ºçµ¦ä½¿ç”¨è€…ä½¿ç”¨ã€‚_** 




### ä¿®æ”¹ Demo ç¯„ä¾‹å°ˆæ¡ˆä¸²æ¥çœŸå¯¦è³‡æ–™

å†ä¾†æ‰æ˜¯é‡é»ï¼Œä¸²æ¥çœŸå¯¦è³‡æ–™ï¼ŒGitHub Actions Workflow åƒè€ƒçš„æ˜¯ [**ä¸Šä¸€ç¯‡æ–‡ç« ä¸­å»ºç«‹å¥½çš„ CI/CD æµç¨‹**](../4b001d2e8440/) ï¼Œä½ ä¹Ÿå¯ä¾ç…§å¯¦éš›çš„ Actions Workflow èª¿æ•´åƒæ•¸ã€‚
#### GitHub ä¸²æ¥

**å¸¶å…¥ GitHub API Token:**

GitHub \-&gt; å¸³è™Ÿ \-&gt; Settings \-&gt; Developer Settings \-&gt; Fine\-grained personal access tokens or Personal access tokens \(classic\)ã€‚

å»ºè­°ä½¿ç”¨ Fine\-grained personal access tokens æ¯”è¼ƒå®‰å…¨\(ä½†æœ‰æœŸé™\)ã€‚

**Fine\-grained personal access tokens éœ€è¦çš„æ¬Šé™å¦‚ä¸‹ï¼š**


![](/assets/4273e57e7148/1*lCNQHwC4EMU4gNXYC-zs2A.png)

- Repo: è¨˜å¾—é¸è¦æ“ä½œçš„ Repo
- Permissions: `Actions (read/write)` ã€ `Administration (read only)`



> _å¦‚æœä¸æƒ³ä¾è³´åœ¨æŸäººçš„å¸³è™Ÿä¸Šå»ºè­°å»ºç«‹ä¸€æ”¯ä¹¾æ·¨çš„åœ˜éšŠ GitHub å¸³è™Ÿï¼Œä½¿ç”¨å®ƒçš„ Tokenã€‚_ 





åˆ° GAS å°ˆæ¡ˆ â†’ `Credentials.gs` â†’ å°‡ Token å¸¶å…¥åˆ° `githubToken` è®Šæ•¸ä¸­ã€‚

**æ›¿æ› GithubStub æˆ GitHub:**

åˆ° GAS å°ˆæ¡ˆ â†’ `Settings.gs` â†’ å°‡ï¼š
```javascript
const iOSGitHub = new GitHubStub(githubToken, iOSRepoPath);
```

**æ”¹æˆ**
```javascript
const iOSGitHub = new GitHub(githubToken, iOSRepoPath);
```

å„²å­˜æª”æ¡ˆã€‚

**é‡æ–°æ•´ç†æ¸¬è©¦ç”¨ã€Œç¶²é æ‡‰ç”¨ç¨‹å¼ã€ç¶²å€æŸ¥çœ‹æ”¹å‹•æ˜¯å¦æ­£ç¢º:**


![](/assets/4273e57e7148/1*30k1iDALT9WdupmuBiG2uQ.png)



> _èƒ½æ­£ç¢ºé¡¯ç¤ºè³‡æ–™ä»£è¡¨ï¼š **GitHub æ”¹ä¸²çœŸå¯¦è³‡æ–™æˆåŠŸ** ğŸ‰ğŸ‰ğŸ‰_ 





ä¹Ÿèƒ½é †æ‰‹åˆ‡åˆ°ã€ŒRunner ç‹€æ…‹ã€æŸ¥çœ‹ Self\-hosted Runner ç‹€æ…‹æ’ˆå–æ­£ä¸æ­£å¸¸ï¼š


![](/assets/4273e57e7148/1*K3yzISn5J7o1e1F5zhIQpg.png)


è¨»ï¼šæˆ‘ Runner æ²’é–‹â€¦æ‰€ä»¥æ˜¯é›¢ç·šä¸­ã€‚
#### Slack ä¸²æ¥

ç‚ºäº†ä¸²æ¥ Slack é€šçŸ¥ï¼Œæˆ‘å€‘é¦–å…ˆè¦å›åˆ° Repo â†’ GitHub Actions æ–°å¢ä¸€å€‹åŒ…è£¹æ‰“åŒ… Action Workflow çš„é€šçŸ¥å®¹å™¨ Actionã€‚

**CD\-Deploy\-Form\.yml:**
```yaml
# Workflow(Action) åç¨±
name: CD-Deploy-Form

# Actions Log çš„æ¨™é¡Œåç¨±
run-name: "[CD-Deploy-Form] ${{ github.ref }}"

# åŒå€‹ Concurrency Group å¦‚æœæœ‰æ–°çš„ Job æœƒå–æ¶ˆæ­£åœ¨è·‘çš„
# ä¾‹å¦‚ é‡è¤‡è§¸ç™¼ç›¸åŒåˆ†æ”¯çš„æ‰“åŒ…ä»»å‹™ï¼Œæœƒå–æ¶ˆå‰ä¸€å€‹ä»»å‹™
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

# è§¸ç™¼äº‹ä»¶
on:
  # æ‰‹å‹•è¡¨å–®è§¸ç™¼
  workflow_dispatch:
    # è¡¨å–® Inputs æ¬„ä½
    inputs:
      # App ç‰ˆæœ¬è™Ÿ
      VERSION_NUMBER:
        description: 'Version Number of the app (e.g., 1.0.0). Auto-detect from the Xcode project if left blank.'
        required: false
        type: string
      # App Build Number
      BUILD_NUMBER:
        description: 'Build number of the app (e.g., 1). Will use a timestamp if left blank.'
        required: false
        type: string
      # App Release Note
      RELEASE_NOTE:
        description: 'Release notes of the deployment.'
        required: false
        type: string
      # è§¸ç™¼è€…çš„ Slack User ID
      SLACK_USER_ID:
        description: 'Slack user id.'
        required: true
        type: string
      # è§¸ç™¼è€…çš„ Email
      AUTHOR:
        description: 'Trigger author email.'
        required: true
        type: string
        
# Job å·¥ä½œé …ç›®
jobs:
  # é–‹å§‹æ‰“åŒ…æ™‚å‚³é€ Slack è¨Šæ¯
  # Job ID
  start-message:
    # å°å·¥ä½œç›´æ¥ç”¨ GitHub Hosted Runner è·‘ï¼Œç”¨é‡ä¸å¤§
    runs-on: ubuntu-latest
    
    # è¨­å®šæœ€é•· Timeout æ™‚é–“ï¼Œé˜²æ­¢ç•°å¸¸æƒ…æ³ç™¼ç”Ÿæ™‚ç„¡æ­¢ç›¡çš„ç­‰å¾…
    # æ­£å¸¸æƒ…æ³ä¸å¯èƒ½è·‘è¶…é 5 åˆ†é˜
    timeout-minutes: 5

    # å·¥ä½œæ­¥é©Ÿ
    steps:
      - name: Post a Start Slack Message
        id: slack
        uses: slackapi/slack-github-action@v2.0.0
        with:
          method: chat.postMessage
          token: ${{ secrets.SLACK_BOT_TOKEN }}
          payload: |
            channel: ${{ inputs.SLACK_USER_ID }}
            text: "å·²æ”¶åˆ°æ‰“åŒ…è«‹æ±‚ã€‚\nID: <${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}|${{ github.run_id }}>\nBranch: ${{ github.ref_name }}\ncc'ed <@${{ inputs.SLACK_USER_ID }}>"
    # Job Output çµ¦å¾ŒçºŒ Job ä½¿ç”¨
    # ts = Slack è¨Šæ¯ IDï¼Œå¾ŒçºŒé€šçŸ¥æ‰å¯ä»¥ Reply åœ¨åŒå€‹ Threads
    outputs:
      ts: ${{ steps.slack.outputs.ts }}

  deploy:
    # Job é è¨­æ˜¯ä¸¦ç™¼åŸ·è¡Œï¼Œç”¨ needs é™åˆ¶éœ€ç­‰å¾… start-message å®Œæˆæ‰åŸ·è¡Œ
    # åŸ·è¡Œæ‰“åŒ…éƒ¨ç½²ä»»å‹™
    needs: start-message
    uses: ./.github/workflows/CD-Deploy.yml
    secrets: inherit
    with:
      VERSION_NUMBER: ${{ inputs.VERSION_NUMBER }}
      BUILD_NUMBER: ${{ inputs.BUILD_NUMBER }}
      RELEASE_NOTE: ${{ inputs.RELEASE_NOTE }}
      AUTHOR: ${{ inputs.AUTHOR }}

  # æ‰“åŒ…éƒ¨ç½²ä»»å‹™æˆåŠŸè¨Šæ¯
  end-message-success:
    needs: [start-message, deploy]
    if: ${{ needs.deploy.result == 'success' }}
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Post a Success Slack Message
        uses: slackapi/slack-github-action@v2.0.0
        with:
          method: chat.postMessage
          token: ${{ secrets.SLACK_BOT_TOKEN }}
          payload: |
            channel: ${{ inputs.SLACK_USER_ID }}
            thread_ts: "${{ needs.start-message.outputs.ts }}"
            text: "âœ… æ‰“åŒ…éƒ¨ç½²æˆåŠŸã€‚\n\ncc'ed <@${{ inputs.SLACK_USER_ID }}>"
  
  # æ‰“åŒ…éƒ¨ç½²ä»»å‹™å¤±æ•—è¨Šæ¯
  end-message-failure:
    needs: [deploy, start-message]
    if: ${{ needs.deploy.result == 'failure' }}
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Post a Failure Slack Message
        uses: slackapi/slack-github-action@v2.0.0
        with:
          method: chat.postMessage
          token: ${{ secrets.SLACK_BOT_TOKEN }}
          payload: |
            channel: ${{ inputs.SLACK_USER_ID }}
            thread_ts: "${{ needs.start-message.outputs.ts }}"
            text: "âŒ æ‰“åŒ…éƒ¨ç½²å¤±æ•—ï¼Œè«‹æª¢æŸ¥åŸ·è¡Œç‹€æ³çµæœæˆ–ç¨å¾Œå†è©¦ã€‚\n\ncc'ed <@${{ inputs.SLACK_USER_ID }}>"

  # æ‰“åŒ…éƒ¨ç½²ä»»å‹™å–æ¶ˆè¨Šæ¯
  end-message-cancelled:
    needs: [deploy, start-message]
    if: ${{ needs.deploy.result == 'cancelled' }}
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Post a Cancelled Slack Message
        uses: slackapi/slack-github-action@v2.0.0
        with:
          method: chat.postMessage
          token: ${{ secrets.SLACK_BOT_TOKEN }}
          payload: |
            channel: ${{ inputs.SLACK_USER_ID }}
            thread_ts: "${{ needs.start-message.outputs.ts }}"
            text: ":black_square_for_stop: æ‰“åŒ…éƒ¨ç½²å·²å–æ¶ˆã€‚\n\ncc'ed <@${{ inputs.SLACK_USER_ID }}>"
```

**å®Œæ•´ç¨‹å¼ç¢¼ï¼š** [CD\-Deploy\-Form\.yml](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/CD-Deploy-Form.yml){:target="_blank"}


![](/assets/4273e57e7148/1*NatyC_Oid4BrKYk4nehuKA.png)


é€™å€‹ Action åªæ˜¯å€‹å®¹å™¨ï¼Œä¸²æ¥ Slack é€šçŸ¥ï¼Œå¯¦éš›æ˜¯å¾©ç”¨ [ä¸Šä¸€ç¯‡æ–‡ç« ](../4b001d2e8440/) ä¸­å¯«å¥½çš„ [CD\-Deploy\.yml](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/CD-Deploy.yml){:target="_blank"} Actionã€‚
- Slack Bot App å»ºç«‹ã€ç™¼è¨Šæ¯æ¬Šé™è¨­å®šå¯åƒè€ƒæˆ‘ [ä¹‹å‰çš„æ–‡ç« ](../bd94cc88f9c9/)
- è¨˜å¾—åˆ° Repo â†’ Secrets æ–°å¢å°æ‡‰çš„ `SLACK_BOT_TOKEN` è·Ÿå¸¶å…¥ Slack Bot App Token å€¼


å›åˆ° GAS å°ˆæ¡ˆ â†’ `Credentials.gs` â†’ å°‡ Token å¸¶å…¥åˆ° `slackBotToken` è®Šæ•¸ä¸­ã€‚

å†åˆ° GAS å°ˆæ¡ˆ â†’ `Settings.gs` â†’ å°‡ï¼š
```javascript
const slack = new SlackStub(slackBotToken);
```

**æ”¹æˆ**
```javascript
const slack = new Slack(slackBotToken);
```

å„²å­˜æª”æ¡ˆã€‚


> _å¦‚æœä½ æ²’æœ‰ç¾æˆçš„ Slack Bot App å¯ç™¼é€šçŸ¥ä¹Ÿæ‡¶å¾—å»ºç«‹ï¼Œå¯ä»¥å¿½ç•¥é€™è£¡çš„æ‰€æœ‰æ­¥é©Ÿï¼Œä¸¦åˆªé™¤ GAS å°ˆæ¡ˆä¸­æœ‰é—œ slack çš„ä½¿ç”¨ã€‚_ 




#### GitHub ä¸²æ¥ â€” æ‰“åŒ…è¡¨å–®

åˆ° GAS å°ˆæ¡ˆ â†’ `Controller_iOS.gs` â†’ èª¿æ•´ `View_iOS_Form.html` å…§å®¹:
ç§»é™¤å‡ Asana Tasks ä¸²æ¥æ–¹æ³•ï¼š
```php-template
      <? tasks.forEach(function(task) { ?>
      <option value="<?=task.githubBranch?>">[<?=task.id?>] <?=task.title?></option>
      <? }) ?>
```

ä¹Ÿå¯ä»¥åœ¨é€™é‚Šè‡ªå·±èª¿æ•´é è¨­åˆ†æ”¯\(é€™é‚Šæ˜¯ `main` \)ã€‚

â€”

åˆ° GAS å°ˆæ¡ˆ â†’ `Controller_iOS.gs` â†’ èª¿æ•´ `iOSLoadForm()` å…§å®¹:
- ç§»é™¤ `template.tasks = Stubable.fetchStubAsanaTasks();` é€™è¡Œå‡ä¸²æ¥ Asana çš„æ–¹æ³•ã€‚
å¦‚æœè¦ä¸² Asana/Jira å¯ä»¥ç›´æ¥å• ChatGPT è«‹ä»–å¹«å¿™ç”¢ä¸²æ¥æ–¹æ³•ã€‚
- `template.prs = iOSGitHub.fetchOpenPRs();` æ˜¯çœŸçš„ä¸² GitHub API æ‹¿ Opened PR Listï¼Œå¯ä¾éœ€æ±‚ä¿ç•™ã€‚


**é€å‡ºå¾Œçš„è™•ç†** åœ¨ `iOSSubmitForm()` å…§å®¹:

å¯ä¾ç…§å¯¦éš› GitHub Actions Workflow æª”æ¡ˆåç¨±ã€ `workflow_dispatch` inputs æ¬„ä½åƒæ•¸é€²è¡Œèª¿æ•´ï¼š
```javascript
  iOSGitHub.dispatchWorkflow("CD-Deploy-Form.yml", branch, {
    "BUILD_NUMBER": buildNumber,
    "VERSION_NUMBER": versionNumber,
    "VERSION_NUMBER": versionNumber,
    "RELEASE_NOTE": releaseNote,
    "AUTHOR": email,
    "SLACK_USER_ID": slack.fetchUserID(email)
  });
```

ä¹Ÿå¯ä»¥åŠ å…¥è‡ªå·±çš„å¿…å¡«æ¢ä»¶é©—è­‰ï¼Œé€™é‚Šåªé©—è­‰ä¸€å®šè¦å¡«åˆ†æ”¯ï¼Œä¸ç„¶æœƒè·³éŒ¯èª¤è¨Šæ¯ã€‚

å¦‚æœèªç‚ºé€™æ¨£ä¸å¤ å®‰å…¨å¯ä»¥è‡ªå·±å†åŠ å…¥å¯†ç¢¼é©—è­‰æˆ–åªæœ‰ç‰¹æ®Šå¸³è™Ÿå¯ä»¥ä½¿ç”¨ã€‚


> _æœ€å¾Œä¸€è¡Œ **Slack é€šçŸ¥åŠŸèƒ½éœ€è¦è¨­å®šå¥½ Slack** ï¼Œå¦‚æœæ²’æœ‰ Slack Bot App æˆ–æ‡¶å¾—ä¸²æ¥ Slackï¼Œåœ¨ [Demo Actions Repo](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions){:target="_blank"} ä¸­å¯ä»¥ç›´æ¥æ”¹ç”¨ `iOSGitHub.dispatchWorkflow("CD-Deploy.yml")` ç„¶å¾Œç§»é™¤æ‰ `SLACK_USER_ID` åƒæ•¸å³å¯ã€‚_ 





**é‡æ–°æ•´ç†æ¸¬è©¦ç”¨ã€Œç¶²é æ‡‰ç”¨ç¨‹å¼ã€ç¶²å€æŸ¥çœ‹æ”¹å‹•æ˜¯å¦æ­£ç¢ºï¼š**


![](/assets/4273e57e7148/1*OkJJrssZBcJPss_cMW-Qew.png)


å¯ä»¥çœ‹åˆ°æ‰“åŒ…è¡¨å–®å°±åªå‰© Opened PR List äº†ã€‚

**å¡«å¥½è³‡æ–™æŒ‰ã€Œé€å‡ºè«‹æ±‚ã€æ¸¬è©¦çœ‹çœ‹æ‰“åŒ…è¡¨å–®ï¼š**


![](/assets/4273e57e7148/1*dl-g3j6GH0AnYL8dqvSyYA.png)


**æç¤ºé€å‡ºæˆåŠŸä»£è¡¨æ²’å•é¡Œï¼Œå›åˆ°æ‰“åŒ…ç´€éŒ„ä¹Ÿèƒ½çœ‹åˆ°ä»»å‹™é–‹å§‹åŸ·è¡Œäº† _ğŸ‰_** ï¼š


![](/assets/4273e57e7148/1*cByPF6T8WdXKionifRj1Ew.png)



> _é‡è¤‡é»æ‰“åŒ…ç´€éŒ„èƒ½æ›´æ–°é€²åº¦ã€‚_ 





**å¸¸è¦‹é€å‡ºéŒ¯èª¤ï¼š**


> `Required input â€˜SLACK_USER_IDâ€™ not provided` _: GitHub Actions é€™å€‹SLACK\_USER\_ID æ¬„ä½ç‚ºå¿…å¡«ï¼Œä½†æ²’æœ‰å¸¶ï¼Œå¯èƒ½æ˜¯ Slack è¨­å®šå¤±æ•—ã€ç•¶å‰ User Email æ‰¾ä¸åˆ°å°æ‡‰çš„ Slack UIDã€‚_ 
 

> _`Workflow does not have â€˜workflow_dispatchâ€™ trigger` ã€ `åˆ†æ”¯éèˆŠï¼Œè«‹æ›´æ–° xxx åˆ†æ”¯` : é¸æ“‡çš„åˆ†æ”¯æ‰¾ä¸åˆ°å°æ‡‰çš„ Action Workflow æª”æ¡ˆ\(iOSGitHub\.dispatchWorkflow æŒ‡å®šçš„æª”æ¡ˆ\)ã€‚_ 
 

> _`No ref found for` ã€ `æ‰¾ä¸åˆ°åˆ†æ”¯` : æ‰¾ä¸åˆ°æ­¤åˆ†æ”¯ã€‚_ 




### Firebase App Distribution â€” å–å¾—ä¸‹è¼‰é€£çµä¸²æ¥

æœ€å¾Œä¸€å€‹å°åŠŸèƒ½æ˜¯ä¸²æ¥ Firebase App Distribution ç›´æ¥å–å¾—ä¸‹è¼‰è³‡è¨Šè·Ÿé€£çµï¼Œæ–¹ä¾¿åœ¨æ‰‹æ©Ÿä¸Šé–‹å•Ÿæ‰“åŒ…å¹³å°å·¥å…·é»æ“Šç›´æ¥ä¸‹è¼‰å®‰è£ã€‚


> _ä¹‹å‰ä»‹ç´¹éã€Œ [Google Apps Script x Google APIs å¿«é€Ÿä¸²æ¥æ•´åˆæ–¹å¼](../71400d408dc8/) ã€GAS èƒ½å¿«é€Ÿç„¡ç—›æ•´åˆ Firebaseã€‚_ 




#### **ä¸²æ¥åŸç†**


> **_åœ¨ä¸²æ¥ä¹‹å‰å…ˆè¬›ä¸€ä¸‹é€™å€‹ã€ŒTrickyã€çš„ä¸²æ¥åŸç†ã€‚_** 





æˆ‘å€‘çš„æ‰“åŒ…å¹³å°æ˜¯æ²’æœ‰è³‡æ–™åº«çš„ï¼Œç´”åš API ä¸­ç¹¼ç«™ï¼›æ‰€ä»¥å¯¦éš›ä¸Šæ˜¯æˆ‘å€‘åœ¨ [**GitHub Acitons CD\-Deploy\.yml**](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions/workflows/CD-Deploy.yml){:target="_blank"} æ‰“åŒ…ä½œæ¥­æ™‚ï¼ŒæŠŠ Job Run ID å¸¶å…¥åˆ° Release Note \(ç•¶ç„¶ä¹Ÿå¯ä»¥å¸¶åˆ° Build Number\)ï¼š
```bash
ID="${{ github.run_id }}" // Job Run ID
COMMIT_SHA="${{ github.sha }}"
BRANCH_NAME="${{ github.ref_name }}"
AUTHOR="${{ env.AUTHOR }}"

# çµ„åˆ Release Note
RELEASE_NOTE="${{ env.RELEASE_NOTE }}
ID: ${ID}
Commit SHA: ${COMMIT_SHA}
Branch: ${BRANCH_NAME}
Author: ${AUTHOR}
"

# åŸ·è¡Œ Fastlane æ‰“åŒ…ï¼†éƒ¨ç½² Lane
bundle exec fastlane beta release_notes:"${RELEASE_NOTE}" version_number:"${VERSION_NUMBER}" build_number:"${BUILD_NUMBER}"
```

é€™æ¨£ Firebase App Distribution Release Notes å°±æœƒæœ‰ Job Run IDã€‚

GAS Web App æ‰“åŒ…å·¥å…·å¹³å°æœƒä¸² GitHub API å–å¾— GitHub Actions åŸ·è¡Œç´€éŒ„æˆ‘å€‘ç›´æ¥ç”¨ API çµ¦çš„ Job Run ID å¸¶åˆ° Firebase App Distribution API æŸ¥è©¢ Release Notes ä¸­æœ‰åŒ…å« `*ID: XXX*` çš„ç‰ˆæœ¬ï¼Œå°±èƒ½æ‰¾åˆ°å°æ‡‰çš„æ‰“åŒ…ç´€éŒ„äº†ã€‚

**ä¸ç”¨ä»»ä½•è³‡æ–™åº«ä¹Ÿèƒ½åšåˆ°å…©å€‹å·¥å…·å¹³å°çš„å°æ‡‰ã€‚**


![](/assets/4273e57e7148/1*AJRMWv_rqu64H0ZrY4q6QA.png)



![](/assets/4273e57e7148/1*Sdzt1MDXh7TNnMDkpc5uJg.png)

#### ä¸²æ¥å°ˆæ¡ˆè¨­å®š

åˆ° GAS â†’ å°ˆæ¡ˆè¨­å®š â†’ Google Cloud Platform \(GCP\) å°ˆæ¡ˆ â†’ è®Šæ›´å°ˆæ¡ˆï¼š


![](/assets/4273e57e7148/1*klclBbiBQXNBzbzzj1jH0Q.png)



![](/assets/4273e57e7148/1*gv8m_v5O_yyUrq8uQoverQ.png)


è¼¸å…¥æƒ³ä¸²æ¥çš„ Firebase å°ˆæ¡ˆç·¨è™Ÿã€‚


![](/assets/4273e57e7148/1*OEaxA6SZWYbiVstOK60hQg.png)



> **_åˆæ¬¡è¨­å®šå¯èƒ½æœƒè·³éŒ¯èª¤_** _ã€Œå¦‚è¦è®Šæ›´å°ˆæ¡ˆï¼Œè«‹è¨­å®š OAuth åŒæ„ç•«é¢ã€‚è¨­å®š OAuth åŒæ„ç•«é¢è©³ç´°è³‡æ–™ã€‚ã€æ²’æœ‰çš„è©±å¯è·³éä»¥ä¸‹æ­¥é©Ÿã€‚_ 





**é»æ“Šã€ŒOAuth åŒæ„ç•«é¢è©³ç´°è³‡æ–™ã€é€£çµ â†’ é»æ“Šã€Œè¨­å®šåŒæ„ç•«é¢ã€ï¼š**


![](/assets/4273e57e7148/1*oiZeO5mEqH-D3tHrJsnE1A.png)


**é»æ“Šã€Œé–‹å§‹ã€:**


![](/assets/4273e57e7148/1*NK9RG0kaXoxJB5X-B8vhww.png)


**æ‡‰ç”¨ç¨‹å¼è³‡è¨Š:**
- æ‡‰ç”¨ç¨‹å¼åç¨±: `è¼¸å…¥ä½ çš„å·¥å…·åç¨±`
- ä½¿ç”¨è€…æ”¯æ´é›»å­éƒµä»¶: `é¸æ“‡é›»å­éƒµä»¶`


**ç›®æ¨™å°è±¡:**
- å…§éƒ¨ï¼šåƒ…é™çµ„ç¹”å…§éƒ¨å¤¥ä¼´ä½¿ç”¨
- å¤–éƒ¨ï¼šæ‰€æœ‰ Google å¸³æˆ¶ä½¿ç”¨è€…éƒ½èƒ½åŒæ„æˆæ¬Šå¾Œä½¿ç”¨


**è¯çµ¡è³‡è¨Š:**
- è¼¸å…¥æ¥æ”¶é€šçŸ¥ç”¨é›»å­éƒµä»¶


**å‹¾é¸åŒæ„ã€Š [Google API æœå‹™ï¼šä½¿ç”¨è€…è³‡æ–™æ”¿ç­–](https://developers.google.com/terms/api-services-user-data-policy?hl=zh_TW){:target="_blank"} ã€‹ã€‚**

æœ€å¾Œé»æ“Šã€Œ **å»ºç«‹** ã€ã€‚

â€”

å›åˆ° GAS â†’ å°ˆæ¡ˆè¨­å®š â†’ Google Cloud Platform \(GCP\) å°ˆæ¡ˆ â†’ è®Šæ›´å°ˆæ¡ˆï¼š

å†æ¬¡è¼¸å…¥ Firebase å°ˆæ¡ˆç·¨è™Ÿé»æ“Šã€Œè®Šæ›´å°ˆæ¡ˆã€ã€‚


![](/assets/4273e57e7148/1*g-Lo04WjhaDjtXeXthNtDg.png)


**æ²’å‡ºç¾éŒ¯èª¤å°±æ˜¯å®Œæˆç¶å®šäº†ã€‚**

â€”

**å¦‚æœé¸æ“‡çš„æ˜¯ã€Œå¤–éƒ¨ã€å¯èƒ½é‚„éœ€è¦å®Œæˆä»¥ä¸‹è¨­å®šï¼š**

é»æ“Šã€Œå°ˆæ¡ˆç·¨è™Ÿã€ â†’ å±•é–‹å·¦å´æ¬„ â†’ ã€ŒAPI å’Œæœå‹™ã€â†’ ã€ŒOAuth åŒæ„ç•«é¢ã€


![](/assets/4273e57e7148/1*RJNQv8v3KZoTcVwUbsXSHQ.png)


é¸æ“‡ã€Œç›®æ¨™å°è±¡ã€ â†’ æ¸¬è©¦ é»æ“Šã€Œç™¼å¸ƒæ‡‰ç”¨ç¨‹å¼ã€â†’ å®Œæˆã€‚


![](/assets/4273e57e7148/1*8vqrxhchsILPy4eSdvXfNg.png)



> _ä½¿ç”¨è€…å°±èƒ½ç…§å‰æ–‡çš„ã€Œ **ä½¿ç”¨è€…é¦–æ¬¡ä½¿ç”¨éœ€è¦åŒæ„æˆæ¬Š** ã€æ­¥é©Ÿå®Œæˆæˆæ¬Šå°±èƒ½ä½¿ç”¨äº†ï¼_ 





**å¦‚æœä¸Šè¿°æ­¥é©Ÿæ²’è¨­å®šï¼Œä½¿ç”¨è€…æœƒé‡åˆ°ä»¥ä¸‹éŒ¯èª¤ï¼š**


![å·²å°é–å­˜å–æ¬Šã€ŒXXXã€æœªå®Œæˆ Google é©—è­‰ç¨‹åº](/assets/4273e57e7148/1*2omUPFoubsrXVLHBPFkPbg.png)

å·²å°é–å­˜å–æ¬Šã€ŒXXXã€æœªå®Œæˆ Google é©—è­‰ç¨‹åº

â€” â€” â€”
#### ä¸²æ¥å°ˆæ¡ˆ

å›åˆ°ä¸²æ¥ä¸Šï¼ŒFirebase æ˜¯ç›´æ¥ç”¨ `ScriptApp.getOAuthToken()` ä¾ç…§åŸ·è¡Œèº«ä»½å‹•æ…‹å–å¾— Token ä½¿ç”¨ï¼Œå› æ­¤ä¸éœ€è¦è¨­å®š Tokenã€‚

åªéœ€è¦åˆ° GAS å°ˆæ¡ˆ â†’ `Settings.gs` â†’ å°‡ï¼š
```javascript
const iOSFirebase = new FirebaseStub(iOSFirebaseProject);
```

**æ”¹æˆ**
```javascript
const iOSFirebase = new Firebase(iOSFirebaseProject);
```

å³å¯ã€‚

**é‡æ–°æ•´ç†æ¸¬è©¦ç”¨ã€Œç¶²é æ‡‰ç”¨ç¨‹å¼ã€ç¶²å€åˆ°æ‰“åŒ…ç´€éŒ„ â†’ æ‰¾ä¸€ç­†ç´€éŒ„é»æ“Šã€Œå–å¾—ä¸‹è¼‰é€£çµã€ï¼š**


![](/assets/4273e57e7148/1*9z-KsIAL5jyEzQvJv3YLgg.png)



![](/assets/4273e57e7148/1*q0HUYN2W3UonQLzwxZKXdQ.png)


å¦‚æœæœ‰åœ¨ Firebase App Distribution Release Notes æ‰¾åˆ°å°æ‡‰çš„ Job Run Id æ‰“åŒ…ï¼Œå°±æœƒç›´æ¥é¡¯ç¤ºä¸‹è¼‰è³‡è¨Šè·Ÿé»ä¸‹è¼‰èƒ½ç›´æ¥å°åˆ°ä¸‹è¼‰é ã€‚


> å®Œæˆï¼ğŸ‰ğŸ‰ğŸ‰ 



### æˆæœ


![](/assets/4273e57e7148/1*znvPmqsaivk3KhsE26sFwA.png)


è‡³æ­¤ä½ å·²ç¶“æŠŠç¯„ä¾‹éƒ½æ”¹æˆæ‚¨çš„å¯¦éš›å¯ç”¨çš„æ‰“åŒ…å·¥å…·ï¼Œå‰©ä¸‹çš„å®¢è£½åŒ–åŠŸèƒ½ã€æ›´å¤šç¬¬ä¸‰æ–¹ API ä¸²æ¥ã€æ›´å¤šè¡¨å–®å¯ä»¥è‡ªè¡Œå»¶ä¼¸ \(è·Ÿ ChatGPT è¨è«–\)ã€‚


> _æœ€å¾Œä¸è¦å¿˜è¨˜éƒ½é–‹ç™¼å¥½æ¸¬è©¦å®Œç•¢è¦ä¸Šç·šï¼Œéœ€è¦ç…§å‰æ–‡æ­¥é©Ÿ â€” **æ›´æ–°éƒ¨ç½²ä½œæ¥­æ‰æœƒç”Ÿæ•ˆå–”ï¼**_ 




### ä¸²æ¥å»¶ä¼¸

å»¶çºŒæˆ‘å€‘ã€Œä¸­ç¹¼ç«™ã€è§’è‰²çš„ç²¾ç¥ï¼Œé€™é‚Šæä¾›å¹¾å€‹å¿«é€Ÿä¸²æ¥çš„ CheatSheetï¼š

[**Asana API â€” å–å¾— Tasks:**](https://developers.asana.com/reference/gettasksforproject){:target="_blank"}
```javascript

function asanaAPI(endPoint, method = "GET", data = null) {
    var options = {
      "method" : method,
      "headers": {
          "Authorization":  "Bearer "+asanaToken
      },
      "payload" : data
    };

    var url = "https://app.asana.com/api/1.0"+endPoint;
    var res = UrlFetchApp.fetch(url, options);
    var data = JSON.parse(res.getContentText());
    return data;
}

asanaAPI("/projects/{project_gid}/tasks")
```

[**Jira API â€” å–å¾— Tickets \(JQL\):**](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#about){:target="_blank"}
```javascript
// jql = ç¯©é¸æ¢ä»¶
function jiraTickets(jql) {
  const url = `https://xxx.atlassian.net/rest/api/3/search`;
  const maxResults = 100;

  let allIssues = [];
  let startAt = 0;
  let total = 0;

  do {
    const queryParams = {
      jql: jql,
      startAt: startAt,
      maxResults: maxResults,
      fields: "assignee,summary,status"
    };

    const queryString = Object.keys(queryParams)
      .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(queryParams[key])}`)
      .join("&");

    const options = {
      method: "get",
      headers: {
        Authorization: "Basic " + jiraToken,
        "Content-Type": "application/json",
      },
      muteHttpExceptions: true,
    };

    const response = UrlFetchApp.fetch(`${url}?${queryString}`, options);
    const json = JSON.parse(response.getContentText());
    if (response.getResponseCode() != 200) {
      throw new Error("Failed to fetch Jira issues."); 
    }

    if (json.issues && json.issues.length > 0) {
      allIssues = allIssues.concat(json.issues);
      total = json.total;
      startAt += json.issues.length;
    } else {
      break;
    }
  } while (startAt < total);

  var groupIssues = {};
  for(var i = 0; i < allIssues.length; i++) {
    const issue = allIssues[i];
    if (groupIssues[issue.fields.status.name] == null) {
      groupIssues[issue.fields.status.name] = [];
    }
    groupIssues[issue.fields.status.name].push(issue);
  }

  return groupIssues;
}

jiraTickets(`project IN(App)`);
```

**å¦‚æœçœŸçš„éœ€è¦è³‡æ–™åº«ï¼Œå¯ä»¥ä½¿ç”¨ Google Sheet ä»£æ›¿ï¼š**
```javascript
class Saveable {
  constructor(type) {
    // https://docs.google.com/spreadsheets/d/Sheet-ID/edit
    const spreadsheet = SpreadsheetApp.openById("Sheet-ID");
    this.sheet = spreadsheet.getSheetByName("Data"); // Sheet Name
    this.type = type;
  }

  write(key, value) {
    this.sheet.appendRow([
      this.type,
      key,
      JSON.stringify(value)
    ]);
  }

  read(key) {
    const data = this.sheet.getDataRange().getValues();
    const row = data.find(r => r[0] === this.type && r[1] === key);
    if (row) {
      return JSON.parse(row[2]);
    }
    return null;
  }
}

let saveable = Saveable("user");
// Write
saveable.write("birthday_zhgchgli", "0718");
// Read
saveable.read("birthday_zhgchgli"); // -> 0718
```

[**Slack API & ç™¼é€è¨Šæ¯æ–¹æ³•ï¼š**](https://api.slack.com/methods/chat.postMessage){:target="_blank"}
```javascript
function slackSendMessage(channel, text = "", blocks = null) {
  const content = {
    channel: channel,
    unfurl_links: false,
    unfurl_media: false,
    text: text,
    blocks: blocks
  };

  try {
    const response = slackRequest("chat.postMessage", content);
    return response;
  } catch (error) {
    throw new Error(`Failed to send Slack message: ${error}`);
  }
}

function slackRequest(path, content) {
  const options = {
    method: "post",
    contentType: "application/json",
    headers: {
      Authorization: `Bearer ${slackBotToken}`,
      'X-Slack-No-Retry': 1
    },
    payload: JSON.stringify(content)
  };

  try {
    const response = UrlFetchApp.fetch("https://slack.com/api/"+path, options);
    const responseData = JSON.parse(response.getContentText());
    if (responseData.ok) {
      return responseData
    } else {
      throw new Error(`Slack: ${responseData.error}`);
    }
  } catch (error) {
    throw error;
  }
}
```
#### æ›´å¤š Google Apps Script æ¡ˆä¾‹ï¼š
- [Google Apps Script x Google APIs å¿«é€Ÿä¸²æ¥æ•´åˆæ–¹å¼](../71400d408dc8/)
- [ç°¡å–® 3 æ­¥é©Ÿ â€” æ‰“é€ å…è²» GA4 è‡ªå‹•æ•¸æ“šé€šçŸ¥æ©Ÿå™¨äºº](../1e85b8df2348/)
- [ä½¿ç”¨ Google Apps Script å¯¦ç¾æ¯æ—¥æ•¸æ“šå ±è¡¨ RPA è‡ªå‹•åŒ–](../f6713ba3fee3/)
- [Slack & ChatGPT Integration](../bd94cc88f9c9/)
- [ä½¿ç”¨ Google Apps Script ä¸‰æ­¥é©Ÿå…è²»å»ºç«‹ Github Repo Star Notifier](../382218e15697/)
- [Crashlytics \+ Google Analytics è‡ªå‹•æŸ¥è©¢ App Crash\-Free Users Rate](../793cb8f89b72/)
- [Crashlytics \+ Big Query æ‰“é€ æ›´å³æ™‚ä¾¿åˆ©çš„ Crash è¿½è¹¤å·¥å…·](../e77b80cc6f89/)

### ç¸½çµ

æ„Ÿè¬æ‚¨çš„è€å¿ƒé–±è®€èˆ‡åƒèˆ‡ï¼ŒCI/CD å¾ 0 åˆ° 1 ç³»åˆ—æ–‡ç« åˆ°æ­¤å‘Šä¸€æ®µè½ï¼›å¸Œæœ›èƒ½å¯¦éš›å¹«åŠ©åˆ°æ‚¨èˆ‡æ‚¨çš„åœ˜éšŠå»ºç½®å®Œå–„çš„ CI/CD å·¥ä½œæµç¨‹ï¼Œæå‡æ•ˆç‡èˆ‡ç”¢å“ç©©å®šæ€§ï¼›æœ‰ä»»ä½•å¯¦ä½œå•é¡Œæ­¡è¿ç•™è¨€è¨è«–ï¼Œé€™å››ç¯‡æ–‡ç« å¤§ç´„èŠ±äº† 14\+ å¤©æ’°å¯«ï¼Œ **å¦‚æœæ‚¨è¦ºå¾—ä¸éŒ¯æ­¡è¿ Follow æˆ‘çš„ Medium å’Œèˆ‡æœ‹å‹åŒäº‹åˆ†äº«** ã€‚


> è¬è¬ã€‚ 



#### ç³»åˆ—æ–‡ç« ï¼š
- [**CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šCI/CD æ˜¯ä»€éº¼ï¼Ÿå¦‚ä½•é€é CI/CD æ‰“é€ ç©©å®šé«˜æ•ˆçš„é–‹ç™¼åœ˜éšŠï¼Ÿå·¥å…·é¸æ“‡ï¼Ÿ**](../c008a9e8ceca/)
- [**CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆäºŒï¼‰ï¼šGitHub Actions èˆ‡ self\-hosted Runner ä½¿ç”¨èˆ‡å»ºç½®å¤§å…¨**](../404bd5c70040/)
- [**CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å¯¦ä½œ App å°ˆæ¡ˆçš„ CI èˆ‡ CD å·¥ä½œæµç¨‹**](../4b001d2e8440/)
- [**CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆå››ï¼‰ï¼šä½¿ç”¨ Google Apps Script Web App ä¸²æ¥ GitHub Actions å»ºç½®å…è²»æ˜“ç”¨çš„æ‰“åŒ…å·¥å…·å¹³å°**](../4273e57e7148/)



æœ‰ä»»ä½•å•é¡ŒåŠæŒ‡æ•™æ­¡è¿ [èˆ‡æˆ‘è¯çµ¡](https://www.zhgchg.li/contact){:target="_blank"} ã€‚



_[Post](https://dev.zhgchg.li/ci-cd-%E5%AF%A6%E6%88%B0%E6%8C%87%E5%8D%97-%E5%9B%9B-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E5%BB%BA%E7%BD%AE%E5%85%8D%E8%B2%BB%E6%98%93%E7%94%A8%E7%9A%84%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-4273e57e7148){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._
