---
title: App Store Connect API ç¾å·²æ”¯æ´ è®€å–å’Œç®¡ç† Customer Reviews
author: ZhgChgLi
date: 2022-07-20T14:50:44.659+0000
last_modified_at: 2022-07-21T03:08:01.065+0000
categories: ZRealm Dev.
tags: [ios-app-development,app-store-connect,api,app-review,integration]
description: App Store Connect API 2.0+ å…¨é¢æ›´æ–°ï¼Œæ”¯æ´ In-app purchasesã€Subscriptionsã€Customer Reviews ç®¡ç†
image:
  path: assets/f1365e51902c/1*hHJ66r9BgJQsGnRYqbB_8g.png
render_with_liquid: false
---

### App Store Connect API ç¾å·²æ”¯æ´ è®€å–å’Œç®¡ç† Customer Reviews

App Store Connect API 2\.0\+ å…¨é¢æ›´æ–°ï¼Œæ”¯æ´ In\-app purchasesã€Subscriptionsã€Customer Reviews ç®¡ç†
### 2022/07/19 News


![[Upcoming transition from the XML feed to the App Store Connect API](https://developer.apple.com/news/?id=yqf4kgwb){:target="_blank"}](/assets/f1365e51902c/1*hHJ66r9BgJQsGnRYqbB_8g.png)

[Upcoming transition from the XML feed to the App Store Connect API](https://developer.apple.com/news/?id=yqf4kgwb){:target="_blank"}

ä»Šæ—©æ”¶åˆ° [Apple é–‹ç™¼è€…æœ€æ–°æ¶ˆæ¯](https://developer.apple.com/news/rss/news.rss){:target="_blank"} ï¼ŒApp Store Connect API æ–°å¢æ”¯æ´ In\-app purchasesã€Subscriptionsã€Customer Reviews ç®¡ç†ä¸‰é …åŠŸèƒ½ï¼›è®“é–‹ç™¼è€…å¯ä»¥æ›´å½ˆæ€§çš„å°‡ Apple é–‹ç™¼æµç¨‹èˆ‡ CI/CD æˆ–æ˜¯å•†æ¥­å¾Œå°åšæ›´å¯†åˆ‡ã€æœ‰æ•ˆç‡çš„æ•´åˆï¼

In\-app purchasesã€Subscriptions æˆ‘æ²’ç¢°ï¼ŒCustomer Reviews è®“æˆ‘èˆˆå¥®ä¸å·²ï¼Œä¹‹å‰ç™¼è¡¨éä¸€ç¯‡ã€Œ [**AppStore APPâ€™s Reviews Slack Bot é‚£äº›äº‹**](../cb0c68c33994/) ã€æ¢è¨ App è©•åƒ¹èˆ‡å·¥ä½œæµç¨‹æ•´åˆçš„æ–¹å¼ã€‚


![Slack è©•åƒ¹æ©Ÿå™¨äºº â€” [ZReviewsBot](https://github.com/ZhgChgLi/ZReviewsBot){:target="_blank"}](/assets/f1365e51902c/1*igukM7FTLxaX2hpVtFPMjQ.png)

Slack è©•åƒ¹æ©Ÿå™¨äºº â€” [ZReviewsBot](https://github.com/ZhgChgLi/ZReviewsBot){:target="_blank"}

åœ¨ App Store Connect API é‚„æ²’æ”¯æ´ä¹‹å‰ï¼Œåªæœ‰å…©ç¨®æ–¹æ³•èƒ½ç²å– iOS App è©•åƒ¹ï¼š

**ä¸€ æ˜¯** é€éè¨‚é–± [Public RSS](https://rss.itunes.apple.com/zh-tw){:target="_blank"} å–å¾—ï¼Œä½†æ˜¯æ­¤ RSS ç„¡æ³•è®“äººå½ˆæ€§ç¯©é¸ã€çµ¦çš„è³‡è¨Šä¹Ÿå°‘ã€æœ‰æ•¸é‡ä¸Šé™ã€é‚„æœ‰æˆ‘å€‘å¶çˆ¾æœƒé‡åˆ°è³‡æ–™éŒ¯äº‚å•é¡Œï¼Œå¾ˆä¸ç©©å®š

**äºŒ æ˜¯** é€é [**Fastlane**](https://fastlane.tools/){:target="_blank"} **â€” [SpaceShip](https://github.com/fastlane/fastlane/tree/master/spaceship){:target="_blank"}** å¹«æˆ‘å€‘å°è£è¤‡é›œçš„ç¶²é æ“ä½œã€Session ç®¡ç†ï¼Œå» App Store Connection ç¶²ç«™å¾Œå°æ’ˆå–è©•åƒ¹è³‡æ–™ \(ç­‰æ–¼æ˜¯èµ·ä¸€å€‹ç¶²é æ¨¡æ“¬å™¨çˆ¬èŸ²å»å¾Œå°çˆ¬è³‡æ–™\)ã€‚
- å¥½è™•æ˜¯è³‡æ–™é½Šå…¨ã€ç©©å®šï¼Œæˆ‘å€‘ä¸²æ¥äº†ä¸€å¹´æ²’æœ‰é‡åˆ°ä»»ä½•è³‡æ–™å•é¡Œã€‚
- å£è™•æ˜¯ Session æ¯å€‹æœˆéƒ½æœƒéæœŸï¼Œè¦æ‰‹å‹•é‡æ–°ç™»å…¥ï¼Œè€Œä¸” Apple ID ç›®å‰å…¨é¢éƒ½è¦ç¶å®š 2FA é©—è­‰ï¼Œæ‰€ä»¥é€™æ®µä¹Ÿè¦æ‰‹å‹•å®Œæˆï¼Œé€™æ¨£æ‰èƒ½ç”¢å‡ºæœ‰æ•ˆçš„ Sessionï¼›å¦å¤– Session å¦‚æœç”¢çš„è·Ÿç”¨çš„ IP ä¸ä¸€æ¨£æœƒé¦¬ä¸ŠéæœŸ \(å› æ­¤å¾ˆé›£å°‡æ©Ÿå™¨äººæ”¾ä¸Šä¸å›ºå®š IP çš„ç¶²è·¯æœå‹™\)ã€‚



![[important\-note\-about\-session\-duration](https://docs.fastlane.tools/best-practices/continuous-integration/#important-note-about-session-duration){:target="_blank"} by Fastlane](/assets/f1365e51902c/0*iMQRza9LN3ljy2k1.png)

[important\-note\-about\-session\-duration](https://docs.fastlane.tools/best-practices/continuous-integration/#important-note-about-session-duration){:target="_blank"} by Fastlane
- æ¯å€‹æœˆä¸å®šæ™‚éæœŸï¼Œè¦ä¸å®šæ™‚å»æ›´æ–°ï¼Œæ™‚é–“ä¹…äº†çœŸçš„å¾ˆç…©ï¼›è€Œä¸”é€™å€‹ ã€Œ **Know How** ã€å…¶å¯¦ä¸å¥½äº¤æ¥çµ¦å…¶ä»–åŒäº‹ã€‚

> ä½†å› ç‚ºæ²’æœ‰å…¶ä»–æ–¹æ³•ï¼Œæ‰€ä»¥ä¹Ÿåªèƒ½é€™æ¨£ï¼Œç›´åˆ°ä»Šå¤©æ—©ä¸Šæ”¶åˆ°æ¶ˆæ¯â€¦\. 

> **âš ï¸ æ³¨æ„ï¼šå®˜æ–¹é è¨ˆåœ¨ 2022/11 å–æ¶ˆåŸæœ¬çš„ XML \(RSS\) å­˜å–æ–¹å¼ã€‚** 


### App Store Connect API 2\.0\+ Customer Reviews è©¦ç©
#### å»ºç«‹ App Store Connect API Key

é¦–å…ˆæˆ‘å€‘è¦ç™»å…¥ App Store Connect å¾Œå°ï¼Œå‰å¾€ã€ŒUsers and Accessã€\->ã€ŒKeysã€\->ã€Œ [**App Store Connect API**](https://appstoreconnect.apple.com/access/api){:target="_blank"} ã€ï¼š


![](/assets/f1365e51902c/1*0NimMOcIqQ95nzjBBKYe8A.png)


é»æ“Šã€Œ\+ã€ï¼Œè¼¸å…¥åç¨±å’Œæ¬Šé™ï¼›æ¬Šé™ç´°å‰‡å¯åƒè€ƒå®˜ç¶²èªªæ˜ï¼Œç‚ºäº†æ¸›å°‘æ¸¬è©¦å•é¡Œï¼Œé€™é‚Šå…ˆé¸æ“‡ã€ŒApp Managerã€æŠŠæ¬Šé™é–‹åˆ°æœ€å¤§ã€‚


![](/assets/f1365e51902c/1*Bt8ddt7GrZs1ERaFamftVw.png)


é»æ“Šå³æ–¹ã€ŒDownload API Keyã€ä¸‹è¼‰ä¿å­˜ä½ çš„ã€ŒAuthKey\_XXX\.p8ã€Keyã€‚
> âš ï¸ æ³¨æ„ï¼šé€™å€‹ Key åªèƒ½ä¸‹è¼‰ä¸€æ¬¡è«‹ **å¦¥å–„ä¿å­˜** ï¼Œè‹¥éºå¤±åªèƒ½ Revoke ç¾æœ‰çš„ & é‡æ–°å»ºç«‹ã€‚âš ï¸ 

> **âš ï¸ åˆ‡å‹¿å¤–æ´© \.p8 Key Fileâš ï¸** 


#### App Store Connect API å­˜å–æ–¹å¼
```
curl -v -H 'Authorization: Bearer [signed token]' "https://api.appstoreconnect.apple.com/v1/apps"
```
#### Signed Token \(JWT, JSON Web Token\) ç”¢ç”Ÿæ–¹å¼

åƒè€ƒ [å®˜æ–¹æ–‡ä»¶](https://developer.apple.com/documentation/appstoreconnectapi/generating_tokens_for_api_requests){:target="_blank"} ã€‚


![](/assets/f1365e51902c/1*KDv2ra17oSp5UXKy-VZA1g.png)

- JWT Headerï¼š

```
{kid:"YOUR_KEY_ID", typ:"JWT", alg:"ES256"}
```

`YOUR_KEY_ID` ï¼šåƒè€ƒä¸Šåœ–ã€‚
- JWT Payloadï¼š

```
{
  iss: 'YOUR_ISSUE_ID',
  iat: TOKEN å»ºç«‹æ™‚é–“ (UNIX TIMESTAMP e.g 1658326020),
  exp: TOKEN å¤±æ•ˆæ™‚é–“ (UNIX TIMESTAMP e.g 1658327220),
  aud: 'appstoreconnect-v1'
}
```

`YOUR_ISSUE_ID` ï¼šåƒè€ƒä¸Šåœ–ã€‚

`exp TOKEN å¤±æ•ˆæ™‚é–“` ï¼šæœƒå› ç‚ºä¸åŒå­˜å–åŠŸèƒ½æˆ–è¨­å®šæœ‰ä¸åŒçš„æ™‚é–“é™åˆ¶ï¼Œæœ‰çš„å¯ä»¥æ°¸ä¹…ã€æœ‰çš„è¶…é 20 åˆ†é˜å³å¤±æ•ˆï¼Œéœ€è¦é‡æ–°ç”¢ç”Ÿï¼Œè©³ç´°å¯åƒè€ƒ [å®˜æ–¹èªªæ˜](https://developer.apple.com/documentation/appstoreconnectapi/generating_tokens_for_api_requests#3878467){:target="_blank"} ã€‚
#### ä½¿ç”¨ [JWT\.IO](https://jwt.io/){:target="_blank"} æˆ–æ˜¯ä»¥ä¸‹é™„çš„ Ruby ç¯„ä¾‹ç”¢ç”Ÿ JWT
```ruby
require 'jwt'
require 'time'

keyFile = File.read('./AuthKey_XXXX.p8') # YOUR .p8 private key file path
privateKey = OpenSSL::PKey::EC.new(keyFile)

payload = {
            iss: 'YOUR_ISSUE_ID',
            iat: Time.now.to_i,
            exp: Time.now.to_i + 60*20,
            aud: 'appstoreconnect-v1'
          }

token = JWT.encode payload, privateKey, 'ES256', header_fields={kid:"YOUR_KEY_ID", typ:"JWT"}
puts token


decoded_token = JWT.decode token, privateKey, true, { algorithm: 'ES256' }
puts decoded_token
```
- Ruyb JWT å·¥å…·åœ¨æ­¤ï¼š [https://github\.com/jwt/ruby\-jwt](https://github.com/jwt/ruby-jwt){:target="_blank"}


**æœ€çµ‚æœƒå¾—åˆ°é¡ä¼¼ä»¥ä¸‹çš„ JWT çµæœï¼š**
```
4oxjoi8j69rHQ58KqPtrFABBWHX2QH7iGFyjkc5q6AJZrKA3AcZcCFoFMTMHpM.pojTEWQufMTvfZUW1nKz66p3emsy2v5QseJX5UJmfRjpxfjgELUGJraEVtX7tVg6aicmJT96q0snP034MhfgoZAB46MGdtC6kv2Vj6VeL2geuXG87Ys6ADijhT7mfHUcbmLPJPNZNuMttcc.fuFAJZNijRHnCA2BRqq7RZEJBB7TLsm1n4WM1cW0yo67KZp-Bnwx9y45cmH82QPAgKcG-y1UhRUrxybi5b9iNN
```
#### æ‰“çœ‹çœ‹ï¼Ÿ

æœ‰äº† Token æˆ‘å€‘å°±èƒ½ä¾†æ‰“çœ‹çœ‹ App Store Connect APIï¼
```
curl -H 'Authorization: Bearer JWT' "https://api.appstoreconnect.apple.com/v1/apps/APPID/customerReviews"
```
- `APPID` å¯å¾ App Store Connect å¾Œå°å–å¾—ï¼š



![](/assets/f1365e51902c/1*yU4J85S6Q_e8c9NPYE8bNw.png)


æˆ–æ˜¯ App å•†åŸé é¢ï¼š
- [https://apps\.apple\.com/tw/app/pinkoi/id557252416](https://apps.apple.com/tw/app/pinkoi/id557252416){:target="_blank"}
- APPID = `557252416`



![](/assets/f1365e51902c/1*wWIpy8Y5G2F0A2FvQzp0hQ.png)

- æˆåŠŸï¼ğŸš€ æˆ‘å€‘ç¾åœ¨å¯ä»¥ä½¿ç”¨é€™å€‹æ–¹å¼æ’ˆå– App è©•åƒ¹ï¼Œè³‡æ–™å®Œæ•´ä¸”å¯ä»¥å®Œå…¨äº¤çµ¦æ©Ÿå™¨åŸ·è¡Œï¼Œä¸éœ€äººå·¥ä¾‹è¡Œç¶­è­· \(JWT é›–æœƒéæœŸï¼Œä½†æ˜¯ Private Key ä¸æœƒï¼Œæˆ‘å€‘æ¯æ¬¡è«‹æ±‚éƒ½å¯è—‰ç”± Private Key ç°½åç”¢ç”Ÿ JWT å»å­˜å–å³å¯\)ã€‚
- å…¶ä»–ç¯©é¸åƒæ•¸ã€æ“ä½œæ–¹æ³•è«‹åƒè€ƒ [å®˜æ–¹æ–‡ä»¶](https://developer.apple.com/documentation/appstoreconnectapi/list_all_customer_reviews_for_an_app){:target="_blank"} ã€‚

> **âš ï¸ æ‚¨åªèƒ½å­˜å–æ‚¨æœ‰æ¬Šé™çš„ App è©•åƒ¹è³‡æ–™âš ï¸** 


#### å®Œæ•´ Ruby æ¸¬è©¦å°ˆæ¡ˆ

ç”¨ä¸€å€‹ Ruby æª”æ¡ˆåšäº†ä»¥ä¸Šæµç¨‹ï¼Œå¯ç›´æ¥ Clone ä¸‹ä¾†å¡«å…¥è³‡æ–™å³å¯æ¸¬è©¦ä½¿ç”¨ã€‚


[![](https://opengraph.githubassets.com/ff5aa554e60d7d99d7b0fbf640d44fd5cc513b70aca96519e91262b3bf152b38/zhgchgli0718/appstoreconnectapitester)](https://github.com/zhgchgli0718/appstoreconnectapitester){:target="_blank"}


**é¦–æ¬¡æ‰“é–‹ï¼š**
```
bundle install
```

**é–‹å§‹ä½¿ç”¨ï¼š**
```
bundle exec ruby jwt.rb
```
### Next

åŒç†æˆ‘å€‘å¯ä»¥é€é API å»å­˜å–ç®¡ç† \( [API Overview](https://developer.apple.com/app-store-connect/api/){:target="_blank"} \)ï¼š
- **\[New\]** [Customer reviews](https://developer.apple.com/documentation/appstoreconnectapi/app_store/customer_reviews){:target="_blank"}
- **\[New\]** [Subscriptions](https://developer.apple.com/app-store/subscriptions/){:target="_blank"}
- **\[New\]** [In\-App Purchases](https://developer.apple.com/in-app-purchase/){:target="_blank"}
- **\[New\]** [Xcode Cloud Workflows And Builds](https://developer.apple.com/documentation/appstoreconnectapi/xcode_cloud_workflows_and_builds){:target="_blank"}
- **\[Updated\]** [Improving your Appâ€™s Performance](https://developer.apple.com/documentation/metrickit/improving_your_app_s_performance){:target="_blank"}
- [TestFlight](https://developer.apple.com/testflight/){:target="_blank"}
- [Users And Roles](https://developer.apple.com/support/roles/){:target="_blank"}
- [App Clips](https://developer.apple.com/app-clips/){:target="_blank"}
- [App Management](https://help.apple.com/app-store-connect/#/dev2cd126805){:target="_blank"}
- [App Metadata](https://developer.apple.com/app-store/product-page/){:target="_blank"}
- [Pricing And Availability](https://help.apple.com/app-store-connect/#/dev9fc06e23d){:target="_blank"}
- [Provisioning](https://help.apple.com/developer-account/){:target="_blank"}
- [Sales and Trends](https://help.apple.com/app-store-connect/#/dev061699fdb){:target="_blank"}

#### ZReviewsBot â€” Slack App Review é€šçŸ¥æ©Ÿå™¨äºº

é è¨ˆæŠŠæˆ‘é–‹ç™¼çš„ [ZhgChgLi](https://github.com/ZhgChgLi){:target="_blank"} / [ZReviewsBot](https://github.com/ZhgChgLi/ZReviewsBot){:target="_blank"} è©•åƒ¹æ©Ÿå™¨äººå…¨é¢æ”¹æˆæ–°çš„ API å­˜å–æ–¹å¼ï¼Œè§£æ”¾è¢« Web Session éæœŸæ”¯é…çš„ææ‡¼ï¼


[![Like Z Realm's work](https://button.like.co/images/og/likebutton.png "Like Z Realm's work")](https://button.like.co/zhgchgli){:target="_blank"}


æœ‰ä»»ä½•å•é¡ŒåŠæŒ‡æ•™æ­¡è¿ [èˆ‡æˆ‘è¯çµ¡](https://www.zhgchg.li/contact){:target="_blank"} ã€‚



_Converted [Medium Post](https://medium.com/zrealm-ios-dev/app-store-connect-api-%E7%8F%BE%E5%B7%B2%E6%94%AF%E6%8F%B4-%E8%AE%80%E5%8F%96%E5%92%8C%E7%AE%A1%E7%90%86-customer-reviews-f1365e51902c){:target="_blank"} by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._
