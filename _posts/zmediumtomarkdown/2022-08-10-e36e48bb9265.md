---
title: ZReviewTenderâ€Šâ€”â€Šå…è²»é–‹æºçš„ App Reviews ç›£æ§æ©Ÿå™¨äºº
author: ZhgChgLi
date: 2022-08-10T11:56:05.731+0000
last_modified_at: 2022-08-20T09:08:22.220+0000
categories: ZRealm Dev.
tags: [ios-app-development,app-store,google-play,app-review,automation]
description: å¯¦æ™‚ç›£æ¸¬ App çš„æœ€æ–°è©•åƒ¹å…§å®¹ä¸¦å³æ™‚çµ¦äºˆåé¥‹ï¼Œæå‡å”ä½œæ•ˆç‡åŠæ¶ˆè²»è€…æ»¿æ„åº¦
image:
  path: assets/e36e48bb9265/1*DjHhZ7Yq-rE3LkFDiYW9lg.jpeg
render_with_liquid: false
---

### ZReviewTender â€” å…è²»é–‹æºçš„ App Reviews ç›£æ§æ©Ÿå™¨äºº

å¯¦æ™‚ç›£æ¸¬ App çš„æœ€æ–°è©•åƒ¹å…§å®¹ä¸¦å³æ™‚çµ¦äºˆåé¥‹ï¼Œæå‡å”ä½œæ•ˆç‡åŠæ¶ˆè²»è€…æ»¿æ„åº¦


![[ZhgChgLi](https://github.com/ZhgChgLi){:target="_blank"} / [ZReviewTender](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}](/assets/e36e48bb9265/1*DjHhZ7Yq-rE3LkFDiYW9lg.jpeg)

[ZhgChgLi](https://github.com/ZhgChgLi){:target="_blank"} / [ZReviewTender](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}
#### [ZhgChgLi](https://github.com/ZhgChgLi){:target="_blank"} / [ZReviewTender](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}


![App Reviews to Slack Channel](/assets/e36e48bb9265/1*wlGNbHopjPwFsP8j9LpKcw.jpeg)

App Reviews to Slack Channel

[**ZReviewTender**](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"} **â€”** ç‚ºæ‚¨è‡ªå‹•ç›£æ§ App Store iOS/macOS App èˆ‡ Google Play Android App çš„ä½¿ç”¨è€…æœ€æ–°è©•åƒ¹è¨Šæ¯ï¼Œä¸¦æä¾›æŒçºŒæ•´åˆå·¥å…·ï¼Œä¸²æ¥é€²åœ˜éšŠå·¥ä½œæµç¨‹ï¼Œæå‡å”ä½œæ•ˆç‡åŠæ¶ˆè²»è€…æ»¿æ„åº¦ã€‚


[![](https://repository-images.githubusercontent.com/516425682/1cc1a829-d87d-4d4a-925b-60471b912b23)](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}

### ç‰¹è‰²åŠŸèƒ½
- å–å¾— App Store iOS/macOS App èˆ‡ Google Play Android App è©•åƒ¹åˆ—è¡¨ä¸¦ç¯©é¸å‡ºå°šæœªçˆ¬å–éçš„æœ€æ–°è©•åƒ¹å…§å®¹
- \[é è¨­åŠŸèƒ½\] è½‰ç™¼çˆ¬å–åˆ°çš„æœ€æ–°è©•åƒ¹åˆ° Slackï¼Œé»æ“Šè¨Šæ¯ Timestamp é€£çµèƒ½å¿«é€Ÿé€²å…¥å¾Œå°å›è¦†è©•åƒ¹
- \[é è¨­åŠŸèƒ½\] æ”¯æ´ä½¿ç”¨ Google Translate API è‡ªå‹•ç¿»è­¯éæŒ‡å®šèªç³»ã€åœ°å€çš„è©•åƒ¹å…§å®¹æˆæ‚¨çš„èªè¨€
- \[é è¨­åŠŸèƒ½\] æ”¯æ´è‡ªå‹•è¨˜éŒ„è©•åƒ¹åˆ° Google Sheet
- æ”¯æ´å½ˆæ€§æ“´å……ï¼Œé™¤åŒ…å«çš„é è¨­åŠŸèƒ½å¤–æ‚¨ä»å¯ä¾ç…§åœ˜éšŠå·¥ä½œæµç¨‹ï¼Œè‡ªè¡Œé–‹ç™¼æ‰€éœ€åŠŸèƒ½ä¸¦æ•´åˆé€²å·¥å…·ä¸­ 
e\.g\. è½‰ç™¼è©•åƒ¹åˆ° Discord, Line, Telegramâ€¦
- ä½¿ç”¨æ™‚é–“æˆ³ç´€éŒ„çˆ¬å–ä½ç½®ï¼Œé˜²æ­¢é‡è¤‡çˆ¬å–è©•åƒ¹
- æ”¯æ´éæ¿¾åŠŸèƒ½ï¼Œå¯æŒ‡å®šåªçˆ¬å– å¤šå°‘è©•åˆ†ã€è©•åƒ¹å…§å®¹åŒ…å«ä»€éº¼é—œéµå­—ã€ä»€éº¼åœ°å€/èªç³» çš„è©•åƒ¹
- Apple åŸºæ–¼ [**å…¨æ–°çš„ App Store Connect API**](https://developer.apple.com/documentation/appstoreconnectapi/list_all_customer_reviews_for_an_app){:target="_blank"} ï¼Œæä¾›ç©©å®šå¯é çš„ App Store App è©•åƒ¹è³‡æ–™ä¾†æºï¼Œä¸å†åƒ [ä»¥å¾€ä½¿ç”¨ XML è³‡æ–™ä¸å¯é  or Fastlane Spaceship Session æœƒéæœŸéœ€å®šæ™‚äººå·¥ç¶­è­·](../f1365e51902c/)
- Android åŒæ¨£ä½¿ç”¨å®˜æ–¹ AndroidpublisherV3 API æ’ˆå–è©•åƒ¹è³‡æ–™
- æ”¯æ´ä½¿ç”¨ Github Repo w/ Github Action éƒ¨ç½²ï¼Œè®“æ‚¨å…è²»å¿«é€Ÿçš„å»ºç«‹ ZReviewTender App Reviews æ©Ÿå™¨äºº
- 100% Ruby @ [RubyGem](https://rubygems.org/gems/ZReviewTender){:target="_blank"}

#### èˆ‡é¡ä¼¼æœå‹™æ¯”è¼ƒ


![](/assets/e36e48bb9265/1*zarnSqZqa9Kgnq8T8JQL9Q.png)

#### App Reviews å·¥ä½œæµç¨‹æ•´åˆç¯„ä¾‹ \(in Pinkoi\)

**å•é¡Œï¼š**


![](/assets/e36e48bb9265/1*ZULed1sGV4YzAAezw_fCaQ.png)


å•†åŸçš„è©•åƒ¹å°ç”¢å“å¾ˆé‡è¦ä½†ä»–å»æ˜¯ä¸€å€‹éå¸¸äººå·¥è·Ÿé‡è¤‡è½‰ä»‹æºé€šçš„äº‹ã€‚

å› ç‚ºè¦æ™‚ä¸æ™‚äººå·¥ä¸Šå»çœ‹ä¸€ä¸‹æ–°è©•åƒ¹ï¼Œå¦‚éæœ‰å®¢æœå•é¡Œå†å°‡å•é¡Œè½‰ç™¼çµ¦å®¢æœå”åŠ©è™•ç†ï¼Œå¾ˆé‡è¤‡ã€äººå·¥ã€‚


![](/assets/e36e48bb9265/1*Ptph8qaLqoTaNw9Fp7VTqw.png)


é€é ZReviewTender è©•åƒ¹æ©Ÿå™¨äººï¼Œå°‡è©•åƒ¹è‡ªå‹•è½‰ç™¼åˆ° Slack Channelï¼Œå¤§å®¶èƒ½å¿«é€Ÿæ”¶åˆ°æœ€æ–°è©•åƒ¹è³‡è¨Šï¼Œä¸¦å³æ™‚è¿½è¹¤ã€è¨è«–ï¼›ä¹Ÿèƒ½è®“æ•´å€‹åœ˜éšŠäº†è§£ç›®å‰ä½¿ç”¨è€…å°ç”¢å“çš„è©•åƒ¹ã€å»ºè­°ã€‚

æ›´å¤šè³‡è¨Šå¯åƒè€ƒï¼š [2021 Pinkoi Tech Career Talk â€” é«˜æ•ˆç‡å·¥ç¨‹åœ˜éšŠå¤§è§£å¯†](../11f6c8568154/) ã€‚
### éƒ¨ç½² â€” åªä½¿ç”¨é è¨­åŠŸèƒ½

å¦‚æœæ‚¨åªéœ€è¦ ZReviewTender è‡ªå¸¶çš„é è¨­åŠŸèƒ½ \(to Slack/Google Translate/Filter\) å‰‡å¯ä½¿ç”¨ä»¥ä¸‹å¿«é€Ÿéƒ¨ç½²æ–¹å¼ã€‚

ZReviewTender å·²æ‰“åŒ…ç™¼ä½ˆåˆ° [RubyGems](https://rubygems.org/gems/ZReviewTender){:target="_blank"} ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿæ–¹ä¾¿çš„ä½¿ç”¨ RubyGems å®‰è£ä½¿ç”¨ ZReviewTenderã€‚
#### \[æ¨è–¦\] ç›´æ¥ä½¿ç”¨ Github Repo Template éƒ¨ç½²
- ç„¡éœ€ä»»ä½•ä¸»æ©Ÿç©ºé–“ âœ…
- ç„¡éœ€ä»»ä½•ç’°å¢ƒè¦æ±‚ âœ…
- ç„¡éœ€äº†è§£å·¥ç¨‹åŸç† âœ…
- å®Œæˆ Config æª”æ¡ˆé…ç½®å³å®Œæˆéƒ¨ç½² âœ…
- 8 å€‹æ­¥é©Ÿå³å¯å®Œæˆéƒ¨ç½² âœ…
- å®Œå…¨å…è²» âœ…
Github Action æä¾›æ¯å€‹å¸³è™Ÿ 2,000\+åˆ†é˜/æœˆ åŸ·è¡Œç”¨é‡ï¼ŒåŸ·è¡Œä¸€æ¬¡ ZReviewTender è©•åƒ¹æ’ˆå–ç´„åªéœ€è¦ 15~30 ç§’ã€‚
é è¨­æ¯ 6 å°æ™‚åŸ·è¡Œä¸€æ¬¡ï¼Œä¸€å¤©åŸ·è¡Œ 4 æ¬¡ï¼Œ **ä¸€å€‹æœˆç´„åªæ¶ˆè€— 60 åˆ†é˜é¡åº¦** ã€‚
Github Private Repo å…è²»ç„¡é™åˆ¶å»ºç«‹ã€‚


1\.å‰å¾€ ZReviewTender Template Repo: [**ZReviewTender\-deploy\-with\-github\-action**](https://github.com/ZhgChgLi/ZReviewTender-deploy-with-github-action){:target="_blank"}


![](/assets/e36e48bb9265/1*1pn3bxyBO0FoY4oIRvKCNg.png)


é»æ“Šå³ä¸Šæ–¹ã€ŒUse this templateã€æŒ‰éˆ•ã€‚

2\. å»ºç«‹ Repo


![](/assets/e36e48bb9265/1*YCBJJlSN4ZYjKMz7WBVIAQ.png)

- Repository name: è¼¸å…¥ä½ æƒ³è¦çš„ Repo å°ˆæ¡ˆåç¨±
- Access: **Private**



> âš ï¸âš ï¸ è«‹å‹™å¿…å»ºç«‹ **Private Repo** âš ï¸âš ï¸
 

> **å› ç‚ºä½ å°‡ä¸Šå‚³è¨­å®šåŠç§å¯†é‡‘é‘°åˆ°å°ˆæ¡ˆä¸­** 





æœ€å¾Œé»æ“Šä¸‹æ–¹ã€ŒCreate repository from templateã€æŒ‰éˆ•ã€‚

3\. ç¢ºèªä½ å»ºç«‹çš„ Repo æ˜¯ Private Repo


![](/assets/e36e48bb9265/1*1ZHF9CIOMV8S12Xw2P4B8g.png)


ç¢ºèªå³ä¸Šæ–¹ Repo åç¨±æœ‰å‡ºç¾ã€ŒğŸ”’ã€å’Œ Private æ¨™ç±¤ã€‚

è‹¥ç„¡å‰‡ä»£è¡¨æ‚¨å»ºç«‹çš„äº‹ **Public Repo éå¸¸å±éšª** ï¼Œè«‹å‰å¾€ä¸Šæ–¹ Tabã€ŒSettingsã€\-> ã€ŒGeneralã€\-> åº•éƒ¨ã€ŒDanger Zoneã€\-> ã€ŒChange repository visibilityã€\->ã€ŒMake privateã€ **æ”¹å› Private Repo** ã€‚

4\. ç­‰å¾… Project init æˆåŠŸ

å¯åœ¨ Repo é¦–é  Readme ä¸­çš„


![](/assets/e36e48bb9265/1*aN9IkRx2BnAKFk8VW9ORVw.png)


å€å¡ŠæŸ¥çœ‹ Badgeï¼Œå¦‚æœ passing å³ä»£è¡¨ init æˆåŠŸã€‚

æˆ–æ˜¯é»æ“Šä¸Šæ–¹ Tabã€ŒActionsã€\-> ç­‰å¾…ã€ŒInit ZReviewTenderã€Workflow åŸ·è¡Œå®Œæˆï¼š


![](/assets/e36e48bb9265/1*jThU3BbKvOT6nl51yklqtg.png)


åŸ·è¡Œå®Œæˆç‹€æ…‹æœƒè®Š 3ã€Œâœ… Init ZReviewTenderã€\-> Project init æˆåŠŸã€‚

5\. ç¢ºèª init æª”æ¡ˆåŠç›®éŒ„æ˜¯å¦æ­£ç¢ºå»ºç«‹


![](/assets/e36e48bb9265/1*XEh53SaAjDV9YVk4T41O5Q.png)


é»æ“Šä¸Šæ–¹ Tabã€ŒCodeã€å›åˆ°å°ˆæ¡ˆç›®éŒ„ï¼ŒProject init æˆåŠŸçš„è©±æœƒå‡ºç¾:
- ç›®éŒ„ï¼š `config/`
- æª”æ¡ˆï¼š `config/android.yml`
- æª”æ¡ˆï¼š `config/apple.yml`
- ç›®éŒ„ï¼š `latestCheckTimestamp/`
- æª”æ¡ˆï¼š `latestCheckTimestamp/.keep`


6\. å®Œæˆ Configuration é…ç½®å¥½ `android.yml` & `apple.yml`

é€²å…¥ `config/` ç›®éŒ„å®Œæˆ `android.yml` & `apple.yml` æª”æ¡ˆé…ç½®ã€‚


![](/assets/e36e48bb9265/1*SiqBOk6BU38SRJAccC2hEg.png)


é»æ“Šé€²å…¥è¦ç·¨è¼¯çš„ confi YML æª”æ¡ˆé»æ“Šå³ä¸Šæ–¹ã€Œâœï¸ã€ç·¨è¼¯æª”æ¡ˆã€‚

åƒè€ƒæœ¬æ–‡ä¸‹æ–¹ã€Œ **è¨­å®š** ã€å€å¡Šå®Œæˆé…ç½®å¥½ `android.yml` & `apple.yml` ã€‚


![](/assets/e36e48bb9265/1*QZ0wQTtbcoN9tgyElYgYAw.png)


ç·¨è¼¯å®Œæˆå¾Œå¯ä»¥ç›´æ¥åœ¨ä¸‹æ–¹ã€ŒCommit changesã€å„²å­˜è¨­å®šã€‚

ä¸Šå‚³ç›¸æ‡‰çš„ Key æª”æ¡ˆåˆ° `config/` ç›®éŒ„ä¸‹:


![](/assets/e36e48bb9265/1*pAsWumPT57pLrY3Rn3UZhA.png)


åœ¨ `config/` ç›®éŒ„ä¸‹ï¼Œå³ä¸Šè§’é¸æ“‡ã€ŒAdd fileã€\->ã€ŒUpload filesã€


![](/assets/e36e48bb9265/1*CUVQlxKrJjsZZfy3jQErww.png)


å°‡ config yml è£¡é…ç½®çš„ç›¸æ‡‰ Keyã€å¤–éƒ¨æª”æ¡ˆè·¯å¾‘ä¸€ä½µä¸Šå‚³åˆ° `config/` ç›®éŒ„ä¸‹ï¼Œæ‹–æ›³æª”æ¡ˆåˆ°ã€Œä¸Šæ–¹å€å¡Šã€\-> ç­‰å¾…æª”æ¡ˆä¸Šå‚³å®Œæˆ \-> ä¸‹æ–¹ç›´æ¥ã€ŒCommit changesã€å„²å­˜ã€‚

ä¸Šå‚³å®Œæˆå¾Œå›åˆ° `/config` ç›®éŒ„æŸ¥çœ‹æª”æ¡ˆæ˜¯å¦æ­£ç¢ºå„²å­˜&ä¸Šå‚³ã€‚


![](/assets/e36e48bb9265/1*NyeoQzNvhnQJqoXvupnjgQ.png)


7\. åˆå§‹åŒ– ZReviewTender \(æ‰‹å‹•è§¸ç™¼åŸ·è¡Œä¸€æ¬¡\)


![](/assets/e36e48bb9265/1*4QTEqr_DeFndqoWuP7YLsQ.png)


é»æ“Šä¸Šæ–¹ Tabã€ŒActionsã€\-> å·¦æ–¹é¸æ“‡ã€ŒZReviewTenderã€\-> å³æ–¹æŒ‰éˆ•é¸æ“‡ã€ŒRun workflowã€\-> é»æ“Šã€ŒRun workflowã€æŒ‰éˆ•åŸ·è¡Œä¸€æ¬¡ ZReviewTenderã€‚

**é»æ“Šå¾Œï¼Œé‡æ–°æ•´ç†ç¶²é ** æœƒå‡ºç¾ï¼š


![](/assets/e36e48bb9265/1*_zTIiPyGsAejyH1BpggzhQ.png)


é»æ“Šã€ŒZReviewTenderã€å¯é€²å…¥æŸ¥çœ‹åŸ·è¡Œç‹€æ³ã€‚


![](/assets/e36e48bb9265/1*-Xso56jtpCVicp56w1y6sQ.png)


å±•é–‹ã€Œ `Run ZreviewTender -r` ã€å€å¡Šå¯æŸ¥çœ‹åŸ·è¡Œ Logã€‚

é€™é‚Šå¯ä»¥çœ‹åˆ°å‡ºç¾ Errorï¼Œå› ç‚ºæˆ‘é‚„æ²’é…ç½®å¥½æˆ‘çš„ config yml æª”æ¡ˆã€‚

å›é ­èª¿æ•´å¥½ android/apple config yml å¾Œå†å›åˆ° 6\. æ­¥é©Ÿä¸€é–‹å§‹é‡æ–°è§¸ç™¼åŸ·è¡Œä¸€æ¬¡ã€‚


![](/assets/e36e48bb9265/1*SAiaDofDwiFI8Z3ndDGz2w.png)


æŸ¥çœ‹ ã€Œ `ZReviewTender -r` ã€å€å¡Šçš„ log ç¢ºèªåŸ·è¡ŒæˆåŠŸï¼


![](/assets/e36e48bb9265/1*W5PHoBzHQxV1WQ82TrZqfA.png)


Slack æŒ‡å®šæ¥æ”¶æœ€æ–°è©•åƒ¹è¨Šæ¯çš„ Channel ä¹Ÿæœƒå‡ºç¾ init Success æˆåŠŸè¨Šæ¯ ğŸ‰

8\. **Done\!** ğŸ‰ ğŸ‰ ğŸ‰


![](/assets/e36e48bb9265/1*8WcmenKeWSd92DjWeAQSGg.png)


é…ç½®å®Œæˆï¼çˆ¾å¾Œæ¯ 6 å€‹å°æ™‚æœƒè‡ªå‹•çˆ¬å–æœŸé–“å…§çš„æœ€æ–°è©•åƒ¹ä¸¦è½‰ç™¼åˆ°ä½ çš„ Slack Channel ä¸­ï¼

å¯åœ¨ Repo é¦–é  Readme ä¸­çš„é ‚éƒ¨æŸ¥çœ‹æœ€æ–°ä¸€æ¬¡åŸ·è¡Œç‹€æ³ï¼š


![](/assets/e36e48bb9265/1*sz4piAAAhOqEGP0EFbMmKg.png)


è‹¥å‡ºç¾ Error å³ä»£è¡¨åŸ·è¡Œç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹å¾ Acions \-> ZReviewTender é€²å…¥æŸ¥çœ‹ç´€éŒ„ï¼›å¦‚æœæœ‰æ„å¤–çš„éŒ¯èª¤ï¼Œè«‹ [**å»ºç«‹ä¸€å€‹ Issue**](https://github.com/ZhgChgLi/ZReviewTender/issues){:target="_blank"} **é™„ä¸Šç´€éŒ„è³‡è¨Šï¼Œå°‡æœƒç›¡å¿«ä¿®æ­£ï¼**


> âŒâŒâŒåŸ·è¡Œç™¼ç”ŸéŒ¯èª¤åŒæ™‚ Github ä¹Ÿæœƒå¯„ä¿¡é€šçŸ¥ï¼Œä¸æ€•ç™¼ç”ŸéŒ¯èª¤æ©Ÿå™¨äººæ›æ‰ä½†æ²’äººç™¼ç¾ï¼ 




#### Github Action èª¿æ•´

æ‚¨é‚„å¯ä»¥ä¾ç…§è‡ªå·±éœ€æ±‚é…ç½® Github Action åŸ·è¡Œè¦å‰‡ã€‚

é»æ“Šä¸Šæ–¹ Tabã€ŒActionsã€\-> å·¦æ–¹ã€ŒZReviewTenderã€\-> å³ä¸Šæ–¹ã€Œ `ZReviewTender.yml` ã€


![](/assets/e36e48bb9265/1*DnquiwKTgYY6R2ysNx8F1w.png)



![](/assets/e36e48bb9265/1*onoSoGPahBOaAsBo6Ou-3g.png)


é»æ“Šå³ä¸Šæ–¹ã€Œâœï¸ã€ç·¨è¼¯æª”æ¡ˆã€‚


![](/assets/e36e48bb9265/1*HY_f3zOivHGQv5tuwUyw8Q.png)


**æœ‰å…©å€‹åƒæ•¸å¯ä¾›èª¿æ•´ï¼š**

**cron** : è¨­å®šå¤šä¹…æª¢æŸ¥ä¸€æ¬¡æœ‰ç„¡æ–°è©•åƒ¹ï¼Œé è¨­æ˜¯ `15 */6 * * *` ä»£è¡¨æ¯ 6 å°æ™‚ 15 åˆ†é˜æœƒåŸ·è¡Œä¸€æ¬¡ã€‚


![](/assets/e36e48bb9265/1*cUGMHPmjlMRV_rRXItN4qg.png)


å¯åƒè€ƒ [crontab\.guru](https://crontab.guru/#15_*/6_*_*_*){:target="_blank"} ä¾ç…§è‡ªå·±çš„éœ€æ±‚é…ç½®ã€‚


> **è«‹æ³¨æ„ï¼š** 
 

> 1\. Github Action ä½¿ç”¨çš„æ˜¯ UTC æ™‚å€
 

> 2\. åŸ·è¡Œé »ç‡è¶Šé«˜æœƒæ¶ˆè€—è¶Šå¤šGithub Action åŸ·è¡Œé¡åº¦ 





**run** : è¨­å®šè¦åŸ·è¡Œçš„æŒ‡ä»¤ï¼Œå¯åƒè€ƒæœ¬æ–‡ä¸‹æ–¹ã€Œ **åŸ·è¡Œ** ã€å€å¡Šï¼Œé è¨­æ˜¯ `ZReviewTender -r`
- é è¨­åŸ·è¡Œ Android App & Apple\(iOS/macOS App\)ï¼š `ZReviewTender -r`
- åªåŸ·è¡Œ Android Appï¼š `ZReviewTender -g`
- åªåŸ·è¡Œ Apple\(iOS/macOS App\) Appï¼š `ZReviewTender -a`


ç·¨è¼¯å®Œæˆå¾Œé»æ“Šå³ä¸Šæ–¹ã€ŒStart commitã€é¸æ“‡ã€ŒCommit changesã€å„²å­˜è¨­å®šã€‚
#### æ‰‹å‹•è§¸ç™¼åŸ·è¡Œ ZReviewTender

åƒè€ƒå‰æ–‡ã€Œ6\. åˆå§‹åŒ– ZReviewTender \(æ‰‹å‹•è§¸ç™¼åŸ·è¡Œä¸€æ¬¡\)ã€
#### ä½¿ç”¨ Gem å®‰è£

å¦‚æœç†Ÿæ‚‰ Gems å¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å®‰è£ `ZReviewTender`
```
gem install ZReviewTender
```
#### ä½¿ç”¨ Gem å®‰è£ \(ä¸ç†Ÿæ‚‰ Ruby/Gems\)

å¦‚æœä¸ç†Ÿæ‚‰ Ruby or Gems å¯ä»¥ Follow ä»¥ä¸‹æ­¥é©Ÿ Step by Step å®‰è£ `ZReviewTender`
1. macOS é›–è‡ªå¸¶ Rubyï¼Œä½†å»ºè­°ä½¿ç”¨ [rbenv](https://github.com/rbenv/rbenv){:target="_blank"} or [rvm](https://rvm.io/){:target="_blank"} å®‰è£æ–°çš„ Ruby åŠç®¡ç† Ruby ç‰ˆæœ¬ \(æˆ‘ä½¿ç”¨ `2.6.5` \)
2. ä½¿ç”¨ [rbenv](https://github.com/rbenv/rbenv){:target="_blank"} or [rvm](https://rvm.io/){:target="_blank"} å®‰è£ Ruby 2\.6\.5ï¼Œä¸¦åˆ‡æ›è‡³ rbenv/rvm çš„ Ruby
3. ä½¿ç”¨ `which ruby` ç¢ºèªç•¶å‰ä½¿ç”¨çš„ Ruby **é** `/usr/bin/ruby` ç³»çµ± Ruby
4. Ruby ç’°å¢ƒ Ok å¾Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å®‰è£ `ZReviewTender`

```
gem install ZReviewTender
```
### éƒ¨ç½² â€” æƒ³è‡ªè¡Œæ“´å……åŠŸèƒ½
#### æ‰‹å‹•
1. git clone [**ZReviewTender**](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"} Source Code
2. ç¢ºèª & å®Œå–„ Ruby ç’°å¢ƒ
3. é€²å…¥ç›®éŒ„ï¼ŒåŸ·è¡Œ `bundle install` [**ZReviewTender**](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"} å®‰è£ç›¸é—œä¾è³´


Processor å»ºç«‹æ–¹å¼å¯åƒè€ƒå¾Œé¢æ–‡ç« å…§å®¹ã€‚
### è¨­å®š

[**ZReviewTender**](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"} â€” ä½¿ç”¨ yaml æª”è¨­å®š Apple/Google è©•åƒ¹æ©Ÿå™¨äººã€‚

**\[æ¨è–¦\]** ç›´æ¥ä½¿ç”¨æ–‡ç« ä¸‹æ–¹çš„åŸ·è¡ŒæŒ‡ä»¤ â€” ã€Œç”¢ç”Ÿè¨­å®šæª”æ¡ˆã€:
```
ZReviewTender -i
```

ç›´æ¥ç”¢ç”Ÿç©ºç™½çš„ `apple.yml` & `android.yml` è¨­å®šæª”ã€‚
#### Apple \(iOS/macOS App\)

åƒè€ƒ apple\.example\.yml æª”æ¡ˆï¼š


[![](https://repository-images.githubusercontent.com/516425682/1cc1a829-d87d-4d4a-925b-60471b912b23)](https://github.com/ZhgChgLi/ZReviewTender/blob/main/config/apple.example.yml){:target="_blank"}



> âš ï¸ ä¸‹è¼‰ä¸‹ä¾† `apple.example.yml` å¾Œè¨˜å¾—å°‡æª”åæ”¹æˆ `apple.yml` 




```yaml
platform: 'apple'
appStoreConnectP8PrivateKeyFilePath: '' # APPLE STORE CONNECT API PRIVATE .p8 KEY File Path
appStoreConnectP8PrivateKeyID: '' # APPLE STORE CONNECT API PRIVATE KEY ID
appStoreConnectIssueID: '' # APPLE STORE CONNECT ISSUE ID
appID: '' # APP ID
...
```

**appStoreConnectIssueIDï¼š**


![](/assets/e36e48bb9265/1*FsgHMeCGLVbuetBC4gIP_w.png)

- App Store Connect \-> Keys \-> [App Store Connect API](https://appstoreconnect.apple.com/access/api){:target="_blank"}
- Issuer ID: `appStoreConnectIssueID`


**appStoreConnectP8PrivateKeyID & appStoreConnectP8PrivateKeyFilePathï¼š**


![](/assets/e36e48bb9265/1*xBtkRFEKO2xHU26TMdXJZQ.png)

- Name: `ZReviewTender`
- Access: `App Manager`



![](/assets/e36e48bb9265/1*DvjiO3IkHEiPXp0M_dnnww.png)

- appStoreConnectP8PrivateKeyID: `Key ID`
- appStoreConnectP8PrivateKeyFilePath: `/AuthKey_XXXXXXXXXX.p8` ï¼ŒDownload API Keyï¼Œä¸¦å°‡æª”æ¡ˆæ”¾å…¥èˆ‡ config yml åŒç›®éŒ„ä¸‹ã€‚


**appID:**


![](/assets/e36e48bb9265/1*Ov2pyW9anRVqNCpbxhHtJQ.png)


appID: [App Store Connect](https://appstoreconnect.apple.com/apps){:target="_blank"} \-> App Store \-> General \-> App Information \-> `Apple ID`
#### GCP Service Account

ZReviewTender æ‰€ä½¿ç”¨åˆ°çš„ Google API æœå‹™ \(æ’ˆå–å•†åŸè©•åƒ¹ã€Google ç¿»è­¯ã€Google Sheet\) éƒ½æ˜¯ä½¿ç”¨ Service Account é©—è­‰æ–¹å¼ã€‚

å¯å…ˆä¾ç…§ [**å®˜æ–¹æ­¥é©Ÿå»ºç«‹ GCP & Service Account**](https://cloud.google.com/docs/authentication/production#create_service_account){:target="_blank"} ä¸‹è¼‰ä¿å­˜ GCP Service Account èº«ä»½æ¬Šé™é‡‘é‘° \( `*.json` \)ã€‚
- å¦‚è¦ä½¿ç”¨è‡ªå‹•ç¿»è­¯åŠŸèƒ½è«‹ç¢ºèª GCPæœ‰å•Ÿç”¨ `Cloud Translation API` å’Œä½¿ç”¨çš„ Service Account ä¹Ÿæœ‰åŠ å…¥
- å¦‚è¦ä½¿ç”¨è¨˜éŒ„åˆ° Google Sheet åŠŸèƒ½è«‹ç¢ºèª GCP æœ‰å•Ÿç”¨ `Google Sheets API` ã€ `Google Drive API` å’Œä½¿ç”¨çš„ Service Account ä¹Ÿæœ‰åŠ å…¥



![](/assets/e36e48bb9265/1*VaVD2bdnbVwWCAuwhV90sA.png)

#### Google Play Console \(Android App\)

åƒè€ƒ android\.example\.yml æª”æ¡ˆï¼š


[![](https://repository-images.githubusercontent.com/516425682/1cc1a829-d87d-4d4a-925b-60471b912b23)](https://github.com/ZhgChgLi/ZReviewTender/blob/main/config/android.example.yml){:target="_blank"}



> âš ï¸ ä¸‹è¼‰ä¸‹ä¾† `android.example.yml` å¾Œè¨˜å¾—å°‡æª”åæ”¹æˆ `android.yml` 




```yaml
platform: 'android'
packageName: '' # Android App Package Name
keyFilePath: '' # Google Android Publisher API Credential .json File Path
playConsoleDeveloperAccountID: '' # Google Console Developer Account ID
playConsoleAppID: '' # Google Console App ID
......
```

**packageName:**


![](/assets/e36e48bb9265/1*XRzKNGhVbBef7Hl9XPcaWw.png)


packageName: `com.XXXXX` å¯æ–¼ [Google Play Console](https://play.google.com/console/){:target="_blank"} \-> Dashboard \-> App ä¸­å–å¾—

**playConsoleDeveloperAccountID & playConsoleAppID:**

å¯ç”± [Google Play Console](https://play.google.com/console/){:target="_blank"} \-> Dashboard \-> App é é¢ç¶²å€ä¸­å–å¾—ï¼š

[https://play\.google\.com/console/developers/ **playConsoleDeveloperAccountID** /app/ **playConsoleAppID** /app\-dashboard](https://play.google.com/console/developers/playConsoleDeveloperAccountID/app/playConsoleAppID/app-dashboard){:target="_blank"}

å°‡ç”¨æ–¼çµ„åˆè©•åƒ¹è¨Šæ¯é€£çµï¼Œè®“åœ˜éšŠå¯ä»¥é»æ“Šé€£çµå¿«é€Ÿé€²å…¥å¾Œå°è©•åƒ¹å›è¦†é é¢ã€‚

**keyFilePath:**

æœ€é‡è¦çš„è³‡è¨Šï¼ŒGCP Service Account èº«ä»½æ¬Šé™é‡‘é‘° \( `*.json` \)

éœ€è¦æŒ‰ç…§ [å®˜æ–¹æ–‡ä»¶](https://developers.google.com/android-publisher/getting_started){:target="_blank"} æ­¥é©Ÿï¼Œå»ºç«‹ Google Cloud Project & Service Account ä¸¦åˆ° Google Play Console \-> Setup \-> API Access ä¸­å®Œæˆå•Ÿç”¨ `Google Play Android Developer API` ï¼†é€£çµå°ˆæ¡ˆï¼Œåˆ° GCP é»æ“Šä¸‹è¼‰æœå‹™å¸³æˆ¶çš„ JSON é‡‘é‘°ã€‚


![](/assets/e36e48bb9265/1*yQhAVOuF_CvM49Vayl40zA.png)



![](/assets/e36e48bb9265/1*-AKvlk9P6R0YkuZwsXJaLA.png)


**JSON é‡‘é‘°ç¯„ä¾‹å…§å®¹å¦‚ä¸‹ï¼š**
```json
{
    "type": "service_account",
    "project_id": "XXXX",
    "private_key_id": "XXXX",
    "private_key": "-----BEGIN PRIVATE KEY-----\nXXXX\n-----END PRIVATE KEY-----\n",
    "client_email": "XXXX@XXXX.iam.gserviceaccount.com",
    "client_id": "XXXX",
    "auth_uri": "https://accounts.google.com/o/oauth2/auth",
    "token_uri": "https://oauth2.googleapis.com/token",
    "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
    "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/XXXX.iam.gserviceaccount.com"
}
```
- keyFilePath: `/gcp_key.json` é‡‘é‘°æª”æ¡ˆè·¯å¾‘ï¼Œå°‡æª”æ¡ˆæ”¾å…¥èˆ‡ config yml åŒç›®éŒ„ä¸‹ã€‚

#### Processors
```yaml
processors:
    - FilterProcessor:
        class: "FilterProcessor"
        enable: true # enable
        keywordsInclude: [] # keywords you want to filter out
        ratingsInclude: [] # ratings you want to filter out
        territoriesInclude: [] # territories you want to filter out
    - GoogleTranslateProcessor: # Google Translate Processor, will translate review text to your language, you can remove whole block if you don't needed it.
        class: "GoogleTranslateProcessor"
        enable: false # enable
        googleTranslateAPIKeyFilePath: '' # Google Translate API Credential .json File Path
        googleTranslateTargetLang: 'zh-TW' # Translate to what Language
        googleTranslateTerritoriesExclude: ["TWN","CHN"] # Review origin Territory (language) that you don't want to translate.
    - SlackProcessor: # Slack Processor, resend App Review to Slack.
        class: "SlackProcessor"
        enable: true # enable
        slackTimeZoneOffset: "+08:00" # Review Created Date TimeZone
        slackAttachmentGroupByNumber: "1" # 1~100, how many review message in 1 slack message.
        slackBotToken: "" # Slack Bot Token, send slack message throught Slack Bot.
        slackBotTargetChannel: "" # Slack Bot Token, send slack message throught Slack Bot. (recommended, first priority)
        slackInCommingWebHookURL: "" # Slack In-Comming WebHook URL, Send slack message throught In-Comming WebHook, not recommended, deprecated.
    ...More Processors...
```

ZReviewTender è‡ªå¸¶å››å€‹ Processorï¼Œå…ˆå¾Œé †åºæœƒå½±éŸ¿åˆ°è³‡æ–™è™•ç†æµç¨‹ FilterProcessor\->GoogleTranslateProcessor\->SlackProcessor\-> GoogleSheetProcessorã€‚

**FilterProcessor:**

ä¾ç…§æŒ‡å®šæ¢ä»¶éæ¿¾æ’ˆå–çš„è©•åƒ¹ï¼Œåªè™•ç†ç¬¦åˆæ¢ä»¶çš„è©•åƒ¹ã€‚
- class: `FilterProcessor` ç„¡éœ€èª¿æ•´ï¼ŒæŒ‡å‘ lib/Processors/ `FilterProcessor` \.rb
- enable: `true` / `false` å•Ÿç”¨æ­¤ Processor or Not
- keywordsInclude: \[â€œ `é—œéµå­—1` â€,â€œ `é—œéµå­—2` â€â€¦\] ç¯©é¸å‡ºå…§å®¹åŒ…å«é€™äº›é—œéµå­—çš„è©•åƒ¹
- ratingsInclude: \[ `1` , `2` â€¦\] 1~5 ç¯©é¸å‡ºåŒ…å«é€™äº›è©•åƒ¹åˆ†æ•¸çš„è©•åƒ¹
- territoriesInclude: \[â€œ `zh-hant` â€,â€ `TWN` â€â€¦\] ç¯©é¸å‡ºåŒ…å«é€™äº›åœ°å€\(Apple\)æˆ–èªç³»\(Android\)çš„è©•åƒ¹


**GoogleTranslateProcessor:**

å°‡è©•åƒ¹ç¿»è­¯æˆæŒ‡å®šèªè¨€ã€‚
- class: `GoogleTranslateProcessor` ç„¡éœ€èª¿æ•´ï¼ŒæŒ‡å‘ lib/Processors/ `GoogleTranslateProcessor` \.rb
- enable: `true` / `false` å•Ÿç”¨æ­¤ Processor or Not
- googleTranslateAPIKeyFilePath: `/gcp_key.json` GCP Service Account èº«ä»½æ¬Šé™é‡‘é‘° File Path `*.json` ï¼Œå°‡æª”æ¡ˆæ”¾å…¥èˆ‡ config yml åŒç›®éŒ„ä¸‹ï¼Œå…§å®¹ç¯„ä¾‹å¯åƒè€ƒä¸Šæ–¹ Google Play Console JSON é‡‘é‘°ç¯„ä¾‹ã€‚
\(è«‹ç¢ºèªè©² JSON key ä¹‹ service account æœ‰ `Cloud Translation API` ä½¿ç”¨æ¬Šé™\)
- googleTranslateTargetLang: `zh-TW` ã€ `en` â€¦ç›®æ¨™ç¿»è­¯èªè¨€
- googleTranslateTerritoriesExclude: \[â€œ `zh-hant` â€,â€ `TWN` â€â€¦\] ä¸éœ€ç¿»è­¯çš„åœ°å€\(Apple\)æˆ–èªç³»\(Android\)


**SlackProcessor:**

è½‰ç™¼è©•åƒ¹åˆ° Slackã€‚
- class: `SlackProcessor` ç„¡éœ€èª¿æ•´ï¼ŒæŒ‡å‘ lib/Processors/ `SlackProcessor` \.rb
- enable: `true` / `false` å•Ÿç”¨æ­¤ Processor or Not
- slackTimeZoneOffset: `+08:00` è©•åƒ¹æ™‚é–“é¡¯ç¤ºæ™‚å€
- slackAttachmentGroupByNumber: `1` è¨­å®šå¹¾å‰‡ Reviews åˆä½µæˆåŒä¸€å‰‡è¨Šæ¯ï¼ŒåŠ é€Ÿç™¼é€ï¼›é è¨­ 1 å‰‡ Review 1 å‰‡ Slack è¨Šæ¯ã€‚
- slackBotToken: `xoxb-xxxx-xxxx-xxxx` [Slack Bot Token](https://slack.com/help/articles/115005265703-Create-a-bot-for-your-workspace){:target="_blank"} ï¼ŒSlack å»ºè­°å»ºç«‹ä¸€å€‹ Slack Bot åŒ…å« `postMessages` Scope ä¸¦ä½¿ç”¨å…¶ç™¼é€ Slack è¨Šæ¯
- slackBotTargetChannel: `CXXXXXX` ç¾¤çµ„ ID \( **éç¾¤çµ„åç¨±** \)ï¼ŒSlack Bot è¦ç™¼é€åˆ°å“ªå€‹ Channel ç¾¤çµ„ï¼›ä¸” **éœ€è¦æŠŠä½ çš„ Slack Bot åŠ å…¥åˆ°è©²ç¾¤çµ„**
- slackInCommingWebHookURL: `https://hooks.slack.com/services/XXXXX` ä½¿ç”¨èˆŠçš„ [InComming WebHookURL](https://slack.com/apps/A0F7XDUAZ-incoming-webhooks){:target="_blank"} ç™¼é€è¨Šæ¯åˆ° Slackï¼Œæ³¨æ„ï¼Slack ä¸å»ºè­°å†ç¹¼çºŒä½¿ç”¨æ­¤æ–¹æ³•ç™¼é€è¨Šæ¯ã€‚



> Please note, this is a legacy custom integration â€” an outdated way for teams to integrate with Slack\. These integrations lack newer features and they will be deprecated and possibly removed in the future\. **We do not recommend their use\.** Instead, we suggest that you check out their replacement: [Slack apps](https://api.slack.com/start){:target="_blank"} \. 




- slackBotToken èˆ‡ slackInCommingWebHookURLï¼ŒSlackProcessor æœƒå„ªé¸é¸æ“‡ä½¿ç”¨ slackBotToken



![](https://miro.medium.com/max/1400/1*D1kt_6jH0UaJo2kvf9l5Qw.png)



![](/assets/e36e48bb9265/1*UjE_LxtZ0adwS6tr2-vgbw.png)

### GoogleSheetProcessor

ç´€éŒ„è©•åƒ¹åˆ° Google Sheetã€‚
- class: `GoogleSheetProcessor` ç„¡éœ€èª¿æ•´ï¼ŒæŒ‡å‘ lib/Processors/ `SlackProcessor` \.rb
- enable: `true` / `false` å•Ÿç”¨æ­¤ Processor or Not
- googleSheetAPIKeyFilePath: `/gcp_key.json` GCP Service Account èº«ä»½æ¬Šé™é‡‘é‘° File Path `*.json` ï¼Œå°‡æª”æ¡ˆæ”¾å…¥èˆ‡ config yml åŒç›®éŒ„ä¸‹ï¼Œå…§å®¹ç¯„ä¾‹å¯åƒè€ƒä¸Šæ–¹ Google Play Console JSON é‡‘é‘°ç¯„ä¾‹ã€‚
\(è«‹ç¢ºèªè©² JSON key ä¹‹ service account æœ‰ `Google Sheets API` ã€ `Google Drive API` ä½¿ç”¨æ¬Šé™\)
- googleSheetTimeZoneOffset: `+08:00` è©•åƒ¹æ™‚é–“é¡¯ç¤ºæ™‚å€
- googleSheetID: `Google Sheet ID` 
å¯ç”± Google Sheet ç¶²å€ä¸­å–å¾—ï¼šhttps://docs\.google\.com/spreadsheets/d/ `googleSheetID` /
- googleSheetName: Sheet åç¨±, e\.g\. `Sheet1`
- keywordsInclude: \[â€œ `é—œéµå­—1` â€,â€œ `é—œéµå­—2` â€â€¦\] ç¯©é¸å‡ºå…§å®¹åŒ…å«é€™äº›é—œéµå­—çš„è©•åƒ¹
- ratingsInclude: \[ `1` , `2` â€¦\] 1~5 ç¯©é¸å‡ºåŒ…å«é€™äº›è©•åƒ¹åˆ†æ•¸çš„è©•åƒ¹
- territoriesInclude: \[â€œ `zh-hant` â€,â€ `TWN` â€â€¦\] ç¯©é¸å‡ºåŒ…å«é€™äº›åœ°å€\(Apple\)æˆ–èªç³»\(Android\)çš„è©•åƒ¹
- values: \[ \] è©•åƒ¹è³‡è¨Šçš„æ¬„ä½çµ„åˆ

```
%TITLE% è©•åƒ¹æ¨™é¡Œ
%BODY% è©•åƒ¹å…§å®¹
%RATING% è©•åƒ¹åˆ†æ•¸ 1~5
%PLATFORM% è©•åƒ¹ä¾†æºå¹³å° Apple or Android
%ID% è©•åƒ¹ID
%USERNAME% è©•åƒ¹
%URL% è©•åƒ¹å‰å¾€é€£çµ
%TERRITORY% è©•åƒ¹åœ°å€(Apple)æˆ–è©•åƒ¹èªç³»(Android)
%APPVERSION% è¢«è©•åƒ¹çš„ App ç‰ˆæœ¬
%CREATEDDATE% è©•åƒ¹å»ºç«‹æ—¥æœŸ
```

ä¾‹å¦‚æˆ‘çš„ Google Sheet æ¬„ä½å¦‚ä¸‹ï¼š
```
è©•åƒ¹åˆ†æ•¸,è©•åƒ¹æ¨™é¡Œ,è©•åƒ¹å…§å®¹,è©•åƒ¹è³‡è¨Š
```

å‰‡ values å¯è¨­å®šæˆï¼š
```
values: ["%TITLE%","%BODY%","%RATING%","%PLATFORM% - %APPVERSION%"]
```
#### è‡ªè¨‚ Processor ä¸²æ¥è‡ªå·±çš„å·¥ä½œæµç¨‹

è‹¥éœ€è¦è‡ªè¨‚ Processor è«‹æ”¹ç”¨æ‰‹å‹•éƒ¨ç½²ï¼Œå›  gem ä¸Šçš„ ZReviewTender å·²æ‰“åŒ…ç„¡æ³•å‹•æ…‹èª¿æ•´ã€‚

æ‚¨å¯åƒè€ƒ [lib/Processors/ProcessorTemplate\.rb](https://github.com/ZhgChgLi/ZReviewTender/blob/main/lib/Processors/ProcessorTemplate.rb){:target="_blank"} å»ºç«‹æ‚¨çš„æ“´å……åŠŸèƒ½:
```ruby
$lib = File.expand_path('../lib', File.dirname(__FILE__))

require "Models/Review"
require "Models/Processor"
require "Helper"
require "ZLogger"

# Add to config.yml:
#
# processors:
#   - ProcessorTemplate:
#       class: "ProcessorTemplate"
#       parameter1: "value"
#       parameter2: "value"
#       parameter3: "value"
#       ...
#

class ProcessorTemplate < Processor

    def initialize(config, configFilePath, baseExecutePath)
        # init Processor
        # get paraemter from config e.g. config["parameter1"]
        # configFilePath: file path of config file (apple.yml/android.yml)
        # baseExecutePath: user excute path
    end

    def processReviews(reviews, platform)
        if reviews.length < 1
            return reviews
        end

        ## do what your want to do with reviews...
        
        ## return result reviews
        return reviews
    end
end
```

**initialize æœƒçµ¦äºˆ:**
- config Object: å°æ‡‰ config yml å…§çš„è¨­å®šå€¼
- configFilePath: ä½¿ç”¨çš„ config yml æª”æ¡ˆè·¯å¾‘
- baseExecutePath: ä½¿ç”¨è€…åœ¨å“ªå€‹è·¯å¾‘åŸ·è¡Œ ZReviewTender


**processReviews\(reviews, platform\):**

çˆ¬å–å®Œæ–°è©•åƒ¹å¾Œï¼Œæœƒé€²å…¥é€™å€‹ function è®“ Processor æœ‰æ©Ÿæœƒè™•ç†ï¼Œè™•ç†å®Œè«‹ return çµæœçš„ Reviewsã€‚

Review è³‡æ–™çµæ§‹å®šç¾©åœ¨ lib/Models/ [Review\.rb](https://github.com/ZhgChgLi/ZReviewTender/blob/main/lib/Models/Review.rb){:target="_blank"}
#### é™„è¨»

`XXXterritorXXX` **åƒæ•¸ï¼š**
- Apple ä½¿ç”¨åœ°å€ï¼šTWM/JPNâ€¦
- Android ä½¿ç”¨èªç³»ï¼šzh\-hant/en/â€¦


**è‹¥ä¸éœ€è¦æŸå€‹ Processorï¼š** 
å¯ä»¥è¨­å®š `enable: false` æˆ–æ˜¯ç›´æ¥ç§»é™¤è©² Processor Config Blockã€‚

**Processors åŸ·è¡Œé †åºå¯ä¾ç…§æ‚¨çš„éœ€æ±‚è‡ªè¡Œèª¿æ•´ï¼š** 
e\.g\. å…ˆåŸ·è¡Œ Filter å†åŸ·è¡Œç¿»è­¯å†åŸ·è¡Œ Slack å†åŸ·è¡Œ Log to Google Sheetâ€¦
### åŸ·è¡Œ


> âš ï¸ ä½¿ç”¨ Gem å¯ç›´æ¥ä¸‹ `ZReviewTender` ï¼Œè‹¥ç‚ºæ‰‹å‹•éƒ¨ç½²å°ˆæ¡ˆè«‹ä½¿ç”¨ `bundle exec ruby bin/ZReviewTender` åŸ·è¡Œã€‚ 




#### ç”¢ç”Ÿè¨­å®šæª”æ¡ˆï¼š
```
ZReviewTender -i
```

å¾ apple\.example\.yml & android\.example\.yml ç”¢ç”Ÿ apple\.yml & android\.yml åˆ°ç•¶å‰åŸ·è¡Œç›®éŒ„çš„ `config/` ç›®éŒ„ä¸‹ã€‚
#### åŸ·è¡Œ Apple & Android è©•åƒ¹çˆ¬å–ï¼š
```
ZReviewTender -r
```
- é»˜èªè®€å– `/config/` ä¸‹ `apple.yml` & `android.yml` è¨­å®š

#### åŸ·è¡Œ Apple & Android è©•åƒ¹çˆ¬å– & æŒ‡å®šè¨­å®šæª”ç›®éŒ„ï¼š
```
ZReviewTender --run=è¨­å®šæª”ç›®éŒ„
```
- é»˜èªè®€å– `/config/` ä¸‹ `apple.yml` & `android.yml` è¨­å®š

#### åªåŸ·è¡Œ Apple è©•åƒ¹çˆ¬å–ï¼š
```
ZReviewTender -a
```
- é»˜èªè®€å– `/config/` ä¸‹ `apple.yml` è¨­å®š

#### åªåŸ·è¡Œ Apple è©•åƒ¹çˆ¬å– & æŒ‡å®šè¨­å®šæª”ä½ç½®ï¼š
```
ZReviewTender --apple=apple.ymlè¨­å®šæª”ä½ç½®
```
#### åªåŸ·è¡Œ Android è©•åƒ¹çˆ¬å–ï¼š
```
ZReviewTender -g
```
- é»˜èªè®€å– `/config/` ä¸‹ `android.yml` è¨­å®š

#### åªåŸ·è¡Œ Android è©•åƒ¹çˆ¬å– & æŒ‡å®šè¨­å®šæª”ä½ç½®ï¼š
```
ZReviewTender --googleAndroid=android.ymlè¨­å®šæª”ä½ç½®
```
#### æ¸…é™¤åŸ·è¡Œç´€éŒ„å›åˆ°åˆå§‹è¨­å®š
```
ZReviewTender -d
```

æœƒåˆªé™¤ `/latestCheckTimestamp` è£¡çš„ Timestamp ç´€éŒ„æª”æ¡ˆï¼Œå›åˆ°åˆå§‹ç‹€æ…‹ï¼Œå†æ¬¡åŸ·è¡Œçˆ¬å–æœƒå†æ¬¡æ”¶åˆ° init success è¨Šæ¯:


![](/assets/e36e48bb9265/1*8qVrSt1pXwNncPG_GEgm9A.png)

#### ç•¶å‰ ZReviewTender ç‰ˆæœ¬
```
ZReviewTender -v
```

é¡¯ç¤ºç•¶å‰ ZReviewTender å† [RubyGem](https://rubygems.org/gems/ZReviewTender){:target="_blank"} ä¸Šçš„æœ€æ–°ç‰ˆæœ¬è™Ÿã€‚
#### æ›´æ–° ZReviewTender åˆ°æœ€æ–°ç‰ˆ \(rubygem only\)
```
ZReviewTender -n
```
#### ç¬¬ä¸€æ¬¡åŸ·è¡Œ


![](/assets/e36e48bb9265/1*62VO8mbJWxXHSeFo3fEUog.png)


ç¬¬ä¸€æ¬¡åŸ·è¡ŒæˆåŠŸæœƒç™¼é€åˆå§‹åŒ–æˆåŠŸè¨Šæ¯åˆ°æŒ‡å®š Slack Channelï¼Œä¸¦åœ¨åŸ·è¡Œç›¸æ‡‰ç›®éŒ„ä¸‹ç”¢ç”Ÿ `latestCheckTimestamp/Apple` , `latestCheckTimestamp/Android` æª”æ¡ˆç´€éŒ„æœ€å¾Œçˆ¬å–çš„è©•åƒ¹ Timestampã€‚


![](/assets/e36e48bb9265/1*U8vjWSHvY2RzUBcUbQoBvQ.png)


å¦å¤–é‚„æœƒç”¢ç”Ÿä¸€å€‹ `execute.log` ç´€éŒ„åŸ·è¡ŒéŒ¯èª¤ã€‚


![](/assets/e36e48bb9265/1*TR8IMke6FC1ZktFOiXUWLw.png)

#### è¨­å®šæ’ç¨‹æŒçºŒåŸ·è¡Œ

è¨­å®šæ’ç¨‹å®šæ™‚\( [crontab](https://crontab.guru/){:target="_blank"} \)æŒçºŒåŸ·è¡Œçˆ¬å–æ–°è©•åƒ¹ï¼ŒZReviewTender æœƒçˆ¬å– `latestCheckTimestamp` ä¸Šæ¬¡çˆ¬å–çš„è©•åƒ¹ Timestamp åˆ°é€™æ¬¡çˆ¬å–æ™‚é–“å…§çš„æ–°è©•åƒ¹ï¼Œä¸¦æ›´æ–° Timestamp ç´€éŒ„æª”æ¡ˆã€‚

e\.g\. crontab: `15 */6 * * * ZReviewTender -r`

å¦å¤–è¦æ³¨æ„å› ç‚º Android API åªæä¾›æŸ¥è©¢è¿‘ 7 å¤©æ–°å¢æˆ–ç·¨ä¿®çš„è©•åƒ¹ï¼Œæ‰€ä»¥æ’æˆé€±æœŸè«‹å‹¿è¶…é 7 å¤©ï¼Œä»¥å…æœ‰è©•åƒ¹éºæ¼ã€‚


![[https://developers\.google\.com/android\-publisher/reply\-to\-reviews\#retrieving\_a\_set\_of\_reviews](https://developers.google.com/android-publisher/reply-to-reviews#retrieving_a_set_of_reviews){:target="_blank"}](/assets/e36e48bb9265/0*4atedIT5pjLul10U.png)

[https://developers\.google\.com/android\-publisher/reply\-to\-reviews\#retrieving\_a\_set\_of\_reviews](https://developers.google.com/android-publisher/reply-to-reviews#retrieving_a_set_of_reviews){:target="_blank"}
### **âš ï¸ï¸ï¸ï¸ï¸ å†æ¬¡è­¦å‘Šï¼**

**å‹™å¿…ç¢ºä¿ä½ çš„è¨­å®šæª”åŠé‡‘é‘°ç„¡æ³•è¢«å…¬é–‹å­˜å–ï¼Œå› å…¶ä¸­çš„æ•æ„Ÿè³‡è¨Šå¯èƒ½å°è‡´ App/Slack æ¬Šé™è¢«ç›œç”¨ï¼›ä½œè€…ä¸å°è¢«ç›œç”¨è² ä»»ä½•è²¬ä»»ã€‚**

å¦‚æœæœ‰ç™¼ç”Ÿæ„å¤–çš„éŒ¯èª¤ï¼Œè«‹ [**å»ºç«‹ä¸€å€‹ Issue**](https://github.com/ZhgChgLi/ZReviewTender/issues){:target="_blank"} **é™„ä¸Šç´€éŒ„è³‡è¨Šï¼Œå°‡æœƒç›¡å¿«ä¿®æ­£ï¼**
### Done

ä½¿ç”¨æ•™å­¸çµæŸï¼Œå†ä¾†æ˜¯å¹•å¾Œé–‹ç™¼ç¥•è¾›åˆ†äº«ã€‚

=========================
#### èˆ‡ App Reviews çš„æˆ°çˆ­

æœ¬ä»¥ç‚ºå»å¹´ç¸½çµçš„ [**AppStore APPâ€™s Reviews Slack Bot é‚£äº›äº‹**](../cb0c68c33994/) åŠé‹ç”¨ç›¸é—œæŠ€è¡“å¯¦ç¾çš„ [**ZReviewsBot â€” Slack App Review é€šçŸ¥æ©Ÿå™¨äºº**](../33f6aabb744f/) ï¼Œèˆ‡æ•´åˆ App æœ€æ–°è©•åƒ¹é€²å…¥å…¬å¸å·¥ä½œæµç¨‹é€™ä»¶äº‹å°±å‘Šä¸€æ®µè½äº†ï¼›æ²’æƒ³åˆ° Apple å±…ç„¶åœ¨ä»Šå¹´ [æ›´æ–°äº† App Store Connect API](../f1365e51902c/) ï¼Œè®“é€™ä»¶äº‹èƒ½æŒçºŒæ¼”é€²ã€‚

å»å¹´ç¸½çµå‡ºä¾†çš„ Apple iOS/macOS App æ’ˆå–è©•åƒ¹çš„è§£æ±ºæ–¹æ¡ˆï¼š
- Public URL API \(RSS\) âš ï¸: ç„¡æ³•å½ˆæ€§ç¯©é¸ã€çµ¦çš„è³‡è¨Šä¹Ÿå°‘ã€æœ‰æ•¸é‡ä¸Šé™ã€é‚„æœ‰æˆ‘å€‘å¶çˆ¾æœƒé‡åˆ°è³‡æ–™éŒ¯äº‚å•é¡Œï¼Œå¾ˆä¸ç©©å®šï¼›å®˜æ–¹æœªä¾†å¯èƒ½æ£„ç”¨
- é€é [**Fastlane**](https://fastlane.tools/){:target="_blank"} **â€” [SpaceShip](https://github.com/fastlane/fastlane/tree/master/spaceship){:target="_blank"}** å¹«æˆ‘å€‘å°è£è¤‡é›œçš„ç¶²é æ“ä½œã€Session ç®¡ç†ï¼Œå» App Store Connection ç¶²ç«™å¾Œå°æ’ˆå–è©•åƒ¹è³‡æ–™ \(ç­‰æ–¼æ˜¯èµ·ä¸€å€‹ç¶²é æ¨¡æ“¬å™¨çˆ¬èŸ²å»å¾Œå°çˆ¬è³‡æ–™\)ã€‚


ä¾ç…§å»å¹´åšæ³•å°±åªèƒ½ä½¿ç”¨æ–¹æ³•äºŒä¾†é”æˆï¼Œä½†æ•ˆæœä¸å¤ªå®Œç¾ï¼›Session æœƒéæœŸï¼Œéœ€è¦äººå·¥å®šæœŸæ›´æ–°ï¼Œä¸”ç„¡æ³•æ”¾åœ¨ CI/CD Server ä¸Šï¼Œå› ç‚º IP ä¸€è®Š Session æœƒé¦¬ä¸ŠéæœŸã€‚


![[important\-note\-about\-session\-duration](https://docs.fastlane.tools/best-practices/continuous-integration/#important-note-about-session-duration){:target="_blank"} by Fastlane](/assets/e36e48bb9265/1*N6B1H_PdtB4bNDrX4BIYRA.png)

[important\-note\-about\-session\-duration](https://docs.fastlane.tools/best-practices/continuous-integration/#important-note-about-session-duration){:target="_blank"} by Fastlane

ä»Šå¹´æ”¶åˆ° Apple [æ›´æ–°äº† App Store Connect API](../f1365e51902c/) æ¶ˆæ¯å¾Œç«‹é¦¬è‘—æ‰‹é‡æ–°è¨­è¨ˆæ–°çš„è©•åƒ¹æ©Ÿå™¨äººï¼Œé™¤äº†æ”¹ç”¨å®˜æ–¹ API å¤–ï¼›é‚„å„ªåŒ–äº†ä¹‹å‰çš„æ¶æ§‹è¨­è¨ˆåŠæ›´ç†Ÿæ‚‰ Ruby ç”¨æ³•ã€‚
#### [App Store Connect API](../f1365e51902c/) é–‹ç™¼ä¸Šé‡åˆ°çš„å•é¡Œ
- [List All Customer Reviews for an App](https://developer.apple.com/documentation/appstoreconnectapi/list_all_customer_reviews_for_an_app){:target="_blank"} é€™å€‹ Endpoint ä¸æœƒçµ¦ App ç‰ˆæœ¬è³‡è¨Š


å¾ˆè©­ç•°ï¼Œåªèƒ½ workaround å…ˆæ‰“é€™å€‹ endpoint ç¯©å‡ºæœ€æ–°è©•åƒ¹ï¼Œå†æ‰“ [List All App Store Versions for an App](https://developer.apple.com/documentation/appstoreconnectapi/list_all_app_store_versions_for_an_app){:target="_blank"} & [List All Customer Reviews for an App Store Version](https://developer.apple.com/documentation/appstoreconnectapi/list_all_customer_reviews_for_an_app_store_version){:target="_blank"} çµ„åˆå‡º App ç‰ˆæœ¬è³‡è¨Šã€‚
#### AndroidpublisherV3 é–‹ç™¼ä¸Šé‡åˆ°çš„å•é¡Œ
- API ä¸æä¾›å–å¾—æ‰€æœ‰è©•åƒ¹åˆ—è¡¨çš„æ–¹æ³•ï¼Œåªèƒ½å–å¾—è¿‘ 7 å¤©æ–°å¢/ç·¨ä¿®çš„è©•åƒ¹ã€‚
- åŒæ¨£ä½¿ç”¨ JWT ä¸²æ¥ Google API \(ä¸ä¾è³´ç›¸é—œé¡åˆ¥åº« e\.g\. google\-apis\-androidpublisher\_v3\)
- é™„ä¸Šå€‹ Google API JWT ç”¢ç”Ÿ&ä½¿ç”¨ç¯„ä¾‹ï¼š

```ruby
require "jwt"
require "time"

payload = {
  iss: "GCP API èº«ä»½æ¬Šé™é‡‘é‘° (*.json) æª”æ¡ˆä¸­çš„ client_email æ¬„ä½",
  sub: "GCP API èº«ä»½æ¬Šé™é‡‘é‘° (*.json) æª”æ¡ˆä¸­çš„ client_email æ¬„ä½",
  scope: ["https://www.googleapis.com/auth/androidpublisher"]].join(' '),
  aud: "GCP API èº«ä»½æ¬Šé™é‡‘é‘° (*.json) æª”æ¡ˆä¸­çš„ token_uri æ¬„ä½",
  iat: Time.now.to_i,
  exp: Time.now.to_i + 60*20
}

rsa_private = OpenSSL::PKey::RSA.new("GCP API èº«ä»½æ¬Šé™é‡‘é‘° (*.json) æª”æ¡ˆä¸­çš„ private_key æ¬„ä½")
token = JWT.encode payload, rsa_private, 'RS256', header_fields = {kid:"GCP API èº«ä»½æ¬Šé™é‡‘é‘° (*.json) æª”æ¡ˆä¸­çš„ private_key_id æ¬„ä½", typ:"JWT"}

uri = URI("API èº«ä»½æ¬Šé™é‡‘é‘° (*.json) æª”æ¡ˆä¸­çš„ token_uri æ¬„ä½")
https = Net::HTTP.new(uri.host, uri.port)
https.use_ssl = true
request = Net::HTTP::Post.new(uri)
request.body = "grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer&assertion=#{token}"

response = https.request(request).read_body

bearer = result["access_token"]

### use bearer token

uri = URI("https://androidpublisher.googleapis.com/androidpublisher/v3/applications/APP_PACKAGE_NAME/reviews")
https = Net::HTTP.new(uri.host, uri.port)
https.use_ssl = true
        
request = Net::HTTP::Get.new(uri)
request['Authorization'] = "Bearer #{bearer}";
        
response = https.request(request).read_body
        
result = JSON.parse(response)

# success!
```


[![](https://repository-images.githubusercontent.com/516425682/1cc1a829-d87d-4d4a-925b-60471b912b23)](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}



[![Like Z Realm's work](https://button.like.co/images/og/likebutton.png "Like Z Realm's work")](https://button.like.co/zhgchgli){:target="_blank"}


æœ‰ä»»ä½•å•é¡ŒåŠæŒ‡æ•™æ­¡è¿ [èˆ‡æˆ‘è¯çµ¡](https://www.zhgchg.li/contact){:target="_blank"} ã€‚



_Converted [Medium Post](https://medium.com/zrealm-ios-dev/zreviewtender-%E5%85%8D%E8%B2%BB%E9%96%8B%E6%BA%90%E7%9A%84-app-reviews-%E7%9B%A3%E6%8E%A7%E6%A9%9F%E5%99%A8%E4%BA%BA-e36e48bb9265){:target="_blank"} by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._
