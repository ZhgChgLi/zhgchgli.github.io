---
title: iOS ç‚ºå¤šèªžç³»å­—ä¸²è²·ä»½ä¿éšªå§ï¼
author: ZhgChgLi
date: 2022-07-15T10:10:04.867+0000
last_modified_at: 2022-07-15T14:54:56.594+0000
categories: ZRealm Dev.
tags: [ios-app-development,localization,unit-testing,xcode,swift]
description: ç¢ºä¿ Localizable.strings æ–‡å­—æª”ä¸è¢«æ„å¤–æ”¹å£ž
image:
  path: assets/48a8526c1300/1*G2UsVr02o122GxI2o1WbQQ.jpeg
render_with_liquid: false
---

### iOS ç‚ºå¤šèªžç³»å­—ä¸²è²·ä»½ä¿éšªå§ï¼

ä½¿ç”¨ SwifGen & UnitTest ç¢ºä¿å¤šèªžç³»æ“ä½œçš„å®‰å…¨


![Photo by [Mick Haupt](https://unsplash.com/es/@rocinante_11?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText){:target="_blank"}](/assets/48a8526c1300/1*G2UsVr02o122GxI2o1WbQQ.jpeg)

Photo by [Mick Haupt](https://unsplash.com/es/@rocinante_11?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText){:target="_blank"}
### å•é¡Œ
#### ç´”æ–‡å­—æª”æ¡ˆ


![](/assets/48a8526c1300/1*9hxfi00_HcXy0wUMIyU8gA.png)


iOS çš„å¤šèªžç³»è™•ç†æ–¹å¼æ˜¯ Localizable\.strings ç´”æ–‡å­—æª”æ¡ˆï¼Œä¸åƒ Android æ˜¯é€éŽ XML æ ¼å¼ä¾†ç®¡ç†ï¼›æ‰€ä»¥åœ¨æ—¥å¸¸é–‹ç™¼ä¸Šå°±æœƒæœ‰ä¸å°å¿ƒæŠŠèªžç³»æª”æ”¹å£žæˆ–æ˜¯æ¼åŠ çš„é¢¨éšªå†åŠ ä¸Šå¤šèªžç³»ä¸æœƒåœ¨ Build Time æª¢æŸ¥å‡ºéŒ¯èª¤ï¼Œå¾€å¾€éƒ½æ˜¯ä¸Šç·šå¾Œï¼ŒæŸå€‹åœ°å€çš„ä½¿ç”¨è€…å›žå ±æ‰ç™¼ç¾å•é¡Œï¼Œæœƒå¤§å¤§é™ä½Žä½¿ç”¨è€…ä¿¡å¿ƒç¨‹åº¦ã€‚

ä¹‹å‰è¡€æ·‹æ·‹çš„æ¡ˆä¾‹ï¼Œå¤§å®¶ Swift å¯«çš„å¤ªç¿’æ…£å¿˜è¨˜ Localizable\.strings è¦åŠ  `;` ï¼Œå°Žè‡´æŸå€‹èªžç³»ä¸Šç·šå¾Œå¾žæ¼æŽ‰ `;` çš„èªžå¥å¾€å¾Œå…¨å£žæŽ‰ï¼›æœ€å¾Œç·Šæ€¥ Hotfix æ‰åŒ–éšªç‚ºå¤·ã€‚
#### **å¤šèªžç³»æœ‰å•é¡Œå°±æœƒç›´æŽ¥æŠŠ Key é¡¯ç¤ºçµ¦ä½¿ç”¨è€…**


![](/assets/48a8526c1300/1*BwaK_5ac2gxAmrzt4w-oBA.png)


å¦‚ä¸Šåœ–æ‰€ç¤ºï¼Œå‡è¨­ `DESCRIPTION` Key æ¼åŠ ï¼Œ Appå°±æœƒç›´æŽ¥é¡¯ç¤º `DESCRIPTION` çµ¦ä½¿ç”¨è€…ã€‚
### æª¢æŸ¥éœ€æ±‚
- Localizable\.strings æ ¼å¼æ­£ç¢ºæª¢æŸ¥ \(æ›è¡Œçµå°¾éœ€åŠ ä¸Š `;` ã€åˆæ³• Key Value å°æ‡‰\)
- ç¨‹å¼ç¢¼ä¸­æœ‰å–ç”¨çš„å¤šèªžç³» Key è¦åœ¨ Localizable\.strings æª”æœ‰å°æ‡‰å®šç¾©
- Localizable\.strings æª”å„å€‹èªžç³»éƒ½è¦æœ‰ç›¸æ‡‰çš„ Key Value ç´€éŒ„
- Localizable\.strings æª”ä¸èƒ½æœ‰é‡è¤‡çš„ Key \(å¦å‰‡ Value æœƒè¢«æ„å¤–è¦†è“‹\)

### è§£æ±ºæ–¹æ¡ˆ
#### ä½¿ç”¨ Swift æ’°å¯«å®Œæ•´æª¢æŸ¥å·¥å…·

ä¹‹å‰çš„åšæ³•æ˜¯ã€Œ [Xcode ç›´æŽ¥ä½¿ç”¨ Swift æ’°å¯« Shell Scriptï¼](../41c49a75a743/) ã€åƒè€ƒ [Localize ðŸ](https://github.com/freshOS/Localize){:target="_blank"} å·¥å…·ä½¿ç”¨ Swift é–‹ç™¼ Command Line Tool å¾žå¤–éƒ¨åšå¤šèªžç³»æª”æ¡ˆæª¢æŸ¥ï¼Œå†æŠŠè…³æœ¬æ”¾åˆ° Build Phases Run Script ä¸­ï¼Œåœ¨ Build Time åŸ·è¡Œæª¢æŸ¥ã€‚

**å„ªé»žï¼š** 
æª¢æŸ¥ç¨‹å¼æ˜¯ç”±å¤–éƒ¨æ³¨å…¥ï¼Œä¸ä¾è³´åœ¨å°ˆæ¡ˆä¸Šï¼Œå¯ä»¥ä¸é€éŽ XCodeã€ä¸éœ€ Build å°ˆæ¡ˆä¹Ÿèƒ½åŸ·è¡Œæª¢æŸ¥ã€æª¢æŸ¥åŠŸèƒ½èƒ½ç²¾ç¢ºåˆ°å“ªå€‹æª”æ¡ˆçš„ç¬¬å¹¾è¡Œï¼›å¦å¤–é‚„èƒ½åš Format åŠŸèƒ½ \(æŽ’åºå¤šèªžç³» Key A\->Z\)ã€‚

**ç¼ºé»žï¼š** 
å¢žåŠ  Build Time \( \+ ~= 3 mins\)ã€æµç¨‹ç™¼æ•£ï¼Œè…³æœ¬æœ‰å•é¡Œæˆ–éœ€å› æ‡‰å°ˆæ¡ˆæž¶æ§‹èª¿æ•´æ™‚é›£ä»¥äº¤æŽ¥ç¶­è­·ï¼Œå› é€™å¡Šä¸åœ¨å°ˆæ¡ˆå…§ï¼Œé™¤äº†åŠ å…¥é€™æ®µæª¢æŸ¥é€²ä¾†çš„äººçŸ¥é“æ•´å€‹é‚è¼¯ï¼Œå…¶ä»–å”ä½œè€…å¾ˆé›£ç¢°è§¸åˆ°é€™å¡Šã€‚


> æœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥åƒè€ƒä¹‹å‰çš„é‚£ç¯‡æ–‡ç« ï¼Œæœ¬ç¯‡ä¸»è¦ä»‹ç´¹çš„æ–¹å¼æ˜¯é€éŽ XCode 13\+SwiftGen\+UnitTest ä¾†é”æˆæª¢æŸ¥ Localizable\.strings çš„æ‰€æœ‰åŠŸèƒ½ã€‚ 




#### XCode 13 å…§å»º Build Time æª¢æŸ¥ Localizable\.strings æª”æ¡ˆæ ¼å¼æ­£ç¢ºæ€§


![](/assets/48a8526c1300/1*p28LgNGZYh6S8T2s2UH8lg.png)


å‡ç´š XCode 13 ä¹‹å¾Œå°±å…§å»ºäº† Build Time æª¢æŸ¥ Localizable\.strings æª”æ¡ˆæ ¼å¼çš„åŠŸèƒ½ï¼Œç¶“æ¸¬è©¦æª¢æŸ¥çš„è¦æ ¼ç›¸ç•¶å®Œæ•´ï¼Œé™¤äº†æ¼æŽ‰ `;` å¤–å¦‚æœ‰å¤šé¤˜ç„¡æ„ç¾©çš„å­—ä¸²ä¹Ÿæœƒè¢«æ“‹ä¸‹ä¾†ã€‚
#### ä½¿ç”¨ SwiftGen å–ä»£åŽŸå§‹ NSLocalizedString String Base å­˜å–æ–¹å¼

[SwiftGen](https://github.com/SwiftGen/SwiftGen){:target="_blank"} èƒ½å¹«åŠ©æˆ‘å€‘å°‡åŽŸæœ¬çš„ NSLocalizedString String å­˜å–æ–¹å¼æ”¹æˆ Object å­˜å–ï¼Œé˜²æ­¢ä¸å°å¿ƒæ‰“éŒ¯å­—ã€å¿˜è¨˜åœ¨ Key å®£å‘Šçš„æƒ…æ³å‡ºç¾ã€‚


[![](https://repository-images.githubusercontent.com/39166950/1826ed00-d6cf-11ea-9736-34829910d1e6)](https://github.com/SwiftGen/SwiftGen){:target="_blank"}


SwiftGen æ ¸å¿ƒä¹Ÿæ˜¯ Command Line Toolï¼›ä½†æ˜¯é€™å·¥å…·åœ¨æ¥­ç•Œè »æµè¡Œçš„è€Œä¸”æœ‰å®Œæ•´çš„æ–‡ä»¶åŠç¤¾ç¾¤è³‡æºåœ¨ç¶­è­·ï¼Œä¸å¿…å®³æ€•å°Žå…¥é€™å€‹å·¥å…·å¾ŒçºŒé›£ç¶­è­·çš„å•é¡Œã€‚

[**Installation**](https://github.com/SwiftGen/SwiftGen#installation){:target="_blank"}

å¯ä¾ç…§æ‚¨çš„ç’°å¢ƒæˆ– CI/CD æœå‹™è¨­å®šåŽ»é¸æ“‡å®‰è£æ–¹å¼ï¼Œé€™é‚Š Demo ç›´æŽ¥ç”¨æœ€ç›´æŽ¥çš„ CocoaPods é€²è¡Œå®‰è£ã€‚


> è«‹æ³¨æ„ SwiftGen ä¸¦ä¸æ˜¯çœŸçš„ CocoaPodsï¼Œä»–ä¸æœƒè·Ÿå°ˆæ¡ˆä¸­çš„ç¨‹å¼ç¢¼æœ‰ä»»ä½•ä¾è³´ï¼›ä½¿ç”¨ CocoaPods å®‰è£ SwiftGen å–®ç´”åªæ˜¯é€éŽå®ƒä¸‹è¼‰é€™å€‹ Command Line Tool åŸ·è¡Œæª”å›žä¾†ã€‚ 





åœ¨ `podfile` ä¸­åŠ å…¥ swiftgen podï¼š
```
pod 'SwiftGen', '~> 6.0'
```

**Init**

`pod install` ä¹‹å¾Œæ‰“é–‹ Terminal `cd` åˆ°å°ˆæ¡ˆä¸‹
```
/L10NTests/Pods/SwiftGen/bin/swiftGen config init
```

init `swiftgen.yml` è¨­å®šæª”ï¼Œä¸¦æ‰“é–‹å®ƒ
