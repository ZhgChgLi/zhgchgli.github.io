---
title: "CI/CD Practical Guide (Part 4): Building a Free and User-Friendly Packaging Tool Platform Using Google Apps Script Web App with GitHub Actions"
author: "ZhgChgLi"
date: 2025-07-10T12:30:51.530+0000
last_modified_at: 2025-07-10T13:28:07.393+0000
categories: ["ZRealm Dev."]
tags: ["ios-app-development","cicd","google-apps-script","web-development","tools"]
description: "Integrating GAS Web App with GitHub, Slack, Firebase, or Asana/Jira API to build a relay station that provides a packaging tool platform for cross-team sharing."
image:
  path: /assets/4273e57e7148/1*kJhD4PCaIphZ9G1BG_dtNw.jpeg
render_with_liquid: false
---

### CI/CD Practical Guide (Part 4): Building a Free and User-Friendly Packaging Tool Platform Using Google Apps Script Web App with GitHub Actions

Integrating GAS Web App with GitHub, Slack, Firebase, or Asana/Jira API to build a relay station that provides a packaging tool platform for cross-team sharing.

![Photo by [Lee Campbell](https://unsplash.com/@leecampbell?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash){:target="_blank"}](/assets/4273e57e7148/1*kJhD4PCaIphZ9G1BG_dtNw.jpeg)

Photo by [Lee Campbell](https://unsplash.com/@leecampbell?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash){:target="_blank"}
### Introduction

In the previous article, "[**CI/CD Practical Guide (Part 3): Implementing iOS CI and CD Workflows Using GitHub Actions**](../4b001d2e8440/)," we completed the foundational functionality for the CI/CD of the iOS app project. We can now perform CI automated testing and CD packaging deployment. However, in practical product development processes, **packaging and deployment tasks are mostly intended for subsequent delivery to other functional partners** for QA (Quality Assurance) validation. At this point, the CD scenario is no longer limited to the engineering side; it may involve QA, PM, design (Design QA), or even the boss wanting to try it out first.

The GitHub Actions `workflow_dispatch` manual form trigger event can provide a simple form for users to operate packaging, but if the target users are non-engineers, it can be quite unfriendly. They may not understand: What is a branch? Do I need to fill in the fields? How do I know when the packaging is done? How do I download it? ‚Ä¶etc. Additionally, there are permission control issues. If we want other functional partners to use GitHub Actions for packaging directly, we need to add their accounts to the repo, which is **not secure or reasonable from a cybersecurity perspective**; just to operate the packaging form, we have to expose the entire source code to them.

![`workflow_dispatch Form Style`](/assets/4273e57e7148/1*qDD8HAAHxDxPEU3vJPEhjA.png)

`workflow_dispatch Form Style`

Therefore, **we need a relay station packaging platform to serve other functional users**, integrating Asana/Jira task lists so that users can package the app directly using the task lists and view progress and download results right there.

![GAS Web App Relay Station](/assets/4273e57e7148/1*bHYawmSnhqwB4TzIJVfGow.png)

GAS Web App Relay Station

The previous article focused on the core GitHub Actions CI/CD workflow development on the right side; this article focuses on the left side, the end-user packaging tool platform, enhancing user experience.
#### Google Apps Script ‚Äî Web App Packaging Tool Platform Results

![](/assets/4273e57e7148/1*yXMeaOELhqdvMCxIJ5ElBw.gif)

![](/assets/4273e57e7148/1*EM0goWpuDeHGVkZoybLm8g.png)

![](/assets/4273e57e7148/1*haoGMvAUroz7rUMDEez9gA.png)

![](/assets/4273e57e7148/1*afCwKITlerG1g6swB_2wZA.png)

![](/assets/4273e57e7148/1*mvwpHBdrC73_PjL8H32nkw.jpeg)

![](/assets/4273e57e7148/1*BbbEd_thhUOdbAQqsCt-Tw.png)

![](/assets/4273e57e7148/1*HXjfMpUPssaw3sJgH6KKJQ.png)

- **Packaging Form:** Integrates project management tools to fetch task numbers and integrates GitHub to fetch open Pull Requests.
- **Packaging Records:** Displays packaging history, task progress status, and provides download links for Firebase App Distribution.
- **Runner Status:** Displays the status of the self-hosted runner.
- **Slack Packaging Progress Notifications.**
- Mobile version support.
- Supports restricting usage to accounts within the organization.

**Main Responsibilities**

0 status, 0 database, **purely a relay exchange station**, integrating and displaying data from various APIs (e.g., Asana/Jira/GitHub), forwarding form requests to GitHub Actions.

**Operational Requirements:** Supports both mobile and desktop.

**Permission Requirements:** Can restrict access to only team organization members.
#### Online Demo Web App

[**Sign in**](https://script.google.com/macros/s/AKfycbxk1nYhzfBzqny34rvBlxmcWMEQbWTL5a28mBmYId0NDaCZd0S-U3ytpBoTi2wZp0d6cg/exec){:target="_blank"} 
[_Edit description_ script\.google\.com](https://script.google.com/macros/s/AKfycbxk1nYhzfBzqny34rvBlxmcWMEQbWTL5a28mBmYId0NDaCZd0S-U3ytpBoTi2wZp0d6cg/exec){:target="_blank"}
### Technology Choices

The [first article](../c008a9e8ceca/) mentioned this, and here is a detailed summary again.
#### Integration with Slack

We attempted to use Slack as the packaging platform, developing our backend service and hosting it on GCP, integrating with Slack API and Asana API, and forwarding the forms sent from Slack to trigger subsequent GitHub Actions via GitHub API. The experience was very smooth and unified within the team's collaboration tools, allowing for seamless usage; **the downside is that the development and subsequent maintenance costs are very high**, as we developed the backend service using Ktor, requiring app engineers to also handle backend tasks, Google service OAuth integration issues, and some functionalities might be complex (e.g., submission for review). If new team members do not transition well into this area, it becomes nearly impossible to maintain. Additionally, we incur a monthly cost of $15 USD for the GCP server.

Initially, we also tried using FaaS services to integrate with Slack API, such as Cloud Functions, but the Slack API requires the integrated service to respond to requests within 3 seconds; otherwise, it is considered a failure. FaaS has a [cold start issue](https://www.cloudflare.com/zh-tw/learning/serverless/what-is-serverless/){:target="_blank"}, where if the service is not called for a period, it goes into sleep mode, and subsequent calls take longer to respond (‚â• 5 seconds), causing instability in the Slack packaging form and frequent Timeout Errors.
#### Integration with Internal Systems

This is, of course, the optimal solution. If the team has web and backend personnel, directly integrating with existing systems is the best and safest approach.

> _The premise of this article is: No, the app is self-sufficient._ 

#### Google Apps Script ‚Äî Web App

Google Apps Script is our old partner; we have previously used it for many RPA projects to schedule and trigger tasks, such as "[Crashlytics + Google Analytics Automatic Query for App Crash-Free Users Rate](../793cb8f89b72/)" and "[Using Google Apps Script to Implement Daily Data Report RPA Automation](../f6713ba3fee3/)." This time, I thought of it again; GAS has a feature that allows deployment as a Web (App) to serve as a web service.

**Advantages of Google Apps Script:**
- ‚úÖ Free, [under normal usage, you hardly touch the limits](https://developers.google.com/apps-script/guides/services/quotas?hl=zh-tw){:target="_blank"}
- ‚úÖ Functions as a Service, no need to set up and maintain servers.
- ‚úÖ Permission control is the same as Google Workspace, allowing settings for use only by Google accounts within the organization.
- ‚úÖ Seamless integration with Google ecosystem services (e.g., Firebase, GA, etc.) and data (no need to handle OAuth).
- ‚úÖ Programming language is JavaScript, which is easy to learn (V8 Runtime supports ES6+).
- ‚úÖ Quick to write, deploy, and use.
- ‚úÖ Stable and long-lasting service (has been available for over 16 years).
- **‚úÖ AI Can Help! Tested using ChatGPT for development assistance, achieving an accuracy rate of up to 95%.**

**Disadvantages of Google Apps Script:**
- ‚ùå Built-in version control is lacking.
- ‚ùå Built-in does not support file, data storage, or key/certificate management.
- ‚ùå Web App cannot achieve 100% responsive web design experience.
- ‚ùå Projects can only be tied to personal accounts, not organizations.
- ‚ùå Although Google continues to develop and maintain it, overall feature updates are slow.
- ‚ùå Network requests `UrlFetchApp` do not support setting User-Agent.
- ‚ùå Web App `doGet` / `doPost` do not support obtaining header information.
- ‚ùå FaaS [cold start issue](https://www.cloudflare.com/zh-tw/learning/serverless/what-is-serverless/){:target="_blank"}.
- ‚ùå **Does not support simultaneous development by multiple people.** 
However, this has little impact on the Web App; at most, you may have to wait a few extra seconds to enter the webpage.

The above are the pros and cons of GAS itself, which have little impact on building the packaging tool web. Choosing this solution compared to the Slack solution is faster, lighter, and easier to hand over. **The downside is that the team needs to know where the tool's URL is and how to use it, and due to the limited functionality of the GAS library** (e.g., no built-in encryption algorithm library), it can only serve as a pure relay platform, such as for submission, which can only forward submission requests to GitHub Actions.

> **_Additionally, it is only suitable for teams in a Google Workspace environment;_** _balancing resources and needs, we chose Google Apps Script ‚Äî Web App to implement the packaging tool platform._ 

#### UI Framework

[![](https://getbootstrap.com/docs/5.3/assets/brand/bootstrap-social.png)](https://getbootstrap.com/){:target="_blank"}

We directly used Bootstrap CDN; otherwise, setting up CSS styles would be too troublesome. Asking AI how to combine and use Bootstrap is also more accurate and convenient.
### Hands-On

The entire platform architecture has been open-sourced, and everyone can customize it based on their team's needs from this version.
#### Open Source Example Project

View the project directly on GAS:

[**Google Drive: Sign-in**](https://script.google.com/d/1CBB39OMedqP9Ro1WSlvgDnMBin4-ksyhgly2h_KrbOuFiPHTalNgwHOp/edit?usp=sharing){:target="_blank"} 
[_Access Google Drive with a Google account (for personal use) or Google Workspace account (for business use)._ script\.google\.com](https://script.google.com/d/1CBB39OMedqP9Ro1WSlvgDnMBin4-ksyhgly2h_KrbOuFiPHTalNgwHOp/edit?usp=sharing){:target="_blank"}

![](/assets/4273e57e7148/1*Xzh2eBpVR92uZq-8POPegw.png)

GitHub Repo Backup:

[![](https://opengraph.githubassets.com/befa012f606b0c698d302754d579bb035daf6658898a917c348509e8d0946f48/ZhgChgLi/google-apps-script-cd-web-app-demo)](https://github.com/ZhgChgLi/google-apps-script-cd-web-app-demo){:target="_blank"}

#### File Structure

![](/assets/4273e57e7148/1*ohVakhlaflRXCI_3j2-cOA.png)

![](/assets/4273e57e7148/1*AyIEF0wqEFdMDBuRzQXDEQ.png)

I wrote a very basic class-MVC structure; if you need to adjust or are unsure about functionalities, you can ask AI for accurate answers.

**System**
- appsscript\.json: Metadata configuration file for the GAS system.
**The key point is the "oauthScopes" variable, which declares the external permissions this script will use.**
- Entrypoint\.gs: Defines the entry point for doGet().

**Controller**
- Controller\_iOS\.gs: iOS packaging tool page controller, responsible for fetching data for the view to display.

**View**
- View\_index\.html: The entire packaging tool skeleton, homepage.
- View\_iOS\.html: iOS packaging tool page skeleton.
- View\_iOS\_Runs\.html: iOS packaging tool ‚Äî packaging record content page.
- View\_iOS\_Form\.html: iOS packaging tool ‚Äî packaging form page.
- View\_iOS\_Runners\.html: iOS packaging tool ‚Äî self-hosted runner status page.

**Model (Lib)**
- Credentials\.gs: Defines key content.
(‚ö†Ô∏èÔ∏èÔ∏è Please note, if GAS needs to go through GCP IAM, it can be quite complex, so we directly define the keys here. **Therefore, this GAS project will contain confidential information; please do not share project view/edit permissions casually.**)
- StubData\.gs: Stub methods and data for the online demo.
- Settings\.gs: Some common settings and lib initialization.
- GitHub\.gs: GitHub API operation encapsulation.
- Slack\.gs: Slack API operation encapsulation.
- Firebase\.gs: Firebase ‚Äî App Distribution API operation encapsulation.

#### Building Your Own Packaging Platform

1. Create a [Google Apps Script project](https://script.google.com/home){:target="_blank"} and name it.

![](/assets/4273e57e7148/1*_uVqy6cDNvFSEL0feOS-pw.png)

Go to project settings ‚Üí check "Show 'appsscript.json' manifest file in editor" to display the "appsscript.json" metadata file.

![](/assets/4273e57e7148/1*tvXsQufQs5-5UzV0bg5WLA.png)

2. Refer to my [open-source project files](https://script.google.com/home/projects/1CBB39OMedqP9Ro1WSlvgDnMBin4-ksyhgly2h_KrbOuFiPHTalNgwHOp/edit){:target="_blank"}, create all files according to the example, and copy the content over.

![](/assets/4273e57e7148/1*PxZvHNeW6PFaaqmZqifFfg.png)

> **_It's silly, but there's no other way; GAS does not support Git version control._** 

> _Copy StubData.gs over first; it can be used for the initial deployment test._ 

![](/assets/4273e57e7148/1*FLM2SGIhAI7Z7OWIJpeT9A.png)

After copying, it will look exactly like the example project.

3. Deploy the "Web App" for the first time to check the results.

![](/assets/4273e57e7148/1*KbWpaEinVZh6M8o8bCCl6A.png)

![](/assets/4273e57e7148/1*2RrwNxZVidodX6Kq037Yvw.png)

![](/assets/4273e57e7148/1*CZSIfASW4hmQeXwTS3x7Fg.png)

In the upper right corner of the project, click "Deploy" ‚Üí "New deployment" ‚Üí Type "Web App":

**Execution Identity:**
- I `always use your account identity to execute the script.`
- Users accessing the web app `will execute the script as the currently logged-in Google account user.`

**Who can access:**
- Only myself.
- **XXX All users in the same organization** `only users within the organization and logged-in Google accounts can access.`
- All logged-in Google account users `all logged-in Google account users can access.`
- Everyone `no need to log in to a Google account; everyone can access publicly.`

> _If it's an internal tool: you can choose " **Who can access: XXX All users in the same organization**" + "Execution identity: Users accessing the web app" for security control._ 

After completing the deployment, the "Web App" URL is your web app packaging tool URL, which you can share with team members for use. (The URL is quite ugly; you can use a URL shortening service to wrap it up, **updating the deployment content will not change the URL**.)
#### Users Need to Agree to Authorization on First Use

The first time you click the Web App URL, you need to agree to the authorization.

```markdown
![](/assets/4273e57e7148/1*lckRkGtc7EVqz9aTZaBIOw.png)

![](/assets/4273e57e7148/1*l1t290T_4xs1ly-RjjZXtg.png)

![](/assets/4273e57e7148/1*O9ItCSBNoBcuqepd-6ygCA.png)

- Review Permission ‚Üí Choose the account identity to use this Web App
- Unverified warning window, click "Advanced" to expand ‚Üí Click Go to "XXX" \(unsafe\)

![](/assets/4273e57e7148/1*cYloLsBROLbZDPIciYUm5g.png)

- Click "Allow"

> _After this, if the script permissions do not change, you do not need to reauthorize._

**After completing the authorization consent, you will enter the homepage of the packaging tool:**

![](/assets/4273e57e7148/1*vG5SsVFHPPDukc4ej0hqLA.png)

> Demo packaging tool deployed successfully üéâüéâüéâ

Note: "This application was created by a user of Google Apps Script" cannot be automatically hidden.

#### Update Deployment

> ‚ö†Ô∏è All code changes require an update deployment to take effect.

> ‚ö†Ô∏è All code changes require an update deployment to take effect.

> ‚ö†Ô∏è All code changes require an update deployment to take effect.

Please note that code changes saved will not directly affect the Web App, so if you find that refreshing has no effect, this is the reason; **You need to go to "Deploy" ‚Üí "Manage Deployments" ‚Üí "Edit" ‚Üí Version "Create New Version" ‚Üí Click "Deploy" ‚Üí "Done".**

![](/assets/4273e57e7148/1*VsfCEfwnPlx9RbQ8DtXpnA.png)

![](/assets/4273e57e7148/1*n62MVd6o8W3hUtQpfn9Q0w.png)

> _After updating the deployment, refreshing the webpage will show the changes taking effect._

#### Add Test Deployment for Development Convenience

![](/assets/4273e57e7148/1*4fLoW6jf8z1AIXvULW-AOA.png)

![](/assets/4273e57e7148/1*yvTxeaImQ4Mr7FwESsuf5A.png)

As mentioned earlier, all changes need to be updated in the deployment to take effect; this can be very cumbersome during the development phase, so we can use "Test Deployment" to quickly verify if the changes are correct.

**Go to "Deploy" ‚Üí "Test Deployment" ‚Üí Get the test "Web Application" URL.**

![](/assets/4273e57e7148/1*Rt0XEw9uAev58isLEnsoPA.png)

During the development phase, we can directly use this URL to save, and after saving the file changes, return to this development URL and refresh the webpage to see the results!

> **_Once development is complete, update the deployment as mentioned earlier to release it for user use._**

### Modify Demo Example Project to Connect Real Data

Next is the key point, connecting real data. The GitHub Actions Workflow refers to the [**CI/CD process established in the previous article**](../4b001d2e8440/), and you can adjust the parameters according to your actual Actions Workflow.

#### ‚ö†Ô∏è Please Note Before Modifying

The Google Apps Script platform does not support multi-user or even multiple window development very well. I personally encountered issues when I accidentally opened two editing windows; after editing in A, I later edited in B, causing the modifications to be overwritten by the old version in B. Therefore, **it is recommended that only one person edits the Script in one window at a time.**

#### GitHub Integration

**Input GitHub API Token:**

GitHub ‚Üí Account ‚Üí Settings ‚Üí Developer Settings ‚Üí Fine-grained personal access tokens or Personal access tokens \(classic\).

It is recommended to use Fine-grained personal access tokens for better security \(but they have an expiration\).

**The permissions required for Fine-grained personal access tokens are as follows:**

![](/assets/4273e57e7148/1*lCNQHwC4EMU4gNXYC-zs2A.png)

- Repo: Remember to select the Repo you want to operate on
- Permissions: `Actions (read/write)`, `Administration (read only)`

> _If you do not want to rely on someone's account, it is recommended to create a clean team GitHub account and use its Token._

Go to the GAS project ‚Üí `Credentials.gs` ‚Üí Input the Token into the `githubToken` variable.

**Replace GithubStub with GitHub:**

Go to the GAS project ‚Üí `Settings.gs` ‚Üí Change:
```javascript
const iOSGitHub = new GitHubStub(githubToken, iOSRepoPath);
```

**To**
```javascript
const iOSGitHub = new GitHub(githubToken, iOSRepoPath);
```

Save the file.

**Refresh the test "Web Application" URL to check if the changes are correct:**

![](/assets/4273e57e7148/1*30k1iDALT9WdupmuBiG2uQ.png)

> _If the data is displayed correctly, it means: **Successfully connected GitHub to real data** üéâüéâüéâ_

You can also easily switch to "Runner Status" to check if the Self-hosted Runner status is functioning properly:

![](/assets/4273e57e7148/1*K3yzISn5J7o1e1F5zhIQpg.png)

Note: My Runner is not running... so it is offline.

#### Slack Integration

To integrate Slack notifications, we first need to return to the Repo ‚Üí GitHub Actions and add a notification container Action for the packaging Action Workflow.

**CD-Deploy-Form.yml:**
```yaml
# Workflow(Action) name
name: CD-Deploy-Form

# Title name for Actions Log
run-name: "[CD-Deploy-Form] ${{ github.ref }}"

# If there is a new Job in the same Concurrency Group, it will cancel the running one
# For example, if the same branch's packaging task is triggered repeatedly, it will cancel the previous task
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

# Trigger events
on:
  # Manual form trigger
  workflow_dispatch:
    # Form Inputs fields
    inputs:
      # App version number
      VERSION_NUMBER:
        description: 'Version Number of the app (e.g., 1.0.0). Auto-detect from the Xcode project if left blank.'
        required: false
        type: string
      # App Build Number
      BUILD_NUMBER:
        description: 'Build number of the app (e.g., 1). Will use a timestamp if left blank.'
        required: false
        type: string
      # App Release Note
      RELEASE_NOTE:
        description: 'Release notes of the deployment.'
        required: false
        type: string
      # Triggerer's Slack User ID
      SLACK_USER_ID:
        description: 'Slack user id.'
        required: true
        type: string
      # Triggerer's Email
      AUTHOR:
        description: 'Trigger author email.'
        required: true
        type: string
        
# Job tasks
jobs:
  # Send Slack message when packaging starts
  # Job ID
  start-message:
    # Small jobs can run directly on GitHub Hosted Runner, not resource-intensive
    runs-on: ubuntu-latest
    
    # Set the maximum Timeout duration to prevent endless waiting in case of anomalies
    # Normally, it should not take more than 5 minutes
    timeout-minutes: 5

    # Job steps
    steps:
      - name: Post a Start Slack Message
        id: slack
        uses: slackapi/slack-github-action@v2.0.0
        with:
          method: chat.postMessage
          token: ${{ secrets.SLACK_BOT_TOKEN }}
          payload: |
            channel: ${{ inputs.SLACK_USER_ID }}
            text: "Received packaging request.\nID: <${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}|${{ github.run_id }}>\nBranch: ${{ github.ref_name }}\ncc'ed <@${{ inputs.SLACK_USER_ID }}>"
    # Job Output for subsequent Jobs to use
    # ts = Slack message ID, so subsequent notifications can Reply in the same Threads
    outputs:
      ts: ${{ steps.slack.outputs.ts }}

  deploy:
    # Jobs are executed concurrently by default, use needs to wait for start-message to complete before executing
    # Execute packaging deployment task
    needs: start-message
    uses: ./.github/workflows/CD-Deploy.yml
    secrets: inherit
    with:
      VERSION_NUMBER: ${{ inputs.VERSION_NUMBER }}
      BUILD_NUMBER: ${{ inputs.BUILD_NUMBER }}
      RELEASE_NOTE: ${{ inputs.RELEASE_NOTE }}
      AUTHOR: ${{ inputs.AUTHOR }}

  # Success message for packaging deployment task
  end-message-success:
    needs: [start-message, deploy]
    if: ${{ needs.deploy.result == 'success' }}
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Post a Success Slack Message
        uses: slackapi/slack-github-action@v2.0.0
        with:
          method: chat.postMessage
          token: ${{ secrets.SLACK_BOT_TOKEN }}
          payload: |
            channel: ${{ inputs.SLACK_USER_ID }}
            thread_ts: "${{ needs.start-message.outputs.ts }}"
            text: "‚úÖ Packaging deployment successful.\n\ncc'ed <@${{ inputs.SLACK_USER_ID }}>"

  # Failure message for packaging deployment task
  end-message-failure:
    needs: [deploy, start-message]
    if: ${{ needs.deploy.result == 'failure' }}
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Post a Failure Slack Message
        uses: slackapi/slack-github-action@v2.0.0
        with:
          method: chat.postMessage
          token: ${{ secrets.SLACK_BOT_TOKEN }}
          payload: |
            channel: ${{ inputs.SLACK_USER_ID }}
            thread_ts: "${{ needs.start-message.outputs.ts }}"
            text: "‚ùå Packaging deployment failed, please check the execution status or try again later.\n\ncc'ed <@${{ inputs.SLACK_USER_ID }}>"

  # Cancelled message for packaging deployment task
  end-message-cancelled:
    needs: [deploy, start-message]
    if: ${{ needs.deploy.result == 'cancelled' }}
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Post a Cancelled Slack Message
        uses: slackapi/slack-github-action@v2.0.0
        with:
          method: chat.postMessage
          token: ${{ secrets.SLACK_BOT_TOKEN }}
          payload: |
            channel: ${{ inputs.SLACK_USER_ID }}
            thread_ts: "${{ needs.start-message.outputs.ts }}"
            text: ":black_square_for_stop: Packaging deployment has been cancelled.\n\ncc'ed <@${{ inputs.SLACK_USER_ID }}>"
```

**Complete Code:** [CD-Deploy-Form.yml](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/CD-Deploy-Form.yml){:target="_blank"}

![](/assets/4273e57e7148/1*NatyC_Oid4BrKYk4nehuKA.png)

This Action is just a container for integrating Slack notifications, actually reusing the [CD-Deploy.yml](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/CD-Deploy.yml){:target="_blank"} Action written in the [previous article](../4b001d2e8440/).
- For creating Slack Bot App and setting message permissions, you can refer to my [previous article](../bd94cc88f9c9/).
- Remember to go to Repo ‚Üí Secrets to add the corresponding `SLACK_BOT_TOKEN` and input the Slack Bot App Token value.

Return to the GAS project ‚Üí `Credentials.gs` ‚Üí Input the Token into the `slackBotToken` variable.

Then go to the GAS project ‚Üí `Settings.gs` ‚Üí Change:
```javascript
const slack = new SlackStub(slackBotToken);
```

**To**
```javascript
const slack = new Slack(slackBotToken);
```

Save the file.

> _If you do not have an existing Slack Bot App to send notifications and do not want to create one, you can skip all these steps and remove any Slack-related usage in the GAS project._

#### GitHub Integration ‚Äî Packaging Form

Go to the GAS project ‚Üí `Controller_iOS.gs` ‚Üí Adjust the content of `View_iOS_Form.html`:
Remove the fake Asana Tasks integration method:
```php-template
      <? tasks.forEach(function(task) { ?>
      <option value="<?=task.githubBranch?>">[<?=task.id?>] <?=task.title?></option>
      <? }) ?>
```

You can also adjust the default branch here \(this is `main`\).

‚Äî

Go to the GAS project ‚Üí `Controller_iOS.gs` ‚Üí Adjust the content of `iOSLoadForm()`:
- Remove the line `template.tasks = Stubable.fetchStubAsanaTasks();` which is a fake integration method for Asana.
If you want to integrate Asana/Jira, you can directly ask ChatGPT to help generate the integration method.
- `template.prs = iOSGitHub.fetchOpenPRs();` is the actual integration with the GitHub API to get the Opened PR List, which can be retained as needed.

**Processing after submission** in the `iOSSubmitForm()` content:

You can adjust according to the actual GitHub Actions Workflow file name and `workflow_dispatch` input parameters:
```javascript
  iOSGitHub.dispatchWorkflow("CD-Deploy-Form.yml", branch, {
    "BUILD_NUMBER": buildNumber,
    "VERSION_NUMBER": versionNumber,
    "VERSION_NUMBER": versionNumber,
    "RELEASE_NOTE": releaseNote,
    "AUTHOR": email,
    "SLACK_USER_ID": slack.fetchUserID(email)
  });
```

You can also add your own required validation; here it only validates that the branch must be filled, otherwise, an error message will be shown.

If you think this is not secure enough, you can add password validation or restrict usage to special accounts.

> _The last line **Slack notification functionality requires proper Slack setup**. If you do not have a Slack Bot App or do not want to integrate Slack, you can directly use `iOSGitHub.dispatchWorkflow("CD-Deploy.yml")` in the [Demo Actions Repo](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions){:target="_blank"} and remove the `SLACK_USER_ID` parameter._

**Refresh the test "Web Application" URL to check if the changes are correct:**

![](/assets/4273e57e7148/1*OkJJrssZBcJPss_cMW-Qew.png)

You can see that the packaging form now only has the Opened PR List left.

**Fill in the data and click "Submit Request" to test the packaging form:**

![](/assets/4273e57e7148/1*dl-g3j6GH0AnYL8dqvSyYA.png)

**A successful submission prompt indicates no issues, and you can also see the task starting to execute in the packaging records _üéâ_:**

![](/assets/4273e57e7148/1*cByPF6T8WdXKionifRj1Ew.png)

> _Repeatedly clicking the packaging records can update the progress._

**Common submission errors:**

> `Required input ‚ÄòSLACK_USER_ID‚Äô not provided` _: This SLACK\_USER\_ID field is required in GitHub Actions, but it was not provided, which may be due to a failed Slack setup or the current User Email not finding the corresponding Slack UID._

> _`Workflow does not have ‚Äòworkflow_dispatch‚Äô trigger`, `Branch is outdated, please update xxx branch`: The selected branch cannot find the corresponding Action Workflow file \(the file specified in iOSGitHub\.dispatchWorkflow\)._

> _`No ref found for`, `Branch not found`: The specified branch cannot be found._

### Firebase App Distribution ‚Äî Obtain Download Link Integration

The last small feature is to integrate Firebase App Distribution to directly obtain download information and links, making it convenient to click and download the installation directly on mobile devices.

> _Previously introduced in " [Google Apps Script x Google APIs Quick Integration Method](../71400d408dc8/) ", GAS can quickly and painlessly integrate with Firebase._

#### **Integration Principle**

> **_Before integration, let me explain this "Tricky" integration principle._**

Our packaging platform does not have a database; it purely acts as an API relay station. Therefore, during the packaging operation in [**GitHub Actions CD-Deploy.yml**](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions/workflows/CD-Deploy.yml){:target="_blank"}, we pass the Job Run ID into the Release Note \(it can also be passed into the Build Number\):
```bash
ID="${{ github.run_id }}" // Job Run ID
COMMIT_SHA="${{ github.sha }}"
BRANCH_NAME="${{ github.ref_name }}"
AUTHOR="${{ env.AUTHOR }}"

# Combine Release Note
RELEASE_NOTE="${{ env.RELEASE_NOTE }}
ID: ${ID}
Commit SHA: ${COMMIT_SHA}
Branch: ${BRANCH_NAME}
Author: ${AUTHOR}
"

# Execute Fastlane packaging & deployment Lane
bundle exec fastlane beta release_notes:"${RELEASE_NOTE}" version_number:"${VERSION_NUMBER}" build_number:"${BUILD_NUMBER}"
```

This way, the Firebase App Distribution Release Notes will contain the Job Run ID.

The GAS Web App packaging tool platform will connect to the GitHub API to obtain the execution records of GitHub Actions, and we can directly use the API-provided Job Run ID to query the Firebase App Distribution API for versions that include `*ID: XXX*` in the Release Notes, allowing us to find the corresponding packaging records.

**No database is needed to achieve the correspondence between the two tool platforms.**
```

```markdown
![](/assets/4273e57e7148/1*AJRMWv_rqu64H0ZrY4q6QA.png)

![](/assets/4273e57e7148/1*Sdzt1MDXh7TNnMDkpc5uJg.png)

#### Project Setup for Integration

Go to GAS ‚Üí Project Settings ‚Üí Google Cloud Platform \(GCP\) Project ‚Üí Change Project:

![](/assets/4273e57e7148/1*klclBbiBQXNBzbzzj1jH0Q.png)

![](/assets/4273e57e7148/1*gv8m_v5O_yyUrq8uQoverQ.png)

Enter the Firebase project number you want to integrate.

![](/assets/4273e57e7148/1*OEaxA6SZWYbiVstOK60hQg.png)

> **_The initial setup may trigger an error_** _‚ÄúTo change the project, please set up the OAuth consent screen. Details for setting up the OAuth consent screen.‚Äù If you don't have this, you can skip the following steps._

**Click the ‚ÄúOAuth consent screen details‚Äù link ‚Üí Click ‚ÄúConfigure consent screen‚Äù:**

![](/assets/4273e57e7148/1*oiZeO5mEqH-D3tHrJsnE1A.png)

**Click ‚ÄúGet Started‚Äù:**

![](/assets/4273e57e7148/1*NK9RG0kaXoxJB5X-B8vhww.png)

**Application Information:**
- Application Name: `Enter your tool name`
- User Support Email: `Select email`

**Target Audience:**
- Internal: For use only by partners within the organization
- External: All Google account users can consent and use after authorization

**Contact Information:**
- Enter an email for receiving notifications

**Check the consent for the [Google API Services: User Data Policy](https://developers.google.com/terms/api-services-user-data-policy?hl=zh_TW){:target="_blank"} .**

Finally, click ‚Äú**Create**‚Äù.

‚Äî

Return to GAS ‚Üí Project Settings ‚Üí Google Cloud Platform \(GCP\) Project ‚Üí Change Project:

Re-enter the Firebase project number and click ‚ÄúChange Project‚Äù.

![](/assets/4273e57e7148/1*g-Lo04WjhaDjtXeXthNtDg.png)

**If no errors appear, the binding is complete.**

‚Äî

**If you selected ‚ÄúExternal,‚Äù you may need to complete the following settings:**

Click ‚ÄúProject Number‚Äù ‚Üí Expand the left sidebar ‚Üí ‚ÄúAPI & Services‚Äù ‚Üí ‚ÄúOAuth consent screen‚Äù

![](/assets/4273e57e7148/1*RJNQv8v3KZoTcVwUbsXSHQ.png)

Select ‚ÄúTarget Audience‚Äù ‚Üí Test Click ‚ÄúPublish App‚Äù ‚Üí Complete.

![](/assets/4273e57e7148/1*8vqrxhchsILPy4eSdvXfNg.png)

> _Users can complete the authorization following the previous step ‚Äú**Users need to consent for first-time use**‚Äù and start using it!_

**If the above steps are not set, users will encounter the following error:**

![Access blocked "XXX" did not complete the Google verification process](/assets/4273e57e7148/1*2omUPFoubsrXVLHBPFkPbg.png)

Access blocked "XXX" did not complete the Google verification process

‚Äî ‚Äî ‚Äî
#### Integration Project

Returning to the integration, Firebase directly uses `ScriptApp.getOAuthToken()` to dynamically obtain the Token based on the execution identity, so there is no need to set the Token.

You only need to go to the GAS project ‚Üí `Settings.gs` ‚Üí change:
```javascript
const iOSFirebase = new FirebaseStub(iOSFirebaseProject);
```

**to**
```javascript
const iOSFirebase = new Firebase(iOSFirebaseProject);
```

That's it.

**Refresh the test ‚ÄúWeb Application‚Äù URL to the build record ‚Üí Find a record and click ‚ÄúGet Download Link‚Äù:**

![](/assets/4273e57e7148/1*9z-KsIAL5jyEzQvJv3YLgg.png)

![](/assets/4273e57e7148/1*q0HUYN2W3UonQLzwxZKXdQ.png)

If you find the corresponding Job Run Id in the Firebase App Distribution Release Notes, it will directly display the download information and clicking download will take you to the download page.

> Done! üéâüéâüéâ 

### Results

![](/assets/4273e57e7148/1*znvPmqsaivk3KhsE26sFwA.png)

At this point, you have modified the examples into your actual usable packaging tool. The remaining custom features, more third-party API integrations, and additional forms can be extended on your own \(discuss with ChatGPT\).

> _Finally, don‚Äôt forget that once development and testing are complete, you need to follow the previous steps ‚Äî **update the deployment for it to take effect!**_

### Integration Extensions

Continuing with the spirit of our ‚Äúrelay station‚Äù role, here are a few quick integration CheatSheets:

[**Asana API ‚Äî Get Tasks:**](https://developers.asana.com/reference/gettasksforproject){:target="_blank"}
```javascript
function asanaAPI(endPoint, method = "GET", data = null) {
    var options = {
      "method" : method,
      "headers": {
          "Authorization":  "Bearer "+asanaToken
      },
      "payload" : data
    };

    var url = "https://app.asana.com/api/1.0"+endPoint;
    var res = UrlFetchApp.fetch(url, options);
    var data = JSON.parse(res.getContentText());
    return data;
}

asanaAPI("/projects/{project_gid}/tasks")
```

[**Jira API ‚Äî Get Tickets \(JQL\):**](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#about){:target="_blank"}
```javascript
// jql = filter criteria
function jiraTickets(jql) {
  const url = `https://xxx.atlassian.net/rest/api/3/search`;
  const maxResults = 100;

  let allIssues = [];
  let startAt = 0;
  let total = 0;

  do {
    const queryParams = {
      jql: jql,
      startAt: startAt,
      maxResults: maxResults,
      fields: "assignee,summary,status"
    };

    const queryString = Object.keys(queryParams)
      .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(queryParams[key])}`)
      .join("&");

    const options = {
      method: "get",
      headers: {
        Authorization: "Basic " + jiraToken,
        "Content-Type": "application/json",
      },
      muteHttpExceptions: true,
    };

    const response = UrlFetchApp.fetch(`${url}?${queryString}`, options);
    const json = JSON.parse(response.getContentText());
    if (response.getResponseCode() != 200) {
      throw new Error("Failed to fetch Jira issues."); 
    }

    if (json.issues && json.issues.length > 0) {
      allIssues = allIssues.concat(json.issues);
      total = json.total;
      startAt += json.issues.length;
    } else {
      break;
    }
  } while (startAt < total);

  var groupIssues = {};
  for(var i = 0; i < allIssues.length; i++) {
    const issue = allIssues[i];
    if (groupIssues[issue.fields.status.name] == null) {
      groupIssues[issue.fields.status.name] = [];
    }
    groupIssues[issue.fields.status.name].push(issue);
  }

  return groupIssues;
}

jiraTickets(`project IN(App)`);
```

**If you really need a database, you can use Google Sheets instead:**
```javascript
class Saveable {
  constructor(type) {
    // https://docs.google.com/spreadsheets/d/Sheet-ID/edit
    const spreadsheet = SpreadsheetApp.openById("Sheet-ID");
    this.sheet = spreadsheet.getSheetByName("Data"); // Sheet Name
    this.type = type;
  }

  write(key, value) {
    this.sheet.appendRow([
      this.type,
      key,
      JSON.stringify(value)
    ]);
  }

  read(key) {
    const data = this.sheet.getDataRange().getValues();
    const row = data.find(r => r[0] === this.type && r[1] === key);
    if (row) {
      return JSON.parse(row[2]);
    }
    return null;
  }
}

let saveable = Saveable("user");
// Write
saveable.write("birthday_zhgchgli", "0718");
// Read
saveable.read("birthday_zhgchgli"); // -> 0718
```

[**Slack API & Sending Messages:**](https://api.slack.com/methods/chat.postMessage){:target="_blank"}
```javascript
function slackSendMessage(channel, text = "", blocks = null) {
  const content = {
    channel: channel,
    unfurl_links: false,
    unfurl_media: false,
    text: text,
    blocks: blocks
  };

  try {
    const response = slackRequest("chat.postMessage", content);
    return response;
  } catch (error) {
    throw new Error(`Failed to send Slack message: ${error}`);
  }
}

function slackRequest(path, content) {
  const options = {
    method: "post",
    contentType: "application/json",
    headers: {
      Authorization: `Bearer ${slackBotToken}`,
      'X-Slack-No-Retry': 1
    },
    payload: JSON.stringify(content)
  };

  try {
    const response = UrlFetchApp.fetch("https://slack.com/api/"+path, options);
    const responseData = JSON.parse(response.getContentText());
    if (responseData.ok) {
      return responseData
    } else {
      throw new Error(`Slack: ${responseData.error}`);
    }
  } catch (error) {
    throw error;
  }
}
```
#### More Google Apps Script Examples:
- [Quick Integration Methods for Google Apps Script x Google APIs](../71400d408dc8/)
- [Simple 3 Steps ‚Äî Create a Free GA4 Automatic Data Notification Bot](../1e85b8df2348/)
- [Automate Daily Data Reports with Google Apps Script RPA](../f6713ba3fee3/)
- [Slack & ChatGPT Integration](../bd94cc88f9c9/)
- [Create a Free GitHub Repo Star Notifier in Three Steps with Google Apps Script](../382218e15697/)
- [Crashlytics + Google Analytics Automatic Query for App Crash-Free Users Rate](../793cb8f89b72/)
- [Crashlytics + Big Query for a More Real-Time Crash Tracking Tool](../e77b80cc6f89/)

### Summary

Thank you for your patience in reading and participating. This concludes the CI/CD series from 0 to 1; I hope it can genuinely assist you and your team in building a robust CI/CD workflow, enhancing efficiency and product stability. If you have any implementation questions, feel free to leave a comment for discussion. These four articles took about 14+ days to write, **if you found it helpful, please follow my Medium and share it with friends and colleagues**.

> Thank you.

#### Series Articles:
- [**CI/CD Practical Guide (1): What is CI/CD? How to Build a Stable and Efficient Development Team through CI/CD? Tool Selection?**](../c008a9e8ceca/)
- [**CI/CD Practical Guide (2): Comprehensive Use and Build of GitHub Actions and Self-Hosted Runners**](../404bd5c70040/)
- [**CI/CD Practical Guide (3): Implementing CI and CD Workflows for App Projects Using GitHub Actions**](../4b001d2e8440/)
- [**CI/CD Practical Guide (4): Using Google Apps Script Web App to Integrate GitHub Actions to Build a Free and Easy-to-Use Packaging Tool Platform**](../4273e57e7148/)

If you have any questions or suggestions, feel free to [contact me](https://www.zhgchg.li/contact){:target="_blank"}.

_[Post](https://dev.zhgchg.li/ci-cd-%E5%AF%A6%E6%88%B0%E6%8C%87%E5%8D%97-%E5%9B%9B-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E5%BB%BA%E7%BD%AE%E5%85%8D%E8%B2%BB%E6%98%93%E7%94%A8%E7%9A%84%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-4273e57e7148){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._
```