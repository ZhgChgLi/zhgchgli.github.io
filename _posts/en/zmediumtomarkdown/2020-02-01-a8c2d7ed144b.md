---
author: ZhgChgLi
categories:
- ZRealm Development
date: 2020-02-01T13:45:49.438+0000
description: Improve iOS app usability by expanding button tap areas using a custom
  pointInside method. Solve missed taps and boost user experience with precise touch
  target enlargement techniques.
image:
  path: /assets/a8c2d7ed144b/1*A4hoqSNLYhCUoJfRFrX9hw.jpeg
last_modified_at: 2024-04-13T08:07:41.671+0000
render_with_liquid: false
tags:
- iOS App Development
- Swift
- Attention to Detail
- UIKit
- iOS
title: iOS Button Tap Area Expansion｜Enhance User Interaction with Custom pointInside
  Override
---

### iOS Expand Button Tap Area

Rewrite pointInside to expand the touch area

In daily development, it's common to follow the design UI layout perfectly, making the interface look beautiful, but the actual button touch area is too small, making it hard to tap accurately; this is especially unfriendly for people with thick fingers.

![Completed Example Image](/assets/a8c2d7ed144b/1*A4hoqSNLYhCUoJfRFrX9hw.jpeg)

Completed sample image

### Before…

Regarding this issue, I didn't research it deeply at first. I simply overlaid a larger transparent UIButton on the original button and used this transparent button to handle events. This approach is very troublesome and hard to manage when there are many components.

Later, the issue was solved using layout. The button was set with top, bottom, left, and right constraints all at 0 (or less) during layout, then the `imageEdgeInsets`, `titleEdgeInsets`, and `contentEdgeInsets` were adjusted to position the icon/button title correctly according to the UI design. However, this approach is more suitable for projects using Storyboard/xib because you can directly adjust the layout in Interface Builder. Another point is that the designed icon should ideally have no extra spacing; otherwise, it becomes difficult to align properly. Sometimes it gets stuck at a 0.5 distance that can't be adjusted correctly.

### After…

As the saying goes, the more you see, the more you know. Recently, after working on a new project, I learned a neat trick: you can enlarge the touch area in UIButton's pointInside method. By default, it uses the UIButton's bounds, but you can extend the bounds inside to make the button's clickable area bigger!

#### After the above approach… we can:

```swift
class MyButton: UIButton {
    var touchEdgeInsets:UIEdgeInsets?
    override open func point(inside point: CGPoint, with event: UIEvent?) -> Bool {
        var frame = self.bounds
        
        if let touchEdgeInsets = self.touchEdgeInsets {
            frame = frame.inset(by: touchEdgeInsets)
        }
        
        return frame.contains(point);
    }
}
```

Customize a UIButton by adding a public property `touchEdgeInsets` to **store the expanded touch area** for convenience; then override the `pointInside` method to implement this idea.

#### Usage:

```swift
import UIKit

class MusicViewController: UIViewController {

    @IBOutlet weak var playerButton: MyButton!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        
        playerButton.touchEdgeInsets = UIEdgeInsets(top: -10, left: -10, bottom: -10, right: -10)
    }
    
}
```

![Play button / Blue is the original clickable area / Red is the expanded clickable area](/assets/a8c2d7ed144b/1*EvI5wmNos0TjGDrapnHLgg.png)

Play button / Blue is the original click area / Red is the expanded click range

When using, just remember to set the Button's Class to our custom MyButton, then you can expand the clickable area for each Button by setting `touchEdgeInsets`!

> *️⚠️⚠️⚠️⚠️️️️⚠️️️️*

> *When using Storyboard/xib, remember to set the `Custom Class` to MyButton*

> *⚠️⚠️⚠️⚠️⚠️*

> `touchEdgeInsets` *extends outward from (0,0) at the center, so the distances for top, bottom, left, and right should use **negative values** to expand.*

#### Looks good… but:

Replacing every UIButton with a custom MyButton is quite tedious and increases code complexity. It may even cause conflicts in large projects.

For this feature that we believe every UIButton should inherently have, if possible, we hope to directly extend the original UIButton through an Extension:

```swift
private var buttonTouchEdgeInsets: UIEdgeInsets?

extension UIButton {
    var touchEdgeInsets:UIEdgeInsets? {
        get {
            return objc_getAssociatedObject(self, &buttonTouchEdgeInsets) as? UIEdgeInsets
        }

        set {
            objc_setAssociatedObject(self,
                &buttonTouchEdgeInsets, newValue,
                .OBJC_ASSOCIATION_RETAIN_NONATOMIC)
        }
    }
    
    override open func point(inside point: CGPoint, with event: UIEvent?) -> Bool {
        var frame = self.bounds
        
        if let touchEdgeInsets = self.touchEdgeInsets {
            frame = frame.inset(by: touchEdgeInsets)
        }
        
        return frame.contains(point);
    }
}
```

Usage as shown in the example above.

Because Extensions cannot contain Properties, otherwise it will cause a compile error "Extensions must not contain stored properties," here we refer to [Using Property with Associated Object](https://swifter.tips/associated-object/){:target="_blank"} to associate the external variable `buttonTouchEdgeInsets` with our Extension, allowing it to be used like a regular Property. (For detailed principles, please refer to [Mao Da's article](https://swifter.tips/associated-object/){:target="_blank"})

#### UIImageView (UITapGestureRecognizer)?

For image taps, the tap gesture we added on the View;  
we can achieve the same effect by overriding UIImageView's pointInside.

> ***Done! After continuous improvements, solving this issue has become much simpler and more convenient!***

#### References:

[UIView Change Touch Area (Objective-C)](https://bqlin.github.io/iOS/UIView%20%E6%94%B9%E5%8F%98%E8%A7%A6%E6%91%B8%E8%8C%83%E5%9B%B4/){:target="_blank"}

### Postscript

Last year around the same time, I wanted to create a subcategory called "**Small Things Lead to Big Things**" to record daily trivial development tasks. These small tasks quietly accumulate and can significantly improve the app’s experience and code quality. However, [after a year](../6012b7b4f612/), I finally added another article &lt;( _ _ )&gt;. Small things are really easy to forget to record!

If you have any questions or feedback, feel free to [contact me](https://www.zhgchg.li/contact){:target="_blank"}.

*[Post](https://medium.com/zrealm-ios-dev/ios-%E6%93%B4%E5%A4%A7%E6%8C%89%E9%88%95%E9%BB%9E%E6%93%8A%E7%AF%84%E5%9C%8D-a8c2d7ed144b){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}.*