---
title: "Expanding Button Click Area in iOS"
author: "ZhgChgLi"
date: 2020-02-01T13:45:49.438+0000
last_modified_at: 2024-04-13T08:07:41.671+0000
categories: ["ZRealm Dev."]
tags: ["ios-app-development","swift","Small Matters Make Big Matters","uikit","ios"]
description: "Rewrite pointInside to expand the touch area"
image:
  path: /assets/a8c2d7ed144b/1*A4hoqSNLYhCUoJfRFrX9hw.jpeg
render_with_liquid: false
---

### Expanding Button Click Area in iOS

Rewrite pointInside to expand the touch area


In daily development, it is common to encounter a situation where the UI layout looks beautiful according to the design, but the actual touch area of the button is too small, making it difficult to click accurately; this is especially unfriendly for users with larger fingers.


![Completion Example Image](/assets/a8c2d7ed144b/1*A4hoqSNLYhCUoJfRFrX9hw.jpeg)

Completion Example Image
### Before…

Regarding this issue, I initially did not research it in depth and simply placed a larger transparent UIButton over the original button to respond to events, which was very cumbersome and difficult to manage with multiple components.

Later, I resolved it through layout adjustments by setting the button's alignment to 0 (or lower) on all sides during layout, and then controlling the `imageEdgeInsets`, `titleEdgeInsets`, and `contentEdgeInsets` parameters to push the icon/button title to the correct position in the UI design; however, this approach is more suitable for projects using Storyboard/xib, as it allows for direct layout adjustments in Interface Builder. Additionally, the designed icon should ideally have no extra spacing, otherwise it can be difficult to align, sometimes getting stuck at that 0.5 distance, making it hard to align correctly.
### After…

As the saying goes, the more you see, the more you know. Recently, after getting involved in a new project, I learned a small trick; that is, you can increase the event response area in UIButton's pointInside method. By default, it is the UIButton's bounds, and we can extend the size of the bounds to make the button's clickable area larger!
#### Based on the above idea… we can:
```swift
class MyButton: UIButton {
    var touchEdgeInsets:UIEdgeInsets?
    override open func point(inside point: CGPoint, with event: UIEvent?) -> Bool {
        var frame = self.bounds
        
        if let touchEdgeInsets = self.touchEdgeInsets {
            frame = frame.inset(by: touchEdgeInsets)
        }
        
        return frame.contains(point);
    }
}
```

We create a custom UIButton and add a public property `touchEdgeInsets` to **store the area to be expanded** for our convenience; then we override the pointInside method to implement the above idea.
#### Usage:
```swift
import UIKit

class MusicViewController: UIViewController {

    @IBOutlet weak var playerButton: MyButton!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        
        playerButton.touchEdgeInsets = UIEdgeInsets(top: -10, left: -10, bottom: -10, right: -10)
    }
    
}
```


![Play Button/Blue is the original click area/Red is the expanded click area](/assets/a8c2d7ed144b/1*EvI5wmNos0TjGDrapnHLgg.png)

Play Button/Blue is the original click area/Red is the expanded click area

When using it, just remember to set the Button's Class to our custom MyButton, and then you can expand the click area for individual Buttons by setting `touchEdgeInsets`!


> _️⚠️⚠️⚠️⚠️️️️⚠️️️️_

```markdown
> _When using Storyboard/xib, remember to set the `Custom Class` to MyButton_ 

> _⚠️⚠️⚠️⚠️⚠️_ 

> `touchEdgeInsets` _is centered at \(0,0\) and extends outward, so the distances for top, bottom, left, and right need to be **negative** to extend._ 

#### Looks good... but:

Replacing every UIButton with a custom MyButton can be quite cumbersome and increases the complexity of the code, and it may even cause conflicts in large projects.

For this functionality that we believe every UIButton should inherently possess, if possible, we hope to directly extend the original UIButton:
```swift
private var buttonTouchEdgeInsets: UIEdgeInsets?

extension UIButton {
    var touchEdgeInsets:UIEdgeInsets? {
        get {
            return objc_getAssociatedObject(self, &buttonTouchEdgeInsets) as? UIEdgeInsets
        }

        set {
            objc_setAssociatedObject(self,
                &buttonTouchEdgeInsets, newValue,
                .OBJC_ASSOCIATION_RETAIN_NONATOMIC)
        }
    }
    
    override open func point(inside point: CGPoint, with event: UIEvent?) -> Bool {
        var frame = self.bounds
        
        if let touchEdgeInsets = self.touchEdgeInsets {
            frame = frame.inset(by: touchEdgeInsets)
        }
        
        return frame.contains(point);
    }
}
```

Usage is as described in the previous example.

Since extensions cannot contain properties, otherwise it will result in a compilation error "Extensions must not contain stored properties," we referenced [Using Properties with Associated Objects](https://swifter.tips/associated-object/){:target="_blank"} to associate the external variable `buttonTouchEdgeInsets` with our extension, allowing it to be used like a property. \(For detailed principles, please refer to [the article by Cat](https://swifter.tips/associated-object/){:target="_blank"}\)

#### What about UIImageView (UITapGestureRecognizer)?

For image clicks, we can add tap gestures to the view;
similarly, we can achieve the same effect by overriding UIImageView's pointInside.

> **_Done! After continuous improvements, this issue has become much simpler and more convenient to address!_** 

#### References:

[UIView Change Touch Area (Objective-C)](https://bqlin.github.io/iOS/UIView%20%E6%94%B9%E5%8F%98%E8%A7%A6%E6%91%B8%E8%8C%83%E5%9B%B4/){:target="_blank"}

### Note

Around the same time last year, I wanted to start a small category called " **Small Matters Lead to Big Matters** " to record the trivialities of daily development, but these small matters accumulate quietly and can lead to significant improvements in both the experience and code of the entire APP; as a result, [I dragged it for a year](../6012b7b4f612/) before adding another article &lt;\( \_ \_ \)&gt;, small matters are really easy to forget to record!

If you have any questions or suggestions, feel free to [contact me](https://www.zhgchg.li/contact){:target="_blank"}.

_[Post](https://medium.com/zrealm-ios-dev/ios-%E6%93%B4%E5%A4%A7%E6%8C%89%E9%88%95%E9%BB%9E%E6%93%8A%E7%AF%84%E5%9C%8D-a8c2d7ed144b){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._
```

It seems there is no Markdown content provided for translation. Please provide the text you would like me to translate.
