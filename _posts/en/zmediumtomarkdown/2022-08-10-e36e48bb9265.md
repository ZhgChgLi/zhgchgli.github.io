---
title: "ZReviewTender — Free and Open Source App Reviews Monitoring Bot"
author: "ZhgChgLi"
date: 2022-08-10T11:56:05.731+0000
last_modified_at: 2024-09-26T12:48:18.465+0000
categories: ["ZRealm Dev."]
tags: ["ios-app-development","app-store","google-play","app-review","automation"]
description: "Real-time monitoring of the latest app reviews and immediate feedback to enhance collaboration efficiency and consumer satisfaction."
image:
  path: /assets/e36e48bb9265/1*DjHhZ7Yq-rE3LkFDiYW9lg.jpeg
render_with_liquid: false
---

### ZReviewTender — Free and Open Source App Reviews Monitoring Bot

Real-time monitoring of the latest app reviews and immediate feedback to enhance collaboration efficiency and consumer satisfaction.



![[ZhgChgLi](https://github.com/ZhgChgLi){:target="_blank"} / [ZReviewTender](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}](/assets/e36e48bb9265/1*DjHhZ7Yq-rE3LkFDiYW9lg.jpeg)

[ZhgChgLi](https://github.com/ZhgChgLi){:target="_blank"} / [ZReviewTender](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}
#### [ZhgChgLi](https://github.com/ZhgChgLi){:target="_blank"} / [ZReviewTender](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}


![App Reviews to Slack Channel](/assets/e36e48bb9265/1*wlGNbHopjPwFsP8j9LpKcw.jpeg)

App Reviews to Slack Channel

[**ZReviewTender**](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"} **—** Automatically monitors the latest user reviews for iOS/macOS apps on the App Store and Android apps on Google Play, providing continuous integration tools to integrate into team workflows, enhancing collaboration efficiency and consumer satisfaction.


[![](https://repository-images.githubusercontent.com/516425682/1cc1a829-d87d-4d4a-925b-60471b912b23)](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}

### Key Features
- Retrieve review lists for iOS/macOS apps on the App Store and Android apps on Google Play, filtering out the latest reviews that have not been crawled yet.
- \[Default Feature\] Forward the latest crawled reviews to Slack, with a clickable message timestamp link for quick access to the backend to respond to reviews.
- \[Default Feature\] Support automatic translation of reviews in non-specified languages or regions into your language using Google Translate API.
- \[Default Feature\] Support automatic logging of reviews to Google Sheets.
- Support flexible expansion; in addition to the included default features, you can develop and integrate necessary functions according to your team workflow, e.g., forwarding reviews to Discord, Line, Telegram…
- Use timestamps to record crawl locations to prevent duplicate reviews from being crawled.
- Support filtering options to specify which ratings, review content keywords, and regions/languages to crawl.
- Apple provides a stable and reliable source of App Store app review data based on the [**new App Store Connect API**](https://developer.apple.com/documentation/appstoreconnectapi/list_all_customer_reviews_for_an_app){:target="_blank"}, eliminating the unreliability of [previously using XML data or Fastlane Spaceship Session that required regular manual maintenance](../f1365e51902c/).
- Android also uses the official AndroidpublisherV3 API to fetch review data.
- Support deployment using GitHub Repo with GitHub Action, allowing you to quickly and freely create the ZReviewTender App Reviews bot.
- 100% Ruby @ [RubyGem](https://rubygems.org/gems/ZReviewTender){:target="_blank"}

### TL;DR \[2024/09/27\] Update


> [**_Organized quick deployment tutorial document, please refer to the latest article: \[Quick Start\! \] Github Action x ZReviewTender Free and Fast Deployment of Your App Store Review Monitoring Bot._**](../0095528cf875/) 




#### Comparison with Similar Services


![](/assets/e36e48bb9265/1*zarnSqZqa9Kgnq8T8JQL9Q.png)

#### App Reviews Workflow Integration Example \(in Pinkoi\)

**Problem:**


![](/assets/e36e48bb9265/1*ZULed1sGV4YzAAezw_fCaQ.png)


Reviews in the store are crucial for products, but they involve a lot of manual and repetitive communication.

Because one needs to manually check for new reviews from time to time, and if there are customer service issues, forward them to customer service for assistance, it becomes very repetitive and labor-intensive.


![](/assets/e36e48bb9265/1*Ptph8qaLqoTaNw9Fp7VTqw.png)


With the ZReviewTender review bot, reviews are automatically forwarded to a Slack Channel, allowing everyone to quickly receive the latest review information and discuss it in real-time; it also helps the entire team understand current user feedback and suggestions for the product.

For more information, please refer to: [2021 Pinkoi Tech Career Talk — Secrets of an Efficient Engineering Team](../11f6c8568154/) .
### Deployment — Using Only Default Features

If you only need the default features provided by ZReviewTender \(to Slack/Google Translate/Filter\), you can use the following quick deployment method.

ZReviewTender has been packaged and published to [RubyGems](https://rubygems.org/gems/ZReviewTender){:target="_blank"}, allowing you to easily install and use ZReviewTender via RubyGems.
#### \[Recommended\] Directly Use Github Repo Template for Deployment
- No need for any hosting space ✅
- No environmental requirements ✅
- No need to understand engineering principles ✅
- Deployment is complete once the config file is set up ✅
- Deployment can be completed in 8 steps ✅
- Completely free ✅
Github Action provides each account with 2,000\+ minutes/month of execution time, and running ZReviewTender to fetch reviews takes only about 15~30 seconds.
By default, it runs every 6 hours, 4 times a day, **consuming about 60 minutes of quota per month**.
Github Private Repos can be created without limits.


1\. Go to the ZReviewTender Template Repo: [**ZReviewTender\-deploy\-with\-github\-action**](https://github.com/ZhgChgLi/ZReviewTender-deploy-with-github-action){:target="_blank"}


![](/assets/e36e48bb9265/1*1pn3bxyBO0FoY4oIRvKCNg.png)


Click the "Use this template" button in the upper right corner.

2\. Create Repo


![](/assets/e36e48bb9265/1*YCBJJlSN4ZYjKMz7WBVIAQ.png)

- Repository name: Enter your desired Repo project name
- Access: **Private**



> ⚠️⚠️ Please ensure to create a **Private Repo** ⚠️⚠️
 

> **Because you will upload settings and private keys to the project** 





Finally, click the "Create repository from template" button at the bottom.

3\. Confirm that the Repo you created is a Private Repo


![](/assets/e36e48bb9265/1*1ZHF9CIOMV8S12Xw2P4B8g.png)


Confirm that the Repo name appears with a "🔒" and Private label in the upper right corner.

If not, it means you have created a **Public Repo, which is very risky**. Please go to the "Settings" tab above -&gt; "General" -&gt; bottom "Danger Zone" -&gt; "Change repository visibility" -&gt; "Make private" **to revert to a Private Repo**.

4\. Wait for Project Initialization to Succeed

You can check in the Readme on the Repo homepage


![](/assets/e36e48bb9265/1*aN9IkRx2BnAKFk8VW9ORVw.png)

```markdown
Check the Badge in the block view; if it shows passing, it means the init was successful.

Alternatively, click the "Actions" tab above -> wait for the "Init ZReviewTender" Workflow to complete:

![](/assets/e36e48bb9265/1*jThU3BbKvOT6nl51yklqtg.png)

The completion status will change to 3 "✅ Init ZReviewTender" -> Project init successful.

5. Confirm that the init files and directories have been correctly created

![](/assets/e36e48bb9265/1*XEh53SaAjDV9YVk4T41O5Q.png)

Click the "Code" tab above to return to the project directory. If the Project init is successful, the following will appear:
- Directory: `config/`
- File: `config/android.yml`
- File: `config/apple.yml`
- Directory: `latestCheckTimestamp/`
- File: `latestCheckTimestamp/.keep`

6. Complete the Configuration by setting up `android.yml` & `apple.yml`

Enter the `config/` directory to complete the configuration of the `android.yml` & `apple.yml` files.

![](/assets/e36e48bb9265/1*SiqBOk6BU38SRJAccC2hEg.png)

Click to enter the config YML file you want to edit and click the "✏️" in the upper right corner to edit the file.

Refer to the " **Settings** " section at the bottom of this article to complete the configuration of `android.yml` & `apple.yml`.

![](/assets/e36e48bb9265/1*QZ0wQTtbcoN9tgyElYgYAw.png)

After editing, you can directly save the settings in the "Commit changes" section below.

Upload the corresponding Key files to the `config/` directory:

![](/assets/e36e48bb9265/1*pAsWumPT57pLrY3Rn3UZhA.png)

In the `config/` directory, select "Add file" -> "Upload files" in the upper right corner.

![](/assets/e36e48bb9265/1*CUVQlxKrJjsZZfy3jQErww.png)

Upload the corresponding Keys and external file paths configured in the config yml to the `config/` directory by dragging the files into the "upper block" -> wait for the file upload to complete -> directly "Commit changes" below to save.

After the upload is complete, return to the `/config` directory to check if the files are correctly saved and uploaded.

![](/assets/e36e48bb9265/1*NyeoQzNvhnQJqoXvupnjgQ.png)

7. Initialize ZReviewTender (manually trigger to run once)

![](/assets/e36e48bb9265/1*4QTEqr_DeFndqoWuP7YLsQ.png)

Click the "Actions" tab above -> select "ZReviewTender" on the left -> choose "Run workflow" on the right -> click the "Run workflow" button to execute ZReviewTender once.

**After clicking, refresh the page** to see:

![](/assets/e36e48bb9265/1*_zTIiPyGsAejyH1BpggzhQ.png)

Click "ZReviewTender" to view the execution status.

![](/assets/e36e48bb9265/1*-Xso56jtpCVicp56w1y6sQ.png)

Expand the "`Run ZreviewTender -r`" section to view the execution log.

Here you can see an Error occurred because I have not yet configured my config yml files properly.

After adjusting the android/apple config yml, return to step 6 and trigger the execution again.

![](/assets/e36e48bb9265/1*SAiaDofDwiFI8Z3ndDGz2w.png)

Check the log in the "`ZReviewTender -r`" section to confirm successful execution!

![](/assets/e36e48bb9265/1*W5PHoBzHQxV1WQ82TrZqfA.png)

The Slack channel designated to receive the latest review messages will also show an init Success message 🎉

8. **Done!** 🎉 🎉 🎉

![](/assets/e36e48bb9265/1*8WcmenKeWSd92DjWeAQSGg.png)

Configuration is complete! From now on, it will automatically crawl the latest reviews every 6 hours and forward them to your Slack Channel!
```


You can check the latest execution status at the top of the Repo homepage Readme:


![](/assets/e36e48bb9265/1*sz4piAAAhOqEGP0EFbMmKg.png)


If an Error occurs, it indicates that there was an issue during execution. Please check the logs by going to Actions -> ZReviewTender; if there are unexpected errors, please [**create an Issue**](https://github.com/ZhgChgLi/ZReviewTender/issues){:target="_blank"} **with the log information, and we will fix it as soon as possible!**


> ❌❌❌ If an execution error occurs, GitHub will also send an email notification, so you don't have to worry about the bot failing without anyone noticing! 




#### Adjusting GitHub Action

You can also configure the GitHub Action execution rules according to your needs.

Click on the "Actions" tab above -> on the left "ZReviewTender" -> on the top right " `ZReviewTender.yml` "


![](/assets/e36e48bb9265/1*DnquiwKTgYY6R2ysNx8F1w.png)



![](/assets/e36e48bb9265/1*onoSoGPahBOaAsBo6Ou-3g.png)


Click on the top right "✏️" to edit the file.


![](/assets/e36e48bb9265/1*HY_f3zOivHGQv5tuwUyw8Q.png)


**There are two parameters available for adjustment:**

**cron** : Set how often to check for new reviews, the default is `15 */6 * * *`, which means it will run once every 6 hours at 15 minutes past the hour.


![](/assets/e36e48bb9265/1*cUGMHPmjlMRV_rRXItN4qg.png)


You can refer to [crontab\.guru](https://crontab.guru/#15_*/6_*_*_*){:target="_blank"} to configure according to your needs.


> **Please note:** 
 

> 1\. GitHub Action uses UTC time zone
 

> 2\. The higher the execution frequency, the more GitHub Action execution quota will be consumed 





**run** : Set the command to be executed, you can refer to the " **Execution** " section below, the default is `ZReviewTender -r`
- Default executes Android App & Apple (iOS/macOS App): `ZReviewTender -r`
- Only execute Android App: `ZReviewTender -g`
- Only execute Apple (iOS/macOS App): `ZReviewTender -a`


After editing, click on the top right "Start commit" and select "Commit changes" to save the settings.
#### Manually Trigger Execution of ZReviewTender

Refer to the previous section "6\. Initialize ZReviewTender (Manually trigger execution once)"
#### Installation Using Gem

If you are familiar with Gems, you can directly use the following command to install `ZReviewTender`
```bash
gem install ZReviewTender
```
#### Installation Using Gem (Not Familiar with Ruby/Gems)

If you are not familiar with Ruby or Gems, you can follow the steps below to install `ZReviewTender` step by step.
1. macOS comes with Ruby, but it is recommended to use [rbenv](https://github.com/rbenv/rbenv){:target="_blank"} or [rvm](https://rvm.io/){:target="_blank"} to install a new Ruby and manage Ruby versions (I use `2.6.5`)
2. Use [rbenv](https://github.com/rbenv/rbenv){:target="_blank"} or [rvm](https://rvm.io/){:target="_blank"} to install Ruby 2\.6\.5, and switch to the Ruby version managed by rbenv/rvm
3. Use `which ruby` to confirm that the current Ruby being used is **not** the system Ruby at `/usr/bin/ruby`
4. Once the Ruby environment is okay, use the following command to install `ZReviewTender`

```typescript
gem install ZReviewTender
```
### Deployment — Want to Expand Functionality
#### Manual
1. git clone [**ZReviewTender**](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"} Source Code
2. Confirm & improve the Ruby environment
3. Enter the directory and execute `bundle install` to install the related dependencies for [**ZReviewTender**](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}

Processor creation methods can refer to the content of the articles below.  
### Settings

[**ZReviewTender**](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"} — Use a yaml file to configure the Apple/Google review bot.

**\[Recommended\]** Directly use the execution command below the article — "Generate configuration file":
```bash
ZReviewTender -i
```

This will directly generate empty `apple.yml` & `android.yml` configuration files.  
#### Apple (iOS/macOS App)

Refer to the apple\.example\.yml file:


[![](https://repository-images.githubusercontent.com/516425682/1cc1a829-d87d-4d4a-925b-60471b912b23)](https://github.com/ZhgChgLi/ZReviewTender/blob/main/config/apple.example.yml){:target="_blank"}



> ⚠️ After downloading `apple.example.yml`, remember to rename the file to `apple.yml` 





apple\.yml:
```yaml
platform: 'apple'
appStoreConnectP8PrivateKeyFilePath: '' # APPLE STORE CONNECT API PRIVATE .p8 KEY File Path
appStoreConnectP8PrivateKeyID: '' # APPLE STORE CONNECT API PRIVATE KEY ID
appStoreConnectIssueID: '' # APPLE STORE CONNECT ISSUE ID
appID: '' # APP ID
...
```

**appStoreConnectIssueID:**


![](/assets/e36e48bb9265/1*FsgHMeCGLVbuetBC4gIP_w.png)

- App Store Connect \-&gt; Keys \-&gt; [App Store Connect API](https://appstoreconnect.apple.com/access/api){:target="_blank"}
- Issuer ID: `appStoreConnectIssueID`


**appStoreConnectP8PrivateKeyID & appStoreConnectP8PrivateKeyFilePath:**


![](/assets/e36e48bb9265/1*xBtkRFEKO2xHU26TMdXJZQ.png)

- Name: `ZReviewTender`
- Access: `App Manager`



![](/assets/e36e48bb9265/1*DvjiO3IkHEiPXp0M_dnnww.png)

- appStoreConnectP8PrivateKeyID: `Key ID`
- appStoreConnectP8PrivateKeyFilePath: `/AuthKey_XXXXXXXXXX.p8`, download the API Key, and place the file in the same directory as the config yml.


**appID:**


![](/assets/e36e48bb9265/1*Ov2pyW9anRVqNCpbxhHtJQ.png)


appID: [App Store Connect](https://appstoreconnect.apple.com/apps){:target="_blank"} \-&gt; App Store \-&gt; General \-&gt; App Information \-&gt; `Apple ID`  
#### GCP Service Account

The Google API services used by ZReviewTender (to fetch store reviews, Google Translate, Google Sheets) all use Service Account authentication.

You can first follow the [**official steps to create GCP & Service Account**](https://cloud.google.com/docs/authentication/production#create_service_account){:target="_blank"} to download and save the GCP Service Account identity permission key (`*.json`).  
- If you want to use the automatic translation feature, please ensure that GCP has enabled `Cloud Translation API` and that the Service Account being used has also been added.
- If you want to use the functionality to log to Google Sheets, please ensure that GCP has enabled `Google Sheets API`, `Google Drive API`, and that the Service Account being used has also been added.

```markdown
![](/assets/e36e48bb9265/1*VaVD2bdnbVwWCAuwhV90sA.png)

#### Google Play Console \(Android App\)

Refer to the android\.example\.yml file:


[![](https://repository-images.githubusercontent.com/516425682/1cc1a829-d87d-4d4a-925b-60471b912b23)](https://github.com/ZhgChgLi/ZReviewTender/blob/main/config/android.example.yml){:target="_blank"}



> ⚠️ After downloading `android.example.yml`, remember to rename the file to `android.yml` 





android\.yml:
```yaml
platform: 'android'
packageName: '' # Android App Package Name
keyFilePath: '' # Google Android Publisher API Credential .json File Path
playConsoleDeveloperAccountID: '' # Google Console Developer Account ID
playConsoleAppID: '' # Google Console App ID
......
```

**packageName:**


![](/assets/e36e48bb9265/1*XRzKNGhVbBef7Hl9XPcaWw.png)


packageName: `com.XXXXX` can be obtained from [Google Play Console](https://play.google.com/console/){:target="_blank"} \-&gt; Dashboard \-&gt; App

**playConsoleDeveloperAccountID & playConsoleAppID:**

Can be obtained from the URL of the [Google Play Console](https://play.google.com/console/){:target="_blank"} \-&gt; Dashboard \-&gt; App page:

[https://play\.google\.com/console/developers/ **playConsoleDeveloperAccountID** /app/ **playConsoleAppID** /app\-dashboard](https://play.google.com/console/developers/playConsoleDeveloperAccountID/app/playConsoleAppID/app-dashboard){:target="_blank"}

This will be used to combine review message links, allowing the team to quickly access the backend review response page via the link.

**keyFilePath:**

The most important information, GCP Service Account identity key \( `*.json` \)

You need to follow the steps in the [official documentation](https://developers.google.com/android-publisher/getting_started){:target="_blank"} to create a Google Cloud Project & Service Account, and complete the activation of `Google Play Android Developer API` in Google Play Console \-&gt; Setup \-&gt; API Access, linking the project, and then download the service account's JSON key from GCP.


![](/assets/e36e48bb9265/1*yQhAVOuF_CvM49Vayl40zA.png)



![](/assets/e36e48bb9265/1*-AKvlk9P6R0YkuZwsXJaLA.png)


**Example content of the JSON key is as follows:**

gcp\_key\.json:
```javascript
{
    "type": "service_account",
    "project_id": "XXXX",
    "private_key_id": "XXXX",
    "private_key": "-----BEGIN PRIVATE KEY-----\nXXXX\n-----END PRIVATE KEY-----\n",
    "client_email": "XXXX@XXXX.iam.gserviceaccount.com",
    "client_id": "XXXX",
    "auth_uri": "https://accounts.google.com/o/oauth2/auth",
    "token_uri": "https://oauth2.googleapis.com/token",
    "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
    "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/XXXX.iam.gserviceaccount.com"
}
```
- keyFilePath: `/gcp_key.json` key file path, place the file in the same directory as the config yml.
```

```yaml
processors:
    - FilterProcessor:
        class: "FilterProcessor"
        enable: true # enable
        keywordsInclude: [] # keywords you want to filter out
        ratingsInclude: [] # ratings you want to filter out
        territoriesInclude: [] # territories you want to filter out
    - GoogleTranslateProcessor: # Google Translate Processor, will translate review text to your language, you can remove whole block if you don't needed it.
        class: "GoogleTranslateProcessor"
        enable: false # enable
        googleTranslateAPIKeyFilePath: '' # Google Translate API Credential .json File Path
        googleTranslateTargetLang: 'zh-TW' # Translate to what Language
        googleTranslateTerritoriesExclude: ["TWN","CHN"] # Review origin Territory (language) that you don't want to translate.
    - SlackProcessor: # Slack Processor, resend App Review to Slack.
        class: "SlackProcessor"
        enable: true # enable
        slackTimeZoneOffset: "+08:00" # Review Created Date TimeZone
        slackAttachmentGroupByNumber: "1" # 1~100, how many review message in 1 slack message.
        slackBotToken: "" # Slack Bot Token, send slack message throught Slack Bot.
        slackBotTargetChannel: "" # Slack Bot Token, send slack message throught Slack Bot. (recommended, first priority)
        slackInCommingWebHookURL: "" # Slack In-Comming WebHook URL, Send slack message throught In-Comming WebHook, not recommended, deprecated.
    ...More Processors...
```

ZReviewTender comes with four processors, and the order of execution affects the data processing flow: FilterProcessor -> GoogleTranslateProcessor -> SlackProcessor -> GoogleSheetProcessor.

**FilterProcessor:**

Filters the reviews based on specified criteria, processing only those that meet the conditions.
- class: `FilterProcessor` No adjustment needed, points to lib/Processors/ `FilterProcessor` .rb
- enable: `true` / `false` Enable this Processor or Not
- keywordsInclude: \[“ `keyword1` ”,“ `keyword2` ”…\] Filter reviews that contain these keywords
- ratingsInclude: \[ `1` , `2` …\] 1~5 Filter reviews that include these rating scores
- territoriesInclude: \[“ `zh-hant` ”,” `TWN` ”…\] Filter reviews that include these regions (Apple) or languages (Android)

**GoogleTranslateProcessor:**


Translate the reviews into the specified language.
- class: `GoogleTranslateProcessor` No adjustment needed, points to lib/Processors/ `GoogleTranslateProcessor` \.rb
- enable: `true` / `false` Enable this Processor or Not
- googleTranslateAPIKeyFilePath: `/gcp_key.json` GCP Service Account identity permission key File Path `*.json`, place the file in the same directory as the config yml, sample content can refer to the above Google Play Console JSON key example.
(Please ensure that the service account of the JSON key has `Cloud Translation API` usage permissions)
- googleTranslateTargetLang: `zh-TW`, `en` … Target translation language
- googleTranslateTerritoriesExclude: \[“ `zh-hant` ”,” `TWN` ”…\] Regions (Apple) or languages (Android) that do not need translation


**SlackProcessor:**

Forward reviews to Slack.
- class: `SlackProcessor` No adjustment needed, points to lib/Processors/ `SlackProcessor` \.rb
- enable: `true` / `false` Enable this Processor or Not
- slackTimeZoneOffset: `+08:00` Review time display timezone
- slackAttachmentGroupByNumber: `1` Set how many Reviews to merge into the same message for faster sending; by default, 1 Review equals 1 Slack message.
- slackBotToken: `xoxb-xxxx-xxxx-xxxx` [Slack Bot Token](https://slack.com/help/articles/115005265703-Create-a-bot-for-your-workspace){:target="_blank"}, Slack recommends creating a Slack Bot with `postMessages` Scope and using it to send Slack messages
- slackBotTargetChannel: `CXXXXXX` Group ID ( **not group name**), which Channel group the Slack Bot will send to; and **you need to add your Slack Bot to that group**
- slackInCommingWebHookURL: `https://hooks.slack.com/services/XXXXX` Use the old [InComming WebHookURL](https://slack.com/apps/A0F7XDUAZ-incoming-webhooks){:target="_blank"} to send messages to Slack, note! Slack does not recommend continuing to use this method to send messages.



> Please note, this is a legacy custom integration — an outdated way for teams to integrate with Slack. These integrations lack newer features and they will be deprecated and possibly removed in the future. **We do not recommend their use.** Instead, we suggest that you check out their replacement: [Slack apps](https://api.slack.com/start){:target="_blank"}.



- slackBotToken and slackInCommingWebHookURL, SlackProcessor will preferentially choose to use slackBotToken



![](/assets/e36e48bb9265/1*D1kt_6jH0UaJo2kvf9l5Qw.png)



![](/assets/e36e48bb9265/1*UjE_LxtZ0adwS6tr2-vgbw.png)

### GoogleSheetProcessor

Record reviews to Google Sheet.
- class: `GoogleSheetProcessor` No adjustment needed, points to lib/Processors/ `SlackProcessor` \.rb
- enable: `true` / `false` Enable this Processor or Not
- googleSheetAPIKeyFilePath: `/gcp_key.json` GCP Service Account identity permission key File Path `*.json`, place the file in the same directory as the config yml, sample content can refer to the above Google Play Console JSON key example.
(Please ensure that the service account of the JSON key has `Google Sheets API`, `Google Drive API` usage permissions)
- googleSheetTimeZoneOffset: `+08:00` Review time display timezone
- googleSheetID: `Google Sheet ID` 
Can be obtained from the Google Sheet URL: https://docs\.google\.com/spreadsheets/d/ `googleSheetID` /
- googleSheetName: Sheet name, e.g. `Sheet1`
- keywordsInclude: \[“ `keyword1` ”,“ `keyword2` ”…\] Filter reviews that contain these keywords
- ratingsInclude: \[ `1` , `2` …\] Filter reviews that include these rating scores from 1 to 5
- territoriesInclude: \[“ `zh-hant` ”,” `TWN` ”…\] Filter reviews that include these regions (Apple) or languages (Android)
- values: \[ \] Combination of review information fields

```
%TITLE% Review Title
%BODY% Review Content
%RATING% Rating Score 1~5
%PLATFORM% Source Platform Apple or Android
%ID% Review ID
%USERNAME% Reviewer
%URL% Review Link
%TERRITORY% Review Region (Apple) or Review Language (Android)
%APPVERSION% App Version Being Reviewed
%CREATEDDATE% Review Creation Date
```

For example, my Google Sheet columns are as follows:
```
Rating Score, Review Title, Review Content, Review Information
```

Then the values can be set as:
```
values: ["%TITLE%","%BODY%","%RATING%","%PLATFORM% - %APPVERSION%"]
```
#### Custom Processor to Integrate Your Workflow

If you need a custom Processor, please switch to manual deployment, as the ZReviewTender on the gem is packaged and cannot be dynamically adjusted.

You can refer to [lib/Processors/ProcessorTemplate\.rb](https://github.com/ZhgChgLi/ZReviewTender/blob/main/lib/Processors/ProcessorTemplate.rb){:target="_blank"} to create your extension:
```ruby
$lib = File.expand_path('../lib', File.dirname(__FILE__))

require "Models/Review"
require "Models/Processor"
require "Helper"
require "ZLogger"

# Add to config.yml:
#
# processors:
#   - ProcessorTemplate:
#       class: "ProcessorTemplate"
#       parameter1: "value"
#       parameter2: "value"
#       parameter3: "value"
#       ...
#

class ProcessorTemplate < Processor

    def initialize(config, configFilePath, baseExecutePath)
        # init Processor
        # get parameter from config e.g. config["parameter1"]
        # configFilePath: file path of config file (apple.yml/android.yml)
        # baseExecutePath: user execute path
    end

    def processReviews(reviews, platform)
        if reviews.length < 1
            return reviews
        end

        ## do what you want to do with reviews...
        
        ## return result reviews
        return reviews
    end
end
```

**initialize will provide:**
- config Object: Corresponding to the settings in the config yml
- configFilePath: Path of the config yml file used
- baseExecutePath: The path where the user executes ZReviewTender


**processReviews\(reviews, platform\):**

After crawling new reviews, this function will be entered to allow the Processor to process, and please return the resulting Reviews.

The Review data structure is defined in lib/Models/ [Review\.rb](https://github.com/ZhgChgLi/ZReviewTender/blob/main/lib/Models/Review.rb){:target="_blank"}
#### Note

`XXXterritorXXX` **parameter:**
- Apple usage regions: TWM/JPN…
- Android usage languages: zh\-hant/en/…


**If a certain Processor is not needed:**
You can set `enable: false` or directly remove that Processor Config Block.

**Processors execution order can be adjusted according to your needs:**  
e.g. Execute Filter first, then translation, then Slack, and finally Log to Google Sheet…  
### Execution


> ⚠️ You can directly run `ZReviewTender` using Gem. If it's a manually deployed project, please use `bundle exec ruby bin/ZReviewTender` to execute. 




#### Generate configuration files:
```css
ZReviewTender -i
```

Generate apple.yml & android.yml from apple.example.yml & android.example.yml into the `config/` directory of the current execution path.  
#### Execute Apple & Android review scraping:
```bash
ZReviewTender -r
```
- By default, it reads the `apple.yml` & `android.yml` settings from `/config/`

#### Execute Apple & Android review scraping & specify configuration file directory:
```bash
ZReviewTender --run=configuration_directory
```
- By default, it reads the `apple.yml` & `android.yml` settings from `/config/`

#### Execute only Apple review scraping:
```bash
ZReviewTender -a
```
- By default, it reads the `apple.yml` settings from `/config/`

#### Execute only Apple review scraping & specify configuration file location:
```bash
ZReviewTender --apple=apple.yml_configuration_file_location
```
#### Execute only Android review scraping:
```bash
ZReviewTender -g
```
- By default, it reads the `android.yml` settings from `/config/`

#### Execute only Android review scraping & specify configuration file location:
```bash
ZReviewTender --googleAndroid=android.yml_configuration_file_location
```
#### Clear execution records and return to initial settings
```bash
ZReviewTender -d
```

This will delete the Timestamp log file in `/latestCheckTimestamp`, returning to the initial state. Running the scraper again will receive the init success message:


![](/assets/e36e48bb9265/1*8qVrSt1pXwNncPG_GEgm9A.png)

#### Current ZReviewTender version
```bash
ZReviewTender -v
```

Displays the current version number of ZReviewTender on [RubyGem](https://rubygems.org/gems/ZReviewTender){:target="_blank"}.  
#### Update ZReviewTender to the latest version (rubygem only)
```bash
ZReviewTender -n
```
#### First execution


![](/assets/e36e48bb9265/1*62VO8mbJWxXHSeFo3fEUog.png)


The first successful execution will send an initialization success message to the specified Slack Channel and generate `latestCheckTimestamp/Apple` and `latestCheckTimestamp/Android` files in the execution directory, recording the last scraped review Timestamp.


![](/assets/e36e48bb9265/1*U8vjWSHvY2RzUBcUbQoBvQ.png)


Additionally, an `execute.log` will be generated to record execution errors.


![](/assets/e36e48bb9265/1*TR8IMke6FC1ZktFOiXUWLw.png)

#### Set up a schedule for continuous execution

Set up a scheduled task ( [crontab](https://crontab.guru/){:target="_blank"} ) for continuous scraping of new reviews. ZReviewTender will scrape new reviews from the last scraped review Timestamp in `latestCheckTimestamp` to the current scraping time and update the Timestamp log file.

e.g. crontab: `15 */6 * * * ZReviewTender -r`

Additionally, please note that the Android API only provides queries for reviews added or modified in the last 7 days, so do not set the schedule period to exceed 7 days to avoid missing reviews.


![[https://developers\.google\.com/android\-publisher/reply\-to\-reviews\#retrieving\_a\_set\_of\_reviews](https://developers.google.com/android-publisher/reply-to-reviews#retrieving_a_set_of_reviews){:target="_blank"}](/assets/e36e48bb9265/0*4atedIT5pjLul10U.png)

```markdown
[https://developers\.google\.com/android\-publisher/reply\-to\-reviews\#retrieving\_a\_set\_of\_reviews](https://developers.google.com/android-publisher/reply-to-reviews#retrieving_a_set_of_reviews){:target="_blank"}
#### [Github Action Deployment](https://github.com/marketplace/actions/zreviewtender-app-reviews-automatic-bot){:target="_blank"}


![[ZReviewTender App Reviews Automatic Bot](https://github.com/marketplace/actions/zreviewtender-app-reviews-automatic-bot){:target="_blank"}](/assets/e36e48bb9265/1*uDsJPUqtiltvCsNBFDTz-w.png)

[ZReviewTender App Reviews Automatic Bot](https://github.com/marketplace/actions/zreviewtender-app-reviews-automatic-bot){:target="_blank"}
```yaml
name: ZReviewTender
on:
  workflow_dispatch:
  schedule:
    - cron: "15 */6 * * *" #Runs every six hours, refer to the above crontab for custom settings

jobs:
  ZReviewTender:
    runs-on: ubuntu-latest
    steps:
    - name: ZReviewTender Automatic Bot
      uses: ZhgChgLi/ZReviewTender@main
      with:
        command: '-r' #Executes Apple & iOS App review checks, refer to the above for other execution commands
```
### **⚠️️️️️ Warning Again!**

**Be sure that your configuration files and keys are not publicly accessible, as sensitive information may lead to unauthorized access to App/Slack permissions; the author is not responsible for any misuse.**

If any unexpected errors occur, please [**create an Issue**](https://github.com/ZhgChgLi/ZReviewTender/issues){:target="_blank"} **with the log information, and it will be fixed as soon as possible!**
### Done

The tutorial has ended, and now we will share some behind-the-scenes development secrets.

=========================
#### The War with App Reviews

I thought that last year's summary of [**AppStore APP’s Reviews Slack Bot**](../cb0c68c33994/) and the related technology used to implement [**ZReviewsBot — Slack App Review Notification Bot**](../33f6aabb744f/) had concluded the integration of the latest app reviews into the company's workflow; unexpectedly, Apple updated the App Store Connect API this year [here](../f1365e51902c/), allowing this matter to continue evolving.

The solution for fetching Apple iOS/macOS App reviews summarized last year:
- Public URL API (RSS) ⚠️: Cannot filter flexibly, provides limited information, has a quantity limit, and we occasionally encounter data inconsistency issues, making it very unstable; the official may deprecate it in the future.
- Using [**Fastlane**](https://fastlane.tools/){:target="_blank"} **— [SpaceShip](https://github.com/fastlane/fastlane/tree/master/spaceship){:target="_blank"}** to encapsulate complex web operations and session management, fetching review data from the App Store Connection backend (essentially simulating a web crawler to scrape data from the backend).

Following last year's approach, we could only use method two to achieve this, but the results were not perfect; sessions would expire, requiring manual updates regularly, and it could not be placed on a CI/CD Server, as the session would expire immediately if the IP changed.


![[important\-note\-about\-session\-duration](https://docs.fastlane.tools/best-practices/continuous-integration/#important-note-about-session-duration){:target="_blank"} by Fastlane](/assets/e36e48bb9265/1*N6B1H_PdtB4bNDrX4BIYRA.png)
```


[important\-note\-about\-session\-duration](https://docs.fastlane.tools/best-practices/continuous-integration/#important-note-about-session-duration){:target="_blank"} by Fastlane

After receiving the news that Apple [updated the App Store Connect API](../f1365e51902c/) this year, I immediately set out to redesign the new review bot. In addition to switching to the official API, I also optimized the previous architectural design and became more familiar with Ruby usage.
#### [App Store Connect API](../f1365e51902c/) Issues Encountered During Development
- The [List All Customer Reviews for an App](https://developer.apple.com/documentation/appstoreconnectapi/list_all_customer_reviews_for_an_app){:target="_blank"} endpoint does not provide app version information.

It's quite strange; the only workaround is to first call this endpoint to filter out the latest reviews, and then call the [List All App Store Versions for an App](https://developer.apple.com/documentation/appstoreconnectapi/list_all_app_store_versions_for_an_app){:target="_blank"} & [List All Customer Reviews for an App Store Version](https://developer.apple.com/documentation/appstoreconnectapi/list_all_customer_reviews_for_an_app_store_version){:target="_blank"} to combine the app version information.
#### AndroidpublisherV3 Issues Encountered During Development
- The API does not provide a method to retrieve all review lists; it only allows fetching reviews added/edited in the last 7 days.
- Similarly, using JWT to connect to the Google API (not relying on related libraries e.g. google\-apis\-androidpublisher\_v3)
- Here is an example of generating and using Google API JWT:

```ruby
require "jwt"
require "time"

payload = {
  iss: "The client_email field in the GCP API service account key (*.json) file",
  sub: "The client_email field in the GCP API service account key (*.json) file",
  scope: ["https://www.googleapis.com/auth/androidpublisher"]].join(' '),
  aud: "The token_uri field in the GCP API service account key (*.json) file",
  iat: Time.now.to_i,
  exp: Time.now.to_i + 60*20
}

rsa_private = OpenSSL::PKey::RSA.new("The private_key field in the GCP API service account key (*.json) file")
token = JWT.encode payload, rsa_private, 'RS256', header_fields = {kid:"The private_key_id field in the GCP API service account key (*.json) file", typ:"JWT"}

uri = URI("The token_uri field in the GCP API service account key (*.json) file")
https = Net::HTTP.new(uri.host, uri.port)
https.use_ssl = true
request = Net::HTTP::Post.new(uri)
request.body = "grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer&assertion=#{token}"

response = https.request(request).read_body

bearer = result["access_token"]

### use bearer token

uri = URI("https://androidpublisher.googleapis.com/androidpublisher/v3/applications/APP_PACKAGE_NAME/reviews")
https = Net::HTTP.new(uri.host, uri.port)
https.use_ssl = true
        
request = Net::HTTP::Get.new(uri)
request['Authorization'] = "Bearer #{bearer}";
        
response = https.request(request).read_body
        
result = JSON.parse(response)

# success!
```

```markdown
[![](https://repository-images.githubusercontent.com/516425682/1cc1a829-d87d-4d4a-925b-60471b912b23)](https://github.com/ZhgChgLi/ZReviewTender){:target="_blank"}

If you have any questions or suggestions, feel free to [contact me](https://www.zhgchg.li/contact){:target="_blank"}.

_[Post](https://medium.com/zrealm-ios-dev/zreviewtender-%E5%85%8D%E8%B2%BB%E9%96%8B%E6%BA%90%E7%9A%84-app-reviews-%E7%9B%A3%E6%8E%A7%E6%A9%9F%E5%99%A8%E4%BA%BA-e36e48bb9265){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._
```
