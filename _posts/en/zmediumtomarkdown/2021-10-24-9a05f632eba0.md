---
title: "The Evolution of iOS Privacy and Convenience"
author: "ZhgChgLi"
date: 2021-10-24T01:15:55.402+0000
last_modified_at: 2023-08-05T16:36:16.299+0000
categories: ["ZRealm Dev."]
tags: ["ios-app-development","privacy","private-relay","apple-privacy","mopcon"]
description: "Apple's privacy principles and the adjustments made to privacy protection features in iOS over the years"
image:
  path: /assets/9a05f632eba0/1*-XkH2H6A9f7U1ex6eCo5Lg.png
pin: true
render_with_liquid: false
---

### The Evolution of iOS Privacy and Convenience

Apple's privacy principles and the adjustments made to privacy protection features in iOS over the years

![Theme by [slidego](https://slidesgo.com/theme/cyber-security-business-plan#search-technology&position-3&results-12){:target="_blank"}](/assets/9a05f632eba0/1*-XkH2H6A9f7U1ex6eCo5Lg.png)

Theme by [slidego](https://slidesgo.com/theme/cyber-security-business-plan#search-technology&position-3&results-12){:target="_blank"}
### \[2023â€“08â€“01\] iOS 17 Update

An update on the latest privacy-related adjustments in iOS 17 following the previous presentation.
#### [Link Tracking Protection](https://www.apple.com/newsroom/2023/06/apple-announces-powerful-new-privacy-and-security-features/){:target="_blank"}

Safari will automatically remove tracking parameters from URLs \(e\.g\. `fbclid`, `gclid`, etc.\)
- Example: `https://zhgchg.li/post/1?gclid=124` will change to `https://zhgchg.li/post/1` after clicking.
- Currently testing iOS 17 Developer Beta 4, `fbxxx`, `gcxxx`, etc. will be removed, while `utm_` parameters are retained; it's uncertain if the final version of iOS 17 or future iOS 18 will enhance this further.
- To see the strictest effects, you can install the [iOS DuckDuckGo](https://apps.apple.com/tw/app/duckduckgo-private-browser/id663592361){:target="_blank"} browser for testing.
- For detailed testing information, please refer to the article "[iOS 17 Safari's new features will remove fbclid and gclid from URLs](https://blog.user.today/ios17-safari-remove-fbclid-and-gclid/){:target="_blank"}".

#### [Privacy Manifest \.xprivacy & Report](https://developer.apple.com/videos/play/wwdc2023/10060/?time=88){:target="_blank"}

Developers must include declarations of User Privacy used, **and also require SDKs in use to provide their Privacy Manifest.**

_\*Additionally, third-party SDK signatures have been added._

![](/assets/9a05f632eba0/1*A9PNsZ-BJCZpU-AcJph3qg.png)

XCode 15 can generate a Privacy Report through the Manifest for developers to set App privacy on the App Store.

![](/assets/9a05f632eba0/1*84WTDYR0cfrQP3a0e8jB4g.png)

#### [Required reason API](https://developer.apple.com/documentation/bundleresources/privacy_manifest_files/describing_use_of_required_reason_api){:target="_blank"}

To prevent potential misuse of certain Foundation APIs that could lead to fingerprinting, Apple has begun to regulate some Foundation APIs; [a declaration of the reason for use is required in the Manifest](https://developer.apple.com/cn/news/?id=z6fu1dcu){:target="_blank"}.

Currently, the most impacted API is UserDefaults, which must be declared.
```
Starting in Fall 2023, if you upload a new App or App update to App Store Connect that uses APIs requiring a reason for declaration (including content from third-party SDKs), and you do not provide an approved reason in the App's privacy manifest, you will receive a notification. Beginning in Spring 2024, to upload new Apps or App updates to App Store Connect, you must specify an approved reason in the App's privacy manifest that accurately reflects how your App uses the corresponding API.

If the current approved reasons do not cover a use case for an API requiring a declaration, and you believe this use case directly benefits your App users, please let us know.
```
#### [Tracking Domain](https://developer.apple.com/videos/play/wwdc2023/10060/?time=264){:target="_blank"}

The API Domain that sends tracking information must be declared in the privacy manifest \.xprivacy and can only initiate network requests after user consent for tracking; otherwise, all network requests to this Domain will be intercepted by the system.

![](/assets/9a05f632eba0/1*f849jUbgjLMPfdCnRVp2IA.png)

You can check if the Tracking Domain is being intercepted using XCode's Network tool:

![](/assets/9a05f632eba0/1*7j5UXZq_ZMt07IQ2wWZIBA.png)

Currently, Facebook and Google's Tracking Domains are detected and must be listed as Tracking Domains and permission requested.

![](/assets/9a05f632eba0/1*R4N7ofJfrDW6cmu2Q2Pdtw.png)

- [graph\.facebook\.com](https://graph.facebook.com/){:target="_blank"} : Facebook-related data statistics
- [app\-measurement\.com](https://app-measurement.com/){:target="_blank"} : Google-related data statistics: GA/Firebase, etc.

Therefore, please note that Facebook/Google data statistics may significantly decline after iOS 17, as not requesting permission or not allowing tracking will result in no data being received; based on past implementations, about 70% of users tend to click "do not allow."
- Developers' own API tracking methods also need to comply with the listed Tracking Domains.
- If the Tracking Domain is the same as the API Domain, a separate independent Tracking Domain must be created \(e\.g\. api\.zhgchg\.li \-&gt; tracking\.zhgchg\.li\).
- Currently, it is unclear how Apple will regulate developers' own Tracking; testing with XCode 15 showed no detection of their own.
- It is uncertain whether the official will use tools to detect behavior or if reviewers will manually check.

> Fingerprinting remains prohibited.

### Introduction

I am honored to participate in the [MOPCON presentation](https://mopcon.org/2021/schedule/2021028){:target="_blank"}, but due to the pandemic, it was changed to an online live format, which is quite regrettable as I couldn't meet more new friends; the topic of this presentation is "The Evolution of iOS Privacy and Convenience," mainly aimed at sharing Apple's principles regarding privacy and the functional adjustments made in iOS based on these principles over the years.

![[The Evolution of iOS Privacy and Convenience](https://mopcon.org/2021/schedule/2021028){:target="_blank"} \| [Pinkoi, We Are Hiring!](https://www.pinkoi.com/about/careers){:target="_blank"}](/assets/9a05f632eba0/1*gYucHdBa4tyd9lX5eyr08w.png)

[The Evolution of iOS Privacy and Convenience](https://mopcon.org/2021/schedule/2021028){:target="_blank"} \| [Pinkoi, We Are Hiring!](https://www.pinkoi.com/about/careers){:target="_blank"}

**I believe that developers or iPhone users should be familiar with the following functional adjustments over the past few years:**

![](/assets/9a05f632eba0/1*XyJpqYVWh1PNoMAzWtDnQQ.png)

- **iOS â‰¥ 13:** All Apps supporting third-party logins must implement Sign in with Apple; otherwise, they cannot be successfully listed on the App Store.
- **iOS â‰¥ 14:** Clipboard access warnings.
- **iOS â‰¥ 14.5:** IDFA must be allowed before access, effectively blocking IDFA.
- **iOS â‰¥ 15:** Private Relay, using a proxy to hide the user's original IP address.
- **iOS â‰¥ 16:** Clipboard access requires user authorization.
- â€¦ and many more, which I will share later in the article.

#### Why?

If you are unclear about Apple's privacy principles, you might wonder why Apple has been constantly at odds with developers and advertisers in recent years. Many features that people have become accustomed to have been blocked.

After reviewing the documents "[WWDC 2021 â€” Appleâ€™s privacy pillars in focus](https://developer.apple.com/videos/play/wwdc2021/10085/){:target="_blank"}" and "[Apple privacy white paper â€” A Day in the Life of Your Data](https://www.apple.com/privacy/docs/A_Day_in_the_Life_of_Your_Data.pdf){:target="_blank"}," it became clear that we have unknowingly leaked a lot of personal privacy and allowed advertisers or social media to profit immensely, reaching a point where it is pervasive in our daily lives.

Referring to the [Apple privacy white paper](https://www.apple.com/privacy/docs/A_Day_in_the_Life_of_Your_Data.pdf){:target="_blank"}, I will illustrate using a fictional character, Harry, to explain how privacy is leaked and the potential harms it may cause.

![First, Harry's usage records on his iPhone.](/assets/9a05f632eba0/1*f0F0ypi2F-6_yOTsBmynhg.png)

First, Harry's usage records on his iPhone.

**On the left is his web browsing history:** You can see that he visited websites related to cars, iPhone 13, and luxury goods.

**On the right are the installed Apps:** There are apps for investment, travel, social networking, shopping, and even a baby monitorâ€¦ these Apps.

![Harry's offline life](/assets/9a05f632eba0/1*u7PRvQK9fyu7iLLdZFvAyQ.png)

Harry's offline life

Offline activities leave records in places such as receipts, credit card transactions, dashcam footage, etc.
#### Combination

You might wonder how browsing different websites, installing different Apps \(even without logging in\), and participating in offline activities could possibly allow a service to connect all this data?

**The answer is: technically, it is possible, and it "may" or "has already" partially occurred.**

![](/assets/9a05f632eba0/1*t6OJvmXAMsurcn6XuDuGng.png)

As shown in the image:
- When not logged in, websites can identify the same browser across different sites using Third-Party Cookies, IP Address + device information to create a fingerprint.
- When logged in, websites can connect your data through registration information such as name, birthday, phone number, email, and ID number.
- Apps can identify the same user across different Apps by obtaining Device UUID, sniffing URL Schemes of other installed Apps, and using Pasteboard to transfer data between Apps; similarly, they can connect data using registration information after the user logs in.
- Apps and websites can also share data using Third-Party Cookies, fingerprints, and Pasteboard.
- The connection between online and offline activities may occur when banks collect credit card transaction records, budgeting Apps, receipt collection Apps, dashcam Apps, etc., all of which have the potential to link offline activities with online data.

> **_It has been proven that it is technically feasible; so who are the third parties hiding behind all these websites and Apps?_**

Companies like Facebook and Google generate significant revenue from personal advertising; many websites and Apps also integrate Facebook and Google SDKsâ€¦ so it's hard to say everything is visible; more often than not, we have no idea which third-party advertising or data collection services websites and Apps are using, secretly recording our every move.

**Assuming that all of Harry's activities are being quietly collected by the same third party, then in their eyes, Harry's profile might look like this:**

![](/assets/9a05f632eba0/1*V1q2Ju6ItSSy80NvScD16Q.png)

On the left are personal details, possibly from website registration data and delivery information; on the right are behavior and interest tags based on Harry's activity records.

![](/assets/9a05f632eba0/1*G71DeU1FmX75U2HGaDy-yg.png)

In their eyes, Harry might be understood better than he understands himself; this data can make users more addicted on social media; used in advertising, it can stimulate Harry to overspend or create a "birdcage effect" \(e\.g\. recommending new pants, after buying pants, he will buy suitable shoes to match, and after buying shoes, he will buy socksâ€¦ endlessly\).

**If you think the above is already frightening, there is something even scarier:**

![](/assets/9a05f632eba0/1*OctTSsyFfaZc1OdaBjLN5g.png)

Having your personal information and knowing your financial situationâ€¦ the potential for malicious actions is unimaginable, such as kidnapping or theftâ€¦
#### Current Privacy Protection Methods
- Legal regulations \(e\.g\. SGS-BS10012 personal data certification, CCPA, GDPR, etc.\)
- Privacy agreements, de-identification

Primarily, it relies on legal constraints; it is difficult to ensure that services comply 100% at all times, and there are many malicious programs online, making it hard to guarantee that services won't be hacked, leading to data breaches; in short, " **it is technically feasible to do evil, relying solely on regulations and corporate integrity is insufficient**."

Moreover, more often than not, we are "forced" to accept privacy terms, unable to authorize individual privacy; either we forgo the entire service or use it but accept all privacy terms; additionally, privacy terms are often opaque, leaving us unaware of how data will be collected and used, and we have no idea if a third party is secretly collecting our data without our knowledge.

Apple has also mentioned that the personal privacy of minors is often collected by services without the consent of guardians.
### Appleâ€™s Privacy Principles

Having understood the dangers of personal privacy leakage, let's take a look at Apple's privacy principles.

![](/assets/9a05f632eba0/1*3GymtGipI60YZ8qSogRk1A.png)

Excerpt from Apple Privacy White Paper: Apple's ideal is not to completely block but to find a balance; for example, many people have started using AD Block to completely block ads, which is not what Apple wants to see; because if everything is completely cut off, it becomes difficult to create better services.

Steve Jobs mentioned at the 2010 [All Things Digital Conference](https://money.cnn.com/2018/03/27/technology/steve-jobs-mark-zuckerberg-privacy-2010/index.html){:target="_blank"}:

> _I believe people are smart; some people are more willing to share data than others. Asking them every time will annoy them to the point where they tell you to stop asking; we should let them know precisely how their data will be used._ â€” translated by [Chun-Hsiu Liu](https://medium.com/u/72361fccaa43){:target="_blank"}

![](/assets/9a05f632eba0/1*i7LbId4pPABbu5GkUXZeHw.png)

> _Apple believes that privacy is a fundamental human right._

#### **Apple's Four Privacy Principles:**
- Data Minimization: Only collect the data you need.
- On-Device Processing: Apple, based on powerful processor chips, should execute personal privacy-related data locally unless necessary.
- User Transparency and Control: Allow users to understand what privacy information is collected and how it is used. Additionally, users should be able to control the sharing switches for individual privacy data.
- Security: Ensure the security of data storage and transmission.

### Historical Adjustments in iOS for Protecting Personal Privacy

Having understood the dangers of personal privacy leakage and Apple's privacy principles, let's return to the technical measures; we can look at the adjustments made in iOS over the years to protect personal privacy.
### Between Websites

As mentioned earlier,
#### **The first method can use Third-Party Cookies to connect visitor data across websites:**

> **_ðŸˆ², Safari has implemented Intelligent Tracking Prevention since iOS >= 11 \( [WebKit](https://webkit.org/blog/7675/intelligent-tracking-prevention/){:target="_blank"} \)_**

```markdown
---
default_enabled: true
---

By default, the browser actively identifies and blocks third-party cookies used for tracking and advertising. Each year, the iOS version continues to enhance its identification programs to prevent any oversights.

![](/assets/9a05f632eba0/1*qlan3n0rzMDRpKsCBXnfSQ.png)

The method of cross-site tracking users through third-party cookies is essentially no longer viable on Safari.
#### **The second method is to use IP Address + device information to calculate a fingerprint to identify the same browser across different websites:**

> **_ðŸˆ², iOS >= 15 Private Relay_**

Especially after third-party cookies were banned, more and more services have adopted this method, and Apple is aware of it... Fortunately, in iOS 15, even IP information is obfuscated!

![](/assets/9a05f632eba0/1*4xwPyZo24dZL_B6vuGwbMw.png)

The Private Relay service first randomly sends the user's original request to Apple's Ingress Proxy, which then randomly assigns it to a partner CDN's Egress Proxy, which then requests the target website.

The entire process is encrypted, only the chip in your iPhone can decrypt it, and only you know both your IP and the target website of the request; Apple's Ingress Proxy only knows your IP, the CDN's Egress Proxy only knows the IP of Apple's Ingress Proxy and the target website, and the website only knows the IP of the CDN's Egress Proxy.

From an application perspective, all devices in the same region will use the same shared CDN's Egress Proxy IP to request the target website; thus, the website can no longer use IP as fingerprint information.

For technical details, refer to â€œ[WWDC 2021 â€” Get ready for iCloud Private Relay](https://developer.apple.com/videos/play/wwdc2021/10096/){:target="_blank"}â€.
#### **Additional Information on Private Relay:**
- Apple/CDN Provider does not have complete logs for tracing:
I looked into how Apple prevents this from being used maliciously, but couldn't find an answer; it might be similar to how Apple won't help the FBI unlock a criminal's iPhone; privacy is a basic human right for everyone.
- Enabled by default, no special connection required
- Does not affect speed or performance
- **IP will be guaranteed to be in the same country and time zone** (users can choose a blurred city), cannot specify IP
- **Only effective for certain traffic**
iCloud+ users: All traffic on Safari + insecure HTTP requests in apps
General users: Only effective for third-party tracking tools installed on websites in Safari
- **Officially provides a [CDN Egress IP List](https://mask-api.icloud.com/egress-ip-ranges.csv){:target="_blank"} for website developers to identify (do not mistakenly block Egress IP, as it will cause collective harm)**
- [Network administrators can ban DNS to disable Private Relay for all connections](https://developer.apple.com/support/prepare-your-network-for-icloud-private-relay/){:target="_blank"}
- iPhone can disable Private Relay for specific network connections
- Private Relay will be disabled when connecting to VPNs or using proxies
- Currently still in beta (as of 2021/10/24), enabling it may cause some services to become inaccessible (in regions like China, or services like Douyin) or frequently log out

![Private Relay Test Image](/assets/9a05f632eba0/1*Abc_bFGsL-dUeUSVeAVBxg.jpeg)

Private Relay Test Image
- Image 1 Not Enabled: Original IP Address
- Image 2 Private Relay Enabled â€” General Location Maintained: IP changes to CDN IP but remains in Taipei
- Image 3 Private Relay Enabled â€” Country and Time Zone Used (Expanded Blur): IP changes to CDN IP & changes to Taichung, but still in the same time zone and country

![[Test Project](https://github.com/zhgchgli0718/PrivacyTest){:target="_blank"}](/assets/9a05f632eba0/1*ZDX3oYcoHwSh0Lkb1g1X_g.png)

[Test Project](https://github.com/zhgchgli0718/PrivacyTest){:target="_blank"}

Apps can use `URLSessionTaskMetrics` to analyze connection records of Private Relay.

![](/assets/9a05f632eba0/1*aMr5w1sZN-ewFEtcNxLcPA.png)

To digress, the method of obtaining fingerprints through IP addresses to identify users can no longer be used.
### Between Apps
#### **The first method was early access to Device UUID:**

> **_ðŸˆ², iOS >= 7 prohibits access to Device UUID,_**

> **_Use IdentifierForAdvertisers/IdentifierForVendor instead_**

![](/assets/9a05f632eba0/1*XYD2LWx6gZ5c-iEmm_G2pQ.png)

- **IDFV:** All apps under the same developer account can access the same UUID; [when paired with KeyChain, it is also a current method for identifying user UUID](../a4bc3bce7513/).
- **IDFA:** Different developers and different apps can access the same UUID, but IDFA users can reset or disable it.

> **_ðŸˆ², iOS >= 14.5 IdentifierForAdvertisers requires permission to use_**

![](/assets/9a05f632eba0/1*KCdE18ucjjUnwPzb7gpa5A.png)

After iOS 14.5, Apple strengthened the restrictions on accessing IDFA; apps must first ask users for permission to track before they can obtain the IDFA UUID; if not asked or not permitted, they cannot obtain the value.

Initial survey data indicates that about 70% of users (latest data suggests 90%) do not allow tracking to access IDFA, which is why people say IDFA is dead!

![[Test Project](https://github.com/zhgchgli0718/PrivacyTest){:target="_blank"}](/assets/9a05f632eba0/1*Dz-GYDKsdXQal_PausrHMA.png)

[Test Project](https://github.com/zhgchgli0718/PrivacyTest){:target="_blank"}
#### **The second method for communication between apps is URL Scheme:**

iOS apps can use `canOpenURL` to detect whether a specific app is installed on the user's phone.

> **_ðŸˆ², iOS >= 9 must be set in the app to use; cannot probe arbitrarily._**

![](/assets/9a05f632eba0/1*eapZObP6QN6-g_Z1Nd7hZA.png)

> **_iOS â‰¥ 15 introduces a restriction, allowing a maximum of 50 entries for other app schemes._**

> _`Apps linked on or after iOS 15 are limited to a maximum of 50 entries in the LSApplicationQueriesSchemes key.`_

### Between Websites and Apps

**As previously mentioned**
#### **The first method is also through cookies for connection:**

In earlier versions, iOS Safari's cookies and App WebView's cookies could communicate, allowing data to be linked between websites and apps.

The method involved stealthily embedding a 1-pixel WebView component in the app's interface to read Safari cookies.

> **_ðŸˆ², iOS >= 11 prohibits sharing cookies between Safari and App WebView_**

![](/assets/9a05f632eba0/1*sCY5ejSzJjNLDZucbsWV8w.png)

If there is a need to obtain Safari's cookies (e.g., logging in directly using website cookies), the `SFSafariViewController` component can be used; however, this component forces a prompt and cannot be customized, ensuring that users are not inadvertently having their cookies stolen.
#### **The second method is to identify the same browser across different websites using IP Address + device information to calculate a fingerprint:**

As mentioned earlier, iOS â‰¥ 15 has been obfuscated by Private Relay.
#### **The last and only remaining method â€” Pasteboard:**

Using the clipboard to connect cross-platform information, as Apple cannot disable clipboard use across apps, but it can prompt users.

> **_âš ï¸ iOS >= 14 introduces clipboard access warnings_**

![](/assets/9a05f632eba0/1*TdsFfW6axWx3nbB1Thaucw.png)

#### âš ï¸ 2022/07/22 Update: Upcoming Changes in iOS 16

Starting with iOS â‰¥ 16, when an app actively reads the clipboard without user-initiated paste actions, a prompt will appear, and users must press allow for the app to access clipboard information.

![[UIPasteBoardâ€™s privacy change in iOS 16](https://sarunw.com/posts/uipasteboard-privacy-change-ios16/){:target="_blank"}](/assets/9a05f632eba0/1*2LpAXuZduLStmS2tRVdcXQ.png)

[UIPasteBoardâ€™s privacy change in iOS 16](https://sarunw.com/posts/uipasteboard-privacy-change-ios16/){:target="_blank"}
#### **Implementing Deferred Deep Link using Pasteboard**

> **_I want to mention the privacy panic regarding the clipboard in iOS 14; for details, refer to my previous article â€œ[iOS 14 Clipboard Data Theft Panic, The Dilemma of Privacy and Convenience](../8a04443024e2/)â€_**

Although it cannot be ruled out that reading the clipboard is for data theft, more often, our app needs to provide a better user experience:

![](/assets/9a05f632eba0/1*lZMyzL6Pmy06lng8PWMk0w.png)

Before implementing Deferred Deep Link, when we guide users to install the app from the website, upon completion, the app would default to opening the homepage; a better user experience should be to open the app to the corresponding page where the user left off on the website.

To achieve this functionality, there needs to be an opportunity to link data between the website and the app, as other methods mentioned earlier have been banned, and currently, the clipboard is the only medium for storing information (as shown in the image above).

![](/assets/9a05f632eba0/1*jVytiPiHhaubihaHSDYBNA.png)

Including Firebase Dynamic Links and the latest version of Branch.io (which previously used IP Address Fingerprint) also utilize the clipboard for Deferred Deep Link.

For implementation, refer to my previous article: [iOS Deferred Deep Link Implementation (Swift)](../b08ef940c196/)

> _Generally, if the goal is to achieve Deferred Deep Link, the clipboard information will only be read the first time the app is opened or when returning to the app; it will not be read during use or at odd times, which is worth noting._

A better approach is to first use `UIPasteboard.general.detectPatterns` to check if the clipboard data is what we need before reading it.

![[Test Project](https://github.com/zhgchgli0718/PrivacyTest){:target="_blank"}](/assets/9a05f632eba0/1*7Kyfq0LT1mkPAFxwkmpMRQ.png)

[Test Project](https://github.com/zhgchgli0718/PrivacyTest){:target="_blank"}

After iOS â‰¥ 15, clipboard prompts have been optimized; if it is the user's own paste action, no prompt will appear!
### Advertising Effectiveness Solutions

As previously mentioned, Apple's privacy principles aim for balance rather than completely blocking user-service interactions.
#### **Advertising effectiveness statistics between websites:**

Relative to blocking Intelligent Tracking Prevention features on Safari, there is Private Click Measurement ([WebKit](https://webkit.org/blog/11529/introducing-private-click-measurement-pcm/){:target="_blank"}) used to measure advertising effectiveness without compromising personal privacy.

![](/assets/9a05f632eba0/1*a9DibQQDW9QgiPxt3Y--SQ.png)

The specific process is illustrated in the image above; when a user clicks an ad on website A to go to website B, a Source ID (to identify the same user) and Destination information (target website) will be recorded in the browser; when the user completes a conversion on website B, a Trigger ID (representing what action) will also be recorded in the browser.

![](/assets/9a05f632eba0/1*n2PwE4AMOPAqvTI-FcNdRQ.png)

These two pieces of information will be combined and sent to websites A and B after a random period of 24 to 48 hours to measure advertising effectiveness.

Everything is handled on-device by Safari, and protection against malicious clicks is also provided by Safari.
#### **Advertising effectiveness statistics between apps and websites or apps:**

![](/assets/9a05f632eba0/1*jUObXccBCf4dB7ZU_yn-EQ.png)

You can use [SKAdNetwork](https://developer.apple.com/documentation/storekit/skadnetwork){:target="_blank"} (requires application to Apple for inclusion) in a manner similar to Private Click Measurement, which will not be elaborated further.

> _It is worth mentioning that Apple is not working in isolation; [SKAdNetwork](https://developer.apple.com/documentation/storekit/skadnetwork){:target="_blank"} is currently at version 2.0, and Apple continues to gather developer and advertiser needs while balancing personal privacy controls and optimizing SDK functionality._

> _I sincerely hope that Deferred Deep Link can be integrated using SDK, as we aim to enhance user experience without infringing on personal privacy._

For technical details, refer to â€œ[WWDC 2021 â€” Meet privacy-preserving ad attribution](https://developer.apple.com/videos/play/wwdc2021/10033/){:target="_blank"}â€.
### Cross-Platform

![](/assets/9a05f632eba0/1*fWuWfmUzOZ2w2iI1FrzwRA.png)

> **_iOS â‰¥ 13 requires all apps supporting third-party logins to implement Sign in with Apple, or they will not be successfully listed on the App Store_**

- Name can be edited by the user
- Real email can be hidden (using a virtual email generated by Apple instead)
- Users can request account deletion [**by 2022/01/31, apps must complete implementation**](https://developer.apple.com/news/?id=mdkbobfo){:target="_blank"} ðŸ†•

![](/assets/9a05f632eba0/1*AzjnZmNm6eqG72bVw8iKag.png)

> **_iOS >= 15 iCloud+ users support Hide My Email_**

- Supports all email fields in Safari and apps
- Users can generate virtual email addresses at will in settings

Similar to Sign in with Apple, using a virtual email generated by Apple instead of a real email, when receiving emails, Apple will forward them to your real email, thus protecting your email information.

It is like a 10-minute email but even more powerful; as long as you keep using it, that virtual email address is permanently yours; there is no limit on new additions, and you can add as many as you want, though it is unclear how Apple prevents abuse.

![](/assets/9a05f632eba0/1*g9-kZBAG13Hx1bq196j8Qg.jpeg)

![](/assets/9a05f632eba0/1*TD7XRAexz8SOJylrVyQUHw.png)

![Settings -> Apple ID -> Hide My Email](/assets/9a05f632eba0/1*U2MC_Qp1ZwvJkVHuZ2zcpA.png)

Settings -> Apple ID -> Hide My Email
### Others
#### **App privacy details on the App Store:**

![](/assets/9a05f632eba0/1*oWsbWGst_MP-J0OMplxskQ.jpeg)

> [_Apps must explain to users what data will be tracked and how it will be used on the App Store_](https://developer.apple.com/app-store/user-privacy-and-data-use/){:target="_blank"} _.

Detailed explanations can be found in: â€œ[App privacy details on the App Store](https://developer.apple.com/app-store/app-privacy-details/){:target="_blank"}â€.
#### **Fine control over personal privacy data:**

![](/assets/9a05f632eba0/1*qZF5DvQx6RTIggWS7Be4Bw.png)

> _Starting with iOS â‰¥ 14, location and photo access can be controlled more finely, allowing authorization for only certain photos or only allowing location access while the app is in use._

![[Test Project](https://github.com/zhgchgli0718/PrivacyTest){:target="_blank"}](/assets/9a05f632eba0/1*Y95go0uE0DC5lqAAJ9N96Q.png)

[Test Project](https://github.com/zhgchgli0718/PrivacyTest){:target="_blank"}

> _In iOS â‰¥ 15, the [CLLocationButton](https://developer.apple.com/documentation/corelocationui/cllocationbutton){:target="_blank"} button was added to enhance user experience, allowing access to the current location through user clicks without prior inquiry or consent; this button cannot be customized and can only be triggered by user action._
```

#### **Personal Privacy Access Prompt:**


![](/assets/9a05f632eba0/1*XP5mELBBaaUMI8IixwUCcg.png)



> _iOS â‰¥ 15 introduces prompts for accessing personal privacy features, such as: clipboard, location, camera, microphone_ 




#### **App Privacy Access Report:**


> _iOS â‰¥ 15 allows you to export a report of all privacy-related access and network activity for all apps on your phone over the past 7 days._ 




1. Since the report file is a `.ndjson` plain text file, it is not easy to view directly; you can first download the "[Privacy Insights](https://apps.apple.com/tw/app/%E9%9A%B1%E7%A7%98%E6%B4%9E%E8%A6%8B-app-privacy-insights/id1575583991){:target="_blank"}" app from the App Store to view the report.
2. Go to Settings -> Privacy -> Scroll down to "Record App Activity" -> Enable Record App Activity.
3. Save App Activity.
4. Choose "Import to [Privacy Insights](https://apps.apple.com/tw/app/%E9%9A%B1%E7%A7%98%E6%B4%9E%E8%A6%8B-app-privacy-insights/id1575583991){:target="_blank"}."
5. After the import is complete, you can view the privacy report.



![](/assets/9a05f632eba0/1*7o4UN1Jv-zKjNRU9TKASiQ.png)



![](/assets/9a05f632eba0/1*rshLnUlppBj1OF5mvTZZHw.png)



![](/assets/9a05f632eba0/1*ZRL7V1Hxu7r__bljiohpEw.png)


As mentioned in the [news](https://technews.tw/2021/10/12/china-app-reads-iphone-user-album-data/){:target="_blank"}, WeChat indeed reads photo information in the background when the app is launched.


> **_Additionally, I have caught several other Chinese apps doing the same, so I have disabled all their permissions in settings._** 
 

> **_If it weren't for this feature exposing their actions, we wouldn't know how long our data has been at risk of theft!_** 




### Recap
#### Appleâ€™s Privacy Principles


![](/assets/9a05f632eba0/1*YUtG3sEQMvu8433VD5j8WA.png)


After understanding the adjustments made to privacy features over the years, let's revisit Apple's privacy principles:
- Data Minimization: Apple uses technical means to limit the data accessed.
- On-Device Processing: Privacy data is not uploaded to the cloud; everything is processed locally. For example, Safari Private Click Measurement, Apple's [Machine Learning SDK CoreML](../793bf2cdda0f/) also runs locally, as do Siri/camera live text features, Apple Maps, News, photo recognition features, etc.
- User Transparency and Control: New privacy access prompts, record reports, and fine control features.
- Security: Ensuring the security of data storage and transmission, avoiding misuse of UserDefaults, and iOS 15 allows direct use of CryptoKit for point-to-point encryption and decryption, ensuring the security of Private Relay transmission.

#### Fragmented Data


![](/assets/9a05f632eba0/1*H0dYwwbNMT08_REzs4SUBg.png)


Returning to the initial technical means used to piece together Harry's association map, connections between websites or apps are blocked, leaving only the clipboard usable, but with prompts.

For service registration and third-party login personal data, you can use Sign in with Apple and the hide my email feature to block access; or use more native iOS apps.

For offline activities, perhaps using Apple Card can prevent privacy leaks?


> **_No one will have the opportunity to piece together Harry's activity profile anymore._** 




#### Apple is Human-Centric


![](/assets/9a05f632eba0/1*5LLnXt2Glp7de_vdouufnQ.png)


Thus, "human-centric" is the term I would use to describe Apple's philosophy. It takes a strong belief to go against the commercial market; related to this, "technology-centric" is what I would use to describe Google, as they always manage to create many geeky tech projects; finally, "business-centric" is what I would use to describe Facebook, as FB pursues commercial profit on many levels.


![](/assets/9a05f632eba0/1*lpYyN-yGAS86YRVYlzh5Ig.png)


In addition to adjustments to privacy features, iOS has also continuously strengthened features to prevent smartphone addiction over the years, introducing "Screen Time Reports," "App Usage Limits," "Focus Mode," and more; helping everyone break free from smartphone addiction.
### Finally, I hope everyone can
- **Value personal privacy**
- **Not be controlled by capital**
- **Reduce virtual addiction**
- **Prevent societal decline**



> **_Live a wonderful life in the real world!_** 



#### Private Relay/IDFA/Pasteboard/Location Testing Project:


[![](https://opengraph.githubassets.com/eb3ecca5e67740485a43fc93d06fd6551fd620c8418f40dde5b35876a2de63dc/zhgchgli0718/PrivacyTest)](https://github.com/zhgchgli0718/PrivacyTest){:target="_blank"}

#### References
- [WWDC 2021 â€” Appleâ€™s privacy pillars in focus](https://developer.apple.com/videos/play/wwdc2021/10085/){:target="_blank"}
- [Apple privacy white paper â€” A Day in the Life of Your Data](https://www.apple.com/privacy/docs/A_Day_in_the_Life_of_Your_Data.pdf){:target="_blank"}
- [WWDC 2021 â€” Get ready for iCloud Private Relay](https://developer.apple.com/videos/play/wwdc2021/10096/){:target="_blank"}
- [WWDC 2021 â€” Meet privacy-preserving ad attribution](https://developer.apple.com/videos/play/wwdc2021/10033/){:target="_blank"}
- [**iOS 14 Clipboard Data Theft Panic, The Dilemma of Privacy and Convenience**](../8a04443024e2/)
- [iOS Deferred Deep Link Implementation (Swift)](../b08ef940c196/)
- [iOS UUID Matters (Swift/iOS â‰¥ 6)](../a4bc3bce7513/)



If you have any questions or suggestions, feel free to [contact me](https://www.zhgchg.li/contact){:target="_blank"}.



_[Post](https://medium.com/zrealm-ios-dev/ios-%E9%9A%B1%E7%A7%98%E8%88%87%E4%BE%BF%E5%88%A9%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F-9a05f632eba0){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._