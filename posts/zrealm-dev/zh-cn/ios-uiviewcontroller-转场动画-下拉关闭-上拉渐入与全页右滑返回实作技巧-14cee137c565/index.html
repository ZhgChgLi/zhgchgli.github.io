<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="iOS UIViewController è½¬åœºåŠ¨ç”»ï½œä¸‹æ‹‰å…³é—­ã€ä¸Šæ‹‰æ¸å…¥ä¸å…¨é¡µå³æ»‘è¿”å›å®ä½œæŠ€å·§" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="æ·±å…¥è§£æ iOS UIViewController è½¬åœºåŠ¨ç”»ï¼Œè§£å†³ä¸‹æ‹‰å…³é—­ã€ä¸Šæ‹‰æ¸å…¥ä¸å…¨é¡µå³æ»‘è¿”å›æ‰‹åŠ¿éš¾é¢˜ï¼Œæ­é… UIPercentDrivenInteractiveTransition å®ç°æµç•…äº¤äº’åŠ¨ç”»ï¼Œæå‡ä½¿ç”¨è€…ä½“éªŒå¹¶å…¼å®¹å¤šç‰ˆæœ¬ç³»ç»Ÿã€‚" /><meta property="og:description" content="æ·±å…¥è§£æ iOS UIViewController è½¬åœºåŠ¨ç”»ï¼Œè§£å†³ä¸‹æ‹‰å…³é—­ã€ä¸Šæ‹‰æ¸å…¥ä¸å…¨é¡µå³æ»‘è¿”å›æ‰‹åŠ¿éš¾é¢˜ï¼Œæ­é… UIPercentDrivenInteractiveTransition å®ç°æµç•…äº¤äº’åŠ¨ç”»ï¼Œæå‡ä½¿ç”¨è€…ä½“éªŒå¹¶å…¼å®¹å¤šç‰ˆæœ¬ç³»ç»Ÿã€‚" /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/zh-cn/ios-uiviewcontroller-%E8%BD%AC%E5%9C%BA%E5%8A%A8%E7%94%BB-%E4%B8%8B%E6%8B%89%E5%85%B3%E9%97%AD-%E4%B8%8A%E6%8B%89%E6%B8%90%E5%85%A5%E4%B8%8E%E5%85%A8%E9%A1%B5%E5%8F%B3%E6%BB%91%E8%BF%94%E5%9B%9E%E5%AE%9E%E4%BD%9C%E6%8A%80%E5%B7%A7-14cee137c565/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/zh-cn/ios-uiviewcontroller-%E8%BD%AC%E5%9C%BA%E5%8A%A8%E7%94%BB-%E4%B8%8B%E6%8B%89%E5%85%B3%E9%97%AD-%E4%B8%8A%E6%8B%89%E6%B8%90%E5%85%A5%E4%B8%8E%E5%85%A8%E9%A1%B5%E5%8F%B3%E6%BB%91%E8%BF%94%E5%9B%9E%E5%AE%9E%E4%BD%9C%E6%8A%80%E5%B7%A7-14cee137c565/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/14cee137c565/1*6IQTrlT4vIKR-NjLRsvZ-A.gif" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-01-12T02:41:06+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/14cee137c565/1*6IQTrlT4vIKR-NjLRsvZ-A.gif" /><meta property="twitter:title" content="iOS UIViewController è½¬åœºåŠ¨ç”»ï½œä¸‹æ‹‰å…³é—­ã€ä¸Šæ‹‰æ¸å…¥ä¸å…¨é¡µå³æ»‘è¿”å›å®ä½œæŠ€å·§" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://medium.com/@zhgchgli/"},"dateModified":"2024-04-13T16:06:12+08:00","datePublished":"2020-01-12T02:41:06+08:00","description":"æ·±å…¥è§£æ iOS UIViewController è½¬åœºåŠ¨ç”»ï¼Œè§£å†³ä¸‹æ‹‰å…³é—­ã€ä¸Šæ‹‰æ¸å…¥ä¸å…¨é¡µå³æ»‘è¿”å›æ‰‹åŠ¿éš¾é¢˜ï¼Œæ­é… UIPercentDrivenInteractiveTransition å®ç°æµç•…äº¤äº’åŠ¨ç”»ï¼Œæå‡ä½¿ç”¨è€…ä½“éªŒå¹¶å…¼å®¹å¤šç‰ˆæœ¬ç³»ç»Ÿã€‚","headline":"iOS UIViewController è½¬åœºåŠ¨ç”»ï½œä¸‹æ‹‰å…³é—­ã€ä¸Šæ‹‰æ¸å…¥ä¸å…¨é¡µå³æ»‘è¿”å›å®ä½œæŠ€å·§","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+","url":"https://zhgchg.li/assets/14cee137c565/1*6IQTrlT4vIKR-NjLRsvZ-A.gif","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/zh-cn/ios-uiviewcontroller-%E8%BD%AC%E5%9C%BA%E5%8A%A8%E7%94%BB-%E4%B8%8B%E6%8B%89%E5%85%B3%E9%97%AD-%E4%B8%8A%E6%8B%89%E6%B8%90%E5%85%A5%E4%B8%8E%E5%85%A8%E9%A1%B5%E5%8F%B3%E6%BB%91%E8%BF%94%E5%9B%9E%E5%AE%9E%E4%BD%9C%E6%8A%80%E5%B7%A7-14cee137c565/"},"url":"https://zhgchg.li/posts/zrealm-dev/zh-cn/ios-uiviewcontroller-%E8%BD%AC%E5%9C%BA%E5%8A%A8%E7%94%BB-%E4%B8%8B%E6%8B%89%E5%85%B3%E9%97%AD-%E4%B8%8A%E6%8B%89%E6%B8%90%E5%85%A5%E4%B8%8E%E5%85%A8%E9%A1%B5%E5%8F%B3%E6%BB%91%E8%BF%94%E5%9B%9E%E5%AE%9E%E4%BD%9C%E6%8A%80%E5%B7%A7-14cee137c565/"}</script><title>iOS UIViewController è½¬åœºåŠ¨ç”»ï½œä¸‹æ‹‰å…³é—­ã€ä¸Šæ‹‰æ¸å…¥ä¸å…¨é¡µå³æ»‘è¿”å›å®ä½œæŠ€å·§ | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script><link rel="alternate" hreflang="en" href="/posts/zrealm-dev/en/ios-uiviewcontroller-transitions-master-pull-down-close-pull-up-present-full-page-swipe-back-14cee137c565/"><link rel="alternate" hreflang="zh-Hant" href="/posts/zrealm-dev/ios-uiviewcontroller-%E8%BD%89%E5%A0%B4%E5%8B%95%E7%95%AB-%E4%B8%8B%E6%8B%89%E9%97%9C%E9%96%89-%E4%B8%8A%E6%8B%89%E6%BC%B8%E5%85%A5%E8%88%87%E5%85%A8%E9%A0%81%E5%8F%B3%E6%BB%91%E8%BF%94%E5%9B%9E%E5%AF%A6%E4%BD%9C%E6%8A%80%E5%B7%A7-14cee137c565/"><link rel="alternate" hreflang="zh-Hans" href="/posts/zrealm-dev/zh-cn/ios-uiviewcontroller-%E8%BD%AC%E5%9C%BA%E5%8A%A8%E7%94%BB-%E4%B8%8B%E6%8B%89%E5%85%B3%E9%97%AD-%E4%B8%8A%E6%8B%89%E6%B8%90%E5%85%A5%E4%B8%8E%E5%85%A8%E9%A1%B5%E5%8F%B3%E6%BB%91%E8%BF%94%E5%9B%9E%E5%AE%9E%E4%BD%9C%E6%8A%80%E5%B7%A7-14cee137c565/"><link rel="alternate" hreflang="x-default" href="/posts/zrealm-dev/zh-cn/ios-uiviewcontroller-%E8%BD%AC%E5%9C%BA%E5%8A%A8%E7%94%BB-%E4%B8%8B%E6%8B%89%E5%85%B3%E9%97%AD-%E4%B8%8A%E6%8B%89%E6%B8%90%E5%85%A5%E4%B8%8E%E5%85%A8%E9%A1%B5%E5%8F%B3%E6%BB%91%E8%BF%94%E5%9B%9E%E5%AE%9E%E4%BD%9C%E6%8A%80%E5%B7%A7-14cee137c565/"><link rel="stylesheet" href="/assets/css/post-toc.css"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0">An iOS, web, and automation developer from Taiwan ğŸ‡¹ğŸ‡¼ who also loves sharing, traveling, and writing.</p><a href="https://medium.com/@zhgchgli" target="_blank" style="display: block;text-align: center;font-style: normal;/* text-decoration: underline; */font-size: 1.2em;color: var(--heading-color);">1K+ Followers on Medium</a></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a><li class="nav-item"> <a href="/english/" class="nav-link"> <i class="fa-fw fa fa-solid fa-language"></i> <span>ENGLISH POSTS</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>iOS UIViewController è½¬åœºåŠ¨ç”»ï½œä¸‹æ‹‰å…³é—­ã€ä¸Šæ‹‰æ¸å…¥ä¸å…¨é¡µå³æ»‘è¿”å›å®ä½œæŠ€å·§</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>iOS UIViewController è½¬åœºåŠ¨ç”»ï½œä¸‹æ‹‰å…³é—­ã€ä¸Šæ‹‰æ¸å…¥ä¸å…¨é¡µå³æ»‘è¿”å›å®ä½œæŠ€å·§</h1><p class="post-desc fw-light mb-4">æ·±å…¥è§£æ iOS UIViewController è½¬åœºåŠ¨ç”»ï¼Œè§£å†³ä¸‹æ‹‰å…³é—­ã€ä¸Šæ‹‰æ¸å…¥ä¸å…¨é¡µå³æ»‘è¿”å›æ‰‹åŠ¿éš¾é¢˜ï¼Œæ­é… UIPercentDrivenInteractiveTransition å®ç°æµç•…äº¤äº’åŠ¨ç”»ï¼Œæå‡ä½¿ç”¨è€…ä½“éªŒå¹¶å…¼å®¹å¤šç‰ˆæœ¬ç³»ç»Ÿã€‚</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1578768066" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jan 12, 2020 </time> </span> <span> Updated <time data-ts="1712995572" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 13, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/assets/14cee137c565/1*6IQTrlT4vIKR-NjLRsvZ-A.gif" class="popup img-link preview-img blur"><img data-src="/assets/14cee137c565/1*6IQTrlT4vIKR-NjLRsvZ-A.gif" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></div><div class="d-flex justify-content-between"> <span style="display: inline-flex; align-items: center; gap: 4px;"> By <em> <a href="https://medium.com/@zhgchgli/">ZhgChgLi</a> </em> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" style="display: block; "><path fill="#007bff" d="M271.2 56C265.1 49.8 256.2 47.3 247.8 49.6C239.4 51.9 232.9 58.4 230.8 66.8L215.5 127C214.4 131.4 209.9 134 205.6 132.7L145.8 115.9C137.4 113.5 128.4 115.9 122.3 122C116.2 128.1 113.8 137.1 116.2 145.5L133.1 205.3C134.3 209.6 131.7 214.1 127.4 215.2L67.1 230.5C58.7 232.6 52.1 239.2 49.8 247.6C47.5 256 50 264.9 56.2 271L100.7 314.3C103.9 317.4 103.9 322.6 100.7 325.8L56.3 369.1C50.1 375.2 47.6 384.1 49.9 392.5C52.2 400.9 58.8 407.4 67.2 409.6L127.4 424.9C131.8 426 134.4 430.5 133.1 434.8L116.2 494.5C113.8 502.9 116.2 511.9 122.3 518C128.4 524.1 137.4 526.5 145.8 524.1L205.6 507.2C209.9 506 214.4 508.6 215.5 512.9L230.8 573.1C232.9 581.5 239.5 588.1 247.9 590.4C256.3 592.7 265.2 590.2 271.3 584L314.6 539.5C317.7 536.3 322.9 536.3 326.1 539.5L369.3 584C375.4 590.2 384.3 592.7 392.7 590.4C401.1 588.1 407.6 581.5 409.8 573.1L425.1 513C426.2 508.6 430.7 506 435 507.3L494.8 524.2C503.2 526.6 512.2 524.2 518.3 518.1C524.4 512 526.8 503 524.4 494.6L507.5 434.8C506.3 430.5 508.9 426 513.2 424.9L573.4 409.6C581.8 407.5 588.4 400.9 590.7 392.5C593 384.1 590.5 375.1 584.3 369.1L539.8 325.8C536.6 322.7 536.6 317.5 539.8 314.3L584.3 271C590.5 264.9 593 256 590.7 247.6C588.4 239.2 581.8 232.7 573.4 230.5L513.2 215.2C508.8 214.1 506.2 209.6 507.5 205.3L524.4 145.5C526.8 137.1 524.4 128.1 518.3 122C512.2 115.9 503.2 113.5 494.8 115.9L435 132.8C430.7 134 426.2 131.4 425.1 127.1L409.8 66.8C407.7 58.4 401.1 51.8 392.7 49.5C384.3 47.2 375.4 49.7 369.3 55.9L326 100.5C322.9 103.7 317.7 103.7 314.5 100.5L271.2 56z"/><path d="M250 330 l60 60 100 -140" stroke="#ffffff" stroke-width="40" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="5691 words" > <em>31 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">iOS UIViewController è½¬åœºåŠ¨ç”»ï½œä¸‹æ‹‰å…³é—­ã€ä¸Šæ‹‰æ¸å…¥ä¸å…¨é¡µå³æ»‘è¿”å›å®ä½œæŠ€å·§</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">ç« ç¯€ (Chapters)ğŸ”–</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">iOS UIViewController è½¬åœºåŠ¨ç”»ï½œä¸‹æ‹‰å…³é—­ã€ä¸Šæ‹‰æ¸å…¥ä¸å…¨é¡µå³æ»‘è¿”å›å®ä½œæŠ€å·§</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><blockquote class="prompt-tip"><p><a href="/posts/zrealm-dev/en/ios-uiviewcontroller-transitions-master-pull-down-close-pull-up-present-full-page-swipe-back-14cee137c565/"><strong>Click here</strong></a> to view the English version of this article.</p></blockquote><blockquote class="prompt-tip"><p><a href="/posts/zrealm-dev/ios-uiviewcontroller-%E8%BD%89%E5%A0%B4%E5%8B%95%E7%95%AB-%E4%B8%8B%E6%8B%89%E9%97%9C%E9%96%89-%E4%B8%8A%E6%8B%89%E6%BC%B8%E5%85%A5%E8%88%87%E5%85%A8%E9%A0%81%E5%8F%B3%E6%BB%91%E8%BF%94%E5%9B%9E%E5%AF%A6%E4%BD%9C%E6%8A%80%E5%B7%A7-14cee137c565/"><strong>é»æ“Šé€™è£¡</strong></a>æŸ¥çœ‹æœ¬æ–‡ç« æ­£é«”ä¸­æ–‡ç‰ˆæœ¬ã€‚</p></blockquote><blockquote class="prompt-info"><p>åŸºäº SEO è€ƒé‡ï¼Œæœ¬æ–‡æ ‡é¢˜ä¸æè¿°ç» AI è°ƒæ•´ï¼ŒåŸå§‹ç‰ˆæœ¬è¯·å‚è€ƒå†…æ–‡ã€‚</p></blockquote><h4 id="zhgchgli-table-of-contents">æ–‡ç« ç›®å½•</h4><nav class="zhgchgli-toc"><ul class="zhgchgli-toc-list"><li><a href="#ios-uiviewcontroller-è½¬åœºäºŒä¸‰äº‹">iOS UIViewController è½¬åœºäºŒä¸‰äº‹</a></li><li class="has-children"><details><summary>å‰è¨€ <a href="#å‰è¨€">#</a></summary><ul><li><a href="#æ¢ç´¢ä¹‹è·¯">æ¢ç´¢ä¹‹è·¯</a></li></ul></details></li><li class="has-children"><details><summary>iOS 13 å¡ç‰‡æ ·å¼å‘ˆç°é¡µé¢ <a href="#ios-13-å¡ç‰‡æ ·å¼å‘ˆç°é¡µé¢">#</a></summary><ul><li><a href="#å¦‚ä½•å–æ¶ˆä¸‹æ‹‰å…³é—­å…³é—­ç¡®è®¤">å¦‚ä½•å–æ¶ˆä¸‹æ‹‰å…³é—­ï¼Ÿå…³é—­ç¡®è®¤ï¼Ÿ</a></li><li><a href="#by-the-way">By the wayâ€¦</a></li></ul></details></li><li class="has-children"><details><summary>å“ªé‡Œå¯åšè½¬åœºåŠ¨ç”»ï¼Ÿ <a href="#å“ªé‡Œå¯åšè½¬åœºåŠ¨ç”»">#</a></summary><ul><li><a href="#uitabbarcontroller-åˆ‡æ¢æ—¶">UITabBarController åˆ‡æ¢æ—¶</a></li><li><a href="#uiviewcontroller-presentdismiss-æ—¶">UIViewController Present/Dismiss æ—¶</a></li><li><a href="#uinavigationcontroller-pushpop-æ—¶">UINavigationController Push/Pop æ—¶</a></li></ul></details></li><li><a href="#äº¤äº’éäº¤äº’åŠ¨ç”»">äº¤äº’éäº¤äº’åŠ¨ç”»ï¼Ÿ</a></li><li class="has-children"><details><summary>æ€ä¹ˆå®ä½œåŠ¨ç”»æ•ˆæœï¼Ÿ <a href="#æ€ä¹ˆå®ä½œåŠ¨ç”»æ•ˆæœ">#</a></summary><ul><li><a href="#ä¸€èˆ¬è½¬åœºåŠ¨ç”»-uiviewanimate">ä¸€èˆ¬è½¬åœºåŠ¨ç”»: UIView.animate</a></li><li><a href="#å¯ä¸­æ–­ç»§ç»­çš„è½¬åœºåŠ¨ç”»-uiviewpropertyanimator">å¯ä¸­æ–­ã€ç»§ç»­çš„è½¬åœºåŠ¨ç”»: UIViewPropertyAnimator</a></li><li><a href="#transitioncoordinator">transitionCoordinator</a></li></ul></details></li><li class="has-children"><details><summary>æ€ä¹ˆæ§åˆ¶åŠ¨ç”»ï¼Ÿ <a href="#æ€ä¹ˆæ§åˆ¶åŠ¨ç”»">#</a></summary><ul><li><a href="#æ§åˆ¶ä»£ç†è®¾ç½®">æ§åˆ¶ä»£ç†è®¾ç½®</a></li><li><a href="#åŠ¨ç”»äº¤äº’å¤„ç†ç±»-uipercentdriveninteractivetransition">åŠ¨ç”»äº¤äº’å¤„ç†ç±» UIPercentDrivenInteractiveTransition</a></li></ul></details></li><li><a href="#ç»„åˆ">ç»„åˆ</a></li><li><a href="#è‡ªåˆ¶ä¸‹æ‹‰å…³é—­é¡µé¢æ•ˆæœ">è‡ªåˆ¶ä¸‹æ‹‰å…³é—­é¡µé¢æ•ˆæœ</a></li><li class="has-children"><details><summary>å…¨é¡µå³æ»‘è¿”å› <a href="#å…¨é¡µå³æ»‘è¿”å›">#</a></summary><ul><li><a href="#è¿˜æ˜¯èµ°æ­£è§„çš„å§">è¿˜æ˜¯èµ°æ­£è§„çš„å§</a></li></ul></details></li><li><a href="#ä¸Šæ‹‰æ¸å…¥-uiviewcontroller">ä¸Šæ‹‰æ¸å…¥ UIViewController</a></li><li class="has-children"><details><summary>å®Œæˆï¼ <a href="#å®Œæˆ">#</a></summary><ul><li><a href="#å…¨ç¯‡-github-èŒƒä¾‹ä¸‹è½½">å…¨ç¯‡ GitHub èŒƒä¾‹ä¸‹è½½</a></li></ul></details></li></ul></nav><hr /><h3 id="ios-uiviewcontroller-è½¬åœºäºŒä¸‰äº‹"><span class="me-2">iOS UIViewController è½¬åœºäºŒä¸‰äº‹</span><a href="#ios-uiviewcontroller-è½¬åœºäºŒä¸‰äº‹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>UIViewController ä¸‹æ‹‰å…³é—­/ä¸Šæ‹‰å‡ºç°/å…¨é¡µå³æ»‘è¿”å› æ•ˆæœå…¨è§£</p><h3 id="å‰è¨€"><span class="me-2">å‰è¨€</span><a href="#å‰è¨€" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/14cee137c565/1*6IQTrlT4vIKR-NjLRsvZ-A.gif" class="popup img-link blur"><img data-src="/assets/14cee137c565/1*6IQTrlT4vIKR-NjLRsvZ-A.gif" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDg2IiBoZWlnaHQ9Ijg1MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>ä¸€ç›´ä»¥æ¥éƒ½å¾ˆå¥½å¥‡è¯¸å¦‚ Facebookã€Lineã€Spotifyâ€¦ç­‰ç­‰å¸¸ç”¨çš„ APP æ˜¯å¦‚ä½•å®ä½œã€ŒPresent çš„ UIViewController å¯ä¸‹æ‹‰å…³é—­ã€ã€ã€Œä¸Šæ‹‰æ¸å…¥ UIViewControllerã€ã€ã€Œå…¨é¡µé¢æ”¯æ´æ‰‹åŠ¿å³æ»‘è¿”å›ã€è¿™äº›æ•ˆæœçš„ã€‚</p><p>å› ä¸ºè¿™äº›æ•ˆæœå†…å»ºéƒ½æ²¡æœ‰ï¼Œä¸‹æ‹‰å…³é—­ä¹Ÿç›´åˆ° iOS â‰¥ 13 æ‰æœ‰ç³»ç»Ÿçš„å¡ç‰‡æ ·å¼æ”¯æ´ã€‚</p><h4 id="æ¢ç´¢ä¹‹è·¯"><span class="me-2">æ¢ç´¢ä¹‹è·¯</span><a href="#æ¢ç´¢ä¹‹è·¯" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>ä¸çŸ¥é“æ˜¯ä¸ä¼šä¸‹å…³é”®å­—è¿˜æ˜¯èµ„æ–™æœ¬èº«éš¾æ‰¾ï¼Œä¸€ç›´æ‰¾ä¸åˆ°è¿™ç±»åŠŸèƒ½çš„å®è·µåšæ³•ï¼Œæ‰¾åˆ°çš„èµ„æ–™éƒ½å¾ˆå«ç³Šé›¶æ•£ï¼Œåªèƒ½ä¸œæ‹¼è¥¿å‡‘ã€‚</p><p>ä¸€å¼€å§‹è‡ªå·±ç ”ç©¶åšæ³•æ—¶æ‰¾åˆ° <code class="language-plaintext highlighter-rouge">UIPresentationController</code> è¿™ä¸ª API ï¼Œæ²¡å†æ·±æ˜å…¶ä»–èµ„æ–™ï¼Œå°±ç”¨è¿™ä¸ªæ–¹æ³•æ­é… <code class="language-plaintext highlighter-rouge">UIPanGestureRecognizer</code> ç”¨å¾ˆåœŸç‚®çš„æ–¹å¼å®Œæˆä¸‹æ‹‰å…³é—­çš„æ•ˆæœï¼›ä¸€ç›´éƒ½è§‰å¾—å“ªé‡Œæ€ªæ€ªçš„ï¼Œæ„Ÿè§‰ä¼šæœ‰æ›´å¥½çš„æ–¹å¼ã€‚</p><p>ç›´åˆ°æœ€è¿‘æ¥è§¦æ–°ä¸“æ¡ˆæ‹œè¯» <a href="https://imnotyourson.com/draggable-view-controller-interactive-view-controller/" target="_blank">å¤§å¤§çš„æ–‡ç« </a> ï¼Œæ‰©å¤§çœ¼ç•Œæ‰å‘ç°æœ‰å…¶ä»– API æ›´æ¼‚äº®ã€æ›´æœ‰å¼¹æ€§çš„åšæ³•å¯ä»¥ç”¨ã€‚</p><blockquote><p><em>æœ¬ç¯‡ä¸€æ–¹é¢æ˜¯è‡ªæˆ‘çºªå½•ï¼Œå¦ä¸€æ–¹é¢å¸Œæœ›æœ‰å¸®åŠ©åˆ°è·Ÿæˆ‘æœ‰ä¸€æ ·å›°æƒ‘çš„æœ‹å‹ã€‚</em></p></blockquote><blockquote><p><em>å†…å®¹æœ‰ç‚¹å¤šï¼Œå«Œéº»çƒ¦çš„å¯ä»¥ç›´æ¥æ‹‰åˆ°åº•çœ‹èŒƒä¾‹ï¼Œæˆ–ç›´æ¥ä¸‹è½½ Github ä¸“æ¡ˆå›æ¥ç ”ç©¶ï¼</em></p></blockquote><h3 id="ios-13-å¡ç‰‡æ ·å¼å‘ˆç°é¡µé¢"><span class="me-2">iOS 13 å¡ç‰‡æ ·å¼å‘ˆç°é¡µé¢</span><a href="#ios-13-å¡ç‰‡æ ·å¼å‘ˆç°é¡µé¢" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>é¦–å…ˆè®²æœ€æ–°ç³»ç»Ÿå†…å»ºçš„æ•ˆæœ iOS â‰¥ 13 å <code class="language-plaintext highlighter-rouge">UIViewController.present(_:animated:completion:)</code> é»˜è®¤çš„ <code class="language-plaintext highlighter-rouge">modalPresentationStyle</code> æ•ˆæœå°±æ˜¯ <code class="language-plaintext highlighter-rouge">UIModalPresentationAutomatic</code> ç‰‡æ ·å¼å‘ˆç°é¡µé¢ï¼Œè‹¥æƒ³è¦ä¿æŒä¹‹å‰çš„å…¨é¡µé¢å‘ˆç°å°±è¦ç‰¹åˆ«æŒ‡å®šå› <code class="language-plaintext highlighter-rouge">UIModalPresentationFullScreen</code> å³å¯ã€‚</p><p><a href="/assets/14cee137c565/1*j0NeJfAuR2fXP56KWglS7Q.gif" class="popup img-link blur"><img data-src="/assets/14cee137c565/1*j0NeJfAuR2fXP56KWglS7Q.gif" alt="å†…å»ºè¡Œäº‹å†æ–°å¢æ•ˆæœ" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OTYiIGhlaWdodD0iODUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>å†…å»ºè¡Œäº‹å†æ–°å¢æ•ˆæœ</p><h4 id="å¦‚ä½•å–æ¶ˆä¸‹æ‹‰å…³é—­å…³é—­ç¡®è®¤"><span class="me-2">å¦‚ä½•å–æ¶ˆä¸‹æ‹‰å…³é—­ï¼Ÿå…³é—­ç¡®è®¤ï¼Ÿ</span><a href="#å¦‚ä½•å–æ¶ˆä¸‹æ‹‰å…³é—­å…³é—­ç¡®è®¤" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>æ›´å¥½çš„ä½¿ç”¨è€…ä½“éªŒåº”è¯¥è¦èƒ½åœ¨è§¦å‘ä¸‹æ‹‰å…³é—­æ—¶æ£€æŸ¥æœ‰æ— è¾“å…¥èµ„æ–™ï¼Œæœ‰çš„è¯éœ€è¦æç¤ºä½¿ç”¨è€…æ˜¯å¦èˆå¼ƒåŠ¨ä½œç¦»å¼€ã€‚</p><p>è¿™éƒ¨åˆ†è‹¹æœä¹Ÿå¸®æˆ‘ä»¬æƒ³å¥½äº†ï¼Œåªéœ€å®ä½œ <code class="language-plaintext highlighter-rouge">UIAdaptivePresentationControllerDelegate</code> é‡Œçš„æ–¹æ³•å³å¯ã€‚</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">class</span> <span class="kt">DetailViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">onEdit</span><span class="p">:</span><span class="kt">Bool</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
        
        <span class="c1">//è®¾ç½®ä»£ç†</span>
        <span class="k">self</span><span class="o">.</span><span class="n">presentationController</span><span class="p">?</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
        <span class="c1">//if uiviewcontroller embed in navigationController:</span>
        <span class="c1">//self.navigationController?.presentationController?.delegate = self</span>
        
        <span class="c1">//å–æ¶ˆä¸‹æ‹‰å…³é—­æ–¹å¼(1):</span>
        <span class="k">self</span><span class="o">.</span><span class="n">isModalInPresentation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        
    <span class="p">}</span>
    
<span class="p">}</span>

<span class="c1">//ä»£ç†å®ä½œ</span>
<span class="kd">extension</span> <span class="kt">DetailViewController</span><span class="p">:</span> <span class="kt">UIAdaptivePresentationControllerDelegate</span> <span class="p">{</span>
    <span class="c1">//å–æ¶ˆä¸‹æ‹‰å…³é—­æ–¹å¼(2):</span>
    <span class="kd">func</span> <span class="nf">presentationControllerShouldDismiss</span><span class="p">(</span><span class="n">_</span> <span class="nv">presentationController</span><span class="p">:</span> <span class="kt">UIPresentationController</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="c1">//ä¸‹æ‹‰å…³é—­å–æ¶ˆæ—¶ï¼Œä¸‹æ‹‰æ‰‹åŠ¿è§¦å‘</span>
    <span class="kd">func</span> <span class="nf">presentationControllerDidAttemptToDismiss</span><span class="p">(</span><span class="n">_</span> <span class="nv">presentationController</span><span class="p">:</span> <span class="kt">UIPresentationController</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">onEdit</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">let</span> <span class="nv">alert</span> <span class="o">=</span> <span class="kt">UIAlertController</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"èµ„æ–™å°šæœªå­˜å‚¨"</span><span class="p">,</span> <span class="nv">message</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="nv">preferredStyle</span><span class="p">:</span> <span class="o">.</span><span class="n">actionSheet</span><span class="p">)</span>
          <span class="n">alert</span><span class="o">.</span><span class="nf">addAction</span><span class="p">(</span><span class="kt">UIAlertAction</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"èˆå¼ƒç¦»å¼€"</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">)</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span>
              <span class="k">self</span><span class="o">.</span><span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
          <span class="p">})</span>
          <span class="n">alert</span><span class="o">.</span><span class="nf">addAction</span><span class="p">(</span><span class="kt">UIAlertAction</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"ç»§ç»­ç¼–è¾‘"</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">cancel</span><span class="p">,</span> <span class="nv">handler</span><span class="p">:</span> <span class="kc">nil</span><span class="p">))</span>
          <span class="k">self</span><span class="o">.</span><span class="nf">present</span><span class="p">(</span><span class="n">alert</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>      
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">self</span><span class="o">.</span><span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>å–æ¶ˆä¸‹æ‹‰å…³é—­å¯æŒ‡å®š <code class="language-plaintext highlighter-rouge">UIViewController</code> çš„å˜æ•° <code class="language-plaintext highlighter-rouge">isModalInPresentation</code> ä¸º false æˆ–å®ä½œ <code class="language-plaintext highlighter-rouge">UIAdaptivePresentationControllerDelegate</code> <code class="language-plaintext highlighter-rouge">presentationControllerShouldDismiss</code> å¹¶å›ä¼  <code class="language-plaintext highlighter-rouge">true</code> æ‹©ä¸€éƒ½å¯ã€‚</p><p><code class="language-plaintext highlighter-rouge">UIAdaptivePresentationControllerDelegate presentationControllerDidAttemptToDismiss</code> è¿™ä¸ªæ–¹æ³•åªæœ‰åœ¨ <strong>ä¸‹æ‹‰å…³é—­å–æ¶ˆæ—¶</strong> æ‰ä¼šå‘¼å«ä½¿ç”¨ã€‚</p><h4 id="by-the-way"><span class="me-2">By the wayâ€¦</span><a href="#by-the-way" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å¡ç‰‡æ ·å¼å‘ˆç°é¡µé¢å¯¹ç³»ç»Ÿæ¥è¯´å°±æ˜¯ <code class="language-plaintext highlighter-rouge">Sheet</code> ï¼Œè¡Œä¸ºä¸Šè·Ÿ <code class="language-plaintext highlighter-rouge">FullScreen</code> æœ‰æ‰€ä¸åŒã€‚</p><blockquote><p><em>å‡è®¾ä»Šå¤© <code class="language-plaintext highlighter-rouge">RootViewController</code> æ˜¯ <code class="language-plaintext highlighter-rouge">HomeViewController</code></em></p></blockquote><blockquote><p><em>åœ¨å¡ç‰‡æ ·å¼å‘ˆç°ä¸‹ (UIModalPresentationAutomatic) åˆ™ï¼š</em></p></blockquote><blockquote><p><code class="language-plaintext highlighter-rouge">HomeViewController</code> <em><code class="language-plaintext highlighter-rouge">Present</code> <code class="language-plaintext highlighter-rouge">DetailViewController</code> æ—¶â€¦</em></p></blockquote><blockquote><p><code class="language-plaintext highlighter-rouge">HomeViewController</code> <strong><em>çš„ <code class="language-plaintext highlighter-rouge">viewWillDisAppear</code> / <code class="language-plaintext highlighter-rouge">viewDidDisAppear</code> éƒ½ä¸ä¼šè§¦å‘ã€‚</em></strong></p></blockquote><blockquote><p><em>å½“ <code class="language-plaintext highlighter-rouge">DetailViewController</code> <code class="language-plaintext highlighter-rouge">Dismiss</code> æ—¶â€¦</em></p></blockquote><blockquote><p><code class="language-plaintext highlighter-rouge">HomeViewController</code> <strong><em>çš„ <code class="language-plaintext highlighter-rouge">viewWillAppear</code> / <code class="language-plaintext highlighter-rouge">viewDidAppear</code> éƒ½ä¸ä¼šè§¦å‘ã€‚</em></strong></p></blockquote><blockquote><p><em>âš ï¸ <strong>å›  XCODE 11 ä¹‹åç‰ˆæœ¬æ‰“åŒ…çš„ iOS â‰¥ 13 APP é¢„è®¾ Present éƒ½ä¼šä½¿ç”¨å¡ç‰‡æ ·å¼ (UIModalPresentationAutomatic)</strong></em></p></blockquote><blockquote><p><em><strong>å¦‚æœä¹‹å‰æœ‰æŠŠä¸€äº›é€»è¾‘æ”¾åœ¨ viewWillAppear/viewWillDisappear/viewDidAppear/viewDidDisappear çš„è¦å¤šåŠ æ£€æŸ¥æ³¨æ„ï¼</strong> âš ï¸</em></p></blockquote><blockquote><p>çœ‹å®Œç³»ç»Ÿå†…å»ºçš„ï¼Œæ¥çœ‹æœ¬ç¯‡é‡å¤´æˆå§ï¼å¦‚ä½•è‡ªå¹²è¿™äº›æ•ˆæœï¼Ÿ</p></blockquote><h3 id="å“ªé‡Œå¯åšè½¬åœºåŠ¨ç”»"><span class="me-2">å“ªé‡Œå¯åšè½¬åœºåŠ¨ç”»ï¼Ÿ</span><a href="#å“ªé‡Œå¯åšè½¬åœºåŠ¨ç”»" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>é¦–å…ˆå…ˆæ•´ç†å“ªé‡Œå¯ä»¥åšè§†çª—åˆ‡æ¢è½¬åœºåŠ¨ç”»ã€‚</p><p><a href="/assets/14cee137c565/1*G0us0AtYJCy3va1sh_bWhQ.gif" class="popup img-link blur"><img data-src="/assets/14cee137c565/1*G0us0AtYJCy3va1sh_bWhQ.gif" alt="UITabBarController/UIViewController/UINavigationController" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTU0IiBoZWlnaHQ9IjY1NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>UITabBarController/UIViewController/UINavigationController</p><h4 id="uitabbarcontroller-åˆ‡æ¢æ—¶"><span class="me-2">UITabBarController åˆ‡æ¢æ—¶</span><a href="#uitabbarcontroller-åˆ‡æ¢æ—¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>æˆ‘ä»¬å¯ä»¥åœ¨ <code class="language-plaintext highlighter-rouge">UITabBarController</code> è®¾å®š <code class="language-plaintext highlighter-rouge">delegate</code> ç„¶åå®ä½œ <code class="language-plaintext highlighter-rouge">animationControllerForTransitionFrom</code> æ–¹æ³•ï¼Œå°±èƒ½åœ¨åˆ‡æ¢ <code class="language-plaintext highlighter-rouge">UITabBarController</code> æ—¶å¯¹å†…å®¹å¥—ç”¨è‡ªè®¢è½¬åœºç‰¹æ•ˆã€‚</p><p>ç³»ç»Ÿé¢„è®¾æ— åŠ¨ç”»ï¼Œä¸Šæ–¹å±•ç¤ºå›¾çš„æ˜¯æ·¡å…¥æ·¡å‡ºåˆ‡æ¢ç‰¹æ•ˆã€‚</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">class</span> <span class="kt">MainTabBarViewController</span><span class="p">:</span> <span class="kt">UITabBarController</span> <span class="p">{</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
        
    <span class="p">}</span>
    
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">MainTabBarViewController</span><span class="p">:</span> <span class="kt">UITabBarControllerDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">tabBarController</span><span class="p">(</span><span class="n">_</span> <span class="nv">tabBarController</span><span class="p">:</span> <span class="kt">UITabBarController</span><span class="p">,</span> <span class="n">animationControllerForTransitionFrom</span> <span class="nv">fromVC</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="n">to</span> <span class="nv">toVC</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIViewControllerAnimatedTransitioning</span><span class="p">?</span> <span class="p">{</span>
        <span class="c1">//return UIViewControllerAnimatedTransitioning</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h4 id="uiviewcontroller-presentdismiss-æ—¶"><span class="me-2">UIViewController Present/Dismiss æ—¶</span><a href="#uiviewcontroller-presentdismiss-æ—¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>ç†æ‰€å½“ç„¶ï¼Œåœ¨ <code class="language-plaintext highlighter-rouge">Present/Dismiss</code> <code class="language-plaintext highlighter-rouge">UIViewController</code> æ—¶å¯ä»¥æŒ‡å®šè¦å¥—ç”¨çš„åŠ¨ç”»æ•ˆæœï¼Œä¸ç„¶å°±ä¸ä¼šæœ‰æ­¤ç¯‡æ–‡ç« äº†XDï¼›ä¸è¿‡å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¦‚æœåªæ˜¯å•çº¯è¦åš Present åŠ¨ç”»æ²¡æœ‰è¦åšæ‰‹åŠ¿æ§åˆ¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">UIPresentationController</code> æ–¹ä¾¿å¿«é€Ÿ (è¯¦è§æ–‡æœ«å‚è€ƒèµ„æ–™)ã€‚</p><p>ç³»ç»Ÿé¢„è®¾æ˜¯ä¸Šæ»‘å‡ºç°ä¸‹æ»‘æ¶ˆå¤±ï¼è‡ªå·±å®¢åˆ¶çš„è¯å¯ä»¥åŠ å…¥æ·¡å…¥ã€åœ†è§’ã€å‡ºç°ä½ç½®æ§åˆ¶â€¦ç­‰æ•ˆæœã€‚</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">class</span> <span class="kt">HomeAddViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>

        <span class="k">self</span><span class="o">.</span><span class="n">modalPresentationStyle</span> <span class="o">=</span> <span class="o">.</span><span class="n">custom</span>
        <span class="k">self</span><span class="o">.</span><span class="n">transitioningDelegate</span> <span class="o">=</span> <span class="k">self</span>
    <span class="p">}</span>
    
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">HomeAddViewController</span><span class="p">:</span> <span class="kt">UIViewControllerTransitioningDelegate</span> <span class="p">{</span>
    
    <span class="kd">func</span> <span class="nf">animationController</span><span class="p">(</span><span class="n">forPresented</span> <span class="nv">presented</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="nv">presenting</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="nv">source</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIViewControllerAnimatedTransitioning</span><span class="p">?</span> <span class="p">{</span>
        <span class="c1">//å›ä¼  nil å³èµ°é¢„è®¾åŠ¨ç”»</span>
        <span class="k">return</span> <span class="c1">//UIViewControllerAnimatedTransitioning Presentæ—¶è¦å¥—ç”¨çš„åŠ¨ç”»</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">animationController</span><span class="p">(</span><span class="n">forDismissed</span> <span class="nv">dismissed</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIViewControllerAnimatedTransitioning</span><span class="p">?</span> <span class="p">{</span>
        <span class="c1">//å›ä¼  nil å³èµ°é¢„è®¾åŠ¨ç”»</span>
        <span class="k">return</span> <span class="c1">//UIViewControllerAnimatedTransitioning Dismissæ—¶è¦å¥—ç”¨çš„åŠ¨ç”»</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><blockquote><p><em>ä»»ä½• <code class="language-plaintext highlighter-rouge">UIViewController</code> éƒ½èƒ½å®ä½œ <code class="language-plaintext highlighter-rouge">transitioningDelegate</code> å‘ŠçŸ¥ <code class="language-plaintext highlighter-rouge">Present/Dismiss</code> åŠ¨ç”»ï¼› <code class="language-plaintext highlighter-rouge">UITabBarViewController</code> ã€ <code class="language-plaintext highlighter-rouge">UINavigationController</code> ã€ <code class="language-plaintext highlighter-rouge">UITableViewController</code> â€¦.éƒ½å¯</em></p></blockquote><h4 id="uinavigationcontroller-pushpop-æ—¶"><span class="me-2">UINavigationController Push/Pop æ—¶</span><a href="#uinavigationcontroller-pushpop-æ—¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><code class="language-plaintext highlighter-rouge">UINavigationController</code> å¤§æ¦‚æ˜¯æœ€ä¸å¤ªéœ€è¦ä¼šæ”¹åŠ¨ç”»çš„ï¼Œå› ä¸ºç³»ç»Ÿé¢„è®¾çš„å·¦æ»‘å‡ºç°å³æ»‘è¿”å›åŠ¨ç”»å·²ç»æ˜¯æœ€å¥½çš„æ•ˆæœï¼Œèƒ½æƒ³å¾—åˆ°è¦åšè¿™éƒ¨åˆ†çš„å®¢åˆ¶å¯èƒ½å¯ä»¥ç”¨æ¥åšæ— ç¼ <code class="language-plaintext highlighter-rouge">UIViewController</code> å·¦å³åˆ‡æ¢æ•ˆæœã€‚</p><p>å› ä¸ºæˆ‘ä»¬è¦åšå…¨é¡µéƒ½å¯æ‰‹åŠ¿è¿”å›ï¼Œéœ€è¦é…åˆè‡ªè®¢ POP åŠ¨ç”»ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±å®ä½œä¸€ä¸ªè¿”å›åŠ¨ç”»æ•ˆæœã€‚</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">class</span> <span class="kt">HomeNavigationController</span><span class="p">:</span> <span class="kt">UINavigationController</span> <span class="p">{</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
        
        <span class="k">self</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">HomeNavigationController</span><span class="p">:</span> <span class="kt">UINavigationControllerDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">navigationController</span><span class="p">(</span><span class="n">_</span> <span class="nv">navigationController</span><span class="p">:</span> <span class="kt">UINavigationController</span><span class="p">,</span> <span class="n">animationControllerFor</span> <span class="nv">operation</span><span class="p">:</span> <span class="kt">UINavigationController</span><span class="o">.</span><span class="kt">Operation</span><span class="p">,</span> <span class="n">from</span> <span class="nv">fromVC</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="n">to</span> <span class="nv">toVC</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIViewControllerAnimatedTransitioning</span><span class="p">?</span> <span class="p">{</span>
        
        <span class="k">if</span> <span class="n">operation</span> <span class="o">==</span> <span class="o">.</span><span class="n">pop</span> <span class="p">{</span>
            <span class="k">return</span> <span class="c1">//UIViewControllerAnimatedTransitioning è¿”å›æ—¶è¦å¥—ç”¨çš„åŠ¨ç”»</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">operation</span> <span class="o">==</span> <span class="o">.</span><span class="n">push</span> <span class="p">{</span>
            <span class="k">return</span> <span class="c1">//UIViewControllerAnimatedTransitioning pushæ—¶è¦å¥—ç”¨çš„åŠ¨ç”»</span>
        <span class="p">}</span>
        
        <span class="c1">//å›ä¼  nil å³èµ°é¢„è®¾åŠ¨ç”»</span>
        <span class="k">return</span> <span class="kc">nil</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="äº¤äº’éäº¤äº’åŠ¨ç”»"><span class="me-2">äº¤äº’éäº¤äº’åŠ¨ç”»ï¼Ÿ</span><a href="#äº¤äº’éäº¤äº’åŠ¨ç”»" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>å†è®²åŠ¨ç”»å®ä½œã€æ‰‹åŠ¿æ§åˆ¶å‰ï¼Œå…ˆè®²ä¸€ä¸‹ä½•è°“äº¤äº’ä¸éäº¤äº’ã€‚</p><p><strong>äº¤äº’åŠ¨ç”»ï¼š</strong> æ‰‹åŠ¿è§¦å‘åŠ¨ç”»ï¼Œå¦‚ UIPanGestureRecognizer</p><p><strong>éäº¤äº’åŠ¨ç”»ï¼š</strong> ç³»ç»Ÿå‘¼å«åŠ¨ç”»ï¼Œå¦‚ self.present( )</p><h3 id="æ€ä¹ˆå®ä½œåŠ¨ç”»æ•ˆæœ"><span class="me-2">æ€ä¹ˆå®ä½œåŠ¨ç”»æ•ˆæœï¼Ÿ</span><a href="#æ€ä¹ˆå®ä½œåŠ¨ç”»æ•ˆæœ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>è®²å®Œå“ªé‡Œå¯ä»¥åšï¼Œå†æ¥çœ‹æ€ä¹ˆåšåŠ¨ç”»æ•ˆæœã€‚</p><p>æˆ‘ä»¬éœ€è¦å®ä½œ <code class="language-plaintext highlighter-rouge">UIViewControllerAnimatedTransitioning</code> è¿™ä¸ª <code class="language-plaintext highlighter-rouge">Protocol</code> å¹¶åœ¨é‡Œé¢å¯¹è§†çª—åšåŠ¨ç”»ã€‚</p><h4 id="ä¸€èˆ¬è½¬åœºåŠ¨ç”»-uiviewanimate"><span class="me-2">ä¸€èˆ¬è½¬åœºåŠ¨ç”»: UIView.animate</span><a href="#ä¸€èˆ¬è½¬åœºåŠ¨ç”»-uiviewanimate" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>ç›´æ¥ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">UIView.animate</code> åšåŠ¨ç”»å¤„ç†ï¼Œæ­¤æ—¶çš„ <code class="language-plaintext highlighter-rouge">UIViewControllerAnimatedTransitioning</code> éœ€è¦å®ä½œ <code class="language-plaintext highlighter-rouge">transitionDuration</code> å‘ŠçŸ¥åŠ¨ç”»æ—¶é•¿ã€ <code class="language-plaintext highlighter-rouge">animateTransition</code> å®ä½œåŠ¨ç”»å†…å®¹è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">class</span> <span class="kt">SlideFromLeftToRightTransition</span><span class="p">:</span> <span class="kt">NSObject</span><span class="p">,</span> <span class="kt">UIViewControllerAnimatedTransitioning</span> <span class="p">{</span>
    
    <span class="kd">func</span> <span class="nf">transitionDuration</span><span class="p">(</span><span class="n">using</span> <span class="nv">transitionContext</span><span class="p">:</span> <span class="kt">UIViewControllerContextTransitioning</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">TimeInterval</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mf">0.4</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">animateTransition</span><span class="p">(</span><span class="n">using</span> <span class="nv">transitionContext</span><span class="p">:</span> <span class="kt">UIViewControllerContextTransitioning</span><span class="p">)</span> <span class="p">{</span>
        
        <span class="c1">//å¯ç”¨å‚æ•°ï¼š</span>
        <span class="c1">//å–å¾—è¦å±•ç¤ºçš„ç›®æ ‡ UIViewController çš„ View å†…å®¹:</span>
        <span class="k">let</span> <span class="nv">toView</span> <span class="o">=</span> <span class="n">transitionContext</span><span class="o">.</span><span class="nf">view</span><span class="p">(</span><span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">to</span><span class="p">)</span>
        <span class="c1">//å–å¾—è¦å±•ç¤ºçš„ç›®æ ‡ UIViewController:</span>
        <span class="k">let</span> <span class="nv">toViewController</span> <span class="o">=</span> <span class="n">transitionContext</span><span class="o">.</span><span class="nf">viewController</span><span class="p">(</span><span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">to</span><span class="p">)</span>
        <span class="c1">//å–å¾—è¦å±•ç¤ºçš„ç›®æ ‡ UIViewController çš„ View çš„åˆå§‹åŒ– Frame èµ„è®¯:</span>
        <span class="k">let</span> <span class="nv">toInitalFrame</span> <span class="o">=</span> <span class="n">transitionContext</span><span class="o">.</span><span class="nf">initialFrame</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="n">toViewController</span><span class="o">!</span><span class="p">)</span>
        <span class="c1">//å–å¾—è¦å±•ç¤ºçš„ç›®æ ‡ UIViewController çš„ View çš„æœ€ç»ˆ Frame èµ„è®¯:</span>
        <span class="k">let</span> <span class="nv">toFinalFrame</span> <span class="o">=</span> <span class="n">transitionContext</span><span class="o">.</span><span class="nf">finalFrame</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="n">toViewController</span><span class="o">!</span><span class="p">)</span>
        
        <span class="c1">//å–å¾—å½“å‰ UIViewController çš„ View å†…å®¹:</span>
        <span class="k">let</span> <span class="nv">fromView</span> <span class="o">=</span> <span class="n">transitionContext</span><span class="o">.</span><span class="nf">view</span><span class="p">(</span><span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">from</span><span class="p">)</span>
        <span class="c1">//å–å¾—å½“å‰ UIViewController:</span>
        <span class="k">let</span> <span class="nv">fromViewController</span> <span class="o">=</span> <span class="n">transitionContext</span><span class="o">.</span><span class="nf">viewController</span><span class="p">(</span><span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">from</span><span class="p">)</span>
        <span class="c1">//å–å¾—å½“å‰ UIViewController çš„ View çš„åˆå§‹åŒ– Frame èµ„è®¯:</span>
        <span class="k">let</span> <span class="nv">fromInitalFrame</span> <span class="o">=</span> <span class="n">transitionContext</span><span class="o">.</span><span class="nf">initialFrame</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="n">fromViewController</span><span class="o">!</span><span class="p">)</span>
        <span class="c1">//å–å¾—å½“å‰ UIViewController çš„ View çš„æœ€ç»ˆ Frame èµ„è®¯: (åœ¨å…³é—­åŠ¨ç”»æ—¶å¯ä»¥å–å¾—ä¹‹å‰æ˜¾ç¤ºåŠ¨ç”»æ—¶çš„æœ€ç»ˆFrame)</span>
        <span class="k">let</span> <span class="nv">fromFinalFrame</span> <span class="o">=</span> <span class="n">transitionContext</span><span class="o">.</span><span class="nf">finalFrame</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="n">fromViewController</span><span class="o">!</span><span class="p">)</span>
        
        <span class="c1">//toView.frame.origin.y = UIScreen.main.bounds.size.height</span>
        
        <span class="kt">UIView</span><span class="o">.</span><span class="nf">animate</span><span class="p">(</span><span class="nv">withDuration</span><span class="p">:</span> <span class="nf">transitionDuration</span><span class="p">(</span><span class="nv">using</span><span class="p">:</span> <span class="n">transitionContext</span><span class="p">),</span> <span class="nv">delay</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="n">curveLinear</span><span class="p">],</span> <span class="nv">animations</span><span class="p">:</span> <span class="p">{</span>
            <span class="c1">//toView.frame.origin.y = 0</span>
        <span class="p">})</span> <span class="p">{</span> <span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">in</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">transitionContext</span><span class="o">.</span><span class="n">transitionWasCancelled</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">//åŠ¨ç”»æ²¡ä¸­æ–­</span>
            <span class="p">}</span>
            
            <span class="c1">// å‘ŠçŸ¥ç³»ç»ŸåŠ¨ç”»å®Œæˆ</span>
            <span class="n">transitionContext</span><span class="o">.</span><span class="nf">completeTransition</span><span class="p">(</span><span class="o">!</span><span class="n">transitionContext</span><span class="o">.</span><span class="n">transitionWasCancelled</span><span class="p">)</span>
        <span class="p">}</span>
        
    <span class="p">}</span>
    
<span class="p">}</span>
</pre></table></code></div></div><blockquote><p><strong><em>To è·Ÿ From:</em></strong></p></blockquote><blockquote><p><em>å‡è®¾ä»Šå¤© <code class="language-plaintext highlighter-rouge">HomeViewController</code> è¦ <code class="language-plaintext highlighter-rouge">Present/Push</code> <code class="language-plaintext highlighter-rouge">DetailViewController</code> æ—¶ï¼Œ</em></p></blockquote><blockquote><p><em>From = HomeViewController / To = DetailViewController</em></p></blockquote><blockquote><p><em><code class="language-plaintext highlighter-rouge">DetailViewController</code> è¦ <code class="language-plaintext highlighter-rouge">Dismiss/Pop</code> æ—¶ï¼Œ</em></p></blockquote><blockquote><p><em>From = DetailViewController / To = HomeViewController</em></p></blockquote><p>âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸</p><blockquote><p><em>å®˜æ–¹å»ºè®®ä» <code class="language-plaintext highlighter-rouge">transitionContext.view</code> æ‹¿ View ä½¿ç”¨ï¼Œè€Œä¸æ˜¯ä» <code class="language-plaintext highlighter-rouge">transitionContext.viewController</code> æ‹¿ .view ä½¿ç”¨ã€‚</em></p></blockquote><blockquote><p><em>ä½†è¿™è¾¹æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨åš Present/Dismiss åŠ¨ç”»æ—¶å½“ <code class="language-plaintext highlighter-rouge">modalPresentationStyle = .custom</code> ï¼›</em></p></blockquote><blockquote><p><em>Present æ—¶ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">transitionContext.view(forKey: .from)</code> ä¼šæ˜¯ <strong>nil</strong> ã€</em></p></blockquote><blockquote><p><em>Dismiss æ—¶ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">transitionContext.view(forKey: .to)</code> ä¹Ÿä¼šæ˜¯ <strong>nil</strong> ï¼›</em></p></blockquote><blockquote><p><em>è¿˜æ˜¯éœ€è¦ä» viewController.view æ‹¿å€¼æ¥ç”¨ã€‚</em></p></blockquote><p>âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸</p><blockquote><p><code class="language-plaintext highlighter-rouge">transitionContext.completeTransition(!transitionContext.transitionWasCancelled)</code> <em>åŠ¨ç”»å®Œæˆå¿…é¡»å‘¼å«ï¼Œå¦åˆ™ <strong>ç”»é¢ä¼šå¡æ­»</strong> ï¼›</em></p></blockquote><blockquote><p><em>ä½†å›  <code class="language-plaintext highlighter-rouge">UIView.animate</code> è‹¥æ— å¯æ‰§è¡ŒåŠ¨ç”»å°±ä¸ä¼š Call <code class="language-plaintext highlighter-rouge">completion</code> é€ æˆå‰è¿°æ–¹æ³•æœªè¢«å‘¼å«ï¼›æ‰€ä»¥åŠ¡å¿…ç¡®ä¿åŠ¨ç”»æ˜¯ä¼šæ‰§è¡Œçš„ (EX: yä»100åˆ°0)ã€‚</em></p></blockquote><p>â„¹ï¸â„¹ï¸â„¹ï¸â„¹ï¸â„¹ï¸</p><blockquote><p><em>å‚ä¸åŠ¨ç”»çš„ <code class="language-plaintext highlighter-rouge">ToView/FromView</code> ï¼Œè‹¥å›  View è¾ƒä¸ºå¤æ‚æˆ–åŠ¨ç”»æ—¶æœ‰äº›é—®é¢˜ï¼›å¯æ”¹ç”¨ <code class="language-plaintext highlighter-rouge">snapshotView(afterScreenUpdates:)</code> æˆªå›¾ä½œä¸ºåŠ¨ç”»å±•ç¤ºï¼Œå…ˆæˆªå›¾ç„¶å <code class="language-plaintext highlighter-rouge">transitionContext.containerView.addSubview(snapShotView)</code> ä¸Šå»å›¾å±‚ï¼Œæ¥è‘—éšè—åŸæœ¬çš„ <code class="language-plaintext highlighter-rouge">ToView/FromView (isHidden = true)</code> ï¼Œåœ¨åŠ¨ç”»ç»“æŸæ—¶åœ¨ <code class="language-plaintext highlighter-rouge">snapShotView.removeFromSuperview()</code> å’Œæ¢å¤æ˜¾ç¤ºåŸæœ¬çš„ <code class="language-plaintext highlighter-rouge">ToView/FromView (isHidden = true)</code> ã€‚</em></p></blockquote><h4 id="å¯ä¸­æ–­ç»§ç»­çš„è½¬åœºåŠ¨ç”»-uiviewpropertyanimator"><span class="me-2">å¯ä¸­æ–­ã€ç»§ç»­çš„è½¬åœºåŠ¨ç”»: UIViewPropertyAnimator</span><a href="#å¯ä¸­æ–­ç»§ç»­çš„è½¬åœºåŠ¨ç”»-uiviewpropertyanimator" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨ <strong>iOS â‰¥ 10</strong> æ–°çš„åŠ¨ç”»ç±»åˆ«æ¥å®ä½œåŠ¨ç”»æ•ˆæœï¼Œ çœ‹ä¸ªäººä¹ æƒ¯æˆ–æ˜¯åŠ¨ç”»è¦åšåˆ°å¤šç»†èŠ‚æ¥åšé€‰æ‹©ï¼Œ è™½ç„¶å®˜æ–¹çš„å»ºè®®æ˜¯æœ‰äº¤äº’å°±ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">UIViewPropertyAnimator</code> ä½† <strong>ä¸ç®¡æ˜¯äº¤äº’éäº¤äº’(æ‰‹åŠ¿æ§åˆ¶) ä¸€èˆ¬éƒ½ä½¿ç”¨ UIView.animate å³å¯</strong> ï¼› <code class="language-plaintext highlighter-rouge">UIViewPropertyAnimator</code> çš„è½¬åœºåŠ¨ç”»èƒ½åšåˆ°ä¸­æ–­ç»§ç»­çš„æ•ˆæœï¼Œè™½ç„¶æˆ‘ä¸çŸ¥é“å®é™…èƒ½åº”ç”¨åœ¨å“ªï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯å‚è€ƒ <a href="https://juejin.im/post/5c3aa7ff518825551e285b8d" target="_blank">æ­¤ç¯‡æ–‡ç« </a> ã€‚</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">class</span> <span class="kt">FadeInFadeOutTransition</span><span class="p">:</span> <span class="kt">NSObject</span><span class="p">,</span> <span class="kt">UIViewControllerAnimatedTransitioning</span> <span class="p">{</span>
    
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">animatorForCurrentTransition</span><span class="p">:</span> <span class="kt">UIViewImplicitlyAnimating</span><span class="p">?</span>

    <span class="kd">func</span> <span class="nf">interruptibleAnimator</span><span class="p">(</span><span class="n">using</span> <span class="nv">transitionContext</span><span class="p">:</span> <span class="kt">UIViewControllerContextTransitioning</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIViewImplicitlyAnimating</span> <span class="p">{</span>
        
        <span class="c1">//å½“å‰æœ‰è½¬åœºåŠ¨ç”»æ—¶ç›´æ¥è¿”å›</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">animatorForCurrentTransition</span> <span class="o">=</span> <span class="n">animatorForCurrentTransition</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">animatorForCurrentTransition</span>
        <span class="p">}</span>
        
        <span class="c1">//å‚æ•°åŒå‰è¿°</span>
        
        <span class="c1">//fromView.frame.origin.y = 100</span>
        
        <span class="k">let</span> <span class="nv">animator</span> <span class="o">=</span> <span class="kt">UIViewPropertyAnimator</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="nf">transitionDuration</span><span class="p">(</span><span class="nv">using</span><span class="p">:</span> <span class="n">transitionContext</span><span class="p">),</span> <span class="nv">curve</span><span class="p">:</span> <span class="o">.</span><span class="n">linear</span><span class="p">)</span>
        
        <span class="n">animator</span><span class="o">.</span><span class="n">addAnimations</span> <span class="p">{</span>
            <span class="c1">//fromView.frame.origin.y = 0</span>
        <span class="p">}</span>
        
        <span class="n">animator</span><span class="o">.</span><span class="n">addCompletion</span> <span class="p">{</span> <span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="k">in</span>
            <span class="n">transitionContext</span><span class="o">.</span><span class="nf">completeTransition</span><span class="p">(</span><span class="o">!</span><span class="n">transitionContext</span><span class="o">.</span><span class="n">transitionWasCancelled</span><span class="p">)</span>
        <span class="p">}</span>
        
        <span class="c1">//æŠ“è‘—åŠ¨ç”»</span>
        <span class="k">self</span><span class="o">.</span><span class="n">animatorForCurrentTransition</span> <span class="o">=</span> <span class="n">animator</span>
        <span class="k">return</span> <span class="n">animator</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">transitionDuration</span><span class="p">(</span><span class="n">using</span> <span class="nv">transitionContext</span><span class="p">:</span> <span class="kt">UIViewControllerContextTransitioning</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">TimeInterval</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mf">0.4</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">animateTransition</span><span class="p">(</span><span class="n">using</span> <span class="nv">transitionContext</span><span class="p">:</span> <span class="kt">UIViewControllerContextTransitioning</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//å¦‚æœæ˜¯éäº¤äº’ä¼šèµ°è¿™ï¼Œå°±è®©å®ƒä¹Ÿèµ°äº¤äº’çš„åŠ¨ç”»</span>
        <span class="k">let</span> <span class="nv">animator</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="nf">interruptibleAnimator</span><span class="p">(</span><span class="nv">using</span><span class="p">:</span> <span class="n">transitionContext</span><span class="p">)</span>
        <span class="n">animator</span><span class="o">.</span><span class="nf">startAnimation</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">animationEnded</span><span class="p">(</span><span class="n">_</span> <span class="nv">transitionCompleted</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//åŠ¨ç”»å®Œæˆï¼Œæ¸…ç©º</span>
        <span class="k">self</span><span class="o">.</span><span class="n">animatorForCurrentTransition</span> <span class="o">=</span> <span class="kc">nil</span>
    <span class="p">}</span>
    
<span class="p">}</span>
</pre></table></code></div></div><blockquote><p><em>äº¤äº’æƒ…å†µä¸‹ (åé¢è®²æ§åˆ¶ä¼šç»†æ)ï¼Œä¼šä½¿ç”¨ <code class="language-plaintext highlighter-rouge">interruptibleAnimator</code> æ–¹æ³•çš„åŠ¨ç”»ï¼›éäº¤äº’çš„æƒ…å†µåˆ™è¿˜æ˜¯ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">animateTransition</code> æ–¹æ³•ã€‚</em></p></blockquote><blockquote><p><em>å› ä¸ºèƒ½ç»§ç»­ã€ä¸­æ–­çš„ç‰¹æ€§ï¼›æ‰€ä»¥ <code class="language-plaintext highlighter-rouge">interruptibleAnimator</code> æ˜¯æœ‰å¯èƒ½ä¼šé‡å¤å‘¼å«ä½¿ç”¨çš„ï¼›æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªå…¨åŸŸå˜æ•°åšå­˜å–è¿”å›ã€‚</em></p></blockquote><p><strong>Murmurâ€¦</strong> å…¶å®æˆ‘æœ¬æ¥æ˜¯æƒ³å…¨éƒ½æ”¹ç”¨æ–°çš„ <code class="language-plaintext highlighter-rouge">UIViewPropertyAnimator</code> ä¹Ÿæƒ³æ¨èå¤§å®¶éƒ½ç”¨æ–°çš„æ¥åšï¼Œä½†æˆ‘é‡åˆ°ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„é—®é¢˜ï¼Œå°±æ˜¯åœ¨åšå…¨é¡µæ‰‹åŠ¿è¿”å› Pop åŠ¨ç”»æ—¶ï¼Œè‹¥æ‰‹åŠ¿æ”¾å¼€ï¼ŒåŠ¨ç”»å½’ä½ï¼Œä¸Šæ–¹çš„ Navigation Bar çš„ Item ä¼šæ·¡å…¥æ·¡å‡ºé—ªä¸€ä¸‹â€¦æ‰¾ä¸åˆ°è§£ï¼Œä½†å›å»ç”¨ <code class="language-plaintext highlighter-rouge">UIView.animate</code> å°±æ²¡è¿™é—®é¢˜ï¼›å¦‚æœæœ‰åœ°æ–¹æ²¡æ³¨æ„åˆ°æ¬¢è¿è·Ÿæˆ‘è¯´&lt;( _ _ )&gt;ã€‚</p><p><a href="/assets/14cee137c565/1*cVg7iZ_rFC2nxm2H5ET1Gg.gif" class="popup img-link blur"><img data-src="/assets/14cee137c565/1*cVg7iZ_rFC2nxm2H5ET1Gg.gif" alt="é—®é¢˜å›¾; + æŒ‰é’®æ˜¯ä¸Šä¸€é¡µçš„" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzODQiIGhlaWdodD0iMTA4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>é—®é¢˜å›¾; + æŒ‰é’®æ˜¯ä¸Šä¸€é¡µçš„</p><p>æ‰€ä»¥ä¿é™©èµ·è§è¿˜æ˜¯ç”¨æ—§çš„æ–¹å¼å§ï¼</p><p>å®é™…ä¼šä¾ç…§ä¸åŒçš„åŠ¨ç”»æ•ˆæœå»ºç«‹ä¸ªåˆ«çš„ Classï¼Œè‹¥è§‰å¾—å¾ˆæ¡£æ¡ˆæ‚ï¼Œå¯å‚è€ƒæ–‡æœ«åŒ…å¥½çš„æ–¹æ¡ˆï¼›æˆ–æ˜¯å°†åŒä¸ªè¿è´¯(Present+Dismii)åŠ¨ç”»æ”¾åœ¨ä¸€èµ·ã€‚</p><h4 id="transitioncoordinator"><span class="me-2">transitionCoordinator</span><a href="#transitioncoordinator" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å¦å¤–å¦‚æœéœ€è¦æ›´ç»†è‡´çš„æ§åˆ¶ï¼Œä¾‹å¦‚ ViewController é‡Œé¢æœ‰æŸä¸ªå…ƒä»¶éœ€è¦é…åˆè½¬åœºåŠ¨ç”»æ”¹å˜ï¼›å¯åœ¨ <code class="language-plaintext highlighter-rouge">UIViewController</code> ä¸­ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">transitionCoordinator</code> è¿›è¡Œåä½œï¼Œè¿™éƒ¨åˆ†æˆ‘æ²¡ç”¨åˆ°ï¼›æœ‰å…´è¶£å¯å‚è€ƒ <a href="https://kemchenj.github.io/2018-12-24/" target="_blank">æ­¤ç¯‡æ–‡ç« </a> ã€‚</p><h3 id="æ€ä¹ˆæ§åˆ¶åŠ¨ç”»"><span class="me-2">æ€ä¹ˆæ§åˆ¶åŠ¨ç”»ï¼Ÿ</span><a href="#æ€ä¹ˆæ§åˆ¶åŠ¨ç”»" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>è¿™è¾¹å°±æ˜¯å‰è¿°æ‰€è¯´çš„ã€Œäº¤äº’ã€ï¼Œå®é™…å°±æ˜¯æ‰‹åŠ¿æ§åˆ¶ï¼›æœ¬ç¯‡æœ€é‡è¦çš„ç« èŠ‚ï¼Œå› ä¸ºæˆ‘ä»¬çš„è¦åšçš„æ˜¯æ‰‹åŠ¿æ“ä½œä¸è½¬åœºåŠ¨ç”»çš„è¿åŠ¨åŠŸèƒ½ï¼Œæ‰èƒ½è¾¾æˆæˆ‘ä»¬è¦çš„ä¸‹æ‹‰å…³é—­ã€å…¨é¡µè¿”å›åŠŸèƒ½ã€‚</p><h4 id="æ§åˆ¶ä»£ç†è®¾ç½®"><span class="me-2">æ§åˆ¶ä»£ç†è®¾ç½®:</span><a href="#æ§åˆ¶ä»£ç†è®¾ç½®" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>åŒå‰é¢ <code class="language-plaintext highlighter-rouge">ViewController</code> ä»£ç†åŠ¨ç”»è®¾è®¡ï¼Œäº¤äº’å¤„ç†çš„ç±»ä¹Ÿéœ€è¦åœ¨ä»£ç†ä¸­å‘ŠçŸ¥ <code class="language-plaintext highlighter-rouge">ViewController</code> ã€‚</p><p><strong>UITabBarController: æ— </strong> <strong>UINavigationController (Push/Pop):</strong></p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">class</span> <span class="kt">HomeNavigationController</span><span class="p">:</span> <span class="kt">UINavigationController</span> <span class="p">{</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
        
        <span class="k">self</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">HomeNavigationController</span><span class="p">:</span> <span class="kt">UINavigationControllerDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">navigationController</span><span class="p">(</span><span class="n">_</span> <span class="nv">navigationController</span><span class="p">:</span> <span class="kt">UINavigationController</span><span class="p">,</span> <span class="n">animationControllerFor</span> <span class="nv">operation</span><span class="p">:</span> <span class="kt">UINavigationController</span><span class="o">.</span><span class="kt">Operation</span><span class="p">,</span> <span class="n">from</span> <span class="nv">fromVC</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="n">to</span> <span class="nv">toVC</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIViewControllerAnimatedTransitioning</span><span class="p">?</span> <span class="p">{</span>
        
        <span class="k">if</span> <span class="n">operation</span> <span class="o">==</span> <span class="o">.</span><span class="n">pop</span> <span class="p">{</span>
            <span class="k">return</span> <span class="c1">//UIViewControllerAnimatedTransitioning è¿”å›æ—¶è¦å¥—ç”¨çš„åŠ¨ç”»</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">operation</span> <span class="o">==</span> <span class="o">.</span><span class="n">push</span> <span class="p">{</span>
            <span class="k">return</span> <span class="c1">//UIViewControllerAnimatedTransitioning pushæ—¶è¦å¥—ç”¨çš„åŠ¨ç”»</span>
        <span class="p">}</span>
        <span class="c1">//å›ä¼  nil å³èµ°é¢„è®¾åŠ¨ç”»</span>
        <span class="k">return</span> <span class="kc">nil</span>
    <span class="p">}</span>
    
    <span class="c1">//æ–°å¢äº¤äº’ä»£ç†æ–¹æ³•:</span>
    <span class="kd">func</span> <span class="nf">navigationController</span><span class="p">(</span><span class="n">_</span> <span class="nv">navigationController</span><span class="p">:</span> <span class="kt">UINavigationController</span><span class="p">,</span> <span class="n">interactionControllerFor</span> <span class="nv">animationController</span><span class="p">:</span> <span class="kt">UIViewControllerAnimatedTransitioning</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIViewControllerInteractiveTransitioning</span><span class="p">?</span> <span class="p">{</span>
        <span class="c1">//è¿™è¾¹æ— æ³•å¾—çŸ¥æ˜¯Popè¿˜æ˜¯Push åªèƒ½ä»è¦åšçš„åŠ¨ç”»æœ¬èº«åšåˆ¤æ–­</span>
        <span class="k">if</span> <span class="n">animationController</span> <span class="k">is</span> <span class="n">pushæ—¶å¥—ç”¨çš„åŠ¨ç”»</span> <span class="p">{</span>
            <span class="k">return</span> <span class="c1">//UIPercentDrivenInteractiveTransition pushåŠ¨ç”»çš„äº¤äº’æ§åˆ¶æ–¹æ³•</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">animationController</span> <span class="k">is</span> <span class="n">è¿”å›æ—¶å¥—ç”¨çš„åŠ¨ç”»</span> <span class="p">{</span>
            <span class="k">return</span> <span class="c1">//UIPercentDrivenInteractiveTransition popåŠ¨ç”»çš„äº¤äº’æ§åˆ¶æ–¹æ³•</span>
        <span class="p">}</span>
        <span class="c1">//å›ä¼  nil å³ä¸åšäº¤äº’å¤„ç†</span>
        <span class="k">return</span> <span class="kc">nil</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p><strong>UIViewController (Present/Dismiss):</strong></p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">class</span> <span class="kt">HomeAddViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>

        <span class="k">self</span><span class="o">.</span><span class="n">modalPresentationStyle</span> <span class="o">=</span> <span class="o">.</span><span class="n">custom</span>
        <span class="k">self</span><span class="o">.</span><span class="n">transitioningDelegate</span> <span class="o">=</span> <span class="k">self</span>
    <span class="p">}</span>
    
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">HomeAddViewController</span><span class="p">:</span> <span class="kt">UIViewControllerTransitioningDelegate</span> <span class="p">{</span>
    
    <span class="kd">func</span> <span class="nf">interactionControllerForDismissal</span><span class="p">(</span><span class="n">using</span> <span class="nv">animator</span><span class="p">:</span> <span class="kt">UIViewControllerAnimatedTransitioning</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIViewControllerInteractiveTransitioning</span><span class="p">?</span> <span class="p">{</span>
        <span class="c1">//return nil å³ä¸åšäº¤äº’å¤„ç†</span>
        <span class="k">return</span> <span class="c1">//UIPercentDrivenInteractiveTransition Dismissæ—¶äº¤äº’æ§åˆ¶æ–¹æ³•</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">interactionControllerForPresentation</span><span class="p">(</span><span class="n">using</span> <span class="nv">animator</span><span class="p">:</span> <span class="kt">UIViewControllerAnimatedTransitioning</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIViewControllerInteractiveTransitioning</span><span class="p">?</span> <span class="p">{</span>
        <span class="c1">//return nil å³ä¸åšäº¤äº’å¤„ç†</span>
        <span class="k">return</span> <span class="c1">//UIPercentDrivenInteractiveTransition Presentæ—¶äº¤äº’æ§åˆ¶æ–¹æ³•</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">animationController</span><span class="p">(</span><span class="n">forPresented</span> <span class="nv">presented</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="nv">presenting</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="nv">source</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIViewControllerAnimatedTransitioning</span><span class="p">?</span> <span class="p">{</span>
        <span class="c1">//å›ä¼  nil å³èµ°é¢„è®¾åŠ¨ç”»</span>
        <span class="k">return</span> <span class="c1">//UIViewControllerAnimatedTransitioning Presentæ—¶è¦å¥—ç”¨çš„åŠ¨ç”»</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">animationController</span><span class="p">(</span><span class="n">forDismissed</span> <span class="nv">dismissed</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIViewControllerAnimatedTransitioning</span><span class="p">?</span> <span class="p">{</span>
        <span class="c1">//å›ä¼  nil å³èµ°é¢„è®¾åŠ¨ç”»</span>
        <span class="k">return</span> <span class="c1">//UIViewControllerAnimatedTransitioning Dismissæ—¶è¦å¥—ç”¨çš„åŠ¨ç”»</span>
    <span class="p">}</span>
    
<span class="p">}</span>
</pre></table></code></div></div><p>âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸</p><blockquote><p><em>æœ‰å®ä½œ interactionControllerFor â€¦ è¿™äº›æ–¹æ³•ï¼Œå°±ç®—åŠ¨ç”»æ˜¯éäº¤äº’(EX: self.present ç³»ç»Ÿå‘¼å«è½¬åœº) ä¹Ÿä¼š Call è¿™äº›æ–¹æ³•å¤„ç†ï¼›æˆ‘ä»¬éœ€è¦æ§åˆ¶çš„æ˜¯é‡Œé¢çš„ <code class="language-plaintext highlighter-rouge">wantsInteractiveStart</code> å‚æ•°(ä¸‹é¢ä»‹ç»)ã€‚</em></p></blockquote><h4 id="åŠ¨ç”»äº¤äº’å¤„ç†ç±»-uipercentdriveninteractivetransition"><span class="me-2">åŠ¨ç”»äº¤äº’å¤„ç†ç±» UIPercentDrivenInteractiveTransition:</span><a href="#åŠ¨ç”»äº¤äº’å¤„ç†ç±»-uipercentdriveninteractivetransition" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å†æ¥è®²æ ¸å¿ƒè¦å®ä½œçš„ <code class="language-plaintext highlighter-rouge">UIPercentDrivenInteractiveTransition</code> ã€‚</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">class</span> <span class="kt">PullToDismissInteractive</span><span class="p">:</span> <span class="kt">UIPercentDrivenInteractiveTransition</span> <span class="p">{</span>
    
    <span class="c1">//è¦åŠ æ‰‹åŠ¿æ§åˆ¶äº¤äº’çš„UIView</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">interactiveView</span><span class="p">:</span> <span class="kt">UIView</span><span class="o">!</span>
    <span class="c1">//å½“å‰çš„UIViewController</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">presented</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="o">!</span>
    <span class="c1">//å½“æ‰˜æ‹‰è¶…è¿‡å¤šå°‘%åå°±å®Œæˆæ‰§è¡Œï¼Œå¦åˆ™å¤åŸ</span>
    <span class="kd">private</span> <span class="k">let</span> <span class="nv">thredhold</span><span class="p">:</span> <span class="kt">CGFloat</span> <span class="o">=</span> <span class="mf">0.4</span>
    
    <span class="c1">//ä¸åŒè½¬åœºæ•ˆæœå¯èƒ½éœ€è¦ä¸åŒèµ„è®¯ï¼Œå¯è‡ªè®¢</span>
    <span class="kd">convenience</span> <span class="nf">init</span><span class="p">(</span><span class="n">_</span> <span class="nv">presented</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="n">_</span> <span class="nv">interactiveView</span><span class="p">:</span> <span class="kt">UIView</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">interactiveView</span> <span class="o">=</span> <span class="n">interactiveView</span>
        <span class="k">self</span><span class="o">.</span><span class="n">presented</span> <span class="o">=</span> <span class="n">presented</span>
        <span class="nf">setupPanGesture</span><span class="p">()</span>
        
        <span class="c1">//é»˜è®¤å€¼ï¼Œå‘ŠçŸ¥ç³»ç»Ÿå½“å‰éäº¤äº’åŠ¨ç”»</span>
        <span class="n">wantsInteractiveStart</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="p">}</span>

    <span class="kd">private</span> <span class="kd">func</span> <span class="nf">setupPanGesture</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">panGesture</span> <span class="o">=</span> <span class="kt">UIPanGestureRecognizer</span><span class="p">(</span><span class="nv">target</span><span class="p">:</span> <span class="k">self</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="k">#selector</span><span class="p">(</span><span class="nf">handlePan</span><span class="p">(</span><span class="nv">_</span><span class="p">:)))</span>
        <span class="n">panGesture</span><span class="o">.</span><span class="n">maximumNumberOfTouches</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">panGesture</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
        <span class="n">interactiveView</span><span class="o">.</span><span class="nf">addGestureRecognizer</span><span class="p">(</span><span class="n">panGesture</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">@objc</span> <span class="kd">func</span> <span class="nf">handlePan</span><span class="p">(</span><span class="n">_</span> <span class="nv">sender</span><span class="p">:</span> <span class="kt">UIPanGestureRecognizer</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">sender</span><span class="o">.</span><span class="n">state</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">began</span><span class="p">:</span>
            <span class="c1">//reset æ‰‹åŠ¿ä½ç½®</span>
            <span class="n">sender</span><span class="o">.</span><span class="nf">setTranslation</span><span class="p">(</span><span class="o">.</span><span class="n">zero</span><span class="p">,</span> <span class="nv">in</span><span class="p">:</span> <span class="n">interactiveView</span><span class="p">)</span>
            <span class="c1">//å‘ŠçŸ¥ç³»ç»Ÿå½“å‰å¼€å§‹çš„æ˜¯æ‰‹åŠ¿è§¦å‘çš„äº¤äº’åŠ¨ç”»</span>
            <span class="n">wantsInteractiveStart</span> <span class="o">=</span> <span class="kc">true</span>
            
            <span class="c1">//åœ¨æ‰‹åŠ¿beganæ—¶å‘¼å«è¦åšçš„è½¬åœºæ•ˆæœ(ä¸ä¼šç›´æ¥æ‰§è¡Œï¼Œç³»ç»Ÿä¼šæŠ“ä½)</span>
            <span class="c1">//ç„¶åè½¬åœºæ•ˆæœæœ‰è®¾å¯¹åº”çš„åŠ¨ç”»å°±ä¼šè·³åˆ° UIViewControllerAnimatedTransitioning å¤„ç†</span>
            <span class="c1">// animated ä¸€å®šä¸º true å¦åˆ™æ²¡åŠ¨ç”»</span>
            
            <span class="c1">//Dismiss:</span>
            <span class="k">self</span><span class="o">.</span><span class="n">presented</span><span class="o">.</span><span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
            <span class="c1">//Present:</span>
            <span class="c1">//self.present(presenting,animated: true)</span>
            <span class="c1">//Push:</span>
            <span class="c1">//self.navigationController.push(presenting)</span>
            <span class="c1">//Pop:</span>
            <span class="c1">//self.navigationController.pop(animated: true)</span>
        
        <span class="k">case</span> <span class="o">.</span><span class="nv">changed</span><span class="p">:</span>
            <span class="c1">//æ‰‹åŠ¿æ»‘åŠ¨çš„ä½ç½®è®¡ç®— å¯¹åº”åŠ¨ç”»å®Œæˆç™¾åˆ†æ¯” 0~1</span>
            <span class="c1">//å®é™…ä¾åŠ¨ç”»ç±»å‹ä¸åŒï¼Œè®¡ç®—æ–¹å¼ä¸åŒ</span>
            <span class="k">let</span> <span class="nv">translation</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="nf">translation</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="n">interactiveView</span><span class="p">)</span>
            <span class="k">guard</span> <span class="n">translation</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">sender</span><span class="o">.</span><span class="nf">setTranslation</span><span class="p">(</span><span class="o">.</span><span class="n">zero</span><span class="p">,</span> <span class="nv">in</span><span class="p">:</span> <span class="n">interactiveView</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="p">}</span>
            <span class="k">let</span> <span class="nv">percentage</span> <span class="o">=</span> <span class="nf">abs</span><span class="p">(</span><span class="n">translation</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="n">interactiveView</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
            
            <span class="c1">//update UIViewControllerAnimatedTransitioning åŠ¨ç”»ç™¾åˆ†æ¯”</span>
            <span class="nf">update</span><span class="p">(</span><span class="n">percentage</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">ended</span><span class="p">:</span>
            <span class="c1">//æ‰‹åŠ¿æ”¾å¼€å®Œæˆæ—¶ï¼Œçœ‹å®Œæˆåº¦æœ‰æ²¡æœ‰è¶…è¿‡ thredhold</span>
            <span class="n">wantsInteractiveStart</span> <span class="o">=</span> <span class="kc">false</span>
            <span class="k">if</span> <span class="n">percentComplete</span> <span class="o">&gt;=</span> <span class="n">thredhold</span> <span class="p">{</span>
              <span class="c1">//æœ‰ï¼Œå‘ŠçŸ¥åŠ¨ç”»å®Œæˆ</span>
              <span class="nf">finish</span><span class="p">()</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="c1">//æ— ï¼Œå‘ŠçŸ¥åŠ¨ç”»å½’ä½å¤åŸ</span>
              <span class="nf">cancel</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="k">case</span> <span class="o">.</span><span class="n">cancelled</span><span class="p">,</span> <span class="o">.</span><span class="nv">failed</span><span class="p">:</span>
          <span class="c1">//å–æ¶ˆã€é”™è¯¯æ—¶</span>
          <span class="n">wantsInteractiveStart</span> <span class="o">=</span> <span class="kc">false</span>
          <span class="nf">cancel</span><span class="p">()</span>
        <span class="k">default</span><span class="p">:</span>
          <span class="n">wantsInteractiveStart</span> <span class="o">=</span> <span class="kc">false</span>
          <span class="k">return</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//å½“UIViewControllerå†…æœ‰UIScrollViewå…ƒä»¶(UITableView/UICollectionView/WKWebView....)ï¼Œé˜²æ­¢æ‰‹åŠ¿å†²çª</span>
<span class="c1">//å½“é‡Œé¢çš„UIScrollViewå…ƒä»¶å·²æ»‘åˆ°é¡¶éƒ¨ï¼Œåˆ™å¯ç”¨äº¤äº’è½¬åœºçš„æ‰‹åŠ¿æ“ä½œ</span>
<span class="kd">extension</span> <span class="kt">PullToDismissInteractive</span><span class="p">:</span> <span class="kt">UIGestureRecognizerDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">gestureRecognizer</span><span class="p">(</span><span class="n">_</span> <span class="nv">gestureRecognizer</span><span class="p">:</span> <span class="kt">UIGestureRecognizer</span><span class="p">,</span> <span class="n">shouldRecognizeSimultaneouslyWith</span> <span class="nv">otherGestureRecognizer</span><span class="p">:</span> <span class="kt">UIGestureRecognizer</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">scrollView</span> <span class="o">=</span> <span class="n">otherGestureRecognizer</span><span class="o">.</span><span class="n">view</span> <span class="k">as?</span> <span class="kt">UIScrollView</span> <span class="p">{</span>
            <span class="k">if</span> <span class="n">scrollView</span><span class="o">.</span><span class="n">contentOffset</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">true</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">true</span>
    <span class="p">}</span>
    
<span class="p">}</span>
</pre></table></code></div></div><p><a href="https://stackoverflow.com/questions/29558622/pan-gesture-why-need-settranslation-to-zero" target="_blank"><em>*å…³äº sender.setTranslation( .zero, in:interactiveView) åŸå› çš„è¡¥å……ç‚¹æˆ‘&lt;</em></a></p><p>æˆ‘ä»¬éœ€è¦ä¾æ®ä¸åŒçš„æ‰‹åŠ¿æ“ä½œæ•ˆæœï¼Œå®ä½œä¸åŒçš„ Classï¼›è‹¥æ˜¯åŒä¸ªè¿è´¯(Present+Dismii)çš„æ“ä½œä¹Ÿå¯åŒ…åœ¨ä¸€èµ·ã€‚</p><p>âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸</p><blockquote><p><code class="language-plaintext highlighter-rouge">wantsInteractiveStart</code> <em><strong>åŠ¡å¿…å¤„äºç¬¦åˆçš„çŠ¶æ€</strong> ï¼Œè‹¥åœ¨äº¤äº’åŠ¨ç”»æ—¶å‘ŠçŸ¥ <code class="language-plaintext highlighter-rouge">wantsInteractiveStart = false</code> ä¹Ÿä¼šé€ æˆå¡ç”»é¢ï¼›</em></p></blockquote><blockquote><p><em>è¦é€€å‡ºé‡è¿› APP æ‰ä¼šæ¢å¤æ­£ã€‚</em></p></blockquote><p>âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸</p><blockquote><p><em>interactiveView ä¹Ÿä¸€å®šè¦æ˜¯ <strong>isUserInteractionEnabled = true</strong> å“¦</em></p></blockquote><blockquote><p><em>å¯ä»¥å¤šåŠ è®¾ç½®ç¡®ä¿ä¸€ä¸‹ï¼</em></p></blockquote><h3 id="ç»„åˆ"><span class="me-2">ç»„åˆ</span><a href="#ç»„åˆ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>å½“æˆ‘ä»¬æŠŠè¿™é‡Œä¸ª <code class="language-plaintext highlighter-rouge">Delegate</code> è®¾å¥½ã€ <code class="language-plaintext highlighter-rouge">Class</code> å»ºå¥½åå°±èƒ½åšåˆ°æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½äº†ã€‚ å†æ¥ä¸å•°å”†ï¼Œç›´æ¥ä¸Šå®ŒæˆèŒƒä¾‹ã€‚</p><h3 id="è‡ªåˆ¶ä¸‹æ‹‰å…³é—­é¡µé¢æ•ˆæœ"><span class="me-2">è‡ªåˆ¶ä¸‹æ‹‰å…³é—­é¡µé¢æ•ˆæœ</span><a href="#è‡ªåˆ¶ä¸‹æ‹‰å…³é—­é¡µé¢æ•ˆæœ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>è‡ªåˆ¶ä¸‹æ‹‰çš„å¥½å¤„åœ¨èƒ½æ”¯æ´å¸‚é¢æ‰€æœ‰ iOS ç‰ˆæœ¬ã€å¯æ§åˆ¶ç›–æ¿ç™¾åˆ†æ¯”ã€æ§åˆ¶è§¦å‘å…³é—­ä½ç½®ã€å®¢åˆ¶åŒ–åŠ¨ç”»æ•ˆæœã€‚</p><p><a href="/assets/14cee137c565/1*Wz8y5UJSgS0IUN86upSqLw.gif" class="popup img-link blur"><img data-src="/assets/14cee137c565/1*Wz8y5UJSgS0IUN86upSqLw.gif" alt="ç‚¹å³ä¸Šæ–¹ + Present é¡µé¢" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzODQiIGhlaWdodD0iNjYwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>ç‚¹å³ä¸Šæ–¹ + Present é¡µé¢</p><p>è¿™æ˜¯ä¸€ä¸ª <code class="language-plaintext highlighter-rouge">HomeViewController</code> Present <code class="language-plaintext highlighter-rouge">HomeAddViewController</code> å’Œ <code class="language-plaintext highlighter-rouge">HomeAddViewController</code> Dismissçš„èŒƒä¾‹ã€‚</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
</pre><td class="rouge-code"><pre>import UIKit

class HomeViewController: UIViewController {

    @IBAction func addButtonTapped(_ sender: Any) {
        guard let homeAddViewController = UIStoryboard(name: "Main", bundle: nil).instantiateViewController(identifier: "HomeAddViewController") as? HomeAddViewController else {
            return
        }
        
        //transitioningDelegate å¯æŒ‡å®šç›®æ ‡ViewControllerå¤„ç†æˆ–å½“å‰çš„ViewControllerå¤„ç†
        homeAddViewController.transitioningDelegate = homeAddViewController
        homeAddViewController.modalPresentationStyle = .custom
        self.present(homeAddViewController, animated: true, completion: nil)
    }

}
import UIKit

class HomeAddViewController: UIViewController {

    private var pullToDismissInteractive:PullToDismissInteractive!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        
        //ç»‘å®šè½¬åœºäº¤äº’èµ„è®¯
        self.pullToDismissInteractive = PullToDismissInteractive(self, self.view)
    }
    
}

extension HomeAddViewController: UIViewControllerTransitioningDelegate {
    
    func interactionControllerForDismissal(using animator: UIViewControllerAnimatedTransitioning) -&gt; UIViewControllerInteractiveTransitioning? {
        return pullToDismissInteractive
    }
    
    func animationController(forPresented presented: UIViewController, presenting: UIViewController, source: UIViewController) -&gt; UIViewControllerAnimatedTransitioning? {
        return PresentAndDismissTransition(false)
    }
    
    func animationController(forDismissed dismissed: UIViewController) -&gt; UIViewControllerAnimatedTransitioning? {
        return PresentAndDismissTransition(true)
    }
    
    func interactionControllerForPresentation(using animator: UIViewControllerAnimatedTransitioning) -&gt; UIViewControllerInteractiveTransitioning? {
        //è¿™è¾¹æ— Presentæ“ä½œæ‰‹åŠ¿
        return nil
    }
}
import UIKit

class PullToDismissInteractive: UIPercentDrivenInteractiveTransition {
    
    private var interactiveView: UIView!
    private var presented: UIViewController!
    private var completion:(() -&gt; Void)?
    private let thredhold: CGFloat = 0.4
    
    convenience init(_ presented: UIViewController, _ interactiveView: UIView,_ completion:(() -&gt; Void)? = nil) {
        self.init()
        self.interactiveView = interactiveView
        self.completion = completion
        self.presented = presented
        setupPanGesture()
        
        wantsInteractiveStart = false
    }

    private func setupPanGesture() {
        let panGesture = UIPanGestureRecognizer(target: self, action: #selector(handlePan(_:)))
        panGesture.maximumNumberOfTouches = 1
        panGesture.delegate = self
        interactiveView.addGestureRecognizer(panGesture)
    }

    @objc func handlePan(_ sender: UIPanGestureRecognizer) {
        switch sender.state {
        case .began:
            sender.setTranslation(.zero, in: interactiveView)
            wantsInteractiveStart = true
            
            self.presented.dismiss(animated: true, completion: self.completion)
        case .changed:
            let translation = sender.translation(in: interactiveView)
            guard translation.y &gt;= 0 else {
                sender.setTranslation(.zero, in: interactiveView)
                return
            }

            let percentage = abs(translation.y / interactiveView.bounds.height)
            update(percentage)
        case .ended:
            if percentComplete &gt;= thredhold {
                finish()
            } else {
                wantsInteractiveStart = false
                cancel()
            }
        case .cancelled, .failed:
            wantsInteractiveStart = false
            cancel()
        default:
            wantsInteractiveStart = false
            return
        }
    }
}

extension PullToDismissInteractive: UIGestureRecognizerDelegate {
    func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldRecognizeSimultaneouslyWith otherGestureRecognizer: UIGestureRecognizer) -&gt; Bool {
        if let scrollView = otherGestureRecognizer.view as? UIScrollView {
            if scrollView.contentOffset.y &lt;= 0 {
                return true
            } else {
                return false
            }
        }
        return true
    }
    
}
</pre></table></code></div></div><p>ä»¥ä¸Šå°±èƒ½è¾¾åˆ°å¦‚å›¾çš„æ•ˆæœï¼Œè¿™è¾¹å› æ•™å­¦å±•ç¤ºä¸æƒ³å¼„çš„è·¯å¤ªå¤æ‚ï¼Œæ‰€ä»¥ç¨‹å¼ç å¾ˆä¸‘ï¼Œè¿˜æœ‰å¾ˆå¤šä¼˜åŒ–æ•´åˆçš„ç©ºé—´ã€‚</p><blockquote><p><strong><em>å€¼å¾—ä¸€æçš„æ˜¯â€¦</em></strong></p></blockquote><blockquote><p><em>iOS â‰¥ 13ï¼Œå¦‚æœé‡åˆ° View å†…å®¹æœ‰ UITextViewï¼Œåœ¨åšä¸‹æ‹‰å…³é—­åŠ¨ç”»æ—¶ï¼ŒåŠ¨ç”»å½“ä¸­ UITextView çš„æ–‡å­—å†…å®¹ä¼šä¸€ç‰‡ç©ºç™½ï¼›é€ æˆä½“éªŒä¼šé—ªä¸€ä¸‹ <a href="https://twitter.com/zhgchgli/status/1207851671553892352" target="_blank">(å½±ç‰‡èŒƒä¾‹)</a> â€¦</em></p></blockquote><blockquote><p><em>è¿™è¾¹çš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨åšåŠ¨ç”»æ—¶ç”¨ <code class="language-plaintext highlighter-rouge">snapshotView(afterScreenUpdates:)</code> æˆªå›¾å–ä»£åŸæœ¬çš„ View å›¾å±‚ã€‚</em></p></blockquote><h3 id="å…¨é¡µå³æ»‘è¿”å›"><span class="me-2">å…¨é¡µå³æ»‘è¿”å›</span><a href="#å…¨é¡µå³æ»‘è¿”å›" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>åœ¨å¯»æ‰¾å…¨ç”»é¢éƒ½èƒ½æ‰‹åŠ¿å³æ»‘è¿”å›çš„è§£å†³æ–¹æ¡ˆæ—¶ï¼Œæ‰¾åˆ°ä¸ª <strong>Tricky</strong> çš„æ–¹æ³•ï¼š ç›´æ¥åœ¨ç”»é¢ä¸ŠåŠ ä¸€ä¸ª <code class="language-plaintext highlighter-rouge">UIPanGestureRecognizer</code> ç„¶åå°† <code class="language-plaintext highlighter-rouge">target</code> ã€ <code class="language-plaintext highlighter-rouge">action</code> éƒ½æŒ‡å®šåˆ°åŸç”Ÿçš„ <code class="language-plaintext highlighter-rouge">interactivePopGestureRecognizer</code> ï¼Œ <code class="language-plaintext highlighter-rouge">action:handleNavigationTransition</code> ã€‚ <a href="https://juejin.im/entry/5795809dd342d30059ed5c60" target="_blank"><em>*è¯¦ç»†æ–¹æ³•ç‚¹æˆ‘&lt;</em></a></p><p>æ²¡é”™ï¼çœ‹èµ·æ¥å°±å¾ˆ Private APIï¼Œæ„Ÿè§‰å®¡æ ¸ä¼šè¢«æ‹’ï¼›è€Œä¸”ä¸ç¡®å®š Swift æ˜¯å¦å¯ç”¨ï¼Œåº”è¯¥æœ‰ç”¨åˆ° OC æ‰æœ‰çš„ Runtime ç‰¹æ€§ã€‚</p><h4 id="è¿˜æ˜¯èµ°æ­£è§„çš„å§"><span class="me-2">è¿˜æ˜¯èµ°æ­£è§„çš„å§ï¼š</span><a href="#è¿˜æ˜¯èµ°æ­£è§„çš„å§" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>ã„§æ ·ä½¿ç”¨æœ¬ç¯‡çš„æ–¹å¼ï¼Œæˆ‘ä»¬åœ¨ <code class="language-plaintext highlighter-rouge">navigationController</code> POP è¿”å›æ—¶è‡ªè¡Œå¤„ç†ï¼›æ·»åŠ ä¸€ä¸ªå…¨é¡µå³æ»‘æ‰‹åŠ¿æ§åˆ¶é…åˆè‡ªè®¢å³æ»‘åŠ¨ç”»ï¼Œå³å¯ï¼</p><p>å…¶ä»–çœç•¥ï¼Œåªè´´å…³é”®çš„åŠ¨ç”»è·Ÿäº¤äº’å¤„ç†ç±»åˆ«ï¼š</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre><td class="rouge-code"><pre>import UIKit

class SwipeBackInteractive: UIPercentDrivenInteractiveTransition {
    
    private var interactiveView: UIView!
    private var navigationController: UINavigationController!

    private let thredhold: CGFloat = 0.4
    
    convenience init(_ navigationController: UINavigationController, _ interactiveView: UIView) {
        self.init()
        self.interactiveView = interactiveView
        
        self.navigationController = navigationController
        setupPanGesture()
        
        wantsInteractiveStart = false
    }

    private func setupPanGesture() {
        let panGesture = UIPanGestureRecognizer(target: self, action: #selector(handlePan(_:)))
        panGesture.maximumNumberOfTouches = 1
        interactiveView.addGestureRecognizer(panGesture)
    }

    @objc func handlePan(_ sender: UIPanGestureRecognizer) {
        
        switch sender.state {
        case .began:
            sender.setTranslation(.zero, in: interactiveView)
            wantsInteractiveStart = true
            
            self.navigationController.popViewController(animated: true)
        case .changed:
            let translation = sender.translation(in: interactiveView)
            guard translation.x &gt;= 0 else {
                sender.setTranslation(.zero, in: interactiveView)
                return
            }

            let percentage = abs(translation.x / interactiveView.bounds.width)
            update(percentage)
        case .ended:
            if percentComplete &gt;= thredhold {
                finish()
            } else {
                wantsInteractiveStart = false
                cancel()
            }
        case .cancelled, .failed:
            wantsInteractiveStart = false
            cancel()
        default:
            wantsInteractiveStart = false
            return
        }
    }
}
</pre></table></code></div></div><h3 id="ä¸Šæ‹‰æ¸å…¥-uiviewcontroller"><span class="me-2">ä¸Šæ‹‰æ¸å…¥ UIViewController</span><a href="#ä¸Šæ‹‰æ¸å…¥-uiviewcontroller" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>åœ¨Viewä¸Šä¸Šæ‹‰æ¸å…¥ï¼‹ä¸‹æ‹‰å…³é—­ï¼Œå°±æ˜¯åœ¨åšç±»ä¼¼ Spotify çš„æ’­æ”¾å™¨è½¬åœºæ•ˆæœäº†ï¼</p><p>è¿™éƒ¨åˆ†è¾ƒä¸ºç¹çï¼Œä½†åŸç†ä¸€æ ·ï¼Œè¿™è¾¹å°±ä¸ PO å‡ºæ¥äº†ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯å‚è€ƒ GitHub èŒƒä¾‹å†…å®¹ã€‚</p><p>è¦è¯´å“ªé‡Œè¦æ³¨æ„ï¼Œå¤§æ¦‚å°±æ˜¯ <strong>åœ¨ä¸Šæ‹‰æ¸å…¥æ—¶ï¼ŒåŠ¨ç”»è¦ç¡®ä¿æ˜¯ä½¿ç”¨ã€Œ.curveLinear çº¿æ€§ã€å¦åˆ™ä¼šå‡ºç°ä¸Šæ‹‰ä¸è·Ÿæ‰‹çš„é—®é¢˜</strong> ï¼›æ‹‰çš„ç¨‹åº¦è·Ÿæ˜¾ç¤ºçš„ä½ç½®ä¸æ˜¯æ­£æ¯”ã€‚</p><h3 id="å®Œæˆ"><span class="me-2">å®Œæˆï¼</span><a href="#å®Œæˆ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/14cee137c565/1*RRAVb3p7mZpUCNOpd64-Pw.gif" class="popup img-link blur"><img data-src="/assets/14cee137c565/1*RRAVb3p7mZpUCNOpd64-Pw.gif" alt="å®Œæˆå›¾" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTUyIiBoZWlnaHQ9IjY1OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>å®Œæˆå›¾</p><blockquote><p>æ­¤ç¯‡å¾ˆé•¿ï¼Œä¹ŸèŠ±äº†æˆ‘è®¸ä¹…æ—¶é—´æ•´ç†åˆ¶ä½œï¼Œæ„Ÿè°¢æ‚¨çš„è€å¿ƒé˜…è¯»ã€‚</p></blockquote><h4 id="å…¨ç¯‡-github-èŒƒä¾‹ä¸‹è½½"><span class="me-2">å…¨ç¯‡ GitHub èŒƒä¾‹ä¸‹è½½ï¼š</span><a href="#å…¨ç¯‡-github-èŒƒä¾‹ä¸‹è½½" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://github.com/zhgchgli0718/UIViewControllerTransitionDemo" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/af405b87d71ea95f59b19f5de94bda740a12566ddf86eb5a9b34d2271d53bb20/zhgchgli0718/UIViewControllerTransitionDemo" alt="" loading="lazy"></a></p><p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p><ol><li><p><a href="https://imnotyourson.com/draggable-view-controller-interactive-view-controller/" target="_blank">Draggable view controller? Interactive view controller!</a></p><li><p><a href="https://juejin.im/post/5c24745b6fb9a049d5198ce5#18-%E5%AF%BC%E8%88%AA%E6%8E%A7%E5%88%B6%E5%99%A8%E8%BD%AC%E5%9C%BA" target="_blank">ç³»ç»Ÿå­¦ä¹ iOSåŠ¨ç”»ä¹‹å››ï¼šè§†å›¾æ§åˆ¶å™¨çš„è½¬åœºåŠ¨ç”»</a></p><li><p><a href="https://juejin.im/post/5c3aa7ff518825551e285b8d" target="_blank">ç³»ç»Ÿå­¦ä¹ iOSåŠ¨ç”»ä¹‹äº”ï¼šä½¿ç”¨UIViewPropertyAnimator</a></p><li><p><a href="https://juejin.im/post/5a9651d25188257a5911f666" target="_blank">ç”¨UIPresentationControlleræ¥å†™ä¸€ä¸ªç®€æ´æ¼‚äº®çš„åº•éƒ¨å¼¹å‡ºæ§ä»¶</a> (å•çº¯åªåšPresent åŠ¨ç”»æ•ˆæœå¯ç›´æ¥ç”¨è¿™ä¸ª)</p></ol><p><strong>è‹¥éœ€è¦å‚è€ƒä¼˜é›…çš„ç¨‹å¼ç å°è£…ä½¿ç”¨ï¼š</strong></p><ol><li><p>Swift: <a href="https://github.com/Kharauzov/SwipeableCards" target="_blank">https://github.com/Kharauzov/SwipeableCards</a></p><li><p>Objective-C: <a href="https://github.com/saiday/DraggableViewControllerDemo" target="_blank">https://github.com/saiday/DraggableViewControllerDemo</a></p></ol><p>æœ‰ä»»ä½•é—®é¢˜åŠæŒ‡æ•™æ¬¢è¿ <a href="https://www.zhgchg.li/contact" target="_blank">ä¸æˆ‘è”ç»œ</a> ã€‚</p><hr /><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=ğŸº&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a><br /></p><blockquote class="prompt-info"><p>æœ¬æ–‡é¦–æ¬¡å‘è¡¨äº Medium (<a href="https://medium.com/p/14cee137c565" target="_blank"><strong>ç‚¹å‡»æŸ¥çœ‹åŸå§‹ç‰ˆæœ¬</strong></a>)ï¼Œç”± <a href="/posts/tools/medium-to-jekyll/" target="_blank">ZMediumToMarkdown</a> æä¾›è‡ªåŠ¨è½¬æ¢ä¸åŒæ­¥æŠ€æœ¯ã€‚</p></blockquote><blockquote class="prompt-info"><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/zh-cn/zmediumtomarkdown/2020-01-11-14cee137c565.md" target="_blank">Improve this page on Github.</a></p></blockquote><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1K+ Followers</span></a></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/simplified-chinese/" class="post-tag no-text-decoration" >simplified-chinese</a> <a href="/tags/ios/" class="post-tag no-text-decoration" >ios</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/swift/" class="post-tag no-text-decoration" >swift</a> <a href="/tags/uiviewcontroller/" class="post-tag no-text-decoration" >uiviewcontroller</a> <a href="/tags/mobile-app-development/" class="post-tag no-text-decoration" >mobile-app-development</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=iOS%20UIViewController%20%E8%BD%AC%E5%9C%BA%E5%8A%A8%E7%94%BB%EF%BD%9C%E4%B8%8B%E6%8B%89%E5%85%B3%E9%97%AD%E3%80%81%E4%B8%8A%E6%8B%89%E6%B8%90%E5%85%A5%E4%B8%8E%E5%85%A8%E9%A1%B5%E5%8F%B3%E6%BB%91%E8%BF%94%E5%9B%9E%E5%AE%9E%E4%BD%9C%E6%8A%80%E5%B7%A7%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fzh-cn%2Fios-uiviewcontroller-%25E8%25BD%25AC%25E5%259C%25BA%25E5%258A%25A8%25E7%2594%25BB-%25E4%25B8%258B%25E6%258B%2589%25E5%2585%25B3%25E9%2597%25AD-%25E4%25B8%258A%25E6%258B%2589%25E6%25B8%2590%25E5%2585%25A5%25E4%25B8%258E%25E5%2585%25A8%25E9%25A1%25B5%25E5%258F%25B3%25E6%25BB%2591%25E8%25BF%2594%25E5%259B%259E%25E5%25AE%259E%25E4%25BD%259C%25E6%258A%2580%25E5%25B7%25A7-14cee137c565%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=iOS%20UIViewController%20%E8%BD%AC%E5%9C%BA%E5%8A%A8%E7%94%BB%EF%BD%9C%E4%B8%8B%E6%8B%89%E5%85%B3%E9%97%AD%E3%80%81%E4%B8%8A%E6%8B%89%E6%B8%90%E5%85%A5%E4%B8%8E%E5%85%A8%E9%A1%B5%E5%8F%B3%E6%BB%91%E8%BF%94%E5%9B%9E%E5%AE%9E%E4%BD%9C%E6%8A%80%E5%B7%A7%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fzh-cn%2Fios-uiviewcontroller-%25E8%25BD%25AC%25E5%259C%25BA%25E5%258A%25A8%25E7%2594%25BB-%25E4%25B8%258B%25E6%258B%2589%25E5%2585%25B3%25E9%2597%25AD-%25E4%25B8%258A%25E6%258B%2589%25E6%25B8%2590%25E5%2585%25A5%25E4%25B8%258E%25E5%2585%25A8%25E9%25A1%25B5%25E5%258F%25B3%25E6%25BB%2591%25E8%25BF%2594%25E5%259B%259E%25E5%25AE%259E%25E4%25BD%259C%25E6%258A%2580%25E5%25B7%25A7-14cee137c565%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fzh-cn%2Fios-uiviewcontroller-%25E8%25BD%25AC%25E5%259C%25BA%25E5%258A%25A8%25E7%2594%25BB-%25E4%25B8%258B%25E6%258B%2589%25E5%2585%25B3%25E9%2597%25AD-%25E4%25B8%258A%25E6%258B%2589%25E6%25B8%2590%25E5%2585%25A5%25E4%25B8%258E%25E5%2585%25A8%25E9%25A1%25B5%25E5%258F%25B3%25E6%25BB%2591%25E8%25BF%2594%25E5%259B%259E%25E5%25AE%259E%25E4%25BD%259C%25E6%258A%2580%25E5%25B7%25A7-14cee137c565%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/zrealm-robotic-process-automation/en/ios-shortcut-automation-auto-forward-sms-create-reminder-tasks-effortlessly-309d0302877b/">iOS Shortcut Automationï½œAuto-Forward SMS & Create Reminder Tasks Effortlessly</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-robotic-process-automation/zh-cn/ios-%E6%8D%B7%E5%BE%84%E8%87%AA%E5%8A%A8%E5%8C%96-3-%E6%8B%9B%E8%87%AA%E5%8A%A8%E8%BD%AC%E5%8F%91%E7%AE%80%E8%AE%AF%E4%B8%8E%E5%BB%BA%E7%AB%8B%E6%8F%90%E9%86%92%E5%BE%85%E5%8A%9E%E4%BA%8B%E9%A1%B9%E6%95%99%E5%AD%A6-309d0302877b/">iOS æ·å¾„è‡ªåŠ¨åŒ–åº”ç”¨åœºæ™¯â€Šâ€”â€Šè‡ªåŠ¨è½¬å‘ç®€è®¯ä¸è‡ªåŠ¨å»ºç«‹æé†’å¾…åŠäº‹é¡¹</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-robotic-process-automation/ios-%E6%8D%B7%E5%BE%91%E8%87%AA%E5%8B%95%E5%8C%96-3-%E6%8B%9B%E8%87%AA%E5%8B%95%E8%BD%89%E7%99%BC%E7%B0%A1%E8%A8%8A%E8%88%87%E5%BB%BA%E7%AB%8B%E6%8F%90%E9%86%92%E5%BE%85%E8%BE%A6%E4%BA%8B%E9%A0%85%E6%95%99%E5%AD%B8-309d0302877b/">iOS æ·å¾‘è‡ªå‹•åŒ–æ‡‰ç”¨å ´æ™¯â€Šâ€”â€Šè‡ªå‹•è½‰ç™¼ç°¡è¨Šèˆ‡è‡ªå‹•å»ºç«‹æé†’å¾…è¾¦äº‹é …</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/en/apple-watch-stainless-steel-milanese-loop-unboxing-premium-44mm-graphite-band-review-c0f99f987d9c/">Apple Watch Stainless Steel Milanese Loop Unboxingï½œPremium 44mm Graphite Band Review</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/zh-cn/apple-watch-%E7%B1%B3%E5%85%B0%E8%A1%A8%E5%B8%A6%E5%BC%80%E7%AE%B1-%E5%8E%9F%E5%8E%82%E4%B8%8D%E9%94%88%E9%92%A2%E7%9F%B3%E5%A2%A8%E8%89%B2%E4%BC%98%E7%BC%BA%E7%82%B9%E5%85%A8%E8%A7%A3%E6%9E%90-c0f99f987d9c/">Apple Watch åŸå‚ä¸é”ˆé’¢ç±³å…°è¡¨å¸¦å¼€ç®±</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">ç”Ÿæ´»</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">ç« ç¯€ (Chapters)ğŸ”–</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/zh-cn/ios-uitextview-%E6%96%87%E7%BB%95%E5%9B%BE%E7%BC%96%E8%BE%91%E5%99%A8%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5-swift-%E5%9B%BE%E7%89%87%E6%8F%92%E5%85%A5%E4%B8%8E%E8%AE%B0%E5%BF%86%E4%BD%93%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98-e37d66ea1146/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1539454069" data-df="ll" > Oct 14, 2018 </time><h4 class="pt-0 my-2">iOS UITextView æ–‡ç»•å›¾ç¼–è¾‘å™¨å¼€å‘æ”»ç•¥ï½œSwift å›¾ç‰‡æ’å…¥ä¸è®°å¿†ä½“ä¼˜åŒ–å®æˆ˜</h4><div class="text-muted"><p>é’ˆå¯¹ iOS UITextView å›¾ç‰‡ç©¿æ’ä¸å¤šå›¾ä¸Šä¼ ç—›ç‚¹ï¼Œåˆ†äº« Swift å®ä½œæ–‡ç»•å›¾ç¼–è¾‘å™¨çš„å®Œæ•´è§£æ³•ï¼ŒåŒ…å«å›¾ç‰‡æ’å…¥æ¸¸æ ‡å®šä½ã€ä¸Šä¼ å¤±è´¥å¤„ç†åŠè®°å¿†ä½“ä¼˜åŒ–æŠ€å·§ï¼Œæœ‰æ•ˆé¿å…å¤šå›¾å¯¼è‡´å¡é¡¿ä¸é—ªé€€ï¼Œæå‡ APP ç¨³å®šåº¦ä¸ä½¿ç”¨ä½“éªŒã€‚</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/ios-uiviewcontroller-%E8%BD%89%E5%A0%B4%E5%8B%95%E7%95%AB-%E4%B8%8B%E6%8B%89%E9%97%9C%E9%96%89-%E4%B8%8A%E6%8B%89%E6%BC%B8%E5%85%A5%E8%88%87%E5%85%A8%E9%A0%81%E5%8F%B3%E6%BB%91%E8%BF%94%E5%9B%9E%E5%AF%A6%E4%BD%9C%E6%8A%80%E5%B7%A7-14cee137c565/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1578768066" data-df="ll" > Jan 12, 2020 </time><h4 class="pt-0 my-2">iOS UIViewController è½‰å ´äºŒä¸‰äº‹</h4><div class="text-muted"><p>UIViewController ä¸‹æ‹‰é—œé–‰/ä¸Šæ‹‰å‡ºç¾/å…¨é å³æ»‘è¿”å› æ•ˆæœå…¨è§£</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/en/ios-uiviewcontroller-transitions-master-pull-down-close-pull-up-present-full-page-swipe-back-14cee137c565/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1578768066" data-df="ll" > Jan 12, 2020 </time><h4 class="pt-0 my-2">iOS UIViewController Transitionsï½œMaster Pull-Down Close, Pull-Up Present & Full-Page Swipe Back</h4><div class="text-muted"><p>Discover how to implement seamless UIViewController transitions in iOS, including pull-down to close, pull-up to present, and full-page right-swipe back gestures, enhancing user interaction and nav...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/en/ios-uiviewcontroller-transitions-master-pull-down-close-pull-up-present-full-page-swipe-back-14cee137c565/" class="btn btn-outline-primary" aria-label="Older" ><p>iOS UIViewController Transitionsï½œMaster Pull-Down Close, Pull-Up Present & Full-Page Swipe Back</p></a> <a href="/posts/zrealm-dev/ios-uiviewcontroller-%E8%BD%89%E5%A0%B4%E5%8B%95%E7%95%AB-%E4%B8%8B%E6%8B%89%E9%97%9C%E9%96%89-%E4%B8%8A%E6%8B%89%E6%BC%B8%E5%85%A5%E8%88%87%E5%85%A8%E9%A0%81%E5%8F%B3%E6%BB%91%E8%BF%94%E5%9B%9E%E5%AF%A6%E4%BD%9C%E6%8A%80%E5%B7%A7-14cee137c565/" class="btn btn-outline-primary" aria-label="Newer" ><p>iOS UIViewController è½‰å ´äºŒä¸‰äº‹</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>Â© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span> <a href="/">ä¸­æ–‡</a>|<a href="/tags/simplified-chinese">ç®€ä¸­</a>|<a href="/tags/english/">English</a></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a> <br/></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">ç”Ÿæ´»</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
