<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="iOS 12 静音推播通知权限：Swift 临时授权实作与最佳化流程解析" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="针对 iOS 12 推播通知允许率低问题，解析 Swift 实作临时授权（provisional）静音通知技巧，提升用户接受度并避免过早拒绝通知，助你优化推播策略与点击率，打造更精准有效的通知体验。" /><meta property="og:description" content="针对 iOS 12 推播通知允许率低问题，解析 Swift 实作临时授权（provisional）静音通知技巧，提升用户接受度并避免过早拒绝通知，助你优化推播策略与点击率，打造更精准有效的通知体验。" /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/zh-cn/ios-12-%E9%9D%99%E9%9F%B3%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%9D%83%E9%99%90-swift-%E4%B8%B4%E6%97%B6%E6%8E%88%E6%9D%83%E5%AE%9E%E4%BD%9C%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%8C%96%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90-ade9e745a4bf/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/zh-cn/ios-12-%E9%9D%99%E9%9F%B3%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%9D%83%E9%99%90-swift-%E4%B8%B4%E6%97%B6%E6%8E%88%E6%9D%83%E5%AE%9E%E4%BD%9C%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%8C%96%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90-ade9e745a4bf/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/ade9e745a4bf/1*NX0r7q5ikfoJnxWq_eGRWQ.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-11-01T23:35:02+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/ade9e745a4bf/1*NX0r7q5ikfoJnxWq_eGRWQ.webp" /><meta property="twitter:title" content="iOS 12 静音推播通知权限：Swift 临时授权实作与最佳化流程解析" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://www.linkedin.com/in/zhgchgli"},"dateModified":"2025-03-06T10:54:46+08:00","datePublished":"2018-11-01T23:35:02+08:00","description":"针对 iOS 12 推播通知允许率低问题，解析 Swift 实作临时授权（provisional）静音通知技巧，提升用户接受度并避免过早拒绝通知，助你优化推播策略与点击率，打造更精准有效的通知体验。","headline":"iOS 12 静音推播通知权限：Swift 临时授权实作与最佳化流程解析","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+","url":"https://zhgchg.li/assets/ade9e745a4bf/1*NX0r7q5ikfoJnxWq_eGRWQ.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/zh-cn/ios-12-%E9%9D%99%E9%9F%B3%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%9D%83%E9%99%90-swift-%E4%B8%B4%E6%97%B6%E6%8E%88%E6%9D%83%E5%AE%9E%E4%BD%9C%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%8C%96%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90-ade9e745a4bf/"},"url":"https://zhgchg.li/posts/zrealm-dev/zh-cn/ios-12-%E9%9D%99%E9%9F%B3%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%9D%83%E9%99%90-swift-%E4%B8%B4%E6%97%B6%E6%8E%88%E6%9D%83%E5%AE%9E%E4%BD%9C%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%8C%96%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90-ade9e745a4bf/"}</script><title>iOS 12 静音推播通知权限：Swift 临时授权实作与最佳化流程解析 | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script><link rel="alternate" hreflang="en" href="/posts/zrealm-dev/en/ios-12-provisional-authorization-receive-silent-push-notifications-without-user-permission-ade9e745a4bf/"><link rel="alternate" hreflang="zh-Hant" href="/posts/zrealm-dev/ios-12-%E9%9D%9C%E9%9F%B3%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%AC%8A%E9%99%90-swift-%E8%87%A8%E6%99%82%E6%8E%88%E6%AC%8A%E5%AF%A6%E4%BD%9C%E8%88%87%E6%9C%80%E4%BD%B3%E5%8C%96%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90-ade9e745a4bf/"><link rel="alternate" hreflang="zh-Hans" href="/posts/zrealm-dev/zh-cn/ios-12-%E9%9D%99%E9%9F%B3%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%9D%83%E9%99%90-swift-%E4%B8%B4%E6%97%B6%E6%8E%88%E6%9D%83%E5%AE%9E%E4%BD%9C%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%8C%96%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90-ade9e745a4bf/"><link rel="alternate" hreflang="x-default" href="/posts/zrealm-dev/zh-cn/ios-12-%E9%9D%99%E9%9F%B3%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%9D%83%E9%99%90-swift-%E4%B8%B4%E6%97%B6%E6%8E%88%E6%9D%83%E5%AE%9E%E4%BD%9C%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%8C%96%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90-ade9e745a4bf/"><link rel="stylesheet" href="/assets/css/post-toc.css"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0">An iOS, web, and automation developer from Taiwan 🇹🇼 who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="https://medium.com/@zhgchgli" class="nav-link" target="_blank" style="background: #EDF4FF; color: #0A84FF;"> <i class="fa-brands fa-medium"></i> <span>Follow Me!<br/><strong>1,049+</strong> Followers</span> </a><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a><li class="nav-item"> <a href="/english/" class="nav-link"> <i class="fa-fw fa fa-solid fa-language"></i> <span>ENGLISH POSTS</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>iOS 12 静音推播通知权限：Swift 临时授权实作与最佳化流程解析</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>iOS 12 静音推播通知权限：Swift 临时授权实作与最佳化流程解析</h1><p class="post-desc fw-light mb-4">针对 iOS 12 推播通知允许率低问题，解析 Swift 实作临时授权（provisional）静音通知技巧，提升用户接受度并避免过早拒绝通知，助你优化推播策略与点击率，打造更精准有效的通知体验。</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1541086502" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Nov 1, 2018 </time> </span> <span> Updated <time data-ts="1741229686" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Mar 6, 2025 </time> </span><div class="mt-3 mb-3"> <a href="/assets/ade9e745a4bf/1*NX0r7q5ikfoJnxWq_eGRWQ.webp" class="popup img-link preview-img blur"><img data-src="/assets/ade9e745a4bf/1*NX0r7q5ikfoJnxWq_eGRWQ.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></div><div class="d-flex justify-content-between"> <span style="display: inline-flex; align-items: center; gap: 4px;"> By <em> <a href="https://www.linkedin.com/in/zhgchgli">ZhgChgLi</a> </em> | <em><a href="https://www.linkedin.com/in/zhgchgli" target="_blank">Senior Software Engineer</a></em><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" style="display: block; "><path fill="#007bff" d="M271.2 56C265.1 49.8 256.2 47.3 247.8 49.6C239.4 51.9 232.9 58.4 230.8 66.8L215.5 127C214.4 131.4 209.9 134 205.6 132.7L145.8 115.9C137.4 113.5 128.4 115.9 122.3 122C116.2 128.1 113.8 137.1 116.2 145.5L133.1 205.3C134.3 209.6 131.7 214.1 127.4 215.2L67.1 230.5C58.7 232.6 52.1 239.2 49.8 247.6C47.5 256 50 264.9 56.2 271L100.7 314.3C103.9 317.4 103.9 322.6 100.7 325.8L56.3 369.1C50.1 375.2 47.6 384.1 49.9 392.5C52.2 400.9 58.8 407.4 67.2 409.6L127.4 424.9C131.8 426 134.4 430.5 133.1 434.8L116.2 494.5C113.8 502.9 116.2 511.9 122.3 518C128.4 524.1 137.4 526.5 145.8 524.1L205.6 507.2C209.9 506 214.4 508.6 215.5 512.9L230.8 573.1C232.9 581.5 239.5 588.1 247.9 590.4C256.3 592.7 265.2 590.2 271.3 584L314.6 539.5C317.7 536.3 322.9 536.3 326.1 539.5L369.3 584C375.4 590.2 384.3 592.7 392.7 590.4C401.1 588.1 407.6 581.5 409.8 573.1L425.1 513C426.2 508.6 430.7 506 435 507.3L494.8 524.2C503.2 526.6 512.2 524.2 518.3 518.1C524.4 512 526.8 503 524.4 494.6L507.5 434.8C506.3 430.5 508.9 426 513.2 424.9L573.4 409.6C581.8 407.5 588.4 400.9 590.7 392.5C593 384.1 590.5 375.1 584.3 369.1L539.8 325.8C536.6 322.7 536.6 317.5 539.8 314.3L584.3 271C590.5 264.9 593 256 590.7 247.6C588.4 239.2 581.8 232.7 573.4 230.5L513.2 215.2C508.8 214.1 506.2 209.6 507.5 205.3L524.4 145.5C526.8 137.1 524.4 128.1 518.3 122C512.2 115.9 503.2 113.5 494.8 115.9L435 132.8C430.7 134 426.2 131.4 425.1 127.1L409.8 66.8C407.7 58.4 401.1 51.8 392.7 49.5C384.3 47.2 375.4 49.7 369.3 55.9L326 100.5C322.9 103.7 317.7 103.7 314.5 100.5L271.2 56z"/><path d="M250 330 l60 60 100 -140" stroke="#ffffff" stroke-width="40" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1891 words" > <em>10 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">iOS 12 静音推播通知权限：Swift 临时授权实作与最佳化流程解析</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Chapters 🔖</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">iOS 12 静音推播通知权限：Swift 临时授权实作与最佳化流程解析</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><blockquote class="prompt-tip"><p><a href="/posts/zrealm-dev/en/ios-12-provisional-authorization-receive-silent-push-notifications-without-user-permission-ade9e745a4bf/"><strong>Click here</strong></a> to view the English version of this article.</p></blockquote><blockquote class="prompt-tip"><p><a href="/posts/zrealm-dev/ios-12-%E9%9D%9C%E9%9F%B3%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%AC%8A%E9%99%90-swift-%E8%87%A8%E6%99%82%E6%8E%88%E6%AC%8A%E5%AF%A6%E4%BD%9C%E8%88%87%E6%9C%80%E4%BD%B3%E5%8C%96%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90-ade9e745a4bf/"><strong>點擊這裡</strong></a>查看本文章正體中文版本。</p></blockquote><blockquote class="prompt-info"><p>基于 SEO 考量，本文标题与描述经 AI 调整，原始版本请参考内文。</p></blockquote><h4 id="zhgchgli-table-of-contents">文章目录</h4><nav class="zhgchgli-toc"><ul class="zhgchgli-toc-list"><li><a href="#什么ios-12-不需使用者授权就能传送推播通知swift--20190206-更新">什么？iOS 12 不需使用者授权就能传送推播通知(Swift) — (2019–02–06 更新)</a></li><li><a href="#murmur">MurMur……</a></li><li class="has-children"><details><summary>进入正题 <a href="#进入正题">#</a></summary><ul><li><a href="#如何要求临时通知权限">如何要求临时通知权限?</a></li><li><a href="#静音通知能干嘛推播如何显示">静音通知能干嘛？推播如何显示？</a></li><li><a href="#附注要怎么手动把现有的app调成静音通知">附注：要怎么手动把现有的APP调成静音通知？</a></li><li><a href="#有了临时权限在之后触发跳出询问通知视窗时">有了临时权限在之后触发跳出询问通知视窗时</a></li><li><a href="#整体流程如下">整体流程如下</a></li><li><a href="#总结">总结</a></li><li><a href="#延伸阅读">延伸阅读</a></li></ul></details></li></ul></nav><hr /><h3 id="什么ios-12-不需使用者授权就能传送推播通知swift--20190206-更新"><span class="me-2">什么？iOS 12 不需使用者授权就能传送推播通知(Swift) — (2019–02–06 更新)</span><a href="#什么ios-12-不需使用者授权就能传送推播通知swift--20190206-更新" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>UserNotifications Provisional Authorization 临时权限、iOS 12 静音通知介绍</p><h3 id="murmur"><span class="me-2">MurMur……</span><a href="#murmur" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>前阵子在改善APP推播通知允许及点击率过低问题，做了些优化调整；最初版的时候体验非常差，APP 安装完一启动就直接跳「APP想要传送通知」的询问视窗；想当然而关闭率非常高，根据前一篇使用 <a href="/posts/zrealm-dev/zh-cn/ios-notification-service-extension-swift-%E5%AE%9E%E4%BD%9C%E5%9B%BE%E7%89%87%E6%8E%A8%E6%92%AD%E4%B8%8E%E6%98%BE%E7%A4%BA%E7%BB%9F%E8%AE%A1%E6%8A%80%E5%B7%A7-cb6eba52a342/">Notification Service Extension</a> 统计通知实际显示数，推测按允许推播的使用者只有大约10%．</p><p>目前调整新安装引导流程、配合介面优化将询问通知视窗的跳出时机调整如下：</p><p><a href="/assets/ade9e745a4bf/1*Yehjud9-RMPTENiVQz4Ryg.gif" class="popup img-link blur"><img data-src="/assets/ade9e745a4bf/1*Yehjud9-RMPTENiVQz4Ryg.gif" alt="[结婚吧APP](https://itunes.apple.com/tw/app/%E7%B5%90%E5%A9%9A%E5%90%A7-%E4%B8%8D%E6%89%BE%E6%9C%80%E8%B2%B4-%E5%8F%AA%E6%89%BE%E6%9C%80%E5%B0%8D/id1356057329?ls=1&amp;mt=8){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNzYiIGhlaWdodD0iODAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://itunes.apple.com/tw/app/%E7%B5%90%E5%A9%9A%E5%90%A7-%E4%B8%8D%E6%89%BE%E6%9C%80%E8%B2%B4-%E5%8F%AA%E6%89%BE%E6%9C%80%E5%B0%8D/id1356057329?ls=1&amp;mt=8" target="_blank">结婚吧APP</a></p><p>如果使用者还在犹豫或想使用看看再决定要不要接收通知，可按右上角「略过」，避免一开始因对APP还不熟悉而按下「不允许」造成之后也无法再询问一去不复返的结果。</p><h3 id="进入正题"><span class="me-2">进入正题</span><a href="#进入正题" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>在做上面这个优化项目时发现 UserNotifications iOS 12 中新增一项 .provisional 权限，翻成白话就是临时的通知权限， <strong>不用跳询问通知视窗取得允许通知权限就能对使用者发送推播通知(静音通知)</strong> ，实际效果跟限制我们接著看下去。</p><h4 id="如何要求临时通知权限"><span class="me-2">如何要求临时通知权限?</span><a href="#如何要求临时通知权限" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">if</span> <span class="k">#available</span><span class="p">(</span><span class="n">iOS</span> <span class="mf">12.0</span><span class="p">,</span> <span class="o">*</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">center</span> <span class="o">=</span> <span class="kt">UNUserNotificationCenter</span><span class="o">.</span><span class="nf">current</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">permissiones</span><span class="p">:</span><span class="kt">UNAuthorizationOptions</span> <span class="o">=</span> <span class="p">[</span><span class="o">.</span><span class="n">badge</span><span class="p">,</span> <span class="o">.</span><span class="n">alert</span><span class="p">,</span> <span class="o">.</span><span class="n">sound</span><span class="p">,</span> <span class="o">.</span><span class="n">provisional</span><span class="p">]</span>
    <span class="c1">// 可以只要求临时权限.provisional，或是顺便先要求所有要用的权限ＸＤ</span>
    <span class="c1">// 都不会触发显示询问通知视窗</span>
    
    <span class="n">center</span><span class="o">.</span><span class="nf">requestAuthorization</span><span class="p">(</span><span class="nv">options</span><span class="p">:</span> <span class="n">permissiones</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">granted</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">granted</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>我们将以上程式加入 AppDelegate didFinishLaunchingWithOptions 然后开启APP，就会发现没有跳出询问通知视窗；这时我们去 <strong>设定</strong> 查看 <strong>APP通知设定</strong></p><p><a href="/assets/ade9e745a4bf/1*MvsncOUpTTh-ZTlJAUm8fA.webp" class="popup img-link blur"><img data-src="/assets/ade9e745a4bf/1*MvsncOUpTTh-ZTlJAUm8fA.webp" alt="(图一) 取得静音通知权限" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NzUiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>(图一) 取得静音通知权限</p><p>我们就这样默默地取得了静音通知权限🏆</p><p>在程式判断当前推播通知权限的部分新增 authorizationStatus .provisional 项目 (仅iOS 12之后)：</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="k">if</span> <span class="k">#available</span><span class="p">(</span><span class="n">iOS</span> <span class="mf">10.0</span><span class="p">,</span> <span class="o">*</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">UNUserNotificationCenter</span><span class="o">.</span><span class="nf">current</span><span class="p">()</span><span class="o">.</span><span class="n">getNotificationSettings</span> <span class="p">{</span> <span class="p">(</span><span class="n">settings</span><span class="p">)</span> <span class="k">in</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">authorizationStatus</span> <span class="o">==</span> <span class="o">.</span><span class="n">authorized</span> <span class="p">{</span>
            <span class="c1">//允许</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">authorizationStatus</span> <span class="o">==</span> <span class="o">.</span><span class="n">denied</span> <span class="p">{</span>
            <span class="c1">//不允许</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">authorizationStatus</span> <span class="o">==</span> <span class="o">.</span><span class="n">notDetermined</span> <span class="p">{</span>
            <span class="c1">//没问过</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="k">#available</span><span class="p">(</span><span class="n">iOS</span> <span class="mf">12.0</span><span class="p">,</span> <span class="o">*</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">authorizationStatus</span> <span class="o">==</span> <span class="o">.</span><span class="n">provisional</span> <span class="p">{</span>
                <span class="c1">//目前是临时权限</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><blockquote><p><strong>请注意！</strong> 如果你有针对当前通知权限状态做判断， <code class="language-plaintext highlighter-rouge">settings.authorizationStatus == .notDetermined</code> 跟 <code class="language-plaintext highlighter-rouge">settings.authorizationStatus == .provisional</code></p></blockquote><blockquote><p>都是可以再跳出通知询问视窗问使用者允不允许接收通知的</p></blockquote><h4 id="静音通知能干嘛推播如何显示"><span class="me-2">静音通知能干嘛？推播如何显示？</span><a href="#静音通知能干嘛推播如何显示" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>先来张图整理一下静音通知会显示的时机：</p><p><a href="/assets/ade9e745a4bf/1*BZYhskEdvVLNsFvJV-SWkw.webp" class="popup img-link blur"><img data-src="/assets/ade9e745a4bf/1*BZYhskEdvVLNsFvJV-SWkw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NDEiIGhlaWdodD0iMzAxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>可以看到如果是静音推播通知，APP在背景状态下收到通知时 <strong>不会跳出横幅、不会有声音提示、不能标记、不会出现在锁定画面，只会出现在手机解锁状态下下拉的通知中心之中</strong> ：</p><p><a href="/assets/ade9e745a4bf/1*Nq6PQhG06BOrX_05i0Jb0g.webp" class="popup img-link blur"><img data-src="/assets/ade9e745a4bf/1*Nq6PQhG06BOrX_05i0Jb0g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTAiIGhlaWdodD0iMTMzNCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>可以看到您的发送的推播通知，并且会自动聚合成一个分类</p><p><strong>点击展开后使用者可选择：</strong></p><p><a href="/assets/ade9e745a4bf/1*NX0r7q5ikfoJnxWq_eGRWQ.webp" class="popup img-link blur"><img data-src="/assets/ade9e745a4bf/1*NX0r7q5ikfoJnxWq_eGRWQ.webp" alt="此展开的询问视窗只会出现在「临时权限」时静音推播之下" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NDgiIGhlaWdodD0iNTA4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>此展开的询问视窗只会出现在「临时权限」时静音推播之下</p><ol><li><p>要「继续」接收推播 — 「传送重要通知」： <strong>通知权限就全开了！通知权限就全开了！通知权限就全开了！</strong> 真的很重要所以讲三次，这时候前面程式码要求权限那段一并要求所有权限的效果就相当显著了。 或维持接收静音通知</p><li><p>「关闭」 — 「关闭所有通知」点击后完全关闭推播通知（含静音通知）。</p></ol><h4 id="附注要怎么手动把现有的app调成静音通知"><span class="me-2">附注：要怎么手动把现有的APP调成静音通知？</span><a href="#附注要怎么手动把现有的app调成静音通知" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>静音通知是iOS 12对通知优化推出的新设定与临时权限无关，只不过是程式那端拿到临时权限就能发静音通知；针对APP的通知要设成静音也很简单，方法之一就是去「设定」-「通知」- 找到APP 将其所有权限都关闭只留「通知中心」(如图ㄧ)即是静音通知． 或是收到APP通知时重压/长压展开后，点击右上角「…」选择传送静音通知亦同：</p><p><a href="/assets/ade9e745a4bf/1*Lfx_esnpxLQ7GXVoLT710A.gif" class="popup img-link blur"><img data-src="/assets/ade9e745a4bf/1*Lfx_esnpxLQ7GXVoLT710A.gif" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzODAiIGhlaWdodD0iNTE4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><h4 id="有了临时权限在之后触发跳出询问通知视窗时"><span class="me-2">有了临时权限在之后触发跳出询问通知视窗时：</span><a href="#有了临时权限在之后触发跳出询问通知视窗时" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>要求通知权限的部分拿掉 .provisional 就能依然正常询问使用者要不要允许接收通知：</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">if</span> <span class="k">#available</span><span class="p">(</span><span class="n">iOS</span> <span class="mf">10.0</span><span class="p">,</span> <span class="o">*</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">center</span> <span class="o">=</span> <span class="kt">UNUserNotificationCenter</span><span class="o">.</span><span class="nf">current</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">permissiones</span><span class="p">:</span><span class="kt">UNAuthorizationOptions</span> <span class="o">=</span> <span class="p">[</span><span class="o">.</span><span class="n">badge</span><span class="p">,</span> <span class="o">.</span><span class="n">alert</span><span class="p">,</span> <span class="o">.</span><span class="n">sound</span><span class="p">]</span>
    <span class="n">center</span><span class="o">.</span><span class="nf">requestAuthorization</span><span class="p">(</span><span class="nv">options</span><span class="p">:</span> <span class="n">permissiones</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">granted</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">granted</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p><a href="/assets/ade9e745a4bf/1*Bu6H1GZPWUoAd1oSfdYi5w.webp" class="popup img-link blur"><img data-src="/assets/ade9e745a4bf/1*Bu6H1GZPWUoAd1oSfdYi5w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTAiIGhlaWdodD0iNjA5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>按「允许」取得所有通知权限、按「不允许」关闭所有通知权限(含本来取得的静音通知权限)</p><h4 id="整体流程如下"><span class="me-2">整体流程如下：</span><a href="#整体流程如下" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/ade9e745a4bf/1*--o4wB9gSZ3y661GiZfEEg.webp" class="popup img-link blur"><img data-src="/assets/ade9e745a4bf/1*--o4wB9gSZ3y661GiZfEEg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4OTEiIGhlaWdodD0iNTkyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><h4 id="总结"><span class="me-2">总结：</span><a href="#总结" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>iOS 12的这项通知贴心优化，让使用者跟开发者之间对通知功能更容易达搭起互动的桥梁，能尽量避免一去不复返关闭通知的状况。</p><p>对使用者来说，往往跳询问通知视窗时不知该按下允许还是拒绝因为我们不知道开发者会传什么样的通知给我们，可能是广告亦可能是重要消息，未知的事物是可怕的，所以大部分的人都会先保守按下拒绝。</p><p>对开发者来说，我们精心准备了许多项目包含重要消息要推送给使用者知道，但就因上述问题而被使用者屏蔽，我们花费心思设计的文案就这样白费了！</p><p>此功能可让开发者把握使用者刚安装APP时的机会，设计好推播流程、内容，对使用者优先推送感兴趣项目，增加使用者对此APP通知的认识度，并追踪推播点击率，在适当的时机再触发询问使用者要不要接收通知。</p><p>虽然能曝光的地方只有 <strong>通知中心</strong> 但有曝光有机会；换个角度想，我们是使用者的话，没按允许通知，APP如果能传一堆有横幅+有声音+还出现在解锁画面的通知给我，应该会觉得非常干扰恼人(隔壁阵营就是XD)，苹果这个做法则是在使用者与开发者之间取得了平衡。</p><p>目前的问题大概就是….iOS 12的用户还太少🤐</p><h4 id="延伸阅读"><span class="me-2">延伸阅读</span><a href="#延伸阅读" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p><a href="/posts/zrealm-dev/zh-cn/ios-9-%E5%88%B0-ios-12-%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%9D%83%E9%99%90%E7%8A%B6%E6%80%81%E5%A4%84%E7%90%86-swift-%E5%85%A8%E9%9D%A2%E6%94%AF%E6%8F%B4%E4%B8%8E%E5%AE%9E%E6%88%98%E8%8C%83%E4%BE%8B-fd7f92d52baa/">从 iOS 9 到 iOS 12 推播通知权限状态处理(Swift)</a></p><li><p><a href="/posts/zrealm-dev/zh-cn/ios-deferred-deep-link-%E5%BB%B6%E8%BF%9F%E6%B7%B1%E5%BA%A6%E8%BF%9E%E7%BB%93%E5%AE%9E%E4%BD%9C-swift-%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B%E4%B8%8E%E6%8A%80%E5%B7%A7%E8%A7%A3%E6%9E%90-b08ef940c196/">iOS Deferred Deep Link 延迟深度连结实作(Swift)</a></p><li><p><a href="/posts/zrealm-dev/zh-cn/app-https%E4%BC%A0%E8%BE%93%E4%BB%8D%E9%81%AD%E7%AA%83%E5%8F%96-mitmproxy%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%94%BB%E5%87%BB%E5%AE%9E%E6%88%98%E6%95%99%E5%AD%A6%E4%B8%8E%E9%98%B2%E8%8C%83%E6%8A%80%E5%B7%A7-46410aaada00/">iOS+MacOS 使用mitmproxy 进行中间人嗅探</a></p><li><p><a href="https://medium.com/zrealm-ios-dev/ios-15-macos-monterey-safari-%E5%B0%87%E8%83%BD%E9%9A%B1%E8%97%8F%E7%9C%9F%E5%AF%A6-ip-755a8b6acc35" target="_blank">iOS 15 / MacOS Monterey Safari 将能隐藏真实 IP</a></p></ul><p>有任何问题及指教欢迎 <a href="https://www.zhgchg.li/contact" target="_blank">与我联络</a> 。</p><hr /><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=🍺&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a><br /></p><blockquote class="prompt-info"><p>本文首次发表于 Medium (<a href="https://medium.com/p/ade9e745a4bf" target="_blank"><strong>点击查看原始版本</strong></a>)，由 <a href="/posts/tools/medium-to-jekyll/" target="_blank">ZMediumToMarkdown</a> 提供自动转换与同步技术。</p></blockquote><blockquote class="prompt-info"><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/zh-cn/zmediumtomarkdown/2018-11-01-ade9e745a4bf.md" target="_blank">Improve this page on Github.</a></p></blockquote><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1,049+ Followers</span></a></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/simplified-chinese/" class="post-tag no-text-decoration" >simplified-chinese</a> <a href="/tags/ios/" class="post-tag no-text-decoration" >ios</a> <a href="/tags/swift/" class="post-tag no-text-decoration" >swift</a> <a href="/tags/push-notification/" class="post-tag no-text-decoration" >push-notification</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/ios12/" class="post-tag no-text-decoration" >ios12</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=iOS%2012%20%E9%9D%99%E9%9F%B3%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%9D%83%E9%99%90%EF%BC%9ASwift%20%E4%B8%B4%E6%97%B6%E6%8E%88%E6%9D%83%E5%AE%9E%E4%BD%9C%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%8C%96%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fzh-cn%2Fios-12-%25E9%259D%2599%25E9%259F%25B3%25E6%258E%25A8%25E6%2592%25AD%25E9%2580%259A%25E7%259F%25A5%25E6%259D%2583%25E9%2599%2590-swift-%25E4%25B8%25B4%25E6%2597%25B6%25E6%258E%2588%25E6%259D%2583%25E5%25AE%259E%25E4%25BD%259C%25E4%25B8%258E%25E6%259C%2580%25E4%25BD%25B3%25E5%258C%2596%25E6%25B5%2581%25E7%25A8%258B%25E8%25A7%25A3%25E6%259E%2590-ade9e745a4bf%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=iOS%2012%20%E9%9D%99%E9%9F%B3%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%9D%83%E9%99%90%EF%BC%9ASwift%20%E4%B8%B4%E6%97%B6%E6%8E%88%E6%9D%83%E5%AE%9E%E4%BD%9C%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%8C%96%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fzh-cn%2Fios-12-%25E9%259D%2599%25E9%259F%25B3%25E6%258E%25A8%25E6%2592%25AD%25E9%2580%259A%25E7%259F%25A5%25E6%259D%2583%25E9%2599%2590-swift-%25E4%25B8%25B4%25E6%2597%25B6%25E6%258E%2588%25E6%259D%2583%25E5%25AE%259E%25E4%25BD%259C%25E4%25B8%258E%25E6%259C%2580%25E4%25BD%25B3%25E5%258C%2596%25E6%25B5%2581%25E7%25A8%258B%25E8%25A7%25A3%25E6%259E%2590-ade9e745a4bf%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fzh-cn%2Fios-12-%25E9%259D%2599%25E9%259F%25B3%25E6%258E%25A8%25E6%2592%25AD%25E9%2580%259A%25E7%259F%25A5%25E6%259D%2583%25E9%2599%2590-swift-%25E4%25B8%25B4%25E6%2597%25B6%25E6%258E%2588%25E6%259D%2583%25E5%25AE%259E%25E4%25BD%259C%25E4%25B8%258E%25E6%259C%2580%25E4%25BD%25B3%25E5%258C%2596%25E6%25B5%2581%25E7%25A8%258B%25E8%25A7%25A3%25E6%259E%2590-ade9e745a4bf%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/en/ci-cd-explained-boost-ios-app-development-stability-and-efficiency-tool-selection-guide-c008a9e8ceca/">CI/CD Explained: Boost iOS App Development Stability and Efficiency｜Tool Selection Guide</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/zh-cn/ci-cd-%E6%98%AF%E4%BB%80%E4%B9%88-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A8%B3%E5%AE%9A%E5%BC%80%E5%8F%91%E5%9B%A2%E9%98%9F%E7%9A%84%E5%85%B3%E9%94%AE%E6%B5%81%E7%A8%8B%E4%B8%8E%E5%B7%A5%E5%85%B7%E9%80%89%E6%8B%A9-c008a9e8ceca/">CI/CD 实战指南（一）：CI/CD 是什么？如何透过 CI/CD 打造稳定高效的开发团队？工具选择？</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/ci-cd-%E6%98%AF%E4%BB%80%E9%BA%BC-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A9%A9%E5%AE%9A%E9%96%8B%E7%99%BC%E5%9C%98%E9%9A%8A%E7%9A%84%E9%97%9C%E9%8D%B5%E6%B5%81%E7%A8%8B%E8%88%87%E5%B7%A5%E5%85%B7%E9%81%B8%E6%93%87-c008a9e8ceca/">CI/CD 實戰指南（一）：CI/CD 是什麼？如何透過 CI/CD 打造穩定高效的開發團隊？工具選擇？</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/en/google-apps-script-web-app-integrate-forms-with-github-actions-ci-cd-for-streamlined-workflows-4cb4437818f2/">Google Apps Script Web App｜Integrate Forms with GitHub Actions CI/CD for Streamlined Workflows</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/zh-cn/google-apps-script-web-app-%E6%89%93%E9%80%A0-github-action-ci-cd-%E8%87%AA%E8%AE%A2%E8%A1%A8%E5%8D%95%E6%8F%90%E5%8D%87%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87-4cb4437818f2/">使用 Google Apps Script Web App 表单串接 Github Action CI/CD 工作</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Chapters 🔖</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/zh-cn/ios-12-%E4%BB%A5%E4%B8%8A-swift-%E5%AE%9E%E4%BD%9Capp%E9%80%9A%E7%9F%A5%E8%AE%BE%E5%AE%9A%E9%A1%B5%E6%8D%B7%E5%BE%84-%E6%8F%90%E5%8D%87%E4%BD%BF%E7%94%A8%E8%80%85%E9%80%9A%E7%9F%A5%E4%BD%93%E9%AA%8C-f644db1bb8bf/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1542033522" data-df="ll" > Nov 12, 2018 </time><h4 class="pt-0 my-2">iOS ≥ 12 在使用者的「设定」中增加「APP通知设定页」捷径 (Swift)</h4><div class="text-muted"><p>除了从系统关闭通知，让使用者还有其他选择 .providesAppNotificationSettings/openSettingsFor</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/zh-cn/ios-9-%E5%88%B0-ios-12-%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%9D%83%E9%99%90%E7%8A%B6%E6%80%81%E5%A4%84%E7%90%86-swift-%E5%85%A8%E9%9D%A2%E6%94%AF%E6%8F%B4%E4%B8%8E%E5%AE%9E%E6%88%98%E8%8C%83%E4%BE%8B-fd7f92d52baa/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1541172224" data-df="ll" > Nov 2, 2018 </time><h4 class="pt-0 my-2">从 iOS 9 到 iOS 12 推播通知权限状态处理(Swift)</h4><div class="text-muted"><p>适配 iOS 9 ~ iOS 12 处理通知权限状态及要求权限的解决方案</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/ios-12-%E9%9D%9C%E9%9F%B3%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%AC%8A%E9%99%90-swift-%E8%87%A8%E6%99%82%E6%8E%88%E6%AC%8A%E5%AF%A6%E4%BD%9C%E8%88%87%E6%9C%80%E4%BD%B3%E5%8C%96%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90-ade9e745a4bf/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1541086502" data-df="ll" > Nov 1, 2018 </time><h4 class="pt-0 my-2">什麼？iOS 12 不需使用者授權就能收到推播通知(Swift)</h4><div class="text-muted"><p>UserNotifications Provisional Authorization 臨時權限、iOS 12 靜音通知介紹</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/en/ios-12-provisional-authorization-receive-silent-push-notifications-without-user-permission-ade9e745a4bf/" class="btn btn-outline-primary" aria-label="Older" ><p>iOS 12 Provisional Authorization｜Receive Silent Push Notifications Without User Permission</p></a> <a href="/posts/zrealm-dev/ios-12-%E9%9D%9C%E9%9F%B3%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%AC%8A%E9%99%90-swift-%E8%87%A8%E6%99%82%E6%8E%88%E6%AC%8A%E5%AF%A6%E4%BD%9C%E8%88%87%E6%9C%80%E4%BD%B3%E5%8C%96%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90-ade9e745a4bf/" class="btn btn-outline-primary" aria-label="Newer" ><p>什麼？iOS 12 不需使用者授權就能收到推播通知(Swift)</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span> <a href="/">正體中文</a> | <a href="/tags/simplified-chinese">简体中文</a> | <a href="/tags/english/">English</a> <br/> Last updated: 2025-12-18 10:55:38 +08:00</p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
