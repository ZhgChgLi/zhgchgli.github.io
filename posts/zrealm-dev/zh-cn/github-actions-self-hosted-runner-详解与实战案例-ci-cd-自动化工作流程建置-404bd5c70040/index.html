<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="GitHub Actionsï½œSelf-hosted Runner è¯¦è§£ä¸å®æˆ˜æ¡ˆä¾‹ï½œCI/CD è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹å»ºç½®" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="é’ˆå¯¹å¼€å‘å›¢é˜Ÿè‡ªåŠ¨åŒ–éœ€æ±‚ï¼Œè§£æ GitHub Actions ä¸ Self-hosted Runner æ¶æ„ä¸è®¾å®šï¼Œå¹¶é€è¿‡ä¸‰å¤§å®æˆ˜æ¡ˆä¾‹æ•™ä½ å¿«é€Ÿå»ºç«‹è‡ªåŠ¨æ ‡è®° PRã€æŒ‡æ´¾è´Ÿè´£äººåŠæ¯æ—¥ PR ç»Ÿè®¡é€šçŸ¥ï¼Œæå‡ CI/CD æ‰§è¡Œæ•ˆç‡ä¸æˆæœ¬ä¼˜åŒ–ã€‚" /><meta property="og:description" content="é’ˆå¯¹å¼€å‘å›¢é˜Ÿè‡ªåŠ¨åŒ–éœ€æ±‚ï¼Œè§£æ GitHub Actions ä¸ Self-hosted Runner æ¶æ„ä¸è®¾å®šï¼Œå¹¶é€è¿‡ä¸‰å¤§å®æˆ˜æ¡ˆä¾‹æ•™ä½ å¿«é€Ÿå»ºç«‹è‡ªåŠ¨æ ‡è®° PRã€æŒ‡æ´¾è´Ÿè´£äººåŠæ¯æ—¥ PR ç»Ÿè®¡é€šçŸ¥ï¼Œæå‡ CI/CD æ‰§è¡Œæ•ˆç‡ä¸æˆæœ¬ä¼˜åŒ–ã€‚" /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/zh-cn/github-actions-self-hosted-runner-%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/zh-cn/github-actions-self-hosted-runner-%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-07-02T20:22:32+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" /><meta property="twitter:title" content="GitHub Actionsï½œSelf-hosted Runner è¯¦è§£ä¸å®æˆ˜æ¡ˆä¾‹ï½œCI/CD è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹å»ºç½®" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://www.linkedin.com/in/zhgchgli"},"dateModified":"2025-07-12T22:49:01+08:00","datePublished":"2025-07-02T20:22:32+08:00","description":"é’ˆå¯¹å¼€å‘å›¢é˜Ÿè‡ªåŠ¨åŒ–éœ€æ±‚ï¼Œè§£æ GitHub Actions ä¸ Self-hosted Runner æ¶æ„ä¸è®¾å®šï¼Œå¹¶é€è¿‡ä¸‰å¤§å®æˆ˜æ¡ˆä¾‹æ•™ä½ å¿«é€Ÿå»ºç«‹è‡ªåŠ¨æ ‡è®° PRã€æŒ‡æ´¾è´Ÿè´£äººåŠæ¯æ—¥ PR ç»Ÿè®¡é€šçŸ¥ï¼Œæå‡ CI/CD æ‰§è¡Œæ•ˆç‡ä¸æˆæœ¬ä¼˜åŒ–ã€‚","headline":"GitHub Actionsï½œSelf-hosted Runner è¯¦è§£ä¸å®æˆ˜æ¡ˆä¾‹ï½œCI/CD è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹å»ºç½®","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+","url":"https://zhgchg.li/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/zh-cn/github-actions-self-hosted-runner-%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"},"url":"https://zhgchg.li/posts/zrealm-dev/zh-cn/github-actions-self-hosted-runner-%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"}</script><title>GitHub Actionsï½œSelf-hosted Runner è¯¦è§£ä¸å®æˆ˜æ¡ˆä¾‹ï½œCI/CD è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹å»ºç½® | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=false" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script><link rel="alternate" hreflang="en" href="/posts/zrealm-dev/en/github-actions-self-hosted-runner-setup-and-usage-guide-for-efficient-ci-cd-404bd5c70040/"><link rel="alternate" hreflang="zh-Hant" href="/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"><link rel="alternate" hreflang="zh-Hans" href="/posts/zrealm-dev/zh-cn/github-actions-self-hosted-runner-%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"><link rel="alternate" hreflang="x-default" href="/posts/zrealm-dev/zh-cn/github-actions-self-hosted-runner-%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"><link rel="stylesheet" href="/assets/css/post-toc.css"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0">An iOS, web, and automation developer from Taiwan ğŸ‡¹ğŸ‡¼ who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="https://medium.com/@zhgchgli" class="nav-link" target="_blank" style="background: #EDF4FF; color: #0A84FF;"> <i class="fa-brands fa-medium"></i> <span>Follow Me!<br/><strong>1,049+</strong> Followers</span> </a><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a><li class="nav-item"> <a href="/english/" class="nav-link"> <i class="fa-fw fa fa-solid fa-language"></i> <span>ENGLISH POSTS</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>GitHub Actionsï½œSelf-hosted Runner è¯¦è§£ä¸å®æˆ˜æ¡ˆä¾‹ï½œCI/CD è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹å»ºç½®</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>GitHub Actionsï½œSelf-hosted Runner è¯¦è§£ä¸å®æˆ˜æ¡ˆä¾‹ï½œCI/CD è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹å»ºç½®</h1><p class="post-desc fw-light mb-4">é’ˆå¯¹å¼€å‘å›¢é˜Ÿè‡ªåŠ¨åŒ–éœ€æ±‚ï¼Œè§£æ GitHub Actions ä¸ Self-hosted Runner æ¶æ„ä¸è®¾å®šï¼Œå¹¶é€è¿‡ä¸‰å¤§å®æˆ˜æ¡ˆä¾‹æ•™ä½ å¿«é€Ÿå»ºç«‹è‡ªåŠ¨æ ‡è®° PRã€æŒ‡æ´¾è´Ÿè´£äººåŠæ¯æ—¥ PR ç»Ÿè®¡é€šçŸ¥ï¼Œæå‡ CI/CD æ‰§è¡Œæ•ˆç‡ä¸æˆæœ¬ä¼˜åŒ–ã€‚</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1751458952" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 2, 2025 </time> </span> <span> Updated <time data-ts="1752331741" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 12, 2025 </time> </span><div class="mt-3 mb-3"> <a href="/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" class="popup img-link preview-img blur"><img data-src="/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></div><div class="d-flex justify-content-between"> <span style="display: inline-flex; align-items: center; gap: 4px;"> By <em> <a href="https://www.linkedin.com/in/zhgchgli">ZhgChgLi</a> </em> | <em><a href="https://www.linkedin.com/in/zhgchgli" target="_blank">Senior Software Engineer</a></em><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" style="display: block; "><path fill="#007bff" d="M271.2 56C265.1 49.8 256.2 47.3 247.8 49.6C239.4 51.9 232.9 58.4 230.8 66.8L215.5 127C214.4 131.4 209.9 134 205.6 132.7L145.8 115.9C137.4 113.5 128.4 115.9 122.3 122C116.2 128.1 113.8 137.1 116.2 145.5L133.1 205.3C134.3 209.6 131.7 214.1 127.4 215.2L67.1 230.5C58.7 232.6 52.1 239.2 49.8 247.6C47.5 256 50 264.9 56.2 271L100.7 314.3C103.9 317.4 103.9 322.6 100.7 325.8L56.3 369.1C50.1 375.2 47.6 384.1 49.9 392.5C52.2 400.9 58.8 407.4 67.2 409.6L127.4 424.9C131.8 426 134.4 430.5 133.1 434.8L116.2 494.5C113.8 502.9 116.2 511.9 122.3 518C128.4 524.1 137.4 526.5 145.8 524.1L205.6 507.2C209.9 506 214.4 508.6 215.5 512.9L230.8 573.1C232.9 581.5 239.5 588.1 247.9 590.4C256.3 592.7 265.2 590.2 271.3 584L314.6 539.5C317.7 536.3 322.9 536.3 326.1 539.5L369.3 584C375.4 590.2 384.3 592.7 392.7 590.4C401.1 588.1 407.6 581.5 409.8 573.1L425.1 513C426.2 508.6 430.7 506 435 507.3L494.8 524.2C503.2 526.6 512.2 524.2 518.3 518.1C524.4 512 526.8 503 524.4 494.6L507.5 434.8C506.3 430.5 508.9 426 513.2 424.9L573.4 409.6C581.8 407.5 588.4 400.9 590.7 392.5C593 384.1 590.5 375.1 584.3 369.1L539.8 325.8C536.6 322.7 536.6 317.5 539.8 314.3L584.3 271C590.5 264.9 593 256 590.7 247.6C588.4 239.2 581.8 232.7 573.4 230.5L513.2 215.2C508.8 214.1 506.2 209.6 507.5 205.3L524.4 145.5C526.8 137.1 524.4 128.1 518.3 122C512.2 115.9 503.2 113.5 494.8 115.9L435 132.8C430.7 134 426.2 131.4 425.1 127.1L409.8 66.8C407.7 58.4 401.1 51.8 392.7 49.5C384.3 47.2 375.4 49.7 369.3 55.9L326 100.5C322.9 103.7 317.7 103.7 314.5 100.5L271.2 56z"/><path d="M250 330 l60 60 100 -140" stroke="#ffffff" stroke-width="40" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="11078 words" > <em>61 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">GitHub Actionsï½œSelf-hosted Runner è¯¦è§£ä¸å®æˆ˜æ¡ˆä¾‹ï½œCI/CD è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹å»ºç½®</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Chapters ğŸ”–</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">GitHub Actionsï½œSelf-hosted Runner è¯¦è§£ä¸å®æˆ˜æ¡ˆä¾‹ï½œCI/CD è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹å»ºç½®</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><blockquote class="prompt-tip"><p><a href="/posts/zrealm-dev/en/github-actions-self-hosted-runner-setup-and-usage-guide-for-efficient-ci-cd-404bd5c70040/"><strong>Click here</strong></a> to view the English version of this article.</p></blockquote><blockquote class="prompt-tip"><p><a href="/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"><strong>é»æ“Šé€™è£¡</strong></a>æŸ¥çœ‹æœ¬æ–‡ç« æ­£é«”ä¸­æ–‡ç‰ˆæœ¬ã€‚</p></blockquote><blockquote class="prompt-info"><p>åŸºäº SEO è€ƒé‡ï¼Œæœ¬æ–‡æ ‡é¢˜ä¸æè¿°ç» AI è°ƒæ•´ï¼ŒåŸå§‹ç‰ˆæœ¬è¯·å‚è€ƒå†…æ–‡ã€‚</p></blockquote><h4 id="zhgchgli-table-of-contents">æ–‡ç« ç›®å½•</h4><nav class="zhgchgli-toc"><ul class="zhgchgli-toc-list"><li class="has-children"><details><summary>CI/CD å®æˆ˜æŒ‡å—ï¼ˆäºŒï¼‰ï¼šGitHub Actions ä¸ Self-hosted Runner ä½¿ç”¨ä¸å»ºç½®å¤§å…¨ <a href="#cicd-å®æˆ˜æŒ‡å—äºŒgithub-actions-ä¸-self-hosted-runner-ä½¿ç”¨ä¸å»ºç½®å¤§å…¨">#</a></summary><ul><li><a href="#å‰è¨€">å‰è¨€</a></li></ul></details></li><li class="has-children"><details><summary>GitHub Actions æ¶æ„æµç¨‹å›¾ <a href="#github-actions-æ¶æ„æµç¨‹å›¾">#</a></summary><ul><li><a href="#github-repo">GitHub Repo</a></li><li><a href="#github-repo-actions-secrets">GitHub Repo â€”Actions Secrets</a></li><li><a href="#github-repo--actions-variables">GitHub Repo â€” Actions Variables</a></li><li><a href="#github-actions--trigger">GitHub Actions â€” Trigger</a></li><li><a href="#github-actions--workflow">GitHub Actions â€” Workflow</a></li><li><a href="#github-actions--workflow--job">GitHub Actions â€” Workflow â€” Job</a></li><li><a href="#github-actions--reuse-workflowjob">GitHub Actions â€” Reuse Workflow/Job</a></li><li><a href="#github-actions--workflow--job--step">GitHub Actions â€” Workflow â€” Job â€” Step</a></li><li><a href="#github-actions--workflow--job--reuse-action-step">GitHub Actions â€” Workflow â€” Job â€” Reuse Action Step</a></li><li><a href="#github-runner">GitHub Runner</a></li><li><a href="#github-hosted-runner">GitHub Hosted Runner</a></li><li><a href="#self-hosted-runner-on-in-house-server">Self-hosted Runner on In-house Server</a></li><li><a href="#github-workflow-x-job-x-step-x-runner-æµç¨‹å…³ç³»å›¾">GitHub Workflow x Job x Step x Runner æµç¨‹å…³ç³»å›¾</a></li><li><a href="#å¦‚æœ-job-æœ‰äº§å‡ºè¦ç»™åç»­çš„-job-ä½¿ç”¨">å¦‚æœ Job æœ‰äº§å‡ºè¦ç»™åç»­çš„ Job ä½¿ç”¨</a></li></ul></details></li><li><a href="#åšä¸­å­¦-github-actions--æ¡ˆä¾‹å®ä½œ">åšä¸­å­¦ GitHub Actions â€” æ¡ˆä¾‹å®ä½œ</a></li><li class="has-children"><details><summary>æ¡ˆä¾‹ â€” 1 <a href="#æ¡ˆä¾‹--1">#</a></summary><ul><li><a href="#æˆæœå›¾">æˆæœå›¾</a></li><li><a href="#è¿ä½œæµç¨‹">è¿ä½œæµç¨‹</a></li><li><a href="#åŠ¨æ‰‹åš">åŠ¨æ‰‹åš</a></li><li><a href="#automation-pullrequestyml">Automation-PullRequest.yml</a></li><li><a href="#æ‰§è¡Œç»“æœ">æ‰§è¡Œç»“æœ</a></li><li><a href="#ç›´æ¥ä½¿ç”¨åˆ«äººåŒ…å¥½çš„-action-æ­¥éª¤-pascalgnsize-label-action">ç›´æ¥ä½¿ç”¨åˆ«äººåŒ…å¥½çš„ Action æ­¥éª¤ï¼š pascalgn/size-label-action</a></li><li><a href="#name-run-name-çš„è¡¥å……">name, run-name çš„è¡¥å……</a></li></ul></details></li><li class="has-children"><details><summary>æ¡ˆä¾‹ â€” 2 <a href="#æ¡ˆä¾‹--2">#</a></summary><ul><li><a href="#æˆæœå›¾-1">æˆæœå›¾</a></li><li><a href="#è¿ä½œæµç¨‹-1">è¿ä½œæµç¨‹</a></li><li><a href="#åŠ¨æ‰‹åš-1">åŠ¨æ‰‹åš</a></li><li><a href="#automation-pullrequestyml-1">Automation-PullRequest.yml</a></li><li><a href="#æ‰§è¡Œç»“æœ-1">æ‰§è¡Œç»“æœ</a></li><li><a href="#æµ‹è¯•é‡å¼€reopened-pr">æµ‹è¯•é‡å¼€(Reopened) PR</a></li></ul></details></li><li class="has-children"><details><summary>æ¡ˆä¾‹ â€” 3 <a href="#æ¡ˆä¾‹--3">#</a></summary><ul><li><a href="#æˆæœå›¾-2">æˆæœå›¾</a></li><li><a href="#è¿ä½œæµç¨‹-2">è¿ä½œæµç¨‹</a></li><li><a href="#åŠ¨æ‰‹åš-2">åŠ¨æ‰‹åš</a></li><li><a href="#automation-pullrequest-dailyyml">Automation-PullRequest-Daily.yml</a></li><li><a href="#æ‰§è¡Œç»“æœ-2">æ‰§è¡Œç»“æœ</a></li></ul></details></li><li class="has-children"><details><summary>å°ç»“ <a href="#å°ç»“">#</a></summary><ul><li><a href="#github-è‡ªåŠ¨åŒ–å»¶ä¼¸è®®é¢˜">GitHub è‡ªåŠ¨åŒ–å»¶ä¼¸è®®é¢˜</a></li><li><a href="#å…¶ä»–">å…¶ä»–</a></li></ul></details></li><li class="has-children"><details><summary>Reuse Workflow è¡¥å…… <a href="#reuse-workflow-è¡¥å……">#</a></summary><ul><li><a href="#private-repo-å­˜å–é—®é¢˜">Private Repo å­˜å–é—®é¢˜</a></li></ul></details></li><li class="has-children"><details><summary>GitHub Actions Script è¯­æ³•è¡¥å…… <a href="#github-actions-script-è¯­æ³•è¡¥å……">#</a></summary><ul><li><a href="#--xxx---github-actions-context-è¡¨è¾¾å¼">${ { XXX } } GitHub Actions Context è¡¨è¾¾å¼</a></li><li><a href="#actionsgithub-scriptv7">actions/github-script@v7</a></li><li><a href="#gh-cli-gh_token">gh cli GH_TOKEN</a></li><li><a href="#æ–°å¢-self-hosted-runner">æ–°å¢ Self-hosted Runner</a></li><li><a href="#workflowgithub-actions-runner-æ”¹ç”¨-self-hosted-runner">Workflow(GitHub Actions) Runner æ”¹ç”¨ Self-hosted Runner</a></li><li><a href="#runs-on--runner-label-è®¾å®š">runs-on: [ Runner Label] è®¾å®š</a></li><li><a href="#æ³¨å†Œ-runner-æˆ-service">æ³¨å†Œ Runner æˆ Service</a></li><li><a href="#å®Œæ•´ä¸“æ¡ˆ-repo">å®Œæ•´ä¸“æ¡ˆ Repo</a></li></ul></details></li><li class="has-children"><details><summary>å®˜æ–¹æ–‡ä»¶ <a href="#å®˜æ–¹æ–‡ä»¶">#</a></summary><ul><li><a href="#ai-can-help">AI Can Help!</a></li></ul></details></li><li><a href="#æ€»ç»“">æ€»ç»“</a></li><li class="has-children"><details><summary>ç³»åˆ—æ–‡ç«  <a href="#ç³»åˆ—æ–‡ç« ">#</a></summary><ul><li><a href="#buy-me-a-coffee">Buy me a coffee</a></li></ul></details></li></ul></nav><hr /><h3 id="cicd-å®æˆ˜æŒ‡å—äºŒgithub-actions-ä¸-self-hosted-runner-ä½¿ç”¨ä¸å»ºç½®å¤§å…¨"><span class="me-2">CI/CD å®æˆ˜æŒ‡å—ï¼ˆäºŒï¼‰ï¼šGitHub Actions ä¸ Self-hosted Runner ä½¿ç”¨ä¸å»ºç½®å¤§å…¨</span><a href="#cicd-å®æˆ˜æŒ‡å—äºŒgithub-actions-ä¸-self-hosted-runner-ä½¿ç”¨ä¸å»ºç½®å¤§å…¨" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>å¸¦æ‚¨ä»å¤´äº†è§£ GitHub Actions/Self-hosted Runner è¿ä½œæ–¹å¼ä¸æ‰‹æŠŠæ‰‹ä½¿ç”¨æ•™å­¦ã€‚</p><p><a href="/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" alt="Photo by [Dan Taylor](https://unsplash.com/@theoneandonlydantaylor?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjgwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Photo by <a href="https://unsplash.com/@theoneandonlydantaylor?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" target="_blank">Dan Taylor</a></p><h4 id="å‰è¨€"><span class="me-2">å‰è¨€</span><a href="#å‰è¨€" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å‰ç¯‡ã€Œ <a href="/posts/zrealm-dev/zh-cn/ci-cd-%E6%98%AF%E4%BB%80%E4%B9%88-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A8%B3%E5%AE%9A%E5%BC%80%E5%8F%91%E5%9B%A2%E9%98%9F%E7%9A%84%E5%85%B3%E9%94%AE%E6%B5%81%E7%A8%8B%E4%B8%8E%E5%B7%A5%E5%85%B7%E9%80%89%E6%8B%A9-c008a9e8ceca/"><strong>CI/CD å®æˆ˜æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šCI/CD æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•é€è¿‡ CI/CD æ‰“é€ ç¨³å®šé«˜æ•ˆçš„å¼€å‘å›¢é˜Ÿï¼Ÿå·¥å…·é€‰æ‹©ï¼Ÿ</strong></a> ã€æˆ‘ä»¬ä»‹ç»äº† CI/CD æ˜¯ä»€ä¹ˆï¼Ÿèƒ½å¸¦æ¥å“ªäº›æ•ˆç›Šä¸å·¥å…·çš„é€‰æ‹©ï¼Œ <strong>è¿™ç¯‡å°†è‘—é‡åœ¨ GitHub Actions, Self-hosted Runner çš„æ¶æ„ä¸ä½¿ç”¨ä»‹ç»</strong> ï¼Œå¹¶æ‰‹æŠŠæ‰‹ä¸€èµ·å»ºç«‹å‡ ä¸ªæœ‰è¶£çš„è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹ï¼Œå¸¦æ‚¨æ…¢æ…¢ä¸Šæ‰‹ã€‚</p><h3 id="github-actions-æ¶æ„æµç¨‹å›¾"><span class="me-2">GitHub Actions æ¶æ„æµç¨‹å›¾</span><a href="#github-actions-æ¶æ„æµç¨‹å›¾" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>åœ¨å¼€å§‹ä¹‹å‰æˆ‘ä»¬å…ˆæ¥ç¡®å®šä¸€ä¸‹ GitHub Actions çš„è¿ä½œæ¶æ„æµç¨‹å…³ç³»ä¸èŒè´£ã€‚</p><p><a href="/assets/404bd5c70040/1*iacfyTX_b3YTSzMcn2ldjw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*iacfyTX_b3YTSzMcn2ldjw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjgwMyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h4 id="github-repo"><span class="me-2"><strong>GitHub Repo</strong></span><a href="#github-repo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>åœ¨ GitHub Actions çš„ä¸–ç•Œé‡Œï¼Œæ‰€æœ‰ Actions (Workflow YAML æ¡£æ¡ˆ) éƒ½è¦å­˜æ”¾åœ¨æŸä¸ª Git Repo ä¹‹ä¸­ ( <code class="language-plaintext highlighter-rouge">REPO/.github/workflows/</code> )</ul><h4 id="github-repo-actions-secrets"><span class="me-2">GitHub Repo â€”Actions Secrets</span><a href="#github-repo-actions-secrets" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Settings â†’ Secrets and variables â†’ Actions â†’ Secretsã€‚</p><ul><li><p>å­˜æ”¾ Actions æ­¥éª¤ä¸­ä¼šç”¨åˆ°çš„ Secret Key, Token e.g. Slack Bot Tokenã€Apple Store Connect API .p8 Key</p><li><p><strong>Secrets å†…å®¹æ— æ³•åœ¨ Action Log ä¸­æŸ¥çœ‹ï¼Œä¼šè‡ªåŠ¨ç”¨ * * * * éšè”½</strong></p><li><p>Secrets å†…å®¹æ— æ³•æŸ¥çœ‹ã€ç¼–è¾‘ï¼Œåªèƒ½è¦†ç›–</p><li>Secrets <strong>ç›®å‰åªæ”¯æ´çº¯æ–‡å­—å†…å®¹ï¼Œæ— æ³•ä¸Šä¼ æ¡£æ¡ˆ</strong> <strong>-</strong> å¦‚æœæ˜¯äºŒè¿›åˆ¶çš„é‡‘è¦è¯·å‚è€ƒ <a href="https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/using-secrets-in-github-actions#storing-base64-binary-blobs-as-secrets" target="_blank">å®˜æ–¹æ­¥éª¤ä½¿ç”¨ Base64 ç¼–ç è½¬æ¢åå‚¨å­˜</a> ã€‚<ul><li>iOS å¼€å‘å‡­è¯å‚¨å­˜æ–¹å¼å¯å‚è€ƒå®˜æ–¹æ•™å­¦ï¼š <a href="https://docs.github.com/en/actions/how-tos/use-cases-and-examples/deploying/installing-an-apple-certificate-on-macos-runners-for-xcode-development" target="_blank">Installing an Apple certificate on macOS runners for Xcode development</a></ul><li>å¯ä»¥å‚¨å­˜ç»„ç»‡å±‚çº§çš„ Secretsï¼Œè·¨ Repo å…±äº«</ul><h4 id="github-repo--actions-variables"><span class="me-2">GitHub Repo â€” Actions Variables</span><a href="#github-repo--actions-variables" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Settings â†’ Secrets and variables â†’ Actions â†’ Variablesã€‚</p><ul><li><p>å­˜æ”¾ Actions æ­¥éª¤ä¸­å¸¸ç”¨åˆ°çš„å˜æ•° e.g. æ¨¡æ‹Ÿå™¨ iOS ç‰ˆæœ¬ã€å·¥ä½œç›®å½•</p><li><p>Variables å†…å®¹å¯ä»¥æŸ¥çœ‹ã€ç¼–è¾‘</p><li><p>Variables å†…å®¹å¯ä»¥è¾“å‡ºåœ¨ Action Log ä¸­</p><li><p>Variables åªæ”¯æ´çº¯æ–‡å­—ï¼Œä¹Ÿå¯å­˜æ”¾ json å­—ä¸²ç„¶åè‡ªå·±è§£æä½¿ç”¨</p><li><p>å¯ä»¥å‚¨å­˜ç»„ç»‡å±‚çº§çš„ Variablesï¼Œè·¨ Repo å…±äº«</p></ul><h4 id="github-actions--trigger"><span class="me-2">GitHub Actions â€” Trigger</span><a href="#github-actions--trigger" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p><strong>Github Action ä¸­æœ€é‡è¦çš„èµ·å§‹ç‚¹ â€” è§¦å‘äº‹ä»¶(æ¡ä»¶)</strong></p><li><p>ç¬¦åˆè§¦å‘äº‹ä»¶çš„ GitHub Actions æ‰ä¼šè§¦å‘æ‰§è¡Œ</p><li><p>å®Œæ•´äº‹ä»¶åˆ—è¡¨å¯ <a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows" target="_blank">å‚è€ƒå®˜æ–¹æ–‡ä»¶</a></p><li><p>åŸºæœ¬ä¸Šæ¶µç›–äº†æ‰€æœ‰ CI/CDã€è‡ªåŠ¨åŒ–ä¼šé‡åˆ°çš„äº‹ä»¶åœºæ™¯ã€‚ ä½† <strong>å¦‚æœæœ‰ç‰¹æ®Šåœºæ™¯æ²¡æœ‰äº‹ä»¶ï¼Œé‚£å°±åªèƒ½ç”¨å…¶ä»–äº‹ä»¶+åœ¨ Job ä¸­åˆ¤æ–­ç»„åˆæˆ–æ˜¯ç”¨ Schedule æ’ç¨‹æ‰‹åŠ¨æ£€æŸ¥äº†</strong> ã€‚ e.g. ä¾‹å¦‚æ²¡æœ‰ PR Merged äº‹ä»¶ï¼Œå°±åªèƒ½ç”¨ <code class="language-plaintext highlighter-rouge">pull_request: closed</code> + Job <code class="language-plaintext highlighter-rouge">if: github.event.pull_request.merged == true</code> è¾¾æˆ</p></ul><p><strong>å¸¸ç”¨äº‹ä»¶ï¼š</strong></p><ul><li><p><code class="language-plaintext highlighter-rouge">schedule</code> (cron)ï¼šæ’ç¨‹å®šæ—¶æ‰§è¡Œ(åŒ crontab) å¯ä»¥ç”¨æ¥åšè‡ªåŠ¨åŒ–ï¼šå®šæ—¶æ£€æŸ¥ PRã€å®šæ—¶æ‰“åŒ…ã€å®šæ—¶æ‰§è¡Œè‡ªåŠ¨åŒ–è„šæœ¬ <strong>ç»Ÿä¸€éƒ½åœ¨ main / develop (Default Branch) æ‰§è¡Œã€‚</strong></p><li><p><code class="language-plaintext highlighter-rouge">pull_request:</code> ï¼šPR ç›¸å…³äº‹ä»¶ å½“ PR å¼€å¯æ—¶ã€PR Assign æ—¶ã€åŠ  Label æ—¶ã€æœ‰æ–° Push Commit æ—¶â€¦ç­‰ç­‰</p><li><p><code class="language-plaintext highlighter-rouge">issues</code> ã€ <code class="language-plaintext highlighter-rouge">issue_comment</code> ï¼šIssue ç›¸å…³äº‹ä»¶ å½“ Issue å¼€å¯æ—¶ã€æœ‰æ–°ç•™è¨€æ—¶â€¦ç­‰ç­‰</p><li><p><code class="language-plaintext highlighter-rouge">workflow_dispatch</code> ï¼šæ‰‹åŠ¨è§¦å‘ï¼›å¯ä»¥è®¾å®šéœ€è¦æä¾›çš„æ ä½ï¼ŒGitHub Actions æä¾›ç®€æ˜“çš„è¡¨å•è®©ä½¿ç”¨è€…å¯ä»¥å¡«å†™èµ„è®¯ã€‚ e.g.:</p></ul><p><a href="/assets/404bd5c70040/1*XogIJsCbrNPerWBto_PG8w.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*XogIJsCbrNPerWBto_PG8w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMzIiIGhlaWdodD0iNDMyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><p><code class="language-plaintext highlighter-rouge">workflow_call</code> ï¼šè§¦å‘å¦ä¸€ä¸ª Action(Workflow) æ‰§è¡Œä»»åŠ¡ã€‚</p><li><p><code class="language-plaintext highlighter-rouge">workflow_run</code> ï¼šå½“åˆ«çš„ Action(Workflow) æ‰§è¡Œä»»åŠ¡ï¼Œè§¦å‘æ‰§è¡Œæ­¤ä»»åŠ¡ã€‚</p></ul><blockquote><p><em>æ›´å¤šäº‹ä»¶ç±»å‹ã€è®¾å®šç»†èŠ‚è¯· <a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows" target="_blank">å‚è€ƒå®˜æ–¹æ–‡ä»¶</a> ã€‚</em></p></blockquote><h4 id="github-actions--workflow"><span class="me-2"><strong>GitHub Actions â€” Workflow</strong></span><a href="#github-actions--workflow" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p>a.k.a Action</p><li><p>ä½¿ç”¨ YAML æ’°å†™ .yaml æ¡£æ¡ˆï¼Œæ¡£æ¡ˆç»Ÿä¸€æ”¾ç½®åœ¨ <code class="language-plaintext highlighter-rouge">REPO/.github/workflows/</code> ä¹‹ä¸‹</p><li><p><strong>ä»¥ä¸»åˆ†æ”¯å†…çš„ Workflow YAML æ¡£æ¡ˆä¸ºä¸»</strong> å¦‚æœåœ¨å…¶ä»–åˆ†æ”¯çœ‹ä¸åˆ°æ­£åœ¨å¼€å‘çš„ Action æˆ–æ‰§è¡Œä¸Šæœ‰è¯¯ï¼Œå¯ä»¥å…ˆ Merge å›ä¸»åˆ†æ”¯çœ‹çœ‹ã€‚</p><li><p>GitHub Actions ä¸­çš„æœ€åŸºç¡€å•ä½ï¼Œæ¯ä¸ª Workflow å°±ä»£è¡¨ä¸€é¡¹ CI/CD æˆ–è‡ªåŠ¨åŒ–æ“ä½œ</p><li><p>Workflow å¯ä»¥å‘¼å«åˆ«çš„ Workflow æ‰§è¡Œä»»åŠ¡ (å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ‹†å‡ºæ ¸å¿ƒ Workflow å’Œå‘¼å«çš„ Workflow)</p><li><p>å½“ä¸­ä¼šå®šä¹‰ä»»åŠ¡åç§°ã€æ‰§è¡Œç­–ç•¥ã€è§¦å‘äº‹ä»¶ã€ä»»åŠ¡å·¥ä½œâ€¦ç­‰ç­‰æ‰€æœ‰ Action ç›¸å…³è®¾å®š</p><li><p>ç›®å‰æ¡£æ¡ˆç»“æ„ä¸æ”¯æ´å­ç›®å½•</p><li><p>Action å®Œå…¨å…è´¹ (Public and Private Repo)</p></ul><h4 id="github-actions--workflow--job"><span class="me-2">GitHub Actions â€” Workflow â€” Job</span><a href="#github-actions--workflow--job" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p>GitHub Actions ä¸­çš„æ‰§è¡Œå•ä½</p><li><p>å®šä¹‰ Workflow ä¸­çš„ä»»åŠ¡å·¥ä½œæœ‰å“ªäº›</p><li><p>æ¯ä¸ª Workflow å¯ä»¥æœ‰å¤šä¸ª Jobs</p><li><p>æ¯ä¸ª Job éœ€è¦æŒ‡å®šä½¿ç”¨å“ªä¸ª Runner Labelï¼Œæ‰§è¡Œçš„æ—¶å€™ä¼šä½¿ç”¨å¯¹åº”çš„ Runner æœºå™¨æ¥æ‰§è¡Œä»»åŠ¡</p><li><p><strong>å¤šä¸ª Jobs æ˜¯å¹¶å‘æ‰§è¡Œ</strong> (å¦‚æœ‰é¡ºåºå¯ä»¥ç”¨ <code class="language-plaintext highlighter-rouge">needs</code> çº¦æŸ)</p><li><p><strong>æ¯ä¸ª Job åº”è¯¥è§†ä¸ºç‹¬ç«‹æ‰§è¡Œä¸ªä½“(æ¯ä¸ªéƒ½è¦å½“æˆæ˜¯ Sandbox)</strong> ï¼ŒJob ç»“æŸåå¦‚æœæœ‰äº§å‡ºèµ„æºæ¡£æ¡ˆè¦ç»™åç»­å…¶ä»– Job/Workflow ä½¿ç”¨ï¼Œéœ€è¦ Upload Artifacts æˆ–åœ¨ self-hosted ç§»åŠ¨åˆ°å…±ç”¨äº§å‡ºç›®å½•ã€‚</p><li><p>Job åšå®Œå¯ä»¥ Output å­—ä¸²ç»™å…¶ä»– Job å‚è€ƒä½¿ç”¨ã€‚ (ä¾‹å¦‚æ‰§è¡Œç»“æœ true or false)</p><li><p>æ²¡ç‰¹åˆ«è®¾æµç¨‹æ¡ä»¶çš„è¯ï¼Œå¤šä¸ª Job å¦‚æœå…¶ä¸­æœ‰ Job å‘ç”Ÿé”™è¯¯ï¼Œ <strong>å…¶ä»– Job ä¾ç„¶ä¼šç»§ç»­æ‰§è¡Œ</strong></p></ul><h4 id="github-actions--reuse-workflowjob"><span class="me-2">GitHub Actions â€” Reuse Workflow/Job</span><a href="#github-actions--reuse-workflowjob" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p>Workflow å®šä¹‰ <code class="language-plaintext highlighter-rouge">on: workflow_call</code> å°±èƒ½å°è£…ç»™å…¶ä»– Workflow å½“æˆ Job å¤ç”¨</p><li><p>åŒä¸ªç»„ç»‡ä¸‹å¯ä»¥è·¨ Repo åˆ†äº«ä½¿ç”¨</p><li><p>å› æ­¤å¯ä»¥æŠŠè·¨ Repo å…±ç”¨çš„ CI/CD å·¥ä½œæ”¾åˆ°å…±äº«çš„ Repo ä¸€èµ·ä½¿ç”¨</p></ul><h4 id="github-actions--workflow--job--step"><span class="me-2">GitHub Actions â€” Workflow â€” Job â€” Step</span><a href="#github-actions--workflow--job--step" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p>GitHub Actions ä¸­çš„æœ€å°æ‰§è¡Œé¡¹ç›®</p><li><p>Job ä¸­å®é™…æ‰§è¡Œä»»åŠ¡çš„ç¨‹å¼</p><li><p>æ¯ä¸ª Job å¯ä»¥æœ‰å¤šä¸ª Steps</p><li><p><strong>å¤šä¸ª Steps æ˜¯ç…§é¡ºåºæ‰§è¡Œ</strong></p><li><p>Step åšå®Œå¯ä»¥ Output å­—ä¸²ç»™åç»­ Steps å‚è€ƒä½¿ç”¨ã€‚</p><li><p><strong>Step å¯ä»¥ç›´æ¥æ’°å†™ shell script ç¨‹å¼</strong> å¯ä»¥å¼•ç”¨ <a href="https://cli.github.com/manual/gh" target="_blank">gh cli</a> ã€å½“å‰ç¯å¢ƒå˜æ•°(ä¾‹å¦‚å–å¾— PR ç¼–å·)ï¼Œç›´æ¥åšæƒ³åšçš„äº‹</p><li><p>æ²¡ç‰¹åˆ«è®¾æµç¨‹æ¡ä»¶çš„è¯ï¼ŒStep å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œ <strong>ä¼šç›´æ¥ä¸­æ–­</strong> ï¼Œåç»­çš„ Steps ä¸ä¼šæ‰§è¡Œ</p></ul><h4 id="github-actions--workflow--job--reuse-action-step"><span class="me-2">GitHub Actions â€” Workflow â€” Job â€” Reuse Action Step</span><a href="#github-actions--workflow--job--reuse-action-step" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p><strong>å¯ä»¥ç›´æ¥å¤ç”¨ <a href="https://github.com/marketplace?type=actions" target="_blank">Marketplace</a> ä¸Šå„è·¯å¤§ç¥åŒ…å¥½çš„ç°æœ‰å·¥ä½œæ­¥éª¤ã€‚</strong> ä¾‹å¦‚ï¼š <a href="https://github.com/marketplace/actions/comment-pull-request" target="_blank">Comment å†…å®¹åˆ° PR</a> ã€‚</p><li><p>ä¹Ÿå¯ä»¥å°†è‡ªå·±ä¸€ç³»åˆ—çš„å·¥ä½œä»»åŠ¡ Step æ‰“åŒ…æˆä¸€ä¸ª Action GitHub Repo è®©å…¶ä»–å·¥ä½œç›´æ¥å¤ç”¨</p><li><p>Public Repo çš„ Action å¯ä»¥ä¸Šæ¶åˆ° Marketplace</p></ul><p><strong>æ‰“åŒ… Action æ”¯æ´ä½¿ç”¨ï¼š</strong></p><ul><li><p><strong>Docker Action</strong> â€” ä»£è¡¨ GitHub Actions ä¼šæŠŠç¯å¢ƒå˜æ•°ä¼ åˆ° Docker å®¹å™¨ä¸­ï¼Œå†çœ‹ä½ è¦æ€ä¹ˆå¤„ç†ï¼Œå¯ä»¥æ˜¯ shell scriptã€Javaã€PHPâ€¦etc.</p><li><p><strong>JavaScript/TypeScript Action</strong> â€” ç›´æ¥ä½¿ç”¨ node.js æ’°å†™ GitHub Actions å¤„ç†é€»è¾‘ï¼ŒåŒæ ·çš„ä¼šæŠŠç¯å¢ƒå˜æ•°éƒ½ä¼ ç»™ä½ å‚è€ƒä½¿ç”¨ã€‚ e.g. <a href="https://github.com/pozil/auto-assign-issue/blob/v2/action.yml" target="_blank">pozil/auto-assign-issue</a></p><li><p><strong>Composite (YAML) â€”</strong> çº¯ YAML æè¿°ä»»åŠ¡æ­¥éª¤ (åŒ GitHub Actions â€” Workflow â€” Job â€” Step) å¯ä»¥å®£å‘Šæœ‰å“ªå†™æ­¥éª¤è¦åšæˆ–ç›´æ¥åœ¨ä¸Šé¢å†™ shell scriptã€‚ e.g. <a href="https://github.com/ZhgChgLi/ZReviewTender/blob/main/action.yml" target="_blank">ZhgChgLi/ZReviewTender</a></p></ul><blockquote><p><em>ç¢äºç¯‡å¹…ï¼Œæœ¬ç¯‡æ–‡ç« ä¸ä¼šä»‹ç»å¦‚ä½•æ‰“åŒ… Github Actions Actionï¼Œæœ‰å…´è¶£å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡ä»¶ï¼š <a href="https://docs.github.com/en/actions/tutorials/creating-a-composite-action" target="_blank">tutorials/creating-a-composite-action</a> ã€‚</em></p></blockquote><h4 id="github-runner"><span class="me-2">GitHub Runner</span><a href="#github-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p>GitHub ä¼šæ ¹æ® Runner Label æ´¾å‘å¯¹åº”çš„ Job ç»™ Runner æ‰§è¡Œ</p><li><p>Runner åªåšä¸ºç›‘å¬è€…ï¼Œè½®è¯¢ç›‘å¬ GitHub æ´¾å‘ä»»åŠ¡</p><li><p>åªå…³å¿ƒ Job ä¸å…³å¿ƒæ˜¯å“ªä¸ª Action(Workflow) å› æ­¤ä¼šå‡ºç° Action A çš„ Job-1 æ‰§è¡Œå®Œï¼Œä¸‹ä¸€ä¸ªæ¢ Action B çš„ Job-1ï¼Œè€Œä¸æ˜¯ Action A çš„ Jobs éƒ½æ‰§è¡Œå®Œæ‰æ¢ Action Bã€‚</p><li><p>Runner å¯ä»¥ä½¿ç”¨ GitHub Hosted Runner æˆ– Self-hosted Runnerã€‚</p></ul><h4 id="github-hosted-runner"><span class="me-2"><strong>GitHub Hosted Runner</strong></span><a href="#github-hosted-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>GitHub æä¾›çš„ Runnerï¼Œå¯å‚è€ƒå®˜æ–¹ Repo åˆ—è¡¨ï¼š</ul><p><a href="https://github.com/actions/runner-images" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/b479f2537a0d7620cc8bed955bf9331e739ee02383a1715546a26bc35390a494/actions/runner-images" alt="" loading="lazy"></a></p><p><a href="/assets/404bd5c70040/1*KtQV4kDCWscEeaZ8jQI8Dg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*KtQV4kDCWscEeaZ8jQI8Dg.webp" alt="[2025/06 çš„ Images åˆ—è¡¨](https://github.com/actions/runner-images){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjExNTQiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="https://github.com/actions/runner-images" target="_blank">2025/06 çš„ Images åˆ—è¡¨</a></p><ul><li>Runner é¢„å…ˆå®‰è£…äº†ä»€ä¹ˆå¯ä»¥ç‚¹è¿›å»æŸ¥çœ‹ï¼š e.g. <a href="https://github.com/actions/runner-images/blob/main/images/macos/macos-14-arm64-Readme.md" target="_blank">macos-14-arm64</a></ul><p><a href="/assets/404bd5c70040/1*svXtXH78-TvK1C_XXCyYLA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*svXtXH78-TvK1C_XXCyYLA.webp" alt="[macos-14-arm64](https://github.com/actions/runner-images/blob/main/images/macos/macos-14-arm64-Readme.md){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9Ijc4MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://github.com/actions/runner-images/blob/main/images/macos/macos-14-arm64-Readme.md" target="_blank">macos-14-arm64</a></p><ul><li><p>iOS å¼€å‘ä¼˜å…ˆä½¿ç”¨ -arm64 (Mç³»åˆ—) å¤„ç†å™¨çš„ Runnerï¼Œè·‘èµ·æ¥æ¯”è¾ƒå¿«</p><li><p>åªè¦åœ¨ Job <code class="language-plaintext highlighter-rouge">run-on</code> è´´ä¸Šè¡¨æ ¼ä¸Šçš„ YAML Labelï¼Œå°±èƒ½ä½¿ç”¨è¯¥ Runner æ‰§è¡Œä»»åŠ¡</p><li><p><strong>Public Repo æ”¶è´¹æ–¹å¼: å®Œå…¨å…è´¹æ— é™ä½¿ç”¨</strong></p><li><p><strong>ï¸</strong> Private Repo å…è´¹é¢åº¦: å…è´¹é¢åº¦(ä¾ç…§å¸å·ä¸åŒé¢åº¦ä¸åŒï¼Œä»¥ GitHub Free ä¸ºä¾‹)ï¼š ç”¨é‡ï¼šæ¯æœˆå…è´¹ 2,000 åˆ†é’Ÿ å‚¨å­˜ï¼š500 MB</p><li><p><strong>âš ï¸ï¸Private Repo è®¡è´¹æ–¹å¼:</strong> <strong>è¶…è¿‡å…è´¹é¢åº¦ä¹‹åå¼€å§‹ç”¨ç”¨é‡è®¡è´¹(å¯è®¾ä¸Šé™è·Ÿé€šçŸ¥)ï¼Œä¾ç…§ Runner æ‰€å±çš„æœºå™¨ä½œä¸šç³»ç»Ÿã€æ ¸å¿ƒä¸åŒï¼Œä»·æ ¼ä¹Ÿä¸åŒï¼š</strong></p></ul><p><a href="/assets/404bd5c70040/1*rkhRJN4ZRas_lDOJh-pjkQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*rkhRJN4ZRas_lDOJh-pjkQ.webp" alt="[about-billing-for-github-actions](https://docs.github.com/en/billing/managing-billing-for-your-products/about-billing-for-github-actions){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTc4IiBoZWlnaHQ9IjEzMjgiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="https://docs.github.com/en/billing/managing-billing-for-your-products/about-billing-for-github-actions" target="_blank">about-billing-for-github-actions</a></p><p>å¯ä»¥çœ‹åˆ° macOS çš„ä»·æ ¼å› ä¸ºè®¾å¤‡æˆæœ¬å¾ˆé«˜æ‰€ä»¥è´µã€‚</p><ul><li>æœ€å¤šå¹¶å‘ä»»åŠ¡æ•°é™åˆ¶ï¼š</ul><p><a href="/assets/404bd5c70040/1*LU3zGSBe57NBVMfDwl0wdQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*LU3zGSBe57NBVMfDwl0wdQ.webp" alt="[usage-limits-billing-and-administration](https://docs.github.com/en/actions/concepts/overview/usage-limits-billing-and-administration#usage-limits){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjU3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://docs.github.com/en/actions/concepts/overview/usage-limits-billing-and-administration#usage-limits" target="_blank">usage-limits-billing-and-administration</a></p><blockquote><p><em>è¿™è¾¹æ‰¯å¤ªå¤šäº†ï¼Œæˆ‘ä»¬çš„é‡ç‚¹æ˜¯ Self-hosted Runnerã€‚</em></p></blockquote><h4 id="self-hosted-runner-on-in-house-server"><span class="me-2">Self-hosted Runner on In-house Server</span><a href="#self-hosted-runner-on-in-house-server" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p>å°†è‡ªå·±çš„æœºå™¨ä½œä¸º Runner</p><li><p><strong>ä¸€å°å®ä½“æœºå™¨å¯ä»¥èµ·å¤šä¸ª Runner å¹¶å‘æ¥ä»»åŠ¡æ¥åš</strong></p><li><p><strong>å…è´¹æ— é™é‡æ— é™åˆ¶ä½¿ç”¨</strong> åªæœ‰æœºå™¨è´­ä¹°æˆæœ¬ï¼ŒèŠ±ä¸€æ¬¡ä½¿ç”¨åˆ°é¥±ï¼ ä»¥ 32G RAM M4 Mini (=NT$40,900) è®¡ç®—ï¼Œå¦‚æœç”¨ GitHub Hosted Runner ä¸€ä¸ªæœˆè¦èŠ± 500 USDï¼› <strong>ä¹°ä¸€å°æ¶è®¾å¥½ç”¨è¶…è¿‡ä¸‰ä¸ªæœˆå°±å›æœ¬</strong> äº†ï¼</p><li><p>æ”¯æ´ Windows, macOS, Linux (x64/ARM/ARM64)</p><li><p><strong>åŒä¸ªç»„ç»‡å¯ä»¥è·¨ Repo å…±äº« Runner</strong></p><li><p><strong>âš ï¸ç›®å‰ï¼šactions/cache, actions/upload-artifact, actions/download-artifact éƒ½åªæ”¯æ´ GitHub äº‘ç«¯æœåŠ¡ï¼Œä»£è¡¨è¿™äº›å†…å®¹è¿˜æ˜¯ä¼šä¸Šä¼ åˆ° GitHub ä¼ºæœå™¨å¹¶è®¡ç®—å‚¨å­˜é‡æ”¶è´¹ã€‚</strong> å¯ä»¥åœ¨è‡ªå·±çš„æœºå™¨ä¸Šå¼€å…±ç”¨ç›®å½•å–ä»£ã€‚</p><li><p>Self-hosted Runner ä¹Ÿæ”¯æ´ <a href="https://docs.github.com/en/actions/concepts/runners/about-actions-runner-controller" target="_blank">Docker, k8s</a> åªæ˜¯æˆ‘æ²¡ç ”ç©¶ã€‚</p></ul><blockquote><p><strong><em>æ¶è®¾ Self-hosted Runner åªéœ€å‡ æ­¥ (10 åˆ†é’Ÿå†…è®¾å®šå¥½) å°±èƒ½ä¸Šçº¿å¼€å§‹æ¥ä»»åŠ¡æ‰§è¡Œ(æœ¬æ–‡ç¨åä¼šä»‹ç»)ã€‚</em></strong></p></blockquote><h4 id="github-workflow-x-job-x-step-x-runner-æµç¨‹å…³ç³»å›¾"><span class="me-2">GitHub Workflow x Job x Step x Runner æµç¨‹å…³ç³»å›¾</span><a href="#github-workflow-x-job-x-step-x-runner-æµç¨‹å…³ç³»å›¾" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*WHIVfXdVRoEsdXGfJhu2Rw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*WHIVfXdVRoEsdXGfJhu2Rw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9Ijg1MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>è¿™è¾¹ç”¨ä¸€å¼ å›¾æ€»ç»“å·¥ä½œæµç¨‹ä¸å…³ç³»ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ª Workflowã€ä¸¤ä¸ª Runner:</p><ul><li><p>CI â€”å‡è®¾ Ræœ‰ 3 ä¸ª Jobsï¼Œæ¯ä¸ª Job å„æœ‰å‡ ä¸ª Stepsï¼ŒRunner Label(run-on) â€” <code class="language-plaintext highlighter-rouge">self-hosted-app</code></p><li><p>CD â€” æœ‰ 4 ä¸ª Jobsï¼Œæ¯ä¸ª Job å„æœ‰å‡ ä¸ª Stepsï¼ŒRunner Label(run-on) â€” <code class="language-plaintext highlighter-rouge">self-hosted-app</code></p><li><p>Runner â€” æœ‰ 2 ä¸ªï¼ŒRunner Label ä¹Ÿéƒ½æ˜¯â€” <code class="language-plaintext highlighter-rouge">self-hosted-app</code></p></ul><p>åŒå‰è¿°ï¼ŒRunner è·Ÿ Workflow æ˜¯ä¾ç…§ Runnler Label æ¥æ´¾å‘ã€æ¥æ”¶ä»»åŠ¡æ¥åšï¼Œè¿™ä¸ªæ¡ˆä¾‹éƒ½æ˜¯ç”¨åŒä¸ª <code class="language-plaintext highlighter-rouge">self-hosted-app</code> Runner Labelï¼ŒWorkflow çš„ Jobs é¢„è®¾æ˜¯å¹¶å‘æ‰§è¡Œã€Steps æ˜¯æ¯ä¸ª Job çš„å®é™…æ‰§è¡Œå†…å®¹ï¼Œä¸²è¡Œç…§é¡ºåºæ‰§è¡Œï¼ŒSteps éƒ½æ‰§è¡Œå®Œç­‰äº Job æ‰§è¡Œå®Œæ¯•ã€‚</p><blockquote><p><strong><em>å› æ­¤ Workflow å®é™…æ‰§è¡Œçš„æ—¶é—´è½´ä¼šæ˜¯åœ¨ä¸¤ä¸ª Runner ä¹‹é—´ç©¿æ¢­æ‰§è¡Œ Jobï¼Œä¹Ÿä¼šå¹¶å‘æ‰§è¡Œã€å½“å‰ Job æ‰§è¡Œå®Œä¸‹ä¸€ä¸ªä¹Ÿä¸ä¸€å®šæ˜¯æ¥è‘—åŒä¸ª Worflow çš„ä¸‹ä¸€ä¸ª Jobã€‚</em></strong></p></blockquote><blockquote><p><em>âš ï¸ æ‰€ä»¥æ‰è¯´ç¡®ä¿æ¯ä¸ª Job æ˜¯ç‹¬ç«‹çš„å¾ˆé‡è¦ (å°¤å…¶åœ¨ Self-hosted Runner ç¯å¢ƒä¹‹ä¸‹ï¼ŒJob ç»“æŸä¹‹åå¯èƒ½ä¸ä¼šæ¸…é™¤çš„å¤ªå¹²å‡€ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä¸‹æ„è¯†è§‰å¾—è¿™ä¸ª Job çš„äº§å‡ºï¼Œä¸‹ä¸€ä¸ª Job å¯ä»¥æ¥è‘—åšäº‹)ï¼Œä¸åº”è¯¥è¿™æ ·ç”¨ã€‚</em></p></blockquote><h4 id="å¦‚æœ-job-æœ‰äº§å‡ºè¦ç»™åç»­çš„-job-ä½¿ç”¨"><span class="me-2">å¦‚æœ Job æœ‰äº§å‡ºè¦ç»™åç»­çš„ Job ä½¿ç”¨:</span><a href="#å¦‚æœ-job-æœ‰äº§å‡ºè¦ç»™åç»­çš„-job-ä½¿ç”¨" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p><strong>Job Output String</strong> : è¾“å‡ºçº¯æ–‡å­—åˆ°å˜æ•°ç»™å…¶ä»– Job å¼•ç”¨</p><li><p><strong>Artifact-upload/download:</strong> Job çš„ Step æœ€åä¸€æ­¥å°†æ‰§è¡Œç»“æœä¸Šä¼ åˆ° GitHub Artifactï¼Œå¦ä¸€ä¸ª Job çš„ç¬¬ä¸€ä¸ª Step ä¸‹è½½å›æ¥ç»§ç»­å¤„ç†ä½¿ç”¨ã€‚ e.g. ä¾‹å¦‚ Job â€” æ‰“åŒ… â†’ å°†æ‰“åŒ…ç»“æœ .ipa ä¼ åˆ° <strong>Artifact â†’</strong> Job â€” éƒ¨ç½² â†’ ä¸‹è½½å›æ¥ .ipa â†’ ä¸Šä¼  App Store éƒ¨ç½² è¦æ³¨æ„ï¼š <strong>ç›®å‰å°±ç®—æ˜¯ Self-hosted ä¹Ÿæ˜¯ä¼šä¸Š GitHub Artifact äº‘å‚¨å­˜ã€‚</strong></p><li><p><strong>AWS/GCPâ€¦äº‘ç«¯å‚¨å­˜</strong> : åŒä¸Šï¼Œåªæ˜¯æ˜¯ç”¨è‡ªå·±çš„äº‘ç«¯å‚¨å­˜æœåŠ¡ã€‚</p><li><p><strong>[Self-hosted Only] å…±ç”¨ç¡¬ç¢Ÿã€ç›®å½•:</strong> Self-hosted Runner å¦‚æœéƒ½æœ‰æŒ‚è½½ä¸€ä¸ªå…±ç”¨ç›®å½•ï¼Œåˆ™å¯ç”¨è¿™ä¸ªç›®å½•ä¾ç…§ UUID å»ºç«‹èµ„æ–™å¤¹å­˜æ”¾äº§å‡ºç»“æœï¼Œç„¶ååç»­ Job å»è¯»å–å‰ä¸€ä¸ª Job Output UUID å»æ‰¾åˆ°å¯¹åº”çš„å‚¨å­˜å†æ‹¿å›æ¥ç”¨ã€‚ è¦æ³¨æ„ï¼Œä¸åŒä¸»æœºçš„ Runner ä¹Ÿéƒ½è¦æŒ‚è½½åŒä¸ªå…±ç”¨ç›®å½•ã€‚</p><li><p>åœ¨åŒä¸ª Job çš„ Steps æŠŠæ‰€æœ‰äº‹æƒ…åšå®Œã€‚</p></ul><h3 id="åšä¸­å­¦-github-actions--æ¡ˆä¾‹å®ä½œ"><span class="me-2">åšä¸­å­¦ GitHub Actions â€” æ¡ˆä¾‹å®ä½œ</span><a href="#åšä¸­å­¦-github-actions--æ¡ˆä¾‹å®ä½œ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>ã€Œåè€Œè¨€ï¼Œä¸å¦‚èµ·è€Œè¡Œã€ä»¥ä¸Šåè¯è§£é‡Šè·Ÿæµç¨‹æ¶æ„ä»‹ç»ç›¸ä¿¡å¤§å®¶ä¹Ÿæ˜¯çœ‹å¾—æ‡µæ‡µæ‡‚æ‡‚ï¼Œæ¥ä¸‹æ¥ä¼šç›´æ¥ä¸¾ä¸‰ä¸ªåŠŸèƒ½ä¾‹å­ï¼Œå¸¦å¤§å®¶å®é™…åŠ¨æ‰‹åšï¼Œå¹¶ä¸€è¾¹è§£é‡Šç¢°åˆ°çš„ä¸œè¥¿ï¼Œä»åšå½“ä¸­å­¦ä¹ ï¼Œä»¥äº†è§£ GitHub Actions åˆ°åº•æ˜¯ä»€ä¹ˆã€‚</p><h3 id="æ¡ˆä¾‹--1"><span class="me-2">æ¡ˆä¾‹ â€” 1</span><a href="#æ¡ˆä¾‹--1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>å»ºç«‹ Pull Request åè‡ªåŠ¨æ ‡è®° File Changes Size Label è®© Reviewer æ–¹ä¾¿å®‰æ’ Review å·¥ä½œã€‚</p><h4 id="æˆæœå›¾"><span class="me-2">æˆæœå›¾</span><a href="#æˆæœå›¾" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*vjSWeu2zB-hmVpfziMDR5Q.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*vjSWeu2zB-hmVpfziMDR5Q.webp" alt="[Demo PR](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NzQiIGhlaWdodD0iMjA2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">Demo PR</a></p><h4 id="è¿ä½œæµç¨‹"><span class="me-2">è¿ä½œæµç¨‹</span><a href="#è¿ä½œæµç¨‹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p>ä½¿ç”¨è€…å¼€ PRã€é‡å¼€ PRã€Push æ–° Commit åˆ° PR</p><li><p>è§¦å‘ GitHub Actions Workflow</p><li><p>shell script å–çš„ file changes æ•°é‡</p><li><p>åˆ¤æ–­æ•°é‡å¯¹ PR æ ‡è®°ä¸Š Label</p><li><p>å®Œæˆ</p></ul><h4 id="åŠ¨æ‰‹åš"><span class="me-2">åŠ¨æ‰‹åš</span><a href="#åŠ¨æ‰‹åš" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Actions â†’ New workflow â†’ set up a workflow yourselfã€‚</p><p><strong>æ¡£æ¡ˆåç§°ï¼š</strong> <code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code></p><p>Action Workflow å¯ä»¥æ¯ä¸ªä»»åŠ¡ç‹¬ç«‹ä¸€ä¸ªæ¡£æ¡ˆï¼Œä¹Ÿå¯ä»¥ä¾ç…§è§¦å‘äº‹ä»¶ã€ç›®çš„ï¼ŒåŒä¸ªç›®çš„èšåˆåœ¨åŒä¸ªæ¡£æ¡ˆï¼Œåæ­£å¤šä¸ª Job æ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œå¦å¤– <strong>å› ä¸º GitHub Actions æš‚æ—¶ä¸æ”¯æ´ç›®å½•ç»“æ„ï¼Œæ‰€ä»¥æ¡£æ¡ˆå°‘ä¸€ç‚¹ã€ä½¿ç”¨é˜¶å±‚å‘½åæ¡£æ¡ˆä¼šæ¯”è¾ƒå¥½ç®¡ç†</strong> ã€‚</p><p>è¿™è¾¹æŠŠ PR ç›¸å…³äº‹ä»¶çš„ Actions éƒ½æ”¾åœ¨åŒä¸ª Workflowã€‚</p><h4 id="automation-pullrequestyml"><span class="me-2"><code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code></span><a href="#automation-pullrequestyml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) åç§°</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Reqeust Automation</span>

<span class="c1"># Actions Log çš„æ ‡é¢˜åç§°</span>
<span class="na">run-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[Pull</span><span class="nv"> </span><span class="s">Reqeust</span><span class="nv"> </span><span class="s">Automation]</span><span class="nv"> </span><span class="s">${{</span><span class="nv"> </span><span class="s">github.event.pull_request.title</span><span class="nv"> </span><span class="se">\\</span><span class="s">|</span><span class="se">\\</span><span class="s">|</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>

<span class="c1"># è§¦å‘äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># PR äº‹ä»¶</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="c1"># PR - å¼€å¯ã€é‡å¼€ã€æœ‰æ–° Push Commit æ—¶</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">,</span> <span class="nv">synchronize</span><span class="pi">,</span> <span class="nv">reopened</span><span class="pi">]</span>


<span class="c1"># åŒä¸ª Concurrency Group å¦‚æœæœ‰æ–°çš„ Job ä¼šå–æ¶ˆæ­£åœ¨è·‘çš„</span>
<span class="c1"># ä¾‹å¦‚ Push Commit è§¦å‘çš„ä»»åŠ¡è¿˜æ²¡æ‰§è¡Œå°±åˆ Push Commit æ—¶ï¼Œä¼šå–æ¶ˆå‰ä¸€ä¸ªä»»åŠ¡</span>
<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.ref_name }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># Job å·¥ä½œé¡¹ç›®</span>
<span class="c1"># Job ä¼šå¹¶å‘æ‰§è¡Œ</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">label-pr-by-file-count</span><span class="pi">:</span>
    <span class="c1"># Job åç§° (å¯çœç•¥ï¼Œæœ‰è®¾å®šåœ¨ Log æ˜¾ç¤ºæ¯”è¾ƒå¥½è¯»)</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Label PR by changes file count</span>

    <span class="c1"># å¦‚æœè¿™ä¸ª Job å¤±è´¥ï¼Œä¸å½±å“æ•´ä¸ª Workflowï¼Œç»§ç»­å…¶ä»– Job</span>
    <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
    
    <span class="c1"># è®¾å®šæœ€é•¿ Timeout æ—¶é—´ï¼Œé˜²æ­¢å¼‚å¸¸æƒ…å†µå‘ç”Ÿæ—¶æ— æ­¢å°½çš„ç­‰å¾…</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">10</span>

    <span class="c1"># Runner Label - ä½¿ç”¨ GitHub Hosted Runner ubuntu-latest æ¥æ‰§è¡Œå·¥ä½œ</span>
    <span class="c1"># å¦‚æœæ˜¯ Private Repo ä¼šè®¡ç®—ç”¨é‡ï¼Œè¶…è¿‡å¯èƒ½ä¼šäº§ç”Ÿè´¹ç”¨</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="c1"># å·¥ä½œæ­¥éª¤</span>
    <span class="c1"># å·¥ä½œæ­¥éª¤ä¼šç…§é¡ºåºæ‰§è¡Œ</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># æ­¥éª¤åç§°</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Get changed file count and apply label</span>
        <span class="c1"># æ­¥éª¤ ID (å¯çœç•¥ï¼Œåç»­è‹¥æ²¡æœ‰ Step è¦å¼•ç”¨ Output è¾“å‡ºåˆ™ä¸éœ€è®¾å®š)</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">get-changed-files-count-by-gh</span>
        <span class="c1"># æ³¨å…¥å¤–éƒ¨ç¯å¢ƒå‚æ•°åˆ°æ‰§è¡Œé˜¶æ®µ</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="c1"># secrets.GITHUB_TOKEN æ˜¯ GitHub Actions æ‰§è¡Œæ—¶è‡ªåŠ¨äº§ç”Ÿçš„ Tokenï¼Œä¸éœ€è‡ªè¡Œåœ¨ Secrets è®¾å®šï¼Œæ‹¥æœ‰ä¸€äº› GitHub Repo API Scopes æƒé™</span>
          <span class="c1"># https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows</span>
          <span class="c1"># gh(GitHub) cli éœ€è¦æ³¨å…¥ GH_TOKEN åˆ° ENVï¼Œgh æ‰æœ‰æƒé™æ“ä½œ  </span>
          <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
        <span class="c1"># Shell script</span>
        <span class="c1"># GitHub Hosted Runner å†…å»ºéƒ½æœ‰å®‰è£…å¥½ gh cliï¼Œä¸éœ€è¦å®‰è£… Job å°±èƒ½ç›´æ¥ä½¿ç”¨</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">\\|</span>
          <span class="s">#   ${{ github.xxx }} æ˜¯ GitHub Actions Context è¡¨è¾¾å¼</span>
          <span class="s">#   ä¸æ˜¯ Shell å˜æ•°ï¼Œè€Œæ˜¯ YAML è§£æé˜¶æ®µç”± GitHub Actions æ›¿æ¢æˆå¯¹åº”å€¼</span>
          <span class="s">#   å…¶ä»–å‚æ•°ï¼šhttps://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>
          
          <span class="s"># å–å¾— PR ç¼–å·</span><span class="err">:</span>
          <span class="s">PR_NUMBER=${{ github.event.pull_request.number }}</span>

          <span class="s"># å–å¾— Repo</span><span class="err">:</span>
          <span class="s">REPO=${{ github.repository }}</span>

          <span class="s"># ä½¿ç”¨ GitHub API (gh cli) å–å¾— File changed æ•°é‡</span>
          <span class="s">FILE_COUNT=$(gh pr view $PR_NUMBER --repo $REPO --json files --jq '.files \\| length')</span>
          
          <span class="s"># Print Log</span>
          <span class="s">echo "Changed file count</span><span class="err">:</span> <span class="s">$FILE_COUNT"</span>

          <span class="s"># Label é€»è¾‘</span>
          <span class="s">if [ "$FILE_COUNT" -lt 5 ]; then</span>
            <span class="s">LABEL="XS"</span>
          <span class="s">elif [ "$FILE_COUNT" -lt 10 ]; then</span>
            <span class="s">LABEL="S"</span>
          <span class="s">elif [ "$FILE_COUNT" -lt 30 ]; then</span>
            <span class="s">LABEL="M"</span>
          <span class="s">elif [ "$FILE_COUNT" -lt 80 ]; then</span>
            <span class="s">LABEL="L"</span>
          <span class="s">elif [ "$FILE_COUNT" -lt 200 ]; then</span>
            <span class="s">LABEL="XL"</span>
          <span class="s">else</span>
            <span class="s">LABEL="XXL"</span>
          <span class="s">fi</span>

          <span class="s"># ä½¿ç”¨ GitHub API (gh cli) ç§»é™¤ç›®å‰çš„ Size Label</span>
          <span class="s">EXISTING_LABELS=$(gh pr view "$PR_NUMBER" --repo "$REPO" --json labels --jq '.labels[].name')</span>
          <span class="s">for EXISTING in $EXISTING_LABELS; do</span>
            <span class="s">case "$EXISTING" in</span>
              <span class="s">XS\\|S\\|M\\|L\\|XL\\|XXL)</span>
                <span class="s">echo "ğŸ§¹ Removing existing label</span><span class="err">:</span> <span class="s">$EXISTING"</span>
                <span class="s">gh pr edit "$PR_NUMBER" --repo "$REPO" --remove-label "$EXISTING"</span>
                <span class="s">;;</span>
            <span class="s">esac</span>
          <span class="s">done</span>

          <span class="s"># (å¯é€‰)å¦‚æœ Label ä¸å­˜åœ¨åˆ™å»ºç«‹</span>
          <span class="s">if ! gh label list --repo "$REPO" \\| grep -q "^$LABEL"; then</span>
            <span class="s">echo "ğŸ†• Creating missing label</span><span class="err">:</span> <span class="s">$LABEL"</span>
            <span class="s">gh label create "$LABEL" --repo "$REPO" --description "Size label</span><span class="err">:</span> <span class="s">$LABEL" --color "ededed"</span>
          <span class="s">else</span>
            <span class="s">echo "âœ… Label '$LABEL' already exists"</span>
          <span class="s">fi</span>
          
          <span class="s"># ä½¿ç”¨ GitHub API (gh cli) æ ‡è®°ä¸Š Label</span>
          <span class="s">gh pr edit $PR_NUMBER --repo $REPO --add-label "$LABEL"</span>
</pre></table></code></div></div><p>Commit æ¡£æ¡ˆåˆ° Repo ä¸»åˆ†æ”¯ä¹‹åï¼Œæˆ‘ä»¬å†å¼€æ–° PR å°±ä¼šè‡ªåŠ¨è§¦å‘ GitHub Actionsï¼š</p><p><a href="/assets/404bd5c70040/1*wdAztL0BgPeSZdqXxqUEXg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*wdAztL0BgPeSZdqXxqUEXg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MzgiIGhlaWdodD0iNzQ0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Action æ‰§è¡ŒçŠ¶æ€æ˜¾ç¤º <strong>Queued</strong> ä»£è¡¨ä»»åŠ¡æ­£åœ¨ç­‰å¾… Runner æ¥ä»»åŠ¡å›å»åšã€‚</p><h4 id="æ‰§è¡Œç»“æœ"><span class="me-2">æ‰§è¡Œç»“æœ</span><a href="#æ‰§è¡Œç»“æœ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*-JoD8IQYHVrDqHmLmrXyaQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*-JoD8IQYHVrDqHmLmrXyaQ.webp" alt="[Demo PR](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9Ijg1MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">Demo PR</a></p><p>æ‰§è¡Œå®Œæ¯•å¹¶ä¸”æˆåŠŸå PR ä¸Šå°±ä¼šè‡ªåŠ¨æ ‡è®°å¥½å¯¹åº”çš„ Label äº†ï¼çºªå½•ä¼šæ˜¾ç¤ºç”± <code class="language-plaintext highlighter-rouge">github-actions</code> æ ‡è®°ã€‚</p><p><strong>å®Œæ•´ç¨‹å¼ç ï¼š <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Automation-PullRequest.yml" target="_blank">Automation-PullRequest.yml</a></strong></p><h4 id="ç›´æ¥ä½¿ç”¨åˆ«äººåŒ…å¥½çš„-action-æ­¥éª¤-pascalgnsize-label-action"><span class="me-2">ç›´æ¥ä½¿ç”¨åˆ«äººåŒ…å¥½çš„ Action æ­¥éª¤ï¼š <a href="https://github.com/pascalgn/size-label-action/tree/main" target="_blank">pascalgn/size-label-action</a></span><a href="#ç›´æ¥ä½¿ç”¨åˆ«äººåŒ…å¥½çš„-action-æ­¥éª¤-pascalgnsize-label-action" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å‰é¢æœ‰è¯´åˆ°å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ«äººå°è£…å¥½çš„ Actionï¼Œæ ‡è®° PR Size Label è¿™ä»»åŠ¡å·²ç»æœ‰ç°æˆçš„è½®å­å¯ä»¥ä½¿ç”¨ï¼Œä¸Šè¿°åªæ˜¯ä¸ºäº†æ•™å­¦ç›®çš„ï¼Œå®é™…ä¸Šä¸éœ€è¦è‡ªå·±é‡é€ è½®å­ã€‚</p><p>åªéœ€è¦åœ¨ Action Workflow Job Step ä¸­ç›´æ¥ä½¿ç”¨å°±èƒ½å®Œæˆä»»åŠ¡ï¼š</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) åç§°</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Reqeust Automation</span>

<span class="c1"># è§¦å‘äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># PR äº‹ä»¶</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="c1"># PR - å¼€å¯ã€é‡å¼€ã€æœ‰æ–° Push Commit æ—¶</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">,</span> <span class="nv">synchronize</span><span class="pi">,</span> <span class="nv">reopened</span><span class="pi">]</span>


<span class="c1"># åŒä¸ª Concurrency Group å¦‚æœæœ‰æ–°çš„ Job ä¼šå–æ¶ˆæ­£åœ¨è·‘çš„</span>
<span class="c1"># ä¾‹å¦‚ Push Commit è§¦å‘çš„ä»»åŠ¡è¿˜æ²¡æ‰§è¡Œå°±åˆ Push Commit æ—¶ï¼Œä¼šå–æ¶ˆå‰ä¸€ä¸ªä»»åŠ¡</span>
<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.ref_name }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># Job å·¥ä½œé¡¹ç›®</span>
<span class="c1"># Job ä¼šå¹¶å‘æ‰§è¡Œ</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">label-pr-by-file-count</span><span class="pi">:</span>
    <span class="c1"># Job åç§° (å¯çœç•¥ï¼Œæœ‰è®¾å®šåœ¨ Log æ˜¾ç¤ºæ¯”è¾ƒå¥½è¯»)</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Label PR by changes file count</span>

    <span class="c1"># å¦‚æœè¿™ä¸ª Job å¤±è´¥ï¼Œä¸å½±å“æ•´ä¸ª Workflowï¼Œç»§ç»­å…¶ä»– Job</span>
    <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
    
    <span class="c1"># è®¾å®šæœ€é•¿ Timeout æ—¶é—´ï¼Œé˜²æ­¢å¼‚å¸¸æƒ…å†µå‘ç”Ÿæ—¶æ— æ­¢å°½çš„ç­‰å¾…</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">10</span>

    <span class="c1"># Runner Label - ä½¿ç”¨ GitHub Hosted Runner ubuntu-latest æ¥æ‰§è¡Œå·¥ä½œ</span>
    <span class="c1"># å¦‚æœæ˜¯ Private Repo ä¼šè®¡ç®—ç”¨é‡ï¼Œè¶…è¿‡å¯èƒ½ä¼šäº§ç”Ÿè´¹ç”¨</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="c1"># å·¥ä½œæ­¥éª¤</span>
    <span class="c1"># å·¥ä½œæ­¥éª¤ä¼šç…§é¡ºåºæ‰§è¡Œ</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># æ­¥éª¤åç§°</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Get changed file count and apply label</span>
        <span class="c1"># æ­¥éª¤ ID (å¯çœç•¥ï¼Œåç»­è‹¥æ²¡æœ‰ Step è¦å¼•ç”¨ Output è¾“å‡ºåˆ™ä¸éœ€è®¾å®š)</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">get-changed-files-count-by-gh</span>
        <span class="c1"># ç›´æ¥ä½¿ç”¨åˆ«äººå°è£…å¥½çš„ç¨‹å¼</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pascalgn/size-label-action@v0.5.5"</span>
        <span class="c1"># æ³¨å…¥å¤–éƒ¨ç¯å¢ƒå‚æ•°åˆ°æ‰§è¡Œé˜¶æ®µ</span>
        <span class="c1"># å‚æ•°å‘½åã€å¯ç”¨å‚æ•°è¦å‚è€ƒè¯´æ˜ï¼šhttps://github.com/pascalgn/size-label-action/tree/main</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="c1"># secrets.GITHUB_TOKEN æ˜¯ GitHub Actions æ‰§è¡Œæ—¶è‡ªåŠ¨äº§ç”Ÿçš„ Token (github-actions èº«ä»½)ï¼Œä¸éœ€è‡ªè¡Œåœ¨ Secrets è®¾å®šï¼Œæ‹¥æœ‰ä¸€äº› GitHub Repo API Scopes æƒé™</span>
          <span class="c1"># https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows</span>
          <span class="na">GITHUB_TOKEN</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">secrets.GITHUB_TOKEN</span><span class="nv"> </span><span class="s">}}"</span>
</pre></table></code></div></div><p><a href="https://github.com/pascalgn/size-label-action/tree/main" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/1e5c6f52127032dc1a5fea71a498fa9cc585987880889f0306ef705de3990867/pascalgn/size-label-action" alt="" loading="lazy"></a></p><p>è¿™ä¸ªåŒ…å¥½çš„ Action æ˜¯ JavaScript Actionï¼Œå®é™…æ‰§è¡Œç¨‹å¼ç å¯ä»¥å‚è€ƒä»¥ä¸‹æ¡£æ¡ˆï¼š <a href="https://github.com/pascalgn/size-label-action/blob/main/dist/index.js" target="_blank">dist/index.js</a> ã€‚</p><h4 id="name-run-name-çš„è¡¥å……"><span class="me-2">name, run-name çš„è¡¥å……ï¼š</span><a href="#name-run-name-çš„è¡¥å……" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*zBmjm_3AU53NN0UhTrmOBQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*zBmjm_3AU53NN0UhTrmOBQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDEyIiBoZWlnaHQ9IjU2OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><ul><li><p>name: Action Workflow çš„åç§°</p><li><p>run-name: æ‰§è¡Œçºªå½•çš„æ ‡é¢˜åç§° (å¯å¸¦å…¥ PR Title or Branch or Authorâ€¦etc) å¦‚æœæ˜¯ on:pull_request äº‹ä»¶é¢„è®¾æ˜¯ PR Titleã€‚</p></ul><h3 id="æ¡ˆä¾‹--2"><span class="me-2">æ¡ˆä¾‹ â€” 2</span><a href="#æ¡ˆä¾‹--2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>å»ºç«‹ Pull Request åå¦‚æœæ²¡æœ‰ Assignee åˆ™è‡ªåŠ¨ Assign ä½œè€…è‡ªå·±å¹¶ä¸” Comment æç¤ºã€‚(åªæœ‰åœ¨åˆæ¬¡å»ºç«‹æ—¶æ‰ä¼šæ‰§è¡Œ)</p><h4 id="æˆæœå›¾-1"><span class="me-2">æˆæœå›¾</span><a href="#æˆæœå›¾-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*EL-0nQF7jhP34d6ZoSkJAg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*EL-0nQF7jhP34d6ZoSkJAg.webp" alt="[Demo PR](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjk3IiBoZWlnaHQ9IjczNyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">Demo PR</a></p><h4 id="è¿ä½œæµç¨‹-1"><span class="me-2">è¿ä½œæµç¨‹</span><a href="#è¿ä½œæµç¨‹-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p>ä½¿ç”¨è€…å¼€ PR</p><li><p>è§¦å‘ GitHub Actions Workflow</p><li><p>github script å–å¾— assignee</p><li><p>å¦‚æœæ²¡æœ‰ asignee åˆ™ assign å¼€ PR çš„ä½œè€… &amp; Comment è®¯æ¯</p><li><p>å®Œæˆ</p></ul><h4 id="åŠ¨æ‰‹åš-1"><span class="me-2">åŠ¨æ‰‹åš</span><a href="#åŠ¨æ‰‹åš-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Actions â†’ New workflow â†’ set up a workflow yourselfã€‚</p><p><strong>æ¡£æ¡ˆåç§°ï¼š</strong> <code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code> (åŒä¸Š)</p><h4 id="automation-pullrequestyml-1"><span class="me-2"><code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code></span><a href="#automation-pullrequestyml-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) åç§°</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Reqeust Automation</span>

<span class="c1"># Actions Log çš„æ ‡é¢˜åç§°</span>
<span class="na">run-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Pull</span><span class="nv"> </span><span class="s">Reqeust</span><span class="nv"> </span><span class="s">Automation</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">Daily</span><span class="nv"> </span><span class="s">Checker"</span>

<span class="c1"># è§¦å‘äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># PR äº‹ä»¶</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="c1"># PR - å¼€å¯ã€é‡å¼€ã€æœ‰æ–° Push Commit æ—¶</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">,</span> <span class="nv">synchronize</span><span class="pi">,</span> <span class="nv">reopened</span><span class="pi">]</span>


<span class="c1"># åŒä¸ª Concurrency Group å¦‚æœæœ‰æ–°çš„ Job ä¼šå–æ¶ˆæ­£åœ¨è·‘çš„</span>
<span class="c1"># ä¾‹å¦‚ Push Commit è§¦å‘çš„ä»»åŠ¡è¿˜æ²¡æ‰§è¡Œå°±åˆ Push Commit æ—¶ï¼Œä¼šå–æ¶ˆå‰ä¸€ä¸ªä»»åŠ¡</span>
<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.ref_name }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># Job å·¥ä½œé¡¹ç›®</span>
<span class="c1"># Job ä¼šå¹¶å‘æ‰§è¡Œ</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">label-pr-by-file-count</span><span class="pi">:</span>
    <span class="c1"># è¯·å‚è€ƒå‰æ–‡ï¼Œç•¥....</span>
  <span class="c1"># ---------</span>
  <span class="na">assign-self-if-no-assignee</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Automatically assign to self if no assignee is specified</span>
    <span class="c1"># å› ä¸ºæ˜¯å…±ç”¨è§¦å‘äº‹ä»¶ï¼Œæ‰€ä»¥åœ¨ Job ä¸Šè‡ªå·±åˆ¤æ–­ï¼Œå½“æ˜¯ Pull Request Opened(é¦–æ¬¡å»ºç«‹) æ—¶æ‰æ‰§è¡Œ Job å¦åˆ™ä¼š Skipped</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">github.event_name == 'pull_request' &amp;&amp; github.event.action == 'opened'</span>

    <span class="c1"># å¦‚æœè¿™ä¸ª Job å¤±è´¥ï¼Œä¸å½±å“æ•´ä¸ª Workflowï¼Œç»§ç»­å…¶ä»– Job</span>
    <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
    
    <span class="c1"># è®¾å®šæœ€é•¿ Timeout æ—¶é—´ï¼Œé˜²æ­¢å¼‚å¸¸æƒ…å†µå‘ç”Ÿæ—¶æ— æ­¢å°½çš„ç­‰å¾…</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">10</span>
    
    <span class="c1"># Runner Label - ä½¿ç”¨ GitHub Hosted Runner ubuntu-latest æ¥æ‰§è¡Œå·¥ä½œ</span>
    <span class="c1"># å¦‚æœæ˜¯ Private Repo ä¼šè®¡ç®—ç”¨é‡ï¼Œè¶…è¿‡å¯èƒ½ä¼šäº§ç”Ÿè´¹ç”¨</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Assign self if No Assignee</span>
        <span class="c1"># ä½¿ç”¨ GitHub Script (JavaScript) æ’°å†™è„šæœ¬ (Node.js ç¯å¢ƒ)</span>
        <span class="c1"># ç›¸è¾ƒä¸Šé¢ç›´æ¥ç”¨ Shell Script å†™èµ·æ¥æ›´æ–¹ä¾¿æ¼‚äº®</span>
        <span class="c1"># ä¹Ÿä¸éœ€è¦è‡ªè¡Œæ³¨å…¥ç¯å¢ƒå˜æ•°ã€GITHUB_TOKEN</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="s">\\|</span>
            <span class="s">// github-script ä¸­ä¼šè‡ªåŠ¨æ³¨å…¥åˆ° context å˜æ•°ä¾› javascript ç›´æ¥å¼•ç”¨</span>
            <span class="s">// https://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>

            <span class="s">const issue = context.payload.pull_request; // å¦‚æœè¦è¿ Issue ä¸€èµ·æ”¯æ´å¯å†™æˆ context.payload.issue \\|\\| context.payload.pull_request</span>
            <span class="s">const assignees = issue.assignees \\|\\| [];</span>
            <span class="s">const me = context.actor;</span>

            <span class="s">if (assignees.length === 0) {</span>
              <span class="s">// Assignee è®¾æˆè‡ªå·±</span>
              <span class="s">await github.rest.issues.addAssignees({</span>
                <span class="s">owner</span><span class="err">:</span> <span class="s">context.repo.owner,</span>
                <span class="s">repo</span><span class="err">:</span> <span class="s">context.repo.repo,</span>
                <span class="s">issue_number</span><span class="err">:</span> <span class="s">issue.number,</span>
                <span class="s">assignees</span><span class="err">:</span> <span class="pi">[</span><span class="nv">me</span><span class="pi">]</span>
              <span class="err">}</span><span class="s">);</span>

              <span class="s">// ç•™è¨€é€šçŸ¥</span>
              <span class="s">await github.rest.issues.createComment({</span>
                <span class="s">owner</span><span class="err">:</span> <span class="s">context.repo.owner,</span>
                <span class="s">repo</span><span class="err">:</span> <span class="s">context.repo.repo,</span>
                <span class="s">issue_number</span><span class="err">:</span> <span class="s">issue.number,</span>
                <span class="s">body</span><span class="err">:</span> <span class="err">`</span><span class="s">ğŸ”§ No assignee was set, so I have assigned this to myself (@${me}).`</span>
              <span class="s">});</span>
            <span class="s">}</span>
</pre></table></code></div></div><p>è¿™æ¬¡æˆ‘ä»¬ç¤ºèŒƒæ”¹ç”¨ GitHub Script (JavaScript) æ’°å†™è„šæœ¬ï¼Œç¨‹å¼ç è¯­æ³•ä¸Šæ›´å¼¹æ€§æ›´å¥½æ’°å†™ã€‚</p><p>å½“ç„¶å¦‚æœä½ æƒ³ç…§æˆ‘ä¹‹å‰è¯´çš„æ¯ä¸ªä»»åŠ¡ä¸€ä¸ªæ¡£æ¡ˆï¼Œå°±å¯ä»¥æ‹”æ‰ Job If. . ç›´æ¥åœ¨ Action Workflow è§¦å‘æ¡ä»¶è®¾å®šï¼š</p><p><code class="language-plaintext highlighter-rouge">Automation-PullRequest-Auto-Assign.yml</code> <strong>ï¼š</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) åç§°</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Reqeust Automation - Auto Assignee Self</span>

<span class="c1"># è§¦å‘äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># PR äº‹ä»¶</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="c1"># PR - å¼€å¯æ—¶</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">assign-self-if-no-assignee</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Automatically assign to self if no assignee is specified</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># è¯·å‚è€ƒå‰æ–‡ï¼Œç•¥....</span>
</pre></table></code></div></div><p>Commit æ¡£æ¡ˆåˆ° Repo ä¸»åˆ†æ”¯ä¹‹åï¼Œæˆ‘ä»¬å†å¼€æ–° PR å°±ä¼šè‡ªåŠ¨è§¦å‘ GitHub Actionsï¼š</p><p><a href="/assets/404bd5c70040/1*Y-A6owUibNEFBoRFHnqIYg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Y-A6owUibNEFBoRFHnqIYg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY2OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>ç°åœ¨æœ‰ä¸¤ä¸ª Job è¦æ‰§è¡Œäº†ï¼</p><h4 id="æ‰§è¡Œç»“æœ-1"><span class="me-2">æ‰§è¡Œç»“æœ</span><a href="#æ‰§è¡Œç»“æœ-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*23muCVgUJKmZt746khBMFQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*23muCVgUJKmZt746khBMFQ.webp" alt="[Demo PR](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzUwIiBoZWlnaHQ9IjExMDEiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">Demo PR</a></p><p>æ‰§è¡Œå®Œæ¯•å¹¶ä¸”æˆåŠŸå PR å¦‚æœæ²¡æœ‰ Asignees ä¼šè‡ªåŠ¨ Assign PR ä½œè€…å¹¶ä¸” Comment è®¯æ¯ã€‚(éƒ½æ˜¯ç”¨ <code class="language-plaintext highlighter-rouge">github-actions</code> èº«ä»½æ“ä½œ)</p><p><strong>å®Œæ•´ç¨‹å¼ç ï¼š <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Automation-PullRequest.yml" target="_blank">Automation-PullRequest.yml</a></strong></p><h4 id="æµ‹è¯•é‡å¼€reopened-pr"><span class="me-2">æµ‹è¯•é‡å¼€(Reopened) PR</span><a href="#æµ‹è¯•é‡å¼€reopened-pr" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*mcDa7TZjv6mO7HtwhOE-Vw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*mcDa7TZjv6mO7HtwhOE-Vw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NjAiIGhlaWdodD0iNDA3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>å¯çœ‹åˆ°åªä¼šæ‰§è¡Œ Size Label Jobï¼ŒAuto Assignee Job è¢« Skipped äº†ã€‚</p><blockquote><p><em>è¿™ä¸ªä»»åŠ¡ä¹Ÿæœ‰äººåŒ…å¥½ Action å¯ä»¥ç›´æ¥å¤ç”¨ï¼Œå¯å‚è€ƒï¼š <a href="https://github.com/pozil/auto-assign-issue" target="_blank">pozil/auto-assign-issue</a> ã€‚</em></p></blockquote><h3 id="æ¡ˆä¾‹--3"><span class="me-2">æ¡ˆä¾‹ â€” 3</span><a href="#æ¡ˆä¾‹--3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>æ¯æ—¥æ—©ä¸Š 9 ç‚¹è‡ªåŠ¨ç»Ÿè®¡å½“å‰ PR æ•°é‡åŠå·²å¼€å¯å¤šä¹…æ—¶é—´å‘é€é€šçŸ¥è®¯æ¯åˆ° Slack å·¥ä½œå¯»ç»„ã€è‡ªåŠ¨å…³é—­å·²å¼€å¯è¶…è¿‡ 3 ä¸ªæœˆçš„ PRã€‚</p><h4 id="æˆæœå›¾-2"><span class="me-2">æˆæœå›¾</span><a href="#æˆæœå›¾-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*0stX9KpZi6PcXpG-90wyIg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*0stX9KpZi6PcXpG-90wyIg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDgiIGhlaWdodD0iMTQ3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/404bd5c70040/1*Nbg3r1zzhx24YIBEjPJnaw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Nbg3r1zzhx24YIBEjPJnaw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MjgiIGhlaWdodD0iMTg3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><p>Slack å·¥ä½œç¾¤ç»„æ¯å¤©æ—©ä¸Šè‡ªåŠ¨æ”¶åˆ°æŠ¥å‘Š</p><li><p>è‡ªåŠ¨å…³é—­è¶…è¿‡ 90 å¤©çš„ PR</p></ul><h4 id="è¿ä½œæµç¨‹-2"><span class="me-2">è¿ä½œæµç¨‹</span><a href="#è¿ä½œæµç¨‹-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p>GitHub Actions æ¯å¤©æ—©ä¸Š 9 ç‚¹è‡ªåŠ¨è§¦å‘</p><li><p>è§¦å‘ GitHub Actions Workflow</p><li><p>github script å–å¾— å¼€å¯ä¸­çš„ PR åˆ—è¡¨ã€ç»Ÿè®¡å¼€å¯äº†å‡ å¤©</p><li><p>ä¼ é€ç»Ÿè®¡æŠ¥å‘Šè®¯æ¯åˆ° Slack</p><li><p>å…³é—­è¶…è¿‡ 90 å¤©çš„ PR</p><li><p>å®Œæˆ</p></ul><h4 id="åŠ¨æ‰‹åš-2"><span class="me-2">åŠ¨æ‰‹åš</span><a href="#åŠ¨æ‰‹åš-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Actions â†’ New workflow â†’ set up a workflow yourselfã€‚</p><p><strong>æ¡£æ¡ˆåç§°ï¼š</strong> <code class="language-plaintext highlighter-rouge">Automation-PullRequest-Daily.yml</code></p><h4 id="automation-pullrequest-dailyyml"><span class="me-2">Automation-PullRequest-Daily.yml</span><a href="#automation-pullrequest-dailyyml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) åç§°</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Reqeust Automation - Daily Checker</span>

<span class="c1"># è§¦å‘äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># æ’ç¨‹å®šæ—¶è‡ªåŠ¨æ‰§è¡Œ</span>
  <span class="c1"># https://crontab.guru/</span>
  <span class="c1"># UTC æ—¶é—´</span>
  <span class="na">schedule</span><span class="pi">:</span>
    <span class="c1"># UTC çš„ 01:00 = æ¯å¤© UTC+8 çš„ 09:00</span>
    <span class="pi">-</span> <span class="na">cron</span><span class="pi">:</span> <span class="s1">'</span><span class="s">0</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*'</span>
  <span class="c1"># æ‰‹åŠ¨è§¦å‘</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>

<span class="c1"># Job å·¥ä½œé¡¹ç›®</span>
<span class="c1"># Job ä¼šå¹¶å‘æ‰§è¡Œ</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">caculate-pr-status</span><span class="pi">:</span>
    <span class="c1"># Job åç§° (å¯çœç•¥ï¼Œæœ‰è®¾å®šåœ¨ Log æ˜¾ç¤ºæ¯”è¾ƒå¥½è¯»)</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Caculate PR Status</span>
    <span class="c1"># Runner Label - ä½¿ç”¨ GitHub Hosted Runner ubuntu-latest æ¥æ‰§è¡Œå·¥ä½œ</span>
    <span class="c1"># å¦‚æœæ˜¯ Private Repo ä¼šè®¡ç®—ç”¨é‡ï¼Œè¶…è¿‡å¯èƒ½ä¼šäº§ç”Ÿè´¹ç”¨</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="c1"># Job Output</span>
    <span class="na">outputs</span><span class="pi">:</span>
      <span class="na">pr_list</span><span class="pi">:</span> <span class="s">${{ steps.pr-info.outputs.pr_list }}</span>

    <span class="c1"># å·¥ä½œæ­¥éª¤</span>
    <span class="c1"># å·¥ä½œæ­¥éª¤ä¼šç…§é¡ºåºæ‰§è¡Œ</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># æ­¥éª¤åç§°</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Fetch open PRs and caculate</span>
        <span class="c1"># Step å¤–éƒ¨è¦å¼•ç”¨ Output è¾“å‡ºï¼Œéœ€è®¾å®š</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">pr-info</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="s">\\|</span>
            <span class="s">const now = new Date();</span>
            <span class="s">const per_page = 100;</span>
            <span class="s">let page = 1;</span>
            <span class="s">let allPRs = [];</span>
      
            <span class="s">while (true) {</span>
              <span class="s">const { data</span><span class="err">:</span> <span class="s">prs } = await github.rest.pulls.list({</span>
                <span class="s">owner</span><span class="err">:</span> <span class="s">context.repo.owner,</span>
                <span class="s">repo</span><span class="err">:</span> <span class="s">context.repo.repo,</span>
                <span class="s">state</span><span class="err">:</span> <span class="s1">'</span><span class="s">open'</span><span class="err">,</span>
                <span class="s">per_page,</span>
                <span class="s">page,</span>
              <span class="s">});</span>
              <span class="s">if (prs.length === 0) break;</span>
              <span class="s">allPRs = allPRs.concat(prs);</span>
              <span class="s">if (prs.length &lt; per_page) break;</span>
              <span class="s">page++;</span>
            <span class="s">}</span>
      
            <span class="s">const result = allPRs.map(pr =&gt; {</span>
              <span class="s">const created = new Date(pr.created_at);</span>
              <span class="s">const daysOpen = Math.floor((now - created) / (1000 * 60 * 60 * 24));</span>
              <span class="s">return {</span>
                <span class="s">pr</span><span class="err">:</span> <span class="s">pr.number.toString(),</span>
                <span class="s">title</span><span class="err">:</span> <span class="s">pr.title,</span>
                <span class="s">idle</span><span class="err">:</span> <span class="s">daysOpen</span>
              <span class="s">};</span>
            <span class="s">});</span>

            <span class="s">// è®¾å®šå› Outputï¼Œåªæ¥å— String</span>
            <span class="s">core.setOutput('pr_list', JSON.stringify(result));</span>
  <span class="c1"># ----</span>
  <span class="na">send-pr-summary-message-to-slack</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Send PR Summary Messag to Slack</span>
    <span class="c1"># Job é¢„è®¾æ˜¯å¹¶å‘ï¼Œä½¿ç”¨ needs å¯ä»¥è¿«ä½¿å½“å‰ Job ç­‰åˆ° need Job å®Œæˆæ—¶æ‰ä¼šæ‰§è¡Œ</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">caculate-pr-status</span><span class="pi">]</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Generate Message</span>
        <span class="c1"># Step å¤–éƒ¨è¦å¼•ç”¨ Output è¾“å‡ºï¼Œéœ€è®¾å®š</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">gen-msg</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="s">\\|</span>
            <span class="s">const prList = JSON.parse(`${{ needs.caculate-pr-status.outputs.pr_list }}`);</span>
            <span class="s">const blocks = [];</span>
      
            <span class="s">// æ ‡é¢˜</span>
            <span class="s">blocks.push({</span>
              <span class="s">type</span><span class="err">:</span> <span class="s2">"</span><span class="s">section"</span><span class="err">,</span>
              <span class="na">text</span><span class="pi">:</span> <span class="pi">{</span>
                <span class="nv">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">mrkdwn"</span><span class="pi">,</span>
                <span class="nv">text</span><span class="pi">:</span> <span class="err">`</span><span class="nv">ğŸ“¬ *Open PR Report*\nTotal</span><span class="pi">:</span> <span class="err">*</span><span class="nv">$</span><span class="pi">{</span><span class="nv">prList.length</span><span class="pi">}</span><span class="err">*</span> <span class="nv">PR(s)`</span>
              <span class="pi">}</span>
          <span class="err">  }</span><span class="s">);</span>
      
            <span class="s">// æ¯ä¸ª PR ä¸€è¡Œ</span>
            <span class="s">for (const pr of prList) {</span>
              <span class="s">blocks.push({</span>
                <span class="s">type</span><span class="err">:</span> <span class="s2">"</span><span class="s">section"</span><span class="err">,</span>
                <span class="na">text</span><span class="pi">:</span> <span class="pi">{</span>
                  <span class="nv">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">mrkdwn"</span><span class="pi">,</span>
                  <span class="nv">text</span><span class="pi">:</span> <span class="err">`</span><span class="nv">â€¢ &lt;https</span><span class="pi">:</span><span class="nv">//github.com/$</span><span class="pi">{</span><span class="nv">context.repo.owner</span><span class="pi">}</span><span class="nv">/$</span><span class="pi">{</span><span class="nv">context.repo.repo</span><span class="pi">}</span><span class="nv">/pull/$</span><span class="pi">{</span><span class="nv">pr.pr</span><span class="pi">}</span><span class="nv">\\|PR</span> <span class="c1">#${pr.pr}&gt; *${pr.title}* - ğŸ•’ ${pr.idle} day(s)`</span>
                <span class="pi">}</span>
          <span class="err">    }</span><span class="s">);</span>
            <span class="s">}</span>

            <span class="s">// è®¾å®šå› Outputï¼Œåªæ¥å— String</span>
            <span class="s">core.setOutput('blocks', JSON.stringify(blocks));</span>

            
      <span class="c1"># ä½¿ç”¨ Slack å®˜æ–¹å°è£…å¥½çš„ Slack API Github Actions</span>
      <span class="c1"># https://tools.slack.dev/slack-github-action/sending-techniques/sending-data-slack-api-method/</span>
      <span class="c1"># å‘é€è®¯æ¯</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Post text to a Slack channel</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">slackapi/slack-github-action@v2.1.0</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">method</span><span class="pi">:</span> <span class="s">chat.postMessage</span>
          <span class="na">token</span><span class="pi">:</span> <span class="s">${{ secrets.SLACK_BOT_TOKEN }}</span>
          <span class="na">payload</span><span class="pi">:</span> <span class="s">\\|</span>
            <span class="s">channel</span><span class="err">:</span> <span class="s">${{ vars.SLACK_TEAM_CHANNEL_ID }}</span>
            <span class="s">blocks</span><span class="err">:</span> <span class="s">${{ steps.gen-msg.outputs.blocks }}</span>
  <span class="c1"># ----</span>
  <span class="na">auto-close-old-prs</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Auto Close Old PRs</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">caculate-pr-status</span><span class="pi">]</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Auto close PRs opened more than 90 days</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="s">\\|</span>
            <span class="s">const prList = JSON.parse(`${{ needs.caculate-pr-status.outputs.pr_list }}`);</span>
            <span class="s">const oldPRs = prList.filter(pr =&gt; pr.idle &gt; 90);</span>

            <span class="s">for (const pr of oldPRs) {</span>
              <span class="s">await github.rest.pulls.update({</span>
                <span class="s">owner</span><span class="err">:</span> <span class="s">context.repo.owner,</span>
                <span class="s">repo</span><span class="err">:</span> <span class="s">context.repo.repo,</span>
                <span class="s">pull_number</span><span class="err">:</span> <span class="s">parseInt(pr.pr),</span>
                <span class="s">state</span><span class="err">:</span> <span class="s1">'</span><span class="s">closed'</span>
              <span class="err">}</span><span class="s">);</span>

              <span class="s">await github.rest.issues.createComment({</span>
                <span class="s">owner</span><span class="err">:</span> <span class="s">context.repo.owner,</span>
                <span class="s">repo</span><span class="err">:</span> <span class="s">context.repo.repo,</span>
                <span class="s">issue_number</span><span class="err">:</span> <span class="s">parseInt(pr.pr),</span>
                <span class="s">body</span><span class="err">:</span> <span class="err">`</span><span class="s">âš ï¸ This pull request has been automatically closed because it has been open for more than 90 days. Please reopen if needed.`</span>
              <span class="s">});</span>
            <span class="s">}</span>
            <span class="s">console.log(`Closed ${oldPRs.length} PR(s)`);</span>
</pre></table></code></div></div><p>åœ¨è¿™ä¸ªèŒƒä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨ï¼š</p><ul><li><p>on: schedule Crontab æ’ç¨‹è‡ªåŠ¨è§¦å‘è·Ÿ workflow_dispatch æ”¯æ´æ‰‹åŠ¨è§¦å‘</p><li><p>Job output/Step output (éƒ½åªèƒ½æ˜¯å­—ä¸²)</p><li><p>å¤šä¸ª Jobs é¢„è®¾æ˜¯å¹¶å‘ä½†å¯ä»¥ç”¨ <code class="language-plaintext highlighter-rouge">needs</code> æ—¶é—´ä¾èµ–ç­‰å¾…å…³ç³»</p><li><p>ä» Repo Secrets/Variables å–å¾—è®¾å®š</p><li><p>ä¸²æ¥ Slack API</p></ul><p><strong>Repo Secrets â€” æ–°å¢</strong> <code class="language-plaintext highlighter-rouge">SLACK_BOT_TOKEN</code></p><p><a href="/assets/404bd5c70040/1*YC4DBHtKmX5XGgcSSzaE5A.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*YC4DBHtKmX5XGgcSSzaE5A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjIxIiBoZWlnaHQ9Ijk4NyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><ul><li>Slack App å»ºç«‹ã€å‘è®¯æ¯æƒé™è®¾å®šå¯å‚è€ƒæˆ‘ <a href="/posts/zrealm-dev/zh-cn/slack-app-%E6%95%B4%E5%90%88-chatgpt-%E5%88%A9%E7%94%A8-openai-api-%E4%B8%8E-google-cloud-functions-%E8%87%AA%E5%BB%BA%E6%99%BA%E8%83%BD%E5%8A%A9%E7%90%86-bd94cc88f9c9/">ä¹‹å‰çš„æ–‡ç« </a></ul><p><strong>Repo Variables â€” æ–°å¢</strong> <code class="language-plaintext highlighter-rouge">SLACK_TEAM_CHANNEL_ID</code></p><p><a href="/assets/404bd5c70040/1*X4gZ5_IRvsiehAL0O9AleQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*X4gZ5_IRvsiehAL0O9AleQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTc0IiBoZWlnaHQ9Ijk5OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Commit æ¡£æ¡ˆåˆ° Repo ä¸»åˆ†æ”¯ä¹‹åï¼Œå›åˆ° Actions æ‰‹åŠ¨è§¦å‘çœ‹çœ‹ï¼š</p><blockquote><p><em>æ—¥åä¼šæ¯æ—¥è‡ªåŠ¨è§¦å‘ã€‚</em></p></blockquote><p><a href="/assets/404bd5c70040/1*WNFKXl-QC2WGyaSWep5-DA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*WNFKXl-QC2WGyaSWep5-DA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDQ4IiBoZWlnaHQ9IjQzOCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Actions â†’ Pull Request Automation â€” Daily Checker â†’ Run workflow â†’ Branch: main â†’ Run workflowã€‚</p><p><strong>æ‰§è¡Œåå¯ä»¥ç‚¹å‡»è¿›å…¥æŸ¥çœ‹æ‰§è¡ŒçŠ¶å†µï¼š</strong></p><p><a href="/assets/404bd5c70040/1*4mvOxnd1uS4ZlxnNoNdHaQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*4mvOxnd1uS4ZlxnNoNdHaQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDg3IiBoZWlnaHQ9IjU0NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/404bd5c70040/1*BluzFgY2tM2E7DwoVq1jQw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*BluzFgY2tM2E7DwoVq1jQw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDMwIiBoZWlnaHQ9IjQ1OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>å› ä¸ºæœ‰ <code class="language-plaintext highlighter-rouge">needs</code> çš„é™åˆ¶ï¼ŒJobs æµç¨‹å°±ä¼šæ˜¯ <code class="language-plaintext highlighter-rouge">Cacluate PR Status</code> å…ˆå®Œæˆåæ‰ä¼šå¹¶å‘æ‰§è¡Œ <code class="language-plaintext highlighter-rouge">Auto Close Old PRs</code> å’Œ <code class="language-plaintext highlighter-rouge">Send PR Summary Message to Slack</code> ã€‚</p><h4 id="æ‰§è¡Œç»“æœ-2"><span class="me-2">æ‰§è¡Œç»“æœ</span><a href="#æ‰§è¡Œç»“æœ-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>ä»»åŠ¡éƒ½æˆåŠŸæ‰§è¡Œåå¯ä»¥æŸ¥çœ‹ Slack è®¯æ¯ï¼š</strong></p><p><a href="/assets/404bd5c70040/1*0stX9KpZi6PcXpG-90wyIg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*0stX9KpZi6PcXpG-90wyIg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDgiIGhlaWdodD0iMTQ3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>æˆåŠŸ ğŸš€ğŸš€ğŸš€</p><p><strong>å®Œæ•´ç¨‹å¼ç ï¼š <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Automation-PullRequest-Daily.yml" target="_blank">Automation-PullRequest-Daily.yml</a></strong></p><h3 id="å°ç»“"><span class="me-2">å°ç»“</span><a href="#å°ç»“" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><p>å¸Œæœ›ä¸Šé¢ä¸‰ä¸ªæ¡ˆä¾‹èƒ½è®©æ‚¨å¯¹ GitHub Actions æœ‰ä¸ªåˆæ­¥çš„äº†è§£ä¹Ÿå¸Œæœ›æœ‰æ¿€èµ·ä½ çš„è‡ªåŠ¨åŒ–å·¥ä½œåˆ›æ„ï¼Œå¯ä»¥è‡ªå·±å‘æƒ³å·¥ä½œæµç¨‹(è¯·åŠ¡å¿…å…ˆå‚è€ƒ <a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows" target="_blank">è§¦å‘äº‹ä»¶</a> )ï¼Œç„¶åæ’°å†™è„šæœ¬æ‰§è¡Œï¼›ä¹Ÿè®°å¾—å…ˆå» <a href="https://github.com/marketplace?type=actions" target="_blank"><strong>Marketplace</strong></a> æ‰¾æ‰¾ç°æœ‰çš„æ­¥éª¤å¯ä»¥ç«™åœ¨å·¨äººçš„è‚©è†€ç›´æ¥ä½¿ç”¨ã€‚</p></blockquote><p>æœ¬ç¯‡åªæ˜¯å…¥é—¨åŸºç¡€(ç”šè‡³æ²¡ Checkout Code)ï¼Œä¸‹ä¸€ç¯‡ã€Œ <a href="/posts/zrealm-dev/zh-cn/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AE%9E%E4%BD%9C%E8%87%AA%E5%8A%A8%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B5%8B%E8%AF%95%E4%B8%8E%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%A6-4b001d2e8440/"><strong>CI/CD å®æˆ˜æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å®ä½œ App ä¸“æ¡ˆçš„ CI ä¸ CD å·¥ä½œæµç¨‹</strong></a> ã€ä¼šåœ¨ä»‹ç»æ›´å¤æ‚æ·±å…¥çš„ GitHub Actions Workflowã€‚</p><h4 id="github-è‡ªåŠ¨åŒ–å»¶ä¼¸è®®é¢˜"><span class="me-2">GitHub è‡ªåŠ¨åŒ–å»¶ä¼¸è®®é¢˜</span><a href="#github-è‡ªåŠ¨åŒ–å»¶ä¼¸è®®é¢˜" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>GitHub å¯ä»¥ä¸ Slack æ•´åˆï¼Œè®¢é˜… Repo çš„ PR æ›´æ–°é€šçŸ¥ã€Push Default Branch é€šçŸ¥â€¦ç­‰ç­‰ã€‚</p><p><a href="/assets/404bd5c70040/1*BMTT4koRBIIsQ7_mklC86w.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*BMTT4koRBIIsQ7_mklC86w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MzkiIGhlaWdodD0iNDMwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>é—®é¢˜ 1. GitHub è®¯æ¯æ— æ³•æ ‡è®°åˆ°äººï¼Œåªæ ‡è®°äº† GitHub å¸å·ï¼ŒSlack å¸å·æ”¶ä¸åˆ°é€šçŸ¥ï¼š</strong></p><p><a href="/assets/404bd5c70040/1*Ddp0cEtXE10hScM1rozmtg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Ddp0cEtXE10hScM1rozmtg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzAwIiBoZWlnaHQ9Ijk0NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/404bd5c70040/1*uHGJ7l__AdYoWT9KpvihLQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*uHGJ7l__AdYoWT9KpvihLQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDQzIiBoZWlnaHQ9Ijc3NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://slack.github.com/" target="_blank">Slack App</a> or Apps æœå¯» GitHub â†’ æ‰“å¼€è®¯æ¯è§†çª— â†’å®Œæˆ <strong>Connect GitHub Account</strong> æ­¥éª¤ï¼Œè¿™æ · GitHub æ‰çŸ¥é“ä½ å¯¹åº”çš„ Slack UID æ˜¯ä»€ä¹ˆï¼Œæ‰èƒ½æ ‡è®°ä½ ã€‚</p><p><strong>é—®é¢˜ 2. Pull Request Reminder</strong></p><p>æˆ‘è®°å¾—è¿™æœ¬æ¥æ˜¯ç¬¬ä¸‰æ–¹å¼€å‘çš„åŠŸèƒ½ï¼Œåæ¥ç›´æ¥æ•´åˆåœ¨ GitHub é‡Œé¢äº†ï¼Œä¸è¦å‚»å‚»çš„è‡ªå·±ç”¨ GitHub Actions å†™è„šæœ¬åšï¼</p><p><a href="/assets/404bd5c70040/1*BpMd2K0NBDE6xB1XzFY94Q.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*BpMd2K0NBDE6xB1XzFY94Q.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDA4IiBoZWlnaHQ9IjEyMDAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><blockquote><p><a href="https://docs.github.com/en/organizations/organizing-members-into-teams/managing-scheduled-reminders-for-your-team" target="_blank"><strong><em>GitHub å†…å»ºçš„æ˜¯ by Team è®¾ç½®ï¼Œä½ éœ€è¦å…ˆä¸ºç»„ç»‡å¢åŠ  Teamã€Repo åŠ å…¥ Team ç„¶åæ‰èƒ½è®¾ç½® Pull Request Reminderã€‚</em></strong></a></p></blockquote><ul><li>è¾“å…¥å®Œ Slack Channel è·Ÿè§„åˆ™å‚¨å­˜ä¹‹åæ¯å¤©å°±ä¼šè‡ªåŠ¨ä¼ é€æç¤ºè®¯æ¯è·Ÿæ ‡è®° Reviewer äº†ï¼Œè®¾ç½®å¯ <a href="https://michaelheap.com/github-scheduled-reminders/" target="_blank">å‚è€ƒ</a> ï¼Œç»“æœå¦‚ä¸‹å›¾ï¼š</ul><p><a href="/assets/404bd5c70040/1*kvqFXkIKIxP79Wm8vIaN0Q.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*kvqFXkIKIxP79Wm8vIaN0Q.webp" alt="&lt;https://michaelheap.com/github-scheduled-reminders/&gt;{:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDAiIGhlaWdodD0iMzE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://michaelheap.com/github-scheduled-reminders/" target="_blank">https://michaelheap.com/github-scheduled-reminders/</a></p><p><strong>é—®é¢˜ 4. GitHub PR è®¯æ¯ï¼Œä½œè€…æ”¶ä¸åˆ°é€šçŸ¥ï¼š</strong></p><p><a href="/assets/404bd5c70040/1*wmtXwXAcQZDXqInRd0ivPw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*wmtXwXAcQZDXqInRd0ivPw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTIiIGhlaWdodD0iNTM1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p><em>è¿™æ˜¯ä¸€ä¸ªä¸‡å¹´çš„é—®é¢˜ï¼Œå°±æ˜¯ PR çš„ Slack è®¯æ¯ <strong>å…¶å®ä½œè€…å¹¶ä¸çŸ¥é“æœ‰äºº Reply Threads è®¨è®º</strong> ï¼ŒGitHub å‘çš„è¿™åˆ™ Slack è®¯æ¯åªä¼šæ ‡è®° Reviewersï¼Œä¸ä¼šæ ‡è®° Assignee or PR ä½œè€…ã€‚</em></p></blockquote><p>è¿™æ—¶å€™ GitHub Actions åšè‡ªåŠ¨åŒ–å°å·¥å…·å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ª Job åœ¨ PR Description æœ€å Append æ ‡è®°ä½œè€…ï¼Œè¿™æ ·è®¯æ¯ä¼ åˆ° Slack ä¹Ÿä¼šä¸€å¹¶æ ‡è®°åˆ°ä½œè€…çš„ Slack:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="c"># Workflow(Action) åç§°</span>
name: Pull Reqeust Automation
<span class="c"># è¯·å‚è€ƒå‰æ–‡ï¼Œç•¥....</span>

  <span class="c"># ---------</span>
  append-author-to-pr-description:
    name: Append author to PR description
    <span class="c"># å› ä¸ºæ˜¯å…±ç”¨è§¦å‘äº‹ä»¶ï¼Œæ‰€ä»¥åœ¨ Job ä¸Šè‡ªå·±åˆ¤æ–­ï¼Œå½“æ˜¯ Pull Request Opened(é¦–æ¬¡å»ºç«‹) æ—¶æ‰æ‰§è¡Œ Job å¦åˆ™ä¼š Skipped</span>
    <span class="k">if</span>: github.event_name <span class="o">==</span> <span class="s1">'pull_request'</span> <span class="o">&amp;&amp;</span> github.event.action <span class="o">==</span> <span class="s1">'opened'</span>
    
    <span class="c"># å¦‚æœè¿™ä¸ª Job å¤±è´¥ï¼Œä¸å½±å“æ•´ä¸ª Workflowï¼Œç»§ç»­å…¶ä»– Job</span>
    <span class="k">continue</span><span class="nt">-on-error</span>: <span class="nb">true</span>
    
    <span class="c"># è®¾å®šæœ€é•¿ Timeout æ—¶é—´ï¼Œé˜²æ­¢å¼‚å¸¸æƒ…å†µå‘ç”Ÿæ—¶æ— æ­¢å°½çš„ç­‰å¾…</span>
    timeout-minutes: 10
    
    <span class="c"># Runner Label - ä½¿ç”¨ GitHub Hosted Runner ubuntu-latest æ¥æ‰§è¡Œå·¥ä½œ</span>
    <span class="c"># å¦‚æœæ˜¯ Private Repo ä¼šè®¡ç®—ç”¨é‡ï¼Œè¶…è¿‡å¯èƒ½ä¼šäº§ç”Ÿè´¹ç”¨</span>
    <span class="c"># ä½†è¿™ç§è‡ªåŠ¨åŒ–å°å·¥ä½œä¸å¤ªå®¹æ˜“ç”¨è¿‡é‡</span>
    runs-on: ubuntu-latest
    steps:
      - name: Append author to PR description
        <span class="nb">env</span>:
          <span class="c"># secrets.GITHUB_TOKEN æ˜¯ GitHub Actions æ‰§è¡Œæ—¶è‡ªåŠ¨äº§ç”Ÿçš„ Tokenï¼Œä¸éœ€è‡ªè¡Œåœ¨ Secrets è®¾å®šï¼Œæ‹¥æœ‰ä¸€äº› GitHub Repo API Scopes æƒé™</span>
          <span class="c"># gh(GitHub) cli éœ€è¦æ³¨å…¥ GH_TOKEN åˆ° ENVï¼Œgh æ‰æœ‰æƒé™æ“ä½œ</span>
          <span class="c"># https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows</span>
          GH_TOKEN: <span class="k">${</span><span class="p">{ secrets.GITHUB_TOKEN </span><span class="k">}</span><span class="o">}</span>

          <span class="c">#   ${{ github.xxx }} æ˜¯ GitHub Actions Context è¡¨è¾¾å¼</span>
          <span class="c">#   ä¸æ˜¯ Shell å˜æ•°ï¼Œè€Œæ˜¯ YAML è§£æé˜¶æ®µç”± GitHub Actions æ›¿æ¢æˆå¯¹åº”å€¼</span>
          <span class="c">#   å…¶ä»–å‚æ•°ï¼šhttps://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>
          PR_NUMBER: <span class="k">${</span><span class="p">{ github.event.pull_request.number </span><span class="k">}</span><span class="o">}</span>
          AUTHOR_TAG: <span class="s1">'@${{ github.event.pull_request.user.login }}'</span>
        run: <span class="se">\\</span>|
          <span class="nv">PR_BODY</span><span class="o">=</span><span class="si">$(</span>gh <span class="nb">pr </span>view <span class="nv">$PR_NUMBER</span> <span class="nt">--repo</span> <span class="k">${</span><span class="p">{ github.repository </span><span class="k">}</span><span class="o">}</span> <span class="nt">--json</span> body <span class="nt">-q</span> <span class="s2">".body"</span><span class="si">)</span>
          <span class="nv">NEW_BODY</span><span class="o">=</span><span class="si">$(</span><span class="nb">printf</span> <span class="s2">"%s</span><span class="se">\n\n</span><span class="s2">Created by %s"</span> <span class="s2">"</span><span class="nv">$PR_BODY</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$AUTHOR_TAG</span><span class="s2">"</span><span class="si">)</span>
          gh <span class="nb">pr </span>edit <span class="nv">$PR_NUMBER</span> <span class="nt">--repo</span> <span class="k">${</span><span class="p">{ github.repository </span><span class="k">}</span><span class="o">}</span> <span class="nt">--body</span> <span class="s2">"</span><span class="nv">$NEW_BODY</span><span class="s2">"</span>
</pre></table></code></div></div><p><strong>å®Œæ•´ç¨‹å¼ç ï¼š <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Automation-PullRequest.yml" target="_blank">Automation-PullRequest.yml</a></strong></p><p>å¼€ PR æ—¶ä¼šè‡ªåŠ¨åœ¨æè¿°ååŠ ä¸Šä½œè€…èµ„è®¯ã€Slack è®¯æ¯ä¹Ÿä¼šæ­£ç¡®çš„æ ‡è®°ä½œè€…ï¼š</p><p><a href="/assets/404bd5c70040/1*UtTDtIQJ0vJks79UzCQSAQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*UtTDtIQJ0vJks79UzCQSAQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NTMiIGhlaWdodD0iMzcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/404bd5c70040/1*MjVsFqE--xAq1zSQfCNVdQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*MjVsFqE--xAq1zSQfCNVdQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MTYiIGhlaWdodD0iMjQ0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>é—®é¢˜ 5. GitHub ç–¯ç‹‚å¯„é€šçŸ¥ä¿¡åˆ°ä¿¡ç®±å¾ˆå¹²æ‰°ï¼š</strong></p><p>GitHub Repo é€šçŸ¥è·Ÿ Slack éƒ½æœ‰è®¾å®šå¥½ä¹‹åï¼Œç»Ÿä¸€éƒ½åœ¨ Slack æ”¶é€šçŸ¥äº†ï¼Œå¯ä»¥å» GitHub ä¸ªäººè®¾å®šæŠŠ Email é€šçŸ¥å…³æ‰ï¼š</p><p><a href="/assets/404bd5c70040/1*INgfO9B2bNFy-Nd1ZjnzOw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*INgfO9B2bNFy-Nd1ZjnzOw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzA2IiBoZWlnaHQ9IjY4NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h4 id="å…¶ä»–"><span class="me-2">å…¶ä»–</span><a href="#å…¶ä»–" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Actions ç›®å‰æ²¡æœ‰ç›®å½•ç»“æ„ï¼Œä½†å¯ä»¥åœ¨ Actions é¡µï¼Œç½®é¡¶(Pin) äº”ä¸ª Actionsï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨ Disable æš‚åœæŸä¸ª Actionã€‚</p><p><a href="/assets/404bd5c70040/1*ZD-5xkparhJqtnm2REeu6A.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*ZD-5xkparhJqtnm2REeu6A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjM4IiBoZWlnaHQ9IjU5OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>å¯ä»¥åœ¨ Insights æŸ¥çœ‹ GitHub Actions ç”¨é‡è·Ÿæ‰§è¡Œæˆæ•ˆï¼š</p><p><a href="/assets/404bd5c70040/1*re91ZRtQ0frOF6GVJ-MKrw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*re91ZRtQ0frOF6GVJ-MKrw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjU5MSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h3 id="reuse-workflow-è¡¥å……"><span class="me-2">Reuse Workflow è¡¥å……</span><a href="#reuse-workflow-è¡¥å……" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/posts/zrealm-dev/zh-cn/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9B%A2%E9%98%9F%E6%95%88%E7%8E%87-4273e57e7148/">ä¸‹ä¸€ç¯‡æ–‡ç« </a> æœ‰ç”¨åˆ°åŒä¸ª Repo æ‹† Reuse Workflowï¼Œè¿™è¾¹è¡¥å……ä¸€ä¸‹ä¸åŒ Repo æ‹† Reuse Workflow çš„èŒƒä¾‹ã€‚</p><p>å…ˆå®šä¹‰ä¸€ä¸ª Reuse Workflow: <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo-share-actions/blob/main/.github/workflows/Automation-label-pr-base-branch.yml" target="_blank"><strong>Automation-label-pr-base-branch.yml:</strong></a> <strong>åœ¨ <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo-share-actions/blob/main/.github/workflows/Automation-label-pr-base-branch.yml" target="_blank">ZhgChgLi/github-actions-ci-cd-demo-share-actions</a> Repo</strong> ã€‚</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Automation-label-pr-base-branch</span>
<span class="na">run-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[Automation-label-pr-base-branch]</span><span class="nv"> </span><span class="s">${{</span><span class="nv"> </span><span class="s">github.event.inputs.PR_NUMBER</span><span class="nv"> </span><span class="se">\\</span><span class="s">|</span><span class="se">\\</span><span class="s">|</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>

<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.event.inputs.PR_NUMBER \\|\\| github.ref }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># è§¦å‘äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># å…¶ä»– Workflow å‘¼å«æ­¤ Workflow è§¦å‘</span>
  <span class="na">workflow_call</span><span class="pi">:</span>
    <span class="c1"># èµ„æ–™è¾“å…¥</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="c1"># PR Number</span>
      <span class="na">PR_NUMBER</span><span class="pi">:</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="c1"># å¯†é’¥è¾“å…¥</span>
    <span class="na">secrets</span><span class="pi">:</span>
      <span class="na">GH_TOKEN</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">GitHub</span><span class="nv"> </span><span class="s">token</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">API</span><span class="nv"> </span><span class="s">access"</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">label-pr-base-branch</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Label PR Base Branch</span>
    <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">10</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Label PR by Base Branch</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">label-pr-base-branch</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">\\|</span>
          <span class="s">PR_NUMBER="${{ inputs.PR_NUMBER }}"</span>
          <span class="s">REPO="${{ github.repository }}"</span>

          <span class="s">echo "ğŸ“¦ Processing PR</span> <span class="c1">#$PR_NUMBER in repo $REPO"</span>

          <span class="c1"># å–å¾— PR çš„ base branch</span>
          <span class="s">BASE_BRANCH=$(gh pr view "$PR_NUMBER" --repo "$REPO" --json baseRefName --jq '.baseRefName')</span>
          <span class="s">echo "ğŸ”– PR Base Branch</span><span class="err">:</span> <span class="s">$BASE_BRANCH"</span>

          <span class="s"># å…è®¸çš„ base branch labels</span>
          <span class="s">BRANCH_LABELS=("develop" "main" "master")</span>

          <span class="s"># Label æ˜¯å¦åœ¨å…è®¸åˆ—è¡¨</span>
          <span class="s">if [[ " ${BRANCH_LABELS[@]} " =~ " ${BASE_BRANCH} " ]]; then</span>
            <span class="s">LABEL="$BASE_BRANCH"</span>
          <span class="s">else</span>
            <span class="s">echo "âš ï¸ Base branch '$BASE_BRANCH' not in allowed list, skipping label."</span>
            <span class="s">exit </span><span class="m">0</span>
          <span class="s">fi</span>

          <span class="s"># ç§»é™¤ç°æœ‰çš„ base branch labels</span>
          <span class="s">EXISTING_LABELS=$(gh pr view "$PR_NUMBER" --repo "$REPO" --json labels --jq '.labels[].name')</span>
          <span class="s">for EXISTING in $EXISTING_LABELS; do</span>
            <span class="s">if [[ " ${BRANCH_LABELS[@]} " =~ " ${EXISTING} " ]]; then</span>
              <span class="s">echo "ğŸ§¹ Removing existing base branch label</span><span class="err">:</span> <span class="s">$EXISTING"</span>
              <span class="s">gh pr edit "$PR_NUMBER" --repo "$REPO" --remove-label "$EXISTING"</span>
            <span class="s">fi</span>
          <span class="s">done</span>

          <span class="s"># å¦‚æœ Label ä¸å­˜åœ¨åˆ™å»ºç«‹</span>
          <span class="s">if ! gh label list --repo "$REPO" \\| grep -q "^$LABEL$"; then</span>
            <span class="s">echo "ğŸ†• Creating missing label</span><span class="err">:</span> <span class="s">$LABEL"</span>
            <span class="s">gh label create "$LABEL" --repo "$REPO" --description "PR targeting $LABEL branch" --color "ededed"</span>
          <span class="s">else</span>
            <span class="s">echo "âœ… Label '$LABEL' already exists"</span>
          <span class="s">fi</span>

          <span class="s"># åŠ ä¸Š base branch label</span>
          <span class="s">echo "ğŸ·ï¸ Adding label '$LABEL' to PR</span> <span class="c1">#$PR_NUMBER"</span>
          <span class="s">gh pr edit "$PR_NUMBER" --repo "$REPO" --add-label "$LABEL"</span>
</pre></table></code></div></div><p>å›åˆ°æˆ‘ä»¬çš„ <strong>ä¸» <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Demo-Reuse-Action-From-Another-Repo.yml" target="_blank">ZhgChgLi/github-actions-ci-cd-demo</a> Repoï¼Œ</strong> æ–°å¢ä¸€ä¸ªä¸» <strong>Workflow <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Demo-Reuse-Action-From-Another-Repo.yml" target="_blank">Demo-Reuse-Action-From-Another-Repo.yml</a> :</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Automation-label-pr-base-branch</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">call-label-pr-workflow</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Call Base Branch Label Workflow</span>
    <span class="c1"># âœ… å¦‚æœè¢«å‘¼å«çš„ workflow åœ¨åŒä¸€ä¸ª repoï¼š</span>
    <span class="c1">#    uses: ./.github/workflows/Automation-label-pr-base-branch.yml</span>
    <span class="c1">#    æ³¨æ„ï¼šè¿™ç§å†™æ³•æ— æ³•æŒ‡å®šåˆ†æ”¯ï¼ˆå›ºå®šä½¿ç”¨ caller workflow çš„ branchï¼‰</span>
    <span class="c1">#    å‚è€ƒèŒƒä¾‹ï¼š</span>
    <span class="c1">#    - CD-Deploy-Form.yml å‘¼å«æœ¬ repo workflow</span>
    <span class="c1">#    - CD-Deploy.yml å‘¼å«è·¨ repo workflow</span>
    <span class="c1">#</span>
    <span class="c1"># âœ… å¦‚æœè¢«å‘¼å«çš„ workflow åœ¨å…¶ä»– repoï¼š</span>
    <span class="c1">#    uses: {owner}/{repo}/.github/workflows/{file}.yml@{branch_or_tag}</span>
    <span class="c1">#    å¯ä»¥æŒ‡å®š branch æˆ– tag</span>
    <span class="c1">#    ref: https://github.com/ZhgChgLi/github-actions-ci-cd-demo-share-actions/blob/main/.github/workflows/Automation-label-pr-base-branch.yml</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">ZhgChgLi/github-actions-ci-cd-demo-share-actions/.github/workflows/Automation-label-pr-base-branch.yml@main</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">PR_NUMBER</span><span class="pi">:</span> <span class="s">${{ github.event.number }}</span>
      
    <span class="c1"># å¦‚æœæ‰€æœ‰ secrets éƒ½è¦ç»§æ‰¿ caller workflowï¼Œç›´æ¥ç”¨ `inherit`</span>
    <span class="c1"># secrets: inherit</span>
    <span class="c1">#</span>
    <span class="c1"># å¦‚æœåªè¦ä¼ ç‰¹å®š secretsï¼Œä¸ªåˆ«æŒ‡å®š</span>
    <span class="na">secrets</span><span class="pi">:</span>
      <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
</pre></table></code></div></div><p>Commit æ¡£æ¡ˆåå¼€ PR è¯•è¯•çœ‹ã€‚</p><p><strong>å·¥ä½œæµç¨‹ï¼šä¸» Repo çš„ <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Demo-Reuse-Action-From-Another-Repo.yml" target="_blank">Demo-Reuse-Action-From-Another-Repo.yml</a> â†’ å‘¼å«å¹¶æŠŠå‚æ•°ä¼ åˆ°å¦ä¸€ä¸ª Repo çš„ <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo-share-actions/blob/main/.github/workflows/Automation-label-pr-base-branch.yml" target="_blank">Automation-label-pr-base-branch.yml</a> æ‰§è¡Œä»»åŠ¡ â†’ å›åˆ°ä¸» Repo å›æŠ¥ç»“æœã€‚</strong></p><p><a href="/assets/404bd5c70040/1*13bqlAgpBkHM7UthTJAuOg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*13bqlAgpBkHM7UthTJAuOg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTE5IiBoZWlnaHQ9IjQ1MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/404bd5c70040/1*CAF3HzS4PHBveDQYu3H73g.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*CAF3HzS4PHBveDQYu3H73g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MDIiIGhlaWdodD0iMTQ1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>æˆåŠŸï¼</p><h4 id="private-repo-å­˜å–é—®é¢˜"><span class="me-2">Private Repo å­˜å–é—®é¢˜</span><a href="#private-repo-å­˜å–é—®é¢˜" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>è¿™è¾¹è¦æ³¨æ„ä¸€ä¸ªå®‰å…¨æ€§é—®é¢˜ï¼ŒPublic Repo å®Œå…¨æ²¡é—®é¢˜ï¼Œä½†å¦‚æœ Reuse Workflow åœ¨ Private Repo å½“ä¸­ï¼Œåªæœ‰åœ¨ <strong>åŒä¸ªç»„ç»‡ä¸‹çš„å…¶ä»– Repo + Repo åŒæ ·ä¹Ÿæ˜¯ Private + è®¾å®šå…è®¸</strong> =æ‰èƒ½å­˜å–ä½¿ç”¨ Private Repo Reuse Workflowã€‚</p><ul><li><p><code class="language-plaintext highlighter-rouge">Public â€” ZhgChgLi/ReuseRepo</code> + <code class="language-plaintext highlighter-rouge">Private or Public-ZhgChgli or harry/myRepo</code> = âœ…</p><li><p><code class="language-plaintext highlighter-rouge">Private â€” ZhgChgLi/ReuseRepo</code> + <code class="language-plaintext highlighter-rouge">Private or Publicâ€” harry/myRepo</code> = âŒ</p><li><p><code class="language-plaintext highlighter-rouge">Private â€” ZhgChgLi/ReuseRepo</code> + <code class="language-plaintext highlighter-rouge">Public â€” ZhgChgLi/anotherRepo</code> = âŒ</p><li><p><code class="language-plaintext highlighter-rouge">Private â€” ZhgChgLi/ReuseRepo</code> + <code class="language-plaintext highlighter-rouge">Private â€” ZhgChgLi/anotherRepo</code> = âœ…</p></ul><p><strong>è®¾å®šå…è®¸çš„æ–¹å¼ï¼Œè¦å» Reuse Workflow Repo â†’ Settings â†’ Actions â†’ General â†’ Acces:</strong></p><p><a href="/assets/404bd5c70040/1*iZCEifgyArTJS3URMSk01g.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*iZCEifgyArTJS3URMSk01g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MjUiIGhlaWdodD0iMzAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>æ”¹å‹¾é€‰ï¼š</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>Accessible from repositories in the 'ZhgChgLi' organization
Workflows in other repositories that are part of the 'ZhgChgLi' organization can access the actions and reusable workflows in this repository. Access is allowed only from private repositories.
</pre></table></code></div></div><p>ç‚¹å‡»ã€ŒSaveã€å‚¨å­˜ï¼Œå®Œæˆã€‚</p><p><strong>å¦‚æœæ²¡æƒé™å­˜å–ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯è®¯æ¯ï¼š</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>Invalid workflow file: .github/workflows/Demo-reuse-action-from-another-repo.yml#L21
error parsing called workflow
<span class="s2">".github/workflows/Demo-reuse-action-from-another-repo.yml"</span>
-&gt; <span class="s2">"ZhgChgLi/github-actions-ci-cd-demo-share-actions/.github/workflows/Automation-label-pr-base-branch.yml@main"</span>
: workflow was not found.
</pre></table></code></div></div><h3 id="github-actions-script-è¯­æ³•è¡¥å……"><span class="me-2">GitHub Actions Script è¯­æ³•è¡¥å……</span><a href="#github-actions-script-è¯­æ³•è¡¥å……" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>è¡¥å……ä¸€ä¸‹å¤§å®¶å¯èƒ½ä¼šæ„Ÿåˆ°ç–‘æƒ‘çš„ <code class="language-plaintext highlighter-rouge">${{ XXX }}</code> or <code class="language-plaintext highlighter-rouge">${XXX}</code> or <code class="language-plaintext highlighter-rouge">$XXX</code> å˜æ•°è¯­æ³•ã€‚</p><p><strong>Demo-Env-Vars- .yml:</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Demo-Env-Vars</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">print-env-vars</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">print-env</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">env</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">context-vars-vs-vars</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">SAY_MY_NAME</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Heisenberg"</span>
          <span class="c1"># GitHub Actions Context è¡¨è¾¾å¼ï¼ŒåŒä¸‹æ–¹è§£é‡Š</span>
          <span class="na">FROM_REF</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">\\|</span>
          <span class="s"># Sehll Script</span><span class="err">:</span>
          <span class="c1"># å¼•ç”¨è‡ªè®¢æ³¨å…¥çš„ ENV å˜æ•°å†…å®¹</span>
          <span class="c1"># ${SAY_MY_NAME} or $SAY_MY_NAME éƒ½å¯ä»¥</span>
          <span class="c1"># ${XX} é‡åˆ°å­—ä¸²æ‹¼æ¥æ¯”è¾ƒå¥½ç”¨:</span>
          <span class="s">echo "HI</span><span class="err">:</span> <span class="s">${SAY_MY_NAME}"</span>
          
          <span class="s"># ğŸ’¡ GitHub Actions Context è¡¨è¾¾å¼</span>
          <span class="s"># è¿™ä¸æ˜¯ shell å˜æ•°ï¼Œè€Œæ˜¯ YAML è§£æé˜¶æ®µç”± GitHub Actions æ›¿æ¢æˆå¯¹åº”å€¼</span>
          <span class="s"># âš  åœ¨æœ¬æœºæˆ–é GitHub Actions ç¯å¢ƒæ‰§è¡Œä¼šå¤±è´¥</span>
          <span class="s"># ğŸ”— https://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>
          <span class="s">BRANCH_NAME_FROM_CONTEXT="${{ github.ref }}"</span>
          
          <span class="s"># ğŸ’¡ GitHub Actions æ‰§è¡Œé˜¶æ®µçš„ç¯å¢ƒå˜æ•°</span>
          <span class="s"># è¿™äº›å˜æ•°åœ¨ runner æ‰§è¡Œ shell æ—¶ç”± GitHub Actions è‡ªåŠ¨æ³¨å…¥</span>
          <span class="s"># âœ… åœ¨å…¶ä»–ç¯å¢ƒå¯ç”¨ export æˆ– ENV é¢„å…ˆå®šä¹‰ç›¸åŒå˜æ•°</span>
          <span class="s"># ğŸ”— https://docs.github.com/en/actions/learn-github-actions/environment-variables</span>
          <span class="s">BRANCH_NAME_FROM_ENV_VARS="${GITHUB_REF}"</span>
          
          <span class="s">echo "FROM_REF</span><span class="err">:</span> <span class="s">${FROM_REF}"</span>
          <span class="s">echo "BRANCH_NAME_FROM_CONTEXT</span><span class="err">:</span> <span class="s">${BRANCH_NAME_FROM_CONTEXT}"</span>
          <span class="s">echo "BRANCH_NAME_FROM_ENV_VARS</span><span class="err">:</span> <span class="s">${BRANCH_NAME_FROM_ENV_VARS}"</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">print-github-script-env</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">SAY_MY_NAME</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Heisenberg"</span>
          <span class="c1"># GitHub Actions Context è¡¨è¾¾å¼ï¼ŒåŒä¸Šæ–¹è§£é‡Š</span>
          <span class="na">FROM_REF</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="s">\\|</span>
            <span class="s">// GitHub Script</span><span class="na">: (JavaScript (Node.js))</span><span class="pi">:</span>
            <span class="s">// ä» process.env å– ENV å€¼</span>
            <span class="s">console.log(`HI</span><span class="err">:</span> <span class="s">${process.env.SAY_MY_NAME}`);</span>
            <span class="s">console.log(`FROM_REF</span><span class="err">:</span> <span class="s">${process.env.FROM_REF}`);</span>
            <span class="s">// github-script ä¸­ä¼šè‡ªåŠ¨æ³¨å…¥åˆ° context å˜æ•°ä¾› javascript ç›´æ¥å¼•ç”¨</span>
            <span class="s">// https://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>
            <span class="s">const branch_name_from_context_vars = context.ref;</span>
            <span class="s">console.log(`branch_name_from_context_vars</span><span class="err">:</span> <span class="s">${branch_name_from_context_vars}`);</span>
            <span class="s">// åŒæ ·ä¹Ÿèƒ½ç”¨ GitHub Actions Context è¡¨è¾¾å¼(åªæ˜¯æ„ä¹‰ä¸å¤§)</span><span class="err">:</span>
            <span class="s">const branch_name_from_context = "${{ github.ref }}";</span>
            <span class="s">console.log(`branch_name_from_context</span><span class="err">:</span> <span class="s">${branch_name_from_context}`);</span>
            
            <span class="s">for (const [key, value] of Object.entries(process.env)) {</span>
              <span class="s">console.log(`${key}=${value}`);</span>
            <span class="s">}</span>
            <span class="s">// github-script ä¸­çš„ github ç‰©ä»¶æ˜¯ Octokit REST API å®ä¾‹</span>
            <span class="s">// ç”¨æ¥æ“ä½œ github api ä½¿ç”¨</span>
            <span class="s">// ä¾‹å¦‚ï¼š</span>
            <span class="s">// await github.rest.pulls.list({</span>
            <span class="s">//   owner</span><span class="err">:</span> <span class="s">context.repo.owner,</span>
            <span class="s">//   repo</span><span class="err">:</span> <span class="s">context.repo.repo,</span>
            <span class="s">//   state</span><span class="err">:</span> <span class="s2">"</span><span class="s">open"</span>
            <span class="s">//  });</span>
      <span class="c1"># gh CLI does NOT use GITHUB_TOKEN by default; requires GH_TOKEN</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">gh CLI without GH_TOKEN (expected to fail)</span>
        <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">\\|</span>
          <span class="s">PR_COUNT=$(gh pr list --repo $GITHUB_REPOSITORY --json number --jq 'length')</span>
          <span class="s">echo "Found $PR_COUNT open pull requests"</span>
      
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">gh CLI with GH_TOKEN (expected to succeed)</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="c1"># Assign GH_TOKEN so gh CLI can authenticate</span>
          <span class="c1"># https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows</span>
          <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">\\|</span>
          <span class="s">PR_COUNT=$(gh pr list --repo $GITHUB_REPOSITORY --json number --jq 'length')</span>
          <span class="s">echo "Found $PR_COUNT open pull requests"</span>
      
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">github-script auto-authentication (no GH_TOKEN needed)</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="s">\\|</span>
            <span class="s">// github = Octokit REST client (auto-authenticated with GITHUB_TOKEN)</span>
            <span class="s">const pulls = await github.rest.pulls.list({</span>
              <span class="s">owner</span><span class="err">:</span> <span class="s">context.repo.owner,</span>
              <span class="s">repo</span><span class="err">:</span> <span class="s">context.repo.repo,</span>
              <span class="s">state</span><span class="err">:</span> <span class="s2">"</span><span class="s">open"</span>
            <span class="err">}</span><span class="s">);</span>
            <span class="s">console.log(`Found ${pulls.data.length} open pull requests`);</span>
</pre></table></code></div></div><h4 id="--xxx---github-actions-context-è¡¨è¾¾å¼"><span class="me-2">${ { XXX } } GitHub Actions Context è¡¨è¾¾å¼</span><a href="#--xxx---github-actions-context-è¡¨è¾¾å¼" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*e3jpPuwdmf005cjbaXjAwQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*e3jpPuwdmf005cjbaXjAwQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3ODkiIGhlaWdodD0iNjg0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/404bd5c70040/1*ed5Wm7Xk48xuP8yQzHpJ9w.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*ed5Wm7Xk48xuP8yQzHpJ9w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4ODAiIGhlaWdodD0iODAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><p><code class="language-plaintext highlighter-rouge">${{ XXX }}</code> æ˜¯ GitHub Actions Context è¡¨è¾¾å¼ï¼Œ <strong>åœ¨YAML è§£æé˜¶æ®µç”± GitHub Actions æ›¿æ¢æˆå¯¹åº”å€¼</strong> (å¦‚ä¸Šå›¾ <code class="language-plaintext highlighter-rouge">BRANCH_NAME_FROM_CONTEXT</code> )</p><li><p>å®Œæ•´å¯ç”¨è¡¨è¾¾å¼å¯ <a href="https://docs.github.com/en/actions/learn-github-actions/contexts#github-context" target="_blank">å‚è€ƒå®˜æ–¹æ–‡ä»¶</a></p><li><p><code class="language-plaintext highlighter-rouge">${XXX}</code> or <code class="language-plaintext highlighter-rouge">$XXX</code> æ˜¯çœŸå®ç¯å¢ƒå˜æ•°ï¼Œ <code class="language-plaintext highlighter-rouge">${XXX}</code> åœ¨å­—ä¸²æ‹¼æ¥æ¯”è¾ƒå¥½ç”¨</p><li><p>GitHub Actions é¢„è®¾ä¼šæ³¨å…¥ä¸€äº›ç¯å¢ƒå˜æ•°ï¼Œå®Œæ•´å¯ <a href="https://docs.github.com/en/actions/learn-github-actions/environment-variables" target="_blank">å‚è€ƒå®˜æ–¹æ–‡ä»¶</a></p></ul><h4 id="actionsgithub-scriptv7"><span class="me-2">actions/github-script@v7</span><a href="#actionsgithub-scriptv7" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*TjJQnlAAU3VRwS9_dFz1yA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*TjJQnlAAU3VRwS9_dFz1yA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MTgiIGhlaWdodD0iOTEzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/404bd5c70040/1*5bHEdjrGsVdWnYSQgpnsZA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*5bHEdjrGsVdWnYSQgpnsZA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDE4IiBoZWlnaHQ9IjExNTAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><ul><li><p>åœ¨ <code class="language-plaintext highlighter-rouge">github-script</code> ä¸­åŒæ ·å¯ä»¥ç”¨ <code class="language-plaintext highlighter-rouge">${{ XXX }}</code> æ˜¯ GitHub Actions Context è¡¨è¾¾å¼ï¼Œä½†æ˜¯æ„ä¹‰ä¸å¤§ï¼›å› ä¸º <strong>åœ¨ github-scirpt ç¯å¢ƒä¸­é¢„è®¾ä¼šæ³¨å…¥ context å˜æ•°å¯ä»¥ç›´æ¥åœ¨ javascript ä¸­å¼•ç”¨</strong></p><li><p>åœ¨ <code class="language-plaintext highlighter-rouge">github-script</code> ä¸­ <code class="language-plaintext highlighter-rouge">github</code> ç‰©ä»¶æ˜¯ Octokit REST API å®ä¾‹</p><li><p><code class="language-plaintext highlighter-rouge">github-script</code> ä¹Ÿèƒ½ä» <code class="language-plaintext highlighter-rouge">env:</code> æ³¨å…¥å˜æ•°ï¼Œä½†æ˜¯è¦ç”¨ <code class="language-plaintext highlighter-rouge">${process.env.xxx}</code> å­˜å–</p><li><p>åŒæ ·é¢„è®¾ä¼šæ³¨å…¥ä¸€äº›ç¯å¢ƒå˜æ•°ï¼Œå®Œæ•´å¯ <a href="https://docs.github.com/en/actions/learn-github-actions/environment-variables" target="_blank">å‚è€ƒå®˜æ–¹æ–‡ä»¶</a> <code class="language-plaintext highlighter-rouge">${process.env.xxx}</code> å­˜å–ï¼›ä½†æ˜¯å·²ç»æœ‰ <code class="language-plaintext highlighter-rouge">context</code> å˜æ•°äº†ï¼Œä»è¿™å­˜å–æ„ä¹‰ä¹Ÿä¸å¤§</p></ul><p><a href="/assets/404bd5c70040/1*oW85Sju0sN4caXiaLSg32A.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*oW85Sju0sN4caXiaLSg32A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MzUiIGhlaWdodD0iNDA4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><code class="language-plaintext highlighter-rouge">github-script</code> ä¼šè‡ªåŠ¨å¸¦å…¥ <code class="language-plaintext highlighter-rouge">github-token</code> ï¼Œæ— éœ€æŒ‡å®š</ul><h4 id="gh-cli-gh_token"><span class="me-2">gh cli GH_TOKEN</span><a href="#gh-cli-gh_token" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*NUfaaKIobZWVBuXrGg0TPw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*NUfaaKIobZWVBuXrGg0TPw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NjYiIGhlaWdodD0iNDMxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><p>åœ¨ GitHub Actions Shell Script ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">gh cli</code> éœ€æŒ‡å®š <code class="language-plaintext highlighter-rouge">GH_TOKEN</code> å‚æ•°</p><li><p>å¯ä»¥ç›´æ¥å¸¦å…¥é¢„è®¾ Token â€” <code class="language-plaintext highlighter-rouge">secrets.GITHUB_TOKEN</code> (GitHub Actions æ‰§è¡Œæ—¶è‡ªåŠ¨äº§ç”Ÿ)</p><li><p><strong>é¢„è®¾ Token æœ‰ä¸€äº›åŸºæœ¬æƒé™ï¼Œå¦‚æœè¦æ“ä½œçš„æŒ‡ä»¤æƒé™ä¸å¤Ÿå°±è¦æ”¹ç”¨ <a href="https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows" target="_blank">Personal Access Token</a></strong> ï¼Œå›¢é˜Ÿä½¿ç”¨å»ºè®®ç”¨å…±ç”¨å¸å·å»ºç«‹ PATã€‚</p></ul><p><strong>å®Œæ•´ç¨‹å¼ç ï¼š <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Demo-Env-Vars-.yml" target="_blank">Demo-Env-Vars- .yml</a></strong></p><p>GitHub Actions å·²ç»å¼€å‘å¥½äº†ï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬å¯ä»¥æŠ½æ¢ GitHub Hosted Runner æˆè‡ªå·±çš„ Self-hosted Runnerã€‚</p><blockquote><p><em>GitHub Hosted Runner æœ‰å…è´¹é¢åº¦ 2,000 åˆ†é’Ÿä¸€ä¸ªæœˆ(èµ·)ï¼Œè·‘è¿™ç§å°çš„è‡ªåŠ¨åŒ–ä»»åŠ¡èŠ±ä¸äº†å¤šå°‘æ—¶é—´ï¼Œè€Œä¸”æ˜¯è·‘åœ¨ linux æœºå™¨èŠ±è´¹å¾ˆä½ï¼Œå¯èƒ½è¿˜ç”¨ä¸åˆ°å…è´¹ä¸Šé™ï¼› <strong>ä¸ä¸€å®šè¦æ”¹æˆ Self-hosted Runner</strong> ï¼Œæ”¹ Runner è¿˜è¦ç¡®ä¿ Runner ç¯å¢ƒæ­£ç¡®(ä¾‹å¦‚ GitHub Hosted Runner è‡ªå¸¦ gh cliï¼Œself-hosted Runner å°±è®°å¾—è¦è‡ªå·±å®‰è£…å¥½)ï¼Œ <strong>æœ¬æ–‡çº¯ç²¹æ˜¯å› ä¸ºæ•™å­¦æ‰ä¼šè¿™æ ·æŠ½æ¢</strong> ã€‚</em></p></blockquote><blockquote><p><em>å¦‚æœæ˜¯ç”¨åœ¨æ‰§è¡Œ CI/CD ä»»åŠ¡æ‰å¿…é¡»è¦ç”¨ Self-hosted Runnerã€‚</em></p></blockquote><h4 id="æ–°å¢-self-hosted-runner"><span class="me-2">æ–°å¢ Self-hosted Runner</span><a href="#æ–°å¢-self-hosted-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p><em>æœ¬æ–‡ä»¥ <strong>macOS M1</strong> ä¸ºä¾‹ã€‚</em></p></blockquote><p><a href="/assets/404bd5c70040/1*mEInaj-tLaprMAa2OfowCw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*mEInaj-tLaprMAa2OfowCw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjExMTMiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><ul><li><p>Settings â†’ Actions â†’ Runners â†’ New self-hosted runnerã€‚</p><li><p><strong>Runner image:</strong> macOS</p><li><p><strong>Architecture</strong> : M1 è®°å¾—é€‰ ARM64 æ‰§è¡Œæ¯”è¾ƒå¿«</p></ul><p><strong>åœ¨å®ä½“ç”µè„‘ä¸Šå¼€ä¸€ä¸ª Termnialã€‚</strong></p><p><strong>æŒ‰ç…§ Download æ­¥éª¤åœ¨æœ¬åœ°ç”µè„‘å®Œæˆï¼š</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c"># åœ¨ä½ æƒ³è¦çš„è·¯å¾„ï¼Œå»ºç«‹ Runner ç›®å½•</span>
<span class="nb">mkdir </span>actions-runner <span class="o">&amp;&amp;</span> <span class="nb">cd </span>actions-runner
<span class="c"># ä¸‹è½½ Runner image</span>
curl <span class="nt">-o</span> actions-runner-osx-x64-2.325.0.tar.gz <span class="nt">-L</span> https://github.com/actions/runner/releases/download/v2.325.0/actions-runner-osx-x64-2.325.0.tar.gz

<span class="c"># Optional: Validate the hash</span>
<span class="nb">echo</span> <span class="s2">"0562bd934b27ca0c6d8a357df00809fbc7b4d5524d4aeb6ec152e14fd520a4c3  actions-runner-osx-x64-2.325.0.tar.gz"</span> <span class="se">\\</span>| shasum <span class="nt">-a</span> 256 <span class="nt">-c</span>

<span class="c"># è§£å‹ç¼©</span>
<span class="nb">tar </span>xzf ./actions-runner-osx-x64-2.325.0.tar.gz
</pre></table></code></div></div><blockquote><p><em>ä»¥ä¸Šåªæ˜¯å‚è€ƒï¼›å»ºè®®ç…§ä½ è®¾å®šé¡µé‡Œçš„æ­¥éª¤æ¥åšï¼Œæ‰ä¼šæ˜¯æœ€æ–°ç‰ˆæœ¬çš„ Runner imageã€‚</em></p></blockquote><p><a href="/assets/404bd5c70040/1*Q0k0EPjrY2V4owseESe5lg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Q0k0EPjrY2V4owseESe5lg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTYxIiBoZWlnaHQ9IjE5NyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><strong>è®¾å®š Configure:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># è¯·å‚è€ƒè®¾å®šé¡µæŒ‡ä»¤ï¼ŒToken ä¼šéšæ—¶é—´æ”¹å˜</span>
./config.sh <span class="nt">--url</span> https://github.com/ORG/REPO <span class="nt">--token</span> XXX
</pre></table></code></div></div><p>ä¼šä¾åºè¦ä½ è¾“å…¥ï¼š</p><ul><li><p>Enter the name of the runner group to add this runner to: [press Enter for Default] <strong>ç›´æ¥ Enter</strong> *åªæœ‰æ³¨å†Œåˆ° Organization ç»„ç»‡å±‚çº§çš„ Runner æ‰æœ‰ Group åˆ†ç»„åŠŸèƒ½</p><li><p>Enter the name of runner: [press Enter for ZhgChgLideMacBook-Pro] <strong>å¯ä»¥è¾“å…¥æƒ³è®¾å®šçš„ Runner åç§° e.g.</strong> <code class="language-plaintext highlighter-rouge">app-runner-1</code> <strong>æˆ–ç›´æ¥ Enter</strong></p><li><p>This runner will have the following labels: â€˜self-hostedâ€™, â€˜macOSâ€™, â€˜X64â€™ Enter any additional labels (ex. label-1,label-2): [press Enter to skip] <strong>è¾“å…¥æƒ³è¦è®¾å®šçš„ Runner labelï¼Œå¯ä»¥å¤šè¾“å…¥è‡ªè®¢ Label æ–¹ä¾¿ä¹‹åä½¿ç”¨</strong> åŒå‰è¿° GitHub Acitons/Runner æ˜¯ä¾ç…§å¯¹åº” Label æ‰¾ä»»åŠ¡æ¥åšï¼Œ <strong>å¦‚æœåªç”¨ default labelï¼ŒRunner å¯èƒ½ä¼šæ¡åˆ°ç»„ç»‡å†…çš„å…¶ä»– Runner æ¥æ‰§è¡Œå·¥ä½œï¼Œè‡ªè®¢ä¸€ä¸ªæœ€ä¿é™©</strong> ã€‚ è¿™è¾¹æˆ‘è‡ªå·±ä¹±å®šäº†ä¸€ä¸ª label <code class="language-plaintext highlighter-rouge">self-hosted-zhgchgli</code></p><li><p>Enter name of work folder: [press Enter for _work] <strong>ç›´æ¥ Enter</strong></p></ul><p>å‡ºç° âˆš Settings Saved. ä»£è¡¨è®¾å®šå®Œæˆäº†ã€‚</p><p><a href="/assets/404bd5c70040/1*yxLfii0rWhzsiFuYVmPgFw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*yxLfii0rWhzsiFuYVmPgFw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MjkiIGhlaWdodD0iNTAxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>å¯åŠ¨ Runner:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>./run.sh
</pre></table></code></div></div><p>å‡ºç° âˆš Connected to GitHubã€Listening for Jobs å°±ä»£è¡¨å·²ç»åœ¨ç›‘å¬ Actions ä»»åŠ¡äº†ï¼š</p><p><a href="/assets/404bd5c70040/1*1RmPPOosAoCxHA9tg_WE2w.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*1RmPPOosAoCxHA9tg_WE2w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyOTAiIGhlaWdodD0iOTgiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><blockquote><p><strong><em>è¿™ä¸ª Terminal è§†çª—ä¸å…³é—­å°±ä¼šæŒç»­æ¥æ”¶ä»»åŠ¡æ¥åšã€‚</em></strong></p></blockquote><blockquote><p><strong><em>ğŸš€ğŸš€ğŸš€åŒä¸€å°ç”µè„‘å¼€å¤šä¸ª Terminal åœ¨ä¸åŒç›®å½•å°±èƒ½èµ·å¤šä¸ª Runnerã€‚</em></strong></p></blockquote><p><strong>å›åˆ° Repo è®¾å®šé¡µä¹Ÿèƒ½çœ‹åˆ° Runner æ­£åœ¨ç­‰å¾…ä»»åŠ¡ï¼š</strong></p><p><a href="/assets/404bd5c70040/1*jjq5NTPYMuC3gH3ey_VTtg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*jjq5NTPYMuC3gH3ey_VTtg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDIiIGhlaWdodD0iMjQ3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Status:</strong></p><ul><li><p>Idle: é—²ç½®ï¼Œåœ¨ç­‰å¾…ä»»åŠ¡</p><li><p>Active: æœ‰ä»»åŠ¡æ­£åœ¨æ‰§è¡Œ</p><li><p>Offline: Runner ä¸åœ¨çº¿ä¸Š</p></ul><h4 id="workflowgithub-actions-runner-æ”¹ç”¨-self-hosted-runner"><span class="me-2">Workflow(GitHub Actions) Runner æ”¹ç”¨ Self-hosted Runner</span><a href="#workflowgithub-actions-runner-æ”¹ç”¨-self-hosted-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>ä»¥ <code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code> ä¸ºä¾‹ï¼š</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c1"># è¯·å‚è€ƒå‰æ–‡ï¼Œç•¥....</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">label-pr-by-file-count</span><span class="pi">:</span>
    <span class="c1"># è¯·å‚è€ƒå‰æ–‡ï¼Œç•¥....</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">self-hosted-zhgchgli</span><span class="pi">]</span>
    <span class="c1"># è¯·å‚è€ƒå‰æ–‡ï¼Œç•¥....</span>
  <span class="c1"># ---------</span>
  <span class="na">assign-self-if-no-assignee</span><span class="pi">:</span>
    <span class="c1"># è¯·å‚è€ƒå‰æ–‡ï¼Œç•¥....</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">self-hosted-zhgchgli</span><span class="pi">]</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># è¯·å‚è€ƒå‰æ–‡ï¼Œç•¥....</span>
</pre></table></code></div></div><p>Commit æ¡£æ¡ˆåˆ° Repo ä¸»åˆ†æ”¯ä¹‹åï¼Œé‡æ–°å¼€ PR è§¦å‘éªŒè¯ä¸€ä¸‹ Actionsã€‚</p><p><strong>å›åˆ° Runner Terminal å°±èƒ½çœ‹åˆ°æœ‰æ–°çš„ä»»åŠ¡è¿›æ¥äº†ï¼Œæ­£åœ¨æ‰§è¡Œè·Ÿæ‰§è¡Œç»“æœï¼š</strong></p><p><a href="/assets/404bd5c70040/1*Hu0DxKQbenPmBEw8swv65A.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Hu0DxKQbenPmBEw8swv65A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MjgiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>å¤±è´¥äº†ï¼Œå› ä¸ºæˆ‘æœ¬æœºç”µè„‘æ²¡æœ‰å®‰è£… <a href="https://github.com/cli/cli" target="_blank">gh cli</a> ç¯å¢ƒï¼š</p><p><a href="/assets/404bd5c70040/1*9xguacdPATIeEZdbFszmHw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*9xguacdPATIeEZdbFszmHw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NzMiIGhlaWdodD0iMTIzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">brew install gh</code> åœ¨å®ä½“ç”µè„‘ä¸Šå®‰è£…å®Œ gh åå†æ¬¡è§¦å‘æ‰§è¡Œï¼š</p><p><a href="/assets/404bd5c70040/1*TbkAt00K89Ysbix33dK8ZA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*TbkAt00K89Ysbix33dK8ZA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MzEiIGhlaWdodD0iMjkiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>æˆåŠŸï¼ç°åœ¨è¿™ä¸ªä»»åŠ¡å°±å®Œå…¨æ˜¯ä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„ç”µè„‘åœ¨æ‰§è¡Œï¼Œä¸ä½¿ç”¨ GitHub Hosted Runnerã€ä¸è®¡è´¹ä½¿ç”¨ã€‚</p><p><strong>æˆ‘ä»¬å¯ä»¥ç‚¹è¿›å» Action Log æŸ¥çœ‹ä»»åŠ¡æ‰§è¡Œåœ¨çš„ Runnerã€æœºå™¨æ˜¯å“ªä¸€ä¸ªï¼š</strong></p><p><a href="/assets/404bd5c70040/1*oqLcWfn6cbWsCt9fVsrikQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*oqLcWfn6cbWsCt9fVsrikQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDkyIiBoZWlnaHQ9IjgyNiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h4 id="runs-on--runner-label-è®¾å®š"><span class="me-2">runs-on: [ <strong>Runner Label] è®¾å®š</strong></span><a href="#runs-on--runner-label-è®¾å®š" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>è¿™é‡Œæ˜¯ AND ä¸æ˜¯ ORï¼ŒGitHub Runner æš‚ä¸æ”¯æ´ OR æŒ‘é€‰ Runner æ‰§è¡Œã€‚</p><p>ä¾‹å¦‚ï¼š <code class="language-plaintext highlighter-rouge">[self-hosted, macOS, app]</code> â†’ ä»£è¡¨ Runner è¦ <strong>åŒæ—¶æœ‰</strong> <code class="language-plaintext highlighter-rouge">self-hosted, macOS, app</code> è¿™ 3 ä¸ª Labels æ‰ä¼šåŒ¹é…æ¥ä»»åŠ¡æ¥æ‰§è¡Œã€‚</p><p>å¦‚æœä¸€ä¸ª Job æƒ³åŒæ—¶æµ‹è¯•ä¸åŒ Runner ç¯å¢ƒä¸‹çš„ç»“æœå¯ä»¥ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">matrix</code> å‚æ•°ï¼š</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">test</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">${{ matrix.runner }}</span>
    <span class="na">strategy</span><span class="pi">:</span>
      <span class="na">matrix</span><span class="pi">:</span>
        <span class="na">runner</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="pi">[</span><span class="nv">self-hosted</span><span class="pi">,</span> <span class="nv">linux</span><span class="pi">,</span> <span class="nv">high-memory</span><span class="pi">]</span>
          <span class="pi">-</span> <span class="pi">[</span><span class="nv">self-hosted</span><span class="pi">,</span> <span class="nv">macos</span><span class="pi">,</span> <span class="nv">xcode-15</span><span class="pi">]</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">echo "Running on ${{ matrix.runner }}"</span>
</pre></table></code></div></div><p>è¿™æ ·è¿™ä¸ª Job ä¼šåœ¨ä¸‹åˆ—ä¸¤ä¸ª Runner Labels Runner ä¸­å¹¶è¡Œå„æ‰§è¡Œä¸€æ¬¡ï¼š</p><ul><li><p>self-hosted, linux, high-memory</p><li><p>self-hosted, macos, xcode-15</p></ul><blockquote><p><strong><em>Runner æš‚ä¸æ”¯æ´ï¼š</em></strong></p></blockquote><blockquote><p><em>- OR æŒ‘é€‰ Runner</em></p></blockquote><blockquote><p><em>- Runner æƒé‡è®¾å®š</em></p></blockquote><h4 id="æ³¨å†Œ-runner-æˆ-service"><span class="me-2">æ³¨å†Œ Runner æˆ Service</span><a href="#æ³¨å†Œ-runner-æˆ-service" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡ä»¶ã€Œ <a href="https://docs.github.com/en/actions/how-tos/hosting-your-own-runners/managing-self-hosted-runners/configuring-the-self-hosted-runner-application-as-a-service?platform=mac" target="_blank">Configuring the self-hosted runner application as a service</a> ã€å°† Runner ç›´æ¥æ³¨å†Œæˆç³»ç»Ÿ Serviceï¼Œè¿™æ ·å°±èƒ½åœ¨èƒŒæ™¯æ‰§è¡Œ(ä¸ç”¨å¼€ Terminal åœ¨å‰æ™¯)ã€å¼€æœºåä¹Ÿä¼šè‡ªåŠ¨å¯åŠ¨ã€‚</p><p>æœ‰å¤šä¸ª Runner è®°å¾—è°ƒæ•´ã€Œ <a href="https://docs.github.com/en/actions/how-tos/hosting-your-own-runners/managing-self-hosted-runners/configuring-the-self-hosted-runner-application-as-a-service?platform=mac#customizing-the-self-hosted-runner-service-1" target="_blank">Customizing the self-hosted runner service</a> ã€è®¾å®šæ³¨å†Œä¸åŒåç§°ã€‚</p><blockquote><p><em>iOS è¿™è¾¹æˆ‘æœ‰ä¸€ä¸ªå¾…ç ”ç©¶æ’é™¤çš„é—®é¢˜ï¼Œ <strong>å°±æ˜¯æˆ‘æ”¹ç”¨èƒŒæ™¯ Service ä¹‹ååœ¨ Archive ä¼šé‡åˆ°é”™è¯¯(ç–‘ä¼¼æ˜¯è·Ÿ keychain æƒé™æœ‰å…³)</strong> ï¼Œå½“æ—¶æ²¡æ—¶é—´è§£å†³ï¼Œå°±å…ˆç”¨èµ·å‰æ™¯ Terminal Runner äº†ã€‚</em></p></blockquote><p>å¦‚æœæ˜¯ä¼ ç»Ÿå‰æ™¯è¦åšåˆ°å¼€æœºè‡ªåŠ¨å¯åŠ¨å°±è¦å» <code class="language-plaintext highlighter-rouge">~/Library/LaunchAgents</code> æ–°å¢ä¸€ä¸ªè‡ªåŠ¨å¯åŠ¨è®¾å®šæ¡£æ¡ˆï¼š</p><p><code class="language-plaintext highlighter-rouge">actions.runner.REPO.RUNNER_NAME.plist</code> ï¼š</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span>
<span class="nt">&lt;plist</span> <span class="na">version=</span><span class="s">"1.0"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;dict&gt;</span>
  <span class="nt">&lt;key&gt;</span>Label<span class="nt">&lt;/key&gt;</span>
  <span class="nt">&lt;string&gt;</span>actions.runner.REPO.RUNNER_NAME<span class="nt">&lt;/string&gt;</span>
  <span class="c">&lt;!-- æŒ‡å®š Terminal.app æ¥å¯åŠ¨ --&gt;</span>
  <span class="nt">&lt;key&gt;</span>ProgramArguments<span class="nt">&lt;/key&gt;</span>
  <span class="nt">&lt;array&gt;</span>
   <span class="nt">&lt;string&gt;</span>/usr/bin/open<span class="nt">&lt;/string&gt;</span>
   <span class="nt">&lt;string&gt;</span>-a<span class="nt">&lt;/string&gt;</span>
   <span class="nt">&lt;string&gt;</span>Terminal<span class="nt">&lt;/string&gt;</span>
   <span class="nt">&lt;string&gt;</span>/Users/zhgchgli/Documents/actions-runner/run.sh<span class="nt">&lt;/string&gt;</span>
  <span class="nt">&lt;/array&gt;</span>
  <span class="nt">&lt;key&gt;</span>RunAtLoad<span class="nt">&lt;/key&gt;</span>
  <span class="nt">&lt;true/&gt;</span>
  <span class="nt">&lt;key&gt;</span>WorkingDirectory<span class="nt">&lt;/key&gt;</span>
  <span class="nt">&lt;string&gt;</span>/Users/zhgchgli/Documents/actions-runner<span class="nt">&lt;/string&gt;</span>
 <span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/plist&gt;</span>
</pre></table></code></div></div><blockquote><p><em>æœ‰å…´è¶£æ·±å…¥ç ”ç©¶ DevOps çš„æœ‹å‹å¯å‚è€ƒå®˜æ–¹ <a href="https://docs.github.com/en/actions/concepts/runners/about-actions-runner-controller#scaling-runners" target="_blank">k8s Runner</a> æ–‡ä»¶ã€‚</em></p></blockquote><h4 id="å®Œæ•´ä¸“æ¡ˆ-repo"><span class="me-2">å®Œæ•´ä¸“æ¡ˆ Repo</span><a href="#å®Œæ•´ä¸“æ¡ˆ-repo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/8b25f8eae56bc35c92b97c5d7e7834aa5cb87673e718a1ce829f5bb80f3edebb/ZhgChgLi/github-actions-ci-cd-demo" alt="" loading="lazy"></a></p><h3 id="å®˜æ–¹æ–‡ä»¶"><span class="me-2">å®˜æ–¹æ–‡ä»¶</span><a href="#å®˜æ–¹æ–‡ä»¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://docs.github.com/en/actions/get-started/quickstart" target="_blank" class="img-link shimmer" ><img src="https://docs.github.com/assets/cb-345/images/social-cards/actions.png" alt="" loading="lazy"></a></p><p>æ›´ç»†èŠ‚çš„è®¾ç½®æ–¹å¼è¯·åŠ¡å¿…å‚è€ƒå®˜æ–¹æ‰‹å†Œã€‚</p><h4 id="ai-can-help"><span class="me-2">AI Can Help!</span><a href="#ai-can-help" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*JecNUCqujV1oeAvHA14X-g.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*JecNUCqujV1oeAvHA14X-g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTE0IiBoZWlnaHQ9IjExNDAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>å®æµ‹ç»™ ChatGPT å®Œæ•´çš„æ­¥éª¤è·Ÿæ—¶æœºç‚¹å°±èƒ½å¸®ä½ å†™å¥½ GitHub Actions ç›´æ¥ä½¿ç”¨!</p><h3 id="æ€»ç»“"><span class="me-2">æ€»ç»“</span><a href="#æ€»ç»“" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>ç°åœ¨ä½ åº”è¯¥å·²ç»å¯¹ GitHub Actions + Self-hosted Runner æœ‰äº†ä¸€å®šç¨‹åº¦çš„äº†è§£ï¼Œä¸‹ä¸€ç¯‡æˆ‘å°†å¼€å§‹ä»¥ App (iOS) CI/CD ä¸ºæ¡ˆä¾‹ï¼Œæ‰‹æŠŠæ‰‹å»ºç½®æ•´å¥—æµç¨‹ã€‚</p><h3 id="ç³»åˆ—æ–‡ç« "><span class="me-2">ç³»åˆ—æ–‡ç« ï¼š</span><a href="#ç³»åˆ—æ–‡ç« " class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p><a href="/posts/zrealm-dev/zh-cn/ci-cd-%E6%98%AF%E4%BB%80%E4%B9%88-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A8%B3%E5%AE%9A%E5%BC%80%E5%8F%91%E5%9B%A2%E9%98%9F%E7%9A%84%E5%85%B3%E9%94%AE%E6%B5%81%E7%A8%8B%E4%B8%8E%E5%B7%A5%E5%85%B7%E9%80%89%E6%8B%A9-c008a9e8ceca/"><strong>CI/CD å®æˆ˜æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šCI/CD æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•é€è¿‡ CI/CD æ‰“é€ ç¨³å®šé«˜æ•ˆçš„å¼€å‘å›¢é˜Ÿï¼Ÿå·¥å…·é€‰æ‹©ï¼Ÿ</strong></a></p><li><p><a href="/posts/zrealm-dev/zh-cn/github-actions-self-hosted-runner-%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"><strong>CI/CD å®æˆ˜æŒ‡å—ï¼ˆäºŒï¼‰ï¼šGitHub Actions ä¸ self-hosted Runner ä½¿ç”¨ä¸å»ºç½®å¤§å…¨</strong></a></p><li><p><a href="/posts/zrealm-dev/zh-cn/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AE%9E%E4%BD%9C%E8%87%AA%E5%8A%A8%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B5%8B%E8%AF%95%E4%B8%8E%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%A6-4b001d2e8440/"><strong>CI/CD å®æˆ˜æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å®ä½œ App ä¸“æ¡ˆçš„ CI ä¸ CD å·¥ä½œæµç¨‹</strong></a></p><li><p><a href="/posts/zrealm-dev/zh-cn/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9B%A2%E9%98%9F%E6%95%88%E7%8E%87-4273e57e7148/"><strong>CI/CD å®æˆ˜æŒ‡å—ï¼ˆå››ï¼‰ï¼šä½¿ç”¨ Google Apps Script Web App ä¸²æ¥ GitHub Actions å»ºç½®å…è´¹æ˜“ç”¨çš„æ‰“åŒ…å·¥å…·å¹³å°</strong></a></p></ul><h4 id="buy-me-a-coffee"><span class="me-2"><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank">Buy me a coffee</a></span><a href="#buy-me-a-coffee" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank"><strong><em>æœ¬ç³»åˆ—æ–‡ç« èŠ±è´¹äº†å¤§é‡çš„æ—¶é—´ç²¾åŠ›æ’°å†™ï¼Œå¦‚æœå†…å®¹å¯¹æ‚¨æœ‰å¸®åŠ©ã€å¯¹æ‚¨çš„å›¢é˜Ÿæœ‰å®è´¨æå‡å·¥ä½œæ•ˆç‡ä¸äº§å“å“è´¨ï¼›æ¬¢è¿è¯·æˆ‘å–æ¯å’–å•¡ï¼Œæ„Ÿè°¢æ”¯æŒï¼</em></strong></a></p></blockquote><p><a href="/assets/404bd5c70040/1*QJj54G9gOjtQS-rbHVT1SQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*QJj54G9gOjtQS-rbHVT1SQ.webp" alt="[Buy me a coffee](https://www.buymeacoffee.com/zhgchgli){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MDAiIGhlaWdodD0iNzAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank">Buy me a coffee</a></p><p>æœ‰ä»»ä½•é—®é¢˜åŠæŒ‡æ•™æ¬¢è¿ <a href="https://www.zhgchg.li/contact" target="_blank">ä¸æˆ‘è”ç»œ</a> ã€‚</p><script src="/assets/clipboard.min.js"></script><div style=" display:flex; align-items:center; gap:10px; border:1px solid #e5e7eb; background:#f9fafb; padding:12px 16px; border-radius:12px; margin:18px 0; box-shadow:0 3px 8px rgba(0,0,0,0.05); width: auto;"> <input id="share-url" value="https://zhgchg.li/posts/zh-cn/404bd5c70040/" readonly="" style=" flex:1; border:1px solid #d1d5db; border-radius:8px; padding:10px 12px; font-size:0.9rem; background:#ffffff; color:#111827; outline:none; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; " /> <button class="btn" data-clipboard-target="#share-url" id="copy-btn" style=" border:none; background:#3b82f6; color:white; padding:10px 16px; border-radius:10px; cursor:pointer; font-size:0.85rem; font-weight:600; display:flex; align-items:center; gap:6px; transition:all .15s ease; box-shadow:0 2px 5px rgba(59,130,246,0.35); " onmouseover="this.style.opacity='0.92';" onmouseout="this.style.opacity='1';"> <span style="font-size:1rem;">ğŸ”—</span> <span id="copy-btn-text">Copy link to share!</span> </button></div><script> new ClipboardJS('.btn'); var btn = document.getElementById("copy-btn"); var text = document.getElementById("copy-btn-text"); btn.addEventListener("click", function () { text.textContent = "Copied!"; btn.style.background = "#16a34a"; btn.style.boxShadow = "0 2px 6px rgba(22,163,74,0.35)"; setTimeout(() => { text.textContent = "Copy link to share!"; btn.style.background = "#3b82f6"; btn.style.boxShadow = "0 2px 5px rgba(59,130,246,0.35)"; }, 1500); });</script><hr /><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=ğŸº&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a></p><blockquote class="prompt-info"><p>æœ¬æ–‡é¦–æ¬¡å‘è¡¨äº Medium (<a href="https://medium.com/p/404bd5c70040" target="_blank"><strong>ç‚¹å‡»æŸ¥çœ‹åŸå§‹ç‰ˆæœ¬</strong></a>)ï¼Œç”± <a href="/posts/tools/medium-to-jekyll/" target="_blank">ZMediumToMarkdown</a> æä¾›è‡ªåŠ¨è½¬æ¢ä¸åŒæ­¥æŠ€æœ¯ã€‚</p></blockquote><blockquote class="prompt-info"><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/zh-cn/zmediumtomarkdown/2025-07-02-404bd5c70040.md" target="_blank">Improve this page on Github.</a></p></blockquote><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1,049+ Followers</span></a></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/simplified-chinese/" class="post-tag no-text-decoration" >simplified-chinese</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/cicd/" class="post-tag no-text-decoration" >cicd</a> <a href="/tags/github-actions/" class="post-tag no-text-decoration" >github-actions</a> <a href="/tags/github/" class="post-tag no-text-decoration" >github</a> <a href="/tags/self-hosted/" class="post-tag no-text-decoration" >self-hosted</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=GitHub%20Actions%EF%BD%9CSelf-hosted%20Runner%20%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%EF%BD%9CCI/CD%20%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fzh-cn%2Fgithub-actions-self-hosted-runner-%25E8%25AF%25A6%25E8%25A7%25A3%25E4%25B8%258E%25E5%25AE%259E%25E6%2588%2598%25E6%25A1%2588%25E4%25BE%258B-ci-cd-%25E8%2587%25AA%25E5%258A%25A8%25E5%258C%2596%25E5%25B7%25A5%25E4%25BD%259C%25E6%25B5%2581%25E7%25A8%258B%25E5%25BB%25BA%25E7%25BD%25AE-404bd5c70040%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=GitHub%20Actions%EF%BD%9CSelf-hosted%20Runner%20%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%EF%BD%9CCI/CD%20%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fzh-cn%2Fgithub-actions-self-hosted-runner-%25E8%25AF%25A6%25E8%25A7%25A3%25E4%25B8%258E%25E5%25AE%259E%25E6%2588%2598%25E6%25A1%2588%25E4%25BE%258B-ci-cd-%25E8%2587%25AA%25E5%258A%25A8%25E5%258C%2596%25E5%25B7%25A5%25E4%25BD%259C%25E6%25B5%2581%25E7%25A8%258B%25E5%25BB%25BA%25E7%25BD%25AE-404bd5c70040%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fzh-cn%2Fgithub-actions-self-hosted-runner-%25E8%25AF%25A6%25E8%25A7%25A3%25E4%25B8%258E%25E5%25AE%259E%25E6%2588%2598%25E6%25A1%2588%25E4%25BE%258B-ci-cd-%25E8%2587%25AA%25E5%258A%25A8%25E5%258C%2596%25E5%25B7%25A5%25E4%25BD%259C%25E6%25B5%2581%25E7%25A8%258B%25E5%25BB%25BA%25E7%25BD%25AE-404bd5c70040%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/en/ci-cd-explained-boost-ios-app-development-stability-and-efficiency-tool-selection-guide-c008a9e8ceca/">CI/CD Explained: Boost iOS App Development Stability and Efficiencyï½œTool Selection Guide</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/zh-cn/ci-cd-%E6%98%AF%E4%BB%80%E4%B9%88-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A8%B3%E5%AE%9A%E5%BC%80%E5%8F%91%E5%9B%A2%E9%98%9F%E7%9A%84%E5%85%B3%E9%94%AE%E6%B5%81%E7%A8%8B%E4%B8%8E%E5%B7%A5%E5%85%B7%E9%80%89%E6%8B%A9-c008a9e8ceca/">CI/CD å®æˆ˜æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šCI/CD æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•é€è¿‡ CI/CD æ‰“é€ ç¨³å®šé«˜æ•ˆçš„å¼€å‘å›¢é˜Ÿï¼Ÿå·¥å…·é€‰æ‹©ï¼Ÿ</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/ci-cd-%E6%98%AF%E4%BB%80%E9%BA%BC-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A9%A9%E5%AE%9A%E9%96%8B%E7%99%BC%E5%9C%98%E9%9A%8A%E7%9A%84%E9%97%9C%E9%8D%B5%E6%B5%81%E7%A8%8B%E8%88%87%E5%B7%A5%E5%85%B7%E9%81%B8%E6%93%87-c008a9e8ceca/">CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šCI/CD æ˜¯ä»€éº¼ï¼Ÿå¦‚ä½•é€é CI/CD æ‰“é€ ç©©å®šé«˜æ•ˆçš„é–‹ç™¼åœ˜éšŠï¼Ÿå·¥å…·é¸æ“‡ï¼Ÿ</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/en/google-apps-script-web-app-integrate-forms-with-github-actions-ci-cd-for-streamlined-workflows-4cb4437818f2/">Google Apps Script Web Appï½œIntegrate Forms with GitHub Actions CI/CD for Streamlined Workflows</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/zh-cn/google-apps-script-web-app-%E6%89%93%E9%80%A0-github-action-ci-cd-%E8%87%AA%E8%AE%A2%E8%A1%A8%E5%8D%95%E6%8F%90%E5%8D%87%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87-4cb4437818f2/">ä½¿ç”¨ Google Apps Script Web App è¡¨å•ä¸²æ¥ Github Action CI/CD å·¥ä½œ</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">ç”Ÿæ´»</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Chapters ğŸ”–</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1751458952" data-df="ll" > Jul 2, 2025 </time><h4 class="pt-0 my-2">CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆäºŒï¼‰ï¼šGitHub Actions èˆ‡ Self-hosted Runner ä½¿ç”¨èˆ‡å»ºç½®å¤§å…¨</h4><div class="text-muted"><p>å¸¶æ‚¨å¾é ­äº†è§£ GitHub Actions/Self-hosted Runner é‹ä½œæ–¹å¼èˆ‡æ‰‹æŠŠæ‰‹ä½¿ç”¨æ•™å­¸ã€‚</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/zh-cn/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AE%9E%E4%BD%9C%E8%87%AA%E5%8A%A8%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B5%8B%E8%AF%95%E4%B8%8E%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%A6-4b001d2e8440/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1751900544" data-df="ll" > Jul 7, 2025 </time><h4 class="pt-0 my-2">CI/CD å®æˆ˜æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å®ä½œ App iOS CI ä¸ CD å·¥ä½œæµç¨‹</h4><div class="text-muted"><p>iOS App è‡ªåŠ¨åŒ–å»ºç½®ã€æµ‹è¯•ã€éƒ¨ç½²çš„ GitHub Actions å®ä½œæ­¥éª¤å®Œæ•´æ•™å­¦</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/en/github-actions-self-hosted-runner-setup-and-usage-guide-for-efficient-ci-cd-404bd5c70040/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1751458952" data-df="ll" > Jul 2, 2025 </time><h4 class="pt-0 my-2">GitHub Actionsï½œSelf-hosted Runner Setup and Usage Guide for Efficient CI/CD</h4><div class="text-muted"><p>Discover step-by-step instructions to implement GitHub Actions and Self-hosted Runner, resolving CI/CD deployment challenges and accelerating your automation workflows for reliable and scalable sof...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/en/github-actions-self-hosted-runner-setup-and-usage-guide-for-efficient-ci-cd-404bd5c70040/" class="btn btn-outline-primary" aria-label="Older" ><p>GitHub Actionsï½œSelf-hosted Runner Setup and Usage Guide for Efficient CI/CD</p></a> <a href="/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" class="btn btn-outline-primary" aria-label="Newer" ><p>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆäºŒï¼‰ï¼šGitHub Actions èˆ‡ Self-hosted Runner ä½¿ç”¨èˆ‡å»ºç½®å¤§å…¨</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>Â© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span> <a href="/">æ­£é«”ä¸­æ–‡</a> | <a href="/tags/simplified-chinese">ç®€ä½“ä¸­æ–‡</a> | <a href="/tags/english/">English</a> <br/> Last updated: 2025-12-21 01:32:18 +08:00</p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">ç”Ÿæ´»</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
