<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="XCode 虚拟目录转实体目录｜解决专案结构混乱与 XcodeGen、Tuist 整合痛点" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="针对 XCode 早期虚拟目录造成专案结构混乱、难以使用 XcodeGen 与 Tuist，提供纯 Swift 开源工具 XCFolder，快速转换虚拟目录为实体目录，降低合并冲突风险，提升团队协作与 CI/CD 效率。" /><meta property="og:description" content="针对 XCode 早期虚拟目录造成专案结构混乱、难以使用 XcodeGen 与 Tuist，提供纯 Swift 开源工具 XCFolder，快速转换虚拟目录为实体目录，降低合并冲突风险，提升团队协作与 CI/CD 效率。" /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/zh-cn/xcode-%E8%99%9A%E6%8B%9F%E7%9B%AE%E5%BD%95%E8%BD%AC%E5%AE%9E%E4%BD%93%E7%9B%AE%E5%BD%95-%E8%A7%A3%E5%86%B3%E4%B8%93%E6%A1%88%E7%BB%93%E6%9E%84%E6%B7%B7%E4%B9%B1%E4%B8%8E-xcodegen-tuist-%E6%95%B4%E5%90%88%E7%97%9B%E7%82%B9-fd719053b376/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/zh-cn/xcode-%E8%99%9A%E6%8B%9F%E7%9B%AE%E5%BD%95%E8%BD%AC%E5%AE%9E%E4%BD%93%E7%9B%AE%E5%BD%95-%E8%A7%A3%E5%86%B3%E4%B8%93%E6%A1%88%E7%BB%93%E6%9E%84%E6%B7%B7%E4%B9%B1%E4%B8%8E-xcodegen-tuist-%E6%95%B4%E5%90%88%E7%97%9B%E7%82%B9-fd719053b376/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/fd719053b376/1*fYk27y-BjMBjBFnwDfhxlw.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-03-02T20:21:31+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/fd719053b376/1*fYk27y-BjMBjBFnwDfhxlw.webp" /><meta property="twitter:title" content="XCode 虚拟目录转实体目录｜解决专案结构混乱与 XcodeGen、Tuist 整合痛点" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://medium.com/@zhgchgli/"},"dateModified":"2025-03-09T15:59:17+08:00","datePublished":"2025-03-02T20:21:31+08:00","description":"针对 XCode 早期虚拟目录造成专案结构混乱、难以使用 XcodeGen 与 Tuist，提供纯 Swift 开源工具 XCFolder，快速转换虚拟目录为实体目录，降低合并冲突风险，提升团队协作与 CI/CD 效率。","headline":"XCode 虚拟目录转实体目录｜解决专案结构混乱与 XcodeGen、Tuist 整合痛点","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+","url":"https://zhgchg.li/assets/fd719053b376/1*fYk27y-BjMBjBFnwDfhxlw.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/zh-cn/xcode-%E8%99%9A%E6%8B%9F%E7%9B%AE%E5%BD%95%E8%BD%AC%E5%AE%9E%E4%BD%93%E7%9B%AE%E5%BD%95-%E8%A7%A3%E5%86%B3%E4%B8%93%E6%A1%88%E7%BB%93%E6%9E%84%E6%B7%B7%E4%B9%B1%E4%B8%8E-xcodegen-tuist-%E6%95%B4%E5%90%88%E7%97%9B%E7%82%B9-fd719053b376/"},"url":"https://zhgchg.li/posts/zrealm-dev/zh-cn/xcode-%E8%99%9A%E6%8B%9F%E7%9B%AE%E5%BD%95%E8%BD%AC%E5%AE%9E%E4%BD%93%E7%9B%AE%E5%BD%95-%E8%A7%A3%E5%86%B3%E4%B8%93%E6%A1%88%E7%BB%93%E6%9E%84%E6%B7%B7%E4%B9%B1%E4%B8%8E-xcodegen-tuist-%E6%95%B4%E5%90%88%E7%97%9B%E7%82%B9-fd719053b376/"}</script><title>XCode 虚拟目录转实体目录｜解决专案结构混乱与 XcodeGen、Tuist 整合痛点 | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script><link rel="alternate" hreflang="en" href="/posts/zrealm-dev/en/xcode-virtual-directory-issues-streamline-your-project-structure-with-open-source-tools-fd719053b376/"><link rel="alternate" hreflang="zh-Hant" href="/posts/zrealm-dev/xcode-%E8%99%9B%E6%93%AC%E7%9B%AE%E9%8C%84%E8%BD%89%E5%AF%A6%E9%AB%94%E7%9B%AE%E9%8C%84-%E8%A7%A3%E6%B1%BA%E5%B0%88%E6%A1%88%E7%B5%90%E6%A7%8B%E6%B7%B7%E4%BA%82%E8%88%87-xcodegen-tuist-%E6%95%B4%E5%90%88%E7%97%9B%E9%BB%9E-fd719053b376/"><link rel="alternate" hreflang="x-default" href="/posts/zrealm-dev/zh-cn/xcode-%E8%99%9A%E6%8B%9F%E7%9B%AE%E5%BD%95%E8%BD%AC%E5%AE%9E%E4%BD%93%E7%9B%AE%E5%BD%95-%E8%A7%A3%E5%86%B3%E4%B8%93%E6%A1%88%E7%BB%93%E6%9E%84%E6%B7%B7%E4%B9%B1%E4%B8%8E-xcodegen-tuist-%E6%95%B4%E5%90%88%E7%97%9B%E7%82%B9-fd719053b376/"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0">An iOS, web, and automation developer from Taiwan 🇹🇼 who also loves sharing, traveling, and writing.</p><a href="https://medium.com/@zhgchgli" target="_blank" style="display: block;text-align: center;font-style: normal;/* text-decoration: underline; */font-size: 1.2em;color: var(--heading-color);">1K+ Followers on Medium</a></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a><li class="nav-item"> <a href="/english/" class="nav-link"> <i class="fa-fw fa fa-solid fa-language"></i> <span>ENGLISH POSTS</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>XCode 虚拟目录转实体目录｜解决专案结构混乱与 XcodeGen、Tuist 整合痛点</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>XCode 虚拟目录转实体目录｜解决专案结构混乱与 XcodeGen、Tuist 整合痛点</h1><p class="post-desc fw-light mb-4">针对 XCode 早期虚拟目录造成专案结构混乱、难以使用 XcodeGen 与 Tuist，提供纯 Swift 开源工具 XCFolder，快速转换虚拟目录为实体目录，降低合并冲突风险，提升团队协作与 CI/CD 效率。</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1740918091" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Mar 2, 2025 </time> </span> <span> Updated <time data-ts="1741507157" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Mar 9, 2025 </time> </span><div class="mt-3 mb-3"> <a href="/assets/fd719053b376/1*fYk27y-BjMBjBFnwDfhxlw.webp" class="popup img-link preview-img blur"><img data-src="/assets/fd719053b376/1*fYk27y-BjMBjBFnwDfhxlw.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></div><div class="d-flex justify-content-between"> <span style="display: inline-flex; align-items: center; gap: 4px;"> By <em> <a href="https://medium.com/@zhgchgli/">ZhgChgLi</a> </em> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" style="display: block; "><path fill="#007bff" d="M271.2 56C265.1 49.8 256.2 47.3 247.8 49.6C239.4 51.9 232.9 58.4 230.8 66.8L215.5 127C214.4 131.4 209.9 134 205.6 132.7L145.8 115.9C137.4 113.5 128.4 115.9 122.3 122C116.2 128.1 113.8 137.1 116.2 145.5L133.1 205.3C134.3 209.6 131.7 214.1 127.4 215.2L67.1 230.5C58.7 232.6 52.1 239.2 49.8 247.6C47.5 256 50 264.9 56.2 271L100.7 314.3C103.9 317.4 103.9 322.6 100.7 325.8L56.3 369.1C50.1 375.2 47.6 384.1 49.9 392.5C52.2 400.9 58.8 407.4 67.2 409.6L127.4 424.9C131.8 426 134.4 430.5 133.1 434.8L116.2 494.5C113.8 502.9 116.2 511.9 122.3 518C128.4 524.1 137.4 526.5 145.8 524.1L205.6 507.2C209.9 506 214.4 508.6 215.5 512.9L230.8 573.1C232.9 581.5 239.5 588.1 247.9 590.4C256.3 592.7 265.2 590.2 271.3 584L314.6 539.5C317.7 536.3 322.9 536.3 326.1 539.5L369.3 584C375.4 590.2 384.3 592.7 392.7 590.4C401.1 588.1 407.6 581.5 409.8 573.1L425.1 513C426.2 508.6 430.7 506 435 507.3L494.8 524.2C503.2 526.6 512.2 524.2 518.3 518.1C524.4 512 526.8 503 524.4 494.6L507.5 434.8C506.3 430.5 508.9 426 513.2 424.9L573.4 409.6C581.8 407.5 588.4 400.9 590.7 392.5C593 384.1 590.5 375.1 584.3 369.1L539.8 325.8C536.6 322.7 536.6 317.5 539.8 314.3L584.3 271C590.5 264.9 593 256 590.7 247.6C588.4 239.2 581.8 232.7 573.4 230.5L513.2 215.2C508.8 214.1 506.2 209.6 507.5 205.3L524.4 145.5C526.8 137.1 524.4 128.1 518.3 122C512.2 115.9 503.2 113.5 494.8 115.9L435 132.8C430.7 134 426.2 131.4 425.1 127.1L409.8 66.8C407.7 58.4 401.1 51.8 392.7 49.5C384.3 47.2 375.4 49.7 369.3 55.9L326 100.5C322.9 103.7 317.7 103.7 314.5 100.5L271.2 56z"/><path d="M250 330 l60 60 100 -140" stroke="#ffffff" stroke-width="40" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="2763 words" > <em>15 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">XCode 虚拟目录转实体目录｜解决专案结构混乱与 XcodeGen、Tuist 整合痛点</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">章節 (Chapters)🔖</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">XCode 虚拟目录转实体目录｜解决专案结构混乱与 XcodeGen、Tuist 整合痛点</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><blockquote class="prompt-tip"><p><a href="/posts/zrealm-dev/en/xcode-virtual-directory-issues-streamline-your-project-structure-with-open-source-tools-fd719053b376/"><strong>Click here</strong></a> to view the English version of this article.</p></blockquote><blockquote class="prompt-tip"><p><a href="/posts/zrealm-dev/xcode-%E8%99%9B%E6%93%AC%E7%9B%AE%E9%8C%84%E8%BD%89%E5%AF%A6%E9%AB%94%E7%9B%AE%E9%8C%84-%E8%A7%A3%E6%B1%BA%E5%B0%88%E6%A1%88%E7%B5%90%E6%A7%8B%E6%B7%B7%E4%BA%82%E8%88%87-xcodegen-tuist-%E6%95%B4%E5%90%88%E7%97%9B%E9%BB%9E-fd719053b376/"><strong>點擊這裡</strong></a>查看本文章正體中文版本。</p></blockquote><blockquote class="prompt-info"><p>基于 SEO 考量，本文标题与描述经 AI 调整，原始版本请参考内文。</p></blockquote><hr /><h3 id="xcode-虚拟目录万年问题探究与我的开源工具解决方案"><span class="me-2">XCode 虚拟目录万年问题探究与我的开源工具解决方案</span><a href="#xcode-虚拟目录万年问题探究与我的开源工具解决方案" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Apple 开发者职业伤害之 Xcode 早期使用虚拟目录，导致目录结构混乱且难以整合 XcodeGen, Tuist 等现代工具。</p><p><a href="/assets/fd719053b376/1*fYk27y-BjMBjBFnwDfhxlw.webp" class="popup img-link blur"><img data-src="/assets/fd719053b376/1*fYk27y-BjMBjBFnwDfhxlw.webp" alt="Photo by [Saad Salim](https://unsplash.com/@saadx?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9Ijk3MSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Photo by <a href="https://unsplash.com/@saadx?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" target="_blank">Saad Salim</a></p><h4 id="english-version-of-this-post"><span class="me-2">English version of this post:</span><a href="#english-version-of-this-post" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><h4 id="exploring-the-long-standing-issues-of-xcode-virtual-directories-and-my-open-source-tool-solution"><span class="me-2"><a href="/posts/zrealm-dev/zh-cn/xcode-%E8%99%9A%E6%8B%9F%E7%9B%AE%E5%BD%95%E8%BD%AC%E5%AE%9E%E4%BD%93%E7%9B%AE%E5%BD%95-%E8%A7%A3%E5%86%B3%E4%B8%93%E6%A1%88%E7%BB%93%E6%9E%84%E6%B7%B7%E4%B9%B1%E4%B8%8E-xcodegen-tuist-%E6%95%B4%E5%90%88%E7%97%9B%E7%82%B9-fd719053b376/">Exploring the Long-Standing Issues of XCode Virtual Directories and My Open Source Tool Solution</a></span><a href="#exploring-the-long-standing-issues-of-xcode-virtual-directories-and-my-open-source-tool-solution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><h3 id="背景"><span class="me-2">背景</span><a href="#背景" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>随著团队规模与专案的成长，XCode 专案档 ( .xcodeproj) 的体积会逐渐增大，依照专案复杂程度可以到十万行、甚至百万行，加上多人多条线并行开发，免不了会出现冲突问题； <strong>XcodeProj 档案一旦出现冲突就跟 Storyboard / .xib 的冲突一样难解</strong> ，因也是纯描述档，很容易在解冲突时不小心把别人新增的档案移除或是别人移除的档案参照又跑回来。</p><p>另外的问题是随著模组化推进，在 XCode 专案档 ( .xcodeproj) 建立、管理模组的流程非常不友善，模组有变动一样只能从 XCode 专案档 的 Diff 中查看，整体不利于团队朝模组化迈进。</p><blockquote><p><em>如果只是为了防止冲突可以简单地在 pre-commit 做 <a href="https://github.com/chiahsien/sort-Xcode-project-file" target="_blank">File Sorting</a> ，现有的脚本 Github 上很多，可以直接参考设置。</em></p></blockquote><h4 id="xcfolder"><span class="me-2"><a href="https://github.com/ZhgChgLi/XCFolder" target="_blank">XCFolder</a></span><a href="#xcfolder" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://github.com/ZhgChgLi/XCFolder" target="_blank" class="img-link shimmer" ><img src="https://repository-images.githubusercontent.com/941421589/27855f06-b938-4458-a20f-3e317b4283b7" alt="" loading="lazy"></a></p><blockquote><p><strong><em>长话短说</em></strong> <em>，开发了一个工具可以帮你把 XCode 早期的虚拟目录转依照 XCode 里的目录结构换成实体目录。</em></p></blockquote><p><a href="/assets/fd719053b376/1*eFNN12WDaAk6mr49OzmC_g.webp" class="popup img-link blur"><img data-src="/assets/fd719053b376/1*eFNN12WDaAk6mr49OzmC_g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjQxNSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><blockquote><p><em>下滑继续看故事…</em></p></blockquote><h4 id="现代化-xcode-project-档案管理"><span class="me-2">现代化 Xcode Project 档案管理</span><a href="#现代化-xcode-project-档案管理" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>具体思维同我们在多人开发时不鼓励使用 Storyboard or .xib 一样， <strong>我们需要一个好维护、可迭代、可被 Code Review 的介面来管理「XCode 专案档」</strong> ，目前市场主流有两套免费工具可以使用：</p><ul><li><p><a href="https://github.com/yonaskolb/XcodeGen" target="_blank">XCodeGen</a> ：老牌工具，使用 YAML 定义 XCode 专案内容，再透过它转换成 XCode 专案档 ( .xcodeproj)。 直接使用 YAML 定义结构、导入难度及学习成本较低、但是对模组化或是依赖管理功能较弱、YAML 动态设置弱。</p><li><p><a href="https://github.com/tuist/tuist" target="_blank">Tuist</a> ：近几年出的新工具，使用 Swift DSL 定义 XCode 专案内容，再透过它转换成 XCode 专案档 ( .xcodeproj)。 更稳定多变，内建模组化及依赖管理功能，但学习与导入门槛较高。</p></ul><p><strong>不论是那一套我们的核心工作流程都会变成是：</strong></p><ol><li><p><strong>建立 XCode 专案内容设定档 (XCodeGen <code class="language-plaintext highlighter-rouge">project.yaml</code> or Tuist <code class="language-plaintext highlighter-rouge">Project.swift</code> )</strong></p><li><p>将 XCodeGen or Tuist 加入开发者与 CI/CD Server 环境中</p><li><p><strong>使用 XCodeGen or Tuist 透过设定档产生 <code class="language-plaintext highlighter-rouge">.xcodeproj</code> XCode 专案档</strong></p><li><p><code class="language-plaintext highlighter-rouge">/*.xcodeproj</code> 目录档案 加入 <code class="language-plaintext highlighter-rouge">.gitignore</code></p><li><p>调整开发者流程，切换 Branch 时需要跑 XCodeGen or Tuist 透过设定档产生 <code class="language-plaintext highlighter-rouge">.xcodeproj</code> XCode 专案档</p><li><p>调整 CI/CD 流程，需要跑 XCodeGen or Tuist 透过设定档产生 <code class="language-plaintext highlighter-rouge">.xcodeproj</code> XCode 专案档</p><li><p>完成</p></ol><p><code class="language-plaintext highlighter-rouge">.xcodeproj</code> XCode 专案档是由 XCodeGen or Tuist 基于 YAML of Swift DSL 设定档产生的，同一份设定档 &amp; 同个工具版本会产生相同结果；因此我们不需要再把 <code class="language-plaintext highlighter-rouge">.xcodeproj</code> XCode 专案档上到 Git 当中，就此可以保证以后不会再有 <code class="language-plaintext highlighter-rouge">.xcodeproj</code> 档案冲突；专案构建的改变、模组的新增改动我们都会回到定义的设定档中做调整，因为是 Yaml or Swift 写成的，我们可以很轻易地进行迭代跟 Code Review。</p><p><strong>Tuist Swift 范例：</strong> <code class="language-plaintext highlighter-rouge">Project.swift</code></p><div class="language-php highlighter-rouge"><div class="code-header"> <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="n">import</span> <span class="nc">ProjectDescription</span>

<span class="n">let</span> <span class="n">project</span> <span class="o">=</span> <span class="nf">Project</span><span class="p">(</span>
    <span class="n">name</span><span class="o">:</span> <span class="s2">"MyApp"</span><span class="p">,</span>
    <span class="n">targets</span><span class="o">:</span> <span class="p">[</span>
        <span class="nf">Target</span><span class="p">(</span>
            <span class="n">name</span><span class="o">:</span> <span class="s2">"MyApp"</span><span class="p">,</span>
            <span class="n">platform</span><span class="o">:</span> <span class="mf">.</span><span class="n">iOS</span><span class="p">,</span>
            <span class="n">product</span><span class="o">:</span> <span class="mf">.</span><span class="n">app</span><span class="p">,</span>
            <span class="n">bundleId</span><span class="o">:</span> <span class="s2">"com.example.myapp"</span><span class="p">,</span>
            <span class="n">deploymentTarget</span><span class="o">:</span> <span class="mf">.</span><span class="nf">iOS</span><span class="p">(</span><span class="n">targetVersion</span><span class="o">:</span> <span class="s2">"15.0"</span><span class="p">,</span> <span class="n">devices</span><span class="o">:</span> <span class="p">[</span><span class="mf">.</span><span class="n">iphone</span><span class="p">,</span> <span class="mf">.</span><span class="n">ipad</span><span class="p">]),</span>
            <span class="n">infoPlist</span><span class="o">:</span> <span class="mf">.</span><span class="k">default</span><span class="p">,</span>
            <span class="n">sources</span><span class="o">:</span> <span class="p">[</span><span class="s2">"Sources/**"</span><span class="p">],</span>
            <span class="n">resources</span><span class="o">:</span> <span class="p">[</span><span class="s2">"Resources/**"</span><span class="p">],</span>
            <span class="n">dependencies</span><span class="o">:</span> <span class="p">[]</span>
        <span class="p">),</span>
        <span class="nf">Target</span><span class="p">(</span>
            <span class="n">name</span><span class="o">:</span> <span class="s2">"MyAppTests"</span><span class="p">,</span>
            <span class="n">platform</span><span class="o">:</span> <span class="mf">.</span><span class="n">iOS</span><span class="p">,</span>
            <span class="n">product</span><span class="o">:</span> <span class="mf">.</span><span class="n">unitTests</span><span class="p">,</span>
            <span class="n">bundleId</span><span class="o">:</span> <span class="s2">"com.example.myapp.tests"</span><span class="p">,</span>
            <span class="n">deploymentTarget</span><span class="o">:</span> <span class="mf">.</span><span class="nf">iOS</span><span class="p">(</span><span class="n">targetVersion</span><span class="o">:</span> <span class="s2">"15.0"</span><span class="p">,</span> <span class="n">devices</span><span class="o">:</span> <span class="p">[</span><span class="mf">.</span><span class="n">iphone</span><span class="p">,</span> <span class="mf">.</span><span class="n">ipad</span><span class="p">]),</span>
            <span class="n">infoPlist</span><span class="o">:</span> <span class="mf">.</span><span class="k">default</span><span class="p">,</span>
            <span class="n">sources</span><span class="o">:</span> <span class="p">[</span><span class="s2">"Tests/**"</span><span class="p">],</span>
            <span class="n">dependencies</span><span class="o">:</span> <span class="p">[</span><span class="mf">.</span><span class="nf">target</span><span class="p">(</span><span class="n">name</span><span class="o">:</span> <span class="s2">"MyApp"</span><span class="p">)]</span>
        <span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></table></code></div></div><p><strong>XCodeGen YAML 范例：</strong> <code class="language-plaintext highlighter-rouge">project.yaml</code></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">MyApp</span>
<span class="na">options</span><span class="pi">:</span>
  <span class="na">bundleIdPrefix</span><span class="pi">:</span> <span class="s">com.example</span>
  <span class="na">deploymentTarget</span><span class="pi">:</span>
    <span class="na">iOS</span><span class="pi">:</span> <span class="s1">'</span><span class="s">15.0'</span>

<span class="na">targets</span><span class="pi">:</span>
  <span class="na">MyApp</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">application</span>
    <span class="na">platform</span><span class="pi">:</span> <span class="s">iOS</span>
    <span class="na">sources</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">Sources</span><span class="pi">]</span>
    <span class="na">resources</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">Resources</span><span class="pi">]</span>
    <span class="na">info</span><span class="pi">:</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">Info.plist</span>
      <span class="na">properties</span><span class="pi">:</span>
        <span class="na">UILaunchScreen</span><span class="pi">:</span> <span class="pi">{}</span>
    <span class="na">dependencies</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">framework</span><span class="pi">:</span> <span class="s">Vendor/SomeFramework.framework</span>
      <span class="pi">-</span> <span class="na">sdk</span><span class="pi">:</span> <span class="s">UIKit.framework</span>
      <span class="pi">-</span> <span class="na">package</span><span class="pi">:</span> <span class="s">Alamofire</span>

  <span class="na">MyAppTests</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">bundle.unit-test</span>
    <span class="na">platform</span><span class="pi">:</span> <span class="s">iOS</span>
    <span class="na">sources</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">Tests</span><span class="pi">]</span>
    <span class="na">dependencies</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">target</span><span class="pi">:</span> <span class="s">MyApp</span>
</pre></table></code></div></div><h4 id="档案目录结构"><span class="me-2">档案目录结构</span><a href="#档案目录结构" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>XCodeGen or Tuist 会依照档案实际目录、位置产生 XCode 专案档 ( .xcodeproj) 的目录结构， <strong>实际目录即为 XCode 专案档案目录</strong> 。</p><p><a href="/assets/fd719053b376/1*rYgdRpEDwRiZoMLzM0WpSQ.webp" class="popup img-link blur"><img data-src="/assets/fd719053b376/1*rYgdRpEDwRiZoMLzM0WpSQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgwIiBoZWlnaHQ9Ijc1MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>因此档案的实际目录位置就很重要，我们会直接用它来当 XCode 专案档案目录。</p><p>这在现代的 XCode / XCode 专案中，这两个目录的位置相等是再日常不过的事，但这个议题就是本文想要探究的项目。</p><h3 id="早期-xcode-使用虚拟目录"><span class="me-2">早期 Xcode 使用虚拟目录</span><a href="#早期-xcode-使用虚拟目录" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>在早期的 XCode 中在档案目录上按右键「New Group」是不会建立实际目录的，档案会被放在专案根目录下并在 <code class="language-plaintext highlighter-rouge">.xcodeproj</code> XCode 专案档做 File Reference，因此目录只有在 XCode 专案档中可见，实际没有。</p><p><a href="/assets/fd719053b376/1*LPuedcbhL4OUJuLcO0xSPw.webp" class="popup img-link blur"><img data-src="/assets/fd719053b376/1*LPuedcbhL4OUJuLcO0xSPw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTY4IiBoZWlnaHQ9Ijc0NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>随著时代演变，Apple 在 XCode 上逐渐汰换了这个诡异的设计，后来的 XCode 从加上「New Group with Folder」到预设会建实体目录、不要建要选「New Group without Folder」在到 <strong>现在 (XCode 16) 只剩「New Group」＋ 自动根据实体目录产生XCode 专案档案目录</strong> 。</p><h4 id="虚拟目录的问题"><span class="me-2">虚拟目录的问题</span><a href="#虚拟目录的问题" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p><strong>无法使用 XCodeGen or Tuist，因为都需要实体目录位置产生 XCode 专案档 ( .xcodeproj)。</strong></p><li><p>Code Review 困难：在 Git Web GUI 上看不到目录结构，整个档案都是摊平的。</p><li><p>DevOps, 第三方工具整合困难：例如 Sentry, Github 可以依照目录派发警告或 Auto-Assigner，没有目录只有档案无法设定。</p><li><p>专案目录结构极为复杂，一大堆档案摊平在根目录。</p></ul><blockquote><p><em>对于一个年代久远并且没有在早期意识到虚拟目录问题的专案，虚拟目录的档案有 3,000+ 个，手动对照搬移的话搬完应该就辞职去卖状元糕了，这真的可以称得上是「 <a href="https://x.com/1star_therapist" target="_blank"><strong>Apple 开发者职业伤害</strong></a> <strong>😔</strong> 」。</em></p></blockquote><h3 id="xcode-专案虚拟目录-转-实体目录"><span class="me-2">Xcode 专案虚拟目录 转 实体目录</span><a href="#xcode-专案虚拟目录-转-实体目录" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>基于上述种种原因，我们急迫的需要把 XCode 专案的虚拟目录转成实体目录，否则后续的专案现代化、更高效的开发流程都无法推进。</p><h4 id="-xcode-16-convert-to-folder选项"><span class="me-2">❌ Xcode 16 「Convert to folder」选项</span><a href="#-xcode-16-convert-to-folder选项" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/fd719053b376/1*FlhWWH5Qz4aLfB4hYVUgNA.webp" class="popup img-link blur"><img data-src="/assets/fd719053b376/1*FlhWWH5Qz4aLfB4hYVUgNA.webp" alt="XCode 16" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyODUiIGhlaWdodD0iNTYyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>XCode 16</p><p>去年 XCode 16 刚出时有关注到这个选单新选项，本来的期待是它可以自动帮我们把虚拟目录档案转换成实体目录。</p><p>但实际并不然，他需要你先把档案建好目录、放到对应的实体位置，点击「Convert to folder」后会帮你改成新的 XCode Project 目录设定方式「 <code class="language-plaintext highlighter-rouge">PBXFileSystemSynchronizedRootGroup</code> 」，说实话 <strong>对转换没有任何用，这比较是转换后可以升级成新的目录设定方式。</strong></p><p>目录没有建立、档案没有放好，点「Convert to folder」就会报以下错误：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>Missing Associated Folder
Each group must have an associated folder. The following groups are not associated with a folder:
• xxxx
Use the file inspector to associate a folder with each group, or delete the groups after moving their content to another group.
</pre></table></code></div></div><h4 id="-开源专案-venmo--synx"><span class="me-2">🫥 开源专案 <a href="https://github.com/venmo" target="_blank">venmo</a> / <a href="https://github.com/venmo/synx" target="_blank">synx</a></span><a href="#-开源专案-venmo--synx" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://github.com/venmo/synx" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/21a6a82c910b246448d4f8c4a75a2213626f31d9743d5600022620f8f2318f18/venmo/synx" alt="" loading="lazy"></a></p><p>在 Github 搜寻许久只找到这个使用 Ruby 撰写的虚拟转实体目录开源专案工具，实际跑下来是有效果的但因年久失修 (~= 10 年未更新) 很多档案还是需要手动对应搬移，无法完全转换，因此放弃。</p><blockquote><p><em>不过还是很感谢这个开源专案的启发，我才想说可以自己开发转换工具。</em></p></blockquote><h4 id="-我的开源专案-zhgchgli--xcfolder"><span class="me-2">✅ 我的开源专案 <a href="https://github.com/ZhgChgLi" target="_blank">ZhgChgLi</a> / <a href="https://github.com/ZhgChgLi/XCFolder" target="_blank">XCFolder</a></span><a href="#-我的开源专案-zhgchgli--xcfolder" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://github.com/ZhgChgLi/XCFolder" target="_blank" class="img-link shimmer" ><img src="https://repository-images.githubusercontent.com/941421589/27855f06-b938-4458-a20f-3e317b4283b7" alt="" loading="lazy"></a></p><p>使用纯 Swift 开发的 Command Line Tools，基于 <a href="https://github.com/tuist/XcodeProj" target="_blank">XcodeProj</a> 解析 <code class="language-plaintext highlighter-rouge">.xcodeproj</code> XCode 专案档，读取所有档案取得所属目录、解析目录将虚拟目录转换成实体目录，将档案搬移到正确位置、最后再调整 <code class="language-plaintext highlighter-rouge">.xcodeproj</code> XCode 专案档目录设定，即可完成转换。</p><p><a href="/assets/fd719053b376/1*eFNN12WDaAk6mr49OzmC_g.webp" class="popup img-link blur"><img data-src="/assets/fd719053b376/1*eFNN12WDaAk6mr49OzmC_g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjQxNSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><strong>使用方式</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>git clone https://github.com/ZhgChgLi/XCFolder.git
<span class="nb">cd</span> ./XCFolder
swift run XCFolder YOUR_XCODEPROJ_FILE.xcodeproj ./Configuration.yaml
</pre></table></code></div></div><p><strong>For Example:</strong></p><div class="language-objectivec highlighter-rouge"><div class="code-header"> <span data-label-text="Objective-C"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">swift</span> <span class="n">run</span> <span class="n">XCFolder</span> <span class="p">.</span><span class="o">/</span><span class="n">TestProject</span><span class="o">/</span><span class="n">DCDeviceTest</span><span class="p">.</span><span class="n">xcodeproj</span> <span class="p">.</span><span class="o">/</span><span class="n">Configuration</span><span class="p">.</span><span class="n">yaml</span>
</pre></table></code></div></div><p><strong>CI/CD 模式 (</strong> <code class="language-plaintext highlighter-rouge">Non Interactive Mode</code> <strong>)：</strong></p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">swift</span> <span class="n">run</span> <span class="kt">XCFolder</span> <span class="kt">YOUR_XCODEPROJ_FILE</span><span class="o">.</span><span class="n">xcodeproj</span> <span class="o">./</span><span class="kt">Configuration</span><span class="o">.</span><span class="n">yaml</span> <span class="o">--</span><span class="k">is</span><span class="o">-</span><span class="n">non</span><span class="o">-</span><span class="n">interactive</span><span class="o">-</span><span class="n">mode</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">Configuration.yaml</code> 可以设定想要的执行参数：</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="c"># 忽略的目录，不会解析转换</span>
ignorePaths:
- <span class="s2">"Pods"</span>
- <span class="s2">"Frameworks"</span>
- <span class="s2">"Products"</span>

<span class="c"># 忽略的档案类型，不会被转换搬移</span>
ignoreFileTypes:
- <span class="s2">"wrapper.framework"</span> <span class="c"># Frameworks</span>
- <span class="s2">"wrapper.pb-project"</span> <span class="c"># Xcode project files</span>
<span class="c">#- "wrapper.application" # Applications</span>
<span class="c">#- "wrapper.cfbundle" # Bundles</span>
<span class="c">#- "wrapper.plug-in" # Plug-ins</span>
<span class="c">#- "wrapper.xpc-service" # XPC services</span>
<span class="c">#- "wrapper.xctest" # XCTest bundles</span>
<span class="c">#- "wrapper.app-extension" # App extensions</span>

<span class="c"># 只建立目录、搬移档案，不调整 .xcodeproj XCode 专案档目录设定</span>
moveFileOnly: <span class="nb">false</span>

<span class="c"># 优先使用 git mv 指令搬移档案</span>
gitMove: <span class="nb">true</span>
</pre></table></code></div></div><p>⚠️ <strong>执行前请注意：</strong></p><ul><li><p>请确保 Git 无任何未 Commit 改变，因为怕脚本有误污染你的专案目录 (脚本执行会检查，若有未 Commit 改变会抛错误 <code class="language-plaintext highlighter-rouge">❌ Error: There are uncommitted changes in the repository</code> )</p><li><p>预设优先使用 <code class="language-plaintext highlighter-rouge">git mv</code> 指令搬移档案以确保 git file log 纪录完整，如果搬移失败或是非 Git 专案才会使用 FileSystem Move 搬移档案。</p></ul><p><strong>等待执行完成即可：</strong></p><p><a href="/assets/fd719053b376/1*IL_-Ht1SH5ZCYogZHXULbQ.webp" class="popup img-link blur"><img data-src="/assets/fd719053b376/1*IL_-Ht1SH5ZCYogZHXULbQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MzgiIGhlaWdodD0iNDM5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/fd719053b376/1*8JNbDbR7pvZLhcoQLU_B6A.webp" class="popup img-link blur"><img data-src="/assets/fd719053b376/1*8JNbDbR7pvZLhcoQLU_B6A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iNDgzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>⚠️ <strong>执行后请注意：</strong></p><ul><li><p>请检查专案目录是否有遗漏(红色)的档案，数量少可以手动修正，数量多请确认 Configuration.yaml 里的 ignorePaths, ignoreFileTypes 设定是否正确，或是 <a href="https://github.com/ZhgChgLi/XCFolder/issues" target="_blank"><strong>建立一个 Issue</strong></a> 让我知道。</p><li><p>检查 Build Setting 里的相关路径 e.g. <code class="language-plaintext highlighter-rouge">LIBRARY_SEARCH_PATHS</code> 是否需要手动更动路径</p><li><p>建议 Clean &amp; Build 看看</p><li><p><strong>如果懒得管现在的 <code class="language-plaintext highlighter-rouge">.xcodeproj</code> XCode 专案档，也可以直接开始使用 XCodeGen or Tuist 直接重新产生目录档案</strong></p></ul><p><strong>修改脚本：</strong></p><p>直接点击 <code class="language-plaintext highlighter-rouge">./Package.swift</code> 就能开启专案调整脚本内容。</p><h4 id="其他开发随记"><span class="me-2">其他开发随记</span><a href="#其他开发随记" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><p>得力于 <a href="https://github.com/tuist/XcodeProj" target="_blank">XcodeProj</a> 我们可以很轻易的使用 Swift 物件方式存取 <code class="language-plaintext highlighter-rouge">.xcodeproj</code> <strong>XCode 专案档案内容</strong></p><li><p>同样使用 Clean Architecture 架构开发</p><li><p>PBXGroup 设定中若没有 path 只有 name 则为虚拟目录，反之则为实体目录</p><li><p>XCode 16 新的目录设定 <code class="language-plaintext highlighter-rouge">PBXFileSystemSynchronizedRootGroup</code> 只需宣告主目录就会自动从实体目录解析，不需要再把每个目录跟档案都宣告在 <code class="language-plaintext highlighter-rouge">.xcodeproj</code> XCode 专案档案内</p><li><p>直接用 SPM (Package.swift) 方式开发 Command line tool 真的很方便！</p></ul><p>有任何问题及指教欢迎 <a href="https://www.zhgchg.li/contact" target="_blank">与我联络</a> 。</p><hr /><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=🍺&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a><br /></p><blockquote class="prompt-info"><p>本文首次发表于 Medium (<a href="https://medium.com/p/fd719053b376" target="_blank"><strong>点击查看原始版本</strong></a>)，由 <a href="/posts/tools/medium-to-jekyll/" target="_blank">ZMediumToMarkdown</a> 提供自动转换与同步技术。</p></blockquote><blockquote class="prompt-info"><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/zh-cn/zmediumtomarkdown/2025-03-02-fd719053b376.md" target="_blank">Improve this page on Github.</a></p></blockquote><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1K+ Followers</span></a></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/simplified-chinese/" class="post-tag no-text-decoration" >simplified-chinese</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/xcode/" class="post-tag no-text-decoration" >xcode</a> <a href="/tags/swift/" class="post-tag no-text-decoration" >swift</a> <a href="/tags/tuist/" class="post-tag no-text-decoration" >tuist</a> <a href="/tags/xcodegen/" class="post-tag no-text-decoration" >xcodegen</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=XCode%20%E8%99%9A%E6%8B%9F%E7%9B%AE%E5%BD%95%E8%BD%AC%E5%AE%9E%E4%BD%93%E7%9B%AE%E5%BD%95%EF%BD%9C%E8%A7%A3%E5%86%B3%E4%B8%93%E6%A1%88%E7%BB%93%E6%9E%84%E6%B7%B7%E4%B9%B1%E4%B8%8E%20XcodeGen%E3%80%81Tuist%20%E6%95%B4%E5%90%88%E7%97%9B%E7%82%B9%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fzh-cn%2Fxcode-%25E8%2599%259A%25E6%258B%259F%25E7%259B%25AE%25E5%25BD%2595%25E8%25BD%25AC%25E5%25AE%259E%25E4%25BD%2593%25E7%259B%25AE%25E5%25BD%2595-%25E8%25A7%25A3%25E5%2586%25B3%25E4%25B8%2593%25E6%25A1%2588%25E7%25BB%2593%25E6%259E%2584%25E6%25B7%25B7%25E4%25B9%25B1%25E4%25B8%258E-xcodegen-tuist-%25E6%2595%25B4%25E5%2590%2588%25E7%2597%259B%25E7%2582%25B9-fd719053b376%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=XCode%20%E8%99%9A%E6%8B%9F%E7%9B%AE%E5%BD%95%E8%BD%AC%E5%AE%9E%E4%BD%93%E7%9B%AE%E5%BD%95%EF%BD%9C%E8%A7%A3%E5%86%B3%E4%B8%93%E6%A1%88%E7%BB%93%E6%9E%84%E6%B7%B7%E4%B9%B1%E4%B8%8E%20XcodeGen%E3%80%81Tuist%20%E6%95%B4%E5%90%88%E7%97%9B%E7%82%B9%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fzh-cn%2Fxcode-%25E8%2599%259A%25E6%258B%259F%25E7%259B%25AE%25E5%25BD%2595%25E8%25BD%25AC%25E5%25AE%259E%25E4%25BD%2593%25E7%259B%25AE%25E5%25BD%2595-%25E8%25A7%25A3%25E5%2586%25B3%25E4%25B8%2593%25E6%25A1%2588%25E7%25BB%2593%25E6%259E%2584%25E6%25B7%25B7%25E4%25B9%25B1%25E4%25B8%258E-xcodegen-tuist-%25E6%2595%25B4%25E5%2590%2588%25E7%2597%259B%25E7%2582%25B9-fd719053b376%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fzh-cn%2Fxcode-%25E8%2599%259A%25E6%258B%259F%25E7%259B%25AE%25E5%25BD%2595%25E8%25BD%25AC%25E5%25AE%259E%25E4%25BD%2593%25E7%259B%25AE%25E5%25BD%2595-%25E8%25A7%25A3%25E5%2586%25B3%25E4%25B8%2593%25E6%25A1%2588%25E7%25BB%2593%25E6%259E%2584%25E6%25B7%25B7%25E4%25B9%25B1%25E4%25B8%258E-xcodegen-tuist-%25E6%2595%25B4%25E5%2590%2588%25E7%2597%259B%25E7%2582%25B9-fd719053b376%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/en/apple-watch-stainless-steel-milanese-loop-unboxing-premium-44mm-graphite-band-review-c0f99f987d9c/">Apple Watch Stainless Steel Milanese Loop Unboxing｜Premium 44mm Graphite Band Review</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/zh-cn/apple-watch-%E7%B1%B3%E5%85%B0%E8%A1%A8%E5%B8%A6%E5%BC%80%E7%AE%B1-%E5%8E%9F%E5%8E%82%E4%B8%8D%E9%94%88%E9%92%A2%E7%9F%B3%E5%A2%A8%E8%89%B2%E4%BC%98%E7%BC%BA%E7%82%B9%E5%85%A8%E8%A7%A3%E6%9E%90-c0f99f987d9c/">Apple Watch 原厂不锈钢米兰表带开箱</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/apple-watch-%E7%B1%B3%E8%98%AD%E9%8C%B6%E5%B8%B6%E9%96%8B%E7%AE%B1-%E5%8E%9F%E5%BB%A0%E4%B8%8D%E9%8F%BD%E9%8B%BC%E7%9F%B3%E5%A2%A8%E8%89%B2%E5%84%AA%E7%BC%BA%E9%BB%9E%E5%85%A8%E8%A7%A3%E6%9E%90-c0f99f987d9c/">Apple Watch 原廠不鏽鋼米蘭錶帶開箱</a><li class="text-truncate lh-lg"> <a href="/posts/travel-journals/en/busan-travel-guide-8-day-itinerary-with-visit-busan-pass-for-seamless-exploration-8ace34a1a3d8/">Busan Travel Guide｜8-Day Itinerary with VISIT BUSAN PASS for Seamless Exploration</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/zh-cn/%E9%87%9C%E5%B1%B1%E8%87%AA%E7%94%B1%E8%A1%8C%E6%94%BB%E7%95%A5-8%E5%A4%A97%E5%A4%9C%E5%BF%85%E5%8E%BB%E6%99%AF%E7%82%B9-%E7%BE%8E%E9%A3%9F%E4%B8%8E%E4%BA%A4%E9%80%9A%E5%85%A8%E8%A7%A3%E6%9E%90-%E9%87%9C%E5%B1%B1%E9%80%9A%E8%A1%8C%E8%AF%81%E7%9C%81%E9%92%B1%E7%A7%98%E8%AF%80-8ace34a1a3d8/">游记 2025 韩国釜山 8 天 7 夜自由行</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">章節 (Chapters)🔖</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/xcode-%E8%99%9B%E6%93%AC%E7%9B%AE%E9%8C%84%E8%BD%89%E5%AF%A6%E9%AB%94%E7%9B%AE%E9%8C%84-%E8%A7%A3%E6%B1%BA%E5%B0%88%E6%A1%88%E7%B5%90%E6%A7%8B%E6%B7%B7%E4%BA%82%E8%88%87-xcodegen-tuist-%E6%95%B4%E5%90%88%E7%97%9B%E9%BB%9E-fd719053b376/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1740918091" data-df="ll" > Mar 2, 2025 </time><h4 class="pt-0 my-2">XCode 虛擬目錄萬年問題探究與我的開源工具解決方案</h4><div class="text-muted"><p>Apple 開發者職業傷害之 Xcode 早期使用虛擬目錄，導致目錄結構混亂且難以整合 XcodeGen, Tuist 等現代工具。</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/en/xcode-virtual-directory-issues-streamline-your-project-structure-with-open-source-tools-fd719053b376/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1740918091" data-df="ll" > Mar 2, 2025 </time><h4 class="pt-0 my-2">Xcode Virtual Directory Issues: Streamline Your Project Structure with Open Source Tools</h4><div class="text-muted"><p>Developers facing Xcode virtual directory chaos can simplify integration with modern tools like XcodeGen and Tuist using a proven open source solution that restores project clarity and boosts workf...</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/zh-cn/xcode-%E5%8D%87%E7%BA%A7%E5%BF%85%E6%B5%8B-build-settings-%E4%BC%98%E5%8C%96%E7%AD%89%E7%BA%A7%E8%B0%83%E6%95%B4%E5%BF%AB%E9%80%9F%E5%AE%9A%E4%BD%8D-release-%E7%89%88%E5%B9%BD%E7%81%B5%E9%97%AA%E9%80%80%E9%97%AE%E9%A2%98-ios-%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E6%8A%80%E5%B7%A7-7508328d8b8d/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1744383031" data-df="ll" > Apr 11, 2025 </time><h4 class="pt-0 my-2">通灵笔记 XCode 升级时最好测一下的事…</h4><div class="text-muted"><p>遇到仅在 Build Configuration Release (正式版、线上版)才会出现的幽灵闪退或程式逻辑问题，但是 Debug 安然无恙。</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/en/xcode-virtual-directory-issues-streamline-your-project-structure-with-open-source-tools-fd719053b376/" class="btn btn-outline-primary" aria-label="Older" ><p>Xcode Virtual Directory Issues: Streamline Your Project Structure with Open Source Tools</p></a> <a href="/posts/exploring-the-long-standing-issues-of-xcode-virtual-directories-and-my-open-source-tool-solution-fd719053b376-en/" class="btn btn-outline-primary" aria-label="Newer" ><p>Exploring the Long-Standing Issues of XCode Virtual Directories and My Open Source Tool Solution</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span> <a href="/">中文</a>|<a href="/tags/simplified-chinese">简中</a>|<a href="/tags/english/">English</a></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a> <br/></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
