<!doctype html><html lang="zh-tw" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="GitHub Actionsï½œSelf-hosted Runner è©³è§£èˆ‡å¯¦æˆ°æ¡ˆä¾‹ï½œCI/CD è‡ªå‹•åŒ–å·¥ä½œæµç¨‹å»ºç½®" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="zh_tw" /><meta name="description" content="é‡å°é–‹ç™¼åœ˜éšŠè‡ªå‹•åŒ–éœ€æ±‚ï¼Œè§£æ GitHub Actions èˆ‡ Self-hosted Runner æ¶æ§‹èˆ‡è¨­å®šï¼Œä¸¦é€éä¸‰å¤§å¯¦æˆ°æ¡ˆä¾‹æ•™ä½ å¿«é€Ÿå»ºç«‹è‡ªå‹•æ¨™è¨˜ PRã€æŒ‡æ´¾è² è²¬äººåŠæ¯æ—¥ PR çµ±è¨ˆé€šçŸ¥ï¼Œæå‡ CI/CD åŸ·è¡Œæ•ˆç‡èˆ‡æˆæœ¬å„ªåŒ–ã€‚" /><meta property="og:description" content="é‡å°é–‹ç™¼åœ˜éšŠè‡ªå‹•åŒ–éœ€æ±‚ï¼Œè§£æ GitHub Actions èˆ‡ Self-hosted Runner æ¶æ§‹èˆ‡è¨­å®šï¼Œä¸¦é€éä¸‰å¤§å¯¦æˆ°æ¡ˆä¾‹æ•™ä½ å¿«é€Ÿå»ºç«‹è‡ªå‹•æ¨™è¨˜ PRã€æŒ‡æ´¾è² è²¬äººåŠæ¯æ—¥ PR çµ±è¨ˆé€šçŸ¥ï¼Œæå‡ CI/CD åŸ·è¡Œæ•ˆç‡èˆ‡æˆæœ¬å„ªåŒ–ã€‚" /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-07-02T20:22:32+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" /><meta property="twitter:title" content="GitHub Actionsï½œSelf-hosted Runner è©³è§£èˆ‡å¯¦æˆ°æ¡ˆä¾‹ï½œCI/CD è‡ªå‹•åŒ–å·¥ä½œæµç¨‹å»ºç½®" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://www.linkedin.com/in/zhgchgli"},"dateModified":"2025-07-12T22:49:01+08:00","datePublished":"2025-07-02T20:22:32+08:00","description":"é‡å°é–‹ç™¼åœ˜éšŠè‡ªå‹•åŒ–éœ€æ±‚ï¼Œè§£æ GitHub Actions èˆ‡ Self-hosted Runner æ¶æ§‹èˆ‡è¨­å®šï¼Œä¸¦é€éä¸‰å¤§å¯¦æˆ°æ¡ˆä¾‹æ•™ä½ å¿«é€Ÿå»ºç«‹è‡ªå‹•æ¨™è¨˜ PRã€æŒ‡æ´¾è² è²¬äººåŠæ¯æ—¥ PR çµ±è¨ˆé€šçŸ¥ï¼Œæå‡ CI/CD åŸ·è¡Œæ•ˆç‡èˆ‡æˆæœ¬å„ªåŒ–ã€‚","headline":"GitHub Actionsï½œSelf-hosted Runner è©³è§£èˆ‡å¯¦æˆ°æ¡ˆä¾‹ï½œCI/CD è‡ªå‹•åŒ–å·¥ä½œæµç¨‹å»ºç½®","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+","url":"https://zhgchg.li/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"},"url":"https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"}</script><title>GitHub Actionsï½œSelf-hosted Runner è©³è§£èˆ‡å¯¦æˆ°æ¡ˆä¾‹ï½œCI/CD è‡ªå‹•åŒ–å·¥ä½œæµç¨‹å»ºç½® | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/zh.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=false" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script><link rel="alternate" hreflang="en" href="https://en.zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-setup-and-usage-guide-for-efficient-ci-cd-404bd5c70040/"><link rel="alternate" hreflang="ja" href="https://jp.zhgchg.li/posts/zrealm%E3%81%AE%E9%96%8B%E7%99%BA/github-actions-self-hosted-runner-ci-cd-%E5%AE%9F%E8%B7%B5%E3%82%AC%E3%82%A4%E3%83%89%E3%81%A7%E8%87%AA%E5%8B%95%E5%8C%96%E5%8A%B9%E7%8E%87%E6%9C%80%E5%A4%A7%E5%8C%96-404bd5c70040/"><link rel="alternate" hreflang="zh-Hans" href="https://zh-hans.zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"><link rel="alternate" hreflang="zh-Hant" href="https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"><link rel="alternate" hreflang="x-default" href="https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"FAQPage","mainEntity":[{"@type":"Question","name":"å¦‚ä½•é€é GitHub Actions èˆ‡ Self-hosted Runner å»ºç«‹å…è²»ä¸”é«˜æ•ˆçš„ CI/CD åŸ·è¡Œç’°å¢ƒï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"åˆ©ç”¨ Self-hosted Runner å°‡è‡ªæœ‰æ©Ÿå™¨è¨­å®šç‚º Runnerï¼Œå¯ç„¡é™æ¬¡æ•¸åŸ·è¡Œä»»å‹™ä¸”ç„¡é¡å¤–è²»ç”¨ï¼Œä¸¦æ­é… GitHub Actions Workflow é€éè‡ªè¨‚ Runner Label æŒ‡æ´¾ä»»å‹™ï¼Œé”æˆé«˜æ•ˆä¸”æˆæœ¬å„ªåŒ–çš„ CI/CD åŸ·è¡Œç’°å¢ƒã€‚"}},{"@type":"Question","name":"GitHub Actions ä¸­å¦‚ä½•å®‰å…¨ç®¡ç†æ•æ„Ÿè³‡è¨Šä¸¦åœ¨ Workflow ä¸­ä½¿ç”¨ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"å°‡æ•æ„Ÿè³‡è¨Šå¦‚ API Keyã€Token ä»¥ç´”æ–‡å­—å½¢å¼å­˜æ”¾æ–¼ GitHub Repo çš„ Actions Secrets ä¸­ï¼ŒSecrets å…§å®¹ä¸æœƒåœ¨åŸ·è¡Œç´€éŒ„ä¸­é¡¯ç¤ºä¸”ä¸å¯ç·¨è¼¯ï¼Œåªèƒ½è¦†è“‹ï¼ŒWorkflow ä¸­é€éç’°å¢ƒè®Šæ•¸å¼•ç”¨ï¼Œç¢ºä¿å®‰å…¨ä¸å¤–æ´©ã€‚"}},{"@type":"Question","name":"GitHub Actions Workflow å¦‚ä½•å¯¦ç¾å¤šä»»å‹™ä¸¦è¡Œä¸”ä¿æŒæµç¨‹æ¸…æ™°ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"Workflow å…§å®šç¾©å¤šå€‹ Jobsï¼ŒJobs é è¨­ä¸¦è¡ŒåŸ·è¡Œï¼Œé€é needs æŒ‡å®šä¾è³´é—œä¿‚å¯æ§åˆ¶é †åºï¼Œä¸¦ä»¥ Step ç‚ºæœ€å°åŸ·è¡Œå–®ä½ä¸²è¡ŒåŸ·è¡Œï¼Œç¢ºä¿ä»»å‹™ç¨ç«‹ä¸”æµç¨‹æ˜ç¢ºã€‚"}},{"@type":"Question","name":"å¦‚ä½•åœ¨ GitHub Actions ä¸­å¾©ç”¨è·¨ Repo çš„ Workflow ä»¥æå‡ç¶­è­·æ•ˆç‡ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"å°‡ Workflow è¨­å®šç‚º workflow_callï¼Œä¸¦åœ¨å…¶ä»– Repo Workflow ä¸­ä»¥ uses å¼•ç”¨è©² Workflowï¼Œæ­é… secrets å‚³éæ¬Šé™ï¼Œå¯¦ç¾è·¨ Repo Workflow å…±ç”¨ï¼Œæ¸›å°‘é‡è¤‡ç¶­è­·ä¸¦çµ±ä¸€æµç¨‹ç®¡ç†ã€‚"}},{"@type":"Question","name":"GitHub Actions ä¸­å¦‚ä½•åˆ©ç”¨æ’ç¨‹è‡ªå‹•åŒ–ç®¡ç†é•·æœŸé–‹å•Ÿçš„ Pull Requestï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"ä½¿ç”¨ on: schedule è§¸ç™¼å®šæ™‚ Workflowï¼Œæ­é… GitHub Script å–å¾—æ‰€æœ‰é–‹å•Ÿä¸­çš„ PRï¼Œçµ±è¨ˆé–‹å•Ÿå¤©æ•¸ï¼Œè‡ªå‹•ç™¼é€å ±å‘Šè‡³ Slack ä¸¦é—œé–‰è¶…éè¨­å®šå¤©æ•¸çš„è€èˆŠ PRï¼Œå¯¦ç¾ PR ç®¡ç†è‡ªå‹•åŒ–ã€‚"}}]} </script><link rel="stylesheet" href="/assets/css/post-toc.css"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0">An iOS, web, and automation developer from Taiwan ğŸ‡¹ğŸ‡¼ who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item" style="padding:0 15px 0 15px;"> <a href="https://medium.com/@zhgchgli" class="nav-link" target="_blank" style="background:#EDF4FF;color:#0A84FF;font-size:15px;transition:background-color .2s,color .2s;" onmouseover="this.style.backgroundColor='#0A84FF';this.style.color='#ffffff';" onmouseout="this.style.backgroundColor='#EDF4FF';this.style.color='#0A84FF';"> <i class="fa-brands fa-medium"></i> <span><span style="font-size: 18px; font-weight: boild;">Follow Me on Medium!</span><br/><u>1,053+</u> Followers</span> </a><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>é¦–é </span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>åˆ†é¡</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>æ¨™ç±¤</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>æ­¸æª”</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>é—œæ–¼æˆ‘</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>è¯çµ¡æˆ‘</span> </a><li class="nav-item"><div aria-label="Language switch" style="display:flex;align-items:center;justify-content:center;gap:5px;"> <a href="https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #666;background:#111;color:#fff;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> æ­£é«”ä¸­æ–‡ </a> <span style="width:1px;height:18px;background:rgba(0,0,0,.12);"></span> <a href="https://zh-hans.zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #ccc;background:#f3f3f3;color:#555;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> ç®€ä½“ä¸­æ–‡ </a></div><div aria-label="Language switch" style="display:flex;align-items:center;justify-content:center;gap:5px;margin-top:5px;"> <a href="https://en.zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-setup-and-usage-guide-for-efficient-ci-cd-404bd5c70040/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #ccc;background:#f3f3f3;color:#555;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> English </a> <span style="width:1px;height:18px;background:rgba(0,0,0,.12);"></span> <a href="https://jp.zhgchg.li/posts/zrealm%E3%81%AE%E9%96%8B%E7%99%BA/github-actions-self-hosted-runner-ci-cd-%E5%AE%9F%E8%B7%B5%E3%82%AC%E3%82%A4%E3%83%89%E3%81%A7%E8%87%AA%E5%8B%95%E5%8C%96%E5%8A%B9%E7%8E%87%E6%9C%80%E5%A4%A7%E5%8C%96-404bd5c70040/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #ccc;background:#f3f3f3;color:#555;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> æ—¥æœ¬èª </a></div></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">é¦–é </a> </span> <span>GitHub Actionsï½œSelf-hosted Runner è©³è§£èˆ‡å¯¦æˆ°æ¡ˆä¾‹ï½œCI/CD è‡ªå‹•åŒ–å·¥ä½œæµç¨‹å»ºç½®</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> æ–‡ç« </div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="æœå°‹..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">å–æ¶ˆ</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>GitHub Actionsï½œSelf-hosted Runner è©³è§£èˆ‡å¯¦æˆ°æ¡ˆä¾‹ï½œCI/CD è‡ªå‹•åŒ–å·¥ä½œæµç¨‹å»ºç½®</h1><p class="post-desc fw-light mb-4">é‡å°é–‹ç™¼åœ˜éšŠè‡ªå‹•åŒ–éœ€æ±‚ï¼Œè§£æ GitHub Actions èˆ‡ Self-hosted Runner æ¶æ§‹èˆ‡è¨­å®šï¼Œä¸¦é€éä¸‰å¤§å¯¦æˆ°æ¡ˆä¾‹æ•™ä½ å¿«é€Ÿå»ºç«‹è‡ªå‹•æ¨™è¨˜ PRã€æŒ‡æ´¾è² è²¬äººåŠæ¯æ—¥ PR çµ±è¨ˆé€šçŸ¥ï¼Œæå‡ CI/CD åŸ·è¡Œæ•ˆç‡èˆ‡æˆæœ¬å„ªåŒ–ã€‚</p><div class="post-meta text-muted"> <span> ç™¼ä½ˆæ–¼ <time data-ts="1751458952" data-df="YYYY å¹´ M æœˆ D æ—¥" data-bs-toggle="tooltip" data-bs-placement="bottom" > 2025 å¹´ 07 æœˆ 02 æ—¥ </time> </span> <span> æ›´æ–°æ–¼ <time data-ts="1752331741" data-df="YYYY å¹´ M æœˆ D æ—¥" data-bs-toggle="tooltip" data-bs-placement="bottom" > 2025 å¹´ 07 æœˆ 12 æ—¥ </time> </span><div class="mt-3 mb-3"> <a href="/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" class="popup img-link preview-img blur"><img data-src="/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></div><div class="d-flex justify-content-between"> <span style="display: inline-flex; align-items: center; gap: 4px;"> ä½œè€… <em> <a href="https://www.linkedin.com/in/zhgchgli">ZhgChgLi</a> </em> | <em><a href="https://www.linkedin.com/in/zhgchgli" target="_blank">Senior Software Engineer</a></em><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" style="display: block; "><path fill="#007bff" d="M271.2 56C265.1 49.8 256.2 47.3 247.8 49.6C239.4 51.9 232.9 58.4 230.8 66.8L215.5 127C214.4 131.4 209.9 134 205.6 132.7L145.8 115.9C137.4 113.5 128.4 115.9 122.3 122C116.2 128.1 113.8 137.1 116.2 145.5L133.1 205.3C134.3 209.6 131.7 214.1 127.4 215.2L67.1 230.5C58.7 232.6 52.1 239.2 49.8 247.6C47.5 256 50 264.9 56.2 271L100.7 314.3C103.9 317.4 103.9 322.6 100.7 325.8L56.3 369.1C50.1 375.2 47.6 384.1 49.9 392.5C52.2 400.9 58.8 407.4 67.2 409.6L127.4 424.9C131.8 426 134.4 430.5 133.1 434.8L116.2 494.5C113.8 502.9 116.2 511.9 122.3 518C128.4 524.1 137.4 526.5 145.8 524.1L205.6 507.2C209.9 506 214.4 508.6 215.5 512.9L230.8 573.1C232.9 581.5 239.5 588.1 247.9 590.4C256.3 592.7 265.2 590.2 271.3 584L314.6 539.5C317.7 536.3 322.9 536.3 326.1 539.5L369.3 584C375.4 590.2 384.3 592.7 392.7 590.4C401.1 588.1 407.6 581.5 409.8 573.1L425.1 513C426.2 508.6 430.7 506 435 507.3L494.8 524.2C503.2 526.6 512.2 524.2 518.3 518.1C524.4 512 526.8 503 524.4 494.6L507.5 434.8C506.3 430.5 508.9 426 513.2 424.9L573.4 409.6C581.8 407.5 588.4 400.9 590.7 392.5C593 384.1 590.5 375.1 584.3 369.1L539.8 325.8C536.6 322.7 536.6 317.5 539.8 314.3L584.3 271C590.5 264.9 593 256 590.7 247.6C588.4 239.2 581.8 232.7 573.4 230.5L513.2 215.2C508.8 214.1 506.2 209.6 507.5 205.3L524.4 145.5C526.8 137.1 524.4 128.1 518.3 122C512.2 115.9 503.2 113.5 494.8 115.9L435 132.8C430.7 134 426.2 131.4 425.1 127.1L409.8 66.8C407.7 58.4 401.1 51.8 392.7 49.5C384.3 47.2 375.4 49.7 369.3 55.9L326 100.5C322.9 103.7 317.7 103.7 314.5 100.5L271.2 56z"/><path d="M250 330 l60 60 100 -140" stroke="#ffffff" stroke-width="40" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="11081 å­—" > <em>61 åˆ†é˜</em>é–±è®€</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">GitHub Actionsï½œSelf-hosted Runner è©³è§£èˆ‡å¯¦æˆ°æ¡ˆä¾‹ï½œCI/CD è‡ªå‹•åŒ–å·¥ä½œæµç¨‹å»ºç½®</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">ç« ç¯€ç›®éŒ„ ğŸ”–</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">GitHub Actionsï½œSelf-hosted Runner è©³è§£èˆ‡å¯¦æˆ°æ¡ˆä¾‹ï½œCI/CD è‡ªå‹•åŒ–å·¥ä½œæµç¨‹å»ºç½®</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><div aria-label="Language switch" style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;"><div aria-label="Views" style="display:inline-flex;align-items:center;gap:6px;font-size:.85rem;"> <span style="display:inline-flex;align-items:center;justify-content:center;"> ç€è¦½æ¬¡æ•¸: <span style="margin-left:4px;" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-original-title="æœ€å¾Œæ›´æ–°æ™‚é–“: 2026-01-15 11:04:55 +08:00"><u>2,750+</u></span> </span></div><div style="display:flex;align-items:center;justify-content:flex-end;gap:8px;flex-wrap:wrap;"> <a href="https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #dc3545;background:#dc3545;color:#fff !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> æ­£é«”ä¸­æ–‡ </a> <a href="https://zh-hans.zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(220,53,69,.35);background:rgba(220,53,69,.08);color:#dc3545 !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> ç®€ä½“ä¸­æ–‡ </a> <a href="https://en.zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-setup-and-usage-guide-for-efficient-ci-cd-404bd5c70040/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(220,53,69,.35);background:rgba(220,53,69,.08);color:#dc3545 !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> English </a> <a href="https://jp.zhgchg.li/posts/zrealm%E3%81%AE%E9%96%8B%E7%99%BA/github-actions-self-hosted-runner-ci-cd-%E5%AE%9F%E8%B7%B5%E3%82%AC%E3%82%A4%E3%83%89%E3%81%A7%E8%87%AA%E5%8B%95%E5%8C%96%E5%8A%B9%E7%8E%87%E6%9C%80%E5%A4%A7%E5%8C%96-404bd5c70040/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(220,53,69,.35);background:rgba(220,53,69,.08);color:#dc3545 !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> æ—¥æœ¬èª </a></div></div><blockquote class="prompt-info"><p>åŸºæ–¼ SEO è€ƒé‡ï¼Œæœ¬æ–‡æ¨™é¡Œèˆ‡æè¿°ç¶“ AI èª¿æ•´ï¼ŒåŸå§‹ç‰ˆæœ¬è«‹åƒè€ƒå…§æ–‡ã€‚</p></blockquote><h4 id="zhgchgli-table-of-contents">æ–‡ç« ç›®éŒ„</h4><nav class="zhgchgli-toc"><ul class="zhgchgli-toc-list"><li class="has-children"><details><summary>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆäºŒï¼‰ï¼šGitHub Actions èˆ‡ Self-hosted Runner ä½¿ç”¨èˆ‡å»ºç½®å¤§å…¨ <a href="#cicd-å¯¦æˆ°æŒ‡å—äºŒgithub-actions-èˆ‡-self-hosted-runner-ä½¿ç”¨èˆ‡å»ºç½®å¤§å…¨">#</a></summary><ul><li><a href="#å‰è¨€">å‰è¨€</a></li></ul></details></li><li class="has-children"><details><summary>GitHub Actions æ¶æ§‹æµç¨‹åœ– <a href="#github-actions-æ¶æ§‹æµç¨‹åœ–">#</a></summary><ul><li><a href="#github-repo">GitHub Repo</a></li><li><a href="#github-repo-actions-secrets">GitHub Repo â€”Actions Secrets</a></li><li><a href="#github-repo--actions-variables">GitHub Repo â€” Actions Variables</a></li><li><a href="#github-actions--trigger">GitHub Actions â€” Trigger</a></li><li><a href="#github-actions--workflow">GitHub Actions â€” Workflow</a></li><li><a href="#github-actions--workflow--job">GitHub Actions â€” Workflow â€” Job</a></li><li><a href="#github-actions--reuse-workflowjob">GitHub Actions â€” Reuse Workflow/Job</a></li><li><a href="#github-actions--workflow--job--step">GitHub Actions â€” Workflow â€” Job â€” Step</a></li><li><a href="#github-actions--workflow--job--reuse-action-step">GitHub Actions â€” Workflow â€” Job â€” Reuse Action Step</a></li><li><a href="#github-runner">GitHub Runner</a></li><li><a href="#github-hosted-runner">GitHub Hosted Runner</a></li><li><a href="#self-hosted-runner-on-in-house-server">Self-hosted Runner on In-house Server</a></li><li><a href="#github-workflow-x-job-x-step-x-runner-æµç¨‹é—œä¿‚åœ–">GitHub Workflow x Job x Step x Runner æµç¨‹é—œä¿‚åœ–</a></li><li><a href="#å¦‚æœ-job-æœ‰ç”¢å‡ºè¦çµ¦å¾ŒçºŒçš„-job-ä½¿ç”¨">å¦‚æœ Job æœ‰ç”¢å‡ºè¦çµ¦å¾ŒçºŒçš„ Job ä½¿ç”¨</a></li></ul></details></li><li><a href="#åšä¸­å­¸-github-actions--æ¡ˆä¾‹å¯¦ä½œ">åšä¸­å­¸ GitHub Actions â€” æ¡ˆä¾‹å¯¦ä½œ</a></li><li class="has-children"><details><summary>æ¡ˆä¾‹ â€” 1 <a href="#æ¡ˆä¾‹--1">#</a></summary><ul><li><a href="#æˆæœåœ–">æˆæœåœ–</a></li><li><a href="#é‹ä½œæµç¨‹">é‹ä½œæµç¨‹</a></li><li><a href="#å‹•æ‰‹åš">å‹•æ‰‹åš</a></li><li><a href="#automation-pullrequestyml">Automation-PullRequest.yml</a></li><li><a href="#åŸ·è¡Œçµæœ">åŸ·è¡Œçµæœ</a></li><li><a href="#ç›´æ¥ä½¿ç”¨åˆ¥äººåŒ…å¥½çš„-action-æ­¥é©Ÿ-pascalgnsize-label-action">ç›´æ¥ä½¿ç”¨åˆ¥äººåŒ…å¥½çš„ Action æ­¥é©Ÿï¼š pascalgn/size-label-action</a></li><li><a href="#name-run-name-çš„è£œå……">name, run-name çš„è£œå……</a></li></ul></details></li><li class="has-children"><details><summary>æ¡ˆä¾‹ â€” 2 <a href="#æ¡ˆä¾‹--2">#</a></summary><ul><li><a href="#æˆæœåœ–-1">æˆæœåœ–</a></li><li><a href="#é‹ä½œæµç¨‹-1">é‹ä½œæµç¨‹</a></li><li><a href="#å‹•æ‰‹åš-1">å‹•æ‰‹åš</a></li><li><a href="#automation-pullrequestyml-1">Automation-PullRequest.yml</a></li><li><a href="#åŸ·è¡Œçµæœ-1">åŸ·è¡Œçµæœ</a></li><li><a href="#æ¸¬è©¦é‡é–‹reopened-pr">æ¸¬è©¦é‡é–‹(Reopened) PR</a></li></ul></details></li><li class="has-children"><details><summary>æ¡ˆä¾‹ â€” 3 <a href="#æ¡ˆä¾‹--3">#</a></summary><ul><li><a href="#æˆæœåœ–-2">æˆæœåœ–</a></li><li><a href="#é‹ä½œæµç¨‹-2">é‹ä½œæµç¨‹</a></li><li><a href="#å‹•æ‰‹åš-2">å‹•æ‰‹åš</a></li><li><a href="#automation-pullrequest-dailyyml">Automation-PullRequest-Daily.yml</a></li><li><a href="#åŸ·è¡Œçµæœ-2">åŸ·è¡Œçµæœ</a></li></ul></details></li><li class="has-children"><details><summary>å°çµ <a href="#å°çµ">#</a></summary><ul><li><a href="#github-è‡ªå‹•åŒ–å»¶ä¼¸è­°é¡Œ">GitHub è‡ªå‹•åŒ–å»¶ä¼¸è­°é¡Œ</a></li><li><a href="#å…¶ä»–">å…¶ä»–</a></li></ul></details></li><li class="has-children"><details><summary>Reuse Workflow è£œå…… <a href="#reuse-workflow-è£œå……">#</a></summary><ul><li><a href="#private-repo-å­˜å–å•é¡Œ">Private Repo å­˜å–å•é¡Œ</a></li></ul></details></li><li class="has-children"><details><summary>GitHub Actions Script èªæ³•è£œå…… <a href="#github-actions-script-èªæ³•è£œå……">#</a></summary><ul><li><a href="#--xxx---github-actions-context-è¡¨é”å¼">${ { XXX } } GitHub Actions Context è¡¨é”å¼</a></li><li><a href="#actionsgithub-scriptv7">actions/github-script@v7</a></li><li><a href="#gh-cli-gh_token">gh cli GH_TOKEN</a></li><li><a href="#æ–°å¢-self-hosted-runner">æ–°å¢ Self-hosted Runner</a></li><li><a href="#workflowgithub-actions-runner-æ”¹ç”¨-self-hosted-runner">Workflow(GitHub Actions) Runner æ”¹ç”¨ Self-hosted Runner</a></li><li><a href="#runs-on--runner-label-è¨­å®š">runs-on: [ Runner Label] è¨­å®š</a></li><li><a href="#è¨»å†Š-runner-æˆ-service">è¨»å†Š Runner æˆ Service</a></li><li><a href="#å®Œæ•´å°ˆæ¡ˆ-repo">å®Œæ•´å°ˆæ¡ˆ Repo</a></li></ul></details></li><li class="has-children"><details><summary>å®˜æ–¹æ–‡ä»¶ <a href="#å®˜æ–¹æ–‡ä»¶">#</a></summary><ul><li><a href="#ai-can-help">AI Can Help!</a></li></ul></details></li><li><a href="#ç¸½çµ">ç¸½çµ</a></li><li class="has-children"><details><summary>ç³»åˆ—æ–‡ç«  <a href="#ç³»åˆ—æ–‡ç« ">#</a></summary><ul><li><a href="#-buy-me-a-beer-on-paypal">ğŸº Buy me a beer on PayPal</a></li></ul></details></li></ul></nav><hr /><h3 id="cicd-å¯¦æˆ°æŒ‡å—äºŒgithub-actions-èˆ‡-self-hosted-runner-ä½¿ç”¨èˆ‡å»ºç½®å¤§å…¨"><span class="me-2">CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆäºŒï¼‰ï¼šGitHub Actions èˆ‡ Self-hosted Runner ä½¿ç”¨èˆ‡å»ºç½®å¤§å…¨</span><a href="#cicd-å¯¦æˆ°æŒ‡å—äºŒgithub-actions-èˆ‡-self-hosted-runner-ä½¿ç”¨èˆ‡å»ºç½®å¤§å…¨" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>å¸¶æ‚¨å¾é ­äº†è§£ GitHub Actions/Self-hosted Runner é‹ä½œæ–¹å¼èˆ‡æ‰‹æŠŠæ‰‹ä½¿ç”¨æ•™å­¸ã€‚</p><p><a href="/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" alt="Photo by [Dan Taylor](https://unsplash.com/@theoneandonlydantaylor?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjgwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Photo by <a href="https://unsplash.com/@theoneandonlydantaylor?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" target="_blank">Dan Taylor</a></p><h4 id="å‰è¨€"><span class="me-2">å‰è¨€</span><a href="#å‰è¨€" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å‰ç¯‡ã€Œ <a href="https://zhgchg.li/posts/zrealm-dev/ci-cd-%E6%98%AF%E4%BB%80%E9%BA%BC-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A9%A9%E5%AE%9A%E9%96%8B%E7%99%BC%E5%9C%98%E9%9A%8A%E7%9A%84%E9%97%9C%E9%8D%B5%E6%B5%81%E7%A8%8B%E8%88%87%E5%B7%A5%E5%85%B7%E9%81%B8%E6%93%87-c008a9e8ceca/"><strong>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šCI/CD æ˜¯ä»€éº¼ï¼Ÿå¦‚ä½•é€é CI/CD æ‰“é€ ç©©å®šé«˜æ•ˆçš„é–‹ç™¼åœ˜éšŠï¼Ÿå·¥å…·é¸æ“‡ï¼Ÿ</strong></a> ã€æˆ‘å€‘ä»‹ç´¹äº† CI/CD æ˜¯ä»€éº¼ï¼Ÿèƒ½å¸¶ä¾†å“ªäº›æ•ˆç›Šèˆ‡å·¥å…·çš„é¸æ“‡ï¼Œ <strong>é€™ç¯‡å°‡è‘—é‡åœ¨ GitHub Actions, Self-hosted Runner çš„æ¶æ§‹èˆ‡ä½¿ç”¨ä»‹ç´¹</strong> ï¼Œä¸¦æ‰‹æŠŠæ‰‹ä¸€èµ·å»ºç«‹å¹¾å€‹æœ‰è¶£çš„è‡ªå‹•åŒ–å·¥ä½œæµç¨‹ï¼Œå¸¶æ‚¨æ…¢æ…¢ä¸Šæ‰‹ã€‚</p><h3 id="github-actions-æ¶æ§‹æµç¨‹åœ–"><span class="me-2">GitHub Actions æ¶æ§‹æµç¨‹åœ–</span><a href="#github-actions-æ¶æ§‹æµç¨‹åœ–" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>åœ¨é–‹å§‹ä¹‹å‰æˆ‘å€‘å…ˆä¾†ç¢ºå®šä¸€ä¸‹ GitHub Actions çš„é‹ä½œæ¶æ§‹æµç¨‹é—œä¿‚èˆ‡è·è²¬ã€‚</p><p><a href="/assets/404bd5c70040/1*iacfyTX_b3YTSzMcn2ldjw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*iacfyTX_b3YTSzMcn2ldjw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjgwMyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h4 id="github-repo"><span class="me-2"><strong>GitHub Repo</strong></span><a href="#github-repo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>åœ¨ GitHub Actions çš„ä¸–ç•Œè£¡ï¼Œæ‰€æœ‰ Actions (Workflow YAML æª”æ¡ˆ) éƒ½è¦å­˜æ”¾åœ¨æŸå€‹ Git Repo ä¹‹ä¸­ ( <code class="language-plaintext highlighter-rouge">REPO/.github/workflows/</code> )</ul><h4 id="github-repo-actions-secrets"><span class="me-2">GitHub Repo â€”Actions Secrets</span><a href="#github-repo-actions-secrets" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Settings â†’ Secrets and variables â†’ Actions â†’ Secretsã€‚</p><ul><li>å­˜æ”¾ Actions æ­¥é©Ÿä¸­æœƒç”¨åˆ°çš„ Secret Key, Token e.g. Slack Bot Tokenã€Apple Store Connect API .p8 Key<li><strong>Secrets å…§å®¹ç„¡æ³•åœ¨ Action Log ä¸­æŸ¥çœ‹ï¼Œæœƒè‡ªå‹•ç”¨ * * * * éš±è”½</strong><li>Secrets å…§å®¹ç„¡æ³•æŸ¥çœ‹ã€ç·¨è¼¯ï¼Œåªèƒ½è¦†è“‹<li>Secrets <strong>ç›®å‰åªæ”¯æ´ç´”æ–‡å­—å…§å®¹ï¼Œç„¡æ³•ä¸Šå‚³æª”æ¡ˆ</strong> <strong>-</strong> å¦‚æœæ˜¯äºŒé€²åˆ¶çš„é‡‘è¦è«‹åƒè€ƒ <a href="https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/using-secrets-in-github-actions#storing-base64-binary-blobs-as-secrets" target="_blank">å®˜æ–¹æ­¥é©Ÿä½¿ç”¨ Base64 ç·¨ç¢¼è½‰æ›å¾Œå„²å­˜</a> ã€‚ - iOS é–‹ç™¼æ†‘è­‰å„²å­˜æ–¹å¼å¯åƒè€ƒå®˜æ–¹æ•™å­¸ï¼š <a href="https://docs.github.com/en/actions/how-tos/use-cases-and-examples/deploying/installing-an-apple-certificate-on-macos-runners-for-xcode-development" target="_blank">Installing an Apple certificate on macOS runners for Xcode development</a><li>å¯ä»¥å„²å­˜çµ„ç¹”å±¤ç´šçš„ Secretsï¼Œè·¨ Repo å…±äº«</ul><h4 id="github-repo--actions-variables"><span class="me-2">GitHub Repo â€” Actions Variables</span><a href="#github-repo--actions-variables" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Settings â†’ Secrets and variables â†’ Actions â†’ Variablesã€‚</p><ul><li>å­˜æ”¾ Actions æ­¥é©Ÿä¸­å¸¸ç”¨åˆ°çš„è®Šæ•¸ e.g. æ¨¡æ“¬å™¨ iOS ç‰ˆæœ¬ã€å·¥ä½œç›®éŒ„<li>Variables å…§å®¹å¯ä»¥æŸ¥çœ‹ã€ç·¨è¼¯<li>Variables å…§å®¹å¯ä»¥è¼¸å‡ºåœ¨ Action Log ä¸­<li>Variables åªæ”¯æ´ç´”æ–‡å­—ï¼Œä¹Ÿå¯å­˜æ”¾ json å­—ä¸²ç„¶å¾Œè‡ªå·±è§£æä½¿ç”¨<li>å¯ä»¥å„²å­˜çµ„ç¹”å±¤ç´šçš„ Variablesï¼Œè·¨ Repo å…±äº«</ul><h4 id="github-actions--trigger"><span class="me-2">GitHub Actions â€” Trigger</span><a href="#github-actions--trigger" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><strong>Github Action ä¸­æœ€é‡è¦çš„èµ·å§‹é» â€” è§¸ç™¼äº‹ä»¶(æ¢ä»¶)</strong><li>ç¬¦åˆè§¸ç™¼äº‹ä»¶çš„ GitHub Actions æ‰æœƒè§¸ç™¼åŸ·è¡Œ<li>å®Œæ•´äº‹ä»¶åˆ—è¡¨å¯ <a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows" target="_blank">åƒè€ƒå®˜æ–¹æ–‡ä»¶</a><li>åŸºæœ¬ä¸Šæ¶µè“‹äº†æ‰€æœ‰ CI/CDã€è‡ªå‹•åŒ–æœƒé‡åˆ°çš„äº‹ä»¶å ´æ™¯ã€‚ ä½† <strong>å¦‚æœæœ‰ç‰¹æ®Šå ´æ™¯æ²’æœ‰äº‹ä»¶ï¼Œé‚£å°±åªèƒ½ç”¨å…¶ä»–äº‹ä»¶+åœ¨ Job ä¸­åˆ¤æ–·çµ„åˆæˆ–æ˜¯ç”¨ Schedule æ’ç¨‹æ‰‹å‹•æª¢æŸ¥äº†</strong> ã€‚ e.g. ä¾‹å¦‚æ²’æœ‰ PR Merged äº‹ä»¶ï¼Œå°±åªèƒ½ç”¨ <code class="language-plaintext highlighter-rouge">pull_request: closed</code> + Job <code class="language-plaintext highlighter-rouge">if: github.event.pull_request.merged == true</code> é”æˆ</ul><p><strong>å¸¸ç”¨äº‹ä»¶ï¼š</strong></p><ul><li><code class="language-plaintext highlighter-rouge">schedule</code> (cron)ï¼šæ’ç¨‹å®šæ™‚åŸ·è¡Œ(åŒ crontab) å¯ä»¥ç”¨ä¾†åšè‡ªå‹•åŒ–ï¼šå®šæ™‚æª¢æŸ¥ PRã€å®šæ™‚æ‰“åŒ…ã€å®šæ™‚åŸ·è¡Œè‡ªå‹•åŒ–è…³æœ¬ <strong>çµ±ä¸€éƒ½åœ¨ main / develop (Default Branch) åŸ·è¡Œã€‚</strong><li><code class="language-plaintext highlighter-rouge">pull_request:</code> ï¼šPR ç›¸é—œäº‹ä»¶ ç•¶ PR é–‹å•Ÿæ™‚ã€PR Assign æ™‚ã€åŠ  Label æ™‚ã€æœ‰æ–° Push Commit æ™‚â€¦ç­‰ç­‰<li><code class="language-plaintext highlighter-rouge">issues</code> ã€ <code class="language-plaintext highlighter-rouge">issue_comment</code> ï¼šIssue ç›¸é—œäº‹ä»¶ ç•¶ Issue é–‹å•Ÿæ™‚ã€æœ‰æ–°ç•™è¨€æ™‚â€¦ç­‰ç­‰<li><code class="language-plaintext highlighter-rouge">workflow_dispatch</code> ï¼šæ‰‹å‹•è§¸ç™¼ï¼›å¯ä»¥è¨­å®šéœ€è¦æä¾›çš„æ¬„ä½ï¼ŒGitHub Actions æä¾›ç°¡æ˜“çš„è¡¨å–®è®“ä½¿ç”¨è€…å¯ä»¥å¡«å¯«è³‡è¨Šã€‚ e.g.:</ul><p><a href="/assets/404bd5c70040/1*XogIJsCbrNPerWBto_PG8w.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*XogIJsCbrNPerWBto_PG8w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMzIiIGhlaWdodD0iNDMyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><code class="language-plaintext highlighter-rouge">workflow_call</code> ï¼šè§¸ç™¼å¦ä¸€å€‹ Action(Workflow) åŸ·è¡Œä»»å‹™ã€‚<li><code class="language-plaintext highlighter-rouge">workflow_run</code> ï¼šç•¶åˆ¥çš„ Action(Workflow) åŸ·è¡Œä»»å‹™ï¼Œè§¸ç™¼åŸ·è¡Œæ­¤ä»»å‹™ã€‚</ul><blockquote><p><em>æ›´å¤šäº‹ä»¶é¡å‹ã€è¨­å®šç´°ç¯€è«‹ <a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows" target="_blank">åƒè€ƒå®˜æ–¹æ–‡ä»¶</a> ã€‚</em></p></blockquote><h4 id="github-actions--workflow"><span class="me-2"><strong>GitHub Actions â€” Workflow</strong></span><a href="#github-actions--workflow" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>a.k.a Action<li>ä½¿ç”¨ YAML æ’°å¯« .yaml æª”æ¡ˆï¼Œæª”æ¡ˆçµ±ä¸€æ”¾ç½®åœ¨ <code class="language-plaintext highlighter-rouge">REPO/.github/workflows/</code> ä¹‹ä¸‹<li><strong>ä»¥ä¸»åˆ†æ”¯å…§çš„ Workflow YAML æª”æ¡ˆç‚ºä¸»</strong> å¦‚æœåœ¨å…¶ä»–åˆ†æ”¯çœ‹ä¸åˆ°æ­£åœ¨é–‹ç™¼çš„ Action æˆ–åŸ·è¡Œä¸Šæœ‰èª¤ï¼Œå¯ä»¥å…ˆ Merge å›ä¸»åˆ†æ”¯çœ‹çœ‹ã€‚<li>GitHub Actions ä¸­çš„æœ€åŸºç¤å–®ä½ï¼Œæ¯å€‹ Workflow å°±ä»£è¡¨ä¸€é … CI/CD æˆ–è‡ªå‹•åŒ–æ“ä½œ<li>Workflow å¯ä»¥å‘¼å«åˆ¥çš„ Workflow åŸ·è¡Œä»»å‹™ (å¯ä»¥åˆ©ç”¨é€™å€‹ç‰¹æ€§æ‹†å‡ºæ ¸å¿ƒ Workflow å’Œå‘¼å«çš„ Workflow)<li>ç•¶ä¸­æœƒå®šç¾©ä»»å‹™åç¨±ã€åŸ·è¡Œç­–ç•¥ã€è§¸ç™¼äº‹ä»¶ã€ä»»å‹™å·¥ä½œâ€¦ç­‰ç­‰æ‰€æœ‰ Action ç›¸é—œè¨­å®š<li>ç›®å‰æª”æ¡ˆçµæ§‹ä¸æ”¯æ´å­ç›®éŒ„<li>Action å®Œå…¨å…è²» (Public and Private Repo)</ul><h4 id="github-actions--workflow--job"><span class="me-2">GitHub Actions â€” Workflow â€” Job</span><a href="#github-actions--workflow--job" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>GitHub Actions ä¸­çš„åŸ·è¡Œå–®ä½<li>å®šç¾© Workflow ä¸­çš„ä»»å‹™å·¥ä½œæœ‰å“ªäº›<li>æ¯å€‹ Workflow å¯ä»¥æœ‰å¤šå€‹ Jobs<li>æ¯å€‹ Job éœ€è¦æŒ‡å®šä½¿ç”¨å“ªå€‹ Runner Labelï¼ŒåŸ·è¡Œçš„æ™‚å€™æœƒä½¿ç”¨å°æ‡‰çš„ Runner æ©Ÿå™¨ä¾†åŸ·è¡Œä»»å‹™<li><strong>å¤šå€‹ Jobs æ˜¯ä¸¦ç™¼åŸ·è¡Œ</strong> (å¦‚æœ‰é †åºå¯ä»¥ç”¨ <code class="language-plaintext highlighter-rouge">needs</code> ç´„æŸ)<li><strong>æ¯å€‹ Job æ‡‰è©²è¦–ç‚ºç¨ç«‹åŸ·è¡Œå€‹é«”(æ¯å€‹éƒ½è¦ç•¶æˆæ˜¯ Sandbox)</strong> ï¼ŒJob çµæŸå¾Œå¦‚æœæœ‰ç”¢å‡ºè³‡æºæª”æ¡ˆè¦çµ¦å¾ŒçºŒå…¶ä»– Job/Workflow ä½¿ç”¨ï¼Œéœ€è¦ Upload Artifacts æˆ–åœ¨ self-hosted ç§»å‹•åˆ°å…±ç”¨ç”¢å‡ºç›®éŒ„ã€‚<li>Job åšå®Œå¯ä»¥ Output å­—ä¸²çµ¦å…¶ä»– Job åƒè€ƒä½¿ç”¨ã€‚ (ä¾‹å¦‚åŸ·è¡Œçµæœ true or false)<li>æ²’ç‰¹åˆ¥è¨­æµç¨‹æ¢ä»¶çš„è©±ï¼Œå¤šå€‹ Job å¦‚æœå…¶ä¸­æœ‰ Job ç™¼ç”ŸéŒ¯èª¤ï¼Œ <strong>å…¶ä»– Job ä¾ç„¶æœƒç¹¼çºŒåŸ·è¡Œ</strong></ul><h4 id="github-actions--reuse-workflowjob"><span class="me-2">GitHub Actions â€” Reuse Workflow/Job</span><a href="#github-actions--reuse-workflowjob" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>Workflow å®šç¾© <code class="language-plaintext highlighter-rouge">on: workflow_call</code> å°±èƒ½å°è£çµ¦å…¶ä»– Workflow ç•¶æˆ Job è¤‡ç”¨<li>åŒå€‹çµ„ç¹”ä¸‹å¯ä»¥è·¨ Repo åˆ†äº«ä½¿ç”¨<li>å› æ­¤å¯ä»¥æŠŠè·¨ Repo å…±ç”¨çš„ CI/CD å·¥ä½œæ”¾åˆ°å…±äº«çš„ Repo ä¸€èµ·ä½¿ç”¨</ul><h4 id="github-actions--workflow--job--step"><span class="me-2">GitHub Actions â€” Workflow â€” Job â€” Step</span><a href="#github-actions--workflow--job--step" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>GitHub Actions ä¸­çš„æœ€å°åŸ·è¡Œé …ç›®<li>Job ä¸­å¯¦éš›åŸ·è¡Œä»»å‹™çš„ç¨‹å¼<li>æ¯å€‹ Job å¯ä»¥æœ‰å¤šå€‹ Steps<li><strong>å¤šå€‹ Steps æ˜¯ç…§é †åºåŸ·è¡Œ</strong><li>Step åšå®Œå¯ä»¥ Output å­—ä¸²çµ¦å¾ŒçºŒ Steps åƒè€ƒä½¿ç”¨ã€‚<li><strong>Step å¯ä»¥ç›´æ¥æ’°å¯« shell script ç¨‹å¼</strong> å¯ä»¥å¼•ç”¨ <a href="https://cli.github.com/manual/gh" target="_blank">gh cli</a> ã€ç•¶å‰ç’°å¢ƒè®Šæ•¸(ä¾‹å¦‚å–å¾— PR ç·¨è™Ÿ)ï¼Œç›´æ¥åšæƒ³åšçš„äº‹<li>æ²’ç‰¹åˆ¥è¨­æµç¨‹æ¢ä»¶çš„è©±ï¼ŒStep å¦‚æœç™¼ç”ŸéŒ¯èª¤ï¼Œ <strong>æœƒç›´æ¥ä¸­æ–·</strong> ï¼Œå¾ŒçºŒçš„ Steps ä¸æœƒåŸ·è¡Œ</ul><h4 id="github-actions--workflow--job--reuse-action-step"><span class="me-2">GitHub Actions â€” Workflow â€” Job â€” Reuse Action Step</span><a href="#github-actions--workflow--job--reuse-action-step" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><strong>å¯ä»¥ç›´æ¥å¾©ç”¨ <a href="https://github.com/marketplace?type=actions" target="_blank">Marketplace</a> ä¸Šå„è·¯å¤§ç¥åŒ…å¥½çš„ç¾æœ‰å·¥ä½œæ­¥é©Ÿã€‚</strong> ä¾‹å¦‚ï¼š <a href="https://github.com/marketplace/actions/comment-pull-request" target="_blank">Comment å…§å®¹åˆ° PR</a> ã€‚<li>ä¹Ÿå¯ä»¥å°‡è‡ªå·±ä¸€ç³»åˆ—çš„å·¥ä½œä»»å‹™ Step æ‰“åŒ…æˆä¸€å€‹ Action GitHub Repo è®“å…¶ä»–å·¥ä½œç›´æ¥å¾©ç”¨<li>Public Repo çš„ Action å¯ä»¥ä¸Šæ¶åˆ° Marketplace</ul><p><strong>æ‰“åŒ… Action æ”¯æ´ä½¿ç”¨ï¼š</strong></p><ul><li><strong>Docker Action</strong> â€” ä»£è¡¨ GitHub Actions æœƒæŠŠç’°å¢ƒè®Šæ•¸å‚³åˆ° Docker å®¹å™¨ä¸­ï¼Œå†çœ‹ä½ è¦æ€éº¼è™•ç†ï¼Œå¯ä»¥æ˜¯ shell scriptã€Javaã€PHPâ€¦etc.<li><strong>JavaScript/TypeScript Action</strong> â€” ç›´æ¥ä½¿ç”¨ node.js æ’°å¯« GitHub Actions è™•ç†é‚è¼¯ï¼ŒåŒæ¨£çš„æœƒæŠŠç’°å¢ƒè®Šæ•¸éƒ½å‚³çµ¦ä½ åƒè€ƒä½¿ç”¨ã€‚ e.g. <a href="https://github.com/pozil/auto-assign-issue/blob/v2/action.yml" target="_blank">pozil/auto-assign-issue</a><li><strong>Composite (YAML) â€”</strong> ç´” YAML æè¿°ä»»å‹™æ­¥é©Ÿ (åŒ GitHub Actions â€” Workflow â€” Job â€” Step) å¯ä»¥å®£å‘Šæœ‰å“ªå¯«æ­¥é©Ÿè¦åšæˆ–ç›´æ¥åœ¨ä¸Šé¢å¯« shell scriptã€‚ e.g. <a href="https://github.com/ZhgChgLi/ZReviewTender/blob/main/action.yml" target="_blank">ZhgChgLi/ZReviewTender</a></ul><blockquote><p><em>ç¤™æ–¼ç¯‡å¹…ï¼Œæœ¬ç¯‡æ–‡ç« ä¸æœƒä»‹ç´¹å¦‚ä½•æ‰“åŒ… Github Actions Actionï¼Œæœ‰èˆˆè¶£å¯ä»¥åƒè€ƒå®˜æ–¹æ–‡ä»¶ï¼š <a href="https://docs.github.com/en/actions/tutorials/creating-a-composite-action" target="_blank">tutorials/creating-a-composite-action</a> ã€‚</em></p></blockquote><h4 id="github-runner"><span class="me-2">GitHub Runner</span><a href="#github-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>GitHub æœƒæ ¹æ“š Runner Label æ´¾ç™¼å°æ‡‰çš„ Job çµ¦ Runner åŸ·è¡Œ<li>Runner åªåšç‚ºç›£è½è€…ï¼Œè¼ªè©¢ç›£è½ GitHub æ´¾ç™¼ä»»å‹™<li>åªé—œå¿ƒ Job ä¸é—œå¿ƒæ˜¯å“ªå€‹ Action(Workflow) å› æ­¤æœƒå‡ºç¾ Action A çš„ Job-1 åŸ·è¡Œå®Œï¼Œä¸‹ä¸€å€‹æ› Action B çš„ Job-1ï¼Œè€Œä¸æ˜¯ Action A çš„ Jobs éƒ½åŸ·è¡Œå®Œæ‰æ› Action Bã€‚<li>Runner å¯ä»¥ä½¿ç”¨ GitHub Hosted Runner æˆ– Self-hosted Runnerã€‚</ul><h4 id="github-hosted-runner"><span class="me-2"><strong>GitHub Hosted Runner</strong></span><a href="#github-hosted-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>GitHub æä¾›çš„ Runnerï¼Œå¯åƒè€ƒå®˜æ–¹ Repo åˆ—è¡¨ï¼š</ul><p><a href="https://github.com/actions/runner-images" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/b479f2537a0d7620cc8bed955bf9331e739ee02383a1715546a26bc35390a494/actions/runner-images" alt="" loading="lazy"></a></p><p><a href="/assets/404bd5c70040/1*KtQV4kDCWscEeaZ8jQI8Dg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*KtQV4kDCWscEeaZ8jQI8Dg.webp" alt="[2025/06 çš„ Images åˆ—è¡¨](https://github.com/actions/runner-images){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjExNTQiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="https://github.com/actions/runner-images" target="_blank">2025/06 çš„ Images åˆ—è¡¨</a></p><ul><li>Runner é å…ˆå®‰è£äº†ä»€éº¼å¯ä»¥é»é€²å»æŸ¥çœ‹ï¼š e.g. <a href="https://github.com/actions/runner-images/blob/main/images/macos/macos-14-arm64-Readme.md" target="_blank">macos-14-arm64</a></ul><p><a href="/assets/404bd5c70040/1*svXtXH78-TvK1C_XXCyYLA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*svXtXH78-TvK1C_XXCyYLA.webp" alt="[macos-14-arm64](https://github.com/actions/runner-images/blob/main/images/macos/macos-14-arm64-Readme.md){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9Ijc4MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://github.com/actions/runner-images/blob/main/images/macos/macos-14-arm64-Readme.md" target="_blank">macos-14-arm64</a></p><ul><li>iOS é–‹ç™¼å„ªå…ˆä½¿ç”¨ -arm64 (Mç³»åˆ—) è™•ç†å™¨çš„ Runnerï¼Œè·‘èµ·ä¾†æ¯”è¼ƒå¿«<li>åªè¦åœ¨ Job <code class="language-plaintext highlighter-rouge">run-on</code> è²¼ä¸Šè¡¨æ ¼ä¸Šçš„ YAML Labelï¼Œå°±èƒ½ä½¿ç”¨è©² Runner åŸ·è¡Œä»»å‹™<li><strong>Public Repo æ”¶è²»æ–¹å¼: å®Œå…¨å…è²»ç„¡é™ä½¿ç”¨</strong><li><strong>ï¸</strong> Private Repo å…è²»é¡åº¦: å…è²»é¡åº¦(ä¾ç…§å¸³è™Ÿä¸åŒé¡åº¦ä¸åŒï¼Œä»¥ GitHub Free ç‚ºä¾‹)ï¼š ç”¨é‡ï¼šæ¯æœˆå…è²» 2,000 åˆ†é˜ å„²å­˜ï¼š500 MB<li><strong>âš ï¸ï¸Private Repo è¨ˆè²»æ–¹å¼:</strong> <strong>è¶…éå…è²»é¡åº¦ä¹‹å¾Œé–‹å§‹ç”¨ç”¨é‡è¨ˆè²»(å¯è¨­ä¸Šé™è·Ÿé€šçŸ¥)ï¼Œä¾ç…§ Runner æ‰€å±¬çš„æ©Ÿå™¨ä½œæ¥­ç³»çµ±ã€æ ¸å¿ƒä¸åŒï¼Œåƒ¹æ ¼ä¹Ÿä¸åŒï¼š</strong></ul><p><a href="/assets/404bd5c70040/1*rkhRJN4ZRas_lDOJh-pjkQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*rkhRJN4ZRas_lDOJh-pjkQ.webp" alt="[about-billing-for-github-actions](https://docs.github.com/en/billing/managing-billing-for-your-products/about-billing-for-github-actions){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTc4IiBoZWlnaHQ9IjEzMjgiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="https://docs.github.com/en/billing/managing-billing-for-your-products/about-billing-for-github-actions" target="_blank">about-billing-for-github-actions</a></p><p>å¯ä»¥çœ‹åˆ° macOS çš„åƒ¹æ ¼å› ç‚ºè¨­å‚™æˆæœ¬å¾ˆé«˜æ‰€ä»¥è²´ã€‚</p><ul><li>æœ€å¤šä¸¦ç™¼ä»»å‹™æ•¸é™åˆ¶ï¼š</ul><p><a href="/assets/404bd5c70040/1*LU3zGSBe57NBVMfDwl0wdQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*LU3zGSBe57NBVMfDwl0wdQ.webp" alt="[usage-limits-billing-and-administration](https://docs.github.com/en/actions/concepts/overview/usage-limits-billing-and-administration#usage-limits){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjU3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://docs.github.com/en/actions/concepts/overview/usage-limits-billing-and-administration#usage-limits" target="_blank">usage-limits-billing-and-administration</a></p><blockquote><p><em>é€™é‚Šæ‰¯å¤ªå¤šäº†ï¼Œæˆ‘å€‘çš„é‡é»æ˜¯ Self-hosted Runnerã€‚</em></p></blockquote><h4 id="self-hosted-runner-on-in-house-server"><span class="me-2">Self-hosted Runner on In-house Server</span><a href="#self-hosted-runner-on-in-house-server" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>å°‡è‡ªå·±çš„æ©Ÿå™¨ä½œç‚º Runner<li><strong>ä¸€å°å¯¦é«”æ©Ÿå™¨å¯ä»¥èµ·å¤šå€‹ Runner ä¸¦ç™¼æ¥ä»»å‹™ä¾†åš</strong><li><strong>å…è²»ç„¡é™é‡ç„¡é™åˆ¶ä½¿ç”¨</strong> åªæœ‰æ©Ÿå™¨è³¼è²·æˆæœ¬ï¼ŒèŠ±ä¸€æ¬¡ä½¿ç”¨åˆ°é£½ï¼ ä»¥ 32G RAM M4 Mini (=NT$40,900) è¨ˆç®—ï¼Œå¦‚æœç”¨ GitHub Hosted Runner ä¸€å€‹æœˆè¦èŠ± 500 USDï¼› <strong>è²·ä¸€å°æ¶è¨­å¥½ç”¨è¶…éä¸‰å€‹æœˆå°±å›æœ¬</strong> äº†ï¼<li>æ”¯æ´ Windows, macOS, Linux (x64/ARM/ARM64)<li><strong>åŒå€‹çµ„ç¹”å¯ä»¥è·¨ Repo å…±äº« Runner</strong><li><strong>âš ï¸ç›®å‰ï¼šactions/cache, actions/upload-artifact, actions/download-artifact éƒ½åªæ”¯æ´ GitHub é›²ç«¯æœå‹™ï¼Œä»£è¡¨é€™äº›å…§å®¹é‚„æ˜¯æœƒä¸Šå‚³åˆ° GitHub ä¼ºæœå™¨ä¸¦è¨ˆç®—å„²å­˜é‡æ”¶è²»ã€‚</strong> å¯ä»¥åœ¨è‡ªå·±çš„æ©Ÿå™¨ä¸Šé–‹å…±ç”¨ç›®éŒ„å–ä»£ã€‚<li>Self-hosted Runner ä¹Ÿæ”¯æ´ <a href="https://docs.github.com/en/actions/concepts/runners/about-actions-runner-controller" target="_blank">Docker, k8s</a> åªæ˜¯æˆ‘æ²’ç ”ç©¶ã€‚</ul><blockquote><p><strong><em>æ¶è¨­ Self-hosted Runner åªéœ€å¹¾æ­¥ (10 åˆ†é˜å…§è¨­å®šå¥½) å°±èƒ½ä¸Šç·šé–‹å§‹æ¥ä»»å‹™åŸ·è¡Œ(æœ¬æ–‡ç¨å¾Œæœƒä»‹ç´¹)ã€‚</em></strong></p></blockquote><h4 id="github-workflow-x-job-x-step-x-runner-æµç¨‹é—œä¿‚åœ–"><span class="me-2">GitHub Workflow x Job x Step x Runner æµç¨‹é—œä¿‚åœ–</span><a href="#github-workflow-x-job-x-step-x-runner-æµç¨‹é—œä¿‚åœ–" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*WHIVfXdVRoEsdXGfJhu2Rw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*WHIVfXdVRoEsdXGfJhu2Rw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9Ijg1MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>é€™é‚Šç”¨ä¸€å¼µåœ–ç¸½çµå·¥ä½œæµç¨‹èˆ‡é—œä¿‚ï¼Œå‡è¨­æˆ‘å€‘æœ‰å…©å€‹ Workflowã€å…©å€‹ Runner:</p><ul><li>CI â€”å‡è¨­ Ræœ‰ 3 å€‹ Jobsï¼Œæ¯å€‹ Job å„æœ‰å¹¾å€‹ Stepsï¼ŒRunner Label(run-on) â€” <code class="language-plaintext highlighter-rouge">self-hosted-app</code><li>CD â€” æœ‰ 4 å€‹ Jobsï¼Œæ¯å€‹ Job å„æœ‰å¹¾å€‹ Stepsï¼ŒRunner Label(run-on) â€” <code class="language-plaintext highlighter-rouge">self-hosted-app</code><li>Runner â€” æœ‰ 2 å€‹ï¼ŒRunner Label ä¹Ÿéƒ½æ˜¯â€” <code class="language-plaintext highlighter-rouge">self-hosted-app</code></ul><p>åŒå‰è¿°ï¼ŒRunner è·Ÿ Workflow æ˜¯ä¾ç…§ Runnler Label ä¾†æ´¾ç™¼ã€æ¥æ”¶ä»»å‹™ä¾†åšï¼Œé€™å€‹æ¡ˆä¾‹éƒ½æ˜¯ç”¨åŒå€‹ <code class="language-plaintext highlighter-rouge">self-hosted-app</code> Runner Labelï¼ŒWorkflow çš„ Jobs é è¨­æ˜¯ä¸¦ç™¼åŸ·è¡Œã€Steps æ˜¯æ¯å€‹ Job çš„å¯¦éš›åŸ·è¡Œå…§å®¹ï¼Œä¸²è¡Œç…§é †åºåŸ·è¡Œï¼ŒSteps éƒ½åŸ·è¡Œå®Œç­‰æ–¼ Job åŸ·è¡Œå®Œç•¢ã€‚</p><blockquote><p><strong><em>å› æ­¤ Workflow å¯¦éš›åŸ·è¡Œçš„æ™‚é–“è»¸æœƒæ˜¯åœ¨å…©å€‹ Runner ä¹‹é–“ç©¿æ¢­åŸ·è¡Œ Jobï¼Œä¹Ÿæœƒä¸¦ç™¼åŸ·è¡Œã€ç•¶å‰ Job åŸ·è¡Œå®Œä¸‹ä¸€å€‹ä¹Ÿä¸ä¸€å®šæ˜¯æ¥è‘—åŒå€‹ Worflow çš„ä¸‹ä¸€å€‹ Jobã€‚</em></strong></p></blockquote><blockquote><p><em>âš ï¸ æ‰€ä»¥æ‰èªªç¢ºä¿æ¯å€‹ Job æ˜¯ç¨ç«‹çš„å¾ˆé‡è¦ (å°¤å…¶åœ¨ Self-hosted Runner ç’°å¢ƒä¹‹ä¸‹ï¼ŒJob çµæŸä¹‹å¾Œå¯èƒ½ä¸æœƒæ¸…é™¤çš„å¤ªä¹¾æ·¨ï¼Œæˆ‘å€‘å¯èƒ½æœƒä¸‹æ„è­˜è¦ºå¾—é€™å€‹ Job çš„ç”¢å‡ºï¼Œä¸‹ä¸€å€‹ Job å¯ä»¥æ¥è‘—åšäº‹)ï¼Œä¸æ‡‰è©²é€™æ¨£ç”¨ã€‚</em></p></blockquote><h4 id="å¦‚æœ-job-æœ‰ç”¢å‡ºè¦çµ¦å¾ŒçºŒçš„-job-ä½¿ç”¨"><span class="me-2">å¦‚æœ Job æœ‰ç”¢å‡ºè¦çµ¦å¾ŒçºŒçš„ Job ä½¿ç”¨:</span><a href="#å¦‚æœ-job-æœ‰ç”¢å‡ºè¦çµ¦å¾ŒçºŒçš„-job-ä½¿ç”¨" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><strong>Job Output String</strong> : è¼¸å‡ºç´”æ–‡å­—åˆ°è®Šæ•¸çµ¦å…¶ä»– Job å¼•ç”¨<li><strong>Artifact-upload/download:</strong> Job çš„ Step æœ€å¾Œä¸€æ­¥å°‡åŸ·è¡Œçµæœä¸Šå‚³åˆ° GitHub Artifactï¼Œå¦ä¸€å€‹ Job çš„ç¬¬ä¸€å€‹ Step ä¸‹è¼‰å›ä¾†ç¹¼çºŒè™•ç†ä½¿ç”¨ã€‚ e.g. ä¾‹å¦‚ Job â€” æ‰“åŒ… â†’ å°‡æ‰“åŒ…çµæœ .ipa å‚³åˆ° <strong>Artifact â†’</strong> Job â€” éƒ¨ç½² â†’ ä¸‹è¼‰å›ä¾† .ipa â†’ ä¸Šå‚³ App Store éƒ¨ç½² è¦æ³¨æ„ï¼š <strong>ç›®å‰å°±ç®—æ˜¯ Self-hosted ä¹Ÿæ˜¯æœƒä¸Š GitHub Artifact é›²å„²å­˜ã€‚</strong><li><strong>AWS/GCPâ€¦é›²ç«¯å„²å­˜</strong> : åŒä¸Šï¼Œåªæ˜¯æ˜¯ç”¨è‡ªå·±çš„é›²ç«¯å„²å­˜æœå‹™ã€‚<li><strong>[Self-hosted Only] å…±ç”¨ç¡¬ç¢Ÿã€ç›®éŒ„:</strong> Self-hosted Runner å¦‚æœéƒ½æœ‰æ›è¼‰ä¸€å€‹å…±ç”¨ç›®éŒ„ï¼Œå‰‡å¯ç”¨é€™å€‹ç›®éŒ„ä¾ç…§ UUID å»ºç«‹è³‡æ–™å¤¾å­˜æ”¾ç”¢å‡ºçµæœï¼Œç„¶å¾Œå¾ŒçºŒ Job å»è®€å–å‰ä¸€å€‹ Job Output UUID å»æ‰¾åˆ°å°æ‡‰çš„å„²å­˜å†æ‹¿å›ä¾†ç”¨ã€‚ è¦æ³¨æ„ï¼Œä¸åŒä¸»æ©Ÿçš„ Runner ä¹Ÿéƒ½è¦æ›è¼‰åŒå€‹å…±ç”¨ç›®éŒ„ã€‚<li>åœ¨åŒå€‹ Job çš„ Steps æŠŠæ‰€æœ‰äº‹æƒ…åšå®Œã€‚</ul><h3 id="åšä¸­å­¸-github-actions--æ¡ˆä¾‹å¯¦ä½œ"><span class="me-2">åšä¸­å­¸ GitHub Actions â€” æ¡ˆä¾‹å¯¦ä½œ</span><a href="#åšä¸­å­¸-github-actions--æ¡ˆä¾‹å¯¦ä½œ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>ã€Œåè€Œè¨€ï¼Œä¸å¦‚èµ·è€Œè¡Œã€ä»¥ä¸Šåè©è§£é‡‹è·Ÿæµç¨‹æ¶æ§‹ä»‹ç´¹ç›¸ä¿¡å¤§å®¶ä¹Ÿæ˜¯çœ‹å¾—æ‡µæ‡µæ‡‚æ‡‚ï¼Œæ¥ä¸‹ä¾†æœƒç›´æ¥èˆ‰ä¸‰å€‹åŠŸèƒ½ä¾‹å­ï¼Œå¸¶å¤§å®¶å¯¦éš›å‹•æ‰‹åšï¼Œä¸¦ä¸€é‚Šè§£é‡‹ç¢°åˆ°çš„æ±è¥¿ï¼Œå¾åšç•¶ä¸­å­¸ç¿’ï¼Œä»¥äº†è§£ GitHub Actions åˆ°åº•æ˜¯ä»€éº¼ã€‚</p><h3 id="æ¡ˆä¾‹--1"><span class="me-2">æ¡ˆä¾‹ â€” 1</span><a href="#æ¡ˆä¾‹--1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>å»ºç«‹ Pull Request å¾Œè‡ªå‹•æ¨™è¨˜ File Changes Size Label è®“ Reviewer æ–¹ä¾¿å®‰æ’ Review å·¥ä½œã€‚</p><h4 id="æˆæœåœ–"><span class="me-2">æˆæœåœ–</span><a href="#æˆæœåœ–" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*vjSWeu2zB-hmVpfziMDR5Q.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*vjSWeu2zB-hmVpfziMDR5Q.webp" alt="[Demo PR](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NzQiIGhlaWdodD0iMjA2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">Demo PR</a></p><h4 id="é‹ä½œæµç¨‹"><span class="me-2">é‹ä½œæµç¨‹</span><a href="#é‹ä½œæµç¨‹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>ä½¿ç”¨è€…é–‹ PRã€é‡é–‹ PRã€Push æ–° Commit åˆ° PR<li>è§¸ç™¼ GitHub Actions Workflow<li>shell script å–çš„ file changes æ•¸é‡<li>åˆ¤æ–·æ•¸é‡å° PR æ¨™è¨˜ä¸Š Label<li>å®Œæˆ</ul><h4 id="å‹•æ‰‹åš"><span class="me-2">å‹•æ‰‹åš</span><a href="#å‹•æ‰‹åš" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Actions â†’ New workflow â†’ set up a workflow yourselfã€‚</p><p><strong>æª”æ¡ˆåç¨±ï¼š</strong> <code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code></p><p>Action Workflow å¯ä»¥æ¯å€‹ä»»å‹™ç¨ç«‹ä¸€å€‹æª”æ¡ˆï¼Œä¹Ÿå¯ä»¥ä¾ç…§è§¸ç™¼äº‹ä»¶ã€ç›®çš„ï¼ŒåŒå€‹ç›®çš„èšåˆåœ¨åŒå€‹æª”æ¡ˆï¼Œåæ­£å¤šå€‹ Job æ˜¯ä¸¦ç™¼åŸ·è¡Œçš„ï¼Œå¦å¤– <strong>å› ç‚º GitHub Actions æš«æ™‚ä¸æ”¯æ´ç›®éŒ„çµæ§‹ï¼Œæ‰€ä»¥æª”æ¡ˆå°‘ä¸€é»ã€ä½¿ç”¨éšå±¤å‘½åæª”æ¡ˆæœƒæ¯”è¼ƒå¥½ç®¡ç†</strong> ã€‚</p><p>é€™é‚ŠæŠŠ PR ç›¸é—œäº‹ä»¶çš„ Actions éƒ½æ”¾åœ¨åŒå€‹ Workflowã€‚</p><h4 id="automation-pullrequestyml"><span class="me-2"><code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code></span><a href="#automation-pullrequestyml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) åç¨±</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Reqeust Automation</span>

<span class="c1"># Actions Log çš„æ¨™é¡Œåç¨±</span>
<span class="na">run-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[Pull</span><span class="nv"> </span><span class="s">Reqeust</span><span class="nv"> </span><span class="s">Automation]</span><span class="nv"> </span><span class="s">${{</span><span class="nv"> </span><span class="s">github.event.pull_request.title</span><span class="nv"> </span><span class="s">||</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>

<span class="c1"># è§¸ç™¼äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># PR äº‹ä»¶</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="c1"># PR - é–‹å•Ÿã€é‡é–‹ã€æœ‰æ–° Push Commit æ™‚</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">,</span> <span class="nv">synchronize</span><span class="pi">,</span> <span class="nv">reopened</span><span class="pi">]</span>


<span class="c1"># åŒå€‹ Concurrency Group å¦‚æœæœ‰æ–°çš„ Job æœƒå–æ¶ˆæ­£åœ¨è·‘çš„</span>
<span class="c1"># ä¾‹å¦‚ Push Commit è§¸ç™¼çš„ä»»å‹™é‚„æ²’åŸ·è¡Œå°±åˆ Push Commit æ™‚ï¼Œæœƒå–æ¶ˆå‰ä¸€å€‹ä»»å‹™</span>
<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.ref_name }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># Job å·¥ä½œé …ç›®</span>
<span class="c1"># Job æœƒä¸¦ç™¼åŸ·è¡Œ</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">label-pr-by-file-count</span><span class="pi">:</span>
    <span class="c1"># Job åç¨± (å¯çœç•¥ï¼Œæœ‰è¨­å®šåœ¨ Log é¡¯ç¤ºæ¯”è¼ƒå¥½è®€)</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Label PR by changes file count</span>

    <span class="c1"># å¦‚æœé€™å€‹ Job å¤±æ•—ï¼Œä¸å½±éŸ¿æ•´å€‹ Workflowï¼Œç¹¼çºŒå…¶ä»– Job</span>
    <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
    
    <span class="c1"># è¨­å®šæœ€é•· Timeout æ™‚é–“ï¼Œé˜²æ­¢ç•°å¸¸æƒ…æ³ç™¼ç”Ÿæ™‚ç„¡æ­¢ç›¡çš„ç­‰å¾…</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">10</span>

    <span class="c1"># Runner Label - ä½¿ç”¨ GitHub Hosted Runner ubuntu-latest ä¾†åŸ·è¡Œå·¥ä½œ</span>
    <span class="c1"># å¦‚æœæ˜¯ Private Repo æœƒè¨ˆç®—ç”¨é‡ï¼Œè¶…éå¯èƒ½æœƒç”¢ç”Ÿè²»ç”¨</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="c1"># å·¥ä½œæ­¥é©Ÿ</span>
    <span class="c1"># å·¥ä½œæ­¥é©Ÿæœƒç…§é †åºåŸ·è¡Œ</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># æ­¥é©Ÿåç¨±</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Get changed file count and apply label</span>
        <span class="c1"># æ­¥é©Ÿ ID (å¯çœç•¥ï¼Œå¾ŒçºŒè‹¥æ²’æœ‰ Step è¦å¼•ç”¨ Output è¼¸å‡ºå‰‡ä¸éœ€è¨­å®š)</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">get-changed-files-count-by-gh</span>
        <span class="c1"># æ³¨å…¥å¤–éƒ¨ç’°å¢ƒåƒæ•¸åˆ°åŸ·è¡Œéšæ®µ</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="c1"># secrets.GITHUB_TOKEN æ˜¯ GitHub Actions åŸ·è¡Œæ™‚è‡ªå‹•ç”¢ç”Ÿçš„ Tokenï¼Œä¸éœ€è‡ªè¡Œåœ¨ Secrets è¨­å®šï¼Œæ“æœ‰ä¸€äº› GitHub Repo API Scopes æ¬Šé™</span>
          <span class="c1"># https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows</span>
          <span class="c1"># gh(GitHub) cli éœ€è¦æ³¨å…¥ GH_TOKEN åˆ° ENVï¼Œgh æ‰æœ‰æ¬Šé™æ“ä½œ  </span>
          <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
        <span class="c1"># Shell script</span>
        <span class="c1"># GitHub Hosted Runner å…§å»ºéƒ½æœ‰å®‰è£å¥½ gh cliï¼Œä¸éœ€è¦å®‰è£ Job å°±èƒ½ç›´æ¥ä½¿ç”¨</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">#   ${{ github.xxx }} æ˜¯ GitHub Actions Context è¡¨é”å¼</span>
          <span class="s">#   ä¸æ˜¯ Shell è®Šæ•¸ï¼Œè€Œæ˜¯ YAML è§£æéšæ®µç”± GitHub Actions æ›¿æ›æˆå°æ‡‰å€¼</span>
          <span class="s">#   å…¶ä»–åƒæ•¸ï¼šhttps://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>
          
          <span class="s"># å–å¾— PR ç·¨è™Ÿ:</span>
          <span class="s">PR_NUMBER=${{ github.event.pull_request.number }}</span>

          <span class="s"># å–å¾— Repo:</span>
          <span class="s">REPO=${{ github.repository }}</span>

          <span class="s"># ä½¿ç”¨ GitHub API (gh cli) å–å¾— File changed æ•¸é‡</span>
          <span class="s">FILE_COUNT=$(gh pr view $PR_NUMBER --repo $REPO --json files --jq '.files | length')</span>
          
          <span class="s"># Print Log</span>
          <span class="s">echo "Changed file count: $FILE_COUNT"</span>

          <span class="s"># Label é‚è¼¯</span>
          <span class="s">if [ "$FILE_COUNT" -lt 5 ]; then</span>
            <span class="s">LABEL="XS"</span>
          <span class="s">elif [ "$FILE_COUNT" -lt 10 ]; then</span>
            <span class="s">LABEL="S"</span>
          <span class="s">elif [ "$FILE_COUNT" -lt 30 ]; then</span>
            <span class="s">LABEL="M"</span>
          <span class="s">elif [ "$FILE_COUNT" -lt 80 ]; then</span>
            <span class="s">LABEL="L"</span>
          <span class="s">elif [ "$FILE_COUNT" -lt 200 ]; then</span>
            <span class="s">LABEL="XL"</span>
          <span class="s">else</span>
            <span class="s">LABEL="XXL"</span>
          <span class="s">fi</span>

          <span class="s"># ä½¿ç”¨ GitHub API (gh cli) ç§»é™¤ç›®å‰çš„ Size Label</span>
          <span class="s">EXISTING_LABELS=$(gh pr view "$PR_NUMBER" --repo "$REPO" --json labels --jq '.labels[].name')</span>
          <span class="s">for EXISTING in $EXISTING_LABELS; do</span>
            <span class="s">case "$EXISTING" in</span>
              <span class="s">XS|S|M|L|XL|XXL)</span>
                <span class="s">echo "ğŸ§¹ Removing existing label: $EXISTING"</span>
                <span class="s">gh pr edit "$PR_NUMBER" --repo "$REPO" --remove-label "$EXISTING"</span>
                <span class="s">;;</span>
            <span class="s">esac</span>
          <span class="s">done</span>

          <span class="s"># (å¯é¸)å¦‚æœ Label ä¸å­˜åœ¨å‰‡å»ºç«‹</span>
          <span class="s">if ! gh label list --repo "$REPO" | grep -q "^$LABEL"; then</span>
            <span class="s">echo "ğŸ†• Creating missing label: $LABEL"</span>
            <span class="s">gh label create "$LABEL" --repo "$REPO" --description "Size label: $LABEL" --color "ededed"</span>
          <span class="s">else</span>
            <span class="s">echo "âœ… Label '$LABEL' already exists"</span>
          <span class="s">fi</span>
          
          <span class="s"># ä½¿ç”¨ GitHub API (gh cli) æ¨™è¨˜ä¸Š Label</span>
          <span class="s">gh pr edit $PR_NUMBER --repo $REPO --add-label "$LABEL"</span>
</pre></table></code></div></div><p>Commit æª”æ¡ˆåˆ° Repo ä¸»åˆ†æ”¯ä¹‹å¾Œï¼Œæˆ‘å€‘å†é–‹æ–° PR å°±æœƒè‡ªå‹•è§¸ç™¼ GitHub Actionsï¼š</p><p><a href="/assets/404bd5c70040/1*wdAztL0BgPeSZdqXxqUEXg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*wdAztL0BgPeSZdqXxqUEXg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MzgiIGhlaWdodD0iNzQ0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Action åŸ·è¡Œç‹€æ…‹é¡¯ç¤º <strong>Queued</strong> ä»£è¡¨ä»»å‹™æ­£åœ¨ç­‰å¾… Runner æ¥ä»»å‹™å›å»åšã€‚</p><h4 id="åŸ·è¡Œçµæœ"><span class="me-2">åŸ·è¡Œçµæœ</span><a href="#åŸ·è¡Œçµæœ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*-JoD8IQYHVrDqHmLmrXyaQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*-JoD8IQYHVrDqHmLmrXyaQ.webp" alt="[Demo PR](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9Ijg1MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">Demo PR</a></p><p>åŸ·è¡Œå®Œç•¢ä¸¦ä¸”æˆåŠŸå¾Œ PR ä¸Šå°±æœƒè‡ªå‹•æ¨™è¨˜å¥½å°æ‡‰çš„ Label äº†ï¼ç´€éŒ„æœƒé¡¯ç¤ºç”± <code class="language-plaintext highlighter-rouge">github-actions</code> æ¨™è¨˜ã€‚</p><p><strong>å®Œæ•´ç¨‹å¼ç¢¼ï¼š <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Automation-PullRequest.yml" target="_blank">Automation-PullRequest.yml</a></strong></p><h4 id="ç›´æ¥ä½¿ç”¨åˆ¥äººåŒ…å¥½çš„-action-æ­¥é©Ÿ-pascalgnsize-label-action"><span class="me-2">ç›´æ¥ä½¿ç”¨åˆ¥äººåŒ…å¥½çš„ Action æ­¥é©Ÿï¼š <a href="https://github.com/pascalgn/size-label-action/tree/main" target="_blank">pascalgn/size-label-action</a></span><a href="#ç›´æ¥ä½¿ç”¨åˆ¥äººåŒ…å¥½çš„-action-æ­¥é©Ÿ-pascalgnsize-label-action" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å‰é¢æœ‰èªªåˆ°å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ¥äººå°è£å¥½çš„ Actionï¼Œæ¨™è¨˜ PR Size Label é€™ä»»å‹™å·²ç¶“æœ‰ç¾æˆçš„è¼ªå­å¯ä»¥ä½¿ç”¨ï¼Œä¸Šè¿°åªæ˜¯ç‚ºäº†æ•™å­¸ç›®çš„ï¼Œå¯¦éš›ä¸Šä¸éœ€è¦è‡ªå·±é‡é€ è¼ªå­ã€‚</p><p>åªéœ€è¦åœ¨ Action Workflow Job Step ä¸­ç›´æ¥ä½¿ç”¨å°±èƒ½å®Œæˆä»»å‹™ï¼š</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) åç¨±</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Reqeust Automation</span>

<span class="c1"># è§¸ç™¼äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># PR äº‹ä»¶</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="c1"># PR - é–‹å•Ÿã€é‡é–‹ã€æœ‰æ–° Push Commit æ™‚</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">,</span> <span class="nv">synchronize</span><span class="pi">,</span> <span class="nv">reopened</span><span class="pi">]</span>


<span class="c1"># åŒå€‹ Concurrency Group å¦‚æœæœ‰æ–°çš„ Job æœƒå–æ¶ˆæ­£åœ¨è·‘çš„</span>
<span class="c1"># ä¾‹å¦‚ Push Commit è§¸ç™¼çš„ä»»å‹™é‚„æ²’åŸ·è¡Œå°±åˆ Push Commit æ™‚ï¼Œæœƒå–æ¶ˆå‰ä¸€å€‹ä»»å‹™</span>
<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.ref_name }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># Job å·¥ä½œé …ç›®</span>
<span class="c1"># Job æœƒä¸¦ç™¼åŸ·è¡Œ</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">label-pr-by-file-count</span><span class="pi">:</span>
    <span class="c1"># Job åç¨± (å¯çœç•¥ï¼Œæœ‰è¨­å®šåœ¨ Log é¡¯ç¤ºæ¯”è¼ƒå¥½è®€)</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Label PR by changes file count</span>

    <span class="c1"># å¦‚æœé€™å€‹ Job å¤±æ•—ï¼Œä¸å½±éŸ¿æ•´å€‹ Workflowï¼Œç¹¼çºŒå…¶ä»– Job</span>
    <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
    
    <span class="c1"># è¨­å®šæœ€é•· Timeout æ™‚é–“ï¼Œé˜²æ­¢ç•°å¸¸æƒ…æ³ç™¼ç”Ÿæ™‚ç„¡æ­¢ç›¡çš„ç­‰å¾…</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">10</span>

    <span class="c1"># Runner Label - ä½¿ç”¨ GitHub Hosted Runner ubuntu-latest ä¾†åŸ·è¡Œå·¥ä½œ</span>
    <span class="c1"># å¦‚æœæ˜¯ Private Repo æœƒè¨ˆç®—ç”¨é‡ï¼Œè¶…éå¯èƒ½æœƒç”¢ç”Ÿè²»ç”¨</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="c1"># å·¥ä½œæ­¥é©Ÿ</span>
    <span class="c1"># å·¥ä½œæ­¥é©Ÿæœƒç…§é †åºåŸ·è¡Œ</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># æ­¥é©Ÿåç¨±</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Get changed file count and apply label</span>
        <span class="c1"># æ­¥é©Ÿ ID (å¯çœç•¥ï¼Œå¾ŒçºŒè‹¥æ²’æœ‰ Step è¦å¼•ç”¨ Output è¼¸å‡ºå‰‡ä¸éœ€è¨­å®š)</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">get-changed-files-count-by-gh</span>
        <span class="c1"># ç›´æ¥ä½¿ç”¨åˆ¥äººå°è£å¥½çš„ç¨‹å¼</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pascalgn/size-label-action@v0.5.5"</span>
        <span class="c1"># æ³¨å…¥å¤–éƒ¨ç’°å¢ƒåƒæ•¸åˆ°åŸ·è¡Œéšæ®µ</span>
        <span class="c1"># åƒæ•¸å‘½åã€å¯ç”¨åƒæ•¸è¦åƒè€ƒèªªæ˜ï¼šhttps://github.com/pascalgn/size-label-action/tree/main</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="c1"># secrets.GITHUB_TOKEN æ˜¯ GitHub Actions åŸ·è¡Œæ™‚è‡ªå‹•ç”¢ç”Ÿçš„ Token (github-actions èº«ä»½)ï¼Œä¸éœ€è‡ªè¡Œåœ¨ Secrets è¨­å®šï¼Œæ“æœ‰ä¸€äº› GitHub Repo API Scopes æ¬Šé™</span>
          <span class="c1"># https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows</span>
          <span class="na">GITHUB_TOKEN</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">secrets.GITHUB_TOKEN</span><span class="nv"> </span><span class="s">}}"</span>
</pre></table></code></div></div><p><a href="https://github.com/pascalgn/size-label-action/tree/main" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/1e5c6f52127032dc1a5fea71a498fa9cc585987880889f0306ef705de3990867/pascalgn/size-label-action" alt="" loading="lazy"></a></p><p>é€™å€‹åŒ…å¥½çš„ Action æ˜¯ JavaScript Actionï¼Œå¯¦éš›åŸ·è¡Œç¨‹å¼ç¢¼å¯ä»¥åƒè€ƒä»¥ä¸‹æª”æ¡ˆï¼š <a href="https://github.com/pascalgn/size-label-action/blob/main/dist/index.js" target="_blank">dist/index.js</a> ã€‚</p><h4 id="name-run-name-çš„è£œå……"><span class="me-2">name, run-name çš„è£œå……ï¼š</span><a href="#name-run-name-çš„è£œå……" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*zBmjm_3AU53NN0UhTrmOBQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*zBmjm_3AU53NN0UhTrmOBQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDEyIiBoZWlnaHQ9IjU2OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><ul><li>name: Action Workflow çš„åç¨±<li>run-name: åŸ·è¡Œç´€éŒ„çš„æ¨™é¡Œåç¨± (å¯å¸¶å…¥ PR Title or Branch or Authorâ€¦etc) å¦‚æœæ˜¯ on:pull_request äº‹ä»¶é è¨­æ˜¯ PR Titleã€‚</ul><h3 id="æ¡ˆä¾‹--2"><span class="me-2">æ¡ˆä¾‹ â€” 2</span><a href="#æ¡ˆä¾‹--2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>å»ºç«‹ Pull Request å¾Œå¦‚æœæ²’æœ‰ Assignee å‰‡è‡ªå‹• Assign ä½œè€…è‡ªå·±ä¸¦ä¸” Comment æç¤ºã€‚(åªæœ‰åœ¨åˆæ¬¡å»ºç«‹æ™‚æ‰æœƒåŸ·è¡Œ)</p><h4 id="æˆæœåœ–-1"><span class="me-2">æˆæœåœ–</span><a href="#æˆæœåœ–-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*EL-0nQF7jhP34d6ZoSkJAg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*EL-0nQF7jhP34d6ZoSkJAg.webp" alt="[Demo PR](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjk3IiBoZWlnaHQ9IjczNyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">Demo PR</a></p><h4 id="é‹ä½œæµç¨‹-1"><span class="me-2">é‹ä½œæµç¨‹</span><a href="#é‹ä½œæµç¨‹-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>ä½¿ç”¨è€…é–‹ PR<li>è§¸ç™¼ GitHub Actions Workflow<li>github script å–å¾— assignee<li>å¦‚æœæ²’æœ‰ asignee å‰‡ assign é–‹ PR çš„ä½œè€… &amp; Comment è¨Šæ¯<li>å®Œæˆ</ul><h4 id="å‹•æ‰‹åš-1"><span class="me-2">å‹•æ‰‹åš</span><a href="#å‹•æ‰‹åš-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Actions â†’ New workflow â†’ set up a workflow yourselfã€‚</p><p><strong>æª”æ¡ˆåç¨±ï¼š</strong> <code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code> (åŒä¸Š)</p><h4 id="automation-pullrequestyml-1"><span class="me-2"><code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code></span><a href="#automation-pullrequestyml-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) åç¨±</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Reqeust Automation</span>

<span class="c1"># Actions Log çš„æ¨™é¡Œåç¨±</span>
<span class="na">run-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Pull</span><span class="nv"> </span><span class="s">Reqeust</span><span class="nv"> </span><span class="s">Automation</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">Daily</span><span class="nv"> </span><span class="s">Checker"</span>

<span class="c1"># è§¸ç™¼äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># PR äº‹ä»¶</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="c1"># PR - é–‹å•Ÿã€é‡é–‹ã€æœ‰æ–° Push Commit æ™‚</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">,</span> <span class="nv">synchronize</span><span class="pi">,</span> <span class="nv">reopened</span><span class="pi">]</span>


<span class="c1"># åŒå€‹ Concurrency Group å¦‚æœæœ‰æ–°çš„ Job æœƒå–æ¶ˆæ­£åœ¨è·‘çš„</span>
<span class="c1"># ä¾‹å¦‚ Push Commit è§¸ç™¼çš„ä»»å‹™é‚„æ²’åŸ·è¡Œå°±åˆ Push Commit æ™‚ï¼Œæœƒå–æ¶ˆå‰ä¸€å€‹ä»»å‹™</span>
<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.ref_name }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># Job å·¥ä½œé …ç›®</span>
<span class="c1"># Job æœƒä¸¦ç™¼åŸ·è¡Œ</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">label-pr-by-file-count</span><span class="pi">:</span>
    <span class="c1"># è«‹åƒè€ƒå‰æ–‡ï¼Œç•¥....</span>
  <span class="c1"># ---------</span>
  <span class="na">assign-self-if-no-assignee</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Automatically assign to self if no assignee is specified</span>
    <span class="c1"># å› ç‚ºæ˜¯å…±ç”¨è§¸ç™¼äº‹ä»¶ï¼Œæ‰€ä»¥åœ¨ Job ä¸Šè‡ªå·±åˆ¤æ–·ï¼Œç•¶æ˜¯ Pull Request Opened(é¦–æ¬¡å»ºç«‹) æ™‚æ‰åŸ·è¡Œ Job å¦å‰‡æœƒ Skipped</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">github.event_name == 'pull_request' &amp;&amp; github.event.action == 'opened'</span>

    <span class="c1"># å¦‚æœé€™å€‹ Job å¤±æ•—ï¼Œä¸å½±éŸ¿æ•´å€‹ Workflowï¼Œç¹¼çºŒå…¶ä»– Job</span>
    <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
    
    <span class="c1"># è¨­å®šæœ€é•· Timeout æ™‚é–“ï¼Œé˜²æ­¢ç•°å¸¸æƒ…æ³ç™¼ç”Ÿæ™‚ç„¡æ­¢ç›¡çš„ç­‰å¾…</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">10</span>
    
    <span class="c1"># Runner Label - ä½¿ç”¨ GitHub Hosted Runner ubuntu-latest ä¾†åŸ·è¡Œå·¥ä½œ</span>
    <span class="c1"># å¦‚æœæ˜¯ Private Repo æœƒè¨ˆç®—ç”¨é‡ï¼Œè¶…éå¯èƒ½æœƒç”¢ç”Ÿè²»ç”¨</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Assign self if No Assignee</span>
        <span class="c1"># ä½¿ç”¨ GitHub Script (JavaScript) æ’°å¯«è…³æœ¬ (Node.js ç’°å¢ƒ)</span>
        <span class="c1"># ç›¸è¼ƒä¸Šé¢ç›´æ¥ç”¨ Shell Script å¯«èµ·ä¾†æ›´æ–¹ä¾¿æ¼‚äº®</span>
        <span class="c1"># ä¹Ÿä¸éœ€è¦è‡ªè¡Œæ³¨å…¥ç’°å¢ƒè®Šæ•¸ã€GITHUB_TOKEN</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">// github-script ä¸­æœƒè‡ªå‹•æ³¨å…¥åˆ° context è®Šæ•¸ä¾› javascript ç›´æ¥å¼•ç”¨</span>
            <span class="s">// https://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>

            <span class="s">const issue = context.payload.pull_request; // å¦‚æœè¦é€£ Issue ä¸€èµ·æ”¯æ´å¯å¯«æˆ context.payload.issue || context.payload.pull_request</span>
            <span class="s">const assignees = issue.assignees || [];</span>
            <span class="s">const me = context.actor;</span>

            <span class="s">if (assignees.length === 0) {</span>
              <span class="s">// Assignee è¨­æˆè‡ªå·±</span>
              <span class="s">await github.rest.issues.addAssignees({</span>
                <span class="s">owner: context.repo.owner,</span>
                <span class="s">repo: context.repo.repo,</span>
                <span class="s">issue_number: issue.number,</span>
                <span class="s">assignees: [me]</span>
              <span class="s">});</span>

              <span class="s">// ç•™è¨€é€šçŸ¥</span>
              <span class="s">await github.rest.issues.createComment({</span>
                <span class="s">owner: context.repo.owner,</span>
                <span class="s">repo: context.repo.repo,</span>
                <span class="s">issue_number: issue.number,</span>
                <span class="s">body: `ğŸ”§ No assignee was set, so I have assigned this to myself (@${me}).`</span>
              <span class="s">});</span>
            <span class="s">}</span>
</pre></table></code></div></div><p>é€™æ¬¡æˆ‘å€‘ç¤ºç¯„æ”¹ç”¨ GitHub Script (JavaScript) æ’°å¯«è…³æœ¬ï¼Œç¨‹å¼ç¢¼èªæ³•ä¸Šæ›´å½ˆæ€§æ›´å¥½æ’°å¯«ã€‚</p><p>ç•¶ç„¶å¦‚æœä½ æƒ³ç…§æˆ‘ä¹‹å‰èªªçš„æ¯å€‹ä»»å‹™ä¸€å€‹æª”æ¡ˆï¼Œå°±å¯ä»¥æ‹”æ‰ Job If. . ç›´æ¥åœ¨ Action Workflow è§¸ç™¼æ¢ä»¶è¨­å®šï¼š</p><p><code class="language-plaintext highlighter-rouge">Automation-PullRequest-Auto-Assign.yml</code> <strong>ï¼š</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) åç¨±</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Reqeust Automation - Auto Assignee Self</span>

<span class="c1"># è§¸ç™¼äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># PR äº‹ä»¶</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="c1"># PR - é–‹å•Ÿæ™‚</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">assign-self-if-no-assignee</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Automatically assign to self if no assignee is specified</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># è«‹åƒè€ƒå‰æ–‡ï¼Œç•¥....</span>
</pre></table></code></div></div><p>Commit æª”æ¡ˆåˆ° Repo ä¸»åˆ†æ”¯ä¹‹å¾Œï¼Œæˆ‘å€‘å†é–‹æ–° PR å°±æœƒè‡ªå‹•è§¸ç™¼ GitHub Actionsï¼š</p><p><a href="/assets/404bd5c70040/1*Y-A6owUibNEFBoRFHnqIYg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Y-A6owUibNEFBoRFHnqIYg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY2OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>ç¾åœ¨æœ‰å…©å€‹ Job è¦åŸ·è¡Œäº†ï¼</p><h4 id="åŸ·è¡Œçµæœ-1"><span class="me-2">åŸ·è¡Œçµæœ</span><a href="#åŸ·è¡Œçµæœ-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*23muCVgUJKmZt746khBMFQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*23muCVgUJKmZt746khBMFQ.webp" alt="[Demo PR](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzUwIiBoZWlnaHQ9IjExMDEiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">Demo PR</a></p><p>åŸ·è¡Œå®Œç•¢ä¸¦ä¸”æˆåŠŸå¾Œ PR å¦‚æœæ²’æœ‰ Asignees æœƒè‡ªå‹• Assign PR ä½œè€…ä¸¦ä¸” Comment è¨Šæ¯ã€‚(éƒ½æ˜¯ç”¨ <code class="language-plaintext highlighter-rouge">github-actions</code> èº«ä»½æ“ä½œ)</p><p><strong>å®Œæ•´ç¨‹å¼ç¢¼ï¼š <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Automation-PullRequest.yml" target="_blank">Automation-PullRequest.yml</a></strong></p><h4 id="æ¸¬è©¦é‡é–‹reopened-pr"><span class="me-2">æ¸¬è©¦é‡é–‹(Reopened) PR</span><a href="#æ¸¬è©¦é‡é–‹reopened-pr" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*mcDa7TZjv6mO7HtwhOE-Vw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*mcDa7TZjv6mO7HtwhOE-Vw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NjAiIGhlaWdodD0iNDA3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>å¯çœ‹åˆ°åªæœƒåŸ·è¡Œ Size Label Jobï¼ŒAuto Assignee Job è¢« Skipped äº†ã€‚</p><blockquote><p><em>é€™å€‹ä»»å‹™ä¹Ÿæœ‰äººåŒ…å¥½ Action å¯ä»¥ç›´æ¥å¾©ç”¨ï¼Œå¯åƒè€ƒï¼š <a href="https://github.com/pozil/auto-assign-issue" target="_blank">pozil/auto-assign-issue</a> ã€‚</em></p></blockquote><h3 id="æ¡ˆä¾‹--3"><span class="me-2">æ¡ˆä¾‹ â€” 3</span><a href="#æ¡ˆä¾‹--3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>æ¯æ—¥æ—©ä¸Š 9 é»è‡ªå‹•çµ±è¨ˆç•¶å‰ PR æ•¸é‡åŠå·²é–‹å•Ÿå¤šä¹…æ™‚é–“ç™¼é€é€šçŸ¥è¨Šæ¯åˆ° Slack å·¥ä½œå°‹çµ„ã€è‡ªå‹•é—œé–‰å·²é–‹å•Ÿè¶…é 3 å€‹æœˆçš„ PRã€‚</p><h4 id="æˆæœåœ–-2"><span class="me-2">æˆæœåœ–</span><a href="#æˆæœåœ–-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*0stX9KpZi6PcXpG-90wyIg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*0stX9KpZi6PcXpG-90wyIg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDgiIGhlaWdodD0iMTQ3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/404bd5c70040/1*Nbg3r1zzhx24YIBEjPJnaw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Nbg3r1zzhx24YIBEjPJnaw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MjgiIGhlaWdodD0iMTg3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>Slack å·¥ä½œç¾¤çµ„æ¯å¤©æ—©ä¸Šè‡ªå‹•æ”¶åˆ°å ±å‘Š<li>è‡ªå‹•é—œé–‰è¶…é 90 å¤©çš„ PR</ul><h4 id="é‹ä½œæµç¨‹-2"><span class="me-2">é‹ä½œæµç¨‹</span><a href="#é‹ä½œæµç¨‹-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>GitHub Actions æ¯å¤©æ—©ä¸Š 9 é»è‡ªå‹•è§¸ç™¼<li>è§¸ç™¼ GitHub Actions Workflow<li>github script å–å¾— é–‹å•Ÿä¸­çš„ PR åˆ—è¡¨ã€çµ±è¨ˆé–‹å•Ÿäº†å¹¾å¤©<li>å‚³é€çµ±è¨ˆå ±å‘Šè¨Šæ¯åˆ° Slack<li>é—œé–‰è¶…é 90 å¤©çš„ PR<li>å®Œæˆ</ul><h4 id="å‹•æ‰‹åš-2"><span class="me-2">å‹•æ‰‹åš</span><a href="#å‹•æ‰‹åš-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Actions â†’ New workflow â†’ set up a workflow yourselfã€‚</p><p><strong>æª”æ¡ˆåç¨±ï¼š</strong> <code class="language-plaintext highlighter-rouge">Automation-PullRequest-Daily.yml</code></p><h4 id="automation-pullrequest-dailyyml"><span class="me-2">Automation-PullRequest-Daily.yml</span><a href="#automation-pullrequest-dailyyml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) åç¨±</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Reqeust Automation - Daily Checker</span>

<span class="c1"># è§¸ç™¼äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># æ’ç¨‹å®šæ™‚è‡ªå‹•åŸ·è¡Œ</span>
  <span class="c1"># https://crontab.guru/</span>
  <span class="c1"># UTC æ™‚é–“</span>
  <span class="na">schedule</span><span class="pi">:</span>
    <span class="c1"># UTC çš„ 01:00 = æ¯å¤© UTC+8 çš„ 09:00</span>
    <span class="pi">-</span> <span class="na">cron</span><span class="pi">:</span> <span class="s1">'</span><span class="s">0</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*'</span>
  <span class="c1"># æ‰‹å‹•è§¸ç™¼</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>

<span class="c1"># Job å·¥ä½œé …ç›®</span>
<span class="c1"># Job æœƒä¸¦ç™¼åŸ·è¡Œ</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">caculate-pr-status</span><span class="pi">:</span>
    <span class="c1"># Job åç¨± (å¯çœç•¥ï¼Œæœ‰è¨­å®šåœ¨ Log é¡¯ç¤ºæ¯”è¼ƒå¥½è®€)</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Caculate PR Status</span>
    <span class="c1"># Runner Label - ä½¿ç”¨ GitHub Hosted Runner ubuntu-latest ä¾†åŸ·è¡Œå·¥ä½œ</span>
    <span class="c1"># å¦‚æœæ˜¯ Private Repo æœƒè¨ˆç®—ç”¨é‡ï¼Œè¶…éå¯èƒ½æœƒç”¢ç”Ÿè²»ç”¨</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="c1"># Job Output</span>
    <span class="na">outputs</span><span class="pi">:</span>
      <span class="na">pr_list</span><span class="pi">:</span> <span class="s">${{ steps.pr-info.outputs.pr_list }}</span>

    <span class="c1"># å·¥ä½œæ­¥é©Ÿ</span>
    <span class="c1"># å·¥ä½œæ­¥é©Ÿæœƒç…§é †åºåŸ·è¡Œ</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># æ­¥é©Ÿåç¨±</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Fetch open PRs and caculate</span>
        <span class="c1"># Step å¤–éƒ¨è¦å¼•ç”¨ Output è¼¸å‡ºï¼Œéœ€è¨­å®š</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">pr-info</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">const now = new Date();</span>
            <span class="s">const per_page = 100;</span>
            <span class="s">let page = 1;</span>
            <span class="s">let allPRs = [];</span>
      
            <span class="s">while (true) {</span>
              <span class="s">const { data: prs } = await github.rest.pulls.list({</span>
                <span class="s">owner: context.repo.owner,</span>
                <span class="s">repo: context.repo.repo,</span>
                <span class="s">state: 'open',</span>
                <span class="s">per_page,</span>
                <span class="s">page,</span>
              <span class="s">});</span>
              <span class="s">if (prs.length === 0) break;</span>
              <span class="s">allPRs = allPRs.concat(prs);</span>
              <span class="s">if (prs.length &lt; per_page) break;</span>
              <span class="s">page++;</span>
            <span class="s">}</span>
      
            <span class="s">const result = allPRs.map(pr =&gt; {</span>
              <span class="s">const created = new Date(pr.created_at);</span>
              <span class="s">const daysOpen = Math.floor((now - created) / (1000 * 60 * 60 * 24));</span>
              <span class="s">return {</span>
                <span class="s">pr: pr.number.toString(),</span>
                <span class="s">title: pr.title,</span>
                <span class="s">idle: daysOpen</span>
              <span class="s">};</span>
            <span class="s">});</span>

            <span class="s">// è¨­å®šå› Outputï¼Œåªæ¥å— String</span>
            <span class="s">core.setOutput('pr_list', JSON.stringify(result));</span>
  <span class="c1"># ----</span>
  <span class="na">send-pr-summary-message-to-slack</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Send PR Summary Messag to Slack</span>
    <span class="c1"># Job é è¨­æ˜¯ä¸¦ç™¼ï¼Œä½¿ç”¨ needs å¯ä»¥è¿«ä½¿ç•¶å‰ Job ç­‰åˆ° need Job å®Œæˆæ™‚æ‰æœƒåŸ·è¡Œ</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">caculate-pr-status</span><span class="pi">]</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Generate Message</span>
        <span class="c1"># Step å¤–éƒ¨è¦å¼•ç”¨ Output è¼¸å‡ºï¼Œéœ€è¨­å®š</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">gen-msg</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">const prList = JSON.parse(`${{ needs.caculate-pr-status.outputs.pr_list }}`);</span>
            <span class="s">const blocks = [];</span>
      
            <span class="s">// æ¨™é¡Œ</span>
            <span class="s">blocks.push({</span>
              <span class="s">type: "section",</span>
              <span class="s">text: {</span>
                <span class="s">type: "mrkdwn",</span>
                <span class="s">text: `ğŸ“¬ *Open PR Report*\nTotal: *${prList.length}* PR(s)`</span>
              <span class="s">}</span>
            <span class="s">});</span>
      
            <span class="s">// æ¯å€‹ PR ä¸€è¡Œ</span>
            <span class="s">for (const pr of prList) {</span>
              <span class="s">blocks.push({</span>
                <span class="s">type: "section",</span>
                <span class="s">text: {</span>
                  <span class="s">type: "mrkdwn",</span>
                  <span class="s">text: `â€¢ &lt;https://github.com/${context.repo.owner}/${context.repo.repo}/pull/${pr.pr}|PR #${pr.pr}&gt; *${pr.title}* - ğŸ•’ ${pr.idle} day(s)`</span>
                <span class="s">}</span>
              <span class="s">});</span>
            <span class="s">}</span>

            <span class="s">// è¨­å®šå› Outputï¼Œåªæ¥å— String</span>
            <span class="s">core.setOutput('blocks', JSON.stringify(blocks));</span>

            
      <span class="c1"># ä½¿ç”¨ Slack å®˜æ–¹å°è£å¥½çš„ Slack API Github Actions</span>
      <span class="c1"># https://tools.slack.dev/slack-github-action/sending-techniques/sending-data-slack-api-method/</span>
      <span class="c1"># ç™¼é€è¨Šæ¯</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Post text to a Slack channel</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">slackapi/slack-github-action@v2.1.0</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">method</span><span class="pi">:</span> <span class="s">chat.postMessage</span>
          <span class="na">token</span><span class="pi">:</span> <span class="s">${{ secrets.SLACK_BOT_TOKEN }}</span>
          <span class="na">payload</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">channel: ${{ vars.SLACK_TEAM_CHANNEL_ID }}</span>
            <span class="s">blocks: ${{ steps.gen-msg.outputs.blocks }}</span>
  <span class="c1"># ----</span>
  <span class="na">auto-close-old-prs</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Auto Close Old PRs</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">caculate-pr-status</span><span class="pi">]</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Auto close PRs opened more than 90 days</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">const prList = JSON.parse(`${{ needs.caculate-pr-status.outputs.pr_list }}`);</span>
            <span class="s">const oldPRs = prList.filter(pr =&gt; pr.idle &gt; 90);</span>

            <span class="s">for (const pr of oldPRs) {</span>
              <span class="s">await github.rest.pulls.update({</span>
                <span class="s">owner: context.repo.owner,</span>
                <span class="s">repo: context.repo.repo,</span>
                <span class="s">pull_number: parseInt(pr.pr),</span>
                <span class="s">state: 'closed'</span>
              <span class="s">});</span>

              <span class="s">await github.rest.issues.createComment({</span>
                <span class="s">owner: context.repo.owner,</span>
                <span class="s">repo: context.repo.repo,</span>
                <span class="s">issue_number: parseInt(pr.pr),</span>
                <span class="s">body: `âš ï¸ This pull request has been automatically closed because it has been open for more than 90 days. Please reopen if needed.`</span>
              <span class="s">});</span>
            <span class="s">}</span>
            <span class="s">console.log(`Closed ${oldPRs.length} PR(s)`);</span>
</pre></table></code></div></div><p>åœ¨é€™å€‹ç¯„ä¾‹ä¸­æˆ‘å€‘ä½¿ç”¨ï¼š</p><ul><li>on: schedule Crontab æ’ç¨‹è‡ªå‹•è§¸ç™¼è·Ÿ workflow_dispatch æ”¯æ´æ‰‹å‹•è§¸ç™¼<li>Job output/Step output (éƒ½åªèƒ½æ˜¯å­—ä¸²)<li>å¤šå€‹ Jobs é è¨­æ˜¯ä¸¦ç™¼ä½†å¯ä»¥ç”¨ <code class="language-plaintext highlighter-rouge">needs</code> æ™‚é–“ä¾è³´ç­‰å¾…é—œä¿‚<li>å¾ Repo Secrets/Variables å–å¾—è¨­å®š<li>ä¸²æ¥ Slack API</ul><p><strong>Repo Secrets â€” æ–°å¢</strong> <code class="language-plaintext highlighter-rouge">SLACK_BOT_TOKEN</code></p><p><a href="/assets/404bd5c70040/1*YC4DBHtKmX5XGgcSSzaE5A.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*YC4DBHtKmX5XGgcSSzaE5A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjIxIiBoZWlnaHQ9Ijk4NyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><ul><li>Slack App å»ºç«‹ã€ç™¼è¨Šæ¯æ¬Šé™è¨­å®šå¯åƒè€ƒæˆ‘ <a href="https://zhgchg.li/posts/zrealm-dev/slack-app-%E6%95%B4%E5%90%88-chatgpt-%E5%88%A9%E7%94%A8-openai-api-%E8%88%87-google-cloud-functions-%E8%87%AA%E5%BB%BA%E6%99%BA%E8%83%BD%E5%8A%A9%E7%90%86-bd94cc88f9c9/">ä¹‹å‰çš„æ–‡ç« </a></ul><p><strong>Repo Variables â€” æ–°å¢</strong> <code class="language-plaintext highlighter-rouge">SLACK_TEAM_CHANNEL_ID</code></p><p><a href="/assets/404bd5c70040/1*X4gZ5_IRvsiehAL0O9AleQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*X4gZ5_IRvsiehAL0O9AleQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTc0IiBoZWlnaHQ9Ijk5OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Commit æª”æ¡ˆåˆ° Repo ä¸»åˆ†æ”¯ä¹‹å¾Œï¼Œå›åˆ° Actions æ‰‹å‹•è§¸ç™¼çœ‹çœ‹ï¼š</p><blockquote><p><em>æ—¥å¾Œæœƒæ¯æ—¥è‡ªå‹•è§¸ç™¼ã€‚</em></p></blockquote><p><a href="/assets/404bd5c70040/1*WNFKXl-QC2WGyaSWep5-DA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*WNFKXl-QC2WGyaSWep5-DA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDQ4IiBoZWlnaHQ9IjQzOCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Actions â†’ Pull Request Automation â€” Daily Checker â†’ Run workflow â†’ Branch: main â†’ Run workflowã€‚</p><p><strong>åŸ·è¡Œå¾Œå¯ä»¥é»æ“Šé€²å…¥æŸ¥çœ‹åŸ·è¡Œç‹€æ³ï¼š</strong></p><p><a href="/assets/404bd5c70040/1*4mvOxnd1uS4ZlxnNoNdHaQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*4mvOxnd1uS4ZlxnNoNdHaQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDg3IiBoZWlnaHQ9IjU0NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/404bd5c70040/1*BluzFgY2tM2E7DwoVq1jQw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*BluzFgY2tM2E7DwoVq1jQw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDMwIiBoZWlnaHQ9IjQ1OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>å› ç‚ºæœ‰ <code class="language-plaintext highlighter-rouge">needs</code> çš„é™åˆ¶ï¼ŒJobs æµç¨‹å°±æœƒæ˜¯ <code class="language-plaintext highlighter-rouge">Cacluate PR Status</code> å…ˆå®Œæˆå¾Œæ‰æœƒä¸¦ç™¼åŸ·è¡Œ <code class="language-plaintext highlighter-rouge">Auto Close Old PRs</code> å’Œ <code class="language-plaintext highlighter-rouge">Send PR Summary Message to Slack</code> ã€‚</p><h4 id="åŸ·è¡Œçµæœ-2"><span class="me-2">åŸ·è¡Œçµæœ</span><a href="#åŸ·è¡Œçµæœ-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>ä»»å‹™éƒ½æˆåŠŸåŸ·è¡Œå¾Œå¯ä»¥æŸ¥çœ‹ Slack è¨Šæ¯ï¼š</strong></p><p><a href="/assets/404bd5c70040/1*0stX9KpZi6PcXpG-90wyIg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*0stX9KpZi6PcXpG-90wyIg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDgiIGhlaWdodD0iMTQ3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>æˆåŠŸ ğŸš€ğŸš€ğŸš€</p><p><strong>å®Œæ•´ç¨‹å¼ç¢¼ï¼š <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Automation-PullRequest-Daily.yml" target="_blank">Automation-PullRequest-Daily.yml</a></strong></p><h3 id="å°çµ"><span class="me-2">å°çµ</span><a href="#å°çµ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><p>å¸Œæœ›ä¸Šé¢ä¸‰å€‹æ¡ˆä¾‹èƒ½è®“æ‚¨å° GitHub Actions æœ‰å€‹åˆæ­¥çš„äº†è§£ä¹Ÿå¸Œæœ›æœ‰æ¿€èµ·ä½ çš„è‡ªå‹•åŒ–å·¥ä½œå‰µæ„ï¼Œå¯ä»¥è‡ªå·±ç™¼æƒ³å·¥ä½œæµç¨‹(è«‹å‹™å¿…å…ˆåƒè€ƒ <a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows" target="_blank">è§¸ç™¼äº‹ä»¶</a> )ï¼Œç„¶å¾Œæ’°å¯«è…³æœ¬åŸ·è¡Œï¼›ä¹Ÿè¨˜å¾—å…ˆå» <a href="https://github.com/marketplace?type=actions" target="_blank"><strong>Marketplace</strong></a> æ‰¾æ‰¾ç¾æœ‰çš„æ­¥é©Ÿå¯ä»¥ç«™åœ¨å·¨äººçš„è‚©è†€ç›´æ¥ä½¿ç”¨ã€‚</p></blockquote><p>æœ¬ç¯‡åªæ˜¯å…¥é–€åŸºç¤(ç”šè‡³æ²’ Checkout Code)ï¼Œä¸‹ä¸€ç¯‡ã€Œ <a href="https://zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/"><strong>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å¯¦ä½œ App å°ˆæ¡ˆçš„ CI èˆ‡ CD å·¥ä½œæµç¨‹</strong></a> ã€æœƒåœ¨ä»‹ç´¹æ›´è¤‡é›œæ·±å…¥çš„ GitHub Actions Workflowã€‚</p><h4 id="github-è‡ªå‹•åŒ–å»¶ä¼¸è­°é¡Œ"><span class="me-2">GitHub è‡ªå‹•åŒ–å»¶ä¼¸è­°é¡Œ</span><a href="#github-è‡ªå‹•åŒ–å»¶ä¼¸è­°é¡Œ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>GitHub å¯ä»¥èˆ‡ Slack æ•´åˆï¼Œè¨‚é–± Repo çš„ PR æ›´æ–°é€šçŸ¥ã€Push Default Branch é€šçŸ¥â€¦ç­‰ç­‰ã€‚</p><p><a href="/assets/404bd5c70040/1*BMTT4koRBIIsQ7_mklC86w.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*BMTT4koRBIIsQ7_mklC86w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MzkiIGhlaWdodD0iNDMwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>å•é¡Œ 1. GitHub è¨Šæ¯ç„¡æ³•æ¨™è¨˜åˆ°äººï¼Œåªæ¨™è¨˜äº† GitHub å¸³è™Ÿï¼ŒSlack å¸³è™Ÿæ”¶ä¸åˆ°é€šçŸ¥ï¼š</strong></p><p><a href="/assets/404bd5c70040/1*Ddp0cEtXE10hScM1rozmtg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Ddp0cEtXE10hScM1rozmtg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzAwIiBoZWlnaHQ9Ijk0NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/404bd5c70040/1*uHGJ7l__AdYoWT9KpvihLQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*uHGJ7l__AdYoWT9KpvihLQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDQzIiBoZWlnaHQ9Ijc3NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://slack.github.com/" target="_blank">Slack App</a> or Apps æœå°‹ GitHub â†’ æ‰“é–‹è¨Šæ¯è¦–çª— â†’å®Œæˆ <strong>Connect GitHub Account</strong> æ­¥é©Ÿï¼Œé€™æ¨£ GitHub æ‰çŸ¥é“ä½ å°æ‡‰çš„ Slack UID æ˜¯ä»€éº¼ï¼Œæ‰èƒ½æ¨™è¨˜ä½ ã€‚</p><p><strong>å•é¡Œ 2. Pull Request Reminder</strong></p><p>æˆ‘è¨˜å¾—é€™æœ¬ä¾†æ˜¯ç¬¬ä¸‰æ–¹é–‹ç™¼çš„åŠŸèƒ½ï¼Œå¾Œä¾†ç›´æ¥æ•´åˆåœ¨ GitHub è£¡é¢äº†ï¼Œä¸è¦å‚»å‚»çš„è‡ªå·±ç”¨ GitHub Actions å¯«è…³æœ¬åšï¼</p><p><a href="/assets/404bd5c70040/1*BpMd2K0NBDE6xB1XzFY94Q.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*BpMd2K0NBDE6xB1XzFY94Q.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDA4IiBoZWlnaHQ9IjEyMDAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><blockquote><p><a href="https://docs.github.com/en/organizations/organizing-members-into-teams/managing-scheduled-reminders-for-your-team" target="_blank"><strong><em>GitHub å…§å»ºçš„æ˜¯ by Team è¨­ç½®ï¼Œä½ éœ€è¦å…ˆç‚ºçµ„ç¹”å¢åŠ  Teamã€Repo åŠ å…¥ Team ç„¶å¾Œæ‰èƒ½è¨­ç½® Pull Request Reminderã€‚</em></strong></a></p></blockquote><ul><li>è¼¸å…¥å®Œ Slack Channel è·Ÿè¦å‰‡å„²å­˜ä¹‹å¾Œæ¯å¤©å°±æœƒè‡ªå‹•å‚³é€æç¤ºè¨Šæ¯è·Ÿæ¨™è¨˜ Reviewer äº†ï¼Œè¨­ç½®å¯ <a href="https://michaelheap.com/github-scheduled-reminders/" target="_blank">åƒè€ƒ</a> ï¼Œçµæœå¦‚ä¸‹åœ–ï¼š</ul><p><a href="/assets/404bd5c70040/1*kvqFXkIKIxP79Wm8vIaN0Q.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*kvqFXkIKIxP79Wm8vIaN0Q.webp" alt="[https://michaelheap.com/github-scheduled-reminders/](https://michaelheap.com/github-scheduled-reminders/){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDAiIGhlaWdodD0iMzE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://michaelheap.com/github-scheduled-reminders/" target="_blank">https://michaelheap.com/github-scheduled-reminders/</a></p><p><strong>å•é¡Œ 4. GitHub PR è¨Šæ¯ï¼Œä½œè€…æ”¶ä¸åˆ°é€šçŸ¥ï¼š</strong></p><p><a href="/assets/404bd5c70040/1*wmtXwXAcQZDXqInRd0ivPw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*wmtXwXAcQZDXqInRd0ivPw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTIiIGhlaWdodD0iNTM1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p><em>é€™æ˜¯ä¸€å€‹è¬å¹´çš„å•é¡Œï¼Œå°±æ˜¯ PR çš„ Slack è¨Šæ¯ <strong>å…¶å¯¦ä½œè€…ä¸¦ä¸çŸ¥é“æœ‰äºº Reply Threads è¨è«–</strong> ï¼ŒGitHub ç™¼çš„é€™å‰‡ Slack è¨Šæ¯åªæœƒæ¨™è¨˜ Reviewersï¼Œä¸æœƒæ¨™è¨˜ Assignee or PR ä½œè€…ã€‚</em></p></blockquote><p>é€™æ™‚å€™ GitHub Actions åšè‡ªå‹•åŒ–å°å·¥å…·å°±æ´¾ä¸Šç”¨å ´äº†ï¼Œæˆ‘å€‘å¯ä»¥åŠ ä¸€å€‹ Job åœ¨ PR Description æœ€å¾Œ Append æ¨™è¨˜ä½œè€…ï¼Œé€™æ¨£è¨Šæ¯å‚³åˆ° Slack ä¹Ÿæœƒä¸€ä¸¦æ¨™è¨˜åˆ°ä½œè€…çš„ Slack:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="c"># Workflow(Action) åç¨±</span>
name: Pull Reqeust Automation
<span class="c"># è«‹åƒè€ƒå‰æ–‡ï¼Œç•¥....</span>

  <span class="c"># ---------</span>
  append-author-to-pr-description:
    name: Append author to PR description
    <span class="c"># å› ç‚ºæ˜¯å…±ç”¨è§¸ç™¼äº‹ä»¶ï¼Œæ‰€ä»¥åœ¨ Job ä¸Šè‡ªå·±åˆ¤æ–·ï¼Œç•¶æ˜¯ Pull Request Opened(é¦–æ¬¡å»ºç«‹) æ™‚æ‰åŸ·è¡Œ Job å¦å‰‡æœƒ Skipped</span>
    <span class="k">if</span>: github.event_name <span class="o">==</span> <span class="s1">'pull_request'</span> <span class="o">&amp;&amp;</span> github.event.action <span class="o">==</span> <span class="s1">'opened'</span>
    
    <span class="c"># å¦‚æœé€™å€‹ Job å¤±æ•—ï¼Œä¸å½±éŸ¿æ•´å€‹ Workflowï¼Œç¹¼çºŒå…¶ä»– Job</span>
    <span class="k">continue</span><span class="nt">-on-error</span>: <span class="nb">true</span>
    
    <span class="c"># è¨­å®šæœ€é•· Timeout æ™‚é–“ï¼Œé˜²æ­¢ç•°å¸¸æƒ…æ³ç™¼ç”Ÿæ™‚ç„¡æ­¢ç›¡çš„ç­‰å¾…</span>
    timeout-minutes: 10
    
    <span class="c"># Runner Label - ä½¿ç”¨ GitHub Hosted Runner ubuntu-latest ä¾†åŸ·è¡Œå·¥ä½œ</span>
    <span class="c"># å¦‚æœæ˜¯ Private Repo æœƒè¨ˆç®—ç”¨é‡ï¼Œè¶…éå¯èƒ½æœƒç”¢ç”Ÿè²»ç”¨</span>
    <span class="c"># ä½†é€™ç¨®è‡ªå‹•åŒ–å°å·¥ä½œä¸å¤ªå®¹æ˜“ç”¨éé‡</span>
    runs-on: ubuntu-latest
    steps:
      - name: Append author to PR description
        <span class="nb">env</span>:
          <span class="c"># secrets.GITHUB_TOKEN æ˜¯ GitHub Actions åŸ·è¡Œæ™‚è‡ªå‹•ç”¢ç”Ÿçš„ Tokenï¼Œä¸éœ€è‡ªè¡Œåœ¨ Secrets è¨­å®šï¼Œæ“æœ‰ä¸€äº› GitHub Repo API Scopes æ¬Šé™</span>
          <span class="c"># gh(GitHub) cli éœ€è¦æ³¨å…¥ GH_TOKEN åˆ° ENVï¼Œgh æ‰æœ‰æ¬Šé™æ“ä½œ</span>
          <span class="c"># https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows</span>
          GH_TOKEN: <span class="k">${</span><span class="p">{ secrets.GITHUB_TOKEN </span><span class="k">}</span><span class="o">}</span>

          <span class="c">#   ${{ github.xxx }} æ˜¯ GitHub Actions Context è¡¨é”å¼</span>
          <span class="c">#   ä¸æ˜¯ Shell è®Šæ•¸ï¼Œè€Œæ˜¯ YAML è§£æéšæ®µç”± GitHub Actions æ›¿æ›æˆå°æ‡‰å€¼</span>
          <span class="c">#   å…¶ä»–åƒæ•¸ï¼šhttps://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>
          PR_NUMBER: <span class="k">${</span><span class="p">{ github.event.pull_request.number </span><span class="k">}</span><span class="o">}</span>
          AUTHOR_TAG: <span class="s1">'@${{ github.event.pull_request.user.login }}'</span>
        run: |
          <span class="nv">PR_BODY</span><span class="o">=</span><span class="si">$(</span>gh <span class="nb">pr </span>view <span class="nv">$PR_NUMBER</span> <span class="nt">--repo</span> <span class="k">${</span><span class="p">{ github.repository </span><span class="k">}</span><span class="o">}</span> <span class="nt">--json</span> body <span class="nt">-q</span> <span class="s2">".body"</span><span class="si">)</span>
          <span class="nv">NEW_BODY</span><span class="o">=</span><span class="si">$(</span><span class="nb">printf</span> <span class="s2">"%s</span><span class="se">\n\n</span><span class="s2">Created by %s"</span> <span class="s2">"</span><span class="nv">$PR_BODY</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$AUTHOR_TAG</span><span class="s2">"</span><span class="si">)</span>
          gh <span class="nb">pr </span>edit <span class="nv">$PR_NUMBER</span> <span class="nt">--repo</span> <span class="k">${</span><span class="p">{ github.repository </span><span class="k">}</span><span class="o">}</span> <span class="nt">--body</span> <span class="s2">"</span><span class="nv">$NEW_BODY</span><span class="s2">"</span>
</pre></table></code></div></div><p><strong>å®Œæ•´ç¨‹å¼ç¢¼ï¼š <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Automation-PullRequest.yml" target="_blank">Automation-PullRequest.yml</a></strong></p><p>é–‹ PR æ™‚æœƒè‡ªå‹•åœ¨æè¿°å¾ŒåŠ ä¸Šä½œè€…è³‡è¨Šã€Slack è¨Šæ¯ä¹Ÿæœƒæ­£ç¢ºçš„æ¨™è¨˜ä½œè€…ï¼š</p><p><a href="/assets/404bd5c70040/1*UtTDtIQJ0vJks79UzCQSAQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*UtTDtIQJ0vJks79UzCQSAQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NTMiIGhlaWdodD0iMzcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/404bd5c70040/1*MjVsFqE--xAq1zSQfCNVdQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*MjVsFqE--xAq1zSQfCNVdQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MTYiIGhlaWdodD0iMjQ0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>å•é¡Œ 5. GitHub ç˜‹ç‹‚å¯„é€šçŸ¥ä¿¡åˆ°ä¿¡ç®±å¾ˆå¹²æ“¾ï¼š</strong></p><p>GitHub Repo é€šçŸ¥è·Ÿ Slack éƒ½æœ‰è¨­å®šå¥½ä¹‹å¾Œï¼Œçµ±ä¸€éƒ½åœ¨ Slack æ”¶é€šçŸ¥äº†ï¼Œå¯ä»¥å» GitHub å€‹äººè¨­å®šæŠŠ Email é€šçŸ¥é—œæ‰ï¼š</p><p><a href="/assets/404bd5c70040/1*INgfO9B2bNFy-Nd1ZjnzOw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*INgfO9B2bNFy-Nd1ZjnzOw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzA2IiBoZWlnaHQ9IjY4NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h4 id="å…¶ä»–"><span class="me-2">å…¶ä»–</span><a href="#å…¶ä»–" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Actions ç›®å‰æ²’æœ‰ç›®éŒ„çµæ§‹ï¼Œä½†å¯ä»¥åœ¨ Actions é ï¼Œç½®é ‚(Pin) äº”å€‹ Actionsï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨ Disable æš«åœæŸå€‹ Actionã€‚</p><p><a href="/assets/404bd5c70040/1*ZD-5xkparhJqtnm2REeu6A.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*ZD-5xkparhJqtnm2REeu6A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjM4IiBoZWlnaHQ9IjU5OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>å¯ä»¥åœ¨ Insights æŸ¥çœ‹ GitHub Actions ç”¨é‡è·ŸåŸ·è¡Œæˆæ•ˆï¼š</p><p><a href="/assets/404bd5c70040/1*re91ZRtQ0frOF6GVJ-MKrw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*re91ZRtQ0frOF6GVJ-MKrw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjU5MSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h3 id="reuse-workflow-è£œå……"><span class="me-2">Reuse Workflow è£œå……</span><a href="#reuse-workflow-è£œå……" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://zhgchg.li/posts/zrealm-dev/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87-4273e57e7148/">ä¸‹ä¸€ç¯‡æ–‡ç« </a> æœ‰ç”¨åˆ°åŒå€‹ Repo æ‹† Reuse Workflowï¼Œé€™é‚Šè£œå……ä¸€ä¸‹ä¸åŒ Repo æ‹† Reuse Workflow çš„ç¯„ä¾‹ã€‚</p><p>å…ˆå®šç¾©ä¸€å€‹ Reuse Workflow: <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo-share-actions/blob/main/.github/workflows/Automation-label-pr-base-branch.yml" target="_blank"><strong>Automation-label-pr-base-branch.yml:</strong></a> <strong>åœ¨ <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo-share-actions/blob/main/.github/workflows/Automation-label-pr-base-branch.yml" target="_blank">ZhgChgLi/github-actions-ci-cd-demo-share-actions</a> Repo</strong> ã€‚</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Automation-label-pr-base-branch</span>
<span class="na">run-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[Automation-label-pr-base-branch]</span><span class="nv"> </span><span class="s">${{</span><span class="nv"> </span><span class="s">github.event.inputs.PR_NUMBER</span><span class="nv"> </span><span class="s">||</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>

<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.event.inputs.PR_NUMBER || github.ref }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># è§¸ç™¼äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># å…¶ä»– Workflow å‘¼å«æ­¤ Workflow è§¸ç™¼</span>
  <span class="na">workflow_call</span><span class="pi">:</span>
    <span class="c1"># è³‡æ–™è¼¸å…¥</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="c1"># PR Number</span>
      <span class="na">PR_NUMBER</span><span class="pi">:</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="c1"># å¯†é‘°è¼¸å…¥</span>
    <span class="na">secrets</span><span class="pi">:</span>
      <span class="na">GH_TOKEN</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">GitHub</span><span class="nv"> </span><span class="s">token</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">API</span><span class="nv"> </span><span class="s">access"</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">label-pr-base-branch</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Label PR Base Branch</span>
    <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">10</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Label PR by Base Branch</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">label-pr-base-branch</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">PR_NUMBER="${{ inputs.PR_NUMBER }}"</span>
          <span class="s">REPO="${{ github.repository }}"</span>

          <span class="s">echo "ğŸ“¦ Processing PR #$PR_NUMBER in repo $REPO"</span>

          <span class="s"># å–å¾— PR çš„ base branch</span>
          <span class="s">BASE_BRANCH=$(gh pr view "$PR_NUMBER" --repo "$REPO" --json baseRefName --jq '.baseRefName')</span>
          <span class="s">echo "ğŸ”– PR Base Branch: $BASE_BRANCH"</span>

          <span class="s"># å…è¨±çš„ base branch labels</span>
          <span class="s">BRANCH_LABELS=("develop" "main" "master")</span>

          <span class="s"># Label æ˜¯å¦åœ¨å…è¨±åˆ—è¡¨</span>
          <span class="s">if [[ " ${BRANCH_LABELS[@]} " =~ " ${BASE_BRANCH} " ]]; then</span>
            <span class="s">LABEL="$BASE_BRANCH"</span>
          <span class="s">else</span>
            <span class="s">echo "âš ï¸ Base branch '$BASE_BRANCH' not in allowed list, skipping label."</span>
            <span class="s">exit 0</span>
          <span class="s">fi</span>

          <span class="s"># ç§»é™¤ç¾æœ‰çš„ base branch labels</span>
          <span class="s">EXISTING_LABELS=$(gh pr view "$PR_NUMBER" --repo "$REPO" --json labels --jq '.labels[].name')</span>
          <span class="s">for EXISTING in $EXISTING_LABELS; do</span>
            <span class="s">if [[ " ${BRANCH_LABELS[@]} " =~ " ${EXISTING} " ]]; then</span>
              <span class="s">echo "ğŸ§¹ Removing existing base branch label: $EXISTING"</span>
              <span class="s">gh pr edit "$PR_NUMBER" --repo "$REPO" --remove-label "$EXISTING"</span>
            <span class="s">fi</span>
          <span class="s">done</span>

          <span class="s"># å¦‚æœ Label ä¸å­˜åœ¨å‰‡å»ºç«‹</span>
          <span class="s">if ! gh label list --repo "$REPO" | grep -q "^$LABEL$"; then</span>
            <span class="s">echo "ğŸ†• Creating missing label: $LABEL"</span>
            <span class="s">gh label create "$LABEL" --repo "$REPO" --description "PR targeting $LABEL branch" --color "ededed"</span>
          <span class="s">else</span>
            <span class="s">echo "âœ… Label '$LABEL' already exists"</span>
          <span class="s">fi</span>

          <span class="s"># åŠ ä¸Š base branch label</span>
          <span class="s">echo "ğŸ·ï¸ Adding label '$LABEL' to PR #$PR_NUMBER"</span>
          <span class="s">gh pr edit "$PR_NUMBER" --repo "$REPO" --add-label "$LABEL"</span>
</pre></table></code></div></div><p>å›åˆ°æˆ‘å€‘çš„ <strong>ä¸» <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Demo-Reuse-Action-From-Another-Repo.yml" target="_blank">ZhgChgLi/github-actions-ci-cd-demo</a> Repoï¼Œ</strong> æ–°å¢ä¸€å€‹ä¸» <strong>Workflow <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Demo-Reuse-Action-From-Another-Repo.yml" target="_blank">Demo-Reuse-Action-From-Another-Repo.yml</a> :</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Automation-label-pr-base-branch</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">call-label-pr-workflow</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Call Base Branch Label Workflow</span>
    <span class="c1"># âœ… å¦‚æœè¢«å‘¼å«çš„ workflow åœ¨åŒä¸€å€‹ repoï¼š</span>
    <span class="c1">#    uses: ./.github/workflows/Automation-label-pr-base-branch.yml</span>
    <span class="c1">#    æ³¨æ„ï¼šé€™ç¨®å¯«æ³•ç„¡æ³•æŒ‡å®šåˆ†æ”¯ï¼ˆå›ºå®šä½¿ç”¨ caller workflow çš„ branchï¼‰</span>
    <span class="c1">#    åƒè€ƒç¯„ä¾‹ï¼š</span>
    <span class="c1">#    - CD-Deploy-Form.yml å‘¼å«æœ¬ repo workflow</span>
    <span class="c1">#    - CD-Deploy.yml å‘¼å«è·¨ repo workflow</span>
    <span class="c1">#</span>
    <span class="c1"># âœ… å¦‚æœè¢«å‘¼å«çš„ workflow åœ¨å…¶ä»– repoï¼š</span>
    <span class="c1">#    uses: {owner}/{repo}/.github/workflows/{file}.yml@{branch_or_tag}</span>
    <span class="c1">#    å¯ä»¥æŒ‡å®š branch æˆ– tag</span>
    <span class="c1">#    ref: https://github.com/ZhgChgLi/github-actions-ci-cd-demo-share-actions/blob/main/.github/workflows/Automation-label-pr-base-branch.yml</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">ZhgChgLi/github-actions-ci-cd-demo-share-actions/.github/workflows/Automation-label-pr-base-branch.yml@main</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">PR_NUMBER</span><span class="pi">:</span> <span class="s">${{ github.event.number }}</span>
      
    <span class="c1"># å¦‚æœæ‰€æœ‰ secrets éƒ½è¦ç¹¼æ‰¿ caller workflowï¼Œç›´æ¥ç”¨ `inherit`</span>
    <span class="c1"># secrets: inherit</span>
    <span class="c1">#</span>
    <span class="c1"># å¦‚æœåªè¦å‚³ç‰¹å®š secretsï¼Œå€‹åˆ¥æŒ‡å®š</span>
    <span class="na">secrets</span><span class="pi">:</span>
      <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
</pre></table></code></div></div><p>Commit æª”æ¡ˆå¾Œé–‹ PR è©¦è©¦çœ‹ã€‚</p><p><strong>å·¥ä½œæµç¨‹ï¼šä¸» Repo çš„ <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Demo-Reuse-Action-From-Another-Repo.yml" target="_blank">Demo-Reuse-Action-From-Another-Repo.yml</a> â†’ å‘¼å«ä¸¦æŠŠåƒæ•¸å‚³åˆ°å¦ä¸€å€‹ Repo çš„ <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo-share-actions/blob/main/.github/workflows/Automation-label-pr-base-branch.yml" target="_blank">Automation-label-pr-base-branch.yml</a> åŸ·è¡Œä»»å‹™ â†’ å›åˆ°ä¸» Repo å›å ±çµæœã€‚</strong></p><p><a href="/assets/404bd5c70040/1*13bqlAgpBkHM7UthTJAuOg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*13bqlAgpBkHM7UthTJAuOg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTE5IiBoZWlnaHQ9IjQ1MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/404bd5c70040/1*CAF3HzS4PHBveDQYu3H73g.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*CAF3HzS4PHBveDQYu3H73g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MDIiIGhlaWdodD0iMTQ1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>æˆåŠŸï¼</p><h4 id="private-repo-å­˜å–å•é¡Œ"><span class="me-2">Private Repo å­˜å–å•é¡Œ</span><a href="#private-repo-å­˜å–å•é¡Œ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>é€™é‚Šè¦æ³¨æ„ä¸€å€‹å®‰å…¨æ€§å•é¡Œï¼ŒPublic Repo å®Œå…¨æ²’å•é¡Œï¼Œä½†å¦‚æœ Reuse Workflow åœ¨ Private Repo ç•¶ä¸­ï¼Œåªæœ‰åœ¨ <strong>åŒå€‹çµ„ç¹”ä¸‹çš„å…¶ä»– Repo + Repo åŒæ¨£ä¹Ÿæ˜¯ Private + è¨­å®šå…è¨±</strong> =æ‰èƒ½å­˜å–ä½¿ç”¨ Private Repo Reuse Workflowã€‚</p><ul><li><code class="language-plaintext highlighter-rouge">Public â€” ZhgChgLi/ReuseRepo</code> + <code class="language-plaintext highlighter-rouge">Private or Public-ZhgChgli or harry/myRepo</code> = âœ…<li><code class="language-plaintext highlighter-rouge">Private â€” ZhgChgLi/ReuseRepo</code> + <code class="language-plaintext highlighter-rouge">Private or Publicâ€” harry/myRepo</code> = âŒ<li><code class="language-plaintext highlighter-rouge">Private â€” ZhgChgLi/ReuseRepo</code> + <code class="language-plaintext highlighter-rouge">Public â€” ZhgChgLi/anotherRepo</code> = âŒ<li><code class="language-plaintext highlighter-rouge">Private â€” ZhgChgLi/ReuseRepo</code> + <code class="language-plaintext highlighter-rouge">Private â€” ZhgChgLi/anotherRepo</code> = âœ…</ul><p><strong>è¨­å®šå…è¨±çš„æ–¹å¼ï¼Œè¦å» Reuse Workflow Repo â†’ Settings â†’ Actions â†’ General â†’ Acces:</strong></p><p><a href="/assets/404bd5c70040/1*iZCEifgyArTJS3URMSk01g.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*iZCEifgyArTJS3URMSk01g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MjUiIGhlaWdodD0iMzAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>æ”¹å‹¾é¸ï¼š</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>Accessible from repositories in the 'ZhgChgLi' organization
Workflows in other repositories that are part of the 'ZhgChgLi' organization can access the actions and reusable workflows in this repository. Access is allowed only from private repositories.
</pre></table></code></div></div><p>é»æ“Šã€ŒSaveã€å„²å­˜ï¼Œå®Œæˆã€‚</p><p><strong>å¦‚æœæ²’æ¬Šé™å­˜å–æœƒå‡ºç¾ä»¥ä¸‹éŒ¯èª¤è¨Šæ¯ï¼š</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>Invalid workflow file: .github/workflows/Demo-reuse-action-from-another-repo.yml#L21
error parsing called workflow
<span class="s2">".github/workflows/Demo-reuse-action-from-another-repo.yml"</span>
-&gt; <span class="s2">"ZhgChgLi/github-actions-ci-cd-demo-share-actions/.github/workflows/Automation-label-pr-base-branch.yml@main"</span>
: workflow was not found.
</pre></table></code></div></div><h3 id="github-actions-script-èªæ³•è£œå……"><span class="me-2">GitHub Actions Script èªæ³•è£œå……</span><a href="#github-actions-script-èªæ³•è£œå……" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>è£œå……ä¸€ä¸‹å¤§å®¶å¯èƒ½æœƒæ„Ÿåˆ°ç–‘æƒ‘çš„ <code class="language-plaintext highlighter-rouge">${{ XXX }}</code> or <code class="language-plaintext highlighter-rouge">${XXX}</code> or <code class="language-plaintext highlighter-rouge">$XXX</code> è®Šæ•¸èªæ³•ã€‚</p><p><strong>Demo-Env-Vars- .yml:</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Demo-Env-Vars</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">print-env-vars</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">print-env</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">env</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">context-vars-vs-vars</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">SAY_MY_NAME</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Heisenberg"</span>
          <span class="c1"># GitHub Actions Context è¡¨é”å¼ï¼ŒåŒä¸‹æ–¹è§£é‡‹</span>
          <span class="na">FROM_REF</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s"># Sehll Script:</span>
          <span class="s"># å¼•ç”¨è‡ªè¨‚æ³¨å…¥çš„ ENV è®Šæ•¸å…§å®¹</span>
          <span class="s"># ${SAY_MY_NAME} or $SAY_MY_NAME éƒ½å¯ä»¥</span>
          <span class="s"># ${XX} é‡åˆ°å­—ä¸²æ‹¼æ¥æ¯”è¼ƒå¥½ç”¨:</span>
          <span class="s">echo "HI: ${SAY_MY_NAME}"</span>
          
          <span class="s"># ğŸ’¡ GitHub Actions Context è¡¨é”å¼</span>
          <span class="s"># é€™ä¸æ˜¯ shell è®Šæ•¸ï¼Œè€Œæ˜¯ YAML è§£æéšæ®µç”± GitHub Actions æ›¿æ›æˆå°æ‡‰å€¼</span>
          <span class="s"># âš  åœ¨æœ¬æ©Ÿæˆ–é GitHub Actions ç’°å¢ƒåŸ·è¡Œæœƒå¤±æ•—</span>
          <span class="s"># ğŸ”— https://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>
          <span class="s">BRANCH_NAME_FROM_CONTEXT="${{ github.ref }}"</span>
          
          <span class="s"># ğŸ’¡ GitHub Actions åŸ·è¡Œéšæ®µçš„ç’°å¢ƒè®Šæ•¸</span>
          <span class="s"># é€™äº›è®Šæ•¸åœ¨ runner åŸ·è¡Œ shell æ™‚ç”± GitHub Actions è‡ªå‹•æ³¨å…¥</span>
          <span class="s"># âœ… åœ¨å…¶ä»–ç’°å¢ƒå¯ç”¨ export æˆ– ENV é å…ˆå®šç¾©ç›¸åŒè®Šæ•¸</span>
          <span class="s"># ğŸ”— https://docs.github.com/en/actions/learn-github-actions/environment-variables</span>
          <span class="s">BRANCH_NAME_FROM_ENV_VARS="${GITHUB_REF}"</span>
          
          <span class="s">echo "FROM_REF: ${FROM_REF}"</span>
          <span class="s">echo "BRANCH_NAME_FROM_CONTEXT: ${BRANCH_NAME_FROM_CONTEXT}"</span>
          <span class="s">echo "BRANCH_NAME_FROM_ENV_VARS: ${BRANCH_NAME_FROM_ENV_VARS}"</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">print-github-script-env</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">SAY_MY_NAME</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Heisenberg"</span>
          <span class="c1"># GitHub Actions Context è¡¨é”å¼ï¼ŒåŒä¸Šæ–¹è§£é‡‹</span>
          <span class="na">FROM_REF</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">// GitHub Script: (JavaScript (Node.js)):</span>
            <span class="s">// å¾ process.env å– ENV å€¼</span>
            <span class="s">console.log(`HI: ${process.env.SAY_MY_NAME}`);</span>
            <span class="s">console.log(`FROM_REF: ${process.env.FROM_REF}`);</span>
            <span class="s">// github-script ä¸­æœƒè‡ªå‹•æ³¨å…¥åˆ° context è®Šæ•¸ä¾› javascript ç›´æ¥å¼•ç”¨</span>
            <span class="s">// https://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>
            <span class="s">const branch_name_from_context_vars = context.ref;</span>
            <span class="s">console.log(`branch_name_from_context_vars: ${branch_name_from_context_vars}`);</span>
            <span class="s">// åŒæ¨£ä¹Ÿèƒ½ç”¨ GitHub Actions Context è¡¨é”å¼(åªæ˜¯æ„ç¾©ä¸å¤§):</span>
            <span class="s">const branch_name_from_context = "${{ github.ref }}";</span>
            <span class="s">console.log(`branch_name_from_context: ${branch_name_from_context}`);</span>
            
            <span class="s">for (const [key, value] of Object.entries(process.env)) {</span>
              <span class="s">console.log(`${key}=${value}`);</span>
            <span class="s">}</span>
            <span class="s">// github-script ä¸­çš„ github ç‰©ä»¶æ˜¯ Octokit REST API å¯¦ä¾‹</span>
            <span class="s">// ç”¨ä¾†æ“ä½œ github api ä½¿ç”¨</span>
            <span class="s">// ä¾‹å¦‚ï¼š</span>
            <span class="s">// await github.rest.pulls.list({</span>
            <span class="s">//   owner: context.repo.owner,</span>
            <span class="s">//   repo: context.repo.repo,</span>
            <span class="s">//   state: "open"</span>
            <span class="s">//  });</span>
      <span class="c1"># gh CLI does NOT use GITHUB_TOKEN by default; requires GH_TOKEN</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">gh CLI without GH_TOKEN (expected to fail)</span>
        <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">PR_COUNT=$(gh pr list --repo $GITHUB_REPOSITORY --json number --jq 'length')</span>
          <span class="s">echo "Found $PR_COUNT open pull requests"</span>
      
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">gh CLI with GH_TOKEN (expected to succeed)</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="c1"># Assign GH_TOKEN so gh CLI can authenticate</span>
          <span class="c1"># https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows</span>
          <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">PR_COUNT=$(gh pr list --repo $GITHUB_REPOSITORY --json number --jq 'length')</span>
          <span class="s">echo "Found $PR_COUNT open pull requests"</span>
      
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">github-script auto-authentication (no GH_TOKEN needed)</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">// github = Octokit REST client (auto-authenticated with GITHUB_TOKEN)</span>
            <span class="s">const pulls = await github.rest.pulls.list({</span>
              <span class="s">owner: context.repo.owner,</span>
              <span class="s">repo: context.repo.repo,</span>
              <span class="s">state: "open"</span>
            <span class="s">});</span>
            <span class="s">console.log(`Found ${pulls.data.length} open pull requests`);</span>
</pre></table></code></div></div><h4 id="--xxx---github-actions-context-è¡¨é”å¼"><span class="me-2">${ { XXX } } GitHub Actions Context è¡¨é”å¼</span><a href="#--xxx---github-actions-context-è¡¨é”å¼" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*e3jpPuwdmf005cjbaXjAwQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*e3jpPuwdmf005cjbaXjAwQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3ODkiIGhlaWdodD0iNjg0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/404bd5c70040/1*ed5Wm7Xk48xuP8yQzHpJ9w.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*ed5Wm7Xk48xuP8yQzHpJ9w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4ODAiIGhlaWdodD0iODAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><code class="language-plaintext highlighter-rouge">${{ XXX }}</code> æ˜¯ GitHub Actions Context è¡¨é”å¼ï¼Œ <strong>åœ¨YAML è§£æéšæ®µç”± GitHub Actions æ›¿æ›æˆå°æ‡‰å€¼</strong> (å¦‚ä¸Šåœ– <code class="language-plaintext highlighter-rouge">BRANCH_NAME_FROM_CONTEXT</code> )<li>å®Œæ•´å¯ç”¨è¡¨é”å¼å¯ <a href="https://docs.github.com/en/actions/learn-github-actions/contexts#github-context" target="_blank">åƒè€ƒå®˜æ–¹æ–‡ä»¶</a><li><code class="language-plaintext highlighter-rouge">${XXX}</code> or <code class="language-plaintext highlighter-rouge">$XXX</code> æ˜¯çœŸå¯¦ç’°å¢ƒè®Šæ•¸ï¼Œ <code class="language-plaintext highlighter-rouge">${XXX}</code> åœ¨å­—ä¸²æ‹¼æ¥æ¯”è¼ƒå¥½ç”¨<li>GitHub Actions é è¨­æœƒæ³¨å…¥ä¸€äº›ç’°å¢ƒè®Šæ•¸ï¼Œå®Œæ•´å¯ <a href="https://docs.github.com/en/actions/learn-github-actions/environment-variables" target="_blank">åƒè€ƒå®˜æ–¹æ–‡ä»¶</a></ul><h4 id="actionsgithub-scriptv7"><span class="me-2">actions/github-script@v7</span><a href="#actionsgithub-scriptv7" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*TjJQnlAAU3VRwS9_dFz1yA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*TjJQnlAAU3VRwS9_dFz1yA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MTgiIGhlaWdodD0iOTEzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/404bd5c70040/1*5bHEdjrGsVdWnYSQgpnsZA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*5bHEdjrGsVdWnYSQgpnsZA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDE4IiBoZWlnaHQ9IjExNTAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><ul><li>åœ¨ <code class="language-plaintext highlighter-rouge">github-script</code> ä¸­åŒæ¨£å¯ä»¥ç”¨ <code class="language-plaintext highlighter-rouge">${{ XXX }}</code> æ˜¯ GitHub Actions Context è¡¨é”å¼ï¼Œä½†æ˜¯æ„ç¾©ä¸å¤§ï¼›å› ç‚º <strong>åœ¨ github-scirpt ç’°å¢ƒä¸­é è¨­æœƒæ³¨å…¥ context è®Šæ•¸å¯ä»¥ç›´æ¥åœ¨ javascript ä¸­å¼•ç”¨</strong><li>åœ¨ <code class="language-plaintext highlighter-rouge">github-script</code> ä¸­ <code class="language-plaintext highlighter-rouge">github</code> ç‰©ä»¶æ˜¯ Octokit REST API å¯¦ä¾‹<li><code class="language-plaintext highlighter-rouge">github-script</code> ä¹Ÿèƒ½å¾ <code class="language-plaintext highlighter-rouge">env:</code> æ³¨å…¥è®Šæ•¸ï¼Œä½†æ˜¯è¦ç”¨ <code class="language-plaintext highlighter-rouge">${process.env.xxx}</code> å­˜å–<li>åŒæ¨£é è¨­æœƒæ³¨å…¥ä¸€äº›ç’°å¢ƒè®Šæ•¸ï¼Œå®Œæ•´å¯ <a href="https://docs.github.com/en/actions/learn-github-actions/environment-variables" target="_blank">åƒè€ƒå®˜æ–¹æ–‡ä»¶</a> <code class="language-plaintext highlighter-rouge">${process.env.xxx}</code> å­˜å–ï¼›ä½†æ˜¯å·²ç¶“æœ‰ <code class="language-plaintext highlighter-rouge">context</code> è®Šæ•¸äº†ï¼Œå¾é€™å­˜å–æ„ç¾©ä¹Ÿä¸å¤§</ul><p><a href="/assets/404bd5c70040/1*oW85Sju0sN4caXiaLSg32A.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*oW85Sju0sN4caXiaLSg32A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MzUiIGhlaWdodD0iNDA4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><code class="language-plaintext highlighter-rouge">github-script</code> æœƒè‡ªå‹•å¸¶å…¥ <code class="language-plaintext highlighter-rouge">github-token</code> ï¼Œç„¡éœ€æŒ‡å®š</ul><h4 id="gh-cli-gh_token"><span class="me-2">gh cli GH_TOKEN</span><a href="#gh-cli-gh_token" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*NUfaaKIobZWVBuXrGg0TPw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*NUfaaKIobZWVBuXrGg0TPw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NjYiIGhlaWdodD0iNDMxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>åœ¨ GitHub Actions Shell Script ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">gh cli</code> éœ€æŒ‡å®š <code class="language-plaintext highlighter-rouge">GH_TOKEN</code> åƒæ•¸<li>å¯ä»¥ç›´æ¥å¸¶å…¥é è¨­ Token â€” <code class="language-plaintext highlighter-rouge">secrets.GITHUB_TOKEN</code> (GitHub Actions åŸ·è¡Œæ™‚è‡ªå‹•ç”¢ç”Ÿ)<li><strong>é è¨­ Token æœ‰ä¸€äº›åŸºæœ¬æ¬Šé™ï¼Œå¦‚æœè¦æ“ä½œçš„æŒ‡ä»¤æ¬Šé™ä¸å¤ å°±è¦æ”¹ç”¨ <a href="https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows" target="_blank">Personal Access Token</a></strong> ï¼Œåœ˜éšŠä½¿ç”¨å»ºè­°ç”¨å…±ç”¨å¸³è™Ÿå»ºç«‹ PATã€‚</ul><p><strong>å®Œæ•´ç¨‹å¼ç¢¼ï¼š <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Demo-Env-Vars-.yml" target="_blank">Demo-Env-Vars- .yml</a></strong></p><p>GitHub Actions å·²ç¶“é–‹ç™¼å¥½äº†ï¼Œä¸‹ä¸€æ­¥æˆ‘å€‘å¯ä»¥æŠ½æ› GitHub Hosted Runner æˆè‡ªå·±çš„ Self-hosted Runnerã€‚</p><blockquote><p><em>GitHub Hosted Runner æœ‰å…è²»é¡åº¦ 2,000 åˆ†é˜ä¸€å€‹æœˆ(èµ·)ï¼Œè·‘é€™ç¨®å°çš„è‡ªå‹•åŒ–ä»»å‹™èŠ±ä¸äº†å¤šå°‘æ™‚é–“ï¼Œè€Œä¸”æ˜¯è·‘åœ¨ linux æ©Ÿå™¨èŠ±è²»å¾ˆä½ï¼Œå¯èƒ½é‚„ç”¨ä¸åˆ°å…è²»ä¸Šé™ï¼› <strong>ä¸ä¸€å®šè¦æ”¹æˆ Self-hosted Runner</strong> ï¼Œæ”¹ Runner é‚„è¦ç¢ºä¿ Runner ç’°å¢ƒæ­£ç¢º(ä¾‹å¦‚ GitHub Hosted Runner è‡ªå¸¶ gh cliï¼Œself-hosted Runner å°±è¨˜å¾—è¦è‡ªå·±å®‰è£å¥½)ï¼Œ <strong>æœ¬æ–‡ç´”ç²¹æ˜¯å› ç‚ºæ•™å­¸æ‰æœƒé€™æ¨£æŠ½æ›</strong> ã€‚</em></p></blockquote><blockquote><p><em>å¦‚æœæ˜¯ç”¨åœ¨åŸ·è¡Œ CI/CD ä»»å‹™æ‰å¿…é ˆè¦ç”¨ Self-hosted Runnerã€‚</em></p></blockquote><h4 id="æ–°å¢-self-hosted-runner"><span class="me-2">æ–°å¢ Self-hosted Runner</span><a href="#æ–°å¢-self-hosted-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p><em>æœ¬æ–‡ä»¥ <strong>macOS M1</strong> ç‚ºä¾‹ã€‚</em></p></blockquote><p><a href="/assets/404bd5c70040/1*mEInaj-tLaprMAa2OfowCw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*mEInaj-tLaprMAa2OfowCw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjExMTMiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><ul><li>Settings â†’ Actions â†’ Runners â†’ New self-hosted runnerã€‚<li><strong>Runner image:</strong> macOS<li><strong>Architecture</strong> : M1 è¨˜å¾—é¸ ARM64 åŸ·è¡Œæ¯”è¼ƒå¿«</ul><p><strong>åœ¨å¯¦é«”é›»è…¦ä¸Šé–‹ä¸€å€‹ Termnialã€‚</strong></p><p><strong>æŒ‰ç…§ Download æ­¥é©Ÿåœ¨æœ¬åœ°é›»è…¦å®Œæˆï¼š</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c"># åœ¨ä½ æƒ³è¦çš„è·¯å¾‘ï¼Œå»ºç«‹ Runner ç›®éŒ„</span>
<span class="nb">mkdir </span>actions-runner <span class="o">&amp;&amp;</span> <span class="nb">cd </span>actions-runner
<span class="c"># ä¸‹è¼‰ Runner image</span>
curl <span class="nt">-o</span> actions-runner-osx-x64-2.325.0.tar.gz <span class="nt">-L</span> https://github.com/actions/runner/releases/download/v2.325.0/actions-runner-osx-x64-2.325.0.tar.gz

<span class="c"># Optional: Validate the hash</span>
<span class="nb">echo</span> <span class="s2">"0562bd934b27ca0c6d8a357df00809fbc7b4d5524d4aeb6ec152e14fd520a4c3  actions-runner-osx-x64-2.325.0.tar.gz"</span> | shasum <span class="nt">-a</span> 256 <span class="nt">-c</span>

<span class="c"># è§£å£“ç¸®</span>
<span class="nb">tar </span>xzf ./actions-runner-osx-x64-2.325.0.tar.gz
</pre></table></code></div></div><blockquote><p><em>ä»¥ä¸Šåªæ˜¯åƒè€ƒï¼›å»ºè­°ç…§ä½ è¨­å®šé è£¡çš„æ­¥é©Ÿä¾†åšï¼Œæ‰æœƒæ˜¯æœ€æ–°ç‰ˆæœ¬çš„ Runner imageã€‚</em></p></blockquote><p><a href="/assets/404bd5c70040/1*Q0k0EPjrY2V4owseESe5lg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Q0k0EPjrY2V4owseESe5lg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTYxIiBoZWlnaHQ9IjE5NyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><strong>è¨­å®š Configure:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># è«‹åƒè€ƒè¨­å®šé æŒ‡ä»¤ï¼ŒToken æœƒéš¨æ™‚é–“æ”¹è®Š</span>
./config.sh <span class="nt">--url</span> https://github.com/ORG/REPO <span class="nt">--token</span> XXX
</pre></table></code></div></div><p>æœƒä¾åºè¦ä½ è¼¸å…¥ï¼š</p><ul><li>Enter the name of the runner group to add this runner to: [press Enter for Default] <strong>ç›´æ¥ Enter</strong> *åªæœ‰è¨»å†Šåˆ° Organization çµ„ç¹”å±¤ç´šçš„ Runner æ‰æœ‰ Group åˆ†çµ„åŠŸèƒ½<li>Enter the name of runner: [press Enter for ZhgChgLideMacBook-Pro] <strong>å¯ä»¥è¼¸å…¥æƒ³è¨­å®šçš„ Runner åç¨± e.g.</strong> <code class="language-plaintext highlighter-rouge">app-runner-1</code> <strong>æˆ–ç›´æ¥ Enter</strong><li>This runner will have the following labels: â€˜self-hostedâ€™, â€˜macOSâ€™, â€˜X64â€™ Enter any additional labels (ex. label-1,label-2): [press Enter to skip] <strong>è¼¸å…¥æƒ³è¦è¨­å®šçš„ Runner labelï¼Œå¯ä»¥å¤šè¼¸å…¥è‡ªè¨‚ Label æ–¹ä¾¿ä¹‹å¾Œä½¿ç”¨</strong> åŒå‰è¿° GitHub Acitons/Runner æ˜¯ä¾ç…§å°æ‡‰ Label æ‰¾ä»»å‹™ä¾†åšï¼Œ <strong>å¦‚æœåªç”¨ default labelï¼ŒRunner å¯èƒ½æœƒæ’¿åˆ°çµ„ç¹”å…§çš„å…¶ä»– Runner ä¾†åŸ·è¡Œå·¥ä½œï¼Œè‡ªè¨‚ä¸€å€‹æœ€ä¿éšª</strong> ã€‚ é€™é‚Šæˆ‘è‡ªå·±äº‚å®šäº†ä¸€å€‹ label <code class="language-plaintext highlighter-rouge">self-hosted-zhgchgli</code><li>Enter name of work folder: [press Enter for _work] <strong>ç›´æ¥ Enter</strong></ul><p>å‡ºç¾ âˆš Settings Saved. ä»£è¡¨è¨­å®šå®Œæˆäº†ã€‚</p><p><a href="/assets/404bd5c70040/1*yxLfii0rWhzsiFuYVmPgFw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*yxLfii0rWhzsiFuYVmPgFw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MjkiIGhlaWdodD0iNTAxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>å•Ÿå‹• Runner:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>./run.sh
</pre></table></code></div></div><p>å‡ºç¾ âˆš Connected to GitHubã€Listening for Jobs å°±ä»£è¡¨å·²ç¶“åœ¨ç›£è½ Actions ä»»å‹™äº†ï¼š</p><p><a href="/assets/404bd5c70040/1*1RmPPOosAoCxHA9tg_WE2w.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*1RmPPOosAoCxHA9tg_WE2w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyOTAiIGhlaWdodD0iOTgiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><blockquote><p><strong><em>é€™å€‹ Terminal è¦–çª—ä¸é—œé–‰å°±æœƒæŒçºŒæ¥æ”¶ä»»å‹™ä¾†åšã€‚</em></strong></p></blockquote><blockquote><p><strong><em>ğŸš€ğŸš€ğŸš€åŒä¸€å°é›»è…¦é–‹å¤šå€‹ Terminal åœ¨ä¸åŒç›®éŒ„å°±èƒ½èµ·å¤šå€‹ Runnerã€‚</em></strong></p></blockquote><p><strong>å›åˆ° Repo è¨­å®šé ä¹Ÿèƒ½çœ‹åˆ° Runner æ­£åœ¨ç­‰å¾…ä»»å‹™ï¼š</strong></p><p><a href="/assets/404bd5c70040/1*jjq5NTPYMuC3gH3ey_VTtg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*jjq5NTPYMuC3gH3ey_VTtg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDIiIGhlaWdodD0iMjQ3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Status:</strong></p><ul><li>Idle: é–‘ç½®ï¼Œåœ¨ç­‰å¾…ä»»å‹™<li>Active: æœ‰ä»»å‹™æ­£åœ¨åŸ·è¡Œ<li>Offline: Runner ä¸åœ¨ç·šä¸Š</ul><h4 id="workflowgithub-actions-runner-æ”¹ç”¨-self-hosted-runner"><span class="me-2">Workflow(GitHub Actions) Runner æ”¹ç”¨ Self-hosted Runner</span><a href="#workflowgithub-actions-runner-æ”¹ç”¨-self-hosted-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>ä»¥ <code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code> ç‚ºä¾‹ï¼š</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c1"># è«‹åƒè€ƒå‰æ–‡ï¼Œç•¥....</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">label-pr-by-file-count</span><span class="pi">:</span>
    <span class="c1"># è«‹åƒè€ƒå‰æ–‡ï¼Œç•¥....</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">self-hosted-zhgchgli</span><span class="pi">]</span>
    <span class="c1"># è«‹åƒè€ƒå‰æ–‡ï¼Œç•¥....</span>
  <span class="c1"># ---------</span>
  <span class="na">assign-self-if-no-assignee</span><span class="pi">:</span>
    <span class="c1"># è«‹åƒè€ƒå‰æ–‡ï¼Œç•¥....</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">self-hosted-zhgchgli</span><span class="pi">]</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># è«‹åƒè€ƒå‰æ–‡ï¼Œç•¥....</span>
</pre></table></code></div></div><p>Commit æª”æ¡ˆåˆ° Repo ä¸»åˆ†æ”¯ä¹‹å¾Œï¼Œé‡æ–°é–‹ PR è§¸ç™¼é©—è­‰ä¸€ä¸‹ Actionsã€‚</p><p><strong>å›åˆ° Runner Terminal å°±èƒ½çœ‹åˆ°æœ‰æ–°çš„ä»»å‹™é€²ä¾†äº†ï¼Œæ­£åœ¨åŸ·è¡Œè·ŸåŸ·è¡Œçµæœï¼š</strong></p><p><a href="/assets/404bd5c70040/1*Hu0DxKQbenPmBEw8swv65A.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Hu0DxKQbenPmBEw8swv65A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MjgiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>å¤±æ•—äº†ï¼Œå› ç‚ºæˆ‘æœ¬æ©Ÿé›»è…¦æ²’æœ‰å®‰è£ <a href="https://github.com/cli/cli" target="_blank">gh cli</a> ç’°å¢ƒï¼š</p><p><a href="/assets/404bd5c70040/1*9xguacdPATIeEZdbFszmHw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*9xguacdPATIeEZdbFszmHw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NzMiIGhlaWdodD0iMTIzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">brew install gh</code> åœ¨å¯¦é«”é›»è…¦ä¸Šå®‰è£å®Œ gh å¾Œå†æ¬¡è§¸ç™¼åŸ·è¡Œï¼š</p><p><a href="/assets/404bd5c70040/1*TbkAt00K89Ysbix33dK8ZA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*TbkAt00K89Ysbix33dK8ZA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MzEiIGhlaWdodD0iMjkiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>æˆåŠŸï¼ç¾åœ¨é€™å€‹ä»»å‹™å°±å®Œå…¨æ˜¯ä½¿ç”¨æˆ‘å€‘è‡ªå·±çš„é›»è…¦åœ¨åŸ·è¡Œï¼Œä¸ä½¿ç”¨ GitHub Hosted Runnerã€ä¸è¨ˆè²»ä½¿ç”¨ã€‚</p><p><strong>æˆ‘å€‘å¯ä»¥é»é€²å» Action Log æŸ¥çœ‹ä»»å‹™åŸ·è¡Œåœ¨çš„ Runnerã€æ©Ÿå™¨æ˜¯å“ªä¸€å€‹ï¼š</strong></p><p><a href="/assets/404bd5c70040/1*oqLcWfn6cbWsCt9fVsrikQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*oqLcWfn6cbWsCt9fVsrikQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDkyIiBoZWlnaHQ9IjgyNiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h4 id="runs-on--runner-label-è¨­å®š"><span class="me-2">runs-on: [ <strong>Runner Label] è¨­å®š</strong></span><a href="#runs-on--runner-label-è¨­å®š" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>é€™è£¡æ˜¯ AND ä¸æ˜¯ ORï¼ŒGitHub Runner æš«ä¸æ”¯æ´ OR æŒ‘é¸ Runner åŸ·è¡Œã€‚</p><p>ä¾‹å¦‚ï¼š <code class="language-plaintext highlighter-rouge">[self-hosted, macOS, app]</code> â†’ ä»£è¡¨ Runner è¦ <strong>åŒæ™‚æœ‰</strong> <code class="language-plaintext highlighter-rouge">self-hosted, macOS, app</code> é€™ 3 å€‹ Labels æ‰æœƒåŒ¹é…æ¥ä»»å‹™ä¾†åŸ·è¡Œã€‚</p><p>å¦‚æœä¸€å€‹ Job æƒ³åŒæ™‚æ¸¬è©¦ä¸åŒ Runner ç’°å¢ƒä¸‹çš„çµæœå¯ä»¥ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">matrix</code> åƒæ•¸ï¼š</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">test</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">${{ matrix.runner }}</span>
    <span class="na">strategy</span><span class="pi">:</span>
      <span class="na">matrix</span><span class="pi">:</span>
        <span class="na">runner</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="pi">[</span><span class="nv">self-hosted</span><span class="pi">,</span> <span class="nv">linux</span><span class="pi">,</span> <span class="nv">high-memory</span><span class="pi">]</span>
          <span class="pi">-</span> <span class="pi">[</span><span class="nv">self-hosted</span><span class="pi">,</span> <span class="nv">macos</span><span class="pi">,</span> <span class="nv">xcode-15</span><span class="pi">]</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">echo "Running on ${{ matrix.runner }}"</span>
</pre></table></code></div></div><p>é€™æ¨£é€™å€‹ Job æœƒåœ¨ä¸‹åˆ—å…©å€‹ Runner Labels Runner ä¸­ä¸¦è¡Œå„åŸ·è¡Œä¸€æ¬¡ï¼š</p><ul><li>self-hosted, linux, high-memory<li>self-hosted, macos, xcode-15</ul><blockquote><p><strong><em>Runner æš«ä¸æ”¯æ´ï¼š</em></strong></p></blockquote><blockquote><p><em>- OR æŒ‘é¸ Runner</em></p></blockquote><blockquote><p><em>- Runner æ¬Šé‡è¨­å®š</em></p></blockquote><h4 id="è¨»å†Š-runner-æˆ-service"><span class="me-2">è¨»å†Š Runner æˆ Service</span><a href="#è¨»å†Š-runner-æˆ-service" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å¯ä»¥åƒè€ƒå®˜æ–¹æ–‡ä»¶ã€Œ <a href="https://docs.github.com/en/actions/how-tos/hosting-your-own-runners/managing-self-hosted-runners/configuring-the-self-hosted-runner-application-as-a-service?platform=mac" target="_blank">Configuring the self-hosted runner application as a service</a> ã€å°‡ Runner ç›´æ¥è¨»å†Šæˆç³»çµ± Serviceï¼Œé€™æ¨£å°±èƒ½åœ¨èƒŒæ™¯åŸ·è¡Œ(ä¸ç”¨é–‹ Terminal åœ¨å‰æ™¯)ã€é–‹æ©Ÿå¾Œä¹Ÿæœƒè‡ªå‹•å•Ÿå‹•ã€‚</p><p>æœ‰å¤šå€‹ Runner è¨˜å¾—èª¿æ•´ã€Œ <a href="https://docs.github.com/en/actions/how-tos/hosting-your-own-runners/managing-self-hosted-runners/configuring-the-self-hosted-runner-application-as-a-service?platform=mac#customizing-the-self-hosted-runner-service-1" target="_blank">Customizing the self-hosted runner service</a> ã€è¨­å®šè¨»å†Šä¸åŒåç¨±ã€‚</p><blockquote><p><em>iOS é€™é‚Šæˆ‘æœ‰ä¸€å€‹å¾…ç ”ç©¶æ’é™¤çš„å•é¡Œï¼Œ <strong>å°±æ˜¯æˆ‘æ”¹ç”¨èƒŒæ™¯ Service ä¹‹å¾Œåœ¨ Archive æœƒé‡åˆ°éŒ¯èª¤(ç–‘ä¼¼æ˜¯è·Ÿ keychain æ¬Šé™æœ‰é—œ)</strong> ï¼Œç•¶æ™‚æ²’æ™‚é–“è§£æ±ºï¼Œå°±å…ˆç”¨èµ·å‰æ™¯ Terminal Runner äº†ã€‚</em></p></blockquote><p>å¦‚æœæ˜¯å‚³çµ±å‰æ™¯è¦åšåˆ°é–‹æ©Ÿè‡ªå‹•å•Ÿå‹•å°±è¦å» <code class="language-plaintext highlighter-rouge">~/Library/LaunchAgents</code> æ–°å¢ä¸€å€‹è‡ªå‹•å•Ÿå‹•è¨­å®šæª”æ¡ˆï¼š</p><p><code class="language-plaintext highlighter-rouge">actions.runner.REPO.RUNNER_NAME.plist</code> ï¼š</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span>
<span class="nt">&lt;plist</span> <span class="na">version=</span><span class="s">"1.0"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;dict&gt;</span>
  <span class="nt">&lt;key&gt;</span>Label<span class="nt">&lt;/key&gt;</span>
  <span class="nt">&lt;string&gt;</span>actions.runner.REPO.RUNNER_NAME<span class="nt">&lt;/string&gt;</span>
  <span class="c">&lt;!-- æŒ‡å®š Terminal.app ä¾†å•Ÿå‹• --&gt;</span>
  <span class="nt">&lt;key&gt;</span>ProgramArguments<span class="nt">&lt;/key&gt;</span>
  <span class="nt">&lt;array&gt;</span>
   <span class="nt">&lt;string&gt;</span>/usr/bin/open<span class="nt">&lt;/string&gt;</span>
   <span class="nt">&lt;string&gt;</span>-a<span class="nt">&lt;/string&gt;</span>
   <span class="nt">&lt;string&gt;</span>Terminal<span class="nt">&lt;/string&gt;</span>
   <span class="nt">&lt;string&gt;</span>/Users/zhgchgli/Documents/actions-runner/run.sh<span class="nt">&lt;/string&gt;</span>
  <span class="nt">&lt;/array&gt;</span>
  <span class="nt">&lt;key&gt;</span>RunAtLoad<span class="nt">&lt;/key&gt;</span>
  <span class="nt">&lt;true/&gt;</span>
  <span class="nt">&lt;key&gt;</span>WorkingDirectory<span class="nt">&lt;/key&gt;</span>
  <span class="nt">&lt;string&gt;</span>/Users/zhgchgli/Documents/actions-runner<span class="nt">&lt;/string&gt;</span>
 <span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/plist&gt;</span>
</pre></table></code></div></div><blockquote><p><em>æœ‰èˆˆè¶£æ·±å…¥ç ”ç©¶ DevOps çš„æœ‹å‹å¯åƒè€ƒå®˜æ–¹ <a href="https://docs.github.com/en/actions/concepts/runners/about-actions-runner-controller#scaling-runners" target="_blank">k8s Runner</a> æ–‡ä»¶ã€‚</em></p></blockquote><h4 id="å®Œæ•´å°ˆæ¡ˆ-repo"><span class="me-2">å®Œæ•´å°ˆæ¡ˆ Repo</span><a href="#å®Œæ•´å°ˆæ¡ˆ-repo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/8b25f8eae56bc35c92b97c5d7e7834aa5cb87673e718a1ce829f5bb80f3edebb/ZhgChgLi/github-actions-ci-cd-demo" alt="" loading="lazy"></a></p><h3 id="å®˜æ–¹æ–‡ä»¶"><span class="me-2">å®˜æ–¹æ–‡ä»¶</span><a href="#å®˜æ–¹æ–‡ä»¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://docs.github.com/en/actions/get-started/quickstart" target="_blank" class="img-link shimmer" ><img src="https://docs.github.com/assets/cb-345/images/social-cards/actions.png" alt="" loading="lazy"></a></p><p>æ›´ç´°ç¯€çš„è¨­ç½®æ–¹å¼è«‹å‹™å¿…åƒè€ƒå®˜æ–¹æ‰‹å†Šã€‚</p><h4 id="ai-can-help"><span class="me-2">AI Can Help!</span><a href="#ai-can-help" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*JecNUCqujV1oeAvHA14X-g.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*JecNUCqujV1oeAvHA14X-g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTE0IiBoZWlnaHQ9IjExNDAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>å¯¦æ¸¬çµ¦ ChatGPT å®Œæ•´çš„æ­¥é©Ÿè·Ÿæ™‚æ©Ÿé»å°±èƒ½å¹«ä½ å¯«å¥½ GitHub Actions ç›´æ¥ä½¿ç”¨!</p><h3 id="ç¸½çµ"><span class="me-2">ç¸½çµ</span><a href="#ç¸½çµ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>ç¾åœ¨ä½ æ‡‰è©²å·²ç¶“å° GitHub Actions + Self-hosted Runner æœ‰äº†ä¸€å®šç¨‹åº¦çš„äº†è§£ï¼Œä¸‹ä¸€ç¯‡æˆ‘å°‡é–‹å§‹ä»¥ App (iOS) CI/CD ç‚ºæ¡ˆä¾‹ï¼Œæ‰‹æŠŠæ‰‹å»ºç½®æ•´å¥—æµç¨‹ã€‚</p><h3 id="ç³»åˆ—æ–‡ç« "><span class="me-2">ç³»åˆ—æ–‡ç« ï¼š</span><a href="#ç³»åˆ—æ–‡ç« " class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><a href="https://zhgchg.li/posts/zrealm-dev/ci-cd-%E6%98%AF%E4%BB%80%E9%BA%BC-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A9%A9%E5%AE%9A%E9%96%8B%E7%99%BC%E5%9C%98%E9%9A%8A%E7%9A%84%E9%97%9C%E9%8D%B5%E6%B5%81%E7%A8%8B%E8%88%87%E5%B7%A5%E5%85%B7%E9%81%B8%E6%93%87-c008a9e8ceca/"><strong>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šCI/CD æ˜¯ä»€éº¼ï¼Ÿå¦‚ä½•é€é CI/CD æ‰“é€ ç©©å®šé«˜æ•ˆçš„é–‹ç™¼åœ˜éšŠï¼Ÿå·¥å…·é¸æ“‡ï¼Ÿ</strong></a><li><a href="https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"><strong>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆäºŒï¼‰ï¼šGitHub Actions èˆ‡ self-hosted Runner ä½¿ç”¨èˆ‡å»ºç½®å¤§å…¨</strong></a><li><a href="https://zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/"><strong>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å¯¦ä½œ App å°ˆæ¡ˆçš„ CI èˆ‡ CD å·¥ä½œæµç¨‹</strong></a><li><a href="https://zhgchg.li/posts/zrealm-dev/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87-4273e57e7148/"><strong>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆå››ï¼‰ï¼šä½¿ç”¨ Google Apps Script Web App ä¸²æ¥ GitHub Actions å»ºç½®å…è²»æ˜“ç”¨çš„æ‰“åŒ…å·¥å…·å¹³å°</strong></a></ul><h4 id="-buy-me-a-beer-on-paypal"><span class="me-2"><a href="/contact" target="_blank">ğŸº Buy me a beer on PayPal</a></span><a href="#-buy-me-a-beer-on-paypal" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p><a href="/contact" target="_blank"><strong><em>æœ¬ç³»åˆ—æ–‡ç« èŠ±è²»äº†å¤§é‡çš„æ™‚é–“ç²¾åŠ›æ’°å¯«ï¼Œå¦‚æœå…§å®¹å°æ‚¨æœ‰å¹«åŠ©ã€å°æ‚¨çš„åœ˜éšŠæœ‰å¯¦è³ªæå‡å·¥ä½œæ•ˆç‡èˆ‡ç”¢å“å“è³ªï¼›æ­¡è¿è«‹æˆ‘å–æ¯å’–å•¡ï¼Œæ„Ÿè¬æ”¯æŒï¼</em></strong></a></p></blockquote><p><a href="/contact" target="_blank" rel="noopener" style="display:block;margin:12px 0;text-align:center;align-items:center;justify-content:center;padding:10px 22px;border-radius:999px;text-decoration:none;background:linear-gradient(135deg,#ffd54f,#ffb300);color:#000;font-size:16px;font-weight:700;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;box-shadow:0 4px 10px rgba(0,0,0,.15);cursor:pointer;transition:all .15s ease;width:350px" onmouseover="this.style.background=&quot;linear-gradient(135deg,#FFE082,#FFC107)&quot;,this.style.transform=&quot;translateY(-1px)&quot;,this.style.boxShadow=&quot;0 6px 14px rgba(0,0,0,0.2)&quot;" onmouseout="this.style.background=&quot;linear-gradient(135deg,#FFD54F,#FFB300)&quot;,this.style.transform=&quot;translateY(0)&quot;,this.style.boxShadow=&quot;0 4px 10px rgba(0,0,0,0.15)&quot;" lqip="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MDAiIGhlaWdodD0iNzAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+">ğŸº Buy me a beer on PayPal</a></p><p><a href="/contact" target="_blank">ğŸº Buy me a beer on PayPal</a></p><p>æœ‰ä»»ä½•å•é¡ŒåŠæŒ‡æ•™æ­¡è¿ <a href="https://www.zhgchg.li/contact" target="_blank">èˆ‡æˆ‘è¯çµ¡</a> ã€‚</p><script src="/assets/clipboard.min.js"></script><div style=" display:flex; align-items:center; gap:10px; border:1px solid #e5e7eb; background:#f9fafb; padding:12px 16px; border-radius:12px; margin:18px 0; box-shadow:0 3px 8px rgba(0,0,0,0.05); width: auto;"> <input id="share-url" value="https://zhgchg.li/posts/404bd5c70040/" readonly="" style=" flex:1; border:1px solid #d1d5db; border-radius:8px; padding:10px 12px; font-size:0.9rem; background:#ffffff; color:#111827; outline:none; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; " /> <button class="btn" data-clipboard-target="#share-url" id="copy-btn" style=" border:none; background:#3b82f6; color:white; padding:10px 16px; border-radius:10px; cursor:pointer; font-size:0.85rem; font-weight:600; display:flex; align-items:center; gap:6px; transition:all .15s ease; box-shadow:0 2px 5px rgba(59,130,246,0.35); " onmouseover="this.style.opacity='0.92';" onmouseout="this.style.opacity='1';"> <span style="font-size:1rem;">ğŸ”—</span> <span id="copy-btn-text">Copy link to share!</span> </button></div><script> new ClipboardJS('.btn'); var btn = document.getElementById("copy-btn"); var text = document.getElementById("copy-btn-text"); btn.addEventListener("click", function () { text.textContent = "Copied!"; btn.style.background = "#16a34a"; btn.style.boxShadow = "0 2px 6px rgba(22,163,74,0.35)"; setTimeout(() => { text.textContent = "Copy link to share!"; btn.style.background = "#3b82f6"; btn.style.boxShadow = "0 2px 5px rgba(59,130,246,0.35)"; }, 1500); });</script><hr /><p><a href="/contact" target="_blank" rel="noopener" style="display:block;margin:12px 0;text-align:center;align-items:center;justify-content:center;padding:10px 22px;border-radius:999px;text-decoration:none;background:linear-gradient(135deg,#ffd54f,#ffb300);color:#000;font-size:16px;font-weight:700;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;box-shadow:0 4px 10px rgba(0,0,0,.15);cursor:pointer;transition:all .15s ease;width:350px" onmouseover="this.style.background=&quot;linear-gradient(135deg,#FFE082,#FFC107)&quot;,this.style.transform=&quot;translateY(-1px)&quot;,this.style.boxShadow=&quot;0 6px 14px rgba(0,0,0,0.2)&quot;" onmouseout="this.style.background=&quot;linear-gradient(135deg,#FFD54F,#FFB300)&quot;,this.style.transform=&quot;translateY(0)&quot;,this.style.boxShadow=&quot;0 4px 10px rgba(0,0,0,0.15)&quot;">ğŸº Buy me a beer on PayPal</a></p><blockquote class="prompt-tip"><p>ğŸ‘‰ğŸ‘‰ğŸ‘‰ <a href="https://medium.com/@zhgchgli" target="_blank"><strong>Follow Me On Medium!</strong> (1,053+ Followers)</a> ğŸ‘ˆğŸ‘ˆğŸ‘ˆ</p></blockquote><blockquote class="prompt-info"><p>æœ¬æ–‡é¦–æ¬¡ç™¼è¡¨æ–¼ Medium (<a href="https://medium.com/p/404bd5c70040" target="_blank"><strong>é»æ­¤æŸ¥çœ‹åŸå§‹ç‰ˆæœ¬</strong></a>)ï¼Œç”± <a href="/posts/tools/medium-to-jekyll/" target="_blank">ZMediumToMarkdown</a> æä¾›è‡ªå‹•è½‰æ›èˆ‡åŒæ­¥æŠ€è¡“ã€‚</p></blockquote><blockquote class="prompt-info"><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/zh-tw/zmediumtomarkdown/2025-07-02-404bd5c70040.md" target="_blank">Improve this page on Github.</a></p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/cicd/" class="post-tag no-text-decoration" >cicd</a> <a href="/tags/github-actions/" class="post-tag no-text-decoration" >github-actions</a> <a href="/tags/github/" class="post-tag no-text-decoration" >github</a> <a href="/tags/self-hosted/" class="post-tag no-text-decoration" >self-hosted</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> æœ¬æ–‡ç”±ä½œè€…ä»¥ <a href="https://creativecommons.org/licenses/by/4.0/deed.zh-hant"> CC BY 4.0 </a> æˆæ¬Šã€‚</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">åˆ†äº«</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=GitHub%20Actions%EF%BD%9CSelf-hosted%20Runner%20%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B%EF%BD%9CCI/CD%20%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2F404bd5c70040%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=GitHub%20Actions%EF%BD%9CSelf-hosted%20Runner%20%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B%EF%BD%9CCI/CD%20%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2F404bd5c70040%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2F404bd5c70040%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="è¤‡è£½é€£çµ" data-title-succeed="é€£çµå·²æˆåŠŸè¤‡è£½ï¼" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">æœ€è¿‘æ›´æ–°</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/ios-certificates-identifiers%E8%88%87profiles%E8%A9%B3%E8%A7%A3-fastlane-match%E7%B5%B1%E4%B8%80%E7%AE%A1%E7%90%86%E6%86%91%E8%AD%89%E8%88%87ci-cd%E6%95%B4%E5%90%88%E5%AF%A6%E6%88%B0-823ac523ccc8/">iOS Certificates, Identifiers & Profiles æ˜¯ä»€éº¼åŠ Fastlane Match çµ±ä¸€ç®¡ç†æ†‘è­‰èˆ‡ CI/CD çš„ä¸€äº›ç­†è¨˜</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/line-bank-%E5%85%A5%E9%87%91-firstrade-%E6%95%99%E5%AD%B8-%E5%BF%AB%E9%80%9F%E5%88%B0%E5%B8%B3-%E4%BD%8E%E6%89%8B%E7%BA%8C%E8%B2%BB150%E5%85%83-%E5%B8%B3%E6%88%B6%E5%8D%87%E7%B4%9A%E8%88%87%E6%89%8B%E7%BA%8C%E8%B2%BB%E8%A3%9C%E5%8A%A9%E7%94%B3%E8%AB%8B%E5%85%A8%E6%94%BB%E7%95%A5-e4d139fe0685/">æ‰‹æŠŠæ‰‹æ•™å­¸ â€” LINE Bank å…¥é‡‘ Firstrade å¿«é€Ÿåˆ°å¸³ã€æ‰‹çºŒè²»åªè¦ 150 å…ƒåŠå¸³æˆ¶å‡ç´š/ç´„å®šè½‰å¸³/æ‰‹çºŒè²»è£œåŠ©ç”³è«‹æ•™å­¸</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/">CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å¯¦ä½œ App iOS CI èˆ‡ CD å·¥ä½œæµç¨‹</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/medium-api-%E7%88%AC%E5%8F%96%E8%B3%87%E6%96%99%E8%88%87%E7%AA%81%E7%A0%B4-cloudflare-%E9%98%B2%E8%AD%B7-%E5%AE%8C%E6%95%B4-graphql-%E6%93%8D%E4%BD%9C%E6%95%99%E5%AD%B8-88f0fb935120/">Medium API è³‡æ–™çˆ¬èŸ²èˆ‡ Cloudflare æ”»é˜²çš„å¿ƒè·¯æ­·ç¨‹</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/app-store-connect-api-webhook-%E4%B8%B2%E6%8E%A5-%E6%8F%90%E5%8D%87-ios-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E6%95%88%E7%8E%87%E8%88%87%E9%80%9A%E7%9F%A5%E6%B5%81%E7%A8%8B-7c0974856393/">CI/CD ä½¿ç”¨ App Store Connect API Webhook ä¸²æ¥è‡ªå‹•åŒ–å·¥ä½œæµç¨‹</a></ul></section><section><h2 class="panel-heading">ç†±é–€æ¨™ç±¤</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">ç”Ÿæ´»</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E9%96%8B%E7%AE%B1/">é–‹ç®±</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/cicd/">cicd</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">ç« ç¯€ç›®éŒ„ ğŸ”–</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">å»¶ä¼¸é–±è®€</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1751900544" data-df="YYYY å¹´ M æœˆ D æ—¥" > 2025 å¹´ 07 æœˆ 07 æ—¥ </time><h4 class="pt-0 my-2">CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å¯¦ä½œ App iOS CI èˆ‡ CD å·¥ä½œæµç¨‹</h4><div class="text-muted"><p>iOS App è‡ªå‹•åŒ–å»ºç½®ã€æ¸¬è©¦ã€éƒ¨ç½²çš„ GitHub Actions å¯¦ä½œæ­¥é©Ÿå®Œæ•´æ•™å­¸</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/ci-cd-%E6%98%AF%E4%BB%80%E9%BA%BC-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A9%A9%E5%AE%9A%E9%96%8B%E7%99%BC%E5%9C%98%E9%9A%8A%E7%9A%84%E9%97%9C%E9%8D%B5%E6%B5%81%E7%A8%8B%E8%88%87%E5%B7%A5%E5%85%B7%E9%81%B8%E6%93%87-c008a9e8ceca/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1751267416" data-df="YYYY å¹´ M æœˆ D æ—¥" > 2025 å¹´ 06 æœˆ 30 æ—¥ </time><h4 class="pt-0 my-2">CI/CD æ˜¯ä»€éº¼ï½œæ‰“é€ é«˜æ•ˆç©©å®šé–‹ç™¼åœ˜éšŠçš„é—œéµæµç¨‹èˆ‡å·¥å…·é¸æ“‡</h4><div class="text-muted"><p>é‡å° iOS App åœ˜éšŠï¼Œè§£æç„¡ CI/CD æµç¨‹çš„ç—›é»ï¼Œé€é GitHub Actions èˆ‡ self-hosted Runner è‡ªå‹•åŒ–æ¸¬è©¦èˆ‡æ‰“åŒ…ï¼Œæ¸›å°‘äººåŠ›æµªè²»èˆ‡éŒ¯èª¤ï¼Œæå‡åœ˜éšŠç©©å®šæ€§èˆ‡é–‹ç™¼æ•ˆç‡ï¼Œæ­é… Google Apps Script Web App å¯¦ç¾è·¨è·èƒ½ä¾¿æ·æ“ä½œã€‚</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/google-apps-script-web-app-%E6%89%93%E9%80%A0-github-action-ci-cd-%E8%87%AA%E8%A8%82%E8%A1%A8%E5%96%AE%E6%8F%90%E5%8D%87%E9%96%8B%E7%99%BC%E6%95%88%E7%8E%87-4cb4437818f2/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1736594383" data-df="YYYY å¹´ M æœˆ D æ—¥" > 2025 å¹´ 01 æœˆ 11 æ—¥ </time><h4 class="pt-0 my-2">Google Apps Script Web Appï½œæ‰“é€  Github Action CI/CD è‡ªè¨‚è¡¨å–®æå‡é–‹ç™¼æ•ˆç‡</h4><div class="text-muted"><p>é‡å°ç¼ºä¹å‹•æ…‹ GUI è¡¨å–®çš„ Github Action CI/CDï¼Œä½¿ç”¨ Google Apps Script Web App å»ºç«‹çµ„ç¹”å…§å°ˆå±¬è¡¨å–®ï¼Œä¸²æ¥ Github API è‡ªå‹•å–å¾—åˆ†æ”¯ä¸¦è§¸ç™¼å·¥ä½œæµç¨‹ï¼Œä¸¦æ•´åˆ Slack é€šçŸ¥èˆ‡ Jiraã€Asana å·¥å–®æŸ¥è©¢ï¼Œå¯¦ç¾å…ç¶­è­·ã€ä½æˆæœ¬çš„è‡ªå‹•åŒ–æ‰“åŒ…å·¥å…·ã€‚</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/ci-cd-%E6%98%AF%E4%BB%80%E9%BA%BC-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A9%A9%E5%AE%9A%E9%96%8B%E7%99%BC%E5%9C%98%E9%9A%8A%E7%9A%84%E9%97%9C%E9%8D%B5%E6%B5%81%E7%A8%8B%E8%88%87%E5%B7%A5%E5%85%B7%E9%81%B8%E6%93%87-c008a9e8ceca/" class="btn btn-outline-primary" aria-label="ä¸Šä¸€ç¯‡" ><p>CI/CD æ˜¯ä»€éº¼ï½œæ‰“é€ é«˜æ•ˆç©©å®šé–‹ç™¼åœ˜éšŠçš„é—œéµæµç¨‹èˆ‡å·¥å…·é¸æ“‡</p></a> <a href="/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/" class="btn btn-outline-primary" aria-label="ä¸‹ä¸€ç¯‡" ><p>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å¯¦ä½œ App iOS CI èˆ‡ CD å·¥ä½œæµç¨‹</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>Â© <time>2026</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="é™¤éå¦æœ‰è¨»æ˜ï¼Œæœ¬ç¶²ç«™ä¸Šçš„æ‰€æœ‰æ–‡ç« çš†ç”±ä½œè€…ä¾æ“š å‰µç”¨ CC å§“åæ¨™ç¤º 4.0 åœ‹éš›æˆæ¬Šæ¢æ¬¾ï¼ˆCC BY 4.0ï¼‰æˆæ¬Šä½¿ç”¨ã€‚" >ç‰ˆæ¬Šæ‰€æœ‰ã€‚</span> <br/> ç€è¦½æ¬¡æ•¸: <u>802,413+</u>, æœ€å¾Œæ›´æ–°æ™‚é–“: <u>2026-01-15 11:04:55 +08:00</u></p><p>æœ¬ç«™ä½¿ç”¨ <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> ä¸»é¡Œå»ºç½®æ–¼ <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>ã€‚<br/> Medium æ–‡ç« ç”± <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a> è½‰æ›è€Œæˆã€‚</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">ç†±é–€æ¨™ç±¤</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">ç”Ÿæ´»</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E9%96%8B%E7%AE%B1/">é–‹ç®±</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/cicd/">cicd</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">ç™¼ç¾æœ‰æ–°çš„å…§å®¹ç‰ˆæœ¬ã€‚</p><button type="button" class="btn btn-primary" aria-label="Update"> æ›´æ–° </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'zh-TW';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'General', 'data-category-id': 'DIC_kwDOHdowL84CU-q5', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">æ‰¾ä¸åˆ°ç¬¦åˆçš„çµæœã€‚</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
