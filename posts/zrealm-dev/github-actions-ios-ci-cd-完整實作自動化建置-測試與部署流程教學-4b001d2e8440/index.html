<!doctype html><html lang="zh-tw" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="GitHub Actions iOS CI/CDï½œå®Œæ•´å¯¦ä½œè‡ªå‹•åŒ–å»ºç½®ã€æ¸¬è©¦èˆ‡éƒ¨ç½²æµç¨‹æ•™å­¸" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="zh_tw" /><meta name="description" content="é‡å°iOSé–‹ç™¼è€…æ‰“é€ çš„GitHub Actions CI/CDæµç¨‹ï¼Œè§£æ±ºæ‰‹å‹•å»ºç½®èˆ‡æ¸¬è©¦ç¹ç‘£å•é¡Œï¼ŒçµåˆFastlaneèˆ‡Firebaseå¯¦ç¾è‡ªå‹•åŒ–æ‰“åŒ…èˆ‡éƒ¨ç½²ï¼Œæå‡åœ˜éšŠé–‹ç™¼æ•ˆç‡èˆ‡ç”¢å“å“è³ªã€‚" /><meta property="og:description" content="é‡å°iOSé–‹ç™¼è€…æ‰“é€ çš„GitHub Actions CI/CDæµç¨‹ï¼Œè§£æ±ºæ‰‹å‹•å»ºç½®èˆ‡æ¸¬è©¦ç¹ç‘£å•é¡Œï¼ŒçµåˆFastlaneèˆ‡Firebaseå¯¦ç¾è‡ªå‹•åŒ–æ‰“åŒ…èˆ‡éƒ¨ç½²ï¼Œæå‡åœ˜éšŠé–‹ç™¼æ•ˆç‡èˆ‡ç”¢å“å“è³ªã€‚" /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/4b001d2e8440/1*0LK6m6CTImL6rcsrliiOQA.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-07-07T23:02:24+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/4b001d2e8440/1*0LK6m6CTImL6rcsrliiOQA.webp" /><meta property="twitter:title" content="GitHub Actions iOS CI/CDï½œå®Œæ•´å¯¦ä½œè‡ªå‹•åŒ–å»ºç½®ã€æ¸¬è©¦èˆ‡éƒ¨ç½²æµç¨‹æ•™å­¸" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://www.linkedin.com/in/zhgchgli"},"dateModified":"2026-01-04T11:38:01+08:00","datePublished":"2025-07-07T23:02:24+08:00","description":"é‡å°iOSé–‹ç™¼è€…æ‰“é€ çš„GitHub Actions CI/CDæµç¨‹ï¼Œè§£æ±ºæ‰‹å‹•å»ºç½®èˆ‡æ¸¬è©¦ç¹ç‘£å•é¡Œï¼ŒçµåˆFastlaneèˆ‡Firebaseå¯¦ç¾è‡ªå‹•åŒ–æ‰“åŒ…èˆ‡éƒ¨ç½²ï¼Œæå‡åœ˜éšŠé–‹ç™¼æ•ˆç‡èˆ‡ç”¢å“å“è³ªã€‚","headline":"GitHub Actions iOS CI/CDï½œå®Œæ•´å¯¦ä½œè‡ªå‹•åŒ–å»ºç½®ã€æ¸¬è©¦èˆ‡éƒ¨ç½²æµç¨‹æ•™å­¸","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+","url":"https://zhgchg.li/assets/4b001d2e8440/1*0LK6m6CTImL6rcsrliiOQA.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/"},"url":"https://zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/"}</script><title>GitHub Actions iOS CI/CDï½œå®Œæ•´å¯¦ä½œè‡ªå‹•åŒ–å»ºç½®ã€æ¸¬è©¦èˆ‡éƒ¨ç½²æµç¨‹æ•™å­¸ | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/zh.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=false" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script><link rel="alternate" hreflang="en" href="https://en.zhgchg.li/posts/zrealm-dev/github-actions-ios-app-ci-cd-workflow-automation-for-faster-builds-and-deployments-4b001d2e8440/"><link rel="alternate" hreflang="ja" href="https://jp.zhgchg.li/posts/zrealm%E3%81%AE%E9%96%8B%E7%99%BA/github-actions-ios-app-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E6%A7%8B%E7%AF%89%E3%81%A7%E3%83%93%E3%83%AB%E3%83%89%E3%81%8B%E3%82%89%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%BE%E3%81%A7%E6%9C%80%E9%80%9F%E5%AE%9F%E7%8F%BE-4b001d2e8440/"><link rel="alternate" hreflang="zh-Hans" href="https://zh-hans.zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AE%9E%E4%BD%9C%E8%87%AA%E5%8A%A8%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B5%8B%E8%AF%95%E4%B8%8E%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%A6-4b001d2e8440/"><link rel="alternate" hreflang="zh-Hant" href="https://zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/"><link rel="alternate" hreflang="x-default" href="https://zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/"> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"FAQPage","mainEntity":[{"@type":"Question","name":"å¦‚ä½•åˆ©ç”¨ GitHub Actions å»ºç½® iOS App çš„ CI/CD æµç¨‹ä»¥æå‡è‡ªå‹•åŒ–æ•ˆç‡ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"é€é GitHub Actions æ­é… Fastlaneã€Mintã€Bundle ç­‰å·¥å…·ï¼Œè¨­å®šè‡ªå‹•åŒ–æ¸¬è©¦ã€å»ºç½®èˆ‡éƒ¨ç½²æµç¨‹ï¼Œå¯å¯¦ç¾ Pull Request è§¸ç™¼æ¸¬è©¦ã€æ‰‹å‹•æˆ–æ’ç¨‹è§¸ç™¼æ‰“åŒ…éƒ¨ç½²ï¼Œç¢ºä¿ç¨‹å¼ç¢¼å“è³ªä¸¦å¿«é€Ÿç™¼å¸ƒè‡³ Firebase App Distributionã€‚"}},{"@type":"Question","name":"ä½¿ç”¨ self-hosted Runner åŸ·è¡Œ iOS CI/CD æœ‰å“ªäº›æ³¨æ„äº‹é …ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"è‡ªå»º macOS Runner é™¤äº†ç¯€çœ GitHub Hosted Runner é«˜æ˜‚è²»ç”¨ï¼Œéœ€æ³¨æ„å¤š Runner å…±äº«ä¾è³´è³‡æ–™å¤¾å¯èƒ½è¡çªï¼Œæ¨¡æ“¬å™¨éœ€ç‚ºæ¯å€‹ Runner åˆ†åˆ¥å»ºç«‹ç¨ç«‹è£ç½®é¿å…äº’æ¶ï¼Œä¸¦ä¸”åœ¨ Workflow ä¸­æŒ‡å®šç›¸å°æ‡‰çš„æ¨¡æ“¬å™¨åç¨±ç¢ºä¿æ¸¬è©¦ç©©å®šã€‚"}},{"@type":"Question","name":"å¦‚ä½•åœ¨ GitHub Actions ä¸­ç®¡ç† iOS é–‹ç™¼æ†‘è­‰èˆ‡ App Store Connect API Keyï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"å°‡æ†‘è­‰èˆ‡ API Key è½‰æˆ Base64 ç·¨ç¢¼å¾Œå­˜å…¥ GitHub Secretsï¼ŒWorkflow ä¸­å‹•æ…‹è§£ç¢¼ä¸¦åŒ¯å…¥ Keychain åŠæŒ‡å®šè·¯å¾‘ï¼ŒFastlane å¯ç›´æ¥å¼•ç”¨é€™äº›æª”æ¡ˆé€²è¡Œç°½åèˆ‡ä¸Šå‚³ï¼Œç¢ºä¿ CI/CD æµç¨‹å®‰å…¨ä¸”è‡ªå‹•åŒ–ã€‚"}},{"@type":"Question","name":"å¦‚ä½•åˆ©ç”¨ GitHub Actions å¯¦ç¾ Pull Request è§¸ç™¼çš„å–®å…ƒæ¸¬è©¦èˆ‡çµæœå›é¥‹ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"è¨­å®š Workflow åœ¨ Pull Request é–‹å•Ÿæˆ–æ›´æ–°æ™‚åŸ·è¡Œ Fastlane å–®å…ƒæ¸¬è©¦ï¼Œä¸¦é€é action-junit-report è§£ææ¸¬è©¦å ±å‘Šï¼Œè‡ªå‹•åœ¨ PR ç•™ä¸‹æ¸¬è©¦æˆåŠŸæˆ–å¤±æ•—çš„è©•è«–ï¼Œçµåˆ Branch Protection Rules å¼·åˆ¶é€šéæ¸¬è©¦æ‰èƒ½åˆä½µï¼Œæå‡ç¨‹å¼ç¢¼å“è³ªã€‚"}},{"@type":"Question","name":"å¦‚ä½•è¨­è¨ˆ GitHub Actions Workflow ä»¥æ”¯æ´åˆ†é›¢å»ºç½®èˆ‡éƒ¨ç½²ï¼Œæå‡ CI/CD å½ˆæ€§ï¼Ÿ","acceptedAnswer":{"@type":"Answer","text":"å°‡å»ºç½®èˆ‡éƒ¨ç½²æ‹†åˆ†ç‚ºç¨ç«‹ Workflowï¼Œå»ºç½®å®Œæˆå¾Œä¸Šå‚³ Artifactï¼Œéƒ¨ç½² Workflow ä¸‹è¼‰ Artifact å¾ŒåŸ·è¡Œéƒ¨ç½²ï¼Œé€é workflow_run äº‹ä»¶ä¸²æ¥å…©è€…ï¼Œé¿å…é‡è¤‡å»ºç½®ä¸¦æ–¹ä¾¿å¤šå¹³å°éƒ¨ç½²ï¼Œæå‡æ•´é«” CI/CD æµç¨‹çš„å½ˆæ€§èˆ‡ç¶­è­·æ€§ã€‚"}}]} </script><link rel="stylesheet" href="/assets/css/post-toc.css"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0">An iOS, web, and automation developer from Taiwan ğŸ‡¹ğŸ‡¼ who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item" style="padding:0 15px 0 15px;"> <a href="https://medium.com/@zhgchgli" class="nav-link" target="_blank" style="background:#EDF4FF;color:#0A84FF;font-size:15px;transition:background-color .2s,color .2s;" onmouseover="this.style.backgroundColor='#0A84FF';this.style.color='#ffffff';" onmouseout="this.style.backgroundColor='#EDF4FF';this.style.color='#0A84FF';"> <i class="fa-brands fa-medium"></i> <span><span style="font-size: 18px; font-weight: boild;">Follow Me on Medium!</span><br/><u>1,053+</u> Followers</span> </a><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>é¦–é </span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>åˆ†é¡</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>æ¨™ç±¤</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>æ­¸æª”</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>é—œæ–¼æˆ‘</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>è¯çµ¡æˆ‘</span> </a><li class="nav-item"><div aria-label="Language switch" style="display:flex;align-items:center;justify-content:center;gap:5px;"> <a href="https://zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #666;background:#111;color:#fff;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> æ­£é«”ä¸­æ–‡ </a> <span style="width:1px;height:18px;background:rgba(0,0,0,.12);"></span> <a href="https://zh-hans.zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AE%9E%E4%BD%9C%E8%87%AA%E5%8A%A8%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B5%8B%E8%AF%95%E4%B8%8E%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%A6-4b001d2e8440/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #ccc;background:#f3f3f3;color:#555;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> ç®€ä½“ä¸­æ–‡ </a></div><div aria-label="Language switch" style="display:flex;align-items:center;justify-content:center;gap:5px;margin-top:5px;"> <a href="https://en.zhgchg.li/posts/zrealm-dev/github-actions-ios-app-ci-cd-workflow-automation-for-faster-builds-and-deployments-4b001d2e8440/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #ccc;background:#f3f3f3;color:#555;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> English </a> <span style="width:1px;height:18px;background:rgba(0,0,0,.12);"></span> <a href="https://jp.zhgchg.li/posts/zrealm%E3%81%AE%E9%96%8B%E7%99%BA/github-actions-ios-app-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E6%A7%8B%E7%AF%89%E3%81%A7%E3%83%93%E3%83%AB%E3%83%89%E3%81%8B%E3%82%89%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%BE%E3%81%A7%E6%9C%80%E9%80%9F%E5%AE%9F%E7%8F%BE-4b001d2e8440/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #ccc;background:#f3f3f3;color:#555;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> æ—¥æœ¬èª </a></div></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">é¦–é </a> </span> <span>GitHub Actions iOS CI/CDï½œå®Œæ•´å¯¦ä½œè‡ªå‹•åŒ–å»ºç½®ã€æ¸¬è©¦èˆ‡éƒ¨ç½²æµç¨‹æ•™å­¸</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> æ–‡ç« </div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="æœå°‹..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">å–æ¶ˆ</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>GitHub Actions iOS CI/CDï½œå®Œæ•´å¯¦ä½œè‡ªå‹•åŒ–å»ºç½®ã€æ¸¬è©¦èˆ‡éƒ¨ç½²æµç¨‹æ•™å­¸</h1><p class="post-desc fw-light mb-4">é‡å°iOSé–‹ç™¼è€…æ‰“é€ çš„GitHub Actions CI/CDæµç¨‹ï¼Œè§£æ±ºæ‰‹å‹•å»ºç½®èˆ‡æ¸¬è©¦ç¹ç‘£å•é¡Œï¼ŒçµåˆFastlaneèˆ‡Firebaseå¯¦ç¾è‡ªå‹•åŒ–æ‰“åŒ…èˆ‡éƒ¨ç½²ï¼Œæå‡åœ˜éšŠé–‹ç™¼æ•ˆç‡èˆ‡ç”¢å“å“è³ªã€‚</p><div class="post-meta text-muted"> <span> ç™¼ä½ˆæ–¼ <time data-ts="1751900544" data-df="YYYY å¹´ M æœˆ D æ—¥" data-bs-toggle="tooltip" data-bs-placement="bottom" > 2025 å¹´ 07 æœˆ 07 æ—¥ </time> </span> <span> æ›´æ–°æ–¼ <time data-ts="1767497881" data-df="YYYY å¹´ M æœˆ D æ—¥" data-bs-toggle="tooltip" data-bs-placement="bottom" > 2026 å¹´ 01 æœˆ 04 æ—¥ </time> </span><div class="mt-3 mb-3"> <a href="/assets/4b001d2e8440/1*0LK6m6CTImL6rcsrliiOQA.webp" class="popup img-link preview-img blur"><img data-src="/assets/4b001d2e8440/1*0LK6m6CTImL6rcsrliiOQA.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></div><div class="d-flex justify-content-between"> <span style="display: inline-flex; align-items: center; gap: 4px;"> ä½œè€… <em> <a href="https://www.linkedin.com/in/zhgchgli">ZhgChgLi</a> </em> | <em><a href="https://www.linkedin.com/in/zhgchgli" target="_blank">Senior Software Engineer</a></em><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" style="display: block; "><path fill="#007bff" d="M271.2 56C265.1 49.8 256.2 47.3 247.8 49.6C239.4 51.9 232.9 58.4 230.8 66.8L215.5 127C214.4 131.4 209.9 134 205.6 132.7L145.8 115.9C137.4 113.5 128.4 115.9 122.3 122C116.2 128.1 113.8 137.1 116.2 145.5L133.1 205.3C134.3 209.6 131.7 214.1 127.4 215.2L67.1 230.5C58.7 232.6 52.1 239.2 49.8 247.6C47.5 256 50 264.9 56.2 271L100.7 314.3C103.9 317.4 103.9 322.6 100.7 325.8L56.3 369.1C50.1 375.2 47.6 384.1 49.9 392.5C52.2 400.9 58.8 407.4 67.2 409.6L127.4 424.9C131.8 426 134.4 430.5 133.1 434.8L116.2 494.5C113.8 502.9 116.2 511.9 122.3 518C128.4 524.1 137.4 526.5 145.8 524.1L205.6 507.2C209.9 506 214.4 508.6 215.5 512.9L230.8 573.1C232.9 581.5 239.5 588.1 247.9 590.4C256.3 592.7 265.2 590.2 271.3 584L314.6 539.5C317.7 536.3 322.9 536.3 326.1 539.5L369.3 584C375.4 590.2 384.3 592.7 392.7 590.4C401.1 588.1 407.6 581.5 409.8 573.1L425.1 513C426.2 508.6 430.7 506 435 507.3L494.8 524.2C503.2 526.6 512.2 524.2 518.3 518.1C524.4 512 526.8 503 524.4 494.6L507.5 434.8C506.3 430.5 508.9 426 513.2 424.9L573.4 409.6C581.8 407.5 588.4 400.9 590.7 392.5C593 384.1 590.5 375.1 584.3 369.1L539.8 325.8C536.6 322.7 536.6 317.5 539.8 314.3L584.3 271C590.5 264.9 593 256 590.7 247.6C588.4 239.2 581.8 232.7 573.4 230.5L513.2 215.2C508.8 214.1 506.2 209.6 507.5 205.3L524.4 145.5C526.8 137.1 524.4 128.1 518.3 122C512.2 115.9 503.2 113.5 494.8 115.9L435 132.8C430.7 134 426.2 131.4 425.1 127.1L409.8 66.8C407.7 58.4 401.1 51.8 392.7 49.5C384.3 47.2 375.4 49.7 369.3 55.9L326 100.5C322.9 103.7 317.7 103.7 314.5 100.5L271.2 56z"/><path d="M250 330 l60 60 100 -140" stroke="#ffffff" stroke-width="40" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="11674 å­—" > <em>64 åˆ†é˜</em>é–±è®€</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">GitHub Actions iOS CI/CDï½œå®Œæ•´å¯¦ä½œè‡ªå‹•åŒ–å»ºç½®ã€æ¸¬è©¦èˆ‡éƒ¨ç½²æµç¨‹æ•™å­¸</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">ç« ç¯€ç›®éŒ„ ğŸ”–</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">GitHub Actions iOS CI/CDï½œå®Œæ•´å¯¦ä½œè‡ªå‹•åŒ–å»ºç½®ã€æ¸¬è©¦èˆ‡éƒ¨ç½²æµç¨‹æ•™å­¸</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><div aria-label="Language switch" style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;"><div aria-label="Views" style="display:inline-flex;align-items:center;gap:6px;font-size:.85rem;"> <span style="display:inline-flex;align-items:center;justify-content:center;"> ç€è¦½æ¬¡æ•¸: <span style="margin-left:4px;" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-original-title="æœ€å¾Œæ›´æ–°æ™‚é–“: 2026-01-13 11:03:04 +08:00"><u>4,018+</u></span> </span></div><div style="display:flex;align-items:center;justify-content:flex-end;gap:8px;flex-wrap:wrap;"> <a href="https://zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #dc3545;background:#dc3545;color:#fff !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> æ­£é«”ä¸­æ–‡ </a> <a href="https://zh-hans.zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AE%9E%E4%BD%9C%E8%87%AA%E5%8A%A8%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B5%8B%E8%AF%95%E4%B8%8E%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%A6-4b001d2e8440/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(220,53,69,.35);background:rgba(220,53,69,.08);color:#dc3545 !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> ç®€ä½“ä¸­æ–‡ </a> <a href="https://en.zhgchg.li/posts/zrealm-dev/github-actions-ios-app-ci-cd-workflow-automation-for-faster-builds-and-deployments-4b001d2e8440/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(220,53,69,.35);background:rgba(220,53,69,.08);color:#dc3545 !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> English </a> <a href="https://jp.zhgchg.li/posts/zrealm%E3%81%AE%E9%96%8B%E7%99%BA/github-actions-ios-app-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E6%A7%8B%E7%AF%89%E3%81%A7%E3%83%93%E3%83%AB%E3%83%89%E3%81%8B%E3%82%89%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%BE%E3%81%A7%E6%9C%80%E9%80%9F%E5%AE%9F%E7%8F%BE-4b001d2e8440/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(220,53,69,.35);background:rgba(220,53,69,.08);color:#dc3545 !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> æ—¥æœ¬èª </a></div></div><blockquote class="prompt-info"><p>åŸºæ–¼ SEO è€ƒé‡ï¼Œæœ¬æ–‡æ¨™é¡Œèˆ‡æè¿°ç¶“ AI èª¿æ•´ï¼ŒåŸå§‹ç‰ˆæœ¬è«‹åƒè€ƒå…§æ–‡ã€‚</p></blockquote><h4 id="zhgchgli-table-of-contents">æ–‡ç« ç›®éŒ„</h4><nav class="zhgchgli-toc"><ul class="zhgchgli-toc-list"><li class="has-children"><details><summary>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å¯¦ä½œ App iOS CI èˆ‡ CD å·¥ä½œæµç¨‹ <a href="#cicd-å¯¦æˆ°æŒ‡å—ä¸‰ä½¿ç”¨-github-actions-å¯¦ä½œ-app-ios-ci-èˆ‡-cd-å·¥ä½œæµç¨‹">#</a></summary><ul><li><a href="#å‰è¨€">å‰è¨€</a></li></ul></details></li><li class="has-children"><details><summary>App CI/CD æµç¨‹é—œä¿‚åœ– <a href="#app-cicd-æµç¨‹é—œä¿‚åœ–">#</a></summary><ul><li><a href="#é‹ä½œæµç¨‹">é‹ä½œæµç¨‹</a></li><li><a href="#github-actions-æˆæœåœ–">GitHub Actions æˆæœåœ–</a></li></ul></details></li><li><a href="#github-actions-x-self-hosted-runner-åŸºç¤çŸ¥è­˜">GitHub Actions x Self-hosted Runner åŸºç¤çŸ¥è­˜</a></li><li class="has-children"><details><summary>iOS Demo å°ˆæ¡ˆçš„ Infra æ¶æ§‹ <a href="#ios-demo-å°ˆæ¡ˆçš„-infra-æ¶æ§‹">#</a></summary><ul><li><a href="#mint">Mint</a></li><li><a href="#bundle">Bundle</a></li><li><a href="#cocoapods">Cocoapods</a></li><li><a href="#xcodegen">XCodeGen</a></li><li><a href="#fastlane">Fastlane</a></li><li><a href="#fastlane--match">Fastlane â€” Match</a></li><li><a href="#makefile">Makefile</a></li></ul></details></li><li><a href="#æœ¬ç¯‡-github-actions-cicd-æ¡ˆä¾‹">æœ¬ç¯‡ GitHub Actions CI/CD æ¡ˆä¾‹</a></li><li class="has-children"><details><summary>CI â€” ç™¼ Pull Request åŸ·è¡Œå–®å…ƒæ¸¬è©¦ <a href="#ci--ç™¼-pull-request-åŸ·è¡Œå–®å…ƒæ¸¬è©¦">#</a></summary><ul><li><a href="#æµç¨‹">æµç¨‹</a></li><li><a href="#ci-testingyml">CI-Testing.yml</a></li><li><a href="#github-æµç¨‹è¨­å®š">GitHub æµç¨‹è¨­å®š</a></li></ul></details></li><li class="has-children"><details><summary>CD â€” æ‰“åŒ…+éƒ¨ç½²åˆ° Firebase App Distribution <a href="#cd--æ‰“åŒ…éƒ¨ç½²åˆ°-firebase-app-distribution">#</a></summary><ul><li><a href="#æµç¨‹-1">æµç¨‹</a></li><li><a href="#cd-deployyml">CD-Deploy.yml</a></li><li><a href="#æŠ€è¡“ç´°ç¯€--firebase-cli-token-å–å¾—è¨­å®š">æŠ€è¡“ç´°ç¯€ â€” Firebase CLI Token å–å¾—ï¼†è¨­å®š</a></li><li><a href="#æŠ€è¡“ç´°ç¯€--install-the-apple-certificate-and-provisioning-profile">æŠ€è¡“ç´°ç¯€ â€” Install the Apple certificate and provisioning profile</a></li><li><a href="#æŠ€è¡“ç´°ç¯€-app-store-connect-api-key">æŠ€è¡“ç´°ç¯€ â€”App Store Connect API Key</a></li><li><a href="#æŠ€è¡“å»¶ä¼¸--reuse-action-workflow-æ‹†åˆ†æ‰“åŒ…å’Œéƒ¨ç½²å‹•ä½œ">æŠ€è¡“å»¶ä¼¸ â€” Reuse Action Workflow æ‹†åˆ†æ‰“åŒ…å’Œéƒ¨ç½²å‹•ä½œ</a></li><li><a href="#github-actions--artifact">GitHub Actions â€” Artifact</a></li></ul></details></li><li class="has-children"><details><summary>CIâ€” Nightly Build åŸ·è¡Œå¿«ç…§+å–®å…ƒæ¸¬è©¦+æ‰“åŒ…+CD éƒ¨ç½²åˆ° Firebase App Distribution <a href="#ci-nightly-build-åŸ·è¡Œå¿«ç…§å–®å…ƒæ¸¬è©¦æ‰“åŒ…cd-éƒ¨ç½²åˆ°-firebase-app-distribution">#</a></summary><ul><li><a href="#æµç¨‹-2">æµç¨‹</a></li><li><a href="#ci-nightly-build-and-deployyml">CI-Nightly-Build-And-Deploy.yml</a></li><li><a href="#æŠ€è¡“ç´°ç¯€">æŠ€è¡“ç´°ç¯€</a></li></ul></details></li><li class="has-children"><details><summary>Self-hosted Runner æ³¨æ„äº‹é … <a href="#self-hosted-runner-æ³¨æ„äº‹é …">#</a></summary><ul><li><a href="#å¤šå€‹-runner-åœ¨åŒå°æ©Ÿå™¨çš„æ¨¡æ“¬å™¨è¨­å®š">å¤šå€‹ Runner åœ¨åŒå°æ©Ÿå™¨çš„æ¨¡æ“¬å™¨è¨­å®š</a></li><li><a href="#å®Œæ•´å°ˆæ¡ˆ-repo">å®Œæ•´å°ˆæ¡ˆ Repo</a></li></ul></details></li><li class="has-children"><details><summary>è£œå…… SSH Agent è¨­å®š â€” For Fastlane Match or Private CocoaPods Repo <a href="#è£œå……-ssh-agent-è¨­å®š--for-fastlane-match-or-private-cocoapods-repo">#</a></summary><ul><li><a href="#step-1-ç”¢ç”Ÿ-ssh-key">Step 1. ç”¢ç”Ÿ SSH Key</a></li><li><a href="#step-2-åˆ°-private-repo-è¨­å®š-deploy-key">Step 2. åˆ° Private Repo è¨­å®š Deploy Key</a></li><li><a href="#step-3-å›-action-çš„-repo-è¨­å®š-ssh-private-key-to-secrets">Step 3. å› Action çš„ Repo è¨­å®š SSH Private Key to Secrets</a></li><li><a href="#step-4-ssh-agent-è¨­å®šå®Œæˆä¾†é©—è­‰ä¸€ä¸‹-git-clone-private-repo-çš„æ¬Šé™">Step 4. SSH Agent è¨­å®šå®Œæˆï¼Œä¾†é©—è­‰ä¸€ä¸‹ Git Clone Private Repo çš„æ¬Šé™</a></li></ul></details></li><li><a href="#ç¸½çµ">ç¸½çµ</a></li><li class="has-children"><details><summary>ç³»åˆ—æ–‡ç«  <a href="#ç³»åˆ—æ–‡ç« ">#</a></summary><ul><li><a href="#-buy-me-a-beer-on-paypal">ğŸº Buy me a beer on PayPal</a></li></ul></details></li></ul></nav><hr /><h3 id="cicd-å¯¦æˆ°æŒ‡å—ä¸‰ä½¿ç”¨-github-actions-å¯¦ä½œ-app-ios-ci-èˆ‡-cd-å·¥ä½œæµç¨‹"><span class="me-2">CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å¯¦ä½œ App iOS CI èˆ‡ CD å·¥ä½œæµç¨‹</span><a href="#cicd-å¯¦æˆ°æŒ‡å—ä¸‰ä½¿ç”¨-github-actions-å¯¦ä½œ-app-ios-ci-èˆ‡-cd-å·¥ä½œæµç¨‹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>iOS App è‡ªå‹•åŒ–å»ºç½®ã€æ¸¬è©¦ã€éƒ¨ç½²çš„ GitHub Actions å¯¦ä½œæ­¥é©Ÿå®Œæ•´æ•™å­¸</p><p><a href="/assets/4b001d2e8440/1*0LK6m6CTImL6rcsrliiOQA.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*0LK6m6CTImL6rcsrliiOQA.webp" alt="Photo by [Robs](https://unsplash.com/@robinne?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjkzNCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Photo by <a href="https://unsplash.com/@robinne?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" target="_blank">Robs</a></p><h4 id="å‰è¨€"><span class="me-2">å‰è¨€</span><a href="#å‰è¨€" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å‰ç¯‡ã€Œ <a href="https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"><strong>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆäºŒï¼‰ï¼šGitHub Actions èˆ‡ Self-hosted Runner ä½¿ç”¨èˆ‡å»ºç½®å¤§å…¨</strong></a> ã€æˆ‘å€‘ä»‹ç´¹äº† GitHub Actions çš„åŸºç¤çŸ¥è­˜èˆ‡é‹ä½œæµç¨‹é‚„æœ‰å¦‚ä½•ä½¿ç”¨è‡ªå·±çš„æ©Ÿå™¨ç•¶æˆ Runnerã€å¸¶å¤§å®¶å¯¦ç¾äº†ä¸‰å€‹ç°¡å–®çš„è‡ªå‹•åŒ– Actionsï¼› <strong>æœ¬ç¯‡å°‡æ·±å…¥è‘—é‡åœ¨ç¾å¯¦ä½¿ç”¨ GitHub Actions å»ºç½® App (iOS) CI/CD å·¥ä½œæµç¨‹ä¸Š</strong> ï¼Œä¸€æ¨£æ‰‹æŠŠæ‰‹å¸¶å¤§å®¶ä¸€æ­¥ä¸€æ­¥å®Œæˆä¸¦ä¸€é‚Šè£œè¶³ GitHub Actions ç›¸é—œçŸ¥è­˜ã€‚</p><h3 id="app-cicd-æµç¨‹é—œä¿‚åœ–"><span class="me-2">App CI/CD æµç¨‹é—œä¿‚åœ–</span><a href="#app-cicd-æµç¨‹é—œä¿‚åœ–" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/4b001d2e8440/1*VRygfRAkBRNEDAC4RyGzRA.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*VRygfRAkBRNEDAC4RyGzRA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjU3MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>æœ¬ç¯‡å°‡é—œæ³¨åœ¨ GitHub Actions å»ºç½® CI/CD çš„å€å¡Šï¼Œä¸‹ä¸€ç¯‡ã€Œ <a href="https://zhgchg.li/posts/zrealm-dev/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87-4273e57e7148/">CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆå››ï¼‰ï¼šä½¿ç”¨ Google Apps Script Web App ä¸²æ¥ GitHub Actions å»ºç½®å…è²»æ˜“ç”¨çš„æ‰“åŒ…å·¥å…·å¹³å°</a> ã€æ‰æœƒä»‹ç´¹å³åŠéƒ¨åˆ†çš„ä½¿ç”¨ Google Apps Script Web App å»ºç½®è·¨åœ˜éšŠå”ä½œæ‰“åŒ…å¹³å°ã€‚</p><h4 id="é‹ä½œæµç¨‹"><span class="me-2">é‹ä½œæµç¨‹ï¼š</span><a href="#é‹ä½œæµç¨‹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li>GitHub Actions é–‹ Pull Request è§¸ç™¼ or è¡¨å–®è§¸ç™¼ or å®šæ™‚è§¸ç™¼<li>åŸ·è¡Œå°æ‡‰ Workflow Jobs/Steps<li>Step åŸ·è¡Œå°æ‡‰ Fastlane (iOS) or (Android Gradle) è…³æœ¬<li>Fastlane åŸ·è¡Œå°æ‡‰ xcodebuild (iOS) æŒ‡ä»¤<li>å–å¾—åŸ·è¡Œçµæœ<li>å¾ŒçºŒ Workflow Jobs/Steps è™•ç†çµæœ<li>å®Œæˆ</ol><h4 id="github-actions-æˆæœåœ–"><span class="me-2">GitHub Actions æˆæœåœ–</span><a href="#github-actions-æˆæœåœ–" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å…ˆä¸Šæœ€çµ‚æˆæœçµ¦å¤§å®¶ä¸€é»å¯¦ä½œå‹•åŠ›ï¼</p><p><a href="/assets/4b001d2e8440/1*5gnQYdVAOtGR-bMK4ZrOhA.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*5gnQYdVAOtGR-bMK4ZrOhA.webp" alt="[CI Testing](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTEiIGhlaWdodD0iNTY2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">CI Testing</a></p><p><a href="/assets/4b001d2e8440/1*u6A77KwkXS2SY5-DPPPR9A.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*u6A77KwkXS2SY5-DPPPR9A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzczIiBoZWlnaHQ9IjkxOCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/4b001d2e8440/1*t9PrQfcTANyvG7gfXXC-bw.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*t9PrQfcTANyvG7gfXXC-bw.webp" alt="[CI Nightly Build, CD Deploy](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions/runs/16119750747){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions/runs/16119750747" target="_blank">CI Nightly Build, CD Deploy</a></p><h3 id="github-actions-x-self-hosted-runner-åŸºç¤çŸ¥è­˜"><span class="me-2">GitHub Actions x Self-hosted Runner åŸºç¤çŸ¥è­˜</span><a href="#github-actions-x-self-hosted-runner-åŸºç¤çŸ¥è­˜" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>å¦‚æœä½ å° GitHub Actions èˆ‡æ¶è¨­ Self-hosted Runner é‚„ä¸ç†Ÿæ‚‰å¼·çƒˆå»ºè­°å…ˆçœ‹éä¸Šç¯‡ã€Œ <a href="https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"><strong>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆäºŒï¼‰ï¼šGitHub Actions èˆ‡ Self-hosted Runner ä½¿ç”¨èˆ‡å»ºç½®å¤§å…¨</strong></a> ã€æˆ–æ˜¯æ­é…ä¸Šç¯‡çŸ¥è­˜ä¸€èµ·å¯¦ä½œã€‚</p><blockquote><p><strong><em>å¯¦ä½œé–‹å§‹ï¼</em></strong></p></blockquote><h3 id="ios-demo-å°ˆæ¡ˆçš„-infra-æ¶æ§‹"><span class="me-2">iOS Demo å°ˆæ¡ˆçš„ Infra æ¶æ§‹</span><a href="#ios-demo-å°ˆæ¡ˆçš„-infra-æ¶æ§‹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/ac0aa481002311af0e60721a17f7533f54be5d308c641c48ea717e12a1f3d725/ZhgChgLi/github-actions-ci-cd-demo" alt="" loading="lazy"></a></p><p><strong>æœ¬æ–‡ç”¨åˆ°çš„ iOS å°ˆæ¡ˆå…§å®¹åŒ…å«æ¸¬è©¦é …ç›®éƒ½æ˜¯ç”¨ AI ç”¢ç”Ÿçš„</strong> ï¼Œä¸éœ€åœ¨æ„ iOS çš„ç¨‹å¼ç´°ç¯€ï¼Œåªé‡å° Infra &amp; CI/CD éƒ¨åˆ†åšè¨è«–ã€‚</p><blockquote><p><strong><em>ä»¥ä¸‹å·¥å…·åªæ˜¯æ†‘ä»¥å¾€ç¶“é©—ï¼Œå¦‚æœæ˜¯æ–°å°ˆæ¡ˆå¯ä»¥è€ƒæ…®ä½¿ç”¨æ›´æ–°çš„ <a href="https://github.com/jdx/mise" target="_blank">mise</a> å’Œ <a href="https://github.com/tuist/tuist" target="_blank">tuist</a> ã€‚</em></strong></p></blockquote><h4 id="mint"><span class="me-2">Mint</span><a href="#mint" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://github.com/yonaskolb/Mint" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/5b9cf093f4868403ac9212a468eda99979267fe5e14c7dd1ce13c3b42b875f5f/yonaskolb/Mint" alt="" loading="lazy"></a></p><p>Mint å·¥å…·å¯ä»¥å¹«æˆ‘å€‘çµ±ä¸€ç®¡ç†ä¾è³´å·¥å…·çš„ç‰ˆæœ¬(Gemfile åªèƒ½ç®¡ç† Ruby Gems)ï¼Œä¾‹å¦‚ XCodeGenã€XCodeGenã€SwiftFormatã€SwiftLintã€Periphery</p><p>â€¦etc</p><p><strong>Mintfile:</strong></p><div class="language-graphql highlighter-rouge"><div class="code-header"> <span data-label-text="GraphQL"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="err">yonaskolb/Mint@0.17.5</span><span class="w">
</span><span class="err">yonaskolb/XcodeGen@2.35.0</span><span class="w">
</span><span class="err">nicklockwood/SwiftFormat@0.51.13</span><span class="w">
</span></pre></table></code></div></div><p>é€™é‚Šæˆ‘å€‘åªç”¨åˆ°ä¸‰å€‹ã€‚</p><blockquote><p><strong><em>è¦ºå¾—å¤ªè¤‡é›œä¸ä½¿ç”¨ä¹Ÿå¯ä»¥ï¼Œç›´æ¥åœ¨ Action Workflow Step ä¸­ç”¨ brew install å®‰è£éœ€è¦çš„å·¥å…·å³å¯ã€‚</em></strong></p></blockquote><h4 id="bundle"><span class="me-2">Bundle</span><a href="#bundle" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>Gemfile:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nb">source</span> <span class="s1">'https://rubygems.org'</span>
gem <span class="s1">'cocoapods'</span>, <span class="s1">'~&gt;1.16.0'</span>
gem <span class="s1">'fastlane'</span>, <span class="s1">'~&gt;2.228.0'</span>

plugins_path <span class="o">=</span> File.join<span class="o">(</span>File.dirname<span class="o">(</span>__FILE__<span class="o">)</span>, <span class="s1">'Product'</span>, <span class="s1">'fastlane'</span>, <span class="s1">'Pluginfile'</span><span class="o">)</span>
eval_gemfile<span class="o">(</span>plugins_path<span class="o">)</span> <span class="k">if </span>File.exist?<span class="o">(</span>plugins_path<span class="o">)</span>
</pre></table></code></div></div><p>ç®¡ç† Ruby (Gems) ç›¸é—œä¾è³´ï¼Œä¸€èˆ¬ iOS å°ˆæ¡ˆæœ€å¸¸ç”¨çš„å°±æ˜¯é€™å…©å€‹ <code class="language-plaintext highlighter-rouge">cocoapods</code> è·Ÿ <code class="language-plaintext highlighter-rouge">fastlane</code> ã€‚</p><h4 id="cocoapods"><span class="me-2">Cocoapods</span><a href="#cocoapods" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>Product/podfile:</strong></p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">platform</span> <span class="ss">:ios</span><span class="p">,</span> <span class="s1">'13.0'</span>
<span class="n">use_frameworks!</span>

<span class="n">target</span> <span class="s1">'app-ci-cd-github-actions-demo'</span> <span class="k">do</span>
  <span class="n">pod</span> <span class="s1">'SnapKit'</span>
<span class="k">end</span> 
</pre></table></code></div></div><p>é›–ç„¶å·²å®£å‘Š <a href="https://blog.cocoapods.org/CocoaPods-Specs-Repo/" target="_blank">å³å°‡åœæ­¢ç¶­è­·</a> ï¼Œä½† Cocoapods åœ¨æœ‰å¹´ä»£çš„ iOS å°ˆæ¡ˆä¸­ä»å¾ˆå¸¸è¦‹ï¼Œé€™é‚Šç°¡å–®åŠ ä¸€å€‹ Snapkit ç•¶ Demoã€‚</p><h4 id="xcodegen"><span class="me-2">XCodeGen</span><a href="#xcodegen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>é¿å…å¤šäººé–‹ç™¼ä¸­ <code class="language-plaintext highlighter-rouge">.xcodeproj</code> / <code class="language-plaintext highlighter-rouge">.xcworkspace</code> ç•°å‹•é€ æˆçš„è¡çªï¼Œçµ±ä¸€ä½¿ç”¨ Project.yaml å®šç¾© XCode Project å…§å®¹ï¼Œç„¶å¾Œåœ¨æœ¬åœ°è‡ªå·± Gen Project æª”æ¡ˆ(ä¸ä¸Š Git)ã€‚</p><p><strong>Product/project.yaml:</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">app-ci-cd-github-actions-demo</span>
<span class="na">options</span><span class="pi">:</span>
  <span class="na">bundleIdPrefix</span><span class="pi">:</span> <span class="s">com.example</span>
  <span class="na">deploymentTarget</span><span class="pi">:</span>
    <span class="na">iOS</span><span class="pi">:</span> <span class="s1">'</span><span class="s">13.0'</span>
  <span class="na">usesTabs</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">indentWidth</span><span class="pi">:</span> <span class="m">2</span>
  <span class="na">tabWidth</span><span class="pi">:</span> <span class="m">2</span>

<span class="na">configs</span><span class="pi">:</span>
  <span class="na">Debug</span><span class="pi">:</span> <span class="s">debug</span>
  <span class="na">Release</span><span class="pi">:</span> <span class="s">release</span>

<span class="na">targets</span><span class="pi">:</span>
  <span class="na">app-ci-cd-github-actions-demo</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">application</span>
    <span class="na">platform</span><span class="pi">:</span> <span class="s">iOS</span>
    <span class="na">sources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">app-ci-cd-github-actions-demo</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">app-ci-cd-github-actions-demo/Assets.xcassets</span>
      <span class="pi">-</span> <span class="s">app-ci-cd-github-actions-demo/Base.lproj</span>
    <span class="na">info</span><span class="pi">:</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">app-ci-cd-github-actions-demo/Info.plist</span>
      <span class="na">properties</span><span class="pi">:</span>
        <span class="na">CFBundleIdentifier</span><span class="pi">:</span> <span class="s">$(PRODUCT_BUNDLE_IDENTIFIER)</span>
    <span class="na">settings</span><span class="pi">:</span>
      <span class="na">base</span><span class="pi">:</span>
        <span class="na">PRODUCT_BUNDLE_IDENTIFIER</span><span class="pi">:</span> <span class="s">com.test.appcicdgithubactionsdemo</span>
    <span class="na">cocoapods</span><span class="pi">:</span> <span class="kc">true</span>

  <span class="na">app-ci-cd-github-actions-demoTests</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">bundle.unit-test</span>
    <span class="na">platform</span><span class="pi">:</span> <span class="s">iOS</span>
    <span class="na">sources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">app-ci-cd-github-actions-demoTests</span>
    <span class="na">dependencies</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">target</span><span class="pi">:</span> <span class="s">app-ci-cd-github-actions-demo</span>
    <span class="na">info</span><span class="pi">:</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">app-ci-cd-github-actions-demoTests/Info.plist</span>
    <span class="na">settings</span><span class="pi">:</span>
      <span class="na">base</span><span class="pi">:</span>
        <span class="na">PRODUCT_BUNDLE_IDENTIFIER</span><span class="pi">:</span> <span class="s">com.test.appcicdgithubactionsdemo.tests</span>

  <span class="na">app-ci-cd-github-actions-demoUITests</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">bundle.ui-testing</span>
    <span class="na">platform</span><span class="pi">:</span> <span class="s">iOS</span>
    <span class="na">sources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">app-ci-cd-github-actions-demoUITests</span>
    <span class="na">dependencies</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">target</span><span class="pi">:</span> <span class="s">app-ci-cd-github-actions-demo</span>
    <span class="na">info</span><span class="pi">:</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">app-ci-cd-github-actions-demoUITests/Info.plist</span>
    <span class="na">settings</span><span class="pi">:</span>
      <span class="na">base</span><span class="pi">:</span>
        <span class="na">PRODUCT_BUNDLE_IDENTIFIER</span><span class="pi">:</span> <span class="s">com.test.appcicdgithubactionsdemo.uitests</span>

  <span class="na">app-ci-cd-github-actions-demoSnapshotTests</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">bundle.unit-test</span>
    <span class="na">platform</span><span class="pi">:</span> <span class="s">iOS</span>
    <span class="na">sources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">app-ci-cd-github-actions-demoSnapshotTests</span>
        <span class="na">excludes</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">**/__Snapshots__/**"</span>
    <span class="na">dependencies</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">target</span><span class="pi">:</span> <span class="s">app-ci-cd-github-actions-demo</span>
      <span class="pi">-</span> <span class="na">product</span><span class="pi">:</span> <span class="s">SnapshotTesting</span>
        <span class="na">package</span><span class="pi">:</span> <span class="s">SnapshotTesting</span>
    <span class="na">info</span><span class="pi">:</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">app-ci-cd-github-actions-demoSnapshotTests/Info.plist</span>
      <span class="na">settings</span><span class="pi">:</span>
        <span class="na">base</span><span class="pi">:</span>
          <span class="na">PRODUCT_BUNDLE_IDENTIFIER</span><span class="pi">:</span> <span class="s">com.test.appcicdgithubactionsdemo.snapshottests</span>

<span class="na">packages</span><span class="pi">:</span>
  <span class="na">SnapshotTesting</span><span class="pi">:</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">https://github.com/pointfreeco/swift-snapshot-testing</span>
    <span class="na">from</span><span class="pi">:</span> <span class="s">1.18.4</span>
</pre></table></code></div></div><p>SnapshotTesting: ä½¿ç”¨ Swift Package Manager ç®¡ç†ã€‚</p><h4 id="fastlane"><span class="me-2">Fastlane</span><a href="#fastlane" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å°è£ xcodebuild æŒ‡ä»¤ã€å°è£ä¸²æ¥ App Store Connect APIã€Firebase API. .ç­‰æœå‹™çš„è¤‡é›œæ­¥é©Ÿã€‚</p><p><strong>Product/fastlane/Fastfile:</strong></p><div class="language-php highlighter-rouge"><div class="code-header"> <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
</pre><td class="rouge-code"><pre>
<span class="nf">default_platform</span><span class="p">(</span><span class="o">:</span><span class="n">ios</span><span class="p">)</span>

<span class="n">platform</span> <span class="o">:</span><span class="n">ios</span> <span class="k">do</span>
  <span class="n">desc</span> <span class="s2">"Run all tests (Unit Tests + UI Tests)"</span>
  <span class="n">lane</span> <span class="o">:</span><span class="n">run_all_tests</span> <span class="k">do</span> <span class="o">|</span><span class="n">options</span><span class="o">|</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="o">:</span><span class="n">device</span><span class="p">]</span>
    <span class="nf">scan</span><span class="p">(</span>
      <span class="n">scheme</span><span class="o">:</span> <span class="s2">"app-ci-cd-github-actions-demo"</span><span class="p">,</span>
      <span class="n">device</span><span class="o">:</span> <span class="n">device</span><span class="p">,</span>
      <span class="n">clean</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="n">output_directory</span><span class="o">:</span> <span class="s2">"fastlane/test_output"</span><span class="p">,</span>
      <span class="n">output_types</span><span class="o">:</span> <span class="s2">"junit"</span>
    <span class="p">)</span>
  <span class="n">end</span>

  <span class="n">desc</span> <span class="s2">"Run only Unit Tests"</span>
  <span class="n">lane</span> <span class="o">:</span><span class="n">run_unit_tests</span> <span class="k">do</span> <span class="o">|</span><span class="n">options</span><span class="o">|</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="o">:</span><span class="n">device</span><span class="p">]</span>
    <span class="nf">scan</span><span class="p">(</span>
      <span class="n">scheme</span><span class="o">:</span> <span class="s2">"app-ci-cd-github-actions-demo"</span><span class="p">,</span>
      <span class="n">device</span><span class="o">:</span> <span class="n">device</span><span class="p">,</span>
      <span class="n">clean</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="n">only_testing</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">"app-ci-cd-github-actions-demoTests"</span>
      <span class="p">],</span>
      <span class="n">output_directory</span><span class="o">:</span> <span class="s2">"fastlane/test_output"</span><span class="p">,</span>
      <span class="n">output_types</span><span class="o">:</span> <span class="s2">"junit"</span>
    <span class="p">)</span>
  <span class="n">end</span>

  <span class="n">desc</span> <span class="s2">"Build and upload to Firebase App Distribution"</span>
  <span class="n">lane</span> <span class="o">:</span><span class="n">beta</span> <span class="k">do</span> <span class="o">|</span><span class="n">options</span><span class="o">|</span>
    
    <span class="k">if</span> <span class="n">options</span><span class="p">[</span><span class="o">:</span><span class="n">version_number</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">options</span><span class="p">[</span><span class="o">:</span><span class="n">version_number</span><span class="p">]</span><span class="mf">.</span><span class="n">to_s</span><span class="mf">.</span><span class="n">strip</span> <span class="o">!=</span> <span class="s2">""</span>
      <span class="nf">increment_version_number</span><span class="p">(</span><span class="n">version_number</span><span class="o">:</span> <span class="n">options</span><span class="p">[</span><span class="o">:</span><span class="n">version_number</span><span class="p">])</span>
    <span class="n">end</span>

    <span class="k">if</span> <span class="n">options</span><span class="p">[</span><span class="o">:</span><span class="n">build_number</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">options</span><span class="p">[</span><span class="o">:</span><span class="n">build_number</span><span class="p">]</span><span class="mf">.</span><span class="n">to_s</span><span class="mf">.</span><span class="n">strip</span> <span class="o">!=</span> <span class="s2">""</span>
      <span class="nf">increment_build_number</span><span class="p">(</span><span class="n">build_number</span><span class="o">:</span> <span class="n">options</span><span class="p">[</span><span class="o">:</span><span class="n">build_number</span><span class="p">])</span>
    <span class="n">end</span>

    <span class="nf">update_code_signing_settings</span><span class="p">(</span>
      <span class="n">use_automatic_signing</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="n">path</span><span class="o">:</span> <span class="s2">"app-ci-cd-github-actions-demo.xcodeproj"</span><span class="p">,</span>
      <span class="n">team_id</span><span class="o">:</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'TEAM_ID'</span><span class="p">],</span>
      <span class="n">code_sign_identity</span><span class="o">:</span> <span class="s2">"iPhone Developer"</span><span class="p">,</span>
      <span class="n">sdk</span><span class="o">:</span> <span class="s2">"iphoneos*"</span><span class="p">,</span>
      <span class="n">profile_name</span><span class="o">:</span> <span class="s2">"cicd"</span>
    <span class="p">)</span>

    <span class="nf">gym</span><span class="p">(</span>
      <span class="n">scheme</span><span class="o">:</span> <span class="s2">"app-ci-cd-github-actions-demo"</span><span class="p">,</span>
      <span class="n">clean</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="n">export_method</span><span class="o">:</span> <span class="s2">"development"</span><span class="p">,</span>
      <span class="n">output_directory</span><span class="o">:</span> <span class="s2">"fastlane/build"</span><span class="p">,</span>
      <span class="n">output_name</span><span class="o">:</span> <span class="s2">"app-ci-cd-github-actions-demo.ipa"</span><span class="p">,</span>
      <span class="n">export_options</span><span class="o">:</span> <span class="p">{</span>
          <span class="n">provisioningProfiles</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"com.test.appcicdgithubactionsdemo"</span> <span class="o">=&gt;</span> <span class="s2">"cicd"</span><span class="p">,</span>
          <span class="p">},</span>
      <span class="p">}</span>
    <span class="p">)</span>

    <span class="nf">firebase_app_distribution</span><span class="p">(</span>
      <span class="n">app</span><span class="o">:</span> <span class="s2">"1:127683058219:ios:98896929fa131c7a80686e"</span><span class="p">,</span>
      <span class="n">firebase_cli_token</span><span class="o">:</span> <span class="no">ENV</span><span class="p">[</span><span class="s2">"FIREBASE_CLI_TOKEN"</span><span class="p">],</span>
      <span class="n">release_notes</span><span class="o">:</span> <span class="n">options</span><span class="p">[</span><span class="o">:</span><span class="n">release_notes</span><span class="p">]</span> <span class="o">||</span> <span class="s2">"New beta build"</span>
    <span class="p">)</span>
  <span class="n">end</span>
<span class="n">end</span>
</pre></table></code></div></div><p>è¨»: provisioningProfilesã€profile_name å°æ‡‰çš„æ˜¯ <a href="https://developer.apple.com/account/resources/certificates/list" target="_blank">App Developer ä¸­çš„ Profiles æ†‘è­‰åç¨±</a> ã€‚(å¦‚æœæœ‰ç”¨ match å‰‡ä¹Ÿä¸éœ€è¦é€™äº›æŒ‡å®šã€‚)</p><p><a href="/assets/4b001d2e8440/1*WXqqnErto3nn8rnNg6TXgw.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*WXqqnErto3nn8rnNg6TXgw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTE3IiBoZWlnaHQ9IjYxNiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><strong>Fastlane æ˜¯ iOS CI/CD ç•¶ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†</strong> ï¼Œç›´æ¥ä½¿ç”¨å®ƒå°è£å¥½çš„æ–¹æ³•å°±èƒ½å¿«é€Ÿé–‹ç™¼ CI/CD å¯¦éš›åŸ·è¡Œçš„æ­¥é©Ÿï¼›æˆ‘å€‘åªéœ€é—œæ³¨åœ¨æ•´é«”çš„è…³æœ¬è¨­è¨ˆï¼Œè€Œä¸éœ€å»è™•ç†è¤‡é›œçš„ API ä¸²æ¥æˆ–æŒ‡ä»¤æ’°å¯«ã€‚</p><p>ä¾‹å¦‚ï¼šFastlane åªéœ€è¦å¯«ã€Œscan(xxx)ã€å°±èƒ½åŸ·è¡Œæ¸¬è©¦ï¼Œå¦‚æœè¦å¯«æˆ xcodebuild å‰‡éœ€è¦ã€Œ <code class="language-plaintext highlighter-rouge">xcodebuild -workspace ./xxx.xcworkspace -scheme xxx -derivedDataPath xxx â€˜platform=iOS Simulator,id=xxxâ€™ clean build test</code> ã€ï¼Œæ‰“åŒ…éƒ¨ç½²è¦è‡ªå·±åšæ›´æ˜¯éº»ç…©ï¼Œè¦è‡ªè¡Œä¸²æ¥ App Store Connect/Firebase APIï¼Œå…‰é‡‘é‘°é©—è­‰éƒ½è¦å¯«è¶…é 10 è¡Œç¨‹å¼äº†ã€‚</p><p><strong>Demo å°ˆæ¡ˆæˆ‘å€‘åªæœ‰ä¸‰å€‹ Lane:</strong></p><ul><li>run_all_tests: è·‘æ‰€æœ‰é¡å‹çš„æ¸¬è©¦ (Snapshot+Unit)<li>run_unit_tests: åªè·‘å–®å…ƒæ¸¬è©¦ (Unit)<li>beta: æ‰“åŒ…éƒ¨ç½²åˆ° Firebase App Distribution</ul><h4 id="fastlane--match"><span class="me-2">Fastlane â€” Match</span><a href="#fastlane--match" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å›  Demo å°ˆæ¡ˆé™åˆ¶ï¼Œé€™é‚Šæ²’ç”¨åˆ° Match ç®¡ç†åœ˜éšŠé–‹ç™¼ã€éƒ¨ç½²æ†‘è­‰ï¼Œä½†é€™é‚Šé‚„æ˜¯è¦æä¸€ä¸‹ï¼Œå»ºè­°ä½¿ç”¨ Match å»ç®¡ç†åœ˜éšŠçš„æ‰€æœ‰é–‹ç™¼ã€éƒ¨ç½²æ†‘è­‰ï¼Œæ–¹ä¾¿æ§ç®¡è·Ÿçµ±ä¸€æ›´æ–°ã€‚</p><blockquote><p><em>æœ‰ç”¨ Match å°±èƒ½åœ¨å°ˆæ¡ˆ Setup æ­¥é©Ÿç›´æ¥ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">match all</code> ä¹‹é¡çš„æŒ‡ä»¤ä¸€éµå®‰è£å¥½æ‰€æœ‰é–‹ç™¼éœ€è¦çš„æ†‘è­‰ã€‚</em></p></blockquote><ul><li><strong>Fastlane Match æœƒä½¿ç”¨å¦ä¸€å€‹ Private Repo ç®¡ç†æ†‘è­‰é‡‘é‘°ï¼Œåœ¨ GitHub Actions ä¸­éœ€è¦è¨­å®šå¥½ SSH Agent æ‰èƒ½ Clone å¦ä¸€å€‹ Private Repoã€‚</strong> (è«‹åƒè€ƒæ–‡æœ«è£œå……)</ul><p><strong>[2026/02 Update] å»¶ä¼¸é–±è®€ â€” è£œå…… iOS æ†‘è­‰ã€Fastlane Matchã€CI/CD ä½¿ç”¨ç´°ç¯€:</strong></p><ul><li>ã€Œ <a href="https://zhgchg.li/posts/zrealm-dev/ios-certificates-identifiers%E8%88%87profiles%E8%A9%B3%E8%A7%A3-fastlane-match%E7%B5%B1%E4%B8%80%E7%AE%A1%E7%90%86%E6%86%91%E8%AD%89%E8%88%87ci-cd%E6%95%B4%E5%90%88%E5%AF%A6%E6%88%B0-823ac523ccc8/">iOS Certificates, Identifiers &amp; Profiles æ˜¯ä»€éº¼åŠ Fastlane Match çµ±ä¸€ç®¡ç†æ†‘è­‰èˆ‡ CI/CD çš„ä¸€äº›ç­†è¨˜</a> ã€</ul><p>â€” â€” â€”</p><h4 id="makefile"><span class="me-2">Makefile</span><a href="#makefile" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/4b001d2e8440/1*jYACUYFP3MkeHCgeUY7j3w.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*jYACUYFP3MkeHCgeUY7j3w.webp" alt="Makefile" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjQyMyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Makefile</p><p>è®“é–‹ç™¼ç«¯èˆ‡ CI/CD çµ±ä¸€éƒ½ä½¿ç”¨ Makefile åŸ·è¡ŒæŒ‡ä»¤ï¼Œæ–¹ä¾¿æˆ‘å€‘å°è£åŒæ¨£çš„ç’°å¢ƒã€è·¯å¾‘èˆ‡æ“ä½œè¡Œçˆ²ã€‚</p><blockquote><p><em>ç¶“å…¸çš„æ¡ˆä¾‹æ˜¯æœ‰çš„äººä½¿ç”¨çš„æ˜¯æœ¬æ©Ÿå®‰è£çš„ <code class="language-plaintext highlighter-rouge">pod install</code> æœ‰çš„äººå‰‡ä½¿ç”¨çš„æ˜¯ Bundel ç®¡ç†çš„ <code class="language-plaintext highlighter-rouge">bundle exec pod install</code> å¦‚æœç‰ˆæœ¬ä¸åŒå°±å¯èƒ½ç”¢ç”Ÿå·®ç•°ã€‚</em></p></blockquote><blockquote><p><strong><em>è¦ºå¾—å¤ªè¤‡é›œä¸ä½¿ç”¨ä¹Ÿå¯ä»¥ï¼Œé‚£å°±æ˜¯åœ¨ Action Workflow Step ä¸­ç›´æ¥å¯«è¦åŸ·è¡Œçš„æŒ‡ä»¤å³å¯ã€‚</em></strong></p></blockquote><p><strong>Makefile:</strong></p><div class="language-makefile highlighter-rouge"><div class="code-header"> <span data-label-text="Makefile"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre><td class="rouge-code"><pre><span class="c">#!make
</span><span class="nv">PRODUCT_FOLDER</span> <span class="o">=</span> ./Product/
<span class="nv">SHELL</span>         <span class="o">:=</span> /bin/zsh
<span class="nv">.DEFAULT_GOAL</span> <span class="o">:=</span> <span class="nb">install</span>
<span class="nv">MINT_DIRECTORY</span> <span class="o">:=</span> ./mint/

<span class="k">export </span><span class="nv">MINT_PATH</span><span class="o">=</span><span class="p">$(</span>MINT_DIRECTORY<span class="p">)</span>

<span class="c">## ğŸ‘‡ Help function
</span><span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">help</span>
<span class="nl">help</span><span class="o">:</span>
 <span class="err">@echo</span> <span class="s2">""</span>
 <span class="nl">@echo "ğŸ“– å¯ç”¨æŒ‡ä»¤</span><span class="o">:</span><span class="nf">"</span>
 <span class="nl">@grep -E '^[a-zA-Z_-]+</span><span class="o">:</span><span class="nf">.*?</span><span class="c">##</span><span class="nf"> .*$$' $(MAKEFILE_LIST) | </span>\
<span class="nf">  awk 'BEGIN {FS = ":.*?</span><span class="c">##</span><span class="nf"> "}; {printf "  </span>\0<span class="nf">33[36m%-20s</span>\0<span class="nf">33[0m %s</span>\n<span class="nf">"</span><span class="p">,</span><span class="nf"> $$1</span><span class="p">,</span><span class="nf"> $$2}'</span>
 <span class="err">@echo</span> <span class="s2">""</span>

<span class="c">## Setup
</span><span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">setup</span>
<span class="nl">setup</span><span class="o">:</span> <span class="nf">check-mint </span><span class="c">##</span><span class="nf"> å®‰è£ Ruby å’Œ Mint ä¾è³´</span>
 <span class="err">@echo</span> <span class="s2">"ğŸ”¨ Installing Ruby dependencies..."</span>
 <span class="err">bundle</span> <span class="err">config</span> <span class="err">set</span> <span class="err">path</span> <span class="s1">'vendor/bundle'</span>
 <span class="err">bundle</span> <span class="err">install</span>
 <span class="err">@echo</span> <span class="s2">"ğŸ”¨ Installing Mint dependencies..."</span>
 <span class="err">mint</span> <span class="err">bootstrap</span>

<span class="c">## Install
</span><span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">install</span>
<span class="nl">install</span><span class="o">:</span> <span class="nf">XcodeGen PodInstall </span><span class="c">##</span><span class="nf"> åŸ·è¡Œ XcodeGen å’Œ CocoaPods å®‰è£</span>

<span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">XcodeGen</span>
<span class="nl">XcodeGen</span><span class="o">:</span> <span class="nf">check-mint </span><span class="c">##</span><span class="nf"> ç”¨ XcodeGen ç”¢ç”Ÿ .xcodeproj</span>
 <span class="err">@echo</span> <span class="s2">"ğŸ”¨ Execute XcodeGen"</span>
 <span class="err">cd</span> <span class="err">$(PRODUCT_FOLDER)</span> <span class="err">&amp;&amp;</span> <span class="err">\</span>
 <span class="err">mint</span> <span class="err">run</span> <span class="err">yonaskolb/XcodeGen</span> <span class="err">--quiet</span>

<span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">PodInstall</span>
<span class="nl">PodInstall</span><span class="o">:</span> <span class="c">##</span><span class="nf"> å®‰è£ CocoaPods ä¾è³´</span>
 <span class="err">@echo</span> <span class="s2">"ğŸ“¦ Installing CocoaPods dependencies..."</span>
 <span class="err">cd</span> <span class="err">$(PRODUCT_FOLDER)</span> <span class="err">&amp;&amp;</span> <span class="err">\</span>
 <span class="err">bundle</span> <span class="err">exec</span> <span class="err">pod</span> <span class="err">install</span>

<span class="c">### Mint
</span><span class="nl">check-mint</span><span class="o">:</span> <span class="nf">check-brew </span><span class="c">##</span><span class="nf"> æª¢æŸ¥ Mint æ˜¯å¦å®‰è£ï¼Œæ²’æœ‰å°±è‡ªå‹•å®‰è£</span>
 <span class="err">@if</span> <span class="err">!</span> <span class="err">command</span> <span class="err">-v</span> <span class="err">mint</span> <span class="err">&amp;&gt;</span> <span class="err">/dev/null;</span> <span class="err">then</span> <span class="err">\</span>
  <span class="err">echo</span> <span class="s2">"ğŸ”¨ Installing mint..."</span><span class="err">;</span> <span class="err">\</span>
  <span class="err">brew</span> <span class="err">install</span> <span class="err">mint;</span> <span class="err">\</span>
 <span class="err">fi</span>

<span class="c">### Brew
</span><span class="nl">check-brew</span><span class="o">:</span> <span class="c">##</span><span class="nf"> æª¢æŸ¥ Homebrew æ˜¯å¦å®‰è£ï¼Œæ²’æœ‰å°±è‡ªå‹•å®‰è£</span>
 <span class="err">@if</span> <span class="err">!</span> <span class="err">command</span> <span class="err">-v</span> <span class="err">brew</span> <span class="err">&amp;&gt;</span> <span class="err">/dev/null;</span> <span class="err">then</span> <span class="err">\</span>
  <span class="err">echo</span> <span class="s2">"ğŸ”¨ Installing Homebrew..."</span><span class="err">;</span> <span class="err">\</span>
  <span class="nl">/bin/bash -c "$$(curl -fsSL https</span><span class="o">:</span><span class="nf">//raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"; </span>\
<span class="nf"> fi</span>

<span class="c">## Format only git swift files
</span><span class="nl">.PHONY</span><span class="o">:</span> <span class="nf">format</span>
<span class="nl">format</span><span class="o">:</span> <span class="nf">check-mint </span><span class="c">##</span><span class="nf"> æ ¼å¼åŒ– Product/ ä¸‹æ‰€æœ‰ Swift æª”</span>
 <span class="err">mint</span> <span class="err">run</span> <span class="err">swiftformat</span> <span class="err">$(PRODUCT_FOLDER)</span>
</pre></table></code></div></div><p>ç‚ºäº†é¿å…æ±¡æŸ“æ•´å€‹ç³»çµ±æˆ–å…¶ä»–å°ˆæ¡ˆï¼Œæˆ‘å€‘ç›¡å¯èƒ½æŠŠ Dependency å¥—ä»¶(e.g. mint, bundleâ€¦etc)çš„è·¯å¾‘éƒ½æ”¹æŒ‡å®šåœ¨å°ˆæ¡ˆç›®éŒ„ä¹‹ä¸‹ (å†æ­é… <code class="language-plaintext highlighter-rouge">.gitignore</code> æ’é™¤)ã€‚</p><div class="language-scss highlighter-rouge"><div class="code-header"> <span data-label-text="SCSS"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="err">â”œâ”€â”€</span> <span class="nt">mint</span> <span class="o">(</span><span class="nt">Mint</span> <span class="err">ä¾è³´</span><span class="o">)</span>
<span class="err">â”‚</span>   <span class="err">â””â”€â”€</span> <span class="nt">packages</span>
<span class="err">â”œâ”€â”€</span> <span class="nt">Product</span>
<span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="nt">app-ci-cd-github-actions-demo</span>
<span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="nt">app-ci-cd-github-actions-demo</span><span class="nc">.xcodeproj</span>
<span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="nt">app-ci-cd-github-actions-demo</span><span class="nc">.xcworkspace</span>
<span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="nt">app-ci-cd-github-actions-demoSnapshotTests</span>
<span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="nt">app-ci-cd-github-actions-demoTests</span>
<span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="nt">app-ci-cd-github-actions-demoUITests</span>
<span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="nt">fastlane</span>
<span class="err">â”‚</span>   <span class="err">â””â”€â”€</span> <span class="nt">Pods</span> <span class="o">(</span><span class="nt">Cocoapods</span> <span class="err">ä¾è³´</span><span class="o">)</span>
<span class="err">â””â”€â”€</span> <span class="nt">vendor</span> <span class="o">(</span><span class="nt">Bundle</span> <span class="err">ä¾è³´</span><span class="o">)</span>
    <span class="err">â””â”€â”€</span> <span class="nt">bundle</span>
</pre></table></code></div></div><p><a href="/assets/4b001d2e8440/1*F1KFntT8bCZzyYm9JahiuA.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*F1KFntT8bCZzyYm9JahiuA.webp" alt="make help" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NDkiIGhlaWdodD0iMTQyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>make help</p><p><strong>ä½¿ç”¨ Makefine çš„çµ±ä¸€å°ˆæ¡ˆ Setup æ­¥é©Ÿï¼š</strong></p><ol><li><code class="language-plaintext highlighter-rouge">git clone repo</code><li><code class="language-plaintext highlighter-rouge">cd ./repo</code><li><code class="language-plaintext highlighter-rouge">make setup</code> å®‰è£å¿…è¦çš„å·¥å…·ä¾è³´ ( <strong>brew</strong> , <strong>mint</strong> , <strong>bundle</strong> , xcodegen, swiftformat,â€¦)<li><code class="language-plaintext highlighter-rouge">make install</code> ç”¢ç”Ÿå°ˆæ¡ˆ (åŸ·è¡Œ pod install, xcodegen)<li>å®Œæˆ<li>æ‰“é–‹ã€åŸ·è¡Œå°ˆæ¡ˆ</ol><blockquote><p><strong><em>ä¸ç®¡æ˜¯ CI/CD æˆ–æ–°äºº onboard éƒ½æ˜¯ç…§ä»¥ä¸Šæ­¥é©ŸæŠŠå°ˆæ¡ˆå»ºç½®èµ·ä¾†ã€‚</em></strong></p></blockquote><h3 id="æœ¬ç¯‡-github-actions-cicd-æ¡ˆä¾‹"><span class="me-2">æœ¬ç¯‡ GitHub Actions CI/CD æ¡ˆä¾‹</span><a href="#æœ¬ç¯‡-github-actions-cicd-æ¡ˆä¾‹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>æœ¬ç¯‡æœƒä»‹ç´¹ä¸‰å€‹ GitHub Actions CI/CD å·¥ä½œæµç¨‹å»ºç½®æ¡ˆä¾‹ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥åƒè€ƒå…¶ä¸­çš„æ­¥é©Ÿå»ºç½®ç¬¦åˆè‡ªå·±åœ˜éšŠå·¥ä½œæµç¨‹çš„ CI/CDã€‚</p><ol><li>CI â€” ç™¼ Pull Request åŸ·è¡Œå–®å…ƒæ¸¬è©¦<li>CD â€” æ‰“åŒ…+éƒ¨ç½²åˆ° Firebase App Distribution<li>CI +CDâ€” Nightly Build åŸ·è¡Œå¿«ç…§+å–®å…ƒæ¸¬è©¦+æ‰“åŒ…+éƒ¨ç½²åˆ° Firebase App Distribution</ol><blockquote><p><em>å›  Demo é™åˆ¶ï¼Œæœ¬æ–‡åªæœƒä¸²æ¥ æ‰“åŒ…éƒ¨ç½²åˆ° Firebase App Distributionï¼Œæ‰“åŒ…åˆ° Testflight æˆ–æ˜¯ App Store ä¹Ÿæ˜¯åŒæ¨£æ­¥é©Ÿåªå·®åˆ¥åœ¨ Fastlane è£¡çš„è…³æœ¬ä¸åŒï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œç™¼æ®ã€‚</em></p></blockquote><h3 id="ci--ç™¼-pull-request-åŸ·è¡Œå–®å…ƒæ¸¬è©¦"><span class="me-2">CI â€” ç™¼ Pull Request åŸ·è¡Œå–®å…ƒæ¸¬è©¦</span><a href="#ci--ç™¼-pull-request-åŸ·è¡Œå–®å…ƒæ¸¬è©¦" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="æµç¨‹"><span class="me-2">æµç¨‹</span><a href="#æµç¨‹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Develop åˆ†æ”¯ <strong>ç„¡æ³•ç›´æ¥æ¨é€</strong> ï¼Œå¿…é ˆç™¼ Pull Request æ‰èƒ½æ›´æ–°ï¼›æ‰€æœ‰ Pull Request <strong>å‡éœ€ Review é€šéåŠ ä¸Šå–®å…ƒæ¸¬è©¦é€šéæ‰èƒ½ Merge</strong> ã€æœ‰æ–° Commit Push æœƒé‡æ–°æ¸¬è©¦ã€‚</p><h4 id="ci-testingyml"><span class="me-2">CI-Testing.yml</span><a href="#ci-testingyml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Actions â†’ New workflow â†’ set up a workflow yourselfã€‚</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) åç¨±</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">CI-Testing</span>

<span class="c1"># Actions Log çš„æ¨™é¡Œåç¨±</span>
<span class="na">run-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[CI-Testing]</span><span class="nv"> </span><span class="s">${{</span><span class="nv"> </span><span class="s">github.event.pull_request.title</span><span class="nv"> </span><span class="s">||</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>

<span class="c1"># åŒå€‹ Concurrency Group å¦‚æœæœ‰æ–°çš„ Job æœƒå–æ¶ˆæ­£åœ¨è·‘çš„</span>
<span class="c1"># ä¾‹å¦‚ Push Commit è§¸ç™¼çš„ä»»å‹™é‚„æ²’åŸ·è¡Œå°±åˆ Push Commit æ™‚ï¼Œæœƒå–æ¶ˆå‰ä¸€å€‹ä»»å‹™</span>
<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.event_name }}-${{ github.event.pull_request.number || github.ref }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># è§¸ç™¼äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># PR äº‹ä»¶</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="c1"># PR - é–‹å•Ÿã€é‡é–‹ã€æœ‰æ–° Push Commit æ™‚</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">,</span> <span class="nv">synchronize</span><span class="pi">,</span> <span class="nv">reopened</span><span class="pi">]</span>
  <span class="c1"># æ‰‹å‹•è¡¨å–®è§¸ç™¼</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
    <span class="c1"># è¡¨å–® Inputs æ¬„ä½</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="c1"># åŸ·è¡Œçš„ Test Fastlane Lane</span>
      <span class="na">TEST_LANE</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Test</span><span class="nv"> </span><span class="s">Lane'</span>
        <span class="na">default</span><span class="pi">:</span> <span class="s1">'</span><span class="s">run_unit_tests'</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">choice</span>
        <span class="na">options</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">run_unit_tests</span>
          <span class="pi">-</span> <span class="s">run_all_tests</span>
  <span class="c1"># å…¶ä»– Workflow å‘¼å«æ­¤ Workflow è§¸ç™¼</span>
  <span class="c1"># Nightly Build æœƒå‘¼å«ä½¿ç”¨</span>
  <span class="na">workflow_call</span><span class="pi">:</span>
    <span class="c1"># è¡¨å–® Inputs æ¬„ä½</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="c1"># åŸ·è¡Œçš„ Test Fastlane Lane</span>
      <span class="na">TEST_LANE</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Test</span><span class="nv"> </span><span class="s">Lane'</span>
        <span class="na">default</span><span class="pi">:</span> <span class="s1">'</span><span class="s">run_unit_tests'</span>
        <span class="c1"># workflow_call inputs ä¸æ”¯æ´ choice</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">BRANCH</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Branch'</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
  
<span class="c1"># Job å·¥ä½œé …ç›®</span>
<span class="c1"># Job æœƒä¸¦ç™¼åŸ·è¡Œ</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">testing</span><span class="pi">:</span>
    <span class="c1"># Job åç¨± (å¯çœç•¥ï¼Œæœ‰è¨­å®šåœ¨ Log é¡¯ç¤ºæ¯”è¼ƒå¥½è®€)</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Testing</span>
    
    <span class="c1"># Runner Label - ä½¿ç”¨ GitHub Hosted Runner macos-15 ä¾†åŸ·è¡Œå·¥ä½œ</span>
    <span class="c1"># è«‹æ³¨æ„ï¼šå› ç‚ºæ­¤å°ˆæ¡ˆæ˜¯ Public Repo å¯ä»¥ç„¡é™å…è²»ä½¿ç”¨</span>
    <span class="c1"># è«‹æ³¨æ„ï¼šå› ç‚ºæ­¤å°ˆæ¡ˆæ˜¯ Public Repo å¯ä»¥ç„¡é™å…è²»ä½¿ç”¨</span>
    <span class="c1"># è«‹æ³¨æ„ï¼šå› ç‚ºæ­¤å°ˆæ¡ˆæ˜¯ Public Repo å¯ä»¥ç„¡é™å…è²»ä½¿ç”¨</span>
    <span class="c1"># å¦‚æœæ˜¯ Private Repo éœ€è¦æŒ‰è¨ˆé‡æ”¶è²»ï¼ŒmacOS æ©Ÿå™¨æ˜¯æœ€è²´çš„(10å€)ï¼Œå¯èƒ½è·‘ 10 æ¬¡å°±é”åˆ° 2,000 åˆ†é˜å…è²»ä¸Šé™</span>
    <span class="c1"># å»ºè­°ä½¿ç”¨ self-hosted Runner</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">macos-15</span>

    <span class="c1"># è¨­å®šæœ€é•· Timeout æ™‚é–“ï¼Œé˜²æ­¢ç•°å¸¸æƒ…æ³ç™¼ç”Ÿæ™‚ç„¡æ­¢ç›¡çš„ç­‰å¾…</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">30</span>

    <span class="c1"># use zsh</span>
    <span class="c1"># å¯çœç•¥ï¼Œåªæ˜¯æˆ‘ç¿’æ…£ç”¨ zshï¼Œé è¨­æ˜¯ bash</span>
    <span class="na">defaults</span><span class="pi">:</span>
      <span class="na">run</span><span class="pi">:</span>
        <span class="na">shell</span><span class="pi">:</span> <span class="s">zsh {0}</span>
          
    <span class="c1"># å·¥ä½œæ­¥é©Ÿ</span>
    <span class="c1"># å·¥ä½œæ­¥é©Ÿæœƒç…§é †åºåŸ·è¡Œ  </span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># git clone ç•¶å‰å°ˆæ¡ˆ &amp; checkout åˆ°åŸ·è¡Œçš„åˆ†æ”¯</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Checkout repository</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="c1"># Git Large File Storageï¼Œæˆ‘å€‘çš„æ¸¬è©¦ç’°å¢ƒç”¨ä¸åˆ°</span>
          <span class="c1"># default: false</span>
          <span class="na">lfs</span><span class="pi">:</span> <span class="kc">false</span>
          
          <span class="c1"># å¦‚æœæœ‰æŒ‡å®šå‰‡ Checkout æŒ‡å®šåˆ†æ”¯ï¼Œæ²’æœ‰å‰‡ä½¿ç”¨é è¨­(ç•¶å‰åˆ†æ”¯)</span>
          <span class="c1"># å›  on: schedule äº‹ä»¶åªèƒ½åœ¨ main ä¸»åˆ†æ”¯åŸ·è¡Œï¼Œå› æ­¤æƒ³åš Nightly Build ä¹‹é¡çš„å·¥ä½œå°±éœ€è¦æŒ‡å®šåˆ†æ”¯</span>
          <span class="c1"># e.g. on: schedule -&gt; main åˆ†æ”¯ï¼ŒNightly Build master åˆ†æ”¯</span>
          <span class="na">ref</span><span class="pi">:</span> <span class="s">${{ github.event.inputs.BRANCH || '' }}</span>

      <span class="c1"># ========== Env Setup Steps ==========</span>
      
      <span class="c1"># è®€å–å°ˆæ¡ˆæŒ‡å®šçš„ XCode ç‰ˆæœ¬</span>
      <span class="c1"># åœ¨å¾ŒçºŒä¹‹ä¸­ï¼Œæˆ‘å€‘è‡ªå·±æ‰‹å‹•æŒ‡å®šä½¿ç”¨çš„ XCode_x.x.x.app</span>
      <span class="c1"># è€Œä¸ä½¿ç”¨ xcversionï¼Œå› ç‚º xcversion å·²ç¶“ sunset ä¸ç©©å®šã€‚ </span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Read .xcode-version</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">read_xcode_version</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">XCODE_VERSION=$(cat .xcode-version)</span>
          <span class="s">echo "XCODE_VERSION: ${XCODE_VERSION}"</span>
          <span class="s">echo "xcode_version=${XCODE_VERSION}" &gt;&gt; $GITHUB_OUTPUT</span>

          <span class="s"># ä¹Ÿå¯ä»¥ç›´æ¥åœ¨é€™æŒ‡å®šå…¨åŸŸ XCode ç‰ˆæœ¬ï¼Œé€™æ¨£å°±ä¸ç”¨åœ¨å¾ŒçºŒæ­¥é©ŸæŒ‡å®š DEVELOPER_DIR</span>
          <span class="s"># ä½†æ­¤æŒ‡ä»¤éœ€è¦ sudoer æ¬Šé™ï¼Œå¦‚æœæ˜¯ self-hosted runner å°±è¦ç¢ºå®š runner åŸ·è¡Œç’°å¢ƒæœ‰ sudo æ¬Šé™</span>
          <span class="s"># sudo xcode-select -s "/Applications/Xcode_${XCODE_VERSION}.app/Contents/Developer"</span>

      <span class="c1"># è®€å–å°ˆæ¡ˆæŒ‡å®šçš„ Ruby ç‰ˆæœ¬</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Read .ruby-version</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">read_ruby_version</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">RUBY_VERSION=$(cat .ruby-version)</span>
          <span class="s">echo "RUBY_VERSION: ${RUBY_VERSION}"</span>
          <span class="s">echo "ruby_version=${RUBY_VERSION}" &gt;&gt; $GITHUB_OUTPUT</span>

      <span class="c1"># å®‰è£æˆ–è¨­å®š Runner Ruby ç‰ˆæœ¬æˆå°ˆæ¡ˆæŒ‡å®šç‰ˆæœ¬</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Set up Ruby</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">ruby/setup-ruby@v1</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">ruby-version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">steps.read_ruby_version.outputs.ruby_version</span><span class="nv"> </span><span class="s">}}"</span>

      <span class="c1"># å¯è¨­å¯ä¸è¨­ï¼ŒåŸå› æ˜¯ä¹‹å‰åœ¨ self-hosted èµ·å¤šå€‹ runner è·‘ CI/CD å› ç‚º cocoapods repos æ˜¯å…±ç”¨ç›®éŒ„</span>
      <span class="c1"># è§£æ±ºçš„å•é¡Œæ˜¯ï¼šæœ‰å¾ˆå°çš„æ©Ÿç‡æœƒå‡ºç¾åœ¨åŒæ™‚ pod install æ™‚æ‹‰ cocoapods repos å‡ºç¾è¡çª(å› ç‚ºé è¨­éƒ½æ˜¯ç”¨) $HOME/.cocoapods/</span>
      <span class="c1"># GitHub Hosted Runner å‰‡ä¸éœ€æ­¤è¨­å®š</span>
      <span class="c1"># - name: Change Cocoapods Repos Folder</span>
      <span class="c1">#   if: contains(runner.labels, 'self-hosted')</span>
      <span class="c1">#   run: |</span>
      <span class="c1">#     # æ¯å€‹ Runner ç”¨è‡ªå·±çš„ .cocoapods è³‡æ–™å¤¾ï¼Œé˜²æ­¢è³‡æºè¡çª</span>
      <span class="c1">#     mkdir -p "$HOME/.cocoapods-${{ env.RUNNER_NAME }}/"</span>
      <span class="c1">#     export CP_HOME_DIR="$HOME/.cocoapods-${{ env.RUNNER_NAME }}"</span>
      <span class="c1">#     rm -f "$HOME/.cocoapods-${{ env.RUNNER_NAME }}/repos/cocoapods/.git/index.lock"</span>

      <span class="c1"># ========== Cache Setting Steps ==========</span>
      <span class="c1"># è«‹æ³¨æ„ï¼Œå°±ç®—æ˜¯ self-hostedï¼ŒCache ç›®å‰ä¹Ÿæ˜¯ Cloud Cache æœƒè¨ˆç®—ç”¨é‡</span>
      <span class="c1"># è¦å‰‡ï¼š7 å¤©æœª hit è‡ªå‹•åˆªé™¤ã€å–®å€‹ Cache ä¸Šé™ 10 GBã€Action æˆåŠŸæ‰æœƒ Cache</span>
      <span class="c1"># Public Repo: å…è²»ç„¡é™åˆ¶</span>
      <span class="c1"># Private Repo: 5 GB èµ·</span>
      <span class="c1"># Self-hosted å¯ä»¥è‡ªå·±ç”¨ shell script æ’°å¯« Cache &amp; Restore ç­–ç•¥æˆ–ä½¿ç”¨å…¶ä»–å·¥å…·å”åŠ©</span>
      
      <span class="c1"># Bundle Cache (Gemfile)</span>
      <span class="c1"># å°æ‡‰ Makefile ä¸­æˆ‘å€‘æŒ‡å®šäº† Bundle  å®‰è£è·¯å¾‘ ./vendor ä¸‹</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Cache Bundle</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/cache@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">./vendor</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">${{ runner.os }}-bundle-${{ hashFiles('Gemfile.lock') }}</span>
          <span class="na">restore-keys</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">${{ runner.os }}-bundle-</span>

      <span class="c1"># CocoaPods Cache (Podfile)</span>
      <span class="c1"># é»˜èªå°±æ˜¯ å°ˆæ¡ˆ/Pods ä¸‹</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Cache CocoaPods</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/cache@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">./Product/Pods</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">${{ runner.os }}-cocoapods-${{ hashFiles('Product/Podfile.lock') }}</span>
          <span class="na">restore-keys</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">${{ runner.os }}-cocoapods-</span>

      <span class="c1"># Mint cache</span>
      <span class="c1"># å°æ‡‰ Makefile ä¸­æˆ‘å€‘æŒ‡å®šçš„ Mint å®‰è£è·¯å¾‘ ./mint ä¸‹</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Cache Mint</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/cache@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">./mint</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">${{ runner.os }}-mint-${{ hashFiles('Mintfile') }}</span>
          <span class="na">restore-keys</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">${{ runner.os }}-mint-</span>

      <span class="c1"># ====================</span>

      <span class="c1"># å°ˆæ¡ˆ Setup &amp; ä¾è³´å®‰è£</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Setup &amp; Install Dependency</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s"># åŸ·è¡Œ Makefile ä¸­å°è£çš„ Setup æŒ‡ä»¤ï¼Œå°æ‡‰æˆæŒ‡ä»¤å¤§æ¦‚æ˜¯ï¼š</span>
          <span class="s"># brew install mint</span>
          <span class="s"># bundle config set path 'vendor/bundle'</span>
          <span class="s"># bundle install</span>
          <span class="s"># mint bootstrap</span>
          <span class="s"># ...</span>
          <span class="s"># ç­‰ç­‰ setup æŒ‡ä»¤</span>
          <span class="s">make setup</span>

          <span class="s"># åŸ·è¡Œ Makefile ä¸­å°è£çš„ Install æŒ‡ä»¤ï¼Œå°æ‡‰æˆæŒ‡ä»¤å¤§æ¦‚æ˜¯ï¼š</span>
          <span class="s"># mint run yonaskolb/XcodeGen --quiet</span>
          <span class="s"># bundle exec pod install</span>
          <span class="s"># ...</span>
          <span class="s"># ç­‰ç­‰ install æŒ‡ä»¤</span>
          <span class="s">make install</span>

      <span class="c1"># åŸ·è¡Œ Fastlane Unit æ¸¬è©¦ Lane</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Run Tests</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">testing</span>
        <span class="c1"># æŒ‡å®šå·¥ä½œç›®éŒ„ï¼Œé€™æ¨£å¾ŒçºŒæŒ‡ä»¤å°±ä¸ç”¨åœ¨ç‰¹åˆ¥ cd ./Product/</span>
        <span class="na">working-directory</span><span class="pi">:</span> <span class="s">./Product/</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="c1"># æ¸¬è©¦è¨ˆåŠƒï¼Œå…¨è·‘é‚„æ˜¯åªè·‘å–®å…ƒæ¸¬è©¦</span>
          <span class="c1"># å¦‚ç‚ºé–‹ PR è§¸ç™¼å‰‡ä½¿ç”¨ run_unit_testsï¼Œå¦å‰‡çœ‹ inputs.TEST_LANE çš„å€¼ï¼Œé è¨­å€¼ run_all_tests</span>
          <span class="na">TEST_LANE</span><span class="pi">:</span> <span class="s">${{ github.event_name == 'pull_request' &amp;&amp; 'run_unit_tests' || github.event.inputs.TEST_LANE || 'run_all_tests' }}</span>
          
          <span class="c1"># æŒ‡å®šé€™å€‹ Job è¦ä½¿ç”¨ XCode_x.x.x æŒ‡å®šçš„ç‰ˆæœ¬åŸ·è¡Œ</span>
          <span class="na">DEVELOPER_DIR</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/Applications/Xcode_${{</span><span class="nv"> </span><span class="s">steps.read_xcode_version.outputs.xcode_version</span><span class="nv"> </span><span class="s">}}.app/Contents/Developer"</span>
          
          <span class="c1"># Repo -&gt; Settings -&gt; Actions secrets and variables -&gt; variables</span>
          <span class="c1"># ä½¿ç”¨çš„æ¨¡æ“¬å™¨åç¨±</span>
          <span class="na">SIMULATOR_NAME</span><span class="pi">:</span> <span class="s">${{ vars.SIMULATOR_NAME }}</span>
          <span class="c1"># æ¨¡æ“¬å™¨çš„ iOS ç‰ˆæœ¬</span>
          <span class="na">SIMULATOR_IOS_VERSION</span><span class="pi">:</span> <span class="s">${{ vars.SIMULATOR_IOS_VERSION }}</span>

          <span class="c1"># ç•¶å‰ Runner åç¨±</span>
          <span class="na">RUNNER_NAME</span><span class="pi">:</span> <span class="s">${{ runner.name }}</span>
          
          <span class="c1"># æå‡ XCodebuild æŒ‡ä»¤ timeout æ™‚é–“, retry æ¬¡æ•¸</span>
          <span class="c1"># å› ç‚ºæ©Ÿå™¨ Loading æ¯”è¼ƒå¤§çš„æ™‚å€™å¯èƒ½ 3 æ¬¡å°±å¤±æ•—äº†</span>
          <span class="na">FASTLANE_XCODEBUILD_SETTINGS_TIMEOUT</span><span class="pi">:</span> <span class="m">60</span>
          <span class="na">FASTLANE_XCODEBUILD_SETTINGS_RETRIES</span><span class="pi">:</span> <span class="m">10</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>

          <span class="s"># å¦‚æœæ˜¯ self-hosted åœ¨åŒä¸€å°æ©Ÿå™¨èµ·å¤šå€‹ Runner æœƒå‡ºç¾æ¶æ¨¡æ“¬å™¨çš„å•é¡Œ (æ–‡ç« å¾Œæœƒè¬›)</span>
          <span class="s"># è¦é¿å…é€™å•é¡Œå»ºè­°å°‡æ¨¡æ“¬åç¨±å‘½åæˆ Runner åç¨±ï¼Œæ¯å€‹ Runner éƒ½è¨­ä¸€å€‹æ¨¡æ“¬å™¨ï¼Œé€™æ¨£å°±ä¸æœƒäº’æ¶å°è‡´æ¸¬è©¦å¤±æ•—</span>
          <span class="s"># e.g. bundle exec fastlane run_unit_tests device:"${RUNNER_NAME} (${SIMULATOR_IOS_VERSION})"</span>
          <span class="s"># é€™é‚Šæ˜¯ç”¨ GitHub Hosted Runner æ²’é€™å•é¡Œï¼Œæ‰€ä»¥ç›´æ¥ç”¨ device:"${SIMULATOR_NAME} (${SIMULATOR_IOS_VERSION})"</span>

          <span class="s"># ç™¼ç”ŸéŒ¯èª¤ä¸ç›´æ¥é€€å‡ºä¸¦å°‡æ‰€æœ‰è¼¸å‡ºéƒ½å¯«å…¥ temp/testing_output.txt æª”æ¡ˆ</span>
          <span class="s"># å¾ŒçºŒæˆ‘å€‘æœƒåˆ†ææª”æ¡ˆå…§å®¹å€åˆ†å‡ºæ˜¯ Build Failed é‚„æ˜¯ Test Failedï¼ŒComment ä¸åŒè¨Šæ¯åˆ° PR</span>
          <span class="s">set +e</span>
          
          <span class="s"># EXIT_CODE å„²å­˜åŸ·è¡Œçµæœçš„ exit code.</span>
          <span class="s"># 0 = OK</span>
          <span class="s"># 1 = exit</span>
          <span class="s">EXIT_CODE=0</span>
          
          <span class="s"># æ‰€æœ‰è¼¸å‡ºéƒ½å¯«å…¥æª”æ¡ˆ</span>
          <span class="s">bundle exec fastlane ${TEST_LANE} device:"${SIMULATOR_NAME} (${SIMULATOR_IOS_VERSION})" | tee "$RUNNER_TEMP/testing_output.txt"</span>
          <span class="s"># å¦‚æœç›®å‰ EXIT_CODE æ˜¯ 0ï¼Œå‰‡å°‡ ${PIPESTATUS[0]} = bundle exec fastlane ${TEST_LANE}.. çµæœ</span>
          <span class="s">[[ $EXIT_CODE -eq 0 ]] &amp;&amp; EXIT_CODE=${PIPESTATUS[0]}</span>

          <span class="s"># æ¢å¾©å‡ºéŒ¯å°±é€€å‡º</span>
          <span class="s">set -e</span>

          <span class="s"># æª¢æŸ¥ Testing Output</span>
          <span class="s"># å¦‚æœ Testing Output åŒ…å« "Error building"ï¼Œå‰‡è¨­ is_build_error=true çµ¦ Actions ç’°å¢ƒè®Šæ•¸ï¼Œç‚º Build å°±å¤±æ•—</span>
          <span class="s"># å¦‚æœ Testing Output åŒ…å« "Tests have failed"ï¼Œå‰‡è¨­ is_test_error=true çµ¦ Actions ç’°å¢ƒè®Šæ•¸ï¼Œç‚ºæ¸¬è©¦å¤±æ•—</span>
          
          <span class="s">if grep -q "Error building" "$RUNNER_TEMP/testing_output.txt"; then</span>
            <span class="s">echo "is_build_error=true" &gt;&gt; $GITHUB_OUTPUT</span>
            <span class="s">echo "âŒ Detected Build Error"</span>
          <span class="s">elif grep -q "Tests have failed" "$RUNNER_TEMP/testing_output.txt"; then</span>
            <span class="s">echo "is_test_error=true" &gt;&gt; $GITHUB_OUTPUT</span>
            <span class="s">echo "âŒ Detected Test Error"</span>
          <span class="s">fi</span>

          <span class="s"># æ¢å¾© Exit Code Output</span>
          <span class="s">exit $EXIT_CODE</span>
          
      <span class="c1"># ========== Handle Result Steps ==========</span>
      
      <span class="c1"># è§£æ *.junit æ¸¬è©¦å ±å‘Šï¼Œä¸¦æ¨™è¨˜çµæœã€Comment(å¦‚æœæ˜¯ PR çš„è©±)</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Publish Test Report</span>
        <span class="c1"># ç›´æ¥å¾©ç”¨åˆ¥äººå¯«å¥½çš„ .junit Paser Actions: https://github.com/mikepenz/action-junit-report</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">mikepenz/action-junit-report@v5</span>
        <span class="c1"># if:</span>
        <span class="c1"># ä¸Šä¸€æ­¥(Testing) success or</span>
        <span class="c1"># ä¸Šä¸€æ­¥(Testing) failed and is_test_error (build failed ä¸åŸ·è¡Œé€™å€‹ step)</span>
        <span class="na">if</span><span class="pi">:</span> <span class="s">${{ (failure() &amp;&amp; steps.testing.outputs.is_test_error == 'true') || success() }}</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">check_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Testing</span><span class="nv"> </span><span class="s">Report"</span>
          <span class="na">comment</span><span class="pi">:</span> <span class="kc">true</span>
          <span class="na">updateComment</span><span class="pi">:</span> <span class="kc">false</span>
          <span class="na">require_tests</span><span class="pi">:</span> <span class="kc">true</span>
          <span class="na">detailed_summary</span><span class="pi">:</span> <span class="kc">true</span>
          <span class="na">report_paths</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./Product/fastlane/test_output/*.junit"</span>

      <span class="c1"># æ¸¬è©¦å»ºç½®å¤±æ•— Comment</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Build Failure Comment</span>
        <span class="c1"># if:</span>
        <span class="c1"># ä¸Šä¸€æ­¥(Testing) failed and is_build_error and æœ‰ PR Number</span>
        <span class="c1"># </span>
        <span class="na">if</span><span class="pi">:</span> <span class="s">${{ failure() &amp;&amp; steps.testing.outputs.is_build_error == 'true' &amp;&amp; github.event.pull_request.number }}</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v6</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">action_url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">github.server_url</span><span class="nv"> </span><span class="s">}}/${{</span><span class="nv"> </span><span class="s">github.repository</span><span class="nv"> </span><span class="s">}}/actions/runs/${{</span><span class="nv"> </span><span class="s">github.run_id</span><span class="nv"> </span><span class="s">}}/attempts/${{</span><span class="nv"> </span><span class="s">github.run_attempt</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">with</span><span class="pi">:</span>
            <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
              <span class="s">const action_url = process.env.action_url</span>
              <span class="s">const pullRequest = context.payload.pull_request || {}</span>
              <span class="s">const commitSha = pullRequest.head?.sha || context.sha</span>
              <span class="s">const creator = pullRequest.user?.login || context.actor</span>
        
              <span class="s">const commentBody = [</span>
                <span class="s">`# å°ˆæ¡ˆæˆ–æ¸¬è©¦å»ºç½®å¤±æ•— âŒ`,</span>
                <span class="s">`è«‹ç¢ºèªæ‚¨çš„ Pull Request æ˜¯å¦å¯ä»¥æ­£ç¢ºç·¨è­¯èˆ‡åŸ·è¡Œæ¸¬è©¦ã€‚`,</span>
                <span class="s">``,</span>
                <span class="s">`ğŸ”— **Action**: [View Workflow Run](${action_url})`,</span>
                <span class="s">`ğŸ“ **Commit**: ${commitSha}`,</span>
                <span class="s">`ğŸ‘¤ **Author**: @${creator}`</span>
              <span class="s">].join('\n')</span>
        
              <span class="s">await github.rest.issues.createComment({</span>
                <span class="s">owner: context.repo.owner,</span>
                <span class="s">repo: context.repo.repo,</span>
                <span class="s">issue_number: context.payload.pull_request.number,</span>
                <span class="s">body: commentBody</span>
              <span class="s">})</span>
</pre></table></code></div></div><p><strong>æŠ€è¡“é‡é»èªªæ˜ï¼š</strong></p><ul><li>runs-on: å»ºè­°æ”¹ç”¨ self-hosted Runnerï¼Œ <a href="https://docs.github.com/en/billing/managing-billing-for-your-products/about-billing-for-github-actions#per-minute-rates" target="_blank">GitHub Hosted Runner macOS å¾ˆè²´çš„</a> ã€‚<li>æ‰‹å‹•è®€å– <code class="language-plaintext highlighter-rouge">.xcode-version</code> æª”æ¡ˆå–å¾—æŒ‡å®šçš„ XCode ç‰ˆæœ¬ä¸¦åœ¨éœ€è¦æŒ‡å®š XCode çš„ Step è¨­å®š <code class="language-plaintext highlighter-rouge">DEVELOPER_DIR</code> env å¯ä»¥è¼•é¬†å… Sudo åˆ‡æ› XCode<li>Cache: å¯ä»¥åŠ é€Ÿä¾è³´å®‰è£é€Ÿåº¦ï¼Œä½†éœ€æ³¨æ„å°±ç®—æ˜¯ self-hosted Runner ä¾ç„¶æœƒä½¿ç”¨ GitHub Cloud Cacheï¼Œå—åˆ°æ”¶è²»é™åˆ¶<li>ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">set +e</code> ä½¿æŒ‡ä»¤åŸ·è¡Œå¤±æ•—ä¸æœƒé¦¬ä¸Šé€€å‡º+å°‡ output éƒ½è¼¸å‡ºåˆ°æª”æ¡ˆ+è®€å–æª”æ¡ˆåˆ¤æ–·æ˜¯ Build Failed or Test Failedï¼›å¦‚æœä¸é€™æ¨£åšè¨Šæ¯çµ±ä¸€éƒ½æœƒæ˜¯ Test Failedã€‚ ä¹Ÿå¯ä»¥å»¶ä¼¸å»åˆ¤æ–·å…¶ä»–éŒ¯èª¤ï¼Œä¾‹å¦‚ï¼š <code class="language-plaintext highlighter-rouge">Underlying Error: Unable to boot the Simulator.</code> æ¨¡æ“¬å™¨å•Ÿå‹•å¤±æ•—ï¼Œè«‹é‡æ–°å˜—è©¦ã€‚<li>Checkout Code å¯æ¥å—æŒ‡å®šåˆ†æ”¯ï¼šå› ç‚º <code class="language-plaintext highlighter-rouge">on: schedule</code> äº‹ä»¶åªèƒ½åœ¨ main (Default Branch) è§¸ç™¼ï¼Œå¦‚æœæˆ‘å€‘å¸Œæœ›æ’ç¨‹å°æŸå€‹å…¶ä»–åˆ†æ”¯æ“ä½œï¼Œå°±éœ€è¦æŒ‡å®šåˆ†æ”¯ã€‚<li>æŒ‡å®š .cocoapods Repo è·¯å¾‘å¯åšå¯ä¸åšï¼Œä¹‹å‰æ˜¯é‡é self-hosted åŒä¸€å°æ©Ÿå™¨å…©å€‹ Runner åŒæ™‚å¡åœ¨ pod install å°±æ˜¯å› ç‚ºå‰›å¥½éƒ½åœ¨é‡å° .cocoapods Repo æ“ä½œé€ æˆ git lockã€‚ (ä½†æ©Ÿç‡å¾ˆä½å°±æ˜¯äº†)<li><strong>å¦‚æœä½ æœ‰ Private Pods Repo éœ€è¦è¨­å®š SSH Agent æ‰æœ‰æ¬Šé™ Cloneã€‚</strong> <strong>(è«‹åƒè€ƒæ–‡æœ«è£œå……)</strong><li>è¨˜å¾—åˆ° Repo -&gt; Settings -&gt; Actions secrets and variables -&gt; variables æ–°å¢ï¼š <code class="language-plaintext highlighter-rouge">SIMULATOR_IOS_VERSION</code> æ¨¡æ“¬å™¨ iOS ç‰ˆæœ¬ <code class="language-plaintext highlighter-rouge">SIMULATOR_NAME</code> æ¨¡æ“¬å™¨åç¨±</ul><p><a href="/assets/4b001d2e8440/1*Vj37P9vZ6KL5wWNvU3Cq3Q.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*Vj37P9vZ6KL5wWNvU3Cq3Q.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTU2IiBoZWlnaHQ9IjU0OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><strong>Commit æª”æ¡ˆåˆ° Repo ä¸»åˆ†æ”¯ï¼Œæ‰‹å‹•è§¸ç™¼ä¸€æ¬¡é©—è­‰æ­£ä¸æ­£ç¢ºï¼š</strong></p><p><a href="/assets/4b001d2e8440/1*tA2nKehTJ7aURSGgU7MM0g.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*tA2nKehTJ7aURSGgU7MM0g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjQ4MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/4b001d2e8440/1*Qap3KmhIJrLov2O7GneV3w.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*Qap3KmhIJrLov2O7GneV3w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDMxIiBoZWlnaHQ9IjkxMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>æ­£ç¢ºå¾Œç¹¼çºŒè¨­å®šã€‚</p><h4 id="github-æµç¨‹è¨­å®š"><span class="me-2">GitHub æµç¨‹è¨­å®š</span><a href="#github-æµç¨‹è¨­å®š" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Settins â†’ Rules â†’ Rulesetsã€‚</p><p><a href="/assets/4b001d2e8440/1*cf_M6NnakdcbzvC2VHSfpw.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*cf_M6NnakdcbzvC2VHSfpw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9Ijk2MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><ul><li>Ruleset Name: è¦å‰‡åç¨±<li>Enforcement status: å•Ÿç”¨/åœç”¨ æ­¤è¦å‰‡é™åˆ¶<li>Target branches: ç›®æ¨™çš„ Base åˆ†æ”¯ï¼Œè¨­ Default Branch å°±æ˜¯æ‰€æœ‰æƒ³åˆé€²åˆ° main or develop çš„åˆ†æ”¯éƒ½å—åˆ°æ­¤è¦å‰‡é™åˆ¶<li>Bypass list: å¯æŒ‡å®šç‰¹æ®Šèº«ä»½ã€Team å¯ä»¥ä¸å—æ­¤é™<li>Branch rules:</ul><p><a href="/assets/4b001d2e8440/1*Hzd9CCTsu18kyDR1goRWag.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*Hzd9CCTsu18kyDR1goRWag.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MTIiIGhlaWdodD0iMTIzMSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><ul><li>Restrict deletions: ç¦æ­¢åˆªé™¤åˆ†æ”¯<li>Require a pull request before mergin: åªèƒ½é€é PR Merge Required approvals: é™åˆ¶éœ€è¦å¹¾äºº Approve<li>Require status checks to pass: é™åˆ¶å“ªäº› Checks è¦ Passed æ‰èƒ½ Merge é» + Add checks è¼¸å…¥ <code class="language-plaintext highlighter-rouge">Testing</code> é¸æ“‡æœ‰ GitHub Actions æ¨™èªŒçš„ã€‚ <strong>é€™é‚Šæœ‰å€‹å°å•é¡Œï¼Œå¦‚æœ Suggestions</strong> <strong>æ‰¾ä¸åˆ° <code class="language-plaintext highlighter-rouge">Testing</code> é‚£éœ€è¦å…ˆå›åˆ° Actions è§¸ç™¼(é–‹ PR è©¦è©¦)æˆåŠŸä¸€æ¬¡ï¼Œé€™è£¡æ‰æœƒå‡ºç¾ã€‚</strong></ul><p><a href="/assets/4b001d2e8440/1*MRPwUEVVbbz8nH0sS2hFfQ.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*MRPwUEVVbbz8nH0sS2hFfQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MzQiIGhlaWdodD0iMzk0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>Block force pushes: ç¦æ­¢ Force push</ul><p>å„²å­˜ã€ç¢ºå®š Enforcement status æ˜¯ Active å¾Œï¼Œè¦å‰‡å°±æœƒç”Ÿæ•ˆäº†ã€‚</p><p><strong>éƒ½è¨­å®šå¥½ä¹‹å¾Œï¼Œé–‹ PR æ¸¬è©¦çœ‹çœ‹ï¼š</strong></p><p><a href="/assets/4b001d2e8440/1*iPETBWx6Boq12rY1fHXmuQ.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*iPETBWx6Boq12rY1fHXmuQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTkiIGhlaWdodD0iNTQ2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>Checks æœ‰å‡ºç¾ CI-Testing ( <strong>Requried</strong> )ã€Merging is blockedã€At least X approving review is required by reviewers with write access. ä»£è¡¨è¨­ç½®æˆåŠŸäº†ã€‚</ul><p><strong>å¦‚æœå°ˆæ¡ˆå»ºç½®å¤±æ•— (Build Failed) æœƒ Commentï¼š</strong></p><p><a href="/assets/4b001d2e8440/1*4E35VRPo--pI8uqrR4UZNA.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*4E35VRPo--pI8uqrR4UZNA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTUiIGhlaWdodD0iMjk1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>å¦‚æœå°ˆæ¡ˆå»ºç½®æˆåŠŸä½†æ¸¬è©¦æ¡ˆä¾‹å¤±æ•— (Test Failed) æœƒ Commentï¼š</strong></p><p><a href="/assets/4b001d2e8440/1*wYFzsn5a_yvi8CbZxi-QdQ.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*wYFzsn5a_yvi8CbZxi-QdQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MjEiIGhlaWdodD0iMzg5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>å¦‚æœå°ˆæ¡ˆå»ºç½®æˆåŠŸæ¸¬è©¦ä¹ŸæˆåŠŸ(Test Success) æœƒ Commentï¼š</strong></p><p><a href="/assets/4b001d2e8440/1*WqPK1629jYdYTEWCWBHWqg.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*WqPK1629jYdYTEWCWBHWqg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTUiIGhlaWdodD0iMzIxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>å®Œæˆ Review Approve + Check æ¸¬è©¦é€šéå¾Œï¼š</strong></p><p><a href="/assets/4b001d2e8440/1*5gnQYdVAOtGR-bMK4ZrOhA.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*5gnQYdVAOtGR-bMK4ZrOhA.webp" alt="[Demo PR](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTEiIGhlaWdodD0iNTY2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">Demo PR</a></p><p>å°±èƒ½ Merge PRã€‚</p><ul><li>å¦‚æœæœ‰ Push New Commit æœƒè‡ªå‹•é‡è·‘ Checks æ¸¬è©¦ã€‚</ul><p><strong>å®Œæ•´ç¨‹å¼ç¢¼ï¼š <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/CI-Testing.yml" target="_blank">CI-Testing.yml</a></strong></p><p><strong>Auto-merge:</strong></p><p>å¦å¤–ï¼Œä¹Ÿå¯ä»¥æ‰“é–‹ Repo Settings â†’ General â†’ Pull Request ä¸­çš„ï¼š</p><p><a href="/assets/4b001d2e8440/1*hl6mfqnnv_zAA3YVrI_M0w.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*hl6mfqnnv_zAA3YVrI_M0w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NTYiIGhlaWdodD0iMjU3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>Automatically delete head branches: Merge PR å¾Œè‡ªå‹•åˆªé™¤åˆ†æ”¯<li>Allow Auto-merge: ç•¶ Checks é€šéï¼‹ç¬¦åˆæ¢ä»¶çš„ Approvals é”æˆæœƒè‡ªå‹• Merge PR <strong>åªæœ‰ç•¶æœ‰è¨­æ¢ä»¶ï¼‹ç•¶å‰æ¢ä»¶é‚„ä¸èƒ½ Merge æ™‚æ‰æœƒå‡ºç¾ Enable auto-merge æŒ‰éˆ•ã€‚</strong></ul><p><a href="/assets/4b001d2e8440/1*gi0LaaMVXit-DGKnsxS1lQ.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*gi0LaaMVXit-DGKnsxS1lQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MjciIGhlaWdodD0iNDMxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><h3 id="cd--æ‰“åŒ…éƒ¨ç½²åˆ°-firebase-app-distribution"><span class="me-2">CD â€” æ‰“åŒ…+éƒ¨ç½²åˆ° Firebase App Distribution</span><a href="#cd--æ‰“åŒ…éƒ¨ç½²åˆ°-firebase-app-distribution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="æµç¨‹-1"><span class="me-2">æµç¨‹</span><a href="#æµç¨‹-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>ä½¿ç”¨ GitHub Actions è¡¨å–®è§¸ç™¼æ‰“åŒ…å·¥ä½œï¼Œå¯æŒ‡å®šç‰ˆæœ¬è™Ÿã€Release Notesï¼Œæ‰“åŒ…å®Œæœƒè‡ªå‹•ä¸Šå‚³åˆ° Firebase App Distribution ä¾›åœ˜éšŠä¸‹è¼‰æ¸¬è©¦ä½¿ç”¨ã€‚</p><h4 id="cd-deployyml"><span class="me-2">CD-Deploy.yml</span><a href="#cd-deployyml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Actions â†’ New workflow â†’ set up a workflow yourselfã€‚</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) åç¨±</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">CD-Deploy</span>

<span class="c1"># Actions Log çš„æ¨™é¡Œåç¨±</span>
<span class="na">run-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[CD-Deploy]</span><span class="nv"> </span><span class="s">${{</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>

<span class="c1"># åŒå€‹ Concurrency Group å¦‚æœæœ‰æ–°çš„ Job æœƒå–æ¶ˆæ­£åœ¨è·‘çš„</span>
<span class="c1"># ä¾‹å¦‚ é‡è¤‡è§¸ç™¼ç›¸åŒåˆ†æ”¯çš„æ‰“åŒ…ä»»å‹™ï¼Œæœƒå–æ¶ˆå‰ä¸€å€‹ä»»å‹™</span>
<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.event_name }}-${{ github.ref }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># è§¸ç™¼äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># æ‰‹å‹•è¡¨å–®è§¸ç™¼</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
    <span class="c1"># è¡¨å–® Inputs æ¬„ä½</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="c1"># App ç‰ˆæœ¬è™Ÿ</span>
      <span class="na">VERSION_NUMBER</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Version</span><span class="nv"> </span><span class="s">Number</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">app</span><span class="nv"> </span><span class="s">(e.g.,</span><span class="nv"> </span><span class="s">1.0.0).</span><span class="nv"> </span><span class="s">Auto-detect</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Xcode</span><span class="nv"> </span><span class="s">project</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">left</span><span class="nv"> </span><span class="s">blank.'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
      <span class="c1"># App Build Number</span>
      <span class="na">BUILD_NUMBER</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Build</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">app</span><span class="nv"> </span><span class="s">(e.g.,</span><span class="nv"> </span><span class="s">1).</span><span class="nv"> </span><span class="s">Will</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">timestamp</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">left</span><span class="nv"> </span><span class="s">blank.'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
      <span class="c1"># App Release Note</span>
      <span class="na">RELEASE_NOTE</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Release</span><span class="nv"> </span><span class="s">notes</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">deployment.'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
  <span class="c1"># å…¶ä»– Workflow å‘¼å«æ­¤ Workflow è§¸ç™¼</span>
  <span class="c1"># Nightly Build æœƒå‘¼å«ä½¿ç”¨</span>
  <span class="na">workflow_call</span><span class="pi">:</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="c1"># App ç‰ˆæœ¬è™Ÿ</span>
      <span class="na">VERSION_NUMBER</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Version</span><span class="nv"> </span><span class="s">Number</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">app</span><span class="nv"> </span><span class="s">(e.g.,</span><span class="nv"> </span><span class="s">1.0.0).</span><span class="nv"> </span><span class="s">Auto-detect</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Xcode</span><span class="nv"> </span><span class="s">project</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">left</span><span class="nv"> </span><span class="s">blank.'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
      <span class="c1"># App Build Number</span>
      <span class="na">BUILD_NUMBER</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Build</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">app</span><span class="nv"> </span><span class="s">(e.g.,</span><span class="nv"> </span><span class="s">1).</span><span class="nv"> </span><span class="s">Will</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">timestamp</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">left</span><span class="nv"> </span><span class="s">blank.'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
      <span class="c1"># App Release Note</span>
      <span class="na">RELEASE_NOTE</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Release</span><span class="nv"> </span><span class="s">notes</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">deployment.'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">BRANCH</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Branch'</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>


<span class="c1"># å®šç¾©å…¨åŸŸéœæ…‹è®Šæ•¸</span>
<span class="na">env</span><span class="pi">:</span>
  <span class="na">APP_STORE_CONNECT_API_KEY_FILE_NAME</span><span class="pi">:</span> <span class="s2">"</span><span class="s">app_store_connect_api_key.json"</span>

<span class="c1"># Job å·¥ä½œé …ç›®</span>
<span class="c1"># Job æœƒä¸¦ç™¼åŸ·è¡Œ</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">deploy</span><span class="pi">:</span>
    <span class="c1"># Job åç¨± (å¯çœç•¥ï¼Œæœ‰è¨­å®šåœ¨ Log é¡¯ç¤ºæ¯”è¼ƒå¥½è®€)</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy - Firebase App Distribution</span>
    
    <span class="c1"># Runner Label - ä½¿ç”¨ GitHub Hosted Runner macos-15 ä¾†åŸ·è¡Œå·¥ä½œ</span>
    <span class="c1"># è«‹æ³¨æ„ï¼šå› ç‚ºæ­¤å°ˆæ¡ˆæ˜¯ Public Repo å¯ä»¥ç„¡é™å…è²»ä½¿ç”¨</span>
    <span class="c1"># è«‹æ³¨æ„ï¼šå› ç‚ºæ­¤å°ˆæ¡ˆæ˜¯ Public Repo å¯ä»¥ç„¡é™å…è²»ä½¿ç”¨</span>
    <span class="c1"># è«‹æ³¨æ„ï¼šå› ç‚ºæ­¤å°ˆæ¡ˆæ˜¯ Public Repo å¯ä»¥ç„¡é™å…è²»ä½¿ç”¨</span>
    <span class="c1"># å¦‚æœæ˜¯ Private Repo éœ€è¦æŒ‰è¨ˆé‡æ”¶è²»ï¼ŒmacOS æ©Ÿå™¨æ˜¯æœ€è²´çš„(10å€)ï¼Œå¯èƒ½è·‘ 10 æ¬¡å°±é”åˆ° 2,000 åˆ†é˜å…è²»ä¸Šé™</span>
    <span class="c1"># å»ºè­°ä½¿ç”¨ self-hosted Runner</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">macos-15</span>

    <span class="c1"># è¨­å®šæœ€é•· Timeout æ™‚é–“ï¼Œé˜²æ­¢ç•°å¸¸æƒ…æ³ç™¼ç”Ÿæ™‚ç„¡æ­¢ç›¡çš„ç­‰å¾…</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">30</span>

    <span class="c1"># use zsh</span>
    <span class="c1"># å¯çœç•¥ï¼Œåªæ˜¯æˆ‘ç¿’æ…£ç”¨ zshï¼Œé è¨­æ˜¯ bash</span>
    <span class="na">defaults</span><span class="pi">:</span>
      <span class="na">run</span><span class="pi">:</span>
        <span class="na">shell</span><span class="pi">:</span> <span class="s">zsh {0}</span>

    <span class="c1"># å·¥ä½œæ­¥é©Ÿ</span>
    <span class="c1"># å·¥ä½œæ­¥é©Ÿæœƒç…§é †åºåŸ·è¡Œ  </span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># git clone ç•¶å‰å°ˆæ¡ˆ &amp; checkout åˆ°åŸ·è¡Œçš„åˆ†æ”¯</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Checkout repository</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="c1"># Git Large File Storageï¼Œæˆ‘å€‘çš„æ¸¬è©¦ç’°å¢ƒç”¨ä¸åˆ°</span>
          <span class="c1"># default: false</span>
          <span class="na">lfs</span><span class="pi">:</span> <span class="kc">false</span>
          
          <span class="c1"># å¦‚æœæœ‰æŒ‡å®šå‰‡ Checkout æŒ‡å®šåˆ†æ”¯ï¼Œæ²’æœ‰å‰‡ä½¿ç”¨é è¨­(ç•¶å‰åˆ†æ”¯)</span>
          <span class="c1"># å›  on: schedule äº‹ä»¶åªèƒ½åœ¨ main ä¸»åˆ†æ”¯åŸ·è¡Œï¼Œå› æ­¤æƒ³åš Nightly Build ä¹‹é¡çš„å·¥ä½œå°±éœ€è¦æŒ‡å®šåˆ†æ”¯</span>
          <span class="c1"># e.g. on: schedule -&gt; main åˆ†æ”¯ï¼ŒNightly Build master åˆ†æ”¯</span>
          <span class="na">ref</span><span class="pi">:</span> <span class="s">${{ github.event.inputs.BRANCH || '' }}</span>

      <span class="c1"># ========== Certificates Steps ==========</span>
      
      <span class="c1"># å»ºè­°æ˜¯ä½¿ç”¨ Fastlnae - Match ç®¡ç†é–‹ç™¼æ†‘è­‰ä¸¦åœ¨ Lane ä¸­ç›´æ¥åŸ·è¡Œ match å®‰è£è¨­å®šå¥½</span>
      <span class="c1"># Match æœƒç”¨å¦ä¸€å€‹ Private Repo ç®¡ç†æ†‘è­‰ï¼Œä½†è¦è¨­å®šå¥½ SSH Agent æ‰æœ‰æ¬Šé™ git clone private repo</span>
      <span class="c1"># ref: https://stackoverflow.com/questions/57612428/cloning-private-github-repository-within-organisation-in-actions</span>
      <span class="c1">#</span>
      <span class="c1">#</span>
      <span class="c1"># --- ä»¥ä¸‹æ˜¯æ²’æœ‰ä½¿ç”¨ Fastlane - Match çš„æƒ…æ³ä¸‹ç›´æ¥ä¸‹è¼‰ &amp; Import æ†‘è­‰çµ¦ Runner çš„åšæ³• ---</span>
      <span class="c1"># ref: https://docs.github.com/en/actions/how-tos/use-cases-and-examples/deploying/installing-an-apple-certificate-on-macos-runners-for-xcode-development</span>
      <span class="c1">#</span>
      <span class="c1"># GitHub Actions Secret ç„¡æ³•å„²å­˜æª”æ¡ˆï¼Œå› æ­¤æ‰€æœ‰æ†‘è­‰æª”æ¡ˆéƒ½è¦å…ˆè½‰æˆ Base64 Encoded æ–‡å­—æ ¼å¼å­˜åœ¨ Secret</span>
      <span class="c1"># åœ¨ GitHub Actions Step ä¸­å†å‹•æ…‹è®€å‡ºä¾†å¯«å…¥ TEMP æª”æ¡ˆä¸¦ç§»å‹•åˆ°æ­£ç¢ºä½ç½®çµ¦ç³»çµ±è®€å–ä½¿ç”¨</span>
      <span class="c1"># å…¶ä»–è¨­å®šç´°ç¯€è«‹åƒè€ƒæ–‡ç« </span>
      <span class="c1">#</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install the Apple certificate and provisioning profile</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">BUILD_CERTIFICATE_BASE64</span><span class="pi">:</span> <span class="s">${{ secrets.BUILD_CERTIFICATE_BASE64 }}</span>
          <span class="na">P12_PASSWORD</span><span class="pi">:</span> <span class="s">${{ secrets.BUILD_CERTIFICATE_P12_PASSWORD }}</span>
          <span class="na">BUILD_PROVISION_PROFILE_BASE64</span><span class="pi">:</span> <span class="s">${{ secrets.BUILD_PROVISION_PROFILE_BASE64 }}</span>
          <span class="c1"># GitHub Hosted Runner ç‚ºè‡ªå®šç¾©å­—ä¸²</span>
          <span class="c1"># Self-hosted Runner ç‚ºæ©Ÿå™¨ç™»å…¥å¯†ç¢¼</span>
          <span class="na">KEYCHAIN_PASSWORD</span><span class="pi">:</span> <span class="s">${{ secrets.KEYCHAIN_PASSWORD }}</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s"># create variables</span>
          <span class="s">CERTIFICATE_PATH=$RUNNER_TEMP/build_certificate.p12</span>
          <span class="s">PP_PATH=$RUNNER_TEMP/build_pp.mobileprovision</span>
          <span class="s">KEYCHAIN_PATH=$RUNNER_TEMP/app-signing.keychain-db</span>

          <span class="s"># import certificate and provisioning profile from secrets</span>
          <span class="s">echo -n "$BUILD_CERTIFICATE_BASE64" | base64 --decode -o $CERTIFICATE_PATH</span>
          <span class="s">echo -n "$BUILD_PROVISION_PROFILE_BASE64" | base64 --decode -o $PP_PATH</span>

          <span class="s"># create temporary keychain</span>
          <span class="s">security create-keychain -p "$KEYCHAIN_PASSWORD" $KEYCHAIN_PATH</span>
          <span class="s">security set-keychain-settings -lut 21600 $KEYCHAIN_PATH</span>
          <span class="s">security unlock-keychain -p "$KEYCHAIN_PASSWORD" $KEYCHAIN_PATH</span>

          <span class="s"># import certificate to keychain</span>
          <span class="s">security import $CERTIFICATE_PATH -P "$P12_PASSWORD" -A -t cert -f pkcs12 -k $KEYCHAIN_PATH</span>
          <span class="s">security set-key-partition-list -S apple-tool:,apple: -k "$KEYCHAIN_PASSWORD" $KEYCHAIN_PATH</span>
          <span class="s">security list-keychain -d user -s $KEYCHAIN_PATH</span>

          <span class="s"># apply provisioning profile</span>
          <span class="s">mkdir -p ~/Library/MobileDevice/Provisioning\ Profiles</span>
          <span class="s">cp $PP_PATH ~/Library/MobileDevice/Provisioning\ Profiles</span>

      <span class="c1"># App Store Connect API Fastlane JSON Key</span>
      <span class="c1"># å¦ä¸€å€‹åœ¨æ‰“åŒ…ç’°å¢ƒå¹¾ä¹æ˜¯å¿…é ˆçš„ App Store Connect API Fastlane JSON Key (.json)</span>
      <span class="c1"># format: .json å…§å®¹æ ¼å¼ï¼šhttps://docs.fastlane.tools/app-store-connect-api/</span>
      <span class="c1"># è£¡é¢åŒ…å« App Store Connect API .p8 Key</span>
      <span class="c1"># æœƒåœ¨å¾ŒçºŒå¸¶çµ¦ Fastlaneï¼Œç”¨æ–¼ä¸Šå‚³åˆ° Testflightã€App Store API ä½¿ç”¨</span>
      <span class="c1">#</span>
      <span class="c1"># GitHub Actions Secret ç„¡æ³•å„²å­˜æª”æ¡ˆï¼Œå› æ­¤æ‰€æœ‰æ†‘è­‰æª”æ¡ˆéƒ½è¦å…ˆè½‰æˆ Base64 Encoded æ–‡å­—æ ¼å¼å­˜åœ¨ Secret</span>
      <span class="c1"># åœ¨ GitHub Actions Step ä¸­å†å‹•æ…‹è®€å‡ºä¾†å¯«å…¥ TEMP æª”æ¡ˆä¾›å…¶ä»–æ­¥é©Ÿå¼•ç”¨ä½¿ç”¨</span>
      <span class="c1"># å…¶ä»–è¨­å®šç´°ç¯€è«‹åƒè€ƒæ–‡ç« </span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Read and Write Apple Store Connect API Key to Temp</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">APP_STORE_CONNECT_API_KEY_BASE64</span><span class="pi">:</span> <span class="s">${{ secrets.APP_STORE_CONNECT_API_KEY_BASE64 }}</span>
          <span class="na">APP_STORE_CONNECT_API_KEY_PATH</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">runner.temp</span><span class="nv"> </span><span class="s">}}/${{</span><span class="nv"> </span><span class="s">env.APP_STORE_CONNECT_API_KEY_FILE_NAME</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s"># import certificate and provisioning profile from secrets</span>
          <span class="s">echo -n "$APP_STORE_CONNECT_API_KEY_BASE64" | base64 --decode -o $APP_STORE_CONNECT_API_KEY_PATH</span>

      <span class="c1"># ========== Env Setup Steps ==========</span>
      
      <span class="c1"># è®€å–å°ˆæ¡ˆæŒ‡å®šçš„ XCode ç‰ˆæœ¬</span>
      <span class="c1"># åœ¨å¾ŒçºŒä¹‹ä¸­ï¼Œæˆ‘å€‘è‡ªå·±æ‰‹å‹•æŒ‡å®šä½¿ç”¨çš„ XCode_x.x.x.app</span>
      <span class="c1"># è€Œä¸ä½¿ç”¨ xcversionï¼Œå› ç‚º xcversion å·²ç¶“ sunset ä¸ç©©å®šã€‚ </span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Read .xcode-version</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">read_xcode_version</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">XCODE_VERSION=$(cat .xcode-version)</span>
          <span class="s">echo "XCODE_VERSION: ${XCODE_VERSION}"</span>
          <span class="s">echo "xcode_version=${XCODE_VERSION}" &gt;&gt; $GITHUB_OUTPUT</span>

          <span class="s"># ä¹Ÿå¯ä»¥ç›´æ¥åœ¨é€™æŒ‡å®šå…¨åŸŸ XCode ç‰ˆæœ¬ï¼Œé€™æ¨£å°±ä¸ç”¨åœ¨å¾ŒçºŒæ­¥é©ŸæŒ‡å®š DEVELOPER_DIR</span>
          <span class="s"># ä½†æ­¤æŒ‡ä»¤éœ€è¦ sudoer æ¬Šé™ï¼Œå¦‚æœæ˜¯ self-hosted runner å°±è¦ç¢ºå®š runner åŸ·è¡Œç’°å¢ƒæœ‰ sudo æ¬Šé™</span>
          <span class="s"># sudo xcode-select -s "/Applications/Xcode_${XCODE_VERSION}.app/Contents/Developer"</span>

      <span class="c1"># è®€å–å°ˆæ¡ˆæŒ‡å®šçš„ Ruby ç‰ˆæœ¬</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Read .ruby-version</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">read_ruby_version</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">RUBY_VERSION=$(cat .ruby-version)</span>
          <span class="s">echo "RUBY_VERSION: ${RUBY_VERSION}"</span>
          <span class="s">echo "ruby_version=${RUBY_VERSION}" &gt;&gt; $GITHUB_OUTPUT</span>

      <span class="c1"># å®‰è£æˆ–è¨­å®š Runner Ruby ç‰ˆæœ¬æˆå°ˆæ¡ˆæŒ‡å®šç‰ˆæœ¬</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Set up Ruby</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">ruby/setup-ruby@v1</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">ruby-version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">steps.read_ruby_version.outputs.ruby_version</span><span class="nv"> </span><span class="s">}}"</span>

      <span class="c1"># å¯è¨­å¯ä¸è¨­ï¼ŒåŸå› æ˜¯ä¹‹å‰åœ¨ self-hosted èµ·å¤šå€‹ runner è·‘ CI/CD å› ç‚º cocoapods repos æ˜¯å…±ç”¨ç›®éŒ„</span>
      <span class="c1"># è§£æ±ºçš„å•é¡Œæ˜¯ï¼šæœ‰å¾ˆå°çš„æ©Ÿç‡æœƒå‡ºç¾åœ¨åŒæ™‚ pod install æ™‚æ‹‰ cocoapods repos å‡ºç¾è¡çª(å› ç‚ºé è¨­éƒ½æ˜¯ç”¨) $HOME/.cocoapods/</span>
      <span class="c1"># GitHub Hosted Runner å‰‡ä¸éœ€æ­¤è¨­å®š</span>
      <span class="c1"># - name: Change Cocoapods Repos Folder</span>
      <span class="c1">#   if: contains(runner.labels, 'self-hosted')</span>
      <span class="c1">#   run: |</span>
      <span class="c1">#     # æ¯å€‹ Runner ç”¨è‡ªå·±çš„ .cocoapods è³‡æ–™å¤¾ï¼Œé˜²æ­¢è³‡æºè¡çª</span>
      <span class="c1">#     mkdir -p "$HOME/.cocoapods-${{ env.RUNNER_NAME }}/"</span>
      <span class="c1">#     export CP_HOME_DIR="$HOME/.cocoapods-${{ env.RUNNER_NAME }}"</span>
      <span class="c1">#     rm -f "$HOME/.cocoapods-${{ env.RUNNER_NAME }}/repos/cocoapods/.git/index.lock"</span>

      <span class="c1"># ========== Cache Setting Steps ==========</span>
      <span class="c1"># è«‹æ³¨æ„ï¼Œå°±ç®—æ˜¯ self-hostedï¼ŒCache ç›®å‰ä¹Ÿæ˜¯ Cloud Cache æœƒè¨ˆç®—ç”¨é‡</span>
      <span class="c1"># è¦å‰‡ï¼š7 å¤©æœª hit è‡ªå‹•åˆªé™¤ã€å–®å€‹ Cache ä¸Šé™ 10 GBã€Action æˆåŠŸæ‰æœƒ Cache</span>
      <span class="c1"># Public Repo: å…è²»ç„¡é™åˆ¶</span>
      <span class="c1"># Private Repo: 5 GB èµ·</span>
      <span class="c1"># Self-hosted å¯ä»¥è‡ªå·±ç”¨ shell script æ’°å¯« Cache &amp; Restore ç­–ç•¥æˆ–ä½¿ç”¨å…¶ä»–å·¥å…·å”åŠ©</span>
      
      <span class="c1"># Bundle Cache (Gemfile)</span>
      <span class="c1"># å°æ‡‰ Makefile ä¸­æˆ‘å€‘æŒ‡å®šäº† Bundle  å®‰è£è·¯å¾‘ ./vendor ä¸‹</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Cache Bundle</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/cache@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">./vendor</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">${{ runner.os }}-bundle-${{ hashFiles('Gemfile.lock') }}</span>
          <span class="na">restore-keys</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">${{ runner.os }}-bundle-</span>

      <span class="c1"># CocoaPods Cache (Podfile)</span>
      <span class="c1"># é»˜èªå°±æ˜¯ å°ˆæ¡ˆ/Pods ä¸‹</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Cache CocoaPods</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/cache@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">./Product/Pods</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">${{ runner.os }}-cocoapods-${{ hashFiles('Product/Podfile.lock') }}</span>
          <span class="na">restore-keys</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">${{ runner.os }}-cocoapods-</span>

      <span class="c1"># Mint cache</span>
      <span class="c1"># å°æ‡‰ Makefile ä¸­æˆ‘å€‘æŒ‡å®šçš„ Mint å®‰è£è·¯å¾‘ ./mint ä¸‹</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Cache Mint</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/cache@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">./mint</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">${{ runner.os }}-mint-${{ hashFiles('Mintfile') }}</span>
          <span class="na">restore-keys</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">${{ runner.os }}-mint-</span>

      <span class="c1"># ====================</span>

      <span class="c1"># å°ˆæ¡ˆ Setup &amp; ä¾è³´å®‰è£</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Setup &amp; Install Dependency</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s"># åŸ·è¡Œ Makefile ä¸­å°è£çš„ Setup æŒ‡ä»¤ï¼Œå°æ‡‰æˆæŒ‡ä»¤å¤§æ¦‚æ˜¯ï¼š</span>
          <span class="s"># brew install mint</span>
          <span class="s"># bundle config set path 'vendor/bundle'</span>
          <span class="s"># bundle install</span>
          <span class="s"># mint bootstrap</span>
          <span class="s"># ...</span>
          <span class="s"># ç­‰ç­‰ setup æŒ‡ä»¤</span>
          <span class="s">make setup</span>

          <span class="s"># åŸ·è¡Œ Makefile ä¸­å°è£çš„ Install æŒ‡ä»¤ï¼Œå°æ‡‰æˆæŒ‡ä»¤å¤§æ¦‚æ˜¯ï¼š</span>
          <span class="s"># mint run yonaskolb/XcodeGen --quiet</span>
          <span class="s"># bundle exec pod install</span>
          <span class="s"># ...</span>
          <span class="s"># ç­‰ç­‰ install æŒ‡ä»¤</span>
          <span class="s">make install</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy Beta</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">deploy</span>
        <span class="c1"># æŒ‡å®šå·¥ä½œç›®éŒ„ï¼Œé€™æ¨£å¾ŒçºŒæŒ‡ä»¤å°±ä¸ç”¨åœ¨ç‰¹åˆ¥ cd ./Product/</span>
        <span class="na">working-directory</span><span class="pi">:</span> <span class="s">./Product/</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="c1"># æ‰“åŒ… Input åƒæ•¸</span>
          <span class="na">VERSION_NUMBER</span><span class="pi">:</span> <span class="s">${{ inputs.VERSION_NUMBER || '' }}</span>
          <span class="na">BUILD_NUMBER</span><span class="pi">:</span> <span class="s">${{ inputs.BUILD_NUMBER || '' }}</span>
          <span class="na">RELEASE_NOTE</span><span class="pi">:</span> <span class="s">${{ inputs.RELEASE_NOTE || '' }}</span>
          <span class="na">AUTHOR</span><span class="pi">:</span> <span class="s">${{ github.actor }}</span>

          <span class="c1"># Repo -&gt; Settings -&gt; Actions secrets and variables -&gt; secrets</span>
          <span class="c1"># Firebase CLI Token å¯†é‘° (å–å¾—æ–¹å¼è«‹åƒè€ƒæ–‡ç« )</span>
          <span class="na">FIREBASE_CLI_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.FIREBASE_CLI_TOKEN }}</span>
          <span class="c1"># Apple Developer Program Team ID</span>
          <span class="na">TEAM_ID</span><span class="pi">:</span> <span class="s">${{ secrets.TEAM_ID }}</span>
                    
          <span class="c1"># æŒ‡å®šé€™å€‹ Job è¦ä½¿ç”¨ XCode_x.x.x æŒ‡å®šçš„ç‰ˆæœ¬åŸ·è¡Œ</span>
          <span class="na">DEVELOPER_DIR</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/Applications/Xcode_${{</span><span class="nv"> </span><span class="s">steps.read_xcode_version.outputs.xcode_version</span><span class="nv"> </span><span class="s">}}.app/Contents/Developer"</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s"># å–å¾—ç•¶å‰ Timestamp</span>
          <span class="s">BUILD_TIMESTAMP=$(date +'%Y%m%d%H%M%S')</span>

          <span class="s"># å¦‚æœ BUILD_NUMBER æ²’æœ‰å€¼ï¼Œç”¨ Timestamp ç•¶ App Build Number</span>
          <span class="s">BUILD_NUMBER="${BUILD_NUMBER:-$BUILD_TIMESTAMP}"</span>
  
          <span class="s">ID="${{ github.run_id }}"</span>
          <span class="s">COMMIT_SHA="${{ github.sha }}"</span>
          <span class="s">BRANCH_NAME="${{ github.ref_name }}"</span>
          <span class="s">AUTHOR="${{ env.AUTHOR }}"</span>

          <span class="s"># çµ„åˆ Release Note</span>
          <span class="s">RELEASE_NOTE="${{ env.RELEASE_NOTE }}</span>
          <span class="s">ID: ${ID}</span>
          <span class="s">Commit SHA: ${COMMIT_SHA}</span>
          <span class="s">Branch: ${BRANCH_NAME}</span>
          <span class="s">Author: ${AUTHOR}</span>
          <span class="s">"</span>

          <span class="s"># åŸ·è¡Œ Fastlane æ‰“åŒ…ï¼†éƒ¨ç½² Lane</span>
          <span class="s">bundle exec fastlane beta release_notes:"${RELEASE_NOTE}" version_number:"${VERSION_NUMBER}" build_number:"${BUILD_NUMBER}"</span>

      <span class="c1"># GitHub Actions å»ºè­°çš„ self-hosted å®‰å…¨æ€§è¨­å®šï¼š</span>
      <span class="c1"># ref: https://docs.github.com/en/actions/how-tos/use-cases-and-examples/deploying/installing-an-apple-certificate-on-macos-runners-for-xcode-development#required-clean-up-on-self-hosted-runners</span>
      <span class="c1"># å°æ‡‰ Step: Install the Apple certificate and provisioning profile</span>
      <span class="c1"># ç”¨é€”æ˜¯åˆªé™¤æ©Ÿå™¨ä¸Šä¸‹è¼‰ä¸‹ä¾†çš„é‡‘é‘°æ†‘è­‰</span>
      <span class="c1"># å¦‚æœä½ æ˜¯ç”¨ Match å‰‡éœ€è¦æ”¹å¯«æˆ Match çš„ Clean</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Clean up keychain and provisioning profile</span>
        <span class="na">if</span><span class="pi">:</span> <span class="s">${{ always() &amp;&amp; contains(runner.labels, 'self-hosted') }}</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">security delete-keychain $RUNNER_TEMP/app-signing.keychain-db</span>
          <span class="s">rm ~/Library/MobileDevice/Provisioning\ Profiles/build_pp.mobileprovision</span>
</pre></table></code></div></div><ul><li>è¨˜å¾—åˆ° Repo -&gt; Settings -&gt; Actions secrets and variables -&gt; secrets æ–°å¢ä¸€å€‹ <code class="language-plaintext highlighter-rouge">TEAM_ID</code> è®Šæ•¸ï¼Œå…§å®¹æ˜¯ Apple Developer Team ID å­—ä¸²ã€‚</ul><p><a href="/assets/4b001d2e8440/1*dxdmT_N_w_VUd56f6GRLSQ.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*dxdmT_N_w_VUd56f6GRLSQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTgxIiBoZWlnaHQ9IjQ5OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><strong>Commit æª”æ¡ˆåˆ° Repo ä¸»åˆ†æ”¯ï¼Œæ¸¬è©¦çœ‹çœ‹æ‰“åŒ…åŠŸèƒ½ï¼š</strong></p><p><a href="/assets/4b001d2e8440/1*Z_UAfWAsJSIoWxeTRMvtDQ.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*Z_UAfWAsJSIoWxeTRMvtDQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDcyIiBoZWlnaHQ9IjY4NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><blockquote><p><em>è«‹æ³¨æ„è‹¥å…¶ä»–åˆ†æ”¯è¦ä½¿ç”¨æ­¤ Action éœ€è¦å…ˆ Merge ä¸»åˆ†æ”¯çš„ CD-Deploy.yml æª”æ¡ˆã€‚</em></p></blockquote><p><strong>ç­‰å¾…ä»»å‹™è·‘å®Œï¼š</strong></p><p><a href="/assets/4b001d2e8440/1*Q-c2IUlJpssooiqcqcm_Bg.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*Q-c2IUlJpssooiqcqcm_Bg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzg2IiBoZWlnaHQ9IjEyODgiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="/assets/4b001d2e8440/1*W8PBkatfsITMDFSlp7xpjg.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*W8PBkatfsITMDFSlp7xpjg.webp" alt="[Demo](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions/runs/16114046420){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9Ijk3NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions/runs/16114046420" target="_blank">Demo</a></p><blockquote><p><strong><em>æ‰“åŒ…ï¼‹éƒ¨ç½²æˆåŠŸ âœ…</em></strong></p></blockquote><p><strong>å®Œæ•´ç¨‹å¼ç¢¼ï¼š <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/CD-Deploy.yml" target="_blank">CD-Deploy.yml</a></strong></p><h4 id="æŠ€è¡“ç´°ç¯€--firebase-cli-token-å–å¾—è¨­å®š"><span class="me-2">æŠ€è¡“ç´°ç¯€ â€” Firebase CLI Token å–å¾—ï¼†è¨­å®š</span><a href="#æŠ€è¡“ç´°ç¯€--firebase-cli-token-å–å¾—è¨­å®š" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>æŒ‰ç…§ <a href="https://firebase.google.com/docs/cli?hl=zh-tw#install-cli-mac-linux" target="_blank">Firebase å®˜æ–¹æ–‡ä»¶æ­¥é©Ÿ</a> ï¼š</p><p>å…ˆå®‰è£å¥½ Firebase CLI å·¥å…·ï¼š</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>curl <span class="nt">-sL</span> https://firebase.tools | bash
</pre></table></code></div></div><p>åŸ·è¡Œï¼š</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>firebase login:ci
</pre></table></code></div></div><p>å®Œæˆç™»å…¥ã€æˆæ¬Šï¼š</p><p><a href="/assets/4b001d2e8440/1*Jex5aYzRSs7Trfx6z_e1Aw.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*Jex5aYzRSs7Trfx6z_e1Aw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDYzIiBoZWlnaHQ9IjcwMSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/4b001d2e8440/1*S-1ckn9WC6j0DIqZGSdUUg.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*S-1ckn9WC6j0DIqZGSdUUg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MjciIGhlaWdodD0iMjEzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>å›åˆ° Terminal è¤‡è£½ Firebase CLI Token:</p><p><a href="/assets/4b001d2e8440/1*sa_h8L08JbeC2nA0kACQtQ.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*sa_h8L08JbeC2nA0kACQtQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iNDgzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>åˆ° Repo â†’ Settings â†’ Secrets and variables â†’ Actions â†’ æ–°å¢ä¸€å€‹ Secret: <code class="language-plaintext highlighter-rouge">FIREBASE_CLI_TOKEN</code> ä¸¦è²¼ä¸Š Firebase CLI Tokenã€‚</p><p><a href="/assets/4b001d2e8440/1*Lc6yGPu7L_0z6u1HH2PB5A.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*Lc6yGPu7L_0z6u1HH2PB5A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTcxIiBoZWlnaHQ9IjUxNSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><blockquote><p><strong><em>é€™å€‹ Token = ä½ çš„ç™»å…¥èº«ä»½</em></strong> <em>ï¼Œè«‹å¦¥å–„ä¿å­˜ï¼Œå¦‚æœå¸³è™Ÿé›¢è·ä¹Ÿéœ€è¦é€²è¡Œæ›´æ›ã€‚</em></p></blockquote><h4 id="æŠ€è¡“ç´°ç¯€--install-the-apple-certificate-and-provisioning-profile"><span class="me-2">æŠ€è¡“ç´°ç¯€ â€” Install the Apple certificate and provisioning profile</span><a href="#æŠ€è¡“ç´°ç¯€--install-the-apple-certificate-and-provisioning-profile" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>è£œå……é–‹ç™¼æ†‘è­‰åŒ¯å…¥ Runner çš„æ­¥é©Ÿç´°ç¯€ã€‚</p><p>å›  GitHub Actions Secret ç„¡æ³•å„²å­˜æª”æ¡ˆï¼Œå› æ­¤æ‰€æœ‰æ†‘è­‰æª”æ¡ˆéƒ½è¦å…ˆè½‰æˆ Base64 Encoded æ–‡å­—æ ¼å¼å­˜åœ¨ Secretsï¼ŒGitHub Actions Step ä¸­å†å‹•æ…‹è®€å‡ºä¾†å¯«å…¥ TEMP æª”æ¡ˆä¸¦ç§»å‹•åˆ°æ­£ç¢ºä½ç½®çµ¦ç³»çµ±è®€å–ä½¿ç”¨ã€‚</p><p><strong>æ‰“åŒ… Development éœ€è¦å…©æŠŠé‡‘é‘°æ†‘è­‰ï¼š</strong></p><ul><li><a href="https://developer.apple.com/account/resources/certificates/list" target="_blank">Provision Profile ( .mobileprovision)</a><li><a href="https://developer.apple.com/account/resources/certificates/list" target="_blank">Development Certifcate ( .p12)</a></ul><p><a href="/assets/4b001d2e8440/1*WXqqnErto3nn8rnNg6TXgw.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*WXqqnErto3nn8rnNg6TXgw.webp" alt="cicd.mobileprovision" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTE3IiBoZWlnaHQ9IjYxNiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>cicd.mobileprovision</p><p><a href="/assets/4b001d2e8440/1*RkeZ1PkXeY9Nt1kSRJKEQw.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*RkeZ1PkXeY9Nt1kSRJKEQw.webp" alt="development.cer" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDc4IiBoZWlnaHQ9IjczOCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>development.cer</p><p>å¾ <a href="https://developer.apple.com/account/resources/certificates/list" target="_blank">Apple Developer</a> ä¸­ä¸‹è¼‰çš„ Certificate æ˜¯ .cer æ ¼å¼ï¼Œè€Œæˆ‘å€‘éœ€è¦çš„æ˜¯ .p12 æ ¼å¼ï¼Œå¯ä»¥å…ˆæŠŠä¸‹è¼‰ä¸‹ä¾†çš„ .cer é»å…©ä¸‹å®‰è£åˆ° Keychainï¼Œç„¶å¾Œæ‰“é–‹ Keychain é¸æ“‡è©²æ†‘è­‰å³éµ Export åŒ¯å‡ºã€‚</p><p><a href="/assets/4b001d2e8440/1*HJMxwM3IDjxT-UGqnoUtWw.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*HJMxwM3IDjxT-UGqnoUtWw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MjQiIGhlaWdodD0iNTI2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>æª”æ¡ˆåç¨±ï¼šcicd.p12ã€æ ¼å¼ .p12</p><p>P12 é‡‘é‘°å¯†ç¢¼ï¼šè¼¸å…¥ä¸€çµ„å®‰å…¨çš„è‡ªè¨‚ç¾©å­—ä¸² (ç¯„ä¾‹æ˜¯ä¸å¥½çš„ç¤ºç¯„ï¼Œç”¨ <code class="language-plaintext highlighter-rouge">123456</code> )</p><p><a href="/assets/4b001d2e8440/1*tyH0XqDVPGPWFJPL4dxksw.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*tyH0XqDVPGPWFJPL4dxksw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NzIiIGhlaWdodD0iMzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4b001d2e8440/1*qKeZWel3w_5wW7meMtHmLA.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*qKeZWel3w_5wW7meMtHmLA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTYiIGhlaWdodD0iMzgxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>ç¾åœ¨å…©å€‹æª”æ¡ˆï¼š</strong> cicd.p12ã€cicd.mobileprovision éƒ½æº–å‚™å¥½äº†</p><p><strong>è½‰æ›æˆ BASE64 æ ¼å¼å­—ä¸²ä¸¦å­˜åˆ° Repo Secretsï¼š</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">base64</span> <span class="nt">-i</span> cicd.mobileprovision | pbcopy
</pre></table></code></div></div><p>åˆ° Repo â†’ Settings â†’ Secrets and variables â†’ Actions â†’ æ–°å¢ä¸€å€‹ Secret: <code class="language-plaintext highlighter-rouge">BUILD_PROVISION_PROFILE_BASE64</code> ä¸¦è²¼ä¸Šä»¥ä¸Šå…§å®¹ã€‚</p><p>-</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">base64</span> <span class="nt">-i</span> cicd.p12 | pbcopy
</pre></table></code></div></div><p>åˆ° Repo â†’ Settings â†’ Secrets and variables â†’ Actions â†’ æ–°å¢ä¸€å€‹ Secret: <code class="language-plaintext highlighter-rouge">BUILD_CERTIFICATE_BASE64</code> ä¸¦è²¼ä¸Šä»¥ä¸Šå…§å®¹ã€‚</p><p>-</p><p>åˆ° Repo â†’ Settings â†’ Secrets and variables â†’ Actions â†’ æ–°å¢ä¸€å€‹ Secret: <code class="language-plaintext highlighter-rouge">P12_PASSWORD</code> å…§å®¹æ˜¯å‰›åŒ¯å‡º P12 é‡‘é‘°è¨­å®šçš„å¯†ç¢¼ã€‚</p><p>- åˆ° Repo â†’ Settings â†’ Secrets and variables â†’ Actions â†’ æ–°å¢ä¸€å€‹ Secret: <code class="language-plaintext highlighter-rouge">KEYCHAIN_PASSWORD</code> ï¼š å¦‚æœæ˜¯ GitHub Hosted Runner å‰‡éš¨ä¾¿è¼¸å…¥ä¸€å€‹ä»»æ„å­—ä¸²ï¼Œ <strong>å¦‚æœæ˜¯ Self-hosted Runner å‰‡ç‚º macOS Runner ä½¿ç”¨è€…çš„ç™»å…¥å¯†ç¢¼</strong> ã€‚</p><p><a href="/assets/4b001d2e8440/1*JZCkFUJCQsggqYtW8acjTw.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*JZCkFUJCQsggqYtW8acjTw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDg4IiBoZWlnaHQ9IjQ5MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h4 id="æŠ€è¡“ç´°ç¯€-app-store-connect-api-key"><span class="me-2">æŠ€è¡“ç´°ç¯€ â€”App Store Connect API Key</span><a href="#æŠ€è¡“ç´°ç¯€-app-store-connect-api-key" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Fastlane æ‰“åŒ…éƒ¨ç½²åˆ° App Store, Testflight <a href="https://docs.fastlane.tools/app-store-connect-api/" target="_blank">å¿…é ˆæä¾›çš„ .json é‡‘é‘°</a> ï¼ŒåŒæ¨£å—é™ GitHub Actions Secrets åªèƒ½å­˜å­—ä¸²ä¸èƒ½å­˜æª”æ¡ˆï¼Œæ‰€ä»¥æˆ‘å€‘ä¹Ÿè¦æŠŠé‡‘é‘°å…§å®¹è½‰æˆ Base64 å­—ä¸²ï¼ŒGitHub Actions Step ä¸­å†å‹•æ…‹è®€å‡ºä¾†å¯«å…¥ TEMP æª”æ¡ˆä¸¦æŠŠæª”æ¡ˆè·¯å¾‘çµ¦ Fastlane å¼•ç”¨ä½¿ç”¨ã€‚</p><p><strong>é¦–å…ˆåˆ° <a href="https://zhgchg.li/posts/zrealm-dev/app-store-connect-api-%E5%BF%AB%E9%80%9F%E8%AE%80%E5%8F%96%E8%88%87%E7%AE%A1%E7%90%86-customer-reviews-%E6%8F%90%E5%8D%87-ios-app-%E8%A9%95%E5%83%B9%E6%95%B4%E5%90%88%E6%95%88%E7%8E%87-f1365e51902c/">App Store Connect å»ºç«‹&amp;ä¸‹è¼‰å¥½ App Store Connect API Key</a> ( .p8) ï¼š</strong></p><pre><code class="language-vbnet">-----BEGIN PRIVATE KEY-----
sss
axzzvcxz
zxzvzcxv
vzxcvzxvczxcvz
-----END PRIVATE KEY-----
</code></pre><p>æ–°å¢ä¸€å€‹ <code class="language-plaintext highlighter-rouge">app_store_connect_api.json</code> æª”æ¡ˆ( <a href="https://docs.fastlane.tools/app-store-connect-api/" target="_blank">å…§å®¹åƒè€ƒ</a> )ï¼š</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="o">{</span>
  <span class="s2">"key_id"</span>: <span class="s2">"App Store Connect ä¸Šå¯«çš„ Key ID"</span>,
  <span class="s2">"issuer_id"</span>: <span class="s2">"App Store Connect ä¸Šå¯«çš„ Issuer ID"</span>,
  <span class="s2">"key"</span>: <span class="s2">"-----BEGIN PRIVATE KEY-----è¨˜å¾—æŠŠæ›è¡Œæ”¹æˆ</span><span class="se">\n</span><span class="s2">-----END PRIVATE KEY-----"</span>,
  <span class="s2">"duration"</span>: 1200, <span class="c"># optional (maximum 1200)</span>
  <span class="s2">"in_house"</span>: <span class="nb">false</span> <span class="c"># optional but may be required if using match/sigh</span>
<span class="o">}</span>
</pre></table></code></div></div><p>å„²å­˜æª”æ¡ˆå¾ŒåŸ·è¡Œï¼š</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">base64</span> <span class="nt">-i</span> app_store_connect_api.json | pbcopy
</pre></table></code></div></div><p>å°‡å­—ä¸²å…§å®¹è²¼åˆ° Repo â†’ Settings â†’ Secrets and variables â†’ Actions â†’ æ–°å¢ä¸€å€‹ Secret: <code class="language-plaintext highlighter-rouge">APP_STORE_CONNECT_API_KEY_BASE64</code> ä¸¦è²¼ä¸Šä»¥ä¸Šå…§å®¹ã€‚</p><p><a href="/assets/4b001d2e8440/1*QxRuxEPEfWbJ383hhnxGkA.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*QxRuxEPEfWbJ383hhnxGkA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTU5IiBoZWlnaHQ9IjU0OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><code class="language-plaintext highlighter-rouge">Read and Write Apple Store Connect API Key to Temp</code> Step å®Œæˆä¹‹å¾Œåœ¨å¾ŒçºŒçš„ Step åªè¦å‚³å…¥ env <code class="language-plaintext highlighter-rouge">APP_STORE_CONNECT_API_KEY_PATH</code> :</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy</span>
  <span class="na">env</span><span class="pi">:</span>
    <span class="na">APP_STORE_CONNECT_API_KEY_PATH</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">runner.temp</span><span class="nv"> </span><span class="s">}}/${{</span><span class="nv"> </span><span class="s">env.APP_STORE_CONNECT_API_KEY_FILE_NAME</span><span class="nv"> </span><span class="s">}}"</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">....</span>
</pre></table></code></div></div><p>Fastlane å°±èƒ½è‡ªå‹•å–å¾—ä½¿ç”¨ã€‚</p><h4 id="æŠ€è¡“å»¶ä¼¸--reuse-action-workflow-æ‹†åˆ†æ‰“åŒ…å’Œéƒ¨ç½²å‹•ä½œ"><span class="me-2">æŠ€è¡“å»¶ä¼¸ â€” Reuse Action Workflow æ‹†åˆ†æ‰“åŒ…å’Œéƒ¨ç½²å‹•ä½œ</span><a href="#æŠ€è¡“å»¶ä¼¸--reuse-action-workflow-æ‹†åˆ†æ‰“åŒ…å’Œéƒ¨ç½²å‹•ä½œ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>åœ¨é€™å€‹æ¡ˆä¾‹ä¸­æˆ‘å€‘ç›´æ¥ä½¿ç”¨ Fastlane <code class="language-plaintext highlighter-rouge">beta</code> Lane åŸ·è¡Œæ‰“åŒ…ï¼‹éƒ¨ç½²å…©å€‹å‹•ä½œã€‚</p><p>åœ¨å¯¦éš›æ¡ˆä¾‹ä¸­æˆ‘å€‘å¯èƒ½éœ€è¦å°‡åŒä¸€åŒ…æ‰“åŒ…çµæœåˆ†åˆ¥éƒ¨ç½²åˆ°ä¸åŒå¹³å°ä¸Š(Firebase, Testflightâ€¦etc) å› æ­¤æ¯”è¼ƒå¥½çš„åšæ³•æ˜¯æ‰“åŒ…æ˜¯ä¸€å€‹ Actionã€éƒ¨ç½²æ˜¯ä¸€å€‹ Actionï¼Œä¸ç„¶æœƒé‡å¾©è·‘å…©æ¬¡æ‰“åŒ…ï¼›è€Œä¸”ä¹Ÿæ›´ç¬¦åˆ CI/CD çš„æ¬Šè²¬åŠƒåˆ†ã€‚</p><blockquote><p><strong><em>ä»¥ä¸‹çˆ²ç¯„ä¾‹ä»‹ç´¹ï¼š</em></strong></p></blockquote><p><strong>CI-Build.yml:</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Build</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">main</span>
  <span class="na">workflow_call</span><span class="pi">:</span>
     <span class="na">inputs</span><span class="pi">:</span>
        <span class="na">RELEASE_NOTE</span><span class="pi">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Release</span><span class="nv"> </span><span class="s">notes</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">deployment.'</span>
          <span class="na">required</span><span class="pi">:</span> <span class="kc">false</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">macos-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Checkout Code</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v4</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install Dependencies</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">make steup</span>
          <span class="s">make instal</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Build Project</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">bundle exec fastlane build</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Upload Build Artifact</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/upload-artifact@v4</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">build-artifact</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">./fastlane/build/</span>
</pre></table></code></div></div><p><strong>CD-Deploy-Firebase.yml:</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Deploy Firebase</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># ç•¶ Build Action å®Œæˆæ™‚è‡ªå‹•è§¸ç™¼åŸ·è¡Œ</span>
  <span class="na">workflow_run</span><span class="pi">:</span>
    <span class="na">workflows</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">Build"</span><span class="pi">]</span>
    <span class="na">types</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">completed</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">deploy</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="c1"># å®Œæˆï¼‹åŸ·è¡ŒæˆåŠŸæ‰åŸ·è¡Œéƒ¨ç½²</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">${{ github.event.workflow_run.conclusion == 'success' }}</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Checkout Code</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v4</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install Dependencies</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">make steup</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Download Build Artifact</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/download-artifact@v4</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">build-artifact</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">./fastlane/build/</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy to Production</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">bundle exec fastlane deploy-firebase</span>
</pre></table></code></div></div><p><strong>CD-Deploy-Testflight.yml:</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Deploy Testflight</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># ç•¶ Build Action å®Œæˆæ™‚è‡ªå‹•è§¸ç™¼åŸ·è¡Œ</span>
  <span class="na">workflow_run</span><span class="pi">:</span>
    <span class="na">workflows</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">Build"</span><span class="pi">]</span>
    <span class="na">types</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">completed</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">deploy</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="c1"># å®Œæˆï¼‹åŸ·è¡ŒæˆåŠŸæ‰åŸ·è¡Œéƒ¨ç½²</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">${{ github.event.workflow_run.conclusion == 'success' }}</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Checkout Code</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v4</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install Dependencies</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">make steup</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Download Build Artifact</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/download-artifact@v4</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">build-artifact</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">./fastlane/build/</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy to Production</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">bundle exec fastlane deploy-testflight</span>
</pre></table></code></div></div><p><strong>å¦å¤–ä¹Ÿå¯ä»¥ç”¨ <a href="https://docs.github.com/en/actions/how-tos/sharing-automations/reusing-workflows" target="_blank">Reusing Workflow</a> :</strong></p><p><strong>CD-Deploy-Firebase.yml:</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Deploy Firebase</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># ä»»æ„çš„è§¸ç™¼æ¢ä»¶ï¼Œé€™è£¡ä»¥æ‰‹å‹•è¡¨å–®è§¸ç™¼ç‚ºä¾‹</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="na">RELEASE_NOTE</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Release</span><span class="nv"> </span><span class="s">notes</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">deployment.'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="s">Build</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">./.github/workflows/CD-Build.yml</span>
    <span class="na">secrets</span><span class="pi">:</span> <span class="s">inherit</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">RELEASE_NOTE</span><span class="pi">:</span> <span class="s">${{ inputs.RELEASE_NOTE }}</span>

  <span class="na">deploy</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="c1"># Job é è¨­æ˜¯ä¸¦ç™¼åŸ·è¡Œï¼Œç”¨ needs é™åˆ¶éœ€ç­‰å¾… build å®Œæˆæ‰åŸ·è¡Œ</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">build</span><span class="pi">]</span>
    <span class="c1"># åŸ·è¡ŒæˆåŠŸï¼Œæ‰éƒ¨ç½²</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">${{ always() &amp;&amp; needs.deploy.result == 'success' }}</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Checkout Code</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v4</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install Dependencies</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">make steup</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Download Build Artifact</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/download-artifact@v4</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">build-artifact</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">./fastlane/build/</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy to Production</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">bundle exec fastlane deploy-firebase</span>
</pre></table></code></div></div><h4 id="github-actions--artifact"><span class="me-2">GitHub Actions â€” Artifact</span><a href="#github-actions--artifact" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>åŒ Cacheï¼Œç›®å‰ <strong>å°±ç®—æ˜¯ Self-hosted Runner Artifcact åŠŸèƒ½ä¾ç„¶æœƒèµ° GitHub Cloud</strong> å—åˆ°ä½¿ç”¨é‡é™åˆ¶ ( <a href="https://docs.github.com/en/billing/managing-billing-for-your-products/about-billing-for-github-actions#included-storage-and-minutes" target="_blank">å…è²»å¸³è™Ÿ 500MB èµ·</a> )ã€‚</p><blockquote><p><em>Self-hosted Runner è¦é”åˆ°é¡ä¼¼çš„æ•ˆæœå¯ä»¥è‡ªè¡Œå»ºç«‹å…±äº«ä¸»æ©Ÿç›®éŒ„æˆ–æ‰¾å…¶ä»–å·¥å…·æ›¿ä»£ã€‚</em></p></blockquote><p>å› æ­¤ç›®å‰ Artifact å¯¦éš›æˆ‘åªç”¨ä¾†å­˜æ”¾å°è³‡æ–™ï¼Œä¾‹å¦‚ Snapshot Tests çš„éŒ¯èª¤çµæœã€æ¸¬è©¦å ±å‘Šâ€¦ç­‰ç­‰</p><h3 id="ci-nightly-build-åŸ·è¡Œå¿«ç…§å–®å…ƒæ¸¬è©¦æ‰“åŒ…cd-éƒ¨ç½²åˆ°-firebase-app-distribution"><span class="me-2">CIâ€” Nightly Build åŸ·è¡Œå¿«ç…§+å–®å…ƒæ¸¬è©¦+æ‰“åŒ…+CD éƒ¨ç½²åˆ° Firebase App Distribution</span><a href="#ci-nightly-build-åŸ·è¡Œå¿«ç…§å–®å…ƒæ¸¬è©¦æ‰“åŒ…cd-éƒ¨ç½²åˆ°-firebase-app-distribution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="æµç¨‹-2"><span class="me-2">æµç¨‹</span><a href="#æµç¨‹-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>æ¯å¤©å‡Œæ™¨ 3 é»è‡ªå‹•é‡å° main(develop or master) åˆ†æ”¯è·‘å…¨éƒ¨æ¸¬è©¦(unit+snapshot tests)ï¼Œå¦‚æœå¤±æ•—å‰‡å‚³é€å¤±æ•—é€šçŸ¥åˆ° Slack å·¥ä½œç¾¤çµ„ï¼›å¦‚æœæˆåŠŸå‰‡æ‰“åŒ…+éƒ¨ç½²ä¸€å€‹ç‰ˆæœ¬åˆ° Firebase App Disturbutionï¼Œæ‰“åŒ…æˆåŠŸ/å¤±æ•—éƒ½æœƒå‚³é€ Slack é€šçŸ¥ã€‚</p><h4 id="ci-nightly-build-and-deployyml"><span class="me-2">CI-Nightly-Build-And-Deploy.yml</span><a href="#ci-nightly-build-and-deployyml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo â†’ Actions â†’ New workflow â†’ set up a workflow yourselfã€‚</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) åç¨±</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">CI-Nightly Build And Deploy</span>

<span class="c1"># Actions Log çš„æ¨™é¡Œåç¨±</span>
<span class="na">run-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[CI-Nightly</span><span class="nv"> </span><span class="s">Build</span><span class="nv"> </span><span class="s">And</span><span class="nv"> </span><span class="s">Deploy]</span><span class="nv"> </span><span class="s">${{</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>

<span class="c1"># è§¸ç™¼äº‹ä»¶</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># æ’ç¨‹å®šæ™‚è‡ªå‹•åŸ·è¡Œ</span>
  <span class="c1"># https://crontab.guru/</span>
  <span class="c1"># UTC æ™‚é–“</span>
  <span class="na">schedule</span><span class="pi">:</span>
    <span class="c1"># UTC çš„ 19:00 = æ¯å¤© UTC+8 çš„ 03:00</span>
    <span class="pi">-</span> <span class="na">cron</span><span class="pi">:</span> <span class="s1">'</span><span class="s">0</span><span class="nv"> </span><span class="s">19</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*'</span>
  <span class="c1"># æ‰‹å‹•è§¸ç™¼</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>

<span class="c1"># Job å·¥ä½œé …ç›®</span>
<span class="c1"># Job æœƒä¸¦ç™¼åŸ·è¡Œ</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># æ¸¬è©¦å·¥ä½œ</span>
  <span class="na">testing</span><span class="pi">:</span>
    <span class="c1"># Reuse Workflow (workflow_call)</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">./.github/workflows/CI-Testing.yml</span>
    <span class="c1"># å‚³éæ‰€æœ‰ Secrets çµ¦ CD-Testing.yml</span>
    <span class="na">secrets</span><span class="pi">:</span> <span class="s">inherit</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="c1"># åŸ·è¡Œå…¨éƒ¨æ¸¬è©¦</span>
      <span class="na">TEST_LANE</span><span class="pi">:</span> <span class="s2">"</span><span class="s">run_all_tests"</span>
      <span class="c1"># ç›®æ¨™åˆ†æ”¯ï¼šmain, develop or master...etc</span>
      <span class="na">BRANCH</span><span class="pi">:</span> <span class="s2">"</span><span class="s">main"</span>

  <span class="na">deploy-env</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">outputs</span><span class="pi">:</span>
      <span class="na">DATE_STRING</span><span class="pi">:</span> <span class="s">${{ steps.get_date.outputs.DATE_STRING }}</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Get Date String</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">get_date</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">VERSION_DATE=$(date -u '+%Y%m%d')</span>
          <span class="s">echo "${VERSION_DATE}"</span>
          <span class="s">echo "DATE_STRING=${VERSION_DATE}" &gt;&gt; $GITHUB_ENV</span>
          <span class="s">echo "DATE_STRING=${VERSION_DATE}" &gt;&gt; $GITHUB_OUTPUT</span>
    
  <span class="na">deploy</span><span class="pi">:</span>
    <span class="c1"># Job é è¨­æ˜¯ä¸¦ç™¼åŸ·è¡Œï¼Œç”¨ needs é™åˆ¶éœ€ç­‰å¾… testing å’Œ deploy-env å®Œæˆæ‰åŸ·è¡Œ</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">testing</span><span class="pi">,</span> <span class="nv">deploy-env</span><span class="pi">]</span>
    <span class="c1"># å¦‚æœæ¸¬è©¦æˆåŠŸæ‰åŸ·è¡Œ</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">${{ needs.testing.result == 'success' }}</span>
    <span class="c1"># Reuse Workflow (workflow_call)</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">./.github/workflows/CD-Deploy.yml</span>
    <span class="c1"># å‚³éæ‰€æœ‰ Secrets çµ¦ CD-Deploy.yml</span>
    <span class="na">secrets</span><span class="pi">:</span> <span class="s">inherit</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">VERSION_NUMBER</span><span class="pi">:</span> <span class="s">NightlyBuild-${{ needs.deploy-env.outputs.DATE_STRING }}</span>
      <span class="na">RELEASE_NOTE</span><span class="pi">:</span> <span class="s">NightlyBuild-${{ needs.deploy-env.outputs.DATE_STRING }}</span>
      <span class="c1"># ç›®æ¨™åˆ†æ”¯ï¼šmain, develop or master...etc</span>
      <span class="na">BRANCH</span><span class="pi">:</span> <span class="s2">"</span><span class="s">main"</span>

<span class="c1"># ----- Slack Notify -----</span>
  <span class="na">testing-failed-slack-notify</span><span class="pi">:</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">testing</span><span class="pi">]</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">${{ needs.testing.result == 'failure' }}</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Post text to a Slack channel</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">slackapi/slack-github-action@v2.1.0</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">method</span><span class="pi">:</span> <span class="s">chat.postMessage</span>
          <span class="na">token</span><span class="pi">:</span> <span class="s">${{ secrets.SLACK_BOT_TOKEN }}</span>
          <span class="na">payload</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">channel: ${{ vars.SLACK_TEAM_CHANNEL_ID }}</span>
            <span class="s">text: ":x: Nightly Build - Testing å¤±æ•—\nWorkflow: &lt;${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}|View Run&gt;"</span>

  <span class="na">deploy-failed-slack-notify</span><span class="pi">:</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">deploy</span><span class="pi">]</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">${{ needs.deploy.result == 'failure' }}</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Post text to a Slack channel</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">slackapi/slack-github-action@v2.1.0</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">method</span><span class="pi">:</span> <span class="s">chat.postMessage</span>
          <span class="na">token</span><span class="pi">:</span> <span class="s">${{ secrets.SLACK_BOT_TOKEN }}</span>
          <span class="na">payload</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">channel: ${{ vars.SLACK_TEAM_CHANNEL_ID }}</span>
            <span class="s">text: ":x: Nightly Build Deploy å¤±æ•—\nWorkflow: &lt;${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}|View Run&gt;"</span>

  <span class="na">deploy-success-slack-notify</span><span class="pi">:</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">deploy</span><span class="pi">]</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">${{ needs.deploy.result == 'success' }}</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Post text to a Slack channel</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">slackapi/slack-github-action@v2.1.0</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">method</span><span class="pi">:</span> <span class="s">chat.postMessage</span>
          <span class="na">token</span><span class="pi">:</span> <span class="s">${{ secrets.SLACK_BOT_TOKEN }}</span>
          <span class="na">payload</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">channel: ${{ vars.SLACK_TEAM_CHANNEL_ID }}</span>
            <span class="s">text: ":white_check_mark: Nightly Build Deploy æˆåŠŸ\nWorkflow: &lt;${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}|View Run&gt;"</span>
</pre></table></code></div></div><p><strong>Commit æª”æ¡ˆåˆ° Repo ä¸»åˆ†æ”¯ï¼Œæ‰‹å‹•è§¸ç™¼æ¸¬è©¦ã€æ‰“åŒ…åŠŸèƒ½çœ‹çœ‹çµæœï¼š</strong></p><p><a href="/assets/4b001d2e8440/1*l71fL8oLoeAv-JX_FgkqzQ.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*l71fL8oLoeAv-JX_FgkqzQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjU2NCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><blockquote><p><em>æ—¥å¾Œæœƒæ¯æ—¥è‡ªå‹•è§¸ç™¼ã€‚</em></p></blockquote><p><a href="/assets/4b001d2e8440/1*u6A77KwkXS2SY5-DPPPR9A.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*u6A77KwkXS2SY5-DPPPR9A.webp" alt="[Demo](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions/runs/16119750747){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzczIiBoZWlnaHQ9IjkxOCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions/runs/16119750747" target="_blank">Demo</a></p><p><a href="/assets/4b001d2e8440/1*6DQL_v4eahSqSuVJZRPrEA.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*6DQL_v4eahSqSuVJZRPrEA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMTAiIGhlaWdodD0iOTIiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>ç­‰å¾…æ¸¬è©¦ä»»å‹™ã€æ‰“åŒ…éƒ¨ç½²ä»»å‹™ã€é€šçŸ¥ä»»å‹™éƒ½å®Œæˆå¾Œï¼ŒæŸ¥çœ‹çµæœã€‚</p><p><a href="/assets/4b001d2e8440/1*4UVgyCQljqZQgzxHpXPB4g.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*4UVgyCQljqZQgzxHpXPB4g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MDMiIGhlaWdodD0iOTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4b001d2e8440/1*t9PrQfcTANyvG7gfXXC-bw.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*t9PrQfcTANyvG7gfXXC-bw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>æˆ‘å€‘å°±èƒ½ç›´æ¥åœ¨æ‰‹æ©Ÿä¸Šå®‰è£ Nightly Build ç‰ˆæœ¬ä¾†é€²è¡Œæ¶å…ˆé«”é©—æ¸¬è©¦ã€‚</p><h4 id="æŠ€è¡“ç´°ç¯€"><span class="me-2">æŠ€è¡“ç´°ç¯€</span><a href="#æŠ€è¡“ç´°ç¯€" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>é€™å€‹ Action æˆ‘å€‘ç›´æ¥å¾©ç”¨å‰é¢è¨­è¨ˆçš„ CI-Testing å’Œ CD-Deployï¼Œçµ„åˆæˆæˆ‘å€‘çš„ Nightly Buildï¼Œéå¸¸å½ˆæ€§å¥½ç”¨ï¼</p><p><strong>å®Œæ•´ç¨‹å¼ç¢¼ï¼š <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions/workflows/CI-Nightly-Build-And-Deploy.yml" target="_blank">CI-Nightly-Build-And-Deploy.yml</a></strong></p><h3 id="self-hosted-runner-æ³¨æ„äº‹é …"><span class="me-2">Self-hosted Runner æ³¨æ„äº‹é …</span><a href="#self-hosted-runner-æ³¨æ„äº‹é …" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>æœ¬æ–‡æ˜¯ Public Repo å› æ­¤ç›´æ¥ä½¿ç”¨ GitHub Hosted çš„ macOS Runnerï¼Œä½†åœ¨å¯¦éš›å·¥ä½œä¸Šæˆ‘å€‘çš„ Repo ä¸€å®šæ˜¯ Privateï¼Œç›´æ¥ä½¿ç”¨ GitHub Hosted Runner è¶…è²´ä¸åˆ’ç®—(ç´„ä¸€å€‹æœˆå°±èƒ½è²·ä¸€å° Mac Mini æ”¾åœ¨å…¬å¸åƒåˆ°é£½çˆ½çˆ½è·‘)ï¼Œæ¯ä¸€å°ä¾ç…§æ•ˆèƒ½å¯ä»¥èµ·å¤šå€‹ Runner åŒæ™‚ä¸¦ç™¼æ¥ä»»å‹™ä¾†åšã€‚</p><blockquote><p><strong><em>ç´°ç¯€å¯åƒè€ƒ <a href="https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/">ä¸Šä¸€ç¯‡</a> ã€Œ <a href="https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/">Self-hosted Runner å»ºç½®èˆ‡æ”¹ç”¨</a> ã€éƒ¨åˆ†</em></strong> <em>ï¼Œåœ¨æœ¬åœ°é›»è…¦å®‰è£å¥½ XCode è·ŸåŸºæœ¬ç’°å¢ƒå¾Œè¨»å†Šã€å•Ÿç”¨ Runnerã€Action Worflow YAML ä¸­æŠŠ <code class="language-plaintext highlighter-rouge">runs-on</code> æ”¹æˆ <code class="language-plaintext highlighter-rouge">[self-hosted]</code> å³å¯ã€‚</em></p></blockquote><p>å¤šå€‹ Runner åœ¨åŒä¸€å°é›»è…¦çš„å•é¡Œï¼Œæˆ‘å€‘å¤šåŠå·²åœ¨ä¸Šé¢çš„ Actions è£¡è§£æ±ºäº†ï¼Œä¾‹å¦‚æŠŠæ‰€æœ‰ä¾è³´çš„å…±ç”¨ç›®éŒ„éƒ½æ”¹æˆæœ¬åœ°ç›®éŒ„ï¼Œé‚„æœ‰ä¸€å€‹æ¸¬è©¦æœƒé‡åˆ°çš„å•é¡Œè¦è§£æ±ºï¼Œå°±æ˜¯æ¶æ¨¡æ“¬å™¨å•é¡Œï¼šã€Œ <strong>ç•¶å…©å€‹æ¸¬è©¦ Job è¢«å…©å€‹ Runner åœ¨åŒä¸€å°æ©Ÿå™¨ä¸ŠåŒæ™‚æª¢ä¾†åšï¼Œå¦‚æœæŒ‡å®šåŒå€‹æ¨¡æ“¬å™¨å°±æœƒäº’ç›¸å¹²æ“¾å°è‡´æ¸¬è©¦å¤±æ•—ã€‚ã€</strong></p><p>è§£æ±ºæ–¹æ³•ä¹Ÿå¾ˆå®¹æ˜“ï¼Œå°±æ˜¯ç‚ºå€‹åˆ¥ Runner éƒ½è¨­å®šä¸€å°æ¨¡æ“¬å™¨ã€‚</p><h4 id="å¤šå€‹-runner-åœ¨åŒå°æ©Ÿå™¨çš„æ¨¡æ“¬å™¨è¨­å®š"><span class="me-2">å¤šå€‹ Runner åœ¨åŒå°æ©Ÿå™¨çš„æ¨¡æ“¬å™¨è¨­å®š</span><a href="#å¤šå€‹-runner-åœ¨åŒå°æ©Ÿå™¨çš„æ¨¡æ“¬å™¨è¨­å®š" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>å‡è¨­æˆ‘ <strong>åŒä¸€å°é›»è…¦ä¸Šæœ‰å…©å€‹ Runner</strong> åœ¨ä¸¦è¡Œæ¥æ”¶ä»»å‹™ï¼š</p><ul><li><code class="language-plaintext highlighter-rouge">ZhgChgLideMacBook-Pro-Runner-A</code><li><code class="language-plaintext highlighter-rouge">ZhgChgLideMacBook-Pro-Runner-B</code></ul><p><a href="/assets/4b001d2e8440/1*3ptg9Tl5fBbEIYB4kgh0kw.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*3ptg9Tl5fBbEIYB4kgh0kw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MTkiIGhlaWdodD0iMzMzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>åœ¨ XCode æ¨¡æ“¬å™¨è¨­å®šæˆ‘å€‘å°±éœ€è¦æ–°å¢å…©å€‹æ¨¡æ“¬å™¨ï¼š</p><p><a href="/assets/4b001d2e8440/1*k9bR2C12Wk11HAKKiYJ2zg.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*k9bR2C12Wk11HAKKiYJ2zg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDM3IiBoZWlnaHQ9IjY5NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/4b001d2e8440/1*iigArewZEW0063Q6xwZn7g.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*iigArewZEW0063Q6xwZn7g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMjIiIGhlaWdodD0iMjgxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>å‹è™Ÿã€iOS ç‰ˆæœ¬åŒæ¸¬è©¦ç’°å¢ƒ</ul><p><strong>CI-Testing.yml ä¸­æ¸¬è©¦æ­¥é©Ÿæ”¹æˆï¼š</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="c"># åŸ·è¡Œ Fastlane Unit æ¸¬è©¦ Lane</span>
      - name: Run Tests
        <span class="nb">id</span>: testing
        <span class="c"># æŒ‡å®šå·¥ä½œç›®éŒ„ï¼Œé€™æ¨£å¾ŒçºŒæŒ‡ä»¤å°±ä¸ç”¨åœ¨ç‰¹åˆ¥ cd ./Product/</span>
        working-directory: ./Product/
        <span class="nb">env</span>:
          <span class="c"># ...</span>
          <span class="c"># Repo -&gt; Settings -&gt; Actions secrets and variables -&gt; variables</span>
          <span class="c"># æ¨¡æ“¬å™¨çš„ iOS ç‰ˆæœ¬</span>
          SIMULATOR_IOS_VERSION: <span class="k">${</span><span class="p">{ vars.SIMULATOR_IOS_VERSION </span><span class="k">}</span><span class="o">}</span>

          <span class="c"># ç•¶å‰ Runner åç¨±</span>
          RUNNER_NAME: <span class="k">${</span><span class="p">{ runner.name </span><span class="k">}</span><span class="o">}</span>
          
          <span class="c"># ...</span>
        run: |

          <span class="c"># ...</span>
          bundle <span class="nb">exec </span>fastlane <span class="k">${</span><span class="nv">TEST_LANE</span><span class="k">}</span> device:<span class="s2">"</span><span class="k">${</span><span class="nv">RUNNER_NAME</span><span class="k">}</span><span class="s2"> (</span><span class="k">${</span><span class="nv">SIMULATOR_IOS_VERSION</span><span class="k">}</span><span class="s2">)"</span> | <span class="nb">tee</span> <span class="s2">"</span><span class="nv">$RUNNER_TEMP</span><span class="s2">/testing_output.txt"</span>
          <span class="c"># ...</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">device</code> <strong>æ”¹æˆ</strong> <code class="language-plaintext highlighter-rouge">${RUNNER_NAME} (${SIMULATOR_IOS_VERSION})</code><li><code class="language-plaintext highlighter-rouge">SIMULATOR_IOS_VERSION</code> é‚„æ˜¯çµ±ä¸€çœ‹ Repo variables è®Šæ•¸</ul><p><strong>çµ„åˆçµæœå°±æœƒæ˜¯(ä»¥ 18.4 ç‚ºä¾‹)ï¼š</strong></p><ul><li>Runner: <code class="language-plaintext highlighter-rouge">ZhgChgLideMacBook-Pro-Runner-A</code> æ¨¡æ“¬å™¨: <strong>ZhgChgLideMacBook-Pro-Runner-A(18.4)</strong><li>Runner: <code class="language-plaintext highlighter-rouge">ZhgChgLideMacBook-Pro-Runner-B</code> æ¨¡æ“¬å™¨: <strong>ZhgChgLideMacBook-Pro-Runner-B(18.4)</strong></ul><p>é€™æ¨£å…©å€‹ Runner åŒæ™‚åœ¨åŸ·è¡Œæ¸¬è©¦æ™‚å°±æœƒèµ·å…©å€‹æ¨¡æ“¬å™¨è‡ªå·±è·‘è‡ªå·±çš„äº†ã€‚</p><h4 id="å®Œæ•´å°ˆæ¡ˆ-repo"><span class="me-2">å®Œæ•´å°ˆæ¡ˆ Repo</span><a href="#å®Œæ•´å°ˆæ¡ˆ-repo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/ac0aa481002311af0e60721a17f7533f54be5d308c641c48ea717e12a1f3d725/ZhgChgLi/github-actions-ci-cd-demo" alt="" loading="lazy"></a></p><h3 id="è£œå……-ssh-agent-è¨­å®š--for-fastlane-match-or-private-cocoapods-repo"><span class="me-2">è£œå…… SSH Agent è¨­å®š â€” For Fastlane Match or Private CocoaPods Repo</span><a href="#è£œå……-ssh-agent-è¨­å®š--for-fastlane-match-or-private-cocoapods-repo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>åœ¨ä½¿ç”¨ Fastlane Match æˆ– Private CocoaPods Repoï¼Œå› ç‚ºæ˜¯åœ¨å¦ä¸€å€‹ Private Repo ç•¶ä¸­ï¼Œç•¶å‰ Repo/Action ç’°å¢ƒç„¡æ³•ç›´æ¥ git cloneï¼Œéœ€è¦ä½¿ç”¨ ssh agent è¨­å®šå¥½ç’°å¢ƒï¼Œåœ¨ Action åŸ·è¡Œæ™‚æ‰æœ‰æ¬Šé™æ“ä½œã€‚</p><h4 id="step-1-ç”¢ç”Ÿ-ssh-key"><span class="me-2">Step 1. ç”¢ç”Ÿ SSH Key</span><a href="#step-1-ç”¢ç”Ÿ-ssh-key" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/4b001d2e8440/1*kPWl9hombBgQ15i-n2sY2A.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*kPWl9hombBgQ15i-n2sY2A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iNDgzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh-keygen <span class="nt">-t</span> ed25519 <span class="nt">-C</span> <span class="s2">"zhgchgli@gmail.com"</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">Enter file in which to save the key (/Users/zhgchgli/.ssh/id_ed25519):</code> /Users/zhgchgli/Downloads/zhgchgli</p><ul><li>è¼¸å…¥åˆ°ä¸‹è¼‰è·¯å¾‘æ–¹ä¾¿æˆ‘å€‘æ‹·è²å…§å®¹</ul><p><code class="language-plaintext highlighter-rouge">Enter passphrase for â€œ/Users/zhgchgli/Downloads/zhgchgliâ€ (empty for no passphrase):</code></p><ul><li><strong>ç•™ç©ºï¼š</strong> CI/CD ä½¿ç”¨ï¼Œç„¡æ³•åœ¨ CLI äº¤äº’ä¸‹è¼¸å…¥ Passphraseï¼Œ <strong>å› æ­¤è«‹ç•™ç©º</strong><li>ç”¢ç”Ÿå®Œç•¢ ( .pub/private_key)</ul><p><a href="/assets/4b001d2e8440/1*aF5P6EK9Hfv-CI3MRZ8MCA.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*aF5P6EK9Hfv-CI3MRZ8MCA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMjAiIGhlaWdodD0iNTEiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><h4 id="step-2-åˆ°-private-repo-è¨­å®š-deploy-key"><span class="me-2">Step 2. åˆ° Private Repo è¨­å®š Deploy Key</span><a href="#step-2-åˆ°-private-repo-è¨­å®š-deploy-key" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/4b001d2e8440/1*3K6JvCHa23QfvWoNq2xdBQ.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*3K6JvCHa23QfvWoNq2xdBQ.webp" alt="github-actions-ci-cd-demo-certificates Repo" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTcyIiBoZWlnaHQ9Ijc4MSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>github-actions-ci-cd-demo-certificates Repo</p><p>Settings â†’ Security â†’ Deploy keys â†’ Add deploy keyã€‚</p><ul><li>Title: è¼¸å…¥ Key åç¨±<li>Key: <code class="language-plaintext highlighter-rouge">è²¼ä¸Š .pub Key å…§å®¹</code></ul><p>å®Œæˆã€‚</p><p><a href="/assets/4b001d2e8440/1*Xo_g-AchEk0j4SGXOmBuxg.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*Xo_g-AchEk0j4SGXOmBuxg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTY4IiBoZWlnaHQ9IjgxNCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h4 id="step-3-å›-action-çš„-repo-è¨­å®š-ssh-private-key-to-secrets"><span class="me-2">Step 3. å› Action çš„ Repo è¨­å®š SSH Private Key to Secrets</span><a href="#step-3-å›-action-çš„-repo-è¨­å®š-ssh-private-key-to-secrets" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/4b001d2e8440/1*Jm92pQHMOImQzZtmmvd1ng.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*Jm92pQHMOImQzZtmmvd1ng.webp" alt="github-actions-ci-cd-demo Repo" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTc0IiBoZWlnaHQ9Ijg5OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>github-actions-ci-cd-demo Repo</p><p>Settings â†’ Secrets and variables â†’ Actions â†’ New repository secretã€‚</p><ul><li>Name: è¼¸å…¥å¯†é‘°è®Šæ•¸åç¨± <code class="language-plaintext highlighter-rouge">SSH_PRIVATE_KEY</code><li>Secret: <code class="language-plaintext highlighter-rouge">è²¼ä¸Š private_key å…§å®¹</code></ul><p>å®Œæˆã€‚</p><h4 id="step-4-ssh-agent-è¨­å®šå®Œæˆä¾†é©—è­‰ä¸€ä¸‹-git-clone-private-repo-çš„æ¬Šé™"><span class="me-2">Step 4. SSH Agent è¨­å®šå®Œæˆï¼Œä¾†é©—è­‰ä¸€ä¸‹ Git Clone Private Repo çš„æ¬Šé™</span><a href="#step-4-ssh-agent-è¨­å®šå®Œæˆä¾†é©—è­‰ä¸€ä¸‹-git-clone-private-repo-çš„æ¬Šé™" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions/workflows/Demo-Git-Clone-Private-Repo.yml" target="_blank"><strong>Demo-Git-Clone-Private-Repo.yml</strong></a> <strong>:</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="å·²è¤‡è£½ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Demo Git Clone Private Repo</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">clone-private-repo</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Git Clone Private Repo</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">30</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># ğŸ” å•Ÿç”¨ SSH Agent ä¸¦åŠ å…¥ç§é‘°</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Setup SSH Agent</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">webfactory/ssh-agent@v0.9.0</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">ssh-private-key</span><span class="pi">:</span> <span class="s">${{ secrets.SSH_PRIVATE_KEY }}</span>

      <span class="c1"># ğŸ›¡ï¸ å°‡ github.com åŠ å…¥ known_hosts ä»¥é¿å… host verification éŒ¯èª¤</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Add GitHub to known_hosts</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">mkdir -p ~/.ssh</span>
          <span class="s">ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span>
      <span class="c1"># ğŸ“¦ ä½¿ç”¨ SSH clone private repo ä¸¦é©—è­‰</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Clone and Verify Private Repo</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">git clone git@github.com:ZhgChgLi/github-actions-ci-cd-demo-certificates.git ./fakeMatch/</span>
          <span class="s">if [ -d "./fakeMatch/.git" ]; then</span>
            <span class="s">echo "âœ… Repo cloned successfully into ./fakeMatch/"</span>
            <span class="s">cd ./fakeMatch</span>
            <span class="s">echo "ğŸ“Œ Current commit: $(git rev-parse --short HEAD)"</span>
          <span class="s">else</span>
            <span class="s">echo "âŒ Clone failed. SSH Agent may not be configured properly."</span>
            <span class="s">exit 1</span>
          <span class="s">fi</span>
</pre></table></code></div></div><p>å¯ä»¥ç”¨ä»¥ä¸Š Action é©—è­‰ä¸€ä¸‹æ˜¯å¦è¨­å®šæˆåŠŸã€‚</p><p><a href="/assets/4b001d2e8440/1*YLbr7l0FBSOYx_fQT-tiCA.webp" class="popup img-link blur"><img data-src="/assets/4b001d2e8440/1*YLbr7l0FBSOYx_fQT-tiCA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY5MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>æˆåŠŸï¼Œå¾ŒçºŒ <code class="language-plaintext highlighter-rouge">fastlane match</code> or <code class="language-plaintext highlighter-rouge">pod install</code> private pods æ‡‰è©²å°±èƒ½æ­£ç¢ºåŸ·è¡Œã€‚</p><h3 id="ç¸½çµ"><span class="me-2">ç¸½çµ</span><a href="#ç¸½çµ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>é€™ç¯‡æ–‡ç« è©³ç´°ç´€éŒ„äº†ä½¿ç”¨ GitHub Actions é–‹ç™¼å®Œæ•´çš„ iOS CI/CD æµç¨‹ï¼Œä¸‹ä¸€ç¯‡å°‡å„ªåŒ–ä½¿ç”¨è€…ç«¯(å·¥ç¨‹å¸«/PM/è¨­è¨ˆå¸«)é«”é©—ï¼Œ <strong>å®Œå–„ Slack é€šçŸ¥åŠä½¿ç”¨ Google Apps Script Web App ä¸²æ¥ GitHub Actions æ‰“é€ å…è²»æ˜“ç”¨çš„è·¨åœ˜éšŠæ‰“åŒ…å¹³å°å·¥å…·ã€‚</strong></p><h3 id="ç³»åˆ—æ–‡ç« "><span class="me-2">ç³»åˆ—æ–‡ç« ï¼š</span><a href="#ç³»åˆ—æ–‡ç« " class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><a href="https://zhgchg.li/posts/zrealm-dev/ci-cd-%E6%98%AF%E4%BB%80%E9%BA%BC-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A9%A9%E5%AE%9A%E9%96%8B%E7%99%BC%E5%9C%98%E9%9A%8A%E7%9A%84%E9%97%9C%E9%8D%B5%E6%B5%81%E7%A8%8B%E8%88%87%E5%B7%A5%E5%85%B7%E9%81%B8%E6%93%87-c008a9e8ceca/"><strong>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šCI/CD æ˜¯ä»€éº¼ï¼Ÿå¦‚ä½•é€é CI/CD æ‰“é€ ç©©å®šé«˜æ•ˆçš„é–‹ç™¼åœ˜éšŠï¼Ÿå·¥å…·é¸æ“‡ï¼Ÿ</strong></a><li><a href="https://zhgchg.li/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"><strong>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆäºŒï¼‰ï¼šGitHub Actions èˆ‡ self-hosted Runner ä½¿ç”¨èˆ‡å»ºç½®å¤§å…¨</strong></a><li><a href="https://zhgchg.li/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/"><strong>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å¯¦ä½œ App å°ˆæ¡ˆçš„ CI èˆ‡ CD å·¥ä½œæµç¨‹</strong></a><li><a href="https://zhgchg.li/posts/zrealm-dev/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87-4273e57e7148/"><strong>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆå››ï¼‰ï¼šä½¿ç”¨ Google Apps Script Web App ä¸²æ¥ GitHub Actions å»ºç½®å…è²»æ˜“ç”¨çš„æ‰“åŒ…å·¥å…·å¹³å°</strong></a></ul><h4 id="-buy-me-a-beer-on-paypal"><span class="me-2"><a href="/contact" target="_blank">ğŸº Buy me a beer on PayPal</a></span><a href="#-buy-me-a-beer-on-paypal" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p><a href="/contact" target="_blank"><strong><em>æœ¬ç³»åˆ—æ–‡ç« èŠ±è²»äº†å¤§é‡çš„æ™‚é–“ç²¾åŠ›æ’°å¯«ï¼Œå¦‚æœå…§å®¹å°æ‚¨æœ‰å¹«åŠ©ã€å°æ‚¨çš„åœ˜éšŠæœ‰å¯¦è³ªæå‡å·¥ä½œæ•ˆç‡èˆ‡ç”¢å“å“è³ªï¼›æ­¡è¿è«‹æˆ‘å–æ¯å’–å•¡ï¼Œæ„Ÿè¬æ”¯æŒï¼</em></strong></a></p></blockquote><p><a href="/contact" target="_blank" rel="noopener" style="display:block;margin:12px 0;text-align:center;align-items:center;justify-content:center;padding:10px 22px;border-radius:999px;text-decoration:none;background:linear-gradient(135deg,#ffd54f,#ffb300);color:#000;font-size:16px;font-weight:700;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;box-shadow:0 4px 10px rgba(0,0,0,.15);cursor:pointer;transition:all .15s ease;width:350px" onmouseover="this.style.background=&quot;linear-gradient(135deg,#FFE082,#FFC107)&quot;,this.style.transform=&quot;translateY(-1px)&quot;,this.style.boxShadow=&quot;0 6px 14px rgba(0,0,0,0.2)&quot;" onmouseout="this.style.background=&quot;linear-gradient(135deg,#FFD54F,#FFB300)&quot;,this.style.transform=&quot;translateY(0)&quot;,this.style.boxShadow=&quot;0 4px 10px rgba(0,0,0,0.15)&quot;" lqip="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MDAiIGhlaWdodD0iNzAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+">ğŸº Buy me a beer on PayPal</a></p><p><a href="/contact" target="_blank">ğŸº Buy me a beer on PayPal</a></p><p>æœ‰ä»»ä½•å•é¡ŒåŠæŒ‡æ•™æ­¡è¿ <a href="https://www.zhgchg.li/contact" target="_blank">èˆ‡æˆ‘è¯çµ¡</a> ã€‚</p><script src="/assets/clipboard.min.js"></script><div style=" display:flex; align-items:center; gap:10px; border:1px solid #e5e7eb; background:#f9fafb; padding:12px 16px; border-radius:12px; margin:18px 0; box-shadow:0 3px 8px rgba(0,0,0,0.05); width: auto;"> <input id="share-url" value="https://zhgchg.li/posts/4b001d2e8440/" readonly="" style=" flex:1; border:1px solid #d1d5db; border-radius:8px; padding:10px 12px; font-size:0.9rem; background:#ffffff; color:#111827; outline:none; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; " /> <button class="btn" data-clipboard-target="#share-url" id="copy-btn" style=" border:none; background:#3b82f6; color:white; padding:10px 16px; border-radius:10px; cursor:pointer; font-size:0.85rem; font-weight:600; display:flex; align-items:center; gap:6px; transition:all .15s ease; box-shadow:0 2px 5px rgba(59,130,246,0.35); " onmouseover="this.style.opacity='0.92';" onmouseout="this.style.opacity='1';"> <span style="font-size:1rem;">ğŸ”—</span> <span id="copy-btn-text">Copy link to share!</span> </button></div><script> new ClipboardJS('.btn'); var btn = document.getElementById("copy-btn"); var text = document.getElementById("copy-btn-text"); btn.addEventListener("click", function () { text.textContent = "Copied!"; btn.style.background = "#16a34a"; btn.style.boxShadow = "0 2px 6px rgba(22,163,74,0.35)"; setTimeout(() => { text.textContent = "Copy link to share!"; btn.style.background = "#3b82f6"; btn.style.boxShadow = "0 2px 5px rgba(59,130,246,0.35)"; }, 1500); });</script><hr /><p><a href="/contact" target="_blank" rel="noopener" style="display:block;margin:12px 0;text-align:center;align-items:center;justify-content:center;padding:10px 22px;border-radius:999px;text-decoration:none;background:linear-gradient(135deg,#ffd54f,#ffb300);color:#000;font-size:16px;font-weight:700;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;box-shadow:0 4px 10px rgba(0,0,0,.15);cursor:pointer;transition:all .15s ease;width:350px" onmouseover="this.style.background=&quot;linear-gradient(135deg,#FFE082,#FFC107)&quot;,this.style.transform=&quot;translateY(-1px)&quot;,this.style.boxShadow=&quot;0 6px 14px rgba(0,0,0,0.2)&quot;" onmouseout="this.style.background=&quot;linear-gradient(135deg,#FFD54F,#FFB300)&quot;,this.style.transform=&quot;translateY(0)&quot;,this.style.boxShadow=&quot;0 4px 10px rgba(0,0,0,0.15)&quot;">ğŸº Buy me a beer on PayPal</a></p><blockquote class="prompt-tip"><p>ğŸ‘‰ğŸ‘‰ğŸ‘‰ <a href="https://medium.com/@zhgchgli" target="_blank"><strong>Follow Me On Medium!</strong> (1,053+ Followers)</a> ğŸ‘ˆğŸ‘ˆğŸ‘ˆ</p></blockquote><blockquote class="prompt-info"><p>æœ¬æ–‡é¦–æ¬¡ç™¼è¡¨æ–¼ Medium (<a href="https://medium.com/p/4b001d2e8440" target="_blank"><strong>é»æ­¤æŸ¥çœ‹åŸå§‹ç‰ˆæœ¬</strong></a>)ï¼Œç”± <a href="/posts/tools/medium-to-jekyll/" target="_blank">ZMediumToMarkdown</a> æä¾›è‡ªå‹•è½‰æ›èˆ‡åŒæ­¥æŠ€è¡“ã€‚</p></blockquote><blockquote class="prompt-info"><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/zh-tw/zmediumtomarkdown/2025-07-07-4b001d2e8440.md" target="_blank">Improve this page on Github.</a></p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/cicd/" class="post-tag no-text-decoration" >cicd</a> <a href="/tags/github-actions/" class="post-tag no-text-decoration" >github-actions</a> <a href="/tags/firebase/" class="post-tag no-text-decoration" >firebase</a> <a href="/tags/cicd-pipeline/" class="post-tag no-text-decoration" >cicd-pipeline</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> æœ¬æ–‡ç”±ä½œè€…ä»¥ <a href="https://creativecommons.org/licenses/by/4.0/deed.zh-hant"> CC BY 4.0 </a> æˆæ¬Šã€‚</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">åˆ†äº«</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=GitHub%20Actions%20iOS%20CI/CD%EF%BD%9C%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE%E3%80%81%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2F4b001d2e8440%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=GitHub%20Actions%20iOS%20CI/CD%EF%BD%9C%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE%E3%80%81%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2F4b001d2e8440%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2F4b001d2e8440%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="è¤‡è£½é€£çµ" data-title-succeed="é€£çµå·²æˆåŠŸè¤‡è£½ï¼" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">æœ€è¿‘æ›´æ–°</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/ios-certificates-identifiers%E8%88%87profiles%E8%A9%B3%E8%A7%A3-fastlane-match%E7%B5%B1%E4%B8%80%E7%AE%A1%E7%90%86%E6%86%91%E8%AD%89%E8%88%87ci-cd%E6%95%B4%E5%90%88%E5%AF%A6%E6%88%B0-823ac523ccc8/">iOS Certificates, Identifiers & Profiles æ˜¯ä»€éº¼åŠ Fastlane Match çµ±ä¸€ç®¡ç†æ†‘è­‰èˆ‡ CI/CD çš„ä¸€äº›ç­†è¨˜</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/line-bank-%E5%85%A5%E9%87%91-firstrade-%E6%95%99%E5%AD%B8-%E5%BF%AB%E9%80%9F%E5%88%B0%E5%B8%B3-%E4%BD%8E%E6%89%8B%E7%BA%8C%E8%B2%BB150%E5%85%83-%E5%B8%B3%E6%88%B6%E5%8D%87%E7%B4%9A%E8%88%87%E6%89%8B%E7%BA%8C%E8%B2%BB%E8%A3%9C%E5%8A%A9%E7%94%B3%E8%AB%8B%E5%85%A8%E6%94%BB%E7%95%A5-e4d139fe0685/">æ‰‹æŠŠæ‰‹æ•™å­¸ â€” LINE Bank å…¥é‡‘ Firstrade å¿«é€Ÿåˆ°å¸³ã€æ‰‹çºŒè²»åªè¦ 150 å…ƒåŠå¸³æˆ¶å‡ç´š/ç´„å®šè½‰å¸³/æ‰‹çºŒè²»è£œåŠ©ç”³è«‹æ•™å­¸</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/">CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šä½¿ç”¨ GitHub Actions å¯¦ä½œ App iOS CI èˆ‡ CD å·¥ä½œæµç¨‹</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/medium-api-%E7%88%AC%E5%8F%96%E8%B3%87%E6%96%99%E8%88%87%E7%AA%81%E7%A0%B4-cloudflare-%E9%98%B2%E8%AD%B7-%E5%AE%8C%E6%95%B4-graphql-%E6%93%8D%E4%BD%9C%E6%95%99%E5%AD%B8-88f0fb935120/">Medium API è³‡æ–™çˆ¬èŸ²èˆ‡ Cloudflare æ”»é˜²çš„å¿ƒè·¯æ­·ç¨‹</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/app-store-connect-api-webhook-%E4%B8%B2%E6%8E%A5-%E6%8F%90%E5%8D%87-ios-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E6%95%88%E7%8E%87%E8%88%87%E9%80%9A%E7%9F%A5%E6%B5%81%E7%A8%8B-7c0974856393/">CI/CD ä½¿ç”¨ App Store Connect API Webhook ä¸²æ¥è‡ªå‹•åŒ–å·¥ä½œæµç¨‹</a></ul></section><section><h2 class="panel-heading">ç†±é–€æ¨™ç±¤</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">ç”Ÿæ´»</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E9%96%8B%E7%AE%B1/">é–‹ç®±</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/cicd/">cicd</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">ç« ç¯€ç›®éŒ„ ğŸ”–</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">å»¶ä¼¸é–±è®€</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1751458952" data-df="YYYY å¹´ M æœˆ D æ—¥" > 2025 å¹´ 07 æœˆ 02 æ—¥ </time><h4 class="pt-0 my-2">GitHub Actionsï½œSelf-hosted Runner è©³è§£èˆ‡å¯¦æˆ°æ¡ˆä¾‹ï½œCI/CD è‡ªå‹•åŒ–å·¥ä½œæµç¨‹å»ºç½®</h4><div class="text-muted"><p>é‡å°é–‹ç™¼åœ˜éšŠè‡ªå‹•åŒ–éœ€æ±‚ï¼Œè§£æ GitHub Actions èˆ‡ Self-hosted Runner æ¶æ§‹èˆ‡è¨­å®šï¼Œä¸¦é€éä¸‰å¤§å¯¦æˆ°æ¡ˆä¾‹æ•™ä½ å¿«é€Ÿå»ºç«‹è‡ªå‹•æ¨™è¨˜ PRã€æŒ‡æ´¾è² è²¬äººåŠæ¯æ—¥ PR çµ±è¨ˆé€šçŸ¥ï¼Œæå‡ CI/CD åŸ·è¡Œæ•ˆç‡èˆ‡æˆæœ¬å„ªåŒ–ã€‚</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/ci-cd-%E6%98%AF%E4%BB%80%E9%BA%BC-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A9%A9%E5%AE%9A%E9%96%8B%E7%99%BC%E5%9C%98%E9%9A%8A%E7%9A%84%E9%97%9C%E9%8D%B5%E6%B5%81%E7%A8%8B%E8%88%87%E5%B7%A5%E5%85%B7%E9%81%B8%E6%93%87-c008a9e8ceca/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1751267416" data-df="YYYY å¹´ M æœˆ D æ—¥" > 2025 å¹´ 06 æœˆ 30 æ—¥ </time><h4 class="pt-0 my-2">CI/CD æ˜¯ä»€éº¼ï½œæ‰“é€ é«˜æ•ˆç©©å®šé–‹ç™¼åœ˜éšŠçš„é—œéµæµç¨‹èˆ‡å·¥å…·é¸æ“‡</h4><div class="text-muted"><p>é‡å° iOS App åœ˜éšŠï¼Œè§£æç„¡ CI/CD æµç¨‹çš„ç—›é»ï¼Œé€é GitHub Actions èˆ‡ self-hosted Runner è‡ªå‹•åŒ–æ¸¬è©¦èˆ‡æ‰“åŒ…ï¼Œæ¸›å°‘äººåŠ›æµªè²»èˆ‡éŒ¯èª¤ï¼Œæå‡åœ˜éšŠç©©å®šæ€§èˆ‡é–‹ç™¼æ•ˆç‡ï¼Œæ­é… Google Apps Script Web App å¯¦ç¾è·¨è·èƒ½ä¾¿æ·æ“ä½œã€‚</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/ios-certificates-identifiers%E8%88%87profiles%E8%A9%B3%E8%A7%A3-fastlane-match%E7%B5%B1%E4%B8%80%E7%AE%A1%E7%90%86%E6%86%91%E8%AD%89%E8%88%87ci-cd%E6%95%B4%E5%90%88%E5%AF%A6%E6%88%B0-823ac523ccc8/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1767459826" data-df="YYYY å¹´ M æœˆ D æ—¥" > 2026 å¹´ 01 æœˆ 04 æ—¥ </time><h4 class="pt-0 my-2">iOS Certificates, Identifiers & Profiles æ˜¯ä»€éº¼åŠ Fastlane Match çµ±ä¸€ç®¡ç†æ†‘è­‰èˆ‡ CI/CD çš„ä¸€äº›ç­†è¨˜</h4><div class="text-muted"><p>ä»‹ç´¹ Certificates, Identifiers &amp; Profiles ä¹‹é–“çš„é—œä¿‚èˆ‡ä½¿ç”¨ Fastlane Match çµ±ä¸€ç®¡ç†ç°½ç™¼æ†‘è­‰ä¸¦æ•´åˆé€² CI/CD å·¥ä½œæµç¨‹çš„ç´€éŒ„ã€‚</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" class="btn btn-outline-primary" aria-label="ä¸Šä¸€ç¯‡" ><p>GitHub Actionsï½œSelf-hosted Runner è©³è§£èˆ‡å¯¦æˆ°æ¡ˆä¾‹ï½œCI/CD è‡ªå‹•åŒ–å·¥ä½œæµç¨‹å»ºç½®</p></a> <a href="/posts/zrealm-dev/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87-4273e57e7148/" class="btn btn-outline-primary" aria-label="ä¸‹ä¸€ç¯‡" ><p>CI/CD å¯¦æˆ°æŒ‡å—ï¼ˆå››ï¼‰ï¼šä½¿ç”¨ Google Apps Script Web App ä¸²æ¥ GitHub Actions å»ºç½®å…è²»æ˜“ç”¨çš„æ‰“åŒ…å·¥å…·å¹³å°</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>Â© <time>2026</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="é™¤éå¦æœ‰è¨»æ˜ï¼Œæœ¬ç¶²ç«™ä¸Šçš„æ‰€æœ‰æ–‡ç« çš†ç”±ä½œè€…ä¾æ“š å‰µç”¨ CC å§“åæ¨™ç¤º 4.0 åœ‹éš›æˆæ¬Šæ¢æ¬¾ï¼ˆCC BY 4.0ï¼‰æˆæ¬Šä½¿ç”¨ã€‚" >ç‰ˆæ¬Šæ‰€æœ‰ã€‚</span> <br/> ç€è¦½æ¬¡æ•¸: <u>800,082+</u>, æœ€å¾Œæ›´æ–°æ™‚é–“: <u>2026-01-13 11:03:04 +08:00</u></p><p>æœ¬ç«™ä½¿ç”¨ <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> ä¸»é¡Œå»ºç½®æ–¼ <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>ã€‚<br/> Medium æ–‡ç« ç”± <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a> è½‰æ›è€Œæˆã€‚</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">ç†±é–€æ¨™ç±¤</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">ç”Ÿæ´»</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E9%96%8B%E7%AE%B1/">é–‹ç®±</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/cicd/">cicd</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">ç™¼ç¾æœ‰æ–°çš„å…§å®¹ç‰ˆæœ¬ã€‚</p><button type="button" class="btn btn-primary" aria-label="Update"> æ›´æ–° </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'zh-TW';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'General', 'data-category-id': 'DIC_kwDOHdowL84CU-q5', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">æ‰¾ä¸åˆ°ç¬¦åˆçš„çµæœã€‚</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
