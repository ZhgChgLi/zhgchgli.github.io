<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="CI/CD 打包工具平台｜使用 Google Apps Script Web App 串接 GitHub Actions 提升跨團隊效率" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="打造免費且易用的打包工具平台，解決非工程人員操作 GitHub Actions 的複雜性與權限控管問題，透過 Google Apps Script Web App 整合 GitHub、Slack、Firebase 等 API，實現跨團隊任務單打包與即時進度通知，提升開發與驗證效率。" /><meta property="og:description" content="打造免費且易用的打包工具平台，解決非工程人員操作 GitHub Actions 的複雜性與權限控管問題，透過 Google Apps Script Web App 整合 GitHub、Slack、Firebase 等 API，實現跨團隊任務單打包與即時進度通知，提升開發與驗證效率。" /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87-4273e57e7148/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87-4273e57e7148/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/4273e57e7148/1*kJhD4PCaIphZ9G1BG_dtNw.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-07-10T20:30:51+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/4273e57e7148/1*kJhD4PCaIphZ9G1BG_dtNw.webp" /><meta property="twitter:title" content="CI/CD 打包工具平台｜使用 Google Apps Script Web App 串接 GitHub Actions 提升跨團隊效率" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://medium.com/@zhgchgli/"},"dateModified":"2025-07-12T12:35:07+08:00","datePublished":"2025-07-10T20:30:51+08:00","description":"打造免費且易用的打包工具平台，解決非工程人員操作 GitHub Actions 的複雜性與權限控管問題，透過 Google Apps Script Web App 整合 GitHub、Slack、Firebase 等 API，實現跨團隊任務單打包與即時進度通知，提升開發與驗證效率。","headline":"CI/CD 打包工具平台｜使用 Google Apps Script Web App 串接 GitHub Actions 提升跨團隊效率","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+","url":"https://zhgchg.li/assets/4273e57e7148/1*kJhD4PCaIphZ9G1BG_dtNw.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87-4273e57e7148/"},"url":"https://zhgchg.li/posts/zrealm-dev/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87-4273e57e7148/"}</script><title>CI/CD 打包工具平台｜使用 Google Apps Script Web App 串接 GitHub Actions 提升跨團隊效率 | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script><link rel="alternate" hreflang="en" href="/posts/zrealm-dev/en/ci-cd-guide-integrate-google-apps-script-web-app-with-github-actions-for-free-packaging-platform-4273e57e7148/"><link rel="alternate" hreflang="zh-Hans" href="/posts/zrealm-dev/zh-cn/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9B%A2%E9%98%9F%E6%95%88%E7%8E%87-4273e57e7148/"><link rel="alternate" hreflang="zh-Hant" href="/posts/zrealm-dev/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87-4273e57e7148/"><link rel="alternate" hreflang="x-default" href="/posts/zrealm-dev/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87-4273e57e7148/"> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"FAQPage","mainEntity":[{"@type":"Question","name":"如何用 Google Apps Script Web App 串接 GitHub Actions 建置跨團隊共用的打包工具平台？","acceptedAnswer":{"@type":"Answer","text":"利用 Google Apps Script Web App 作為中繼站，整合 GitHub Actions workflow_dispatch 觸發打包，並串接 Slack、Firebase App Distribution 等 API，提供非工程人員友善的打包表單和進度查看，實現跨團隊安全且免費的打包平台。"}},{"@type":"Question","name":"Google Apps Script Web App 在建置 CI/CD 打包工具平台有哪些優缺點？","acceptedAnswer":{"@type":"Answer","text":"優點包括免費、無需架設伺服器、權限控管依 Google Workspace、易整合 Google 生態服務與第三方 API、快速上線且穩定；缺點是版本控管有限、不支援檔案及金鑰管理、無法做到完全響應式設計、專案綁定個人帳號、多人同時開發不便，但對中繼站打包平台影響不大。"}},{"@type":"Question","name":"如何確保非工程人員安全且方便地使用 GitHub Actions 打包流程？","acceptedAnswer":{"@type":"Answer","text":"透過 Google Apps Script Web App 建立中繼站，限制存取權限至組織內帳號，提供簡化表單整合任務單與 Pull Request，避免直接授權 GitHub Repo，並搭配 Slack 通知與 Firebase App Distribution 下載連結，提升操作友善度與資安控管。"}},{"@type":"Question","name":"如何利用 Firebase App Distribution API 與 GitHub Actions 結合在打包平台呈現下載連結？","acceptedAnswer":{"@type":"Answer","text":"在 GitHub Actions 打包流程中將 Job Run ID 包含在 Release Note，Google Apps Script 透過 GitHub API 取得執行紀錄，再用該 ID 查詢 Firebase App Distribution Release Notes，無需資料庫即可串接並呈現對應下載連結，方便用戶直接點擊安裝。"}},{"@type":"Question","name":"如何快速部署並上線自己的 Google Apps Script 打包工具平台？","acceptedAnswer":{"@type":"Answer","text":"建立 Google Apps Script 專案，複製範例程式碼並調整金鑰與 Token，部署為網頁應用程式並設定存取權限為組織內使用者，首次使用需授權，開發階段可使用測試部署快速驗證，完成後更新正式部署版本即可分享給團隊成員使用。"}}]} </script><link rel="stylesheet" href="/assets/css/post-toc.css"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0">An iOS, web, and automation developer from Taiwan 🇹🇼 who also loves sharing, traveling, and writing.</p><a href="https://medium.com/@zhgchgli" target="_blank" style="display: block;text-align: center;font-style: normal;/* text-decoration: underline; */font-size: 1.2em;color: var(--heading-color);">1K+ Followers on Medium</a></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a><li class="nav-item"> <a href="/english/" class="nav-link"> <i class="fa-fw fa fa-solid fa-language"></i> <span>ENGLISH POSTS</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>CI/CD 打包工具平台｜使用 Google Apps Script Web App 串接 GitHub Actions 提升跨團隊效率</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>CI/CD 打包工具平台｜使用 Google Apps Script Web App 串接 GitHub Actions 提升跨團隊效率</h1><p class="post-desc fw-light mb-4">打造免費且易用的打包工具平台，解決非工程人員操作 GitHub Actions 的複雜性與權限控管問題，透過 Google Apps Script Web App 整合 GitHub、Slack、Firebase 等 API，實現跨團隊任務單打包與即時進度通知，提升開發與驗證效率。</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1752150651" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 10, 2025 </time> </span> <span> Updated <time data-ts="1752294907" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 12, 2025 </time> </span><div class="mt-3 mb-3"> <a href="/assets/4273e57e7148/1*kJhD4PCaIphZ9G1BG_dtNw.webp" class="popup img-link preview-img blur"><img data-src="/assets/4273e57e7148/1*kJhD4PCaIphZ9G1BG_dtNw.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></div><div class="d-flex justify-content-between"> <span style="display: inline-flex; align-items: center; gap: 4px;"> By <em> <a href="https://medium.com/@zhgchgli/">ZhgChgLi</a> </em> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" style="display: block; "><path fill="#007bff" d="M271.2 56C265.1 49.8 256.2 47.3 247.8 49.6C239.4 51.9 232.9 58.4 230.8 66.8L215.5 127C214.4 131.4 209.9 134 205.6 132.7L145.8 115.9C137.4 113.5 128.4 115.9 122.3 122C116.2 128.1 113.8 137.1 116.2 145.5L133.1 205.3C134.3 209.6 131.7 214.1 127.4 215.2L67.1 230.5C58.7 232.6 52.1 239.2 49.8 247.6C47.5 256 50 264.9 56.2 271L100.7 314.3C103.9 317.4 103.9 322.6 100.7 325.8L56.3 369.1C50.1 375.2 47.6 384.1 49.9 392.5C52.2 400.9 58.8 407.4 67.2 409.6L127.4 424.9C131.8 426 134.4 430.5 133.1 434.8L116.2 494.5C113.8 502.9 116.2 511.9 122.3 518C128.4 524.1 137.4 526.5 145.8 524.1L205.6 507.2C209.9 506 214.4 508.6 215.5 512.9L230.8 573.1C232.9 581.5 239.5 588.1 247.9 590.4C256.3 592.7 265.2 590.2 271.3 584L314.6 539.5C317.7 536.3 322.9 536.3 326.1 539.5L369.3 584C375.4 590.2 384.3 592.7 392.7 590.4C401.1 588.1 407.6 581.5 409.8 573.1L425.1 513C426.2 508.6 430.7 506 435 507.3L494.8 524.2C503.2 526.6 512.2 524.2 518.3 518.1C524.4 512 526.8 503 524.4 494.6L507.5 434.8C506.3 430.5 508.9 426 513.2 424.9L573.4 409.6C581.8 407.5 588.4 400.9 590.7 392.5C593 384.1 590.5 375.1 584.3 369.1L539.8 325.8C536.6 322.7 536.6 317.5 539.8 314.3L584.3 271C590.5 264.9 593 256 590.7 247.6C588.4 239.2 581.8 232.7 573.4 230.5L513.2 215.2C508.8 214.1 506.2 209.6 507.5 205.3L524.4 145.5C526.8 137.1 524.4 128.1 518.3 122C512.2 115.9 503.2 113.5 494.8 115.9L435 132.8C430.7 134 426.2 131.4 425.1 127.1L409.8 66.8C407.7 58.4 401.1 51.8 392.7 49.5C384.3 47.2 375.4 49.7 369.3 55.9L326 100.5C322.9 103.7 317.7 103.7 314.5 100.5L271.2 56z"/><path d="M250 330 l60 60 100 -140" stroke="#ffffff" stroke-width="40" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="7149 words" > <em>39 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">CI/CD 打包工具平台｜使用 Google Apps Script Web App 串接 GitHub Actions 提升跨團隊效率</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">章節 (Chapters)🔖</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">CI/CD 打包工具平台｜使用 Google Apps Script Web App 串接 GitHub Actions 提升跨團隊效率</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><blockquote class="prompt-tip"><p><a href="/posts/zrealm-dev/en/ci-cd-guide-integrate-google-apps-script-web-app-with-github-actions-for-free-packaging-platform-4273e57e7148/"><strong>Click here</strong></a> to view the English version of this article.</p></blockquote><blockquote class="prompt-tip"><p><a href="/posts/zrealm-dev/zh-cn/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9B%A2%E9%98%9F%E6%95%88%E7%8E%87-4273e57e7148/"><strong>点击这里</strong></a>查看本文章简体中文版本。</p></blockquote><blockquote class="prompt-info"><p>基於 SEO 考量，本文標題與描述經 AI 調整，原始版本請參考內文。</p></blockquote><h4 id="zhgchgli-table-of-contents">文章目錄</h4><nav class="zhgchgli-toc"><ul class="zhgchgli-toc-list"><li><a href="#cicd-實戰指南四使用-google-apps-script-web-app-串接-github-actions-建置免費易用的打包工具平台">CI/CD 實戰指南（四）：使用 Google Apps Script Web App 串接 GitHub Actions 建置免費易用的打包工具平台</a></li><li class="has-children"><details><summary>前言 <a href="#前言">#</a></summary><ul><li><a href="#google-apps-script--web-app-打包工具平台-成果圖">Google Apps Script — Web App 打包工具平台 成果圖</a></li><li><a href="#online-demo-web-app">Online Demo Web App</a></li></ul></details></li><li class="has-children"><details><summary>技術選擇 <a href="#技術選擇">#</a></summary><ul><li><a href="#整合進-slack">整合進 Slack</a></li><li><a href="#整合進內部系統">整合進內部系統</a></li><li><a href="#google-apps-script--web-app">Google Apps Script — Web App</a></li><li><a href="#ui-framework">UI Framework</a></li></ul></details></li><li class="has-children"><details><summary>動手做 <a href="#動手做">#</a></summary><ul><li><a href="#開源範例專案">開源範例專案</a></li><li><a href="#檔案架構">檔案架構</a></li><li><a href="#建立自己的打包平台">建立自己的打包平台</a></li><li><a href="#使用者首次使用需要同意授權">使用者首次使用需要同意授權</a></li><li><a href="#更新部署">更新部署</a></li><li><a href="#新增測試部署方便開發">新增測試部署方便開發</a></li></ul></details></li><li class="has-children"><details><summary>修改 Demo 範例專案串接真實資料 <a href="#修改-demo-範例專案串接真實資料">#</a></summary><ul><li><a href="#️修改前請注意">⚠️修改前請注意</a></li><li><a href="#github-串接">GitHub 串接</a></li><li><a href="#slack-串接">Slack 串接</a></li><li><a href="#github-串接--打包表單">GitHub 串接 — 打包表單</a></li></ul></details></li><li class="has-children"><details><summary>Firebase App Distribution — 取得下載連結串接 <a href="#firebase-app-distribution--取得下載連結串接">#</a></summary><ul><li><a href="#串接原理">串接原理</a></li><li><a href="#串接專案設定">串接專案設定</a></li><li><a href="#串接專案">串接專案</a></li></ul></details></li><li><a href="#成果">成果</a></li><li class="has-children"><details><summary>串接延伸 <a href="#串接延伸">#</a></summary><ul><li><a href="#更多-google-apps-script-案例">更多 Google Apps Script 案例</a></li></ul></details></li><li class="has-children"><details><summary>總結 <a href="#總結">#</a></summary><ul><li><a href="#buy-me-a-coffee">Buy me a coffee</a></li><li><a href="#系列文章">系列文章</a></li></ul></details></li></ul></nav><hr /><h3 id="cicd-實戰指南四使用-google-apps-script-web-app-串接-github-actions-建置免費易用的打包工具平台"><span class="me-2">CI/CD 實戰指南（四）：使用 Google Apps Script Web App 串接 GitHub Actions 建置免費易用的打包工具平台</span><a href="#cicd-實戰指南四使用-google-apps-script-web-app-串接-github-actions-建置免費易用的打包工具平台" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>GAS Web App 串接 GitHub, Slack, Firebase 或 Asana/Jira API，建置中繼站，提供跨團隊共用的打包工具平台</p><p><a href="/assets/4273e57e7148/1*kJhD4PCaIphZ9G1BG_dtNw.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*kJhD4PCaIphZ9G1BG_dtNw.webp" alt="Photo by [Lee Campbell](https://unsplash.com/@leecampbell?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjgwMSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Photo by <a href="https://unsplash.com/@leecampbell?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" target="_blank">Lee Campbell</a></p><h3 id="前言"><span class="me-2">前言</span><a href="#前言" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>前篇「 <a href="/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/"><strong>CI/CD 實戰指南（三）：使用 GitHub Actions 實作 App iOS CI 與 CD 工作流程</strong></a> 」我們已經完成了 App iOS 專案的 CI/CD 底層功能建設，現在已經可以 CI 自動測試驗證跟 CD 打包部署；然而在實務產品開發流程上， <strong>打包部署工作多半是為了後續交付給其他職能夥伴</strong> 進 行 QA(Quality Assurance) 功能驗證，這時候 CD 場景就不在只侷限在工程端了，可能跨足 QA、PM、設計(Design QA) 甚至是老闆想先玩看看。</p><p>GitHub Actions <code class="language-plaintext highlighter-rouge">workflow_dispatch</code> 手動表單觸發事件，雖然能提供簡易的表單讓使用者操作打包，但如果操作的對象是非工程人員就相對很不友善，他們不懂：什麼是分支？欄位要不要填？怎麼知道打包好了？好了怎麼下載？…etc 另外還有權限控管問題，如果要讓其他職能夥伴直接使用 GitHub Actions 打包，就需要把他的帳號加到 Repo 當中， <strong>資安控管上很不安全也不合理</strong> ，只是要操作打包表單卻要開整個 Source Code 給他。</p><p>不同於 Jenkins 有獨立的 Web 工具平台，GitHub Actions 就只有這個功能。</p><p><a href="/assets/4273e57e7148/1*qDD8HAAHxDxPEU3vJPEhjA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*qDD8HAAHxDxPEU3vJPEhjA.webp" alt="`workflow_dispatch 的表單樣式`" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNDIiIGhlaWdodD0iNDQ1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><code class="language-plaintext highlighter-rouge">workflow_dispatch 的表單樣式</code></p><p>因此 <strong>我們需要一個中繼站打包平台，用來服務其他職能使用者</strong> ，整合 Asana/Jira 的任務單，讓使用的人可以直接用任務單打包 App，並且直接在上面查看進度、下載打包結果。</p><p><a href="/assets/4273e57e7148/1*bHYawmSnhqwB4TzIJVfGow.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*bHYawmSnhqwB4TzIJVfGow.webp" alt="GAS Web App 中繼站" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjEwMzciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>GAS Web App 中繼站</p><p><a href="/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/">上一篇</a> 關注的是右邊核心 GitHub Actions CI/CD 工作流程開發；本文關注的是左半部 to End-User 打包工具平台、增加使用者體驗的部分。</p><h4 id="google-apps-script--web-app-打包工具平台-成果圖"><span class="me-2">Google Apps Script — Web App 打包工具平台 成果圖</span><a href="#google-apps-script--web-app-打包工具平台-成果圖" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/4273e57e7148/1*yXMeaOELhqdvMCxIJ5ElBw.gif" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*yXMeaOELhqdvMCxIJ5ElBw.gif" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDQ4IiBoZWlnaHQ9IjgyMiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/4273e57e7148/1*EM0goWpuDeHGVkZoybLm8g.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*EM0goWpuDeHGVkZoybLm8g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5ODAiIGhlaWdodD0iODk5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4273e57e7148/1*haoGMvAUroz7rUMDEez9gA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*haoGMvAUroz7rUMDEez9gA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5ODQiIGhlaWdodD0iODI2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4273e57e7148/1*afCwKITlerG1g6swB_2wZA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*afCwKITlerG1g6swB_2wZA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NTUiIGhlaWdodD0iNzU4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4273e57e7148/1*mvwpHBdrC73_PjL8H32nkw.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*mvwpHBdrC73_PjL8H32nkw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTc5IiBoZWlnaHQ9IjI1NTYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="/assets/4273e57e7148/1*BbbEd_thhUOdbAQqsCt-Tw.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*BbbEd_thhUOdbAQqsCt-Tw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDQ2IiBoZWlnaHQ9IjU4NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/4273e57e7148/1*HXjfMpUPssaw3sJgH6KKJQ.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*HXjfMpUPssaw3sJgH6KKJQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMTIiIGhlaWdodD0iMjkyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><strong>打包表單：</strong> 整合專案管理工具撈取單號、整合 GitHub 撈取開啟中的 Pull Request<li><strong>把包紀錄：</strong> 顯示打包歷史紀錄、正在打包的任務進度狀態、點擊取得下載連結撈取 Firebase App Distribution 下載連結、資訊<li><strong>Runner 狀態：</strong> 顯示 Self-hosted Runner 狀態。<li><strong>Slack 打包進度通知。</strong><li>支援手機版<li>支援限制組織團隊內帳號使用</ul><p><strong>主要職責</strong></p><p>0 狀態、0 資料庫， <strong>單純為中繼交換站</strong> ，整合顯示各個 API 資料 (e.g. Asana/Jira/GitHub)、轉發表單請求到 GitHub Actions。</p><p><strong>操作要求：</strong> 支援手機與電腦。</p><p><strong>權限要求：</strong> 能限制只有團隊組織成員能存取。</p><h4 id="online-demo-web-app"><span class="me-2">Online Demo Web App</span><a href="#online-demo-web-app" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://script.google.com/macros/s/AKfycbxk1nYhzfBzqny34rvBlxmcWMEQbWTL5a28mBmYId0NDaCZd0S-U3ytpBoTi2wZp0d6cg/exec" target="_blank"><strong>Sign in</strong></a> <a href="https://script.google.com/macros/s/AKfycbxk1nYhzfBzqny34rvBlxmcWMEQbWTL5a28mBmYId0NDaCZd0S-U3ytpBoTi2wZp0d6cg/exec" target="_blank"><em>Edit description</em> script.google.com</a></p><h3 id="技術選擇"><span class="me-2">技術選擇</span><a href="#技術選擇" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/posts/zrealm-dev/ci-cd-%E6%98%AF%E4%BB%80%E9%BA%BC-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A9%A9%E5%AE%9A%E9%96%8B%E7%99%BC%E5%9C%98%E9%9A%8A%E7%9A%84%E9%97%9C%E9%8D%B5%E6%B5%81%E7%A8%8B%E8%88%87%E5%B7%A5%E5%85%B7%E9%81%B8%E6%93%87-c008a9e8ceca/">第一篇文章</a> 有提到過，這邊再詳細整理一次。</p><h4 id="整合進-slack"><span class="me-2">整合進 Slack</span><a href="#整合進-slack" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>我們嘗試過讓 Slack 擔任打包平台，自行開發後端服務並架設在 GCP 上，與 Slack API、Asana API 進行串接整合，再將 Slack 送來的表單轉手發送給 GitHub API 觸發後續 GitHub Actions；體驗上非常爽而且統一在團隊的協作工具上，可以無痛使用； <strong>缺點是開發及後續維護成本很高</strong> ，因為是自己用 Ktor 開發的後端服務，需要 App 工程師同時兼做後端、處理 Google 服務 OAuth 整合問題、部分功能可能在這做掉(例如：送審)…功能複雜；如果後來的新人沒銜接好這整塊幾乎沒辦法維護下去了，另外每個月還要花 $15 USD GCP 伺服器費用。</p><p>初期也嘗試過用 FaaS 服務串接 Slack API，例如 Cloud Funtions，但是 Slack API 要求串接的服務要能在 3 秒內回應請求，否則視為失敗；FaaS 會有 <a href="https://www.cloudflare.com/zh-tw/learning/serverless/what-is-serverless/" target="_blank">冷啟動問題</a> ，當服務一段時間沒呼叫就會進入休眠，再次呼叫時會需要較長時間才能響應 (≥ 5秒)，會造成 Slack 打包表單很不穩定，時常出現 Timeout Error。</p><h4 id="整合進內部系統"><span class="me-2">整合進內部系統</span><a href="#整合進內部系統" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>這當然是最優解，如果團隊有 Web、後端人力，直接與現有系統整合是最好也最安全的。</p><blockquote><p><em>本文的前提是：沒有，App 自立自強。</em></p></blockquote><h4 id="google-apps-script--web-app"><span class="me-2">Google Apps Script — Web App</span><a href="#google-apps-script--web-app" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Google Apps Script 是我們的老夥伴，之前做過很多 RPA 專案都是用他去做排程觸發執行任務，例如：「 <a href="/posts/zrealm-dev/crashlytics%E8%88%87google-analytics%E8%87%AA%E5%8B%95%E6%9F%A5%E8%A9%A2app-crash-free-users-rate-google-apps-script%E6%95%B4%E5%90%88%E5%AF%A6%E4%BD%9C-793cb8f89b72/">Crashlytics + Google Analytics 自動查詢 App Crash-Free Users Rate</a> 」、「 <a href="/posts/zrealm-robotic-process-automation/google-apps-script-%E6%89%93%E9%80%A0%E6%AF%8F%E6%97%A5%E6%95%B8%E6%93%9A%E5%A0%B1%E8%A1%A8%E8%87%AA%E5%8B%95%E5%8C%96-rpa-%E5%BF%AB%E9%80%9F%E4%B8%B2%E6%8E%A5-google-analytics-%E8%88%87-google-sheet-f6713ba3fee3/">使用 Google Apps Script 實現每日數據報表 RPA 自動化</a> 」，這時候我又想起了它；GAS 有一個功能是部署成 Web (App) 直接當網頁服務。</p><p><strong>Google Apps Script 優點：</strong></p><ul><li>✅ 免費、 <a href="https://developers.google.com/apps-script/guides/services/quotas?hl=zh-tw" target="_blank">正常使用下幾乎摸不到上限</a><li>✅ Functions as a Service 方法即服務，不需自行架設維護伺服器<li>✅ 權限控管同 Google Workspace，可設定僅限組織內 Google 帳號使用<li>✅ 無痛整合 Google 生態系相關服務(e.g. Firebase, GA…etc)與資料 (不用自己做 OAuth)<li>✅ 程式語言使用 JavaScript 易上手 (V8 Runtime 支援 ES6+ )<li>✅ 快速撰寫、快速上線、快速使用<li>✅ 服務穩定、長久 (已推出超過 16 年)<li><strong>✅ AI Can Help! 實測使用 ChatGPT 輔助開發，準確率可達 95%</strong></ul><p><strong>Google Apps Script 缺點：</strong></p><ul><li>❌ 內建的版本管控一言難盡<li>❌ 內建不支援檔案、資料儲存、金鑰/憑證管理<li>❌ Web App 無法做到 100% 體驗的 RWD<li>❌ 專案只能綁在個人帳號而不是組織<li>❌ 雖然 Google 有持續在開發維護，但整體功能更新緩慢<li>❌ 網路請求 <code class="language-plaintext highlighter-rouge">UrlFetchApp</code> 不支援設定 User-Agent<li>❌ Web App <code class="language-plaintext highlighter-rouge">doGet</code> / <code class="language-plaintext highlighter-rouge">doPost</code> 不支援取得 Headers 資訊<li>❌ FaaS <a href="https://www.cloudflare.com/zh-tw/learning/serverless/what-is-serverless/" target="_blank">冷啟動問題</a><li>❌ <strong>不支援多人同時開發</strong> 但在 Web App 影響不大，頂多要多等幾秒才進入網頁。</ul><p>以上是 GAS 本身服務的優缺點，對做打包工具 Web 影響不大；選擇使用此方案對比 Slack 方案，更快速、輕量跟容易交接上手， <strong>缺點是團隊需要多知道這個工具的網址在哪跟怎麼用、還有因 GAS 程式庫功能有限</strong> (e.g. 無內建加密演算法庫) 基本上只能做純中繼平台，例如送審，那也只能轉發送審請求請 GitHub Actions 做。</p><blockquote><p><strong><em>另外也僅適用是 Google Workspace 工作環境的團隊；</em></strong> <em>權衡了資源與需求，因此採用 Google Apps Script — Web App 來實現打包工具平台。</em></p></blockquote><h4 id="ui-framework"><span class="me-2">UI Framework</span><a href="#ui-framework" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://getbootstrap.com/" target="_blank" class="img-link shimmer" ><img src="https://getbootstrap.com/docs/5.3/assets/brand/bootstrap-social.png" alt="" loading="lazy"></a></p><p>我們直接使用 Bootstrap CDN，不然要自己弄 CSS 樣式太麻煩了，Bootstrap 問 AI 怎麼組合使用也更準確方便。</p><h3 id="動手做"><span class="me-2">動手做</span><a href="#動手做" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>這邊已經把整個平台架構開源了，大家可以依照自己團隊的需求基於這個版本再客製化即可。</p><h4 id="開源範例專案"><span class="me-2">開源範例專案</span><a href="#開源範例專案" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>在 GAS 上直接檢視專案：</p><p><a href="https://script.google.com/d/1CBB39OMedqP9Ro1WSlvgDnMBin4-ksyhgly2h_KrbOuFiPHTalNgwHOp/edit?usp=sharing" target="_blank"><strong>Google Drive: Sign-in</strong></a> <a href="https://script.google.com/d/1CBB39OMedqP9Ro1WSlvgDnMBin4-ksyhgly2h_KrbOuFiPHTalNgwHOp/edit?usp=sharing" target="_blank"><em>Access Google Drive with a Google account (for personal use) or Google Workspace account (for business use) .</em> script.google.com</a></p><p><a href="/assets/4273e57e7148/1*Xzh2eBpVR92uZq-8POPegw.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*Xzh2eBpVR92uZq-8POPegw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjAiIGhlaWdodD0iODYwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>GitHub Repo 備份：</p><p><a href="https://github.com/ZhgChgLi/google-apps-script-cd-web-app-demo" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/77054eda86ed3ccea772d92cd6ae33bcef8213c0a1f42ee5eca7e999c2607ee8/ZhgChgLi/google-apps-script-cd-web-app-demo" alt="" loading="lazy"></a></p><h4 id="檔案架構"><span class="me-2">檔案架構</span><a href="#檔案架構" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/4273e57e7148/1*ohVakhlaflRXCI_3j2-cOA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*ohVakhlaflRXCI_3j2-cOA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMjciIGhlaWdodD0iNzE2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4273e57e7148/1*AyIEF0wqEFdMDBuRzQXDEQ.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*AyIEF0wqEFdMDBuRzQXDEQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTc3IiBoZWlnaHQ9Ijk5MSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>寫了一個很陽春的 類-MVC 架構，如要調整或不知道功能問 AI 都能得到準確答案。</p><p><strong>系統</strong></p><ul><li>appsscript.json: GAS 系統的 Metadata 設定檔案 <strong>重點是「oauthScopes」變數，宣告這個 Script 會用到的外部權限。</strong><li>Entrypoint.gs: 定義 doGet( ) 進入點</ul><p><strong>Controller</strong></p><ul><li>Controller_iOS.gs: iOS 打包工具頁面 Controller，負責撈數據給 View 顯示</ul><p><strong>View</strong></p><ul><li>View_index.html: 整個打包工具骨架、首頁<li>View_iOS.html: iOS 打包工具頁面骨架<li>View_iOS_Runs.html: iOS 打包工具 — 打包紀錄內容頁面<li>View_iOS_Form.html: iOS 打包工具 —打包表單頁面<li>View_iOS_Runners.html: iOS 打包工具 — Self-hosted Runner 狀態頁面</ul><p><strong>Model(Lib)</strong></p><ul><li>Credentials.gs: 定義金鑰內容 (⚠️️️請注意️，GAS 如果要走 GCP IAM 會蠻複雜的因此我們直接定義金鑰在此， <strong>所以這個 GAS 專案會包含機密資訊，請不要隨意共享專案檢視編輯權限</strong> )<li>StubData.gs: Online Demo 用的 Stub 方法、資料。<li>Settings.gs: 一些常用設定，跟 lib init。<li>GitHub.gs: GitHub API 操作封裝。<li>Slack.gs: Slack API 操作封裝。<li>Firebase.gs: Firebase — App Distribution API 操作封裝。</ul><h4 id="建立自己的打包平台"><span class="me-2">建立自己的打包平台</span><a href="#建立自己的打包平台" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>1.建立一個 <a href="https://script.google.com/home" target="_blank">Google Apps Script 專案</a> 、命名</p><p><a href="/assets/4273e57e7148/1*_uVqy6cDNvFSEL0feOS-pw.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*_uVqy6cDNvFSEL0feOS-pw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTkiIGhlaWdodD0iMzY5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>到專案設定 → 勾選「在編輯器中顯示「appsscript.json」資訊清單檔案」才會出現「appsscript.json」Metadata 檔案。</p><p><a href="/assets/4273e57e7148/1*tvXsQufQs5-5UzV0bg5WLA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*tvXsQufQs5-5UzV0bg5WLA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MzYiIGhlaWdodD0iNDY2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>2.參考我的 <a href="https://script.google.com/home/projects/1CBB39OMedqP9Ro1WSlvgDnMBin4-ksyhgly2h_KrbOuFiPHTalNgwHOp/edit" target="_blank">開源專案檔案</a> ，把所有檔案按照範例建立好跟把內容無腦複製過來</p><p><a href="/assets/4273e57e7148/1*PxZvHNeW6PFaaqmZqifFfg.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*PxZvHNeW6PFaaqmZqifFfg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NzIiIGhlaWdodD0iMjcyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p><strong><em>很蠢，但沒辦法。</em></strong></p></blockquote><blockquote><p><em>StubData.gs 先一起複製過來，第一次部署測試可以使用。</em></p></blockquote><blockquote><p><em>另一個方法是用 <a href="https://developers.google.com/apps-script/guides/clasp?hl=zh-tw" target="_blank">clasp (Google Apps Script CLI)</a> git clone demo project 後把 Code 推上去。</em></p></blockquote><p><a href="/assets/4273e57e7148/1*FLM2SGIhAI7Z7OWIJpeT9A.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*FLM2SGIhAI7Z7OWIJpeT9A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTUwIiBoZWlnaHQ9Ijg1MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>複製完長得會跟範例專案一模一樣。</p><p>3. 首次部署「網頁應用程式」查看結果</p><p><a href="/assets/4273e57e7148/1*KbWpaEinVZh6M8o8bCCl6A.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*KbWpaEinVZh6M8o8bCCl6A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MzMiIGhlaWdodD0iMjM5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4273e57e7148/1*2RrwNxZVidodX6Kq037Yvw.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*2RrwNxZVidodX6Kq037Yvw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjEiIGhlaWdodD0iNjAxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4273e57e7148/1*CZSIfASW4hmQeXwTS3x7Fg.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*CZSIfASW4hmQeXwTS3x7Fg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjEiIGhlaWdodD0iNjAyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>專案右上角「部署」 → 「新增部署作業」 → 類型「網頁應用程式」:</p><p><strong>執行身份：</strong></p><ul><li>我 <code class="language-plaintext highlighter-rouge">統一都用你的帳號身分執行腳本。</code><li>存取網頁程式的使用者 <code class="language-plaintext highlighter-rouge">會以當前登入的 Google 帳號使用者身份執行腳本。</code></ul><p><strong>誰可以存取：</strong></p><ul><li>只有我自己<li><strong>XXX 同個組織中的所有使用者</strong> <code class="language-plaintext highlighter-rouge">只有同組織＋已登入的 Google 帳號使用者可以存取。</code><li>所有已登入 Google 帳號的使用者 <code class="language-plaintext highlighter-rouge">已登入的 Google 帳號使用者都可以存取。</code><li>所有人 <code class="language-plaintext highlighter-rouge">不需要登入 Google 帳號、所有人都可以公開存取。</code></ul><blockquote><p><em>如果是內部工具：可以選擇「 <strong>誰可以存取：XXX 同個組織中的所有使用者」+「執行身份：存取網頁程式的使用者」進行安全控管。</strong></em></p></blockquote><p>完成部署後的「網頁應用程式」網址，就是你的 Web App 打包工具網址，可以分享給團隊成員使用。(網址很醜，可以自己用短網址服務包裝一下、 <strong>更新部署內容不會異動網址</strong> )</p><h4 id="使用者首次使用需要同意授權"><span class="me-2">使用者首次使用需要同意授權</span><a href="#使用者首次使用需要同意授權" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>首次點擊 Web App 網址，需要先同意授權。</p><p><a href="/assets/4273e57e7148/1*lckRkGtc7EVqz9aTZaBIOw.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*lckRkGtc7EVqz9aTZaBIOw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTkiIGhlaWdodD0iNDkxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4273e57e7148/1*l1t290T_4xs1ly-RjjZXtg.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*l1t290T_4xs1ly-RjjZXtg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjYiIGhlaWdodD0iNjc0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4273e57e7148/1*O9ItCSBNoBcuqepd-6ygCA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*O9ItCSBNoBcuqepd-6ygCA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MjIiIGhlaWdodD0iNjMwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>Review Permission → 選擇要使用此 Web App 的帳戶身份<li>未驗證警告視窗，點擊「進階」展開 → 點擊 前往「XXX」(不安全)</ul><p><a href="/assets/4273e57e7148/1*cYloLsBROLbZDPIciYUm5g.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*cYloLsBROLbZDPIciYUm5g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDU0IiBoZWlnaHQ9Ijg3NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><ul><li>點擊「允許」</ul><blockquote><p><em>爾後如果腳本權限沒更動不用重新授權。</em></p></blockquote><p><strong>完成授權同意後就會進入打包工具首頁：</strong></p><p><a href="/assets/4273e57e7148/1*vG5SsVFHPPDukc4ej0hqLA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*vG5SsVFHPPDukc4ej0hqLA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTQ5IiBoZWlnaHQ9IjExMTMiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><blockquote><p>Demo 打包工具部署成功 🎉🎉🎉</p></blockquote><p>註:「這個應用程式是由 Google Apps Script 的使用者建立」這個提示無法自動隱欌。</p><h4 id="更新部署"><span class="me-2">更新部署</span><a href="#更新部署" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p>⚠️所有程式碼的變動都需要更新部署才會生效。</p></blockquote><blockquote><p>️️⚠️所有程式碼的變動都需要更新部署才會生效。</p></blockquote><blockquote><p>⚠️所有程式碼的變動都需要更新部署才會生效。</p></blockquote><p>這邊要注意程式碼變動儲存完不會直接變動到 Web App 上，所以發現重整沒效果就是這個原因； <strong>需要到「部署」 → 「管理部署作業」→「編輯」→ 版本「建立新版本」 → 點擊「部署」 → 「完成」</strong> 。</p><p><a href="/assets/4273e57e7148/1*VsfCEfwnPlx9RbQ8DtXpnA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*VsfCEfwnPlx9RbQ8DtXpnA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyOTgiIGhlaWdodD0iMjI5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4273e57e7148/1*n62MVd6o8W3hUtQpfn9Q0w.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*n62MVd6o8W3hUtQpfn9Q0w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjEiIGhlaWdodD0iNjAzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p><em>更新部署完再重整網頁就能看到改動生效。</em></p></blockquote><h4 id="新增測試部署方便開發"><span class="me-2">新增測試部署方便開發</span><a href="#新增測試部署方便開發" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/4273e57e7148/1*4fLoW6jf8z1AIXvULW-AOA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*4fLoW6jf8z1AIXvULW-AOA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MTMiIGhlaWdodD0iMjM1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4273e57e7148/1*yvTxeaImQ4Mr7FwESsuf5A.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*yvTxeaImQ4Mr7FwESsuf5A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjEiIGhlaWdodD0iNTk5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>如同前述，所有改動要生效都要更新部署；這在開發階段非常麻煩，因此在開發階段我們可以用「測試部署」來快速驗證改動是否正確。</p><p><strong>到「部署」 → 「測試部署作業」 → 取得測試用「網頁應用程式」網址。</strong></p><p><a href="/assets/4273e57e7148/1*Rt0XEw9uAev58isLEnsoPA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*Rt0XEw9uAev58isLEnsoPA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjIiIGhlaWdodD0iNjAzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>在開發階段我們直接使用此網址就能儲存，檔案更改儲存完，回到這個開發用網址重整網頁就能看到成果！</p><blockquote><p><strong><em>都開發好之後再照前文說的更新部署，釋出給使用者使用。</em></strong></p></blockquote><h3 id="修改-demo-範例專案串接真實資料"><span class="me-2">修改 Demo 範例專案串接真實資料</span><a href="#修改-demo-範例專案串接真實資料" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>再來才是重點，串接真實資料，GitHub Actions Workflow 參考的是 <a href="/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/"><strong>上一篇文章中建立好的 CI/CD 流程</strong></a> ，你也可依照實際的 Actions Workflow 調整參數。</p><h4 id="️修改前請注意"><span class="me-2">⚠️修改前請注意</span><a href="#️修改前請注意" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Google Apps Script 平台並不能很好的支援多人或甚至多開視窗開發，我自己踩過的雷是不小心開了兩個編輯視窗，在 A 編輯完，後來在 B 編輯，所以修改都被 B 的舊版覆蓋掉了；因此 <strong>建議同時間只有一個人一個視窗在編輯 Script</strong> 。</p><h4 id="github-串接"><span class="me-2">GitHub 串接</span><a href="#github-串接" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>帶入 GitHub API Token:</strong></p><p>GitHub -&gt; 帳號 -&gt; Settings -&gt; Developer Settings -&gt; Fine-grained personal access tokens or Personal access tokens (classic)。</p><p>建議使用 Fine-grained personal access tokens 比較安全(但有期限)。</p><p><strong>Fine-grained personal access tokens 需要的權限如下：</strong></p><p><a href="/assets/4273e57e7148/1*lCNQHwC4EMU4gNXYC-zs2A.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*lCNQHwC4EMU4gNXYC-zs2A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MjEiIGhlaWdodD0iNTc5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>Repo: 記得選要操作的 Repo<li>Permissions: <code class="language-plaintext highlighter-rouge">Actions (read/write)</code> 、 <code class="language-plaintext highlighter-rouge">Administration (read only)</code></ul><blockquote><p><em>如果不想依賴在某人的帳號上建議建立一支乾淨的團隊 GitHub 帳號，使用它的 Token。</em></p></blockquote><p>到 GAS 專案 → <code class="language-plaintext highlighter-rouge">Credentials.gs</code> → 將 Token 帶入到 <code class="language-plaintext highlighter-rouge">githubToken</code> 變數中。</p><p><strong>替換 GithubStub 成 GitHub:</strong></p><p>到 GAS 專案 → <code class="language-plaintext highlighter-rouge">Settings.gs</code> → 將：</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">iOSGitHub</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GitHubStub</span><span class="p">(</span><span class="nx">githubToken</span><span class="p">,</span> <span class="nx">iOSRepoPath</span><span class="p">);</span>
</pre></table></code></div></div><p><strong>改成</strong></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">iOSGitHub</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GitHub</span><span class="p">(</span><span class="nx">githubToken</span><span class="p">,</span> <span class="nx">iOSRepoPath</span><span class="p">);</span>
</pre></table></code></div></div><p>儲存檔案。</p><p><strong>重新整理測試用「網頁應用程式」網址查看改動是否正確:</strong></p><p><a href="/assets/4273e57e7148/1*30k1iDALT9WdupmuBiG2uQ.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*30k1iDALT9WdupmuBiG2uQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NTgiIGhlaWdodD0iODU5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p><em>能正確顯示資料代表： <strong>GitHub 改串真實資料成功</strong> 🎉🎉🎉</em></p></blockquote><p>也能順手切到「Runner 狀態」查看 Self-hosted Runner 狀態撈取正不正常：</p><p><a href="/assets/4273e57e7148/1*K3yzISn5J7o1e1F5zhIQpg.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*K3yzISn5J7o1e1F5zhIQpg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NzIiIGhlaWdodD0iMzk0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>註：我 Runner 沒開…所以是離線中。</p><h4 id="slack-串接"><span class="me-2">Slack 串接</span><a href="#slack-串接" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>為了串接 Slack 通知，我們首先要回到 Repo → GitHub Actions 新增一個包裹打包 Action Workflow 的通知容器 Action。</p><p><strong>CD-Deploy-Form.yml:</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) 名稱</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">CD-Deploy-Form</span>

<span class="c1"># Actions Log 的標題名稱</span>
<span class="na">run-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[CD-Deploy-Form]</span><span class="nv"> </span><span class="s">${{</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>

<span class="c1"># 同個 Concurrency Group 如果有新的 Job 會取消正在跑的</span>
<span class="c1"># 例如 重複觸發相同分支的打包任務，會取消前一個任務</span>
<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.ref }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># 觸發事件</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># 手動表單觸發</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
    <span class="c1"># 表單 Inputs 欄位</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="c1"># App 版本號</span>
      <span class="na">VERSION_NUMBER</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Version</span><span class="nv"> </span><span class="s">Number</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">app</span><span class="nv"> </span><span class="s">(e.g.,</span><span class="nv"> </span><span class="s">1.0.0).</span><span class="nv"> </span><span class="s">Auto-detect</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Xcode</span><span class="nv"> </span><span class="s">project</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">left</span><span class="nv"> </span><span class="s">blank.'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
      <span class="c1"># App Build Number</span>
      <span class="na">BUILD_NUMBER</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Build</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">app</span><span class="nv"> </span><span class="s">(e.g.,</span><span class="nv"> </span><span class="s">1).</span><span class="nv"> </span><span class="s">Will</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">timestamp</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">left</span><span class="nv"> </span><span class="s">blank.'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
      <span class="c1"># App Release Note</span>
      <span class="na">RELEASE_NOTE</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Release</span><span class="nv"> </span><span class="s">notes</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">deployment.'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
      <span class="c1"># 觸發者的 Slack User ID</span>
      <span class="na">SLACK_USER_ID</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Slack</span><span class="nv"> </span><span class="s">user</span><span class="nv"> </span><span class="s">id.'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
      <span class="c1"># 觸發者的 Email</span>
      <span class="na">AUTHOR</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Trigger</span><span class="nv"> </span><span class="s">author</span><span class="nv"> </span><span class="s">email.'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        
<span class="c1"># Job 工作項目</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># 開始打包時傳送 Slack 訊息</span>
  <span class="c1"># Job ID</span>
  <span class="na">start-message</span><span class="pi">:</span>
    <span class="c1"># 小工作直接用 GitHub Hosted Runner 跑，用量不大</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    
    <span class="c1"># 設定最長 Timeout 時間，防止異常情況發生時無止盡的等待</span>
    <span class="c1"># 正常情況不可能跑超過 5 分鐘</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">5</span>

    <span class="c1"># 工作步驟</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Post a Start Slack Message</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">slack</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">slackapi/slack-github-action@v2.0.0</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">method</span><span class="pi">:</span> <span class="s">chat.postMessage</span>
          <span class="na">token</span><span class="pi">:</span> <span class="s">${{ secrets.SLACK_BOT_TOKEN }}</span>
          <span class="na">payload</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">channel: ${{ inputs.SLACK_USER_ID }}</span>
            <span class="s">text: "已收到打包請求。\nID: &lt;${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}|${{ github.run_id }}&gt;\nBranch: ${{ github.ref_name }}\ncc'ed &lt;@${{ inputs.SLACK_USER_ID }}&gt;"</span>
    <span class="c1"># Job Output 給後續 Job 使用</span>
    <span class="c1"># ts = Slack 訊息 ID，後續通知才可以 Reply 在同個 Threads</span>
    <span class="na">outputs</span><span class="pi">:</span>
      <span class="na">ts</span><span class="pi">:</span> <span class="s">${{ steps.slack.outputs.ts }}</span>

  <span class="na">deploy</span><span class="pi">:</span>
    <span class="c1"># Job 預設是並發執行，用 needs 限制需等待 start-message 完成才執行</span>
    <span class="c1"># 執行打包部署任務</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="s">start-message</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">./.github/workflows/CD-Deploy.yml</span>
    <span class="na">secrets</span><span class="pi">:</span> <span class="s">inherit</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">VERSION_NUMBER</span><span class="pi">:</span> <span class="s">${{ inputs.VERSION_NUMBER }}</span>
      <span class="na">BUILD_NUMBER</span><span class="pi">:</span> <span class="s">${{ inputs.BUILD_NUMBER }}</span>
      <span class="na">RELEASE_NOTE</span><span class="pi">:</span> <span class="s">${{ inputs.RELEASE_NOTE }}</span>
      <span class="na">AUTHOR</span><span class="pi">:</span> <span class="s">${{ inputs.AUTHOR }}</span>

  <span class="c1"># 打包部署任務成功訊息</span>
  <span class="na">end-message-success</span><span class="pi">:</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">start-message</span><span class="pi">,</span> <span class="nv">deploy</span><span class="pi">]</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">${{ needs.deploy.result == 'success' }}</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">5</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Post a Success Slack Message</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">slackapi/slack-github-action@v2.0.0</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">method</span><span class="pi">:</span> <span class="s">chat.postMessage</span>
          <span class="na">token</span><span class="pi">:</span> <span class="s">${{ secrets.SLACK_BOT_TOKEN }}</span>
          <span class="na">payload</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">channel: ${{ inputs.SLACK_USER_ID }}</span>
            <span class="s">thread_ts: "${{ needs.start-message.outputs.ts }}"</span>
            <span class="s">text: "✅ 打包部署成功。\n\ncc'ed &lt;@${{ inputs.SLACK_USER_ID }}&gt;"</span>
  
  <span class="c1"># 打包部署任務失敗訊息</span>
  <span class="na">end-message-failure</span><span class="pi">:</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">deploy</span><span class="pi">,</span> <span class="nv">start-message</span><span class="pi">]</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">${{ needs.deploy.result == 'failure' }}</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">5</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Post a Failure Slack Message</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">slackapi/slack-github-action@v2.0.0</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">method</span><span class="pi">:</span> <span class="s">chat.postMessage</span>
          <span class="na">token</span><span class="pi">:</span> <span class="s">${{ secrets.SLACK_BOT_TOKEN }}</span>
          <span class="na">payload</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">channel: ${{ inputs.SLACK_USER_ID }}</span>
            <span class="s">thread_ts: "${{ needs.start-message.outputs.ts }}"</span>
            <span class="s">text: "❌ 打包部署失敗，請檢查執行狀況結果或稍後再試。\n\ncc'ed &lt;@${{ inputs.SLACK_USER_ID }}&gt;"</span>

  <span class="c1"># 打包部署任務取消訊息</span>
  <span class="na">end-message-cancelled</span><span class="pi">:</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">deploy</span><span class="pi">,</span> <span class="nv">start-message</span><span class="pi">]</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">${{ needs.deploy.result == 'cancelled' }}</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">5</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Post a Cancelled Slack Message</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">slackapi/slack-github-action@v2.0.0</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">method</span><span class="pi">:</span> <span class="s">chat.postMessage</span>
          <span class="na">token</span><span class="pi">:</span> <span class="s">${{ secrets.SLACK_BOT_TOKEN }}</span>
          <span class="na">payload</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">channel: ${{ inputs.SLACK_USER_ID }}</span>
            <span class="s">thread_ts: "${{ needs.start-message.outputs.ts }}"</span>
            <span class="s">text: ":black_square_for_stop: 打包部署已取消。\n\ncc'ed &lt;@${{ inputs.SLACK_USER_ID }}&gt;"</span>
</pre></table></code></div></div><p><strong>完整程式碼：</strong> <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/CD-Deploy-Form.yml" target="_blank">CD-Deploy-Form.yml</a></p><p><a href="/assets/4273e57e7148/1*NatyC_Oid4BrKYk4nehuKA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*NatyC_Oid4BrKYk4nehuKA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NTIiIGhlaWdodD0iMjg3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>這個 Action 只是個容器，串接 Slack 通知，實際是復用 <a href="/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/">上一篇文章</a> 中寫好的 <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/CD-Deploy.yml" target="_blank">CD-Deploy.yml</a> Action。</p><ul><li>Slack Bot App 建立、發訊息權限設定可參考我 <a href="/posts/zrealm-dev/slack-app-%E6%95%B4%E5%90%88-chatgpt-%E5%88%A9%E7%94%A8-openai-api-%E8%88%87-google-cloud-functions-%E8%87%AA%E5%BB%BA%E6%99%BA%E8%83%BD%E5%8A%A9%E7%90%86-bd94cc88f9c9/">之前的文章</a><li>記得到 Repo → Secrets 新增對應的 <code class="language-plaintext highlighter-rouge">SLACK_BOT_TOKEN</code> 跟帶入 Slack Bot App Token 值</ul><p>回到 GAS 專案 → <code class="language-plaintext highlighter-rouge">Credentials.gs</code> → 將 Token 帶入到 <code class="language-plaintext highlighter-rouge">slackBotToken</code> 變數中。</p><p>再到 GAS 專案 → <code class="language-plaintext highlighter-rouge">Settings.gs</code> → 將：</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">slack</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SlackStub</span><span class="p">(</span><span class="nx">slackBotToken</span><span class="p">);</span>
</pre></table></code></div></div><p><strong>改成</strong></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">slack</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Slack</span><span class="p">(</span><span class="nx">slackBotToken</span><span class="p">);</span>
</pre></table></code></div></div><p>儲存檔案。</p><blockquote><p><em>如果你沒有現成的 Slack Bot App 可發通知也懶得建立，可以忽略這裡的所有步驟，並刪除 GAS 專案中有關 slack 的使用。</em></p></blockquote><h4 id="github-串接--打包表單"><span class="me-2">GitHub 串接 — 打包表單</span><a href="#github-串接--打包表單" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>到 GAS 專案 → <code class="language-plaintext highlighter-rouge">Controller_iOS.gs</code> → 調整 <code class="language-plaintext highlighter-rouge">View_iOS_Form.html</code> 內容: 移除假 Asana Tasks 串接方法：</p><pre><code class="language-php-template">      &lt;? tasks.forEach(function(task) { ?&gt;
      &lt;option value="&lt;?=task.githubBranch?&gt;"&gt;[&lt;?=task.id?&gt;] &lt;?=task.title?&gt;&lt;/option&gt;
      &lt;? }) ?&gt;
</code></pre><p>也可以在這邊自己調整預設分支(這邊是 <code class="language-plaintext highlighter-rouge">main</code> )。</p><p>—</p><p>到 GAS 專案 → <code class="language-plaintext highlighter-rouge">Controller_iOS.gs</code> → 調整 <code class="language-plaintext highlighter-rouge">iOSLoadForm()</code> 內容:</p><ul><li>移除 <code class="language-plaintext highlighter-rouge">template.tasks = Stubable.fetchStubAsanaTasks();</code> 這行假串接 Asana 的方法。 如果要串 Asana/Jira 可以直接問 ChatGPT 請他幫忙產串接方法。<li><code class="language-plaintext highlighter-rouge">template.prs = iOSGitHub.fetchOpenPRs();</code> 是真的串 GitHub API 拿 Opened PR List，可依需求保留。</ul><p><strong>送出後的處理</strong> 在 <code class="language-plaintext highlighter-rouge">iOSSubmitForm()</code> 內容:</p><p>可依照實際 GitHub Actions Workflow 檔案名稱、 <code class="language-plaintext highlighter-rouge">workflow_dispatch</code> inputs 欄位參數進行調整：</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>  <span class="nx">iOSGitHub</span><span class="p">.</span><span class="nf">dispatchWorkflow</span><span class="p">(</span><span class="dl">"</span><span class="s2">CD-Deploy-Form.yml</span><span class="dl">"</span><span class="p">,</span> <span class="nx">branch</span><span class="p">,</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">BUILD_NUMBER</span><span class="dl">"</span><span class="p">:</span> <span class="nx">buildNumber</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">VERSION_NUMBER</span><span class="dl">"</span><span class="p">:</span> <span class="nx">versionNumber</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">VERSION_NUMBER</span><span class="dl">"</span><span class="p">:</span> <span class="nx">versionNumber</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">RELEASE_NOTE</span><span class="dl">"</span><span class="p">:</span> <span class="nx">releaseNote</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">AUTHOR</span><span class="dl">"</span><span class="p">:</span> <span class="nx">email</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">SLACK_USER_ID</span><span class="dl">"</span><span class="p">:</span> <span class="nx">slack</span><span class="p">.</span><span class="nf">fetchUserID</span><span class="p">(</span><span class="nx">email</span><span class="p">)</span>
  <span class="p">});</span>
</pre></table></code></div></div><p>也可以加入自己的必填條件驗證，這邊只驗證一定要填分支，不然會跳錯誤訊息。</p><p>如果認為這樣不夠安全可以自己再加入密碼驗證或只有特殊帳號可以使用。</p><blockquote><p><em>最後一行 <strong>Slack 通知功能需要設定好 Slack</strong> ，如果沒有 Slack Bot App 或懶得串接 Slack，在 <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions" target="_blank">Demo Actions Repo</a> 中可以直接改用 <code class="language-plaintext highlighter-rouge">iOSGitHub.dispatchWorkflow("CD-Deploy.yml")</code> 然後移除掉 <code class="language-plaintext highlighter-rouge">SLACK_USER_ID</code> 參數即可。</em></p></blockquote><p><strong>重新整理測試用「網頁應用程式」網址查看改動是否正確：</strong></p><p><a href="/assets/4273e57e7148/1*OkJJrssZBcJPss_cMW-Qew.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*OkJJrssZBcJPss_cMW-Qew.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTQiIGhlaWdodD0iNzExIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>可以看到打包表單就只剩 Opened PR List 了。</p><p><strong>填好資料按「送出請求」測試看看打包表單：</strong></p><p><a href="/assets/4273e57e7148/1*dl-g3j6GH0AnYL8dqvSyYA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*dl-g3j6GH0AnYL8dqvSyYA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MjMiIGhlaWdodD0iMjUyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>提示送出成功代表沒問題，回到打包紀錄也能看到任務開始執行了 <em>🎉</em></strong> ：</p><p><a href="/assets/4273e57e7148/1*cByPF6T8WdXKionifRj1Ew.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*cByPF6T8WdXKionifRj1Ew.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NTkiIGhlaWdodD0iMzgzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p><em>重複點打包紀錄能更新進度。</em></p></blockquote><p><strong>常見送出錯誤：</strong></p><blockquote><p><code class="language-plaintext highlighter-rouge">Required input ‘SLACK_USER_ID’ not provided</code> <em>: GitHub Actions 這個SLACK_USER_ID 欄位為必填，但沒有帶，可能是 Slack 設定失敗、當前 User Email 找不到對應的 Slack UID。</em></p></blockquote><blockquote><p><em><code class="language-plaintext highlighter-rouge">Workflow does not have ‘workflow_dispatch’ trigger</code> 、 <code class="language-plaintext highlighter-rouge">分支過舊，請更新 xxx 分支</code> : 選擇的分支找不到對應的 Action Workflow 檔案(iOSGitHub.dispatchWorkflow 指定的檔案)。</em></p></blockquote><blockquote><p><em><code class="language-plaintext highlighter-rouge">No ref found for</code> 、 <code class="language-plaintext highlighter-rouge">找不到分支</code> : 找不到此分支。</em></p></blockquote><h3 id="firebase-app-distribution--取得下載連結串接"><span class="me-2">Firebase App Distribution — 取得下載連結串接</span><a href="#firebase-app-distribution--取得下載連結串接" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>最後一個小功能是串接 Firebase App Distribution 直接取得下載資訊跟連結，方便在手機上開啟打包平台工具點擊直接下載安裝。</p><blockquote><p><em>之前介紹過「 <a href="/posts/zrealm-robotic-process-automation/google-apps-script-%E5%BF%AB%E9%80%9F%E4%B8%B2%E6%8E%A5-firebase-app-distribution-api-%E6%95%99%E5%AD%B8%E8%88%87%E9%80%B2%E9%9A%8E%E8%A8%AD%E5%AE%9A-71400d408dc8/">Google Apps Script x Google APIs 快速串接整合方式</a> 」GAS 能快速無痛整合 Firebase。</em></p></blockquote><h4 id="串接原理"><span class="me-2"><strong>串接原理</strong></span><a href="#串接原理" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p><strong><em>在串接之前先講一下這個「Tricky」的串接原理。</em></strong></p></blockquote><p>我們的打包平台是沒有資料庫的，純做 API 中繼站；所以實際上是我們在 <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/actions/workflows/CD-Deploy.yml" target="_blank"><strong>GitHub Acitons CD-Deploy.yml</strong></a> 打包作業時，把 Job Run ID 帶入到 Release Note (當然也可以帶到 Build Number)：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="nv">ID</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="p">{ github.run_id </span><span class="k">}</span><span class="s2">}"</span> // Job Run ID
<span class="nv">COMMIT_SHA</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="p">{ github.sha </span><span class="k">}</span><span class="s2">}"</span>
<span class="nv">BRANCH_NAME</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="p">{ github.ref_name </span><span class="k">}</span><span class="s2">}"</span>
<span class="nv">AUTHOR</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="p">{ env.AUTHOR </span><span class="k">}</span><span class="s2">}"</span>

<span class="c"># 組合 Release Note</span>
<span class="nv">RELEASE_NOTE</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="p">{ env.RELEASE_NOTE </span><span class="k">}</span><span class="s2">}
ID: </span><span class="k">${</span><span class="nv">ID</span><span class="k">}</span><span class="s2">
Commit SHA: </span><span class="k">${</span><span class="nv">COMMIT_SHA</span><span class="k">}</span><span class="s2">
Branch: </span><span class="k">${</span><span class="nv">BRANCH_NAME</span><span class="k">}</span><span class="s2">
Author: </span><span class="k">${</span><span class="nv">AUTHOR</span><span class="k">}</span><span class="s2">
"</span>

<span class="c"># 執行 Fastlane 打包＆部署 Lane</span>
bundle <span class="nb">exec </span>fastlane beta release_notes:<span class="s2">"</span><span class="k">${</span><span class="nv">RELEASE_NOTE</span><span class="k">}</span><span class="s2">"</span> version_number:<span class="s2">"</span><span class="k">${</span><span class="nv">VERSION_NUMBER</span><span class="k">}</span><span class="s2">"</span> build_number:<span class="s2">"</span><span class="k">${</span><span class="nv">BUILD_NUMBER</span><span class="k">}</span><span class="s2">"</span>
</pre></table></code></div></div><p>這樣 Firebase App Distribution Release Notes 就會有 Job Run ID。</p><p>GAS Web App 打包工具平台會串 GitHub API 取得 GitHub Actions 執行紀錄我們直接用 API 給的 Job Run ID 帶到 Firebase App Distribution API 查詢 Release Notes 中有包含 <code class="language-plaintext highlighter-rouge">*ID: XXX*</code> 的版本，就能找到對應的打包紀錄了。</p><p><strong>不用任何資料庫也能做到兩個工具平台的對應。</strong></p><p><a href="/assets/4273e57e7148/1*AJRMWv_rqu64H0ZrY4q6QA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*AJRMWv_rqu64H0ZrY4q6QA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTkiIGhlaWdodD0iMzQ3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4273e57e7148/1*Sdzt1MDXh7TNnMDkpc5uJg.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*Sdzt1MDXh7TNnMDkpc5uJg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDU1IiBoZWlnaHQ9IjcwMiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h4 id="串接專案設定"><span class="me-2">串接專案設定</span><a href="#串接專案設定" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>到 GAS → 專案設定 → Google Cloud Platform (GCP) 專案 → 變更專案：</p><p><a href="/assets/4273e57e7148/1*klclBbiBQXNBzbzzj1jH0Q.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*klclBbiBQXNBzbzzj1jH0Q.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTQwIiBoZWlnaHQ9IjExMTUiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="/assets/4273e57e7148/1*gv8m_v5O_yyUrq8uQoverQ.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*gv8m_v5O_yyUrq8uQoverQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDg2IiBoZWlnaHQ9IjYzMiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>輸入想串接的 Firebase 專案編號。</p><p><a href="/assets/4273e57e7148/1*OEaxA6SZWYbiVstOK60hQg.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*OEaxA6SZWYbiVstOK60hQg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjAiIGhlaWdodD0iNDQ0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p><strong><em>初次設定可能會跳錯誤</em></strong> <em>「如要變更專案，請設定 OAuth 同意畫面。設定 OAuth 同意畫面詳細資料。」沒有的話可跳過以下步驟。</em></p></blockquote><p><strong>點擊「OAuth 同意畫面詳細資料」連結 → 點擊「設定同意畫面」：</strong></p><p><a href="/assets/4273e57e7148/1*oiZeO5mEqH-D3tHrJsnE1A.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*oiZeO5mEqH-D3tHrJsnE1A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTQ5IiBoZWlnaHQ9IjY3NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><strong>點擊「開始」:</strong></p><p><a href="/assets/4273e57e7148/1*NK9RG0kaXoxJB5X-B8vhww.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*NK9RG0kaXoxJB5X-B8vhww.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjIiIGhlaWdodD0iNTUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>應用程式資訊:</strong></p><ul><li>應用程式名稱: <code class="language-plaintext highlighter-rouge">輸入你的工具名稱</code><li>使用者支援電子郵件: <code class="language-plaintext highlighter-rouge">選擇電子郵件</code></ul><p><strong>目標對象:</strong></p><ul><li>內部：僅限組織內部夥伴使用<li>外部：所有 Google 帳戶使用者都能同意授權後使用</ul><p><strong>聯絡資訊:</strong></p><ul><li>輸入接收通知用電子郵件</ul><p><strong>勾選同意《 <a href="https://developers.google.com/terms/api-services-user-data-policy?hl=zh_TW" target="_blank">Google API 服務：使用者資料政策</a> 》。</strong></p><p>最後點擊「 <strong>建立</strong> 」。</p><p>—</p><p>回到 GAS → 專案設定 → Google Cloud Platform (GCP) 專案 → 變更專案：</p><p>再次輸入 Firebase 專案編號點擊「變更專案」。</p><p><a href="/assets/4273e57e7148/1*g-Lo04WjhaDjtXeXthNtDg.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*g-Lo04WjhaDjtXeXthNtDg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NzkiIGhlaWdodD0iMjcyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>沒出現錯誤就是完成綁定了。</strong></p><p>—</p><p><strong>如果選擇的是「外部」可能還需要完成以下設定：</strong></p><p>點擊「專案編號」 → 展開左側欄 → 「API 和服務」→ 「OAuth 同意畫面」</p><p><a href="/assets/4273e57e7148/1*RJNQv8v3KZoTcVwUbsXSHQ.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*RJNQv8v3KZoTcVwUbsXSHQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDgiIGhlaWdodD0iNzE5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>選擇「目標對象」 → 測試 點擊「發布應用程式」→ 完成。</p><p><a href="/assets/4273e57e7148/1*8vqrxhchsILPy4eSdvXfNg.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*8vqrxhchsILPy4eSdvXfNg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MjYiIGhlaWdodD0iNDQ1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p><em>使用者就能照前文的「 <strong>使用者首次使用需要同意授權</strong> 」步驟完成授權就能使用了！</em></p></blockquote><p><strong>如果上述步驟沒設定，使用者會遇到以下錯誤：</strong></p><p><a href="/assets/4273e57e7148/1*2omUPFoubsrXVLHBPFkPbg.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*2omUPFoubsrXVLHBPFkPbg.webp" alt="已封鎖存取權「XXX」未完成 Google 驗證程序" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjYiIGhlaWdodD0iNjczIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>已封鎖存取權「XXX」未完成 Google 驗證程序</p><p>— — —</p><h4 id="串接專案"><span class="me-2">串接專案</span><a href="#串接專案" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>回到串接上，Firebase 是直接用 <code class="language-plaintext highlighter-rouge">ScriptApp.getOAuthToken()</code> 依照執行身份動態取得 Token 使用，因此不需要設定 Token。</p><p>只需要到 GAS 專案 → <code class="language-plaintext highlighter-rouge">Settings.gs</code> → 將：</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">iOSFirebase</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FirebaseStub</span><span class="p">(</span><span class="nx">iOSFirebaseProject</span><span class="p">);</span>
</pre></table></code></div></div><p><strong>改成</strong></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">iOSFirebase</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Firebase</span><span class="p">(</span><span class="nx">iOSFirebaseProject</span><span class="p">);</span>
</pre></table></code></div></div><p>即可。</p><p><strong>重新整理測試用「網頁應用程式」網址到打包紀錄 → 找一筆紀錄點擊「取得下載連結」：</strong></p><p><a href="/assets/4273e57e7148/1*9z-KsIAL5jyEzQvJv3YLgg.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*9z-KsIAL5jyEzQvJv3YLgg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTMiIGhlaWdodD0iNDUyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/4273e57e7148/1*q0HUYN2W3UonQLzwxZKXdQ.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*q0HUYN2W3UonQLzwxZKXdQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>如果有在 Firebase App Distribution Release Notes 找到對應的 Job Run Id 打包，就會直接顯示下載資訊跟點下載能直接導到下載頁。</p><blockquote><p>完成！🎉🎉🎉</p></blockquote><h3 id="成果"><span class="me-2">成果</span><a href="#成果" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/4273e57e7148/1*znvPmqsaivk3KhsE26sFwA.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*znvPmqsaivk3KhsE26sFwA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDEwIiBoZWlnaHQ9Ijc2NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>至此你已經把範例都改成您的實際可用的打包工具，剩下的客製化功能、更多第三方 API 串接、更多表單可以自行延伸 (跟 ChatGPT 討論)。</p><blockquote><p><em>最後不要忘記都開發好測試完畢要上線，需要照前文步驟 — <strong>更新部署作業才會生效喔！</strong></em></p></blockquote><h3 id="串接延伸"><span class="me-2">串接延伸</span><a href="#串接延伸" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>延續我們「中繼站」角色的精神，這邊提供幾個快速串接的 CheatSheet：</p><p><a href="https://developers.asana.com/reference/gettasksforproject" target="_blank"><strong>Asana API — 取得 Tasks:</strong></a></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>
<span class="kd">function</span> <span class="nf">asanaAPI</span><span class="p">(</span><span class="nx">endPoint</span><span class="p">,</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="nx">method</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
          <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span>  <span class="dl">"</span><span class="s2">Bearer </span><span class="dl">"</span><span class="o">+</span><span class="nx">asanaToken</span>
      <span class="p">},</span>
      <span class="dl">"</span><span class="s2">payload</span><span class="dl">"</span> <span class="p">:</span> <span class="nx">data</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://app.asana.com/api/1.0</span><span class="dl">"</span><span class="o">+</span><span class="nx">endPoint</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">UrlFetchApp</span><span class="p">.</span><span class="nf">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nf">getContentText</span><span class="p">());</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">asanaAPI</span><span class="p">(</span><span class="dl">"</span><span class="s2">/projects/{project_gid}/tasks</span><span class="dl">"</span><span class="p">)</span>
</pre></table></code></div></div><p><a href="https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#about" target="_blank"><strong>Jira API — 取得 Tickets (JQL):</strong></a></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre><td class="rouge-code"><pre><span class="c1">// jql = 篩選條件</span>
<span class="kd">function</span> <span class="nf">jiraTickets</span><span class="p">(</span><span class="nx">jql</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">`https://xxx.atlassian.net/rest/api/3/search`</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">maxResults</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>

  <span class="kd">let</span> <span class="nx">allIssues</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">let</span> <span class="nx">startAt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">do</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">queryParams</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">jql</span><span class="p">:</span> <span class="nx">jql</span><span class="p">,</span>
      <span class="na">startAt</span><span class="p">:</span> <span class="nx">startAt</span><span class="p">,</span>
      <span class="na">maxResults</span><span class="p">:</span> <span class="nx">maxResults</span><span class="p">,</span>
      <span class="na">fields</span><span class="p">:</span> <span class="dl">"</span><span class="s2">assignee,summary,status</span><span class="dl">"</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">queryString</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nf">keys</span><span class="p">(</span><span class="nx">queryParams</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">key</span> <span class="o">=&gt;</span> <span class="s2">`</span><span class="p">${</span><span class="nf">encodeURIComponent</span><span class="p">(</span><span class="nx">key</span><span class="p">)}</span><span class="s2">=</span><span class="p">${</span><span class="nf">encodeURIComponent</span><span class="p">(</span><span class="nx">queryParams</span><span class="p">[</span><span class="nx">key</span><span class="p">])}</span><span class="s2">`</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="dl">"</span><span class="s2">&amp;</span><span class="dl">"</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">get</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">Authorization</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Basic </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">jiraToken</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="na">muteHttpExceptions</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">UrlFetchApp</span><span class="p">.</span><span class="nf">fetch</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">url</span><span class="p">}</span><span class="s2">?</span><span class="p">${</span><span class="nx">queryString</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">json</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nf">getContentText</span><span class="p">());</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nf">getResponseCode</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Failed to fetch Jira issues.</span><span class="dl">"</span><span class="p">);</span> 
    <span class="p">}</span>

    <span class="k">if </span><span class="p">(</span><span class="nx">json</span><span class="p">.</span><span class="nx">issues</span> <span class="o">&amp;&amp;</span> <span class="nx">json</span><span class="p">.</span><span class="nx">issues</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">allIssues</span> <span class="o">=</span> <span class="nx">allIssues</span><span class="p">.</span><span class="nf">concat</span><span class="p">(</span><span class="nx">json</span><span class="p">.</span><span class="nx">issues</span><span class="p">);</span>
      <span class="nx">total</span> <span class="o">=</span> <span class="nx">json</span><span class="p">.</span><span class="nx">total</span><span class="p">;</span>
      <span class="nx">startAt</span> <span class="o">+=</span> <span class="nx">json</span><span class="p">.</span><span class="nx">issues</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">while </span><span class="p">(</span><span class="nx">startAt</span> <span class="o">&lt;</span> <span class="nx">total</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">groupIssues</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">allIssues</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">issue</span> <span class="o">=</span> <span class="nx">allIssues</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">groupIssues</span><span class="p">[</span><span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">groupIssues</span><span class="p">[</span><span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="p">}</span>
    <span class="nx">groupIssues</span><span class="p">[</span><span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">status</span><span class="p">.</span><span class="nx">name</span><span class="p">].</span><span class="nf">push</span><span class="p">(</span><span class="nx">issue</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">groupIssues</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">jiraTickets</span><span class="p">(</span><span class="s2">`project IN(App)`</span><span class="p">);</span>
</pre></table></code></div></div><p><strong>如果真的需要資料庫，可以使用 Google Sheet 代替：</strong></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Saveable</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// https://docs.google.com/spreadsheets/d/Sheet-ID/edit</span>
    <span class="kd">const</span> <span class="nx">spreadsheet</span> <span class="o">=</span> <span class="nx">SpreadsheetApp</span><span class="p">.</span><span class="nf">openById</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sheet-ID</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sheet</span> <span class="o">=</span> <span class="nx">spreadsheet</span><span class="p">.</span><span class="nf">getSheetByName</span><span class="p">(</span><span class="dl">"</span><span class="s2">Data</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// Sheet Name</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nf">write</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sheet</span><span class="p">.</span><span class="nf">appendRow</span><span class="p">([</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
      <span class="nx">key</span><span class="p">,</span>
      <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
    <span class="p">]);</span>
  <span class="p">}</span>

  <span class="nf">read</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">sheet</span><span class="p">.</span><span class="nf">getDataRange</span><span class="p">().</span><span class="nf">getValues</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">row</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="nx">r</span> <span class="o">=&gt;</span> <span class="nx">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">&amp;&amp;</span> <span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="nx">key</span><span class="p">);</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">saveable</span> <span class="o">=</span> <span class="nc">Saveable</span><span class="p">(</span><span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// Write</span>
<span class="nx">saveable</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="dl">"</span><span class="s2">birthday_zhgchgli</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">0718</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// Read</span>
<span class="nx">saveable</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="dl">"</span><span class="s2">birthday_zhgchgli</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// -&gt; 0718</span>
</pre></table></code></div></div><p><a href="https://api.slack.com/methods/chat.postMessage" target="_blank"><strong>Slack API &amp; 發送訊息方法：</strong></a></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre><td class="rouge-code"><pre><span class="kd">function</span> <span class="nf">slackSendMessage</span><span class="p">(</span><span class="nx">channel</span><span class="p">,</span> <span class="nx">text</span> <span class="o">=</span> <span class="dl">""</span><span class="p">,</span> <span class="nx">blocks</span> <span class="o">=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">content</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">channel</span><span class="p">:</span> <span class="nx">channel</span><span class="p">,</span>
    <span class="na">unfurl_links</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">unfurl_media</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">text</span><span class="p">:</span> <span class="nx">text</span><span class="p">,</span>
    <span class="na">blocks</span><span class="p">:</span> <span class="nx">blocks</span>
  <span class="p">};</span>

  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="nf">slackRequest</span><span class="p">(</span><span class="dl">"</span><span class="s2">chat.postMessage</span><span class="dl">"</span><span class="p">,</span> <span class="nx">content</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="s2">`Failed to send Slack message: </span><span class="p">${</span><span class="nx">error</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nf">slackRequest</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">post</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">contentType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">Authorization</span><span class="p">:</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="nx">slackBotToken</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">X-Slack-No-Retry</span><span class="dl">'</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">},</span>
    <span class="na">payload</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>
  <span class="p">};</span>

  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">UrlFetchApp</span><span class="p">.</span><span class="nf">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://slack.com/api/</span><span class="dl">"</span><span class="o">+</span><span class="nx">path</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">responseData</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nf">getContentText</span><span class="p">());</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">responseData</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">responseData</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="s2">`Slack: </span><span class="p">${</span><span class="nx">responseData</span><span class="p">.</span><span class="nx">error</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h4 id="更多-google-apps-script-案例"><span class="me-2">更多 Google Apps Script 案例：</span><a href="#更多-google-apps-script-案例" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><a href="/posts/zrealm-robotic-process-automation/google-apps-script-%E5%BF%AB%E9%80%9F%E4%B8%B2%E6%8E%A5-firebase-app-distribution-api-%E6%95%99%E5%AD%B8%E8%88%87%E9%80%B2%E9%9A%8E%E8%A8%AD%E5%AE%9A-71400d408dc8/">Google Apps Script x Google APIs 快速串接整合方式</a><li><a href="/posts/zrealm-robotic-process-automation/ga4-%E8%87%AA%E5%8B%95%E6%95%B8%E6%93%9A%E9%80%9A%E7%9F%A5%E6%A9%9F%E5%99%A8%E4%BA%BA-3-%E6%AD%A5%E9%A9%9F%E7%94%A8-google-apps-script-%E4%B8%B2%E6%8E%A5-telegram-bot-1e85b8df2348/">簡單 3 步驟 — 打造免費 GA4 自動數據通知機器人</a><li><a href="/posts/zrealm-robotic-process-automation/google-apps-script-%E6%89%93%E9%80%A0%E6%AF%8F%E6%97%A5%E6%95%B8%E6%93%9A%E5%A0%B1%E8%A1%A8%E8%87%AA%E5%8B%95%E5%8C%96-rpa-%E5%BF%AB%E9%80%9F%E4%B8%B2%E6%8E%A5-google-analytics-%E8%88%87-google-sheet-f6713ba3fee3/">使用 Google Apps Script 實現每日數據報表 RPA 自動化</a><li><a href="/posts/zrealm-dev/slack-app-%E6%95%B4%E5%90%88-chatgpt-%E5%88%A9%E7%94%A8-openai-api-%E8%88%87-google-cloud-functions-%E8%87%AA%E5%BB%BA%E6%99%BA%E8%83%BD%E5%8A%A9%E7%90%86-bd94cc88f9c9/">Slack &amp; ChatGPT Integration</a><li><a href="/posts/zrealm-dev/google-apps-script-%E4%B8%89%E6%AD%A5%E9%A9%9F%E6%89%93%E9%80%A0%E5%85%8D%E8%B2%BB-github-repo-star-%E9%80%9A%E7%9F%A5%E5%99%A8-%E5%AF%A6%E6%99%82%E7%8D%B2%E5%8F%96-star-%E5%8B%95%E6%85%8B-382218e15697/">使用 Google Apps Script 三步驟免費建立 Github Repo Star Notifier</a><li><a href="/posts/zrealm-dev/crashlytics%E8%88%87google-analytics%E8%87%AA%E5%8B%95%E6%9F%A5%E8%A9%A2app-crash-free-users-rate-google-apps-script%E6%95%B4%E5%90%88%E5%AF%A6%E4%BD%9C-793cb8f89b72/">Crashlytics + Google Analytics 自動查詢 App Crash-Free Users Rate</a><li><a href="/posts/zrealm-dev/crashlytics-big-query-%E4%B8%B2%E6%8E%A5%E6%95%99%E5%AD%B8-%E8%87%AA%E5%8B%95%E6%9F%A5%E8%A9%A2%E4%B8%A6%E8%BD%89%E7%99%BC-ios-app-%E9%96%83%E9%80%80%E5%A0%B1%E5%91%8A%E5%88%B0-slack-e77b80cc6f89/">Crashlytics + Big Query 打造更即時便利的 Crash 追蹤工具</a></ul><h3 id="總結"><span class="me-2">總結</span><a href="#總結" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>感謝您的耐心閱讀與參與，CI/CD 從 0 到 1 系列文章到此告一段落；希望能實際幫助到您與您的團隊建置完善的 CI/CD 工作流程，提升效率與產品穩定性；有任何實作問題歡迎留言討論，這四篇文章大約花了 14+ 天撰寫， <strong>如果您覺得不錯歡迎 Follow 我的 Medium 和與朋友同事分享</strong> 。</p><blockquote><p>謝謝。</p></blockquote><h4 id="buy-me-a-coffee"><span class="me-2"><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank">Buy me a coffee</a></span><a href="#buy-me-a-coffee" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank"><strong><em>本系列文章花費了大量的時間精力撰寫，如果內容對您有幫助、對您的團隊有實質提升工作效率與產品品質；歡迎請我喝杯咖啡，感謝支持！</em></strong></a></p></blockquote><p><a href="/assets/4273e57e7148/1*QJj54G9gOjtQS-rbHVT1SQ.webp" class="popup img-link blur"><img data-src="/assets/4273e57e7148/1*QJj54G9gOjtQS-rbHVT1SQ.webp" alt="[Buy me a coffee](https://www.buymeacoffee.com/zhgchgli){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MDAiIGhlaWdodD0iNzAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank">Buy me a coffee</a></p><h4 id="系列文章"><span class="me-2">系列文章：</span><a href="#系列文章" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><a href="/posts/zrealm-dev/ci-cd-%E6%98%AF%E4%BB%80%E9%BA%BC-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A9%A9%E5%AE%9A%E9%96%8B%E7%99%BC%E5%9C%98%E9%9A%8A%E7%9A%84%E9%97%9C%E9%8D%B5%E6%B5%81%E7%A8%8B%E8%88%87%E5%B7%A5%E5%85%B7%E9%81%B8%E6%93%87-c008a9e8ceca/"><strong>CI/CD 實戰指南（一）：CI/CD 是什麼？如何透過 CI/CD 打造穩定高效的開發團隊？工具選擇？</strong></a><li><a href="/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/"><strong>CI/CD 實戰指南（二）：GitHub Actions 與 self-hosted Runner 使用與建置大全</strong></a><li><a href="/posts/zrealm-dev/github-actions-ios-ci-cd-%E5%AE%8C%E6%95%B4%E5%AF%A6%E4%BD%9C%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E7%BD%AE-%E6%B8%AC%E8%A9%A6%E8%88%87%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%E6%95%99%E5%AD%B8-4b001d2e8440/"><strong>CI/CD 實戰指南（三）：使用 GitHub Actions 實作 App 專案的 CI 與 CD 工作流程</strong></a><li><a href="/posts/zrealm-dev/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87-4273e57e7148/"><strong>CI/CD 實戰指南（四）：使用 Google Apps Script Web App 串接 GitHub Actions 建置免費易用的打包工具平台</strong></a></ul><p>有任何問題及指教歡迎 <a href="https://www.zhgchg.li/contact" target="_blank">與我聯絡</a> 。</p><hr /><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=🍺&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a><br /></p><blockquote class="prompt-info"><p>本文首次發表於 Medium (<a href="https://medium.com/p/4273e57e7148" target="_blank"><strong>點此查看原始版本</strong></a>)，由 <a href="/posts/tools/medium-to-jekyll/" target="_blank">ZMediumToMarkdown</a> 提供自動轉換與同步技術。</p></blockquote><blockquote class="prompt-info"><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/zh-tw/zmediumtomarkdown/2025-07-10-4273e57e7148.md" target="_blank">Improve this page on Github.</a></p></blockquote><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1K+ Followers</span></a></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/cicd/" class="post-tag no-text-decoration" >cicd</a> <a href="/tags/google-apps-script/" class="post-tag no-text-decoration" >google-apps-script</a> <a href="/tags/web-development/" class="post-tag no-text-decoration" >web-development</a> <a href="/tags/tools/" class="post-tag no-text-decoration" >tools</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=CI/CD%20%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0%EF%BD%9C%E4%BD%BF%E7%94%A8%20Google%20Apps%20Script%20Web%20App%20%E4%B8%B2%E6%8E%A5%20GitHub%20Actions%20%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fci-cd-%25E6%2589%2593%25E5%258C%2585%25E5%25B7%25A5%25E5%2585%25B7%25E5%25B9%25B3%25E5%258F%25B0-%25E4%25BD%25BF%25E7%2594%25A8-google-apps-script-web-app-%25E4%25B8%25B2%25E6%258E%25A5-github-actions-%25E6%258F%2590%25E5%258D%2587%25E8%25B7%25A8%25E5%259C%2598%25E9%259A%258A%25E6%2595%2588%25E7%258E%2587-4273e57e7148%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=CI/CD%20%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0%EF%BD%9C%E4%BD%BF%E7%94%A8%20Google%20Apps%20Script%20Web%20App%20%E4%B8%B2%E6%8E%A5%20GitHub%20Actions%20%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9C%98%E9%9A%8A%E6%95%88%E7%8E%87%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fci-cd-%25E6%2589%2593%25E5%258C%2585%25E5%25B7%25A5%25E5%2585%25B7%25E5%25B9%25B3%25E5%258F%25B0-%25E4%25BD%25BF%25E7%2594%25A8-google-apps-script-web-app-%25E4%25B8%25B2%25E6%258E%25A5-github-actions-%25E6%258F%2590%25E5%258D%2587%25E8%25B7%25A8%25E5%259C%2598%25E9%259A%258A%25E6%2595%2588%25E7%258E%2587-4273e57e7148%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fci-cd-%25E6%2589%2593%25E5%258C%2585%25E5%25B7%25A5%25E5%2585%25B7%25E5%25B9%25B3%25E5%258F%25B0-%25E4%25BD%25BF%25E7%2594%25A8-google-apps-script-web-app-%25E4%25B8%25B2%25E6%258E%25A5-github-actions-%25E6%258F%2590%25E5%258D%2587%25E8%25B7%25A8%25E5%259C%2598%25E9%259A%258A%25E6%2595%2588%25E7%258E%2587-4273e57e7148%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/en/tokyo-area-travel-guide-kawagoe-little-edo-atami-fireworks-festival-5-day-itinerary-958599363857/">Tokyo Area Travel Guide｜Kawagoe Little Edo & Atami Fireworks Festival 5-Day Itinerary</a><li class="text-truncate lh-lg"> <a href="/posts/zh-cn/%E4%B8%9C%E4%BA%AC%E8%87%AA%E7%94%B1%E8%A1%8C%E6%94%BB%E7%95%A5-%E5%B7%9D%E8%B6%8A%E5%B0%8F%E6%B1%9F%E6%88%B7%E4%B8%80%E6%97%A5%E6%B8%B8%E4%B8%8E%E7%83%AD%E6%B5%B7%E6%B5%B7%E4%B8%8A%E8%8A%B1%E7%81%AB%E5%A4%A7%E4%BC%9A%E5%85%A8%E7%BA%AA%E5%BD%95-958599363857/">游记 2025 东京地区 — 川越小江户与热海海上花火大会 5 日自由行</a><li class="text-truncate lh-lg"> <a href="/posts/%E6%9D%B1%E4%BA%AC%E8%87%AA%E7%94%B1%E8%A1%8C%E6%94%BB%E7%95%A5-%E5%B7%9D%E8%B6%8A%E5%B0%8F%E6%B1%9F%E6%88%B6%E4%B8%80%E6%97%A5%E9%81%8A%E8%88%87%E7%86%B1%E6%B5%B7%E6%B5%B7%E4%B8%8A%E8%8A%B1%E7%81%AB%E5%A4%A7%E6%9C%83%E5%85%A8%E7%B4%80%E9%8C%84-958599363857/">遊記 2025 東京地區 — 川越小江戶與熱海海上花火大會 5 日自由行</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/en/line-bank-to-firstrade-transfer-fast-deposit-150-nt-fee-guide-with-account-upgrade-fee-subsidy-e4d139fe0685/">LINE Bank to Firstrade Transfer｜Fast Deposit & 150 NT Fee Guide with Account Upgrade & Fee Subsidy</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/zh-cn/line-bank-%E5%85%A5%E9%87%91-firstrade-%E6%95%99%E5%AD%A6-%E5%BF%AB%E9%80%9F%E5%88%B0%E5%B8%90-%E4%BD%8E%E6%89%8B%E7%BB%AD%E8%B4%B9150%E5%85%83-%E5%B8%90%E6%88%B7%E5%8D%87%E7%BA%A7%E4%B8%8E%E6%89%8B%E7%BB%AD%E8%B4%B9%E8%A1%A5%E5%8A%A9%E7%94%B3%E8%AF%B7%E5%85%A8%E6%94%BB%E7%95%A5-e4d139fe0685/">手把手教学 — LINE Bank 入金 Firstrade 快速到帐、手续费只要 150 元及帐户升级/约定转帐/手续费补助申请教学</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">章節 (Chapters)🔖</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/zh-cn/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9B%A2%E9%98%9F%E6%95%88%E7%8E%87-4273e57e7148/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1752150651" data-df="ll" > Jul 10, 2025 </time><h4 class="pt-0 my-2">CI/CD 打包工具平台｜使用 Google Apps Script Web App 串接 GitHub Actions 提升跨团队效率</h4><div class="text-muted"><p>打造免费且易用的打包工具平台，解决非工程人员操作 GitHub Actions 的复杂性与权限控管问题，透过 Google Apps Script Web App 整合 GitHub、Slack、Firebase 等 API，实现跨团队任务单打包与即时进度通知，提升开发与验证效率。</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/en/ci-cd-guide-integrate-google-apps-script-web-app-with-github-actions-for-free-packaging-platform-4273e57e7148/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1752150651" data-df="ll" > Jul 10, 2025 </time><h4 class="pt-0 my-2">CI/CD Guide｜Integrate Google Apps Script Web App with GitHub Actions for Free Packaging Platform</h4><div class="text-muted"><p>Developers facing complex CI/CD workflows can leverage Google Apps Script Web App integrated with GitHub Actions to build a free, user-friendly packaging tool platform that streamlines team collabo...</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/google-apps-script-%E6%95%99%E5%AD%B8-%E8%87%AA%E5%8B%95%E8%BD%89%E7%99%BC-gmail-%E9%83%B5%E4%BB%B6%E5%88%B0-slack-channel-%E5%AE%A2%E8%A3%BD%E5%8C%96%E9%80%9A%E7%9F%A5-d414bdbdb8c9/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1628338789" data-df="ll" > Aug 7, 2021 </time><h4 class="pt-0 my-2">Google Apps Script 教學｜自動轉發 Gmail 郵件到 Slack Channel 客製化通知</h4><div class="text-muted"><p>透過 Gmail 篩選器結合 Google Apps Script，自動抓取指定郵件並轉成自訂格式推送到 Slack，解決等待 App Store 處理時間長、CI/CD 流程卡關問題，提升工作效率與即時通知掌握度。</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/zh-cn/ci-cd-%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B9%B3%E5%8F%B0-%E4%BD%BF%E7%94%A8-google-apps-script-web-app-%E4%B8%B2%E6%8E%A5-github-actions-%E6%8F%90%E5%8D%87%E8%B7%A8%E5%9B%A2%E9%98%9F%E6%95%88%E7%8E%87-4273e57e7148/" class="btn btn-outline-primary" aria-label="Older" ><p>CI/CD 打包工具平台｜使用 Google Apps Script Web App 串接 GitHub Actions 提升跨团队效率</p></a> <a href="/posts/zrealm-dev/en/google-offerwall-ads-boost-content-creator-revenue-with-minimal-restrictions-ba132457e6a5/" class="btn btn-outline-primary" aria-label="Newer" ><p>Google Offerwall Ads｜Boost Content Creator Revenue with Minimal Restrictions</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span> <a href="/">中文</a>|<a href="/tags/simplified-chinese">简中</a>|<a href="/tags/english/">English</a></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a> <br/></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
