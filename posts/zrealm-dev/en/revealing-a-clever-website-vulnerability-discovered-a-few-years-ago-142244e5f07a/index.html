<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="Revealing a Clever Website Vulnerability Discovered a Few Years Ago" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="Website security issues caused by the combination of multiple vulnerabilities" /><meta property="og:description" content="Website security issues caused by the combination of multiple vulnerabilities" /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/en/revealing-a-clever-website-vulnerability-discovered-a-few-years-ago-142244e5f07a/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/en/revealing-a-clever-website-vulnerability-discovered-a-few-years-ago-142244e5f07a/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/142244e5f07a/1*EQPani1J-PTO-ccp588gBg.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-02-22T21:27:06+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/142244e5f07a/1*EQPani1J-PTO-ccp588gBg.webp" /><meta property="twitter:title" content="Revealing a Clever Website Vulnerability Discovered a Few Years Ago" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://medium.com/@zhgchgli/"},"dateModified":"2023-08-06T00:45:45+08:00","datePublished":"2021-02-22T21:27:06+08:00","description":"Website security issues caused by the combination of multiple vulnerabilities","headline":"Revealing a Clever Website Vulnerability Discovered a Few Years Ago","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjgwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg==","url":"https://zhgchg.li/assets/142244e5f07a/1*EQPani1J-PTO-ccp588gBg.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/en/revealing-a-clever-website-vulnerability-discovered-a-few-years-ago-142244e5f07a/"},"url":"https://zhgchg.li/posts/zrealm-dev/en/revealing-a-clever-website-vulnerability-discovered-a-few-years-ago-142244e5f07a/"}</script><title>Revealing a Clever Website Vulnerability Discovered a Few Years Ago | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0"> <a href="https://medium.com/@zhgchgli" target="_blank" style="display: block;text-align: center;font-style: normal;/* text-decoration: underline; */font-size: 1.2em;color: var(--heading-color);">1K+ Followers on Medium</a> An iOS, web, and automation developer from Taiwan 🇹🇼 who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Revealing a Clever Website Vulnerability Discovered a Few Years Ago</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Revealing a Clever Website Vulnerability Discovered a Few Years Ago</h1><p class="post-desc fw-light mb-4">Website security issues caused by the combination of multiple vulnerabilities</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1614000426" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 22, 2021 </time> </span> <span> Updated <time data-ts="1691253945" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Aug 5, 2023 </time> </span><div class="mt-3 mb-3"> <a href="/assets/142244e5f07a/1*EQPani1J-PTO-ccp588gBg.webp" class="popup img-link preview-img blur"><img data-src="/assets/142244e5f07a/1*EQPani1J-PTO-ccp588gBg.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjgwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://medium.com/@zhgchgli/">ZhgChgLi</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1215 words" > <em>6 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Revealing a Clever Website Vulnerability Discovered a Few Years Ago</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Revealing a Clever Website Vulnerability Discovered a Few Years Ago</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><hr /><h3 id="ℹ️ℹ️ℹ️-the-following-content-is-translated-by-openai"><span class="me-2">ℹ️ℹ️ℹ️ The following content is translated by OpenAI.</span><a href="#ℹ️ℹ️ℹ️-the-following-content-is-translated-by-openai" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="click-here-to-view-the-original-chinese-version--點此查看本文中文版"><span class="me-2"><a href="/posts/142244e5f07a/">Click here</a> to view the original Chinese version. | <a href="/posts/142244e5f07a/">點此查看本文中文版</a></span><a href="#click-here-to-view-the-original-chinese-version--點此查看本文中文版" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><h3 id="revealing-a-clever-website-vulnerability-discovered-a-few-years-ago"><span class="me-2">Revealing a Clever Website Vulnerability Discovered a Few Years Ago</span><a href="#revealing-a-clever-website-vulnerability-discovered-a-few-years-ago" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Website security issues caused by the combination of multiple vulnerabilities</p><p><a href="/assets/142244e5f07a/1*EQPani1J-PTO-ccp588gBg.webp" class="popup img-link blur"><img data-src="/assets/142244e5f07a/1*EQPani1J-PTO-ccp588gBg.webp" alt="Photo by [Tarik Haiga](https://unsplash.com/@tar1k?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjgwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Photo by <a href="https://unsplash.com/@tar1k?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank">Tarik Haiga</a></p><h3 id="introduction"><span class="me-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>A few years ago, while still supporting web development, I was assigned the task of organizing a CTF competition for the internal engineering team; initially, I thought of organizing teams based on the company’s products for mutual attacks and defenses. However, as the organizer, I wanted to first understand the level of knowledge, so I conducted penetration tests on the various products under the company; I wanted to see how many vulnerabilities I could find to ensure the event would run smoothly.</p><blockquote><p><em>However, due to limited competition time and significant differences between engineering areas, I ultimately decided to create questions based on common foundational knowledge and interesting directions. Interested friends can refer to my previous article “<a href="/posts/en/729d7b6817a4/"><strong>How to Create an Interesting Engineering CTF Competition</strong></a>,” which contains many creative questions!</em></p></blockquote><h3 id="vulnerabilities-found"><span class="me-2">Vulnerabilities Found</span><a href="#vulnerabilities-found" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>I found a total of four vulnerabilities across three products. In addition to the issues discussed in this article, I also discovered the following three common website vulnerabilities:</p><ol><li><strong>Never Trust The Client!</strong><br /> This is a basic issue where the frontend directly sends the ID to the backend, and the backend accepts it without verification; it should be changed to verify a Token.<li><strong>Password Reset Design Flaw</strong><br /> I actually forgot the specifics, but I remember it was a programming flaw that allowed the password reset process to bypass email verification.<li><strong>XSS Issue</strong><li><strong>The Vulnerability Discussed in This Article</strong></ol><p>The search method was entirely black-box testing, and the only product where I found the XSS issue was one I had participated in developing; I had no involvement with the code of the others.</p><h3 id="current-status-of-the-vulnerabilities"><span class="me-2">Current Status of the Vulnerabilities</span><a href="#current-status-of-the-vulnerabilities" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>As a white-hat hacker, I reported all the issues I found to the engineering team immediately, and they have been fixed. Now that two years have passed, I think it’s time to make this public; however, considering the position of my former company, I will not mention which product had this vulnerability. Everyone can just refer to the process and reasons for discovering this vulnerability!</p><h3 id="consequences-of-the-vulnerability"><span class="me-2">Consequences of the Vulnerability</span><a href="#consequences-of-the-vulnerability" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>This vulnerability allows an attacker to change the target user’s password at will and log in to the target user’s account using the new password, thereby stealing personal data and engaging in illegal activities.</p><h3 id="main-causes-of-the-vulnerability"><span class="me-2">Main Causes of the Vulnerability</span><a href="#main-causes-of-the-vulnerability" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>As the title suggests, this vulnerability was triggered by a combination of multiple factors, including:</p><ul><li>Account login does not support two-factor authentication or device binding<li>Password reset verification uses a serial number<li>The website’s data encryption feature has a decryption vulnerability<li>Misuse of encryption and decryption functions<li>Incorrect design of the verification token<li>The backend does not re-verify the correctness of the fields<li>User email on the platform is public information</ul><h3 id="how-to-reproduce-the-vulnerability"><span class="me-2">How to Reproduce the Vulnerability</span><a href="#how-to-reproduce-the-vulnerability" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/142244e5f07a/1*ILb0VdnkAvgH5aW7qos_lg.webp" class="popup img-link blur"><img data-src="/assets/142244e5f07a/1*ILb0VdnkAvgH5aW7qos_lg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iMzU0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Since user emails on the platform are public information, we first browse the target account to be hacked; after knowing the email, we go to the password reset page.</p><ul><li>First, enter your own email to initiate the password reset process.<li>Then, enter the email of the account you want to hack and also initiate the password reset process.</ul><p>Both of these actions will send out a password reset verification email.</p><p><a href="/assets/142244e5f07a/1*sPNp2NfoykG8-m3vWociQQ.webp" class="popup img-link blur"><img data-src="/assets/142244e5f07a/1*sPNp2NfoykG8-m3vWociQQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTEiIGhlaWdodD0iNTk3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Go to your own email to receive the password reset verification email.</p><p><strong>The password change link has the following URL format:</strong></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>https://zhgchg.li/resetPassword.php?auth=PvrrbQWBGDQ3LeSBByd
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">PvrrbQWBGDQ3LeSBByd</code> is the verification token for this password reset operation.</p><p>However, while observing the verification code image on the website, I found that the link format for the verification code image is also similar:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>https://zhgchg.li/captchaImage.php?auth=6EqfSZLqDc
</pre></table></code></div></div><p><a href="/assets/142244e5f07a/1*nfAhh3QasOLCDxdxH5jEQg.webp" class="popup img-link blur"><img data-src="/assets/142244e5f07a/1*nfAhh3QasOLCDxdxH5jEQg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NiIgaGVpZ2h0PSI1MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><code class="language-plaintext highlighter-rouge">6EqfSZLqDc</code> reveals <code class="language-plaintext highlighter-rouge">5136</code>.</p><p>So what happens if we plug our password reset Token into it? Who cares! <strong>Let’s try it!</strong></p><p><a href="/assets/142244e5f07a/1*9BccKKQMxdqgtqlad13Ghg.webp" class="popup img-link blur"><img data-src="/assets/142244e5f07a/1*9BccKKQMxdqgtqlad13Ghg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NiIgaGVpZ2h0PSI2MSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><blockquote><p>Bingo!</p></blockquote><p>But the verification code image is too small to obtain complete information.</p><p><strong>Let’s continue to find exploitable points…</strong></p><p>Coincidentally, the website, in order to prevent crawler interference, presents users’ public personal data emails as <strong>images</strong>, keyword: <strong>image presentation! image presentation! image presentation!</strong></p><p>Let’s open it up and take a look:</p><p><a href="/assets/142244e5f07a/1*VLoCTluycBbW70QplV50Lw.webp" class="popup img-link blur"><img data-src="/assets/142244e5f07a/1*VLoCTluycBbW70QplV50Lw.webp" alt="Personal Information Page" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTMiIGhlaWdodD0iMzI1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Personal Information Page</p><p><a href="/assets/142244e5f07a/1*cb0Rpz_Zuto5e6WTPsA_Tw.webp" class="popup img-link blur"><img data-src="/assets/142244e5f07a/1*cb0Rpz_Zuto5e6WTPsA_Tw.webp" alt="Webpage Source Code Part" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3ODUiIGhlaWdodD0iMTQyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Webpage Source Code Part</p><p>We also obtained a similar URL format result:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>https://zhgchg.li/mailImage.php?mail=V3sDblZgDGdUOOBlBjpRblMTDGwMbwFmUT10bFN6DDlVbAVt
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">V3sDblZgDGdUOOBlBjpRblMTDGwMbwFmUT10bFN6DDlVbAVt</code> reveals <code class="language-plaintext highlighter-rouge">zhgchgli@gmail.com</code>.</p><p><strong>Again, who cares! Let’s try it!</strong></p><p><a href="/assets/142244e5f07a/1*mQVMT-D8avyeYSYp5VBU8w.webp" class="popup img-link blur"><img data-src="/assets/142244e5f07a/1*mQVMT-D8avyeYSYp5VBU8w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NDQiIGhlaWdodD0iNDM2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p>Bingo!🥳🥳🥳</p></blockquote><blockquote><p><code class="language-plaintext highlighter-rouge">PvrrbQWBGDQ3LeSBByd</code> <em>= <code class="language-plaintext highlighter-rouge">2395656</code></em></p></blockquote><h4 id="after-decoding-the-password-reset-token-and-discovering-its-a-number"><span class="me-2"><strong>After Decoding the Password Reset Token and Discovering It’s a Number</strong></span><a href="#after-decoding-the-password-reset-token-and-discovering-its-a-number" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>I thought, could it be a serial number…</p><p>So I requested a password reset again using the email to obtain the new token from the email, which turned out to be <code class="language-plaintext highlighter-rouge">2395657</code>… what the fxck… it really is.</p><p>Once I knew it was a serial number, things became easier. That’s why the initial operation was to first request the password reset email for my own account, then for the target account; because I could already predict the next password request ID.</p><blockquote><p><strong><em>Next, I just need to find a way to convert <code class="language-plaintext highlighter-rouge">2395657</code> back to the Token!</em></strong></p></blockquote><h4 id="coincidentally-i-discovered-another-issue"><span class="me-2">Coincidentally, I Discovered Another Issue</span><a href="#coincidentally-i-discovered-another-issue" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p><strong><em>The website only performs frontend validation for the email format when editing data; the backend does not re-verify whether the format is correct…</em></strong></p></blockquote><p>Bypassing the frontend validation, I changed the email to the next target.</p><p><a href="/assets/142244e5f07a/1*tdqRy5N0k8WS85l8u8CbKw.webp" class="popup img-link blur"><img data-src="/assets/142244e5f07a/1*tdqRy5N0k8WS85l8u8CbKw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNjYiIGhlaWdodD0iMTk5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/142244e5f07a/1*PRTZJZuv7DG11CoUn5OHQg.webp" class="popup img-link blur"><img data-src="/assets/142244e5f07a/1*PRTZJZuv7DG11CoUn5OHQg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MTciIGhlaWdodD0iMTA5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p>Fire in the hole!</p></blockquote><p><strong>We got:</strong></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>https://zhgchg.li/mailImage.php?mail=UTVRZwZuDjMNPLZhBGI
</pre></table></code></div></div><p><strong>At this point, take this password reset token back to the password reset page:</strong></p><p><a href="/assets/142244e5f07a/1*1kZp5LQ1yT6m7IBJLoYj9Q.webp" class="popup img-link blur"><img data-src="/assets/142244e5f07a/1*1kZp5LQ1yT6m7IBJLoYj9Q.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iMzU1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p>Hacking successful! Bypassed verification to reset someone else’s password!</p></blockquote><p>In the end, due to the lack of two-factor login protection and device binding features, once the password was overwritten, I could log in directly and impersonate the user.</p><h3 id="the-root-of-the-issue"><span class="me-2">The Root of the Issue</span><a href="#the-root-of-the-issue" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Let’s review the entire process.</p><ul><li>Initially, we wanted to reset the password, but found that the password reset token was actually a serial number, not a true unique identifier Token.<li>The website misused encryption and decryption functions, not distinguishing between different uses; almost the entire site used the same set.<li>The website had an online arbitrary encryption and decryption entry (equivalent to key compromise).<li>The backend did not re-verify user input.<li>There was no two-factor login protection or device binding feature.</ul><h4 id="correction-methods"><span class="me-2">Correction Methods</span><a href="#correction-methods" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>Fundamentally, the password reset token should be a randomly generated unique identifier Token.<li>The website’s encryption and decryption parts should use different keys for different functions.<li>Prevent external arbitrary operations on data encryption and decryption.<li>The backend should verify user input.<li>To be safe, add two-factor login protection and device binding features.</ul><h3 id="conclusion"><span class="me-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The entire journey of discovering this vulnerability surprised me because many of them were basic design issues; although the functionality might seem to work at first glance and have minor holes that still seem safe, multiple small holes combined can create a big hole. It’s really important to be cautious during development.</p><h3 id="further-reading"><span class="me-2">Further Reading</span><a href="#further-reading" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><a href="/posts/en/729d7b6817a4/">How to Create an Interesting Engineering CTF Competition</a><li><a href="/posts/en/46410aaada00/">APP Uses HTTPS for Transmission, but Data Still Gets Stolen</a><li><a href="/posts/en/99a6cef90190/">The Security Issues of SMS Verification Codes for Password Recovery</a></ul><p>If you have any questions or feedback, feel free to <a href="https://www.zhgchg.li/contact" target="_blank">contact me</a>.</p><hr /><p>This article was first published on Medium ➡️ <a href="https://medium.com/p/142244e5f07a" target="_blank"><strong>Click Here</strong></a></p><p>Automatically converted and synchronized using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a> and <a href="https://github.com/ZhgChgLi/medium-to-jekyll-starter.github.io" target="_blank">Medium-to-jekyll-starter</a>.</p><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/en/zmediumtomarkdown/2021-02-22-142244e5f07a.md" target="_blank">Improve this page on Github.</a></p><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=🍺&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a></p><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); border-bottom: 1px solid var(--main-border-color);transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1K+ Followers</span></a></div><div style="font-size: 0.8em; cursor:default; text-align: right;"> 2,000 <span style="font-size: 0.9em;">Total Views</span><br /> <span style="font-size: 0.8em;">Last Statistics Date: 2025-08-14 | 1,988 Views on <a href="https://medium.com/p/142244e5f07a" target="_blank">Medium.</a></span></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/hacker/" class="post-tag no-text-decoration" >hacker</a> <a href="/tags/web-security/" class="post-tag no-text-decoration" >web-security</a> <a href="/tags/website-security-test/" class="post-tag no-text-decoration" >website-security-test</a> <a href="/tags/capture-the-flag/" class="post-tag no-text-decoration" >capture-the-flag</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Revealing%20a%20Clever%20Website%20Vulnerability%20Discovered%20a%20Few%20Years%20Ago%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Frevealing-a-clever-website-vulnerability-discovered-a-few-years-ago-142244e5f07a%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Revealing%20a%20Clever%20Website%20Vulnerability%20Discovered%20a%20Few%20Years%20Ago%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Frevealing-a-clever-website-vulnerability-discovered-a-few-years-ago-142244e5f07a%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Frevealing-a-clever-website-vulnerability-discovered-a-few-years-ago-142244e5f07a%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/z-travel-diaries/en/travel-diary-8-days-and-7-nights-in-busan-south-korea-2025-8ace34a1a3d8/">Travel Diary: 8 Days and 7 Nights in Busan, South Korea 2025</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2025-%E9%9F%93%E5%9C%8B%E9%87%9C%E5%B1%B1-8-%E5%A4%A9-7-%E5%A4%9C%E8%87%AA%E7%94%B1%E8%A1%8C-8ace34a1a3d8/">遊記 2025 韓國釜山 8 天 7 夜自由行</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-9-11-%E5%90%8D%E5%8F%A4%E5%B1%8B%E4%B8%80%E6%97%A5%E5%BF%AB%E9%96%83%E8%87%AA%E7%94%B1%E8%A1%8C-7b8a0563c157/">遊記 9/11 名古屋一日快閃自由行</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2023-%E4%B9%9D%E5%B7%9E-10-%E6%97%A5%E8%87%AA%E7%94%B1%E8%A1%8C%E7%8D%A8%E6%97%85-d78e0b15a08a/">遊記 2023 九州 10 日自由行獨旅</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2023-%E4%BA%AC%E9%98%AA%E7%A5%9E-8-%E6%97%A5%E8%87%AA%E7%94%B1%E8%A1%8C-76d66c2e34af/">遊記 2023 京阪神 8 日自由行</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/%E6%8F%AD%E9%9C%B2%E4%B8%80%E5%80%8B%E5%B9%BE%E5%B9%B4%E5%89%8D%E7%99%BC%E7%8F%BE%E7%9A%84%E5%B7%A7%E5%A6%99%E7%B6%B2%E7%AB%99%E6%BC%8F%E6%B4%9E-142244e5f07a/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1614000426" data-df="ll" > Feb 22, 2021 </time><h4 class="pt-0 my-2">揭露一個幾年前發現的巧妙網站漏洞</h4><div class="text-muted"><p>多個漏洞合併引起的網站資安問題</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/%E6%89%BE%E5%9B%9E%E5%AF%86%E7%A2%BC%E4%B9%8B%E7%B0%A1%E8%A8%8A%E9%A9%97%E8%AD%89%E7%A2%BC%E5%BC%B7%E5%BA%A6%E5%AE%89%E5%85%A8%E5%95%8F%E9%A1%8C-99a6cef90190/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1615737458" data-df="ll" > Mar 14, 2021 </time><h4 class="pt-0 my-2">找回密碼之簡訊驗證碼強度安全問題</h4><div class="text-muted"><p>使用 Python 展示暴力破解的嚴重性</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/en/security-issues-with-sms-verification-code-strength-in-password-recovery-99a6cef90190/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1615737458" data-df="ll" > Mar 14, 2021 </time><h4 class="pt-0 my-2">Security Issues with SMS Verification Code Strength in Password Recovery</h4><div class="text-muted"><p>Demonstrating the severity of brute force attacks using Python</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/%E4%BD%BF%E7%94%A8-python-google-cloud-platform-line-bot-%E8%87%AA%E5%8B%95%E5%9F%B7%E8%A1%8C%E4%BE%8B%E8%A1%8C%E7%91%A3%E4%BA%8B-70a1409b149a/" class="btn btn-outline-primary" aria-label="Older" ><p>使用 Python+Google Cloud Platform+Line Bot 自動執行例行瑣事</p></a> <a href="/posts/zrealm-dev/%E6%8F%AD%E9%9C%B2%E4%B8%80%E5%80%8B%E5%B9%BE%E5%B9%B4%E5%89%8D%E7%99%BC%E7%8F%BE%E7%9A%84%E5%B7%A7%E5%A6%99%E7%B6%B2%E7%AB%99%E6%BC%8F%E6%B4%9E-142244e5f07a/" class="btn btn-outline-primary" aria-label="Newer" ><p>揭露一個幾年前發現的巧妙網站漏洞</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> All Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a><br/>Last updated: 2025-08-15 00:58:04 +08:00</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
