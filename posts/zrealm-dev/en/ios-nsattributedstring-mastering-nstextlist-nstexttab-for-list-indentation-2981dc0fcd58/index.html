<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="iOS NSAttributedString: Mastering NSTextList &amp; NSTextTab for List Indentation" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="Discover how iOS developers leverage NSAttributedString with NSTextList and NSTextTab to replicate HTML-like OL/UL/LI list indentation, streamlining text formatting in Swift apps for clearer content structure." /><meta property="og:description" content="Discover how iOS developers leverage NSAttributedString with NSTextList and NSTextTab to replicate HTML-like OL/UL/LI list indentation, streamlining text formatting in Swift apps for clearer content structure." /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/en/ios-nsattributedstring-mastering-nstextlist-nstexttab-for-list-indentation-2981dc0fcd58/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/en/ios-nsattributedstring-mastering-nstextlist-nstexttab-for-list-indentation-2981dc0fcd58/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/2981dc0fcd58/1*ApxgKEaFKG0B4GNgtRBNJQ.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-06-01T22:43:49+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/2981dc0fcd58/1*ApxgKEaFKG0B4GNgtRBNJQ.webp" /><meta property="twitter:title" content="iOS NSAttributedString: Mastering NSTextList &amp; NSTextTab for List Indentation" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://medium.com/@zhgchgli/"},"dateModified":"2024-06-01T22:51:40+08:00","datePublished":"2024-06-01T22:43:49+08:00","description":"Discover how iOS developers leverage NSAttributedString with NSTextList and NSTextTab to replicate HTML-like OL/UL/LI list indentation, streamlining text formatting in Swift apps for clearer content structure.","headline":"iOS NSAttributedString: Mastering NSTextList &amp; NSTextTab for List Indentation","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+","url":"https://zhgchg.li/assets/2981dc0fcd58/1*ApxgKEaFKG0B4GNgtRBNJQ.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/en/ios-nsattributedstring-mastering-nstextlist-nstexttab-for-list-indentation-2981dc0fcd58/"},"url":"https://zhgchg.li/posts/zrealm-dev/en/ios-nsattributedstring-mastering-nstextlist-nstexttab-for-list-indentation-2981dc0fcd58/"}</script><title>iOS NSAttributedString: Mastering NSTextList & NSTextTab for List Indentation | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script><link rel="alternate" hreflang="zh-Hans" href="/posts/zrealm-dev/zh-cn/ios-nsattributedstring-%E5%88%97%E8%A1%A8%E7%BC%A9%E6%8E%92%E5%AE%9E%E4%BD%9C-nstextlist-%E4%B8%8E-nstexttab-%E5%B7%A2%E7%8A%B6%E6%8E%92%E7%89%88%E8%A7%A3%E6%9E%90-2981dc0fcd58/"><link rel="alternate" hreflang="zh-Hant" href="/posts/zrealm-dev/ios-nsattributedstring-%E5%88%97%E8%A1%A8%E7%B8%AE%E6%8E%92%E5%AF%A6%E4%BD%9C-nstextlist-%E8%88%87-nstexttab-%E5%B7%A2%E7%8B%80%E6%8E%92%E7%89%88%E8%A7%A3%E6%9E%90-2981dc0fcd58/"><link rel="alternate" hreflang="en" href="/posts/zrealm-dev/en/ios-nsattributedstring-mastering-nstextlist-nstexttab-for-list-indentation-2981dc0fcd58/"><link rel="alternate" hreflang="x-default" href="/posts/zrealm-dev/en/ios-nsattributedstring-mastering-nstextlist-nstexttab-for-list-indentation-2981dc0fcd58/"><link rel="stylesheet" href="/assets/css/post-toc.css"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0">An iOS, web, and automation developer from Taiwan 🇹🇼 who also loves sharing, traveling, and writing.</p><a href="https://medium.com/@zhgchgli" target="_blank" style="display: block;text-align: center;font-style: normal;/* text-decoration: underline; */font-size: 1.2em;color: var(--heading-color);">1K+ Followers on Medium</a></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a><li class="nav-item"> <a href="/english/" class="nav-link"> <i class="fa-fw fa fa-solid fa-language"></i> <span>ENGLISH POSTS</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>iOS NSAttributedString: Mastering NSTextList & NSTextTab for List Indentation</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>iOS NSAttributedString: Mastering NSTextList & NSTextTab for List Indentation</h1><p class="post-desc fw-light mb-4">Discover how iOS developers leverage NSAttributedString with NSTextList and NSTextTab to replicate HTML-like OL/UL/LI list indentation, streamlining text formatting in Swift apps for clearer content structure.</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1717253029" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jun 1, 2024 </time> </span> <span> Updated <time data-ts="1717253500" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jun 1, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/assets/2981dc0fcd58/1*ApxgKEaFKG0B4GNgtRBNJQ.webp" class="popup img-link preview-img blur"><img data-src="/assets/2981dc0fcd58/1*ApxgKEaFKG0B4GNgtRBNJQ.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></div><div class="d-flex justify-content-between"> <span style="display: inline-flex; align-items: center; gap: 4px;"> By <em> <a href="https://medium.com/@zhgchgli/">ZhgChgLi</a> </em> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" style="display: block; "><path fill="#007bff" d="M271.2 56C265.1 49.8 256.2 47.3 247.8 49.6C239.4 51.9 232.9 58.4 230.8 66.8L215.5 127C214.4 131.4 209.9 134 205.6 132.7L145.8 115.9C137.4 113.5 128.4 115.9 122.3 122C116.2 128.1 113.8 137.1 116.2 145.5L133.1 205.3C134.3 209.6 131.7 214.1 127.4 215.2L67.1 230.5C58.7 232.6 52.1 239.2 49.8 247.6C47.5 256 50 264.9 56.2 271L100.7 314.3C103.9 317.4 103.9 322.6 100.7 325.8L56.3 369.1C50.1 375.2 47.6 384.1 49.9 392.5C52.2 400.9 58.8 407.4 67.2 409.6L127.4 424.9C131.8 426 134.4 430.5 133.1 434.8L116.2 494.5C113.8 502.9 116.2 511.9 122.3 518C128.4 524.1 137.4 526.5 145.8 524.1L205.6 507.2C209.9 506 214.4 508.6 215.5 512.9L230.8 573.1C232.9 581.5 239.5 588.1 247.9 590.4C256.3 592.7 265.2 590.2 271.3 584L314.6 539.5C317.7 536.3 322.9 536.3 326.1 539.5L369.3 584C375.4 590.2 384.3 592.7 392.7 590.4C401.1 588.1 407.6 581.5 409.8 573.1L425.1 513C426.2 508.6 430.7 506 435 507.3L494.8 524.2C503.2 526.6 512.2 524.2 518.3 518.1C524.4 512 526.8 503 524.4 494.6L507.5 434.8C506.3 430.5 508.9 426 513.2 424.9L573.4 409.6C581.8 407.5 588.4 400.9 590.7 392.5C593 384.1 590.5 375.1 584.3 369.1L539.8 325.8C536.6 322.7 536.6 317.5 539.8 314.3L584.3 271C590.5 264.9 593 256 590.7 247.6C588.4 239.2 581.8 232.7 573.4 230.5L513.2 215.2C508.8 214.1 506.2 209.6 507.5 205.3L524.4 145.5C526.8 137.1 524.4 128.1 518.3 122C512.2 115.9 503.2 113.5 494.8 115.9L435 132.8C430.7 134 426.2 131.4 425.1 127.1L409.8 66.8C407.7 58.4 401.1 51.8 392.7 49.5C384.3 47.2 375.4 49.7 369.3 55.9L326 100.5C322.9 103.7 317.7 103.7 314.5 100.5L271.2 56z"/><path d="M250 330 l60 60 100 -140" stroke="#ffffff" stroke-width="40" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="2235 words" > <em>12 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">iOS NSAttributedString: Mastering NSTextList & NSTextTab for List Indentation</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">章節 (Chapters)🔖</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">iOS NSAttributedString: Mastering NSTextList & NSTextTab for List Indentation</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><blockquote class="prompt-tip"><p><a href="/posts/zrealm-dev/zh-cn/ios-nsattributedstring-%E5%88%97%E8%A1%A8%E7%BC%A9%E6%8E%92%E5%AE%9E%E4%BD%9C-nstextlist-%E4%B8%8E-nstexttab-%E5%B7%A2%E7%8A%B6%E6%8E%92%E7%89%88%E8%A7%A3%E6%9E%90-2981dc0fcd58/"><strong>点击这里</strong></a>查看本文章简体中文版本。</p></blockquote><blockquote class="prompt-tip"><p><a href="/posts/zrealm-dev/ios-nsattributedstring-%E5%88%97%E8%A1%A8%E7%B8%AE%E6%8E%92%E5%AF%A6%E4%BD%9C-nstextlist-%E8%88%87-nstexttab-%E5%B7%A2%E7%8B%80%E6%8E%92%E7%89%88%E8%A7%A3%E6%9E%90-2981dc0fcd58/"><strong>點擊這裡</strong></a>查看本文章正體中文版本。</p></blockquote><blockquote class="prompt-info"><p>This post was translated with AI assistance — let me know if anything sounds off!</p></blockquote><h4 id="zhgchgli-table-of-contents">Table of Contents</h4><nav class="zhgchgli-toc"><ul class="zhgchgli-toc-list"><li class="has-children"><details><summary>[iOS] Exploring NSAttributedString: Using NSTextList or NSTextTab to Implement List Indentation <a href="#ios-exploring-nsattributedstring-using-nstextlist-or-nstexttab-to-implement-list-indentation">#</a></summary><ul><li><a href="#technical-background">Technical Background</a></li><li><a href="#final-outcome">Final Outcome</a></li></ul></details></li><li class="has-children"><details><summary>Exploring Methods to Implement List Indentation with NSTextList or NSTextTab <a href="#exploring-methods-to-implement-list-indentation-with-nstextlist-or-nstexttab">#</a></summary><ul><li><a href="#method-1-exploring-list-indentation-using-nstextlist">Method (1) Exploring List Indentation Using NSTextList</a></li><li><a href="#method-2-exploring-list-indentation-using-nstexttab">Method (2) Exploring List Indentation Using NSTextTab</a></li></ul></details></li><li class="has-children"><details><summary>Completed <a href="#completed">#</a></summary><ul><li><a href="#full-example-download">Full Example Download</a></li><li><a href="#business-information">Business Information</a></li><li><a href="#references">References</a></li></ul></details></li></ul></nav><hr /><h3 id="ios-exploring-nsattributedstring-using-nstextlist-or-nstexttab-to-implement-list-indentation"><span class="me-2">[iOS] Exploring NSAttributedString: Using NSTextList or NSTextTab to Implement List Indentation</span><a href="#ios-exploring-nsattributedstring-using-nstextlist-or-nstexttab-to-implement-list-indentation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>iOS Swift Using NSAttributedString’s NSTextList or NSTextTab to Implement Indentation Similar to HTML List OL/UL/LI Lists</p><h4 id="technical-background"><span class="me-2">Technical Background</span><a href="#technical-background" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Previously, while developing my open-source project “<a href="https://github.com/ZhgChgLi/ZMarkupParser" target="_blank">ZMarkupParser</a>”, a library for converting HTML strings into NSAttributedString objects, I needed to study and implement different HTML components using only NSAttributedString. That was when I first encountered the <code class="language-plaintext highlighter-rouge">.paragraphStyle: NSParagraphStyle</code> attributes of <code class="language-plaintext highlighter-rouge">NSAttributedString</code>, specifically the <code class="language-plaintext highlighter-rouge">textLists: [NSTextList]</code> and <code class="language-plaintext highlighter-rouge">tabStops: [NSTextTab]</code> properties. These are two very obscure attributes with scarce information online.</p><p><a href="https://github.com/ZhgChgLi/ZMarkupParser" target="_blank" class="img-link shimmer" ><img src="https://repository-images.githubusercontent.com/602927147/57ce75c1-8548-449c-b44a-f4b0451ed5ea" alt="" loading="lazy"></a></p><p>When implementing HTML list indentation conversion, I found examples using these two attributes. First, let’s look at the nested tag structure of an HTML list indentation:</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;</span>ZMarkupParser is a pure-Swift library that helps you convert HTML strings into NSAttributedString with customized styles and tags.<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span>ZMarkupParser is a pure-Swift library that helps you convert HTML strings into NSAttributedString with customized styles and tags.<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span>
        ZMarkupParser is a pure-Swift library that helps you convert HTML strings into NSAttributedString with customized styles and tags.
        <span class="nt">&lt;ol&gt;</span>
            <span class="nt">&lt;li&gt;</span>ZMarkupParser is a pure-Swift library that helps you convert HTML strings into NSAttributedString with customized styles and tags.<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;</span>ZMarkupParser is a pure-Swift library that helps you convert HTML strings into NSAttributedString with customized styles and tags.<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;</span>ZMarkupParser is a pure-Swift library that helps you convert HTML strings into NSAttributedString with customized styles and tags.<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ol&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></table></code></div></div><p>Display effect in the browser:</p><p><a href="/assets/2981dc0fcd58/1*ApxgKEaFKG0B4GNgtRBNJQ.webp" class="popup img-link blur"><img data-src="/assets/2981dc0fcd58/1*ApxgKEaFKG0B4GNgtRBNJQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iMjg3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>As shown in the image above, the list supports multiple nested levels and requires indentation according to the hierarchy.</p><p>At that time, there were many other HTML tag conversions to implement, so the workload was heavy; I quickly tried using NSTextList or NSTextTab to create list indentation without deep understanding. However, the results were unsatisfactory: spacing was too wide, no alignment, multi-line items misaligned, unclear nested structure, and spacing was uncontrollable. After some trial and error without a solution, I gave up and temporarily used a crude method for layout:</p><p><a href="/assets/2981dc0fcd58/1*TO0Z6GhVqZLPXgJqkZK0ig.webp" class="popup img-link blur"><img data-src="/assets/2981dc0fcd58/1*TO0Z6GhVqZLPXgJqkZK0ig.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MjkiIGhlaWdodD0iMjY4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>As shown in the image above, the effect is poor because it is manually formatted using spaces and the symbol <code class="language-plaintext highlighter-rouge">－</code>, with <strong>no indentation effect</strong>. The only advantage is that the spacing is made of space characters, allowing you to control the size.</p><p>This matter was left unresolved, and after open-sourcing it for over a year, I didn’t make any special changes; until recently, I started receiving requests to improve List conversion through <a href="https://github.com/ZhgChgLi/ZMarkupParser/issues" target="_blank">Issues</a>, and a developer provided a <a href="https://github.com/ZhgChgLi/ZMarkupParser/pull/60" target="_blank">solution PR</a>. By referring to the use of <code class="language-plaintext highlighter-rouge">NSParagraphStyle</code> in that PR, I gained new insights; studying NSTextList or NSTextTab shows potential to perfectly implement indented list functionality!</p><h4 id="final-outcome"><span class="me-2">Final Outcome</span><a href="#final-outcome" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>As usual, here is the final result image.</p><p><a href="/assets/2981dc0fcd58/1*OdIqci0oQ5leHuPpNyZm1g.webp" class="popup img-link blur"><img data-src="/assets/2981dc0fcd58/1*OdIqci0oQ5leHuPpNyZm1g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTc5IiBoZWlnaHQ9IjI1NTYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><ul><li><p>You can now perfectly convert HTML List Items to NSAttributedString objects in <strong><a href="https://github.com/ZhgChgLi/ZMarkupParser" target="_blank">ZMarkupParser</a> ~&gt; <code class="language-plaintext highlighter-rouge">v1.9.4</code></strong> and above.</p><li><p>Supports line breaks while maintaining indentation</p><li><p>Supports custom indentation spacing size</p><li><p>Supports nested structure indentation</p><li><p>Supports different List Item Styles, such as Bullet, Disc, Decimal… and even custom symbols</p></ul><blockquote><p>The following is the main text.</p></blockquote><h3 id="exploring-methods-to-implement-list-indentation-with-nstextlist-or-nstexttab"><span class="me-2">Exploring Methods to Implement List Indentation with NSTextList or NSTextTab</span><a href="#exploring-methods-to-implement-list-indentation-with-nstextlist-or-nstexttab" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>It is “or,” not “and.” <code class="language-plaintext highlighter-rouge">NSTextList</code> and <code class="language-plaintext highlighter-rouge">NSTextTab</code> are not used together; each property can independently achieve list indentation.</p><h4 id="method-1-exploring-list-indentation-using-nstextlist"><span class="me-2">Method (1) Exploring List Indentation Using NSTextList</span><a href="#method-1-exploring-list-indentation-using-nstextlist" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="k">let</span> <span class="nv">listLevel1ParagraphStyle</span> <span class="o">=</span> <span class="kt">NSMutableParagraphStyle</span><span class="p">()</span>
<span class="n">listLevel1ParagraphStyle</span><span class="o">.</span><span class="n">textLists</span> <span class="o">=</span> <span class="p">[</span><span class="n">textListLevel1</span><span class="p">]</span>
        
<span class="k">let</span> <span class="nv">listLevel2ParagraphStyle</span> <span class="o">=</span> <span class="kt">NSMutableParagraphStyle</span><span class="p">()</span>
<span class="n">listLevel2ParagraphStyle</span><span class="o">.</span><span class="n">textLists</span> <span class="o">=</span> <span class="p">[</span><span class="n">textListLevel1</span><span class="p">,</span> <span class="n">textListLevel2</span><span class="p">]</span>
        
<span class="k">let</span> <span class="nv">attributedString</span> <span class="o">=</span> <span class="kt">NSMutableAttributedString</span><span class="p">()</span>
<span class="n">attributedString</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel1</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span><span class="se">)\t</span><span class="s">List Level 1 - 1 StringStringStringStringStringStringStringStringStringStringStringString</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel1ParagraphStyle</span><span class="p">]))</span>
<span class="n">attributedString</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel1</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span><span class="se">)\t</span><span class="s">List Level 1 - 2</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel1ParagraphStyle</span><span class="p">]))</span>
<span class="n">attributedString</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel1</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span><span class="se">)\t</span><span class="s">List Level 1 - 3</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel1ParagraphStyle</span><span class="p">]))</span>
<span class="n">attributedString</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel2</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span><span class="se">)\t</span><span class="s">List Level 2 - 1</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel2ParagraphStyle</span><span class="p">]))</span>
<span class="n">attributedString</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel2</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span><span class="se">)\t</span><span class="s">List Level 2 - 2 StringStringStringStringStringStringStringStringStringStringStringString</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel2ParagraphStyle</span><span class="p">]))</span>
<span class="n">attributedString</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel1</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">4</span><span class="p">)</span><span class="se">)\t</span><span class="s">List Level 1 - 4</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel1ParagraphStyle</span><span class="p">]))</span>        

<span class="n">textView</span><span class="o">.</span><span class="n">attributedText</span> <span class="o">=</span> <span class="n">attributedString</span>
</pre></table></code></div></div><p><strong>Display Effect:</strong></p><p><a href="/assets/2981dc0fcd58/1*V-Oj4Ja_Qz_34EwjV9b5Bg.webp" class="popup img-link blur"><img data-src="/assets/2981dc0fcd58/1*V-Oj4Ja_Qz_34EwjV9b5Bg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MDkiIGhlaWdodD0iMTU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><code class="language-plaintext highlighter-rouge">NSTextList</code> provides very few Public APIs, and the controllable parameters are limited to these:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="c1">// Item display style</span>
<span class="k">var</span> <span class="nv">markerFormat</span><span class="p">:</span> <span class="kt">NSTextList</span><span class="o">.</span><span class="kt">MarkerFormat</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>

<span class="c1">// Starting number for ordered items</span>
<span class="k">var</span> <span class="nv">startingItemNumber</span><span class="p">:</span> <span class="kt">Int</span>

<span class="c1">// Whether it is an ordered numeric item (available only on iOS 16 and later, this API is still updated)</span>
<span class="kd">@available</span><span class="p">(</span><span class="n">iOS</span> <span class="mf">16.0</span><span class="p">,</span> <span class="o">*</span><span class="p">)</span>
<span class="kd">open</span> <span class="k">var</span> <span class="nv">isOrdered</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>

<span class="c1">// Returns the marker string; itemNumber is the item index and can be omitted if not ordered</span>
<span class="kd">open</span> <span class="kd">func</span> <span class="nf">marker</span><span class="p">(</span><span class="n">forItemNumber</span> <span class="nv">itemNumber</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span>
</pre></table></code></div></div><p><strong>NSTextList.MarkerFormat Style Reference:</strong></p><p><a href="/assets/2981dc0fcd58/1*NvUIidigj-MWzTudBLhHzA.webp" class="popup img-link blur"><img data-src="/assets/2981dc0fcd58/1*NvUIidigj-MWzTudBLhHzA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTMiIGhlaWdodD0iMjY0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>To increase visibility, display at item list position 8.</ul><p><strong>Usage:</strong></p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="c1">// Define an NSMutableParagraphStyle</span>
<span class="k">let</span> <span class="nv">listLevel1ParagraphStyle</span> <span class="o">=</span> <span class="kt">NSMutableParagraphStyle</span><span class="p">()</span>
<span class="c1">// Define List Item style, item starting position</span>
<span class="k">let</span> <span class="nv">textListLevel1</span> <span class="o">=</span> <span class="kt">NSTextList</span><span class="p">(</span><span class="nv">markerFormat</span><span class="p">:</span> <span class="o">.</span><span class="n">decimal</span><span class="p">,</span> <span class="nv">startingItemNumber</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1">// Assign NSTextList to textLists array</span>
<span class="n">listLevel1ParagraphStyle</span><span class="o">.</span><span class="n">textLists</span> <span class="o">=</span> <span class="p">[</span><span class="n">textListLevel1</span><span class="p">]</span>
<span class="c1">//</span>
<span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel1</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span><span class="se">)</span><span class="err">\</span><span class="s">Item One</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel1ParagraphStyle</span><span class="p">])</span>

<span class="c1">// Add nested subitems:</span>
<span class="c1">// Define subitem List Item style, item starting position</span>
<span class="k">let</span> <span class="nv">textListLevel2</span> <span class="o">=</span> <span class="kt">NSTextList</span><span class="p">(</span><span class="nv">markerFormat</span><span class="p">:</span> <span class="o">.</span><span class="n">circle</span><span class="p">,</span> <span class="nv">startingItemNumber</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1">// Define subitem NSMutableParagraphStyle</span>
<span class="k">let</span> <span class="nv">listLevel2ParagraphStyle</span> <span class="o">=</span> <span class="kt">NSMutableParagraphStyle</span><span class="p">()</span>
<span class="c1">// Assign parent and child NSTextList to textLists array</span>
<span class="n">listLevel1ParagraphStyle</span><span class="o">.</span><span class="n">textLists</span> <span class="o">=</span> <span class="p">[</span><span class="n">textListLevel1</span><span class="p">,</span> <span class="n">textListLevel2</span><span class="p">]</span>

<span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel1</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span><span class="se">)</span><span class="err">\</span><span class="s">Subitem One-One</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel2ParagraphStyle</span><span class="p">])</span>

<span class="c1">// For nested sub-subitems...</span>
<span class="c1">// Just continue appending NSTextList to the textLists array</span>
</pre></table></code></div></div><ul><li><p>Use <code class="language-plaintext highlighter-rouge">\n</code> to separate each list item.</p><li><p>Using <code class="language-plaintext highlighter-rouge">\t</code> for bullet points ensures that <code class="language-plaintext highlighter-rouge">attributedString.string</code> returns the list correctly as plain text.</p><li><p><code class="language-plaintext highlighter-rouge">\tBullet points\t</code> will not be displayed, so any formatting after the bullet point will not show (e.g., adding a <code class="language-plaintext highlighter-rouge">.</code> will not affect the display).</p></ul><p><strong>Usage Issues:</strong></p><ul><li><p>Cannot control the left and right spacing of bullet points</p><li><p>Cannot customize bullet points, numbered items cannot include <code class="language-plaintext highlighter-rouge">.</code> -&gt; <code class="language-plaintext highlighter-rouge">1.</code></p><li><p>It was found that if the parent list is unordered (e.g., <code class="language-plaintext highlighter-rouge">.circle</code>), and the child list is an ordered numeric list (e.g., <code class="language-plaintext highlighter-rouge">.decimal</code>), the child list’s <code class="language-plaintext highlighter-rouge">startingItemNumber</code> setting will not work.</p></ul><p>NSTextList can do what was described above, but it is not very practical for real product development; the spacing is too wide, and numbered items lack a <code class="language-plaintext highlighter-rouge">.</code> which greatly reduces usability. Online, I only found <a href="https://stackoverflow.com/questions/66714650/nstextlist-formatting" target="_blank">changing spacing via TextKit NSTextStorage</a>, but I think this method is too hard-coded, so I gave up. The only advantage is that you can easily add nested indented sublists by appending to the textLists array without calculating complex layout issues.</p><h4 id="method-2-exploring-list-indentation-using-nstexttab"><span class="me-2">Method (2) Exploring List Indentation Using NSTextTab</span><a href="#method-2-exploring-list-indentation-using-nstexttab" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>NSTextTab allows us to set the <strong>position</strong> of the <code class="language-plaintext highlighter-rouge">\t</code> Tab placeholder, with a default spacing of <code class="language-plaintext highlighter-rouge">28</code>.</p><p>We achieve a bullet list effect by setting <code class="language-plaintext highlighter-rouge">NSMutableParagraphStyle</code>’s <code class="language-plaintext highlighter-rouge">tabStops</code> + <code class="language-plaintext highlighter-rouge">headIndent</code> + <code class="language-plaintext highlighter-rouge">defaultTabInterval</code>.</p><p><a href="/assets/2981dc0fcd58/1*bQve8_xkPyT68Q9krtIbsw.webp" class="popup img-link blur"><img data-src="/assets/2981dc0fcd58/1*bQve8_xkPyT68Q9krtIbsw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjQwOSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="k">let</span> <span class="nv">textListLevel1</span> <span class="o">=</span> <span class="kt">NSTextList</span><span class="p">(</span><span class="nv">markerFormat</span><span class="p">:</span> <span class="o">.</span><span class="n">decimal</span><span class="p">,</span> <span class="nv">startingItemNumber</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">textListLevel2</span> <span class="o">=</span> <span class="kt">NSTextList</span><span class="p">(</span><span class="nv">markerFormat</span><span class="p">:</span> <span class="o">.</span><span class="n">circle</span><span class="p">,</span> <span class="nv">startingItemNumber</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
        
<span class="k">let</span> <span class="nv">listLevel1ParagraphStyle</span> <span class="o">=</span> <span class="kt">NSMutableParagraphStyle</span><span class="p">()</span>
<span class="n">listLevel1ParagraphStyle</span><span class="o">.</span><span class="n">defaultTabInterval</span> <span class="o">=</span> <span class="mi">28</span>
<span class="n">listLevel1ParagraphStyle</span><span class="o">.</span><span class="n">headIndent</span> <span class="o">=</span> <span class="mi">29</span>
<span class="n">listLevel1ParagraphStyle</span><span class="o">.</span><span class="n">tabStops</span> <span class="o">=</span> <span class="p">[</span>
  <span class="kt">NSTextTab</span><span class="p">(</span><span class="nv">textAlignment</span><span class="p">:</span> <span class="o">.</span><span class="k">left</span><span class="p">,</span> <span class="nv">location</span><span class="p">:</span> <span class="mi">8</span><span class="p">),</span> <span class="c1">// Corresponds to setting in image (1) Location</span>
  <span class="kt">NSTextTab</span><span class="p">(</span><span class="nv">textAlignment</span><span class="p">:</span> <span class="o">.</span><span class="k">left</span><span class="p">,</span> <span class="nv">location</span><span class="p">:</span> <span class="mi">29</span><span class="p">),</span> <span class="c1">// Corresponds to setting in image (2) Location</span>
<span class="p">]</span>
        
<span class="k">let</span> <span class="nv">listLevel2ParagraphStyle</span> <span class="o">=</span> <span class="kt">NSMutableParagraphStyle</span><span class="p">()</span>
<span class="n">listLevel2ParagraphStyle</span><span class="o">.</span><span class="n">defaultTabInterval</span> <span class="o">=</span> <span class="mi">28</span>
<span class="n">listLevel2ParagraphStyle</span><span class="o">.</span><span class="n">headIndent</span> <span class="o">=</span> <span class="mi">44</span>
<span class="n">listLevel2ParagraphStyle</span><span class="o">.</span><span class="n">tabStops</span> <span class="o">=</span> <span class="p">[</span>
    <span class="kt">NSTextTab</span><span class="p">(</span><span class="nv">textAlignment</span><span class="p">:</span> <span class="o">.</span><span class="k">left</span><span class="p">,</span> <span class="nv">location</span><span class="p">:</span> <span class="mi">29</span><span class="p">),</span> <span class="c1">// Corresponds to setting in image (3) Location</span>
    <span class="kt">NSTextTab</span><span class="p">(</span><span class="nv">textAlignment</span><span class="p">:</span> <span class="o">.</span><span class="k">left</span><span class="p">,</span> <span class="nv">location</span><span class="p">:</span> <span class="mi">44</span><span class="p">),</span> <span class="c1">// Corresponds to setting in image (4) Location</span>
<span class="p">]</span>
        
<span class="k">let</span> <span class="nv">attributedString</span> <span class="o">=</span> <span class="kt">NSMutableAttributedString</span><span class="p">()</span>
<span class="n">attributedString</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel1</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span><span class="se">)</span><span class="s">.</span><span class="se">\t</span><span class="s">List Level 1 - 1 StringStringStringStringStringStringStringStringStringStringStringString</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel1ParagraphStyle</span><span class="p">]))</span>
<span class="n">attributedString</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel1</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span><span class="se">)</span><span class="s">.</span><span class="se">\t</span><span class="s">List Level 1 - 2</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel1ParagraphStyle</span><span class="p">]))</span>
<span class="n">attributedString</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel1</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span><span class="se">)</span><span class="s">.</span><span class="se">\t</span><span class="s">List Level 1 - 3</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel1ParagraphStyle</span><span class="p">]))</span>
<span class="n">attributedString</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel2</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span><span class="se">)\t</span><span class="s">List Level 2 - 1</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel2ParagraphStyle</span><span class="p">]))</span>
<span class="n">attributedString</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel2</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span><span class="se">)\t</span><span class="s">List Level 2 - 2 StringStringStringStringStringStringStringStringStringStringStringString</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel2ParagraphStyle</span><span class="p">]))</span>
<span class="n">attributedString</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="kt">NSAttributedString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"</span><span class="se">\t\(</span><span class="n">textListLevel1</span><span class="o">.</span><span class="nf">marker</span><span class="p">(</span><span class="nv">forItemNumber</span><span class="p">:</span> <span class="mi">4</span><span class="p">)</span><span class="se">)</span><span class="s">.</span><span class="se">\t</span><span class="s">List Level 1 - 4</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nv">paragraphStyle</span><span class="p">:</span> <span class="n">listLevel1ParagraphStyle</span><span class="p">]))</span>

<span class="n">textView</span><span class="o">.</span><span class="n">attributedText</span> <span class="o">=</span> <span class="n">attributedString</span>
</pre></table></code></div></div><ul><li><p>The <code class="language-plaintext highlighter-rouge">tabStops</code> array corresponds to each <code class="language-plaintext highlighter-rouge">\t</code> character in the text. <code class="language-plaintext highlighter-rouge">NSTextTab</code> can set the alignment direction and the location position (<strong>note that this is not setting the width, but the position within the text!</strong>).</p><li><p><code class="language-plaintext highlighter-rouge">headIndent</code> sets the starting position of the second line and beyond, usually set to the location of the second <code class="language-plaintext highlighter-rouge">\t</code>, so that line breaks align with the bullet points.</p><li><p><code class="language-plaintext highlighter-rouge">defaultTabInterval</code> sets the default interval spacing for <code class="language-plaintext highlighter-rouge">\t</code>. If there are other <code class="language-plaintext highlighter-rouge">\t</code> characters in the text, they will be spaced according to this setting.</p><li><p><code class="language-plaintext highlighter-rouge">location:</code> Since NSTextTab specifies direction and position, you need to calculate the position yourself; you must calculate the bullet width (the number of digits also affects it) + spacing + the parent item’s indentation distance to achieve the effect shown in the above image.</p><li><p>Bullet points are fully customizable.</p><li><p>If the <code class="language-plaintext highlighter-rouge">location</code> is incorrect or cannot be matched, a direct line break will occur.</p></ul><p>The above example simplifies the calculation process and directly provides the answer to help everyone understand the layout method of <code class="language-plaintext highlighter-rouge">NSTextTab</code>. For real-world use, you can refer to the complete code below:</p><div class="language-php highlighter-rouge"><div class="code-header"> <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
</pre><td class="rouge-code"><pre><span class="n">let</span> <span class="n">attributedStringFont</span> <span class="o">=</span> <span class="nc">UIFont</span><span class="mf">.</span><span class="nf">systemFont</span><span class="p">(</span><span class="n">ofSize</span><span class="o">:</span> <span class="nc">UIFont</span><span class="mf">.</span><span class="n">systemFontSize</span><span class="p">)</span>
<span class="n">let</span> <span class="n">iterator</span> <span class="o">=</span> <span class="nf">ListItemIterator</span><span class="p">(</span><span class="n">font</span><span class="o">:</span> <span class="n">attributedStringFont</span><span class="p">)</span>
        
<span class="c1">//</span>
<span class="n">let</span> <span class="n">listItem</span> <span class="o">=</span> <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">decimal</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">""</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[</span>
  <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">circle</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">"List Level 1 - 1 StringStringStringStringStringStringStringStringStringStringStringString"</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[]),</span>
  <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">circle</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">"List Level 1 - 2"</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[]),</span>
  <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">circle</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">"List Level 1 - 3"</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[</span>
    <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">circle</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">"List Level 2 - 1"</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[]),</span>
    <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">circle</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">"List Level 2 - 2 fafasffsafasfsafasas</span><span class="se">\t</span><span class="s2">fasfasfasfasfasfasfasfsafsaf"</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[])</span>
  <span class="p">]),</span>
  <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">circle</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">"List Level 1 - 4"</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[]),</span>
  <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">circle</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">"List Level 1 - 5"</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[]),</span>
  <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">circle</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">"List Level 1 - 6"</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[]),</span>
  <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">circle</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">"List Level 1 - 7"</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[]),</span>
  <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">circle</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">"List Level 1 - 8"</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[]),</span>
  <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">circle</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">"List Level 1 - 9"</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[]),</span>
  <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">circle</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">"List Level 1 - 10"</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[]),</span>
  <span class="nf">ListItem</span><span class="p">(</span><span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">circle</span><span class="p">,</span> <span class="n">text</span><span class="o">:</span> <span class="s2">"List Level 1 - 11"</span><span class="p">,</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[])</span>
<span class="p">])</span>
<span class="n">let</span> <span class="n">listItemIndent</span> <span class="o">=</span> <span class="nc">ListItemIterator</span><span class="mf">.</span><span class="nf">ListItemIndent</span><span class="p">(</span><span class="n">preIndent</span><span class="o">:</span> <span class="mi">8</span><span class="p">,</span> <span class="n">sufIndent</span><span class="o">:</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">textView</span><span class="mf">.</span><span class="n">attributedText</span> <span class="o">=</span> <span class="n">iterator</span><span class="mf">.</span><span class="nf">start</span><span class="p">(</span><span class="n">item</span><span class="o">:</span> <span class="n">listItem</span><span class="p">,</span> <span class="n">type</span><span class="o">:</span> <span class="mf">.</span><span class="n">decimal</span><span class="p">,</span> <span class="n">indent</span><span class="o">:</span> <span class="n">listItemIndent</span><span class="p">)</span>



<span class="c1">//</span>
<span class="k">private</span> <span class="kt">extension</span> <span class="nc">UIFont</span> <span class="p">{</span>
    <span class="n">func</span> <span class="nf">widthOf</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="nc">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nc">CGFloat</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">string</span> <span class="k">as</span> <span class="nc">NSString</span><span class="p">)</span><span class="mf">.</span><span class="nf">size</span><span class="p">(</span><span class="n">withAttributes</span><span class="o">:</span> <span class="p">[</span><span class="mf">.</span><span class="n">font</span><span class="o">:</span> <span class="k">self</span><span class="p">])</span><span class="mf">.</span><span class="n">width</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">private</span> <span class="kt">struct</span> <span class="nc">ListItemIterator</span> <span class="p">{</span>
    <span class="n">let</span> <span class="n">font</span><span class="o">:</span> <span class="nc">UIFont</span>
    
    <span class="n">struct</span> <span class="nc">ListItemIndent</span> <span class="p">{</span>
        <span class="n">let</span> <span class="n">preIndent</span><span class="o">:</span> <span class="nc">CGFloat</span>
        <span class="n">let</span> <span class="n">sufIndent</span><span class="o">:</span> <span class="nc">CGFloat</span>
    <span class="p">}</span>
    
    <span class="n">func</span> <span class="nf">start</span><span class="p">(</span><span class="n">item</span><span class="o">:</span> <span class="nc">ListItem</span><span class="p">,</span> <span class="n">type</span><span class="o">:</span> <span class="nc">NSTextList</span><span class="mf">.</span><span class="nc">MarkerFormat</span><span class="p">,</span> <span class="n">indent</span><span class="o">:</span> <span class="nc">ListItemIndent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nc">NSAttributedString</span> <span class="p">{</span>
        <span class="n">let</span> <span class="n">textList</span> <span class="o">=</span> <span class="nf">NSTextList</span><span class="p">(</span><span class="n">markerFormat</span><span class="o">:</span> <span class="n">type</span><span class="p">,</span> <span class="n">startingItemNumber</span><span class="o">:</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">item</span><span class="mf">.</span><span class="n">subItems</span><span class="mf">.</span><span class="nf">enumerated</span><span class="p">()</span><span class="mf">.</span><span class="nf">reduce</span><span class="p">(</span><span class="nf">NSMutableAttributedString</span><span class="p">())</span> <span class="p">{</span> <span class="n">partialResult</span><span class="p">,</span> <span class="n">listItem</span> <span class="n">in</span>
            <span class="n">partialResult</span><span class="mf">.</span><span class="nf">append</span><span class="p">(</span><span class="k">self</span><span class="mf">.</span><span class="nf">iterator</span><span class="p">(</span><span class="n">parentTextList</span><span class="o">:</span> <span class="n">textList</span><span class="p">,</span> <span class="n">parentIndent</span><span class="o">:</span> <span class="n">indent</span><span class="mf">.</span><span class="n">preIndent</span><span class="p">,</span> <span class="n">sufIndent</span><span class="o">:</span> <span class="n">indent</span><span class="mf">.</span><span class="n">sufIndent</span><span class="p">,</span> <span class="n">item</span><span class="o">:</span> <span class="n">listItem</span><span class="mf">.</span><span class="n">element</span><span class="p">,</span> <span class="n">itemNumber</span><span class="o">:</span> <span class="n">listItem</span><span class="mf">.</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">partialResult</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="k">private</span> <span class="kt">func</span> <span class="nf">iterator</span><span class="p">(</span><span class="n">parentTextList</span><span class="o">:</span> <span class="nc">NSTextList</span><span class="p">,</span> <span class="n">parentIndent</span><span class="o">:</span> <span class="nc">CGFloat</span><span class="p">,</span> <span class="n">sufIndent</span><span class="o">:</span> <span class="nc">CGFloat</span><span class="p">,</span> <span class="n">item</span><span class="o">:</span> <span class="nc">ListItem</span><span class="p">,</span> <span class="n">itemNumber</span><span class="o">:</span><span class="nc">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nc">NSAttributedString</span> <span class="p">{</span>
        <span class="n">let</span> <span class="n">paragraphStyle</span> <span class="o">=</span> <span class="nf">NSMutableParagraphStyle</span><span class="p">()</span>
        
        
        <span class="c1">// e.g. 1.</span>
        <span class="k">var</span> <span class="n">itemSymbol</span> <span class="o">=</span> <span class="n">parentTextList</span><span class="mf">.</span><span class="nf">marker</span><span class="p">(</span><span class="n">forItemNumber</span><span class="o">:</span> <span class="n">itemNumber</span><span class="p">)</span>
        <span class="k">switch</span> <span class="n">parentTextList</span><span class="mf">.</span><span class="n">markerFormat</span> <span class="p">{</span>
        <span class="k">case</span> <span class="mf">.</span><span class="n">decimal</span><span class="p">,</span> <span class="mf">.</span><span class="n">uppercaseAlpha</span><span class="p">,</span> <span class="mf">.</span><span class="n">uppercaseLatin</span><span class="p">,</span> <span class="mf">.</span><span class="n">uppercaseRoman</span><span class="p">,</span> <span class="mf">.</span><span class="n">uppercaseHexadecimal</span><span class="p">,</span> <span class="mf">.</span><span class="n">lowercaseAlpha</span><span class="p">,</span> <span class="mf">.</span><span class="n">lowercaseLatin</span><span class="p">,</span> <span class="mf">.</span><span class="n">lowercaseRoman</span><span class="p">,</span> <span class="mf">.</span><span class="n">lowercaseHexadecimal</span><span class="o">:</span>
            <span class="n">itemSymbol</span> <span class="o">+=</span> <span class="s2">"."</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="k">break</span>
        <span class="p">}</span>
        
        <span class="c1">// width of "1."</span>
        <span class="n">let</span> <span class="n">itemSymbolIndent</span><span class="o">:</span> <span class="nc">CGFloat</span> <span class="o">=</span> <span class="nb">ceil</span><span class="p">(</span><span class="n">font</span><span class="mf">.</span><span class="nf">widthOf</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="n">itemSymbol</span><span class="p">))</span>
        
        <span class="n">let</span> <span class="n">tabStops</span><span class="o">:</span> <span class="p">[</span><span class="nc">NSTextTab</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="mf">.</span><span class="nf">init</span><span class="p">(</span><span class="n">textAlignment</span><span class="o">:</span> <span class="mf">.</span><span class="n">left</span><span class="p">,</span> <span class="n">location</span><span class="o">:</span> <span class="n">parentIndent</span><span class="p">),</span>
            <span class="mf">.</span><span class="nf">init</span><span class="p">(</span><span class="n">textAlignment</span><span class="o">:</span> <span class="mf">.</span><span class="n">left</span><span class="p">,</span> <span class="n">location</span><span class="o">:</span> <span class="n">parentIndent</span> <span class="o">+</span> <span class="n">itemSymbolIndent</span> <span class="o">+</span> <span class="n">sufIndent</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="n">let</span> <span class="n">thisIndent</span> <span class="o">=</span> <span class="n">parentIndent</span> <span class="o">+</span> <span class="n">itemSymbolIndent</span> <span class="o">+</span> <span class="n">sufIndent</span>
        <span class="n">paragraphStyle</span><span class="mf">.</span><span class="n">headIndent</span> <span class="o">=</span> <span class="n">thisIndent</span>
        <span class="n">paragraphStyle</span><span class="mf">.</span><span class="n">tabStops</span> <span class="o">=</span> <span class="n">tabStops</span>
        <span class="n">paragraphStyle</span><span class="mf">.</span><span class="n">defaultTabInterval</span> <span class="o">=</span> <span class="mi">28</span>
        
        <span class="n">let</span> <span class="n">thisTextList</span> <span class="o">=</span> <span class="nf">NSTextList</span><span class="p">(</span><span class="n">markerFormat</span><span class="o">:</span> <span class="n">item</span><span class="mf">.</span><span class="n">type</span><span class="p">,</span> <span class="n">startingItemNumber</span><span class="o">:</span> <span class="mi">1</span><span class="p">)</span>
        <span class="c1">//</span>
        <span class="k">return</span> <span class="n">item</span><span class="mf">.</span><span class="n">subItems</span><span class="mf">.</span><span class="nf">enumerated</span><span class="p">()</span><span class="mf">.</span><span class="nf">reduce</span><span class="p">(</span><span class="nf">NSMutableAttributedString</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s2">"</span><span class="se">\t</span><span class="s2">\(itemSymbol)</span><span class="se">\t</span><span class="s2">\(item.text)</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">attributes</span><span class="o">:</span> <span class="p">[</span><span class="mf">.</span><span class="n">paragraphStyle</span><span class="o">:</span> <span class="n">paragraphStyle</span><span class="p">,</span> <span class="mf">.</span><span class="n">font</span><span class="o">:</span> <span class="n">font</span><span class="p">]))</span> <span class="p">{</span> <span class="n">partialResult</span><span class="p">,</span> <span class="n">listItem</span> <span class="n">in</span>
            <span class="n">partialResult</span><span class="mf">.</span><span class="nf">append</span><span class="p">(</span><span class="k">self</span><span class="mf">.</span><span class="nf">iterator</span><span class="p">(</span><span class="n">parentTextList</span><span class="o">:</span> <span class="n">thisTextList</span><span class="p">,</span> <span class="n">parentIndent</span><span class="o">:</span> <span class="n">thisIndent</span><span class="p">,</span> <span class="n">sufIndent</span><span class="o">:</span> <span class="n">sufIndent</span><span class="p">,</span> <span class="n">item</span><span class="o">:</span> <span class="n">listItem</span><span class="mf">.</span><span class="n">element</span><span class="p">,</span> <span class="n">itemNumber</span><span class="o">:</span> <span class="n">listItem</span><span class="mf">.</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">partialResult</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">private</span> <span class="kt">struct</span> <span class="nc">ListItem</span> <span class="p">{</span>
    <span class="k">var</span> <span class="n">type</span><span class="o">:</span> <span class="nc">NSTextList</span><span class="mf">.</span><span class="nc">MarkerFormat</span>
    <span class="k">var</span> <span class="n">text</span><span class="o">:</span> <span class="nc">String</span>
    <span class="k">var</span> <span class="n">subItems</span><span class="o">:</span> <span class="p">[</span><span class="nc">ListItem</span><span class="p">]</span>
<span class="p">}</span>
</pre></table></code></div></div><p><a href="/assets/2981dc0fcd58/1*SdR5-L96sXAyxY4rKtLJBw.webp" class="popup img-link blur"><img data-src="/assets/2981dc0fcd58/1*SdR5-L96sXAyxY4rKtLJBw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTciIGhlaWdodD0iMzkxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><p>We declare a simple <code class="language-plaintext highlighter-rouge">ListItem</code> object to encapsulate sublist items, using recursion to combine and calculate the spacing and content of the item list.</p><li><p><code class="language-plaintext highlighter-rouge">NSTextList</code> only uses the <code class="language-plaintext highlighter-rouge">marker</code> method to generate list symbols, but you can choose not to use it and implement your own instead.</p><li><p>To increase the spacing before and after bullet points, you can directly set <code class="language-plaintext highlighter-rouge">preIndent</code> and <code class="language-plaintext highlighter-rouge">sufIndent</code>.</p><li><p>Because position calculation requires using <code class="language-plaintext highlighter-rouge">Font</code> to measure width, the text must have <code class="language-plaintext highlighter-rouge">.font</code> set to ensure accurate calculation.</p></ul><h3 id="completed"><span class="me-2">Completed</span><a href="#completed" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>At first, I hoped to achieve this directly using NSTextList, but the results and customization options were very limited. In the end, I had to rely on a DIY approach with NSTextTab, controlling the position of <code class="language-plaintext highlighter-rouge">\t</code> to manually assemble the bullet points. It’s a bit troublesome, but the effect perfectly meets the requirements!</p><blockquote><p>The goal was achieved, but I still haven’t fully mastered <code class="language-plaintext highlighter-rouge">NSTextTab</code> (for example: different directions? relative position of Location?). Official documentation and online resources are really scarce, so I’ll study it again if I get the chance.</p></blockquote><h4 id="full-example-download"><span class="me-2"><strong>Full Example Download</strong></span><a href="#full-example-download" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://github.com/zhgchgli0718/NSAttributedString-NSTextList-NSTextTab-Example" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/d6433a2f9258f56ab38337c4e2b74d6b1ff7aaaa048a4152e8362cb10fe3aa65/zhgchgli0718/NSAttributedString-NSTextList-NSTextTab-Example" alt="" loading="lazy"></a></p><h4 id="business-information"><span class="me-2">Business Information</span><a href="#business-information" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://github.com/ZhgChgLi/ZMarkupParser" target="_blank" class="img-link shimmer" ><img src="https://repository-images.githubusercontent.com/602927147/57ce75c1-8548-449c-b44a-f4b0451ed5ea" alt="" loading="lazy"></a></p><p>A small tool that converts HTML strings into NSAttributedString, supporting custom style specifications and custom tag features.</p><h4 id="references"><span class="me-2">References</span><a href="#references" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><a href="https://www.objc.io/issues/9-strings/string-rendering/" target="_blank">ObjC String Rendering</a> / <a href="https://store.objccn.io/issue-9-5/" target="_blank">ObjC China — String Rendering</a><br /> This article offers full examples of NSAttributedString usage, including list and table implementations.</ul><p>If you have any questions or feedback, feel free to <a href="https://www.zhgchg.li/contact" target="_blank">contact me</a>.</p><hr /><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=🍺&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a><br /></p><blockquote class="prompt-info"><p>This post was originally published on Medium (<a href="https://medium.com/p/2981dc0fcd58" target="_blank"><strong>View original post</strong></a>), and automatically converted and synced by <a href="/posts/tools/medium-to-jekyll/" target="_blank">ZMediumToMarkdown</a>.</p></blockquote><blockquote class="prompt-info"><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/en/zmediumtomarkdown/2024-06-01-2981dc0fcd58.md" target="_blank">Improve this page on Github.</a></p></blockquote><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1K+ Followers</span></a></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/english/" class="post-tag no-text-decoration" >english</a> <a href="/tags/ai-translation/" class="post-tag no-text-decoration" >ai-translation</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/nsattributedstring/" class="post-tag no-text-decoration" >nsattributedstring</a> <a href="/tags/swift/" class="post-tag no-text-decoration" >swift</a> <a href="/tags/layout/" class="post-tag no-text-decoration" >layout</a> <a href="/tags/uikit/" class="post-tag no-text-decoration" >uikit</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=iOS%20NSAttributedString:%20Mastering%20NSTextList%20&%20NSTextTab%20for%20List%20Indentation%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fios-nsattributedstring-mastering-nstextlist-nstexttab-for-list-indentation-2981dc0fcd58%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=iOS%20NSAttributedString:%20Mastering%20NSTextList%20&%20NSTextTab%20for%20List%20Indentation%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fios-nsattributedstring-mastering-nstextlist-nstexttab-for-list-indentation-2981dc0fcd58%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fios-nsattributedstring-mastering-nstextlist-nstexttab-for-list-indentation-2981dc0fcd58%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/en/japan-overseas-shopping-rakuten-consolidated-shipping-for-taiwan-buy-from-rakuten-amazon-bea62c251f1b/">Japan Overseas Shopping｜Rakuten Consolidated Shipping for Taiwan｜Buy from Rakuten & Amazon</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/zh-cn/%E6%97%A5%E6%9C%AC%E4%B9%90%E5%A4%A9%E9%9B%86%E8%BF%90%E6%95%99%E5%AD%A6-%E5%BF%AB%E9%80%9F%E8%B4%AD%E4%B9%B0horie%E9%92%9B%E6%9D%AF%E4%B8%8Eamazon%E5%95%86%E5%93%81%E5%AF%84%E9%80%81%E5%8F%B0%E6%B9%BE%E5%85%A8%E6%94%BB%E7%95%A5-bea62c251f1b/">日本海外购物寄送台湾教学 — 使用乐天集运购买乐天拍卖与 Amazon 商品 (Horie 钛杯)</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/%E6%97%A5%E6%9C%AC%E6%A8%82%E5%A4%A9%E9%9B%86%E9%81%8B%E6%95%99%E5%AD%B8-%E5%BF%AB%E9%80%9F%E8%B3%BC%E8%B2%B7horie%E9%88%A6%E6%9D%AF%E8%88%87amazon%E5%95%86%E5%93%81%E5%AF%84%E9%80%81%E5%8F%B0%E7%81%A3%E5%85%A8%E6%94%BB%E7%95%A5-bea62c251f1b/">日本海外購物寄送台灣教學 — 使用樂天集運購買樂天拍賣與 Amazon 商品 (Horie 鈦杯)</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/en/line-bank-to-firstrade-transfer-fast-deposit-150-nt-fee-guide-with-account-upgrade-fee-subsidy-e4d139fe0685/">LINE Bank to Firstrade Transfer｜Fast Deposit & 150 NT Fee Guide with Account Upgrade & Fee Subsidy</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/zh-cn/line-bank-%E5%85%A5%E9%87%91-firstrade-%E6%95%99%E5%AD%A6-%E5%BF%AB%E9%80%9F%E5%88%B0%E5%B8%90-%E4%BD%8E%E6%89%8B%E7%BB%AD%E8%B4%B9150%E5%85%83-%E5%B8%90%E6%88%B7%E5%8D%87%E7%BA%A7%E4%B8%8E%E6%89%8B%E7%BB%AD%E8%B4%B9%E8%A1%A5%E5%8A%A9%E7%94%B3%E8%AF%B7%E5%85%A8%E6%94%BB%E7%95%A5-e4d139fe0685/">手把手教学 — LINE Bank 入金 Firstrade 快速到帐、手续费只要 150 元及帐户升级/约定转帐/手续费补助申请教学</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">章節 (Chapters)🔖</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/en/ios-tintadjustmentmode-fix-uiimageasset-tintcolor-failure-in-uialertcontroller-6012b7b4f612/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1549469443" data-df="ll" > Feb 7, 2019 </time><h4 class="pt-0 my-2">iOS tintAdjustmentMode｜Fix UIImageAsset .tintColor Failure in UIAlertController</h4><div class="text-muted"><p>iOS developers facing .tintColor failure on Image Assets rendered as template during UIAlertController presentation can resolve this with tintAdjustmentMode tweaks, restoring expected UI color beha...</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/en/ios-18-nsattributedstring-attributes-range-merging-equatable-behavior-change-explained-9e43897d99fc/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1726837422" data-df="ll" > Sep 20, 2024 </time><h4 class="pt-0 my-2">iOS 18 NSAttributedString Attributes Range Merging｜Equatable Behavior Change Explained</h4><div class="text-muted"><p>Discover how iOS 18 updates NSAttributedString attributes range merging by referencing Equatable, resolving inconsistencies and improving attribute handling for developers.</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/ios-nsattributedstring-%E5%88%97%E8%A1%A8%E7%B8%AE%E6%8E%92%E5%AF%A6%E4%BD%9C-nstextlist-%E8%88%87-nstexttab-%E5%B7%A2%E7%8B%80%E6%8E%92%E7%89%88%E8%A7%A3%E6%9E%90-2981dc0fcd58/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1717253029" data-df="ll" > Jun 1, 2024 </time><h4 class="pt-0 my-2">iOS NSAttributedString 探究使用 NSTextList 或 NSTextTab 實現列表縮排</h4><div class="text-muted"><p>iOS Swift 使用 NSAttributedString 的 NSTextList 或 NSTextTab 實現類似 HTML List OL/UL/LI 列表縮排功能</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/plane-so-docker-%E8%87%AA%E6%9E%B6%E6%95%99%E5%AD%B8-%E5%AE%8C%E6%95%B4%E8%A8%AD%E5%AE%9A-%E5%82%99%E4%BB%BD%E9%82%84%E5%8E%9F%E8%88%87-nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%AF%A6%E4%BD%9C-9903c9783a97/" class="btn btn-outline-primary" aria-label="Older" ><p>Plane.so Docker 自架教學｜完整設定、備份還原與 Nginx 反向代理實作</p></a> <a href="/posts/zrealm-dev/zh-cn/ios-nsattributedstring-%E5%88%97%E8%A1%A8%E7%BC%A9%E6%8E%92%E5%AE%9E%E4%BD%9C-nstextlist-%E4%B8%8E-nstexttab-%E5%B7%A2%E7%8A%B6%E6%8E%92%E7%89%88%E8%A7%A3%E6%9E%90-2981dc0fcd58/" class="btn btn-outline-primary" aria-label="Newer" ><p>iOS NSAttributedString 探究使用 NSTextList 或 NSTextTab 实现列表缩排</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span> <a href="/">中文</a>|<a href="/tags/simplified-chinese">简中</a>|<a href="/tags/english/">English</a></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a> <br/></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
