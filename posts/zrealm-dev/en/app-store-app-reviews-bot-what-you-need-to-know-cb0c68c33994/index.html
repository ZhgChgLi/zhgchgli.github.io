<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="App Store App Reviews Bot: What You Need to Know" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="Build a Slack bot to track app reviews" /><meta property="og:description" content="Build a Slack bot to track app reviews" /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/en/app-store-app-reviews-bot-what-you-need-to-know-cb0c68c33994/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/en/app-store-app-reviews-bot-what-you-need-to-know-cb0c68c33994/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-21T23:16:31+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.webp" /><meta property="twitter:title" content="App Store App Reviews Bot: What You Need to Know" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://medium.com/@zhgchgli/"},"dateModified":"2024-04-14T00:38:28+08:00","datePublished":"2021-04-21T23:16:31+08:00","description":"Build a Slack bot to track app reviews","headline":"App Store App Reviews Bot: What You Need to Know","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjkzMyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg==","url":"https://zhgchg.li/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/en/app-store-app-reviews-bot-what-you-need-to-know-cb0c68c33994/"},"url":"https://zhgchg.li/posts/zrealm-dev/en/app-store-app-reviews-bot-what-you-need-to-know-cb0c68c33994/"}</script><title>App Store App Reviews Bot: What You Need to Know | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0"> <a href="https://medium.com/@zhgchgli" target="_blank" style="display: block;text-align: center;font-style: normal;/* text-decoration: underline; */font-size: 1.2em;color: var(--heading-color);">1K+ Followers on Medium</a> An iOS, web, and automation developer from Taiwan 🇹🇼 who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>App Store App Reviews Bot: What You Need to Know</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>App Store App Reviews Bot: What You Need to Know</h1><p class="post-desc fw-light mb-4">Build a Slack bot to track app reviews</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1619018191" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 21, 2021 </time> </span> <span> Updated <time data-ts="1713026308" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 13, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.webp" class="popup img-link preview-img blur"><img data-src="/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjkzMyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://medium.com/@zhgchgli/">ZhgChgLi</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="2628 words" > <em>14 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">App Store App Reviews Bot: What You Need to Know</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">App Store App Reviews Bot: What You Need to Know</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><hr /><h3 id="ℹ️ℹ️ℹ️-the-following-content-is-translated-by-openai"><span class="me-2">ℹ️ℹ️ℹ️ The following content is translated by OpenAI.</span><a href="#ℹ️ℹ️ℹ️-the-following-content-is-translated-by-openai" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="click-here-to-view-the-original-chinese-version--點此查看本文中文版"><span class="me-2"><a href="/posts/cb0c68c33994/">Click here</a> to view the original Chinese version. | <a href="/posts/cb0c68c33994/">點此查看本文中文版</a></span><a href="#click-here-to-view-the-original-chinese-version--點此查看本文中文版" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><h3 id="app-store-app-reviews-slack-bot-what-you-need-to-know"><span class="me-2">App Store App Reviews Slack Bot: What You Need to Know</span><a href="#app-store-app-reviews-slack-bot-what-you-need-to-know" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Using Ruby + Fastlane - SpaceShip to create a Slack bot for tracking app reviews.</p><p><a href="/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.webp" class="popup img-link blur"><img data-src="/assets/cb0c68c33994/1*BMCG3cu21W5MbODBbhI-sA.webp" alt="Photo by [Austin Distel](https://unsplash.com/@austindistel?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjkzMyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Photo by <a href="https://unsplash.com/@austindistel?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank">Austin Distel</a></p><h4 id="ignorance-is-bliss"><span class="me-2">Ignorance is Bliss</span><a href="#ignorance-is-bliss" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://appreviewbot.com" class="popup img-link shimmer"><img src="https://appreviewbot.com" alt="Example of AppReviewBot" target="_blank" loading="lazy"></a>](/assets/cb0c68c33994/1*Iv6qvrBfyv3bU1NK1hPVHg.webp){: lqip=”data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjMiIGhlaWdodD0iMjA2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+” }</p><p><a href="https://appreviewbot.com" target="_blank">Example of AppReviewBot</a></p><p>I recently discovered that the bot for forwarding the latest app reviews in Slack is a paid service. I always thought this feature was free. The costs range from $5 to $200 per month, as most platforms do not solely focus on the “App Review Bot” functionality; they also offer data analytics, record-keeping, centralized management, and competitor comparisons, among other services. The pricing reflects the range of services provided by each platform. However, I only want to use this specific feature, and paying for additional services feels wasteful.</p><h3 id="the-problem"><span class="me-2">The Problem</span><a href="#the-problem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Initially, I used the free and open-source tool <a href="https://github.com/TradeMe/ReviewMe" target="_blank">TradeMe/ReviewMe</a> for Slack notifications. However, this tool has not been maintained for years, and it occasionally sends outdated reviews, which can be quite alarming (many bugs have already been fixed, leading us to believe there were new issues!). The reasons for this are unclear.</p><p>Thus, I considered looking for alternative tools or methods.</p><h3 id="tldr-20220810-update"><span class="me-2">TL;DR [2022/08/10] Update:</span><a href="#tldr-20220810-update" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>I have now redesigned the App Reviews Bot using the brand new <a href="/posts/en/f1365e51902c/">App Store Connect API</a> and rebranded it as <a href="/posts/en/e36e48bb9265/">ZReviewTender — a free and open-source App Reviews monitoring bot</a>.</p><p>====</p><h3 id="20220720-update"><span class="me-2">2022/07/20 Update</span><a href="#20220720-update" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The <a href="/posts/en/f1365e51902c/">App Store Connect API now supports reading and managing Customer Reviews</a>. The App Store Connect API natively supports accessing app reviews, <strong>eliminating the need to use</strong> Fastlane — Spaceship to retrieve reviews.</p><h3 id="understanding-the-principles"><span class="me-2">Understanding the Principles</span><a href="#understanding-the-principles" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>With motivation in place, let’s explore the principles behind achieving our goal.</p><h4 id="official-api-"><span class="me-2">Official API ❌</span><a href="#official-api-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Apple provides the <a href="https://developer.apple.com/app-store-connect/api/" target="_blank">App Store Connect API</a>, but it does not include a feature for fetching reviews.</p><p>[2022/07/20 Update]: <a href="/posts/en/f1365e51902c/">The App Store Connect API now supports reading and managing Customer Reviews</a>.</p><h4 id="public-url-api-rss-️"><span class="me-2">Public URL API (RSS) ⚠️</span><a href="#public-url-api-rss-️" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Apple offers a public RSS feed for app reviews <a href="https://rss.itunes.apple.com/zh-tw" target="_blank">RSS subscription URL</a>, and it provides both RSS XML and JSON formats.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>https://itunes.apple.com/COUNTRY_CODE/rss/customerreviews/id=APP_ID/page=1/sortBy=mostRecent/json
</pre></table></code></div></div><ul><li>COUNTRY_CODE: Refer to <a href="https://help.apple.com/app-store-connect/#/dev997f9cf7c" target="_blank">this document</a>.<li>APP_ID: Visit the app’s webpage to get the URL: https://apps.apple.com/tw/app/APP_NAME/id <strong>12345678</strong>, where the number after “id” is the App ID (purely numeric).<li>page: You can request pages 1-10; requests beyond that will not be fulfilled.<li>sortBy: Use <code class="language-plaintext highlighter-rouge">mostRecent/json</code> to request the latest reviews in JSON format; you can change it to <code class="language-plaintext highlighter-rouge">mostRecent/xml</code> for XML format.</ul><p><strong>Review data is returned as follows:</strong></p><p>rss.json:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"uri"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://itunes.apple.com/tw/reviews/id123456789"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"im:version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.27.1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"im:rating"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Awesome!"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Life is worth it!"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"link"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"related"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://itunes.apple.com/tw/review?id=123456789&amp;type=Purple%20Software"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"im:voteSum"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"im:contentType"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"term"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Application"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Application"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"im:voteCount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p><strong>Advantages:</strong></p><ol><li>Publicly accessible without authentication steps.<li>Simple and easy to use.</ol><p><strong>Disadvantages:</strong></p><ol><li>This RSS API is outdated and has not been updated.<li>The returned review information is minimal (no timestamp for comments, edited reviews, or responses).<li>Occasionally encounters data corruption issues (later pages may suddenly return old data).<li>Access is limited to a maximum of 10 pages.</ol><blockquote><p><em>The biggest issue we encountered was point 3; however, it’s unclear whether this is a problem with the <a href="https://github.com/TradeMe/ReviewMe" target="_blank">Bot tool</a> we used or if there are issues with the RSS URL data.</em></p></blockquote><h4 id="private-url-api-"><span class="me-2">Private URL API ✅</span><a href="#private-url-api-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>This method is somewhat unconventional, and I stumbled upon it by chance. However, after referencing other Review Bot implementations, I found that many websites use this approach, so it should be fine. I had seen tools doing this 4-5 years ago, but I didn’t delve into it at the time.</p><p><strong>Advantages:</strong></p><ol><li>Data is the same as that in Apple’s backend.<li>Data is complete and up-to-date.<li>Allows for more detailed filtering.<li>Deeply integrated app tools also use this method (AppRadar/AppReviewBot…).</ol><p><strong>Disadvantages:</strong></p><ol><li>This is not an officially published method (unconventional).<li>Due to Apple’s implementation of two-step verification, the login session needs to be updated regularly.</ol><p><strong>Step One — Sniffing the API that Loads Review Data in App Store Connect:</strong></p><p><a href="/assets/cb0c68c33994/1*74lbicQ_vPzrLfm1imk7Pg.webp" class="popup img-link blur"><img data-src="/assets/cb0c68c33994/1*74lbicQ_vPzrLfm1imk7Pg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iMzY3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Apple’s backend can be accessed by calling:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>https://appstoreconnect.apple.com/WebObjects/iTunesConnect.woa/ra/apps/APP_ID/platforms/ios/reviews?index=0&amp;sort=REVIEW_SORT_ORDER_MOST_RECENT
</pre></table></code></div></div><p>This endpoint retrieves the list of reviews:</p><p><a href="/assets/cb0c68c33994/1*I00Znmzaivm_-7ous0-4Pw.webp" class="popup img-link blur"><img data-src="/assets/cb0c68c33994/1*I00Znmzaivm_-7ous0-4Pw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iMzI2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>index = pagination offset, with a maximum of 100 entries displayed at once.</p><p><strong>Review data is returned as follows:</strong></p><p>private.json:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456789</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Awesome!"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"review"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Life is worth it!"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"nickname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"storeFront"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TW"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"appVersionString"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.27.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lastModified"</span><span class="p">:</span><span class="w"> </span><span class="mi">1618836654000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"helpfulViews"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"totalViews"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"edited"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"developerResponse"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"isEditable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"isRequired"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"errorKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>After testing, I found that simply including <code class="language-plaintext highlighter-rouge">cookie: myacinfo=&lt;Token&gt;</code> allows us to spoof the request and retrieve data:</p><p><a href="/assets/cb0c68c33994/1*b_vINNRMrAIQrkuouN7X1Q.webp" class="popup img-link blur"><img data-src="/assets/cb0c68c33994/1*b_vINNRMrAIQrkuouN7X1Q.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNjU3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>With the API established and the required headers known, the next step is to automate the retrieval of this cookie information.</p><p><strong>Step Two — The Versatile Fastlane</strong></p><p>Since Apple now implements full Two-Step Verification, automating the login verification process has become more cumbersome. Fortunately, the clever tool <a href="https://docs.fastlane.tools/best-practices/continuous-integration/" target="_blank">Fastlane</a> has implemented not only the official App Store Connect API but also iTMSTransporter and web authentication (including two-step verification). We can directly use the Fastlane command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>fastlane spaceauth <span class="nt">-u</span> &lt;App Store Connect Email&gt;
</pre></table></code></div></div><p>This command completes the web login verification (including two-step verification) and stores the cookie in the FASTLANE_SESSION file.</p><p>You will receive a string similar to the following:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>!ruby/object:HTTP::Cookie
name: myacinfo  value: &lt;token&gt;  
domain: apple.com for_domain: true  path: "/"  
secure: true  httponly: true  expires: max_age: 
created_at: 2021-04-21 20:42:36.818821000 +08:00  
accessed_at: 2021-04-21 22:02:45.923016000 +08:00
!ruby/object:HTTP::Cookie
name: &lt;hash&gt;  value: &lt;token&gt;
domain: idmsa.apple.com for_domain: true  path: "/"
secure: true  httponly: true  expires: max_age: 2592000
created_at: 2021-04-19 23:21:05.851853000 +08:00
accessed_at: 2021-04-21 20:42:35.735921000 +08:00
</pre></table></code></div></div><p>By using <code class="language-plaintext highlighter-rouge">myacinfo = value</code>, we can retrieve the list of reviews.</p><p><strong>Step Three — SpaceShip</strong></p><p>I initially thought Fastlane could only help us up to this point, and that we would have to manually connect the flow from Fastlane to the API. However, after some exploration, I discovered that Fastlane’s authentication module, <code class="language-plaintext highlighter-rouge">SpaceShip</code>, has even more powerful features!</p><p><a href="/assets/cb0c68c33994/1*OlYQLNXAOk1oNqDP7LSlrA.webp" class="popup img-link blur"><img data-src="/assets/cb0c68c33994/1*OlYQLNXAOk1oNqDP7LSlrA.webp" alt="`SpaceShip`" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTYxIiBoZWlnaHQ9IjU2MSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><code class="language-plaintext highlighter-rouge">SpaceShip</code> already includes a method for retrieving the review list: <a href="https://www.rubydoc.info/gems/spaceship/0.39.0/Spaceship/TunesClient#get_reviews-instance_method" target="_blank"><strong>Class: Spaceship::TunesClient::get_reviews</strong></a>!</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">app</span> <span class="o">=</span> <span class="no">Spaceship</span><span class="o">::</span><span class="no">Tunes</span><span class="o">::</span><span class="n">login</span><span class="p">(</span><span class="n">appstore_account</span><span class="p">,</span> <span class="n">appstore_password</span><span class="p">)</span>
<span class="n">reviews</span> <span class="o">=</span> <span class="n">app</span><span class="p">.</span><span class="nf">get_reviews</span><span class="p">(</span><span class="n">app_id</span><span class="p">,</span> <span class="n">platform</span><span class="p">,</span> <span class="n">storefront</span><span class="p">,</span> <span class="n">versionId</span> <span class="o">=</span> <span class="s1">''</span><span class="p">)</span>
</pre></table></code></div></div><p>*storefront = region</p><p><strong>Step Four — Assembly</strong></p><p>Both Fastlane and SpaceShip are written in Ruby, so we will also use Ruby to create this bot tool.</p><p>We can create a file named <code class="language-plaintext highlighter-rouge">reviewBot.rb</code>, and when compiling and executing, simply enter the following in the Terminal:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ruby reviewBot.rb
</pre></table></code></div></div><p><em>(*For more Ruby environment issues, please refer to the tips at the end of this document.)</em></p><p><strong>First</strong>, since the original <code class="language-plaintext highlighter-rouge">get_reviews</code> method’s parameters do not meet our needs, I want to retrieve review data for all regions and versions without filtering and with pagination support:</p><p>extension.rb:</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1"># Extension Spaceship-&gt;TunesClient</span>
<span class="k">module</span> <span class="nn">Spaceship</span>
  <span class="k">class</span> <span class="nc">TunesClient</span> <span class="o">&lt;</span> <span class="no">Spaceship</span><span class="o">::</span><span class="no">Client</span>
    <span class="k">def</span> <span class="nf">get_recent_reviews</span><span class="p">(</span><span class="n">app_id</span><span class="p">,</span> <span class="n">platform</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
      <span class="n">r</span> <span class="o">=</span> <span class="n">request</span><span class="p">(</span><span class="ss">:get</span><span class="p">,</span> <span class="s2">"ra/apps/</span><span class="si">#{</span><span class="n">app_id</span><span class="si">}</span><span class="s2">/platforms/</span><span class="si">#{</span><span class="n">platform</span><span class="si">}</span><span class="s2">/reviews?index=</span><span class="si">#{</span><span class="n">index</span><span class="si">}</span><span class="s2">&amp;sort=REVIEW_SORT_ORDER_MOST_RECENT"</span><span class="p">)</span>
      <span class="n">parse_response</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">'data'</span><span class="p">)[</span><span class="s1">'reviews'</span><span class="p">]</span>
     <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></table></code></div></div><p>So we extend the TunesClient with a method that only takes <code class="language-plaintext highlighter-rouge">app_id</code>, <code class="language-plaintext highlighter-rouge">platform = 'ios'</code> (in <strong>lowercase</strong>), and <code class="language-plaintext highlighter-rouge">index = pagination offset</code>.</p><p><strong>Next, we assemble the login verification and retrieve the review list:</strong></p><p>get_recent_reviews.rb:</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">true</span>
<span class="k">while</span> <span class="n">breakWhile</span>
  <span class="n">app</span> <span class="o">=</span> <span class="no">Spaceship</span><span class="o">::</span><span class="no">Tunes</span><span class="o">::</span><span class="n">login</span><span class="p">(</span><span class="no">APPStoreConnect</span> <span class="no">Email</span><span class="p">,</span> <span class="no">APPStoreConnect</span> <span class="no">Password</span><span class="p">)</span>
  <span class="n">reviews</span> <span class="o">=</span> <span class="n">app</span><span class="p">.</span><span class="nf">get_recent_reviews</span><span class="p">(</span><span class="vg">$app_id</span><span class="p">,</span> <span class="vg">$platform</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">reviews</span><span class="p">.</span><span class="nf">length</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span>
    <span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">false</span>
    <span class="k">break</span>
  <span class="k">end</span>
  <span class="n">reviews</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">review</span><span class="o">|</span>
    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="nb">puts</span> <span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]</span>
  <span class="p">}</span>
<span class="k">end</span>
</pre></table></code></div></div><p>We use a while loop to iterate through all pages, terminating when we reach a page with no content.</p><p><strong>Next, we need to add a record of the last review’s timestamp to only notify about the latest messages that haven’t been sent yet:</strong></p><p>lastModified.rb:</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre><td class="rouge-code"><pre><span class="n">lastModified</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">if</span> <span class="no">File</span><span class="p">.</span><span class="nf">exists?</span><span class="p">(</span><span class="s2">".lastModified"</span><span class="p">)</span>
  <span class="n">lastModifiedFile</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">".lastModified"</span><span class="p">)</span>
  <span class="n">lastModified</span> <span class="o">=</span> <span class="n">lastModifiedFile</span><span class="p">.</span><span class="nf">read</span><span class="p">.</span><span class="nf">to_i</span>
<span class="k">end</span>
<span class="n">newLastModified</span> <span class="o">=</span> <span class="n">lastModified</span>
<span class="n">isFirst</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">messages</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">true</span>
<span class="k">while</span> <span class="n">breakWhile</span>
  <span class="n">app</span> <span class="o">=</span> <span class="no">Spaceship</span><span class="o">::</span><span class="no">Tunes</span><span class="o">::</span><span class="n">login</span><span class="p">(</span><span class="no">APPStoreConnect</span> <span class="no">Email</span><span class="p">,</span> <span class="no">APPStoreConnect</span> <span class="no">Password</span><span class="p">)</span>
  <span class="n">reviews</span> <span class="o">=</span> <span class="n">app</span><span class="p">.</span><span class="nf">get_recent_reviews</span><span class="p">(</span><span class="vg">$app_id</span><span class="p">,</span> <span class="vg">$platform</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">reviews</span><span class="p">.</span><span class="nf">length</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span>
    <span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">false</span>
    <span class="k">break</span>
  <span class="k">end</span>
  <span class="n">reviews</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">review</span><span class="o">|</span>
    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">isFirst</span>
      <span class="n">isFirst</span> <span class="o">=</span> <span class="kp">false</span>
      <span class="n">newLastModified</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">][</span><span class="s2">"lastModified"</span><span class="p">]</span>
    <span class="k">end</span>

    <span class="k">if</span> <span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">][</span><span class="s2">"lastModified"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">lastModified</span> <span class="o">&amp;&amp;</span> <span class="n">lastModified</span> <span class="o">!=</span> <span class="mi">0</span>  
      <span class="c1"># Do not send notifications on the first run</span>
      <span class="n">messages</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">])</span>
    <span class="k">else</span>
      <span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">false</span>
      <span class="k">break</span>
    <span class="k">end</span>
  <span class="p">}</span>
<span class="k">end</span>

<span class="n">messages</span><span class="p">.</span><span class="nf">sort!</span> <span class="p">{</span> <span class="o">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">|</span>  <span class="n">a</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">]</span> <span class="o">&lt;=&gt;</span> <span class="n">b</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">]</span> <span class="p">}</span>
<span class="n">messages</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">message</span><span class="o">|</span>
    <span class="n">notify_slack</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="p">}</span>

<span class="no">File</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s2">".lastModified"</span><span class="p">,</span> <span class="n">newLastModified</span><span class="p">,</span> <span class="ss">mode: </span><span class="s2">"w+"</span><span class="p">)</span>
</pre></table></code></div></div><p>We simply use a <code class="language-plaintext highlighter-rouge">.lastModified</code> file to record the last execution time.</p><p><em>*No notifications are sent on the first run to avoid flooding.</em></p><p><strong>Final Step: Assemble the notification message and send it to Slack:</strong></p><p>slack.rb:</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre><td class="rouge-code"><pre><span class="c1"># Slack Bot</span>
<span class="k">def</span> <span class="nf">notify_slack</span><span class="p">(</span><span class="n">review</span><span class="p">)</span>
  <span class="n">rating</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"rating"</span><span class="p">].</span><span class="nf">to_i</span>
  <span class="n">color</span> <span class="o">=</span> <span class="n">rating</span> <span class="o">&gt;=</span> <span class="mi">4</span> <span class="p">?</span> <span class="s2">"good"</span> <span class="p">:</span> <span class="p">(</span><span class="n">rating</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="p">?</span> <span class="s2">"warning"</span> <span class="p">:</span> <span class="s2">"danger"</span><span class="p">)</span>
  <span class="n">like</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"helpfulViews"</span><span class="p">].</span><span class="nf">to_i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">?</span> <span class="s2">" - </span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"helpfulViews"</span><span class="p">]</span><span class="si">}</span><span class="s2"> :thumbsup:"</span> <span class="p">:</span> <span class="s2">""</span>
  <span class="n">date</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"edited"</span><span class="p">]</span> <span class="o">==</span> <span class="kp">false</span> <span class="p">?</span> <span class="s2">"Created at: </span><span class="si">#{</span><span class="no">Time</span><span class="p">.</span><span class="nf">at</span><span class="p">(</span><span class="n">review</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">].</span><span class="nf">to_i</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">).</span><span class="nf">to_datetime</span><span class="si">}</span><span class="s2">"</span> <span class="p">:</span> <span class="s2">"Updated at: </span><span class="si">#{</span><span class="no">Time</span><span class="p">.</span><span class="nf">at</span><span class="p">(</span><span class="n">review</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">].</span><span class="nf">to_i</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">).</span><span class="nf">to_datetime</span><span class="si">}</span><span class="s2">"</span>
  
  <span class="n">isResponse</span> <span class="o">=</span> <span class="s2">""</span>
  <span class="k">if</span> <span class="n">review</span><span class="p">[</span><span class="s2">"developerResponse"</span><span class="p">]</span> <span class="o">!=</span> <span class="kp">nil</span> <span class="o">&amp;&amp;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"developerResponse"</span><span class="p">][</span><span class="s1">'lastModified'</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">]</span>
    <span class="n">isResponse</span> <span class="o">=</span> <span class="s2">" (Response is outdated)"</span>
  <span class="k">end</span>
  
  <span class="n">edited</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"edited"</span><span class="p">]</span> <span class="o">==</span> <span class="kp">false</span> <span class="p">?</span> <span class="s2">""</span> <span class="p">:</span> <span class="s2">":memo: User updated review</span><span class="si">#{</span><span class="n">isResponse</span><span class="si">}</span><span class="s2">："</span>

  <span class="n">stars</span> <span class="o">=</span> <span class="s2">"★"</span> <span class="o">*</span> <span class="n">rating</span> <span class="o">+</span> <span class="s2">"☆"</span> <span class="o">*</span> <span class="p">(</span><span class="mi">5</span> <span class="o">-</span> <span class="n">rating</span><span class="p">)</span>
  <span class="n">attachments</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">:pretext</span> <span class="o">=&gt;</span> <span class="n">edited</span><span class="p">,</span>
    <span class="ss">:color</span> <span class="o">=&gt;</span> <span class="n">color</span><span class="p">,</span>
    <span class="ss">:fallback</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"title"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">stars</span><span class="si">}#{</span><span class="n">like</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
    <span class="ss">:title</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"title"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">stars</span><span class="si">}#{</span><span class="n">like</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
    <span class="ss">:text</span> <span class="o">=&gt;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"review"</span><span class="p">],</span>
    <span class="ss">:author_name</span> <span class="o">=&gt;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"nickname"</span><span class="p">],</span>
    <span class="ss">:footer</span> <span class="o">=&gt;</span> <span class="s2">"iOS - v</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"appVersionString"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"storeFront"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">date</span><span class="si">}</span><span class="s2"> - &lt;https://appstoreconnect.apple.com/apps/APP_ID/appstore/activity/ios/ratingsResponses|Go To App Store&gt;"</span>
  <span class="p">}</span>
  <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
   <span class="ss">:attachments</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="n">attachments</span><span class="p">],</span>
   <span class="ss">:icon_emoji</span> <span class="o">=&gt;</span> <span class="s2">":storm_trooper:"</span><span class="p">,</span>
   <span class="ss">:username</span> <span class="o">=&gt;</span> <span class="s2">"ZhgChgLi iOS Review Bot"</span>
  <span class="p">}.</span><span class="nf">to_json</span>
  <span class="n">cmd</span> <span class="o">=</span> <span class="s2">"curl -X POST --data-urlencode 'payload=</span><span class="si">#{</span><span class="n">payload</span><span class="si">}</span><span class="s2">' SLACK_WEB_HOOK_URL"</span>
  <span class="nb">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="ss">:err</span> <span class="o">=&gt;</span> <span class="no">File</span><span class="o">::</span><span class="no">NULL</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"id"</span><span class="p">]</span><span class="si">}</span><span class="s2"> send Notify Success!"</span>
<span class="k">end</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">SLACK_WEB_HOOK_URL</code> = <a href="https://slack.com/apps/A0F7XDUAZ-incoming-webhooks" target="_blank"><strong>Incoming WebHook URL</strong></a></p><h3 id="final-result"><span class="me-2"><strong>Final Result</strong></span><a href="#final-result" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>appreviewbot.rb:</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
</pre><td class="rouge-code"><pre><span class="nb">require</span> <span class="s2">"Spaceship"</span>
<span class="nb">require</span> <span class="s1">'json'</span>
<span class="nb">require</span> <span class="s1">'date'</span>

<span class="c1"># Config</span>
<span class="vg">$slack_web_hook</span> <span class="o">=</span> <span class="s2">"Target notification web hook URL"</span>
<span class="vg">$slack_debug_web_hook</span> <span class="o">=</span> <span class="s2">"Web hook URL for bot error notifications"</span>
<span class="vg">$appstore_account</span> <span class="o">=</span> <span class="s2">"App Store Connect Email"</span>
<span class="vg">$appstore_password</span> <span class="o">=</span> <span class="s2">"App Store Connect Password"</span>
<span class="vg">$app_id</span> <span class="o">=</span> <span class="s2">"APP_ID"</span>
<span class="vg">$platform</span> <span class="o">=</span> <span class="s2">"ios"</span>

<span class="c1"># Extension Spaceship-&gt;TunesClient</span>
<span class="k">module</span> <span class="nn">Spaceship</span>
  <span class="k">class</span> <span class="nc">TunesClient</span> <span class="o">&lt;</span> <span class="no">Spaceship</span><span class="o">::</span><span class="no">Client</span>
    <span class="k">def</span> <span class="nf">get_recent_reviews</span><span class="p">(</span><span class="n">app_id</span><span class="p">,</span> <span class="n">platform</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
      <span class="n">r</span> <span class="o">=</span> <span class="n">request</span><span class="p">(</span><span class="ss">:get</span><span class="p">,</span> <span class="s2">"ra/apps/</span><span class="si">#{</span><span class="n">app_id</span><span class="si">}</span><span class="s2">/platforms/</span><span class="si">#{</span><span class="n">platform</span><span class="si">}</span><span class="s2">/reviews?index=</span><span class="si">#{</span><span class="n">index</span><span class="si">}</span><span class="s2">&amp;sort=REVIEW_SORT_ORDER_MOST_RECENT"</span><span class="p">)</span>
      <span class="n">parse_response</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">'data'</span><span class="p">)[</span><span class="s1">'reviews'</span><span class="p">]</span>
     <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># Slack Bot</span>
<span class="k">def</span> <span class="nf">notify_slack</span><span class="p">(</span><span class="n">review</span><span class="p">)</span>
  <span class="n">rating</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"rating"</span><span class="p">].</span><span class="nf">to_i</span>
  <span class="n">color</span> <span class="o">=</span> <span class="n">rating</span> <span class="o">&gt;=</span> <span class="mi">4</span> <span class="p">?</span> <span class="s2">"good"</span> <span class="p">:</span> <span class="p">(</span><span class="n">rating</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="p">?</span> <span class="s2">"warning"</span> <span class="p">:</span> <span class="s2">"danger"</span><span class="p">)</span>
  <span class="n">like</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"helpfulViews"</span><span class="p">].</span><span class="nf">to_i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">?</span> <span class="s2">" - </span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"helpfulViews"</span><span class="p">]</span><span class="si">}</span><span class="s2"> :thumbsup:"</span> <span class="p">:</span> <span class="s2">""</span>
  <span class="n">date</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"edited"</span><span class="p">]</span> <span class="o">==</span> <span class="kp">false</span> <span class="p">?</span> <span class="s2">"Created at: </span><span class="si">#{</span><span class="no">Time</span><span class="p">.</span><span class="nf">at</span><span class="p">(</span><span class="n">review</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">].</span><span class="nf">to_i</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">).</span><span class="nf">to_datetime</span><span class="si">}</span><span class="s2">"</span> <span class="p">:</span> <span class="s2">"Updated at: </span><span class="si">#{</span><span class="no">Time</span><span class="p">.</span><span class="nf">at</span><span class="p">(</span><span class="n">review</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">].</span><span class="nf">to_i</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">).</span><span class="nf">to_datetime</span><span class="si">}</span><span class="s2">"</span>
  
  <span class="n">isResponse</span> <span class="o">=</span> <span class="s2">""</span>
  <span class="k">if</span> <span class="n">review</span><span class="p">[</span><span class="s2">"developerResponse"</span><span class="p">]</span> <span class="o">!=</span> <span class="kp">nil</span> <span class="o">&amp;&amp;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"developerResponse"</span><span class="p">][</span><span class="s1">'lastModified'</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">]</span>
    <span class="n">isResponse</span> <span class="o">=</span> <span class="s2">" (Customer response is outdated)"</span>
  <span class="k">end</span>
  
  <span class="n">edited</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"edited"</span><span class="p">]</span> <span class="o">==</span> <span class="kp">false</span> <span class="p">?</span> <span class="s2">""</span> <span class="p">:</span> <span class="s2">":memo: User updated review</span><span class="si">#{</span><span class="n">isResponse</span><span class="si">}</span><span class="s2">："</span>

  <span class="n">stars</span> <span class="o">=</span> <span class="s2">"★"</span> <span class="o">*</span> <span class="n">rating</span> <span class="o">+</span> <span class="s2">"☆"</span> <span class="o">*</span> <span class="p">(</span><span class="mi">5</span> <span class="o">-</span> <span class="n">rating</span><span class="p">)</span>
  <span class="n">attachments</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">:pretext</span> <span class="o">=&gt;</span> <span class="n">edited</span><span class="p">,</span>
    <span class="ss">:color</span> <span class="o">=&gt;</span> <span class="n">color</span><span class="p">,</span>
    <span class="ss">:fallback</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"title"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">stars</span><span class="si">}#{</span><span class="n">like</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
    <span class="ss">:title</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"title"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">stars</span><span class="si">}#{</span><span class="n">like</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
    <span class="ss">:text</span> <span class="o">=&gt;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"review"</span><span class="p">],</span>
    <span class="ss">:author_name</span> <span class="o">=&gt;</span> <span class="n">review</span><span class="p">[</span><span class="s2">"nickname"</span><span class="p">],</span>
    <span class="ss">:footer</span> <span class="o">=&gt;</span> <span class="s2">"iOS - v</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"appVersionString"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"storeFront"</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">date</span><span class="si">}</span><span class="s2"> - &lt;https://appstoreconnect.apple.com/apps/APP_ID/appstore/activity/ios/ratingsResponses|Go To App Store&gt;"</span>
  <span class="p">}</span>
  <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
   <span class="ss">:attachments</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="n">attachments</span><span class="p">],</span>
   <span class="ss">:icon_emoji</span> <span class="o">=&gt;</span> <span class="s2">":storm_trooper:"</span><span class="p">,</span>
   <span class="ss">:username</span> <span class="o">=&gt;</span> <span class="s2">"ZhgChgLi iOS Review Bot"</span>
  <span class="p">}.</span><span class="nf">to_json</span>
  <span class="n">cmd</span> <span class="o">=</span> <span class="s2">"curl -X POST --data-urlencode 'payload=</span><span class="si">#{</span><span class="n">payload</span><span class="si">}</span><span class="s2">' </span><span class="si">#{</span><span class="vg">$slack_web_hook</span><span class="si">}</span><span class="s2">"</span>
  <span class="nb">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="ss">:err</span> <span class="o">=&gt;</span> <span class="no">File</span><span class="o">::</span><span class="no">NULL</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">review</span><span class="p">[</span><span class="s2">"id"</span><span class="p">]</span><span class="si">}</span><span class="s2"> send Notify Success!"</span>
<span class="k">end</span>

<span class="k">begin</span>
    <span class="n">lastModified</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="no">File</span><span class="p">.</span><span class="nf">exists?</span><span class="p">(</span><span class="s2">".lastModified"</span><span class="p">)</span>
      <span class="n">lastModifiedFile</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">".lastModified"</span><span class="p">)</span>
      <span class="n">lastModified</span> <span class="o">=</span> <span class="n">lastModifiedFile</span><span class="p">.</span><span class="nf">read</span><span class="p">.</span><span class="nf">to_i</span>
    <span class="k">end</span>
    <span class="n">newLastModified</span> <span class="o">=</span> <span class="n">lastModified</span>
    <span class="n">isFirst</span> <span class="o">=</span> <span class="kp">true</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">true</span>
    <span class="k">while</span> <span class="n">breakWhile</span>
      <span class="n">app</span> <span class="o">=</span> <span class="no">Spaceship</span><span class="o">::</span><span class="no">Tunes</span><span class="o">::</span><span class="n">login</span><span class="p">(</span><span class="vg">$appstore_account</span><span class="p">,</span> <span class="vg">$appstore_password</span><span class="p">)</span>
      <span class="n">reviews</span> <span class="o">=</span> <span class="n">app</span><span class="p">.</span><span class="nf">get_recent_reviews</span><span class="p">(</span><span class="vg">$app_id</span><span class="p">,</span> <span class="vg">$platform</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">reviews</span><span class="p">.</span><span class="nf">length</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span>
        <span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">false</span>
        <span class="k">break</span>
      <span class="k">end</span>
      <span class="n">reviews</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">review</span><span class="o">|</span>
        <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">isFirst</span>
          <span class="n">isFirst</span> <span class="o">=</span> <span class="kp">false</span>
          <span class="n">newLastModified</span> <span class="o">=</span> <span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">][</span><span class="s2">"lastModified"</span><span class="p">]</span>
        <span class="k">end</span>
</pre></table></code></div></div><p>Here’s the translated text in naturalistic English while keeping the original markdown image source:</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="k">if</span> <span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">][</span><span class="s2">"lastModified"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">lastModified</span> <span class="o">&amp;&amp;</span> <span class="n">lastModified</span> <span class="o">!=</span> <span class="mi">0</span>  
  <span class="c1"># No notification on first use</span>
  <span class="n">messages</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">review</span><span class="p">[</span><span class="s2">"value"</span><span class="p">])</span>
<span class="k">else</span>
  <span class="n">breakWhile</span> <span class="o">=</span> <span class="kp">false</span>
  <span class="k">break</span>
<span class="k">end</span>
<span class="p">}</span>

<span class="n">messages</span><span class="p">.</span><span class="nf">sort!</span> <span class="p">{</span> <span class="o">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">|</span>  <span class="n">a</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">]</span> <span class="o">&lt;=&gt;</span> <span class="n">b</span><span class="p">[</span><span class="s2">"lastModified"</span><span class="p">]</span> <span class="p">}</span>
<span class="n">messages</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">message</span><span class="o">|</span>
    <span class="n">notify_slack</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="p">}</span>

<span class="no">File</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s2">".lastModified"</span><span class="p">,</span> <span class="n">newLastModified</span><span class="p">,</span> <span class="ss">mode: </span><span class="s2">"w+"</span><span class="p">)</span>
<span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">error</span>
    <span class="n">attachments</span> <span class="o">=</span> <span class="p">{</span>
        <span class="ss">:color</span> <span class="o">=&gt;</span> <span class="s2">"danger"</span><span class="p">,</span>
        <span class="ss">:title</span> <span class="o">=&gt;</span> <span class="s2">"AppStoreReviewBot Error Occurred!"</span><span class="p">,</span>
        <span class="ss">:text</span> <span class="o">=&gt;</span> <span class="n">error</span><span class="p">,</span>
        <span class="ss">:footer</span> <span class="o">=&gt;</span> <span class="s2">"*Due to Apple's technical limitations, the precise review scraping feature requires re-login and setup approximately every month. We appreciate your understanding.*"</span>
    <span class="p">}</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
        <span class="ss">:attachments</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="n">attachments</span><span class="p">],</span>
        <span class="ss">:icon_emoji</span> <span class="o">=&gt;</span> <span class="s2">":storm_trooper:"</span><span class="p">,</span>
        <span class="ss">:username</span> <span class="o">=&gt;</span> <span class="s2">"ZhgChgLi iOS Review Bot"</span>
    <span class="p">}.</span><span class="nf">to_json</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s2">"curl -X POST --data-urlencode 'payload=</span><span class="si">#{</span><span class="n">payload</span><span class="si">}</span><span class="s2">' </span><span class="si">#{</span><span class="vg">$slack_debug_web_hook</span><span class="si">}</span><span class="s2">"</span>
    <span class="nb">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="ss">:err</span> <span class="o">=&gt;</span> <span class="no">File</span><span class="o">::</span><span class="no">NULL</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="n">error</span>
<span class="k">end</span>
</pre></table></code></div></div><p>Additionally, I’ve added a <code class="language-plaintext highlighter-rouge">begin...rescue</code> (try…catch) block for error protection. If an error occurs, a Slack notification will be sent to alert us to check back (most likely due to session expiration).</p><blockquote><p><strong><em>Finally, just add this script to a crontab/scheduling tool for regular execution!</em></strong></p></blockquote><p><strong>Effect Screenshot:</strong></p><p><a href="/assets/cb0c68c33994/1*B0xW1CXU-avz2j8_ny3Ang.webp" class="popup img-link blur"><img data-src="/assets/cb0c68c33994/1*B0xW1CXU-avz2j8_ny3Ang.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTQiIGhlaWdodD0iMTMwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><h3 id="other-free-options"><span class="me-2">Other Free Options</span><a href="#other-free-options" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><a href="https://appfollow.io/" target="_blank">AppFollow</a>: Uses Public URL API (RSS), it’s just barely usable.<li><a href="https://feedis.io/product/proxime/features" target="_blank">feedis.io</a>: Uses Private URL API, requires you to provide your account credentials.<li><a href="https://github.com/TradeMe/ReviewMe" target="_blank">TradeMe/ReviewMe</a>: Self-hosted service (node.js), we initially used this but encountered the aforementioned issues.<li><a href="https://github.com/saiday/JonSnow" target="_blank">JonSnow</a>: Self-hosted service (GO), supports one-click deployment to Heroku, author: <a href="https://twitter.com/saiday" target="_blank">@saiday</a></ol><h3 id="friendly-reminders"><span class="me-2">Friendly Reminders</span><a href="#friendly-reminders" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li>⚠️ For the Private URL API method, if you use an account with two-factor authentication, you will need to re-verify every 30 days at most, and currently, there is no solution; if you can create an account without two-factor authentication, you can use it without any hassle.</ol><p><a href="/assets/cb0c68c33994/1*EE2J5HmdiIogMwC3Iiy0KA.webp" class="popup img-link blur"><img data-src="/assets/cb0c68c33994/1*EE2J5HmdiIogMwC3Iiy0KA.webp" alt="[#important-note-about-session-duration](https://docs.fastlane.tools/best-practices/continuous-integration/#important-note-about-session-duration){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAyIiBoZWlnaHQ9IjcxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://docs.fastlane.tools/best-practices/continuous-integration/#important-note-about-session-duration" target="_blank">#important-note-about-session-duration</a></p><ol><li><p>⚠️ Whether free, paid, or self-hosted as mentioned in this article; do not use a developer account. Be sure to create a separate App Store Connect account with permissions limited to “Customer Support” to prevent security issues.</p><li><p>It is recommended to use <a href="https://gist.github.com/sandyxu/8aceec7e436a6ab9621f" target="_blank">rbenv</a> for Ruby management, as the system comes with version 2.6, which can cause conflicts.</p><li><p>If you encounter GEM or Ruby environment errors on macOS Catalina, you can refer to <a href="https://github.com/orta/cocoapods-keys/issues/198#issuecomment-510909030" target="_blank">this reply</a> for a solution.</p></ol><h3 id="problem-solved"><span class="me-2">Problem Solved!</span><a href="#problem-solved" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Through this journey, I gained a better understanding of how the Slack Bot operates and how the iOS App Store scrapes review content. I also got a taste of Ruby! It’s quite enjoyable to write!</p><p>If you have any questions or suggestions, feel free to <a href="https://www.zhgchg.li/contact" target="_blank">contact me</a>.</p><p>```</p><hr /><p>This article was first published on Medium ➡️ <a href="https://medium.com/p/cb0c68c33994" target="_blank"><strong>Click Here</strong></a></p><p>Automatically converted and synchronized using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a> and <a href="https://github.com/ZhgChgLi/medium-to-jekyll-starter.github.io" target="_blank">Medium-to-jekyll-starter</a>.</p><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/en/zmediumtomarkdown/2021-04-21-cb0c68c33994.md" target="_blank">Improve this page on Github.</a></p><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=🍺&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a></p><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); border-bottom: 1px solid var(--main-border-color);transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1K+ Followers</span></a></div><div style="font-size: 0.8em; cursor:default; text-align: right;"> 1,016 <span style="font-size: 0.9em;">Total Views</span><br /> <span style="font-size: 0.8em;">Last Statistics Date: 2025-08-14 | 928 Views on <a href="https://medium.com/p/cb0c68c33994" target="_blank">Medium.</a></span></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/slackbot/" class="post-tag no-text-decoration" >slackbot</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/ruby/" class="post-tag no-text-decoration" >ruby</a> <a href="/tags/fastlane/" class="post-tag no-text-decoration" >fastlane</a> <a href="/tags/automator/" class="post-tag no-text-decoration" >automator</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=App%20Store%20App%20Reviews%20Bot:%20What%20You%20Need%20to%20Know%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fapp-store-app-reviews-bot-what-you-need-to-know-cb0c68c33994%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=App%20Store%20App%20Reviews%20Bot:%20What%20You%20Need%20to%20Know%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fapp-store-app-reviews-bot-what-you-need-to-know-cb0c68c33994%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fapp-store-app-reviews-bot-what-you-need-to-know-cb0c68c33994%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/z-travel-diaries/en/travel-diary-8-days-and-7-nights-in-busan-south-korea-2025-8ace34a1a3d8/">Travel Diary: 8 Days and 7 Nights in Busan, South Korea 2025</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2025-%E9%9F%93%E5%9C%8B%E9%87%9C%E5%B1%B1-8-%E5%A4%A9-7-%E5%A4%9C%E8%87%AA%E7%94%B1%E8%A1%8C-8ace34a1a3d8/">遊記 2025 韓國釜山 8 天 7 夜自由行</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-9-11-%E5%90%8D%E5%8F%A4%E5%B1%8B%E4%B8%80%E6%97%A5%E5%BF%AB%E9%96%83%E8%87%AA%E7%94%B1%E8%A1%8C-7b8a0563c157/">遊記 9/11 名古屋一日快閃自由行</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2023-%E4%B9%9D%E5%B7%9E-10-%E6%97%A5%E8%87%AA%E7%94%B1%E8%A1%8C%E7%8D%A8%E6%97%85-d78e0b15a08a/">遊記 2023 九州 10 日自由行獨旅</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2023-%E4%BA%AC%E9%98%AA%E7%A5%9E-8-%E6%97%A5%E8%87%AA%E7%94%B1%E8%A1%8C-76d66c2e34af/">遊記 2023 京阪神 8 日自由行</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/appstore-app-s-reviews-bot-%E9%82%A3%E4%BA%9B%E4%BA%8B-cb0c68c33994/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1619018191" data-df="ll" > Apr 21, 2021 </time><h4 class="pt-0 my-2">AppStore APP’s Reviews Bot 那些事</h4><div class="text-muted"><p>動手打造 APP 評價追蹤通知 Slack 機器人</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/zreviewsbot-slack-app-review-%E9%80%9A%E7%9F%A5%E6%A9%9F%E5%99%A8%E4%BA%BA-33f6aabb744f/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1620222679" data-df="ll" > May 5, 2021 </time><h4 class="pt-0 my-2">ZReviewsBot — Slack App Review 通知機器人</h4><div class="text-muted"><p></p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/en/zreviewsbot-slack-app-review-notification-bot-33f6aabb744f/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1620222679" data-df="ll" > May 5, 2021 </time><h4 class="pt-0 my-2">ZReviewsBot — Slack App Review Notification Bot</h4><div class="text-muted"><p></p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/%E4%BD%BF%E7%94%A8-firebase-firestore-functions-%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E5%8F%AF%E4%BE%9B%E6%B8%AC%E8%A9%A6%E7%9A%84-api-%E6%9C%8D%E5%8B%99-9659db1357e4/" class="btn btn-outline-primary" aria-label="Older" ><p>使用 Firebase Firestore + Functions 快速搭建可供測試的 API 服務</p></a> <a href="/posts/zrealm-dev/appstore-app-s-reviews-bot-%E9%82%A3%E4%BA%9B%E4%BA%8B-cb0c68c33994/" class="btn btn-outline-primary" aria-label="Newer" ><p>AppStore APP’s Reviews Bot 那些事</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> All Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a><br/>Last updated: 2025-08-15 01:30:24 +08:00</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
