<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="iOS Deferred Deep Link Implementation (Swift)" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="Hands-on creation of an uninterrupted app transition process adaptable to all scenarios" /><meta property="og:description" content="Hands-on creation of an uninterrupted app transition process adaptable to all scenarios" /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/en/ios-deferred-deep-link-implementation-swift-b08ef940c196/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/en/ios-deferred-deep-link-implementation-swift-b08ef940c196/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/b08ef940c196/1*P2saSHeIX7TZyCQY0StN1Q.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-11-11T22:34:57+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/b08ef940c196/1*P2saSHeIX7TZyCQY0StN1Q.webp" /><meta property="twitter:title" content="iOS Deferred Deep Link Implementation (Swift)" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://medium.com/@zhgchgli/"},"dateModified":"2024-09-13T17:32:09+08:00","datePublished":"2019-11-11T22:34:57+08:00","description":"Hands-on creation of an uninterrupted app transition process adaptable to all scenarios","headline":"iOS Deferred Deep Link Implementation (Swift)","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTAiIGhlaWdodD0iMTMzNCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg==","url":"https://zhgchg.li/assets/b08ef940c196/1*P2saSHeIX7TZyCQY0StN1Q.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/en/ios-deferred-deep-link-implementation-swift-b08ef940c196/"},"url":"https://zhgchg.li/posts/zrealm-dev/en/ios-deferred-deep-link-implementation-swift-b08ef940c196/"}</script><title>iOS Deferred Deep Link Implementation (Swift) | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0"> <a href="https://medium.com/@zhgchgli" target="_blank" style="display: block;text-align: center;font-style: normal;/* text-decoration: underline; */font-size: 1.2em;color: var(--heading-color);">1K+ Followers on Medium</a> An iOS, web, and automation developer from Taiwan 🇹🇼 who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>iOS Deferred Deep Link Implementation (Swift)</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>iOS Deferred Deep Link Implementation (Swift)</h1><p class="post-desc fw-light mb-4">Hands-on creation of an uninterrupted app transition process adaptable to all scenarios</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1573482897" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Nov 11, 2019 </time> </span> <span> Updated <time data-ts="1726219929" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Sep 13, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/assets/b08ef940c196/1*P2saSHeIX7TZyCQY0StN1Q.webp" class="popup img-link preview-img blur"><img data-src="/assets/b08ef940c196/1*P2saSHeIX7TZyCQY0StN1Q.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTAiIGhlaWdodD0iMTMzNCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://medium.com/@zhgchgli/">ZhgChgLi</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="2654 words" > <em>14 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">iOS Deferred Deep Link Implementation (Swift)</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">章節 (Chapters)🔖</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">iOS Deferred Deep Link Implementation (Swift)</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><hr /><h3 id="ℹ️ℹ️ℹ️-the-following-content-is-translated-by-openai"><span class="me-2">ℹ️ℹ️ℹ️ The following content is translated by OpenAI.</span><a href="#ℹ️ℹ️ℹ️-the-following-content-is-translated-by-openai" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="click-here-to-view-the-original-chinese-version--點此查看本文中文版"><span class="me-2"><a href="/posts/b08ef940c196/">Click here</a> to view the original Chinese version. | <a href="/posts/b08ef940c196/">點此查看本文中文版</a></span><a href="#click-here-to-view-the-original-chinese-version--點此查看本文中文版" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><h3 id="ios-deferred-deep-link-implementation-swift"><span class="me-2">iOS Deferred Deep Link Implementation (Swift)</span><a href="#ios-deferred-deep-link-implementation-swift" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Hands-on creation of an uninterrupted app transition process adaptable to all scenarios</p><h3 id="20220722-update-on-upcoming-changes-in-ios-16"><span class="me-2">[2022/07/22] Update on Upcoming Changes in iOS 16</span><a href="#20220722-update-on-upcoming-changes-in-ios-16" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Starting from iOS ≥ 16, when a user does not actively paste, the app’s attempt to read the clipboard will trigger a prompt asking for permission. The user must grant permission for the app to access clipboard information.</p><p><a href="/assets/b08ef940c196/0*E8h6Fy0H9_5jxhjV.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/0*E8h6Fy0H9_5jxhjV.webp" alt="[UIPasteBoard’s privacy change in iOS 16](https://sarunw.com/posts/uipasteboard-privacy-change-ios16/){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNjAiIGhlaWdodD0iMTkzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://sarunw.com/posts/uipasteboard-privacy-change-ios16/" target="_blank">UIPasteBoard’s privacy change in iOS 16</a></p><h3 id="20200702-update"><span class="me-2">[2020/07/02] Update</span><a href="#20200702-update" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><a href="/posts/zrealm-dev/en/ios-14-clipboard-privacy-panic-the-dilemma-of-privacy-vs-convenience-8a04443024e2/">Due to the iOS 14 update, users will be prompted when reading the clipboard. Please refer to this article for implementation.</a></ul><h4 id="irrelevant"><span class="me-2">Irrelevant</span><a href="#irrelevant" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>After graduating and completing military service, I’ve been working for nearly three years. My growth has plateaued, and I’ve started to settle into my comfort zone. Fortunately, I made the bold decision to resign and take a step back to reassess my path.</p><p>While reading <a href="https://www.books.com.tw/products/0010733134" target="_blank">Designing Your Life</a>, I reflected on my career and life. Although my technical skills aren’t exceptional, writing on Medium and sharing with others allows me to enter a “flow state” and gain a lot of energy. Recently, a friend asked about Deep Link issues, so I organized my research on the topic and replenished my energy in the process!</p><h3 id="scenarios"><span class="me-2">Scenarios</span><a href="#scenarios" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>First, let’s clarify the actual application scenarios.</p><p>1. When a user clicks a URL link (from Google search, FB post, Line link, etc.) and has the app installed, the app should open directly to the target screen. If not installed, it should redirect to the App Store to install the app; <strong>after installation, opening the app should recreate the previously intended screen</strong>.</p><p><a href="https://www.youtube.com/watch?v=sY6-Q7BFUOM" target="_blank"></a></p><p>2. Tracking app downloads and openings. We want to know how many users actually downloaded and opened the app from the promotional link.</p><p>3. Special event entries, for example, downloading and opening through a specific URL to receive rewards.</p><h4 id="support"><span class="me-2">Support:</span><a href="#support" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>iOS ≥ 9</p><h3 id="what-is-the-difference-between-deferred-deep-link-and-deep-link"><span class="me-2">What is the difference between Deferred Deep Link and Deep Link?</span><a href="#what-is-the-difference-between-deferred-deep-link-and-deep-link" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="pure-deep-link"><span class="me-2">Pure Deep Link:</span><a href="#pure-deep-link" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/b08ef940c196/1*15arO4L94ZoEyOLtFARtsA.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/1*15arO4L94ZoEyOLtFARtsA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MTciIGhlaWdodD0iNTMyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>As you can see, the mechanism of iOS Deep Link only determines whether the app is installed. If it is, the app opens; if not, nothing happens.</p><h4 id="first-we-need-to-add-a-prompt-for-redirect-to-the-app-store-if-not-installed-to-inform-users-to-install-the-app"><span class="me-2">First, we need to add a prompt for “redirect to the App Store if not installed” to inform users to install the app:</span><a href="#first-we-need-to-add-a-prompt-for-redirect-to-the-app-store-if-not-installed-to-inform-users-to-install-the-app" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The <strong>URL Scheme</strong> part is controlled by the system and is generally used for internal app calls, which are rarely made public; if the trigger point is in an area that cannot be controlled (e.g., Line link), it cannot be processed.</p><p>If the trigger point is on your own webpage, you can use some tricks to handle it. Please refer to <a href="https://stackoverflow.com/questions/627916/check-if-url-scheme-is-supported-in-javascript" target="_blank"><strong>this link</strong></a>:</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;title&gt;</span>Redirect...<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;script&gt;</span>
    var appurl = 'marry://open';
    var appstore = 'https://apps.apple.com/tw/app/%E7%B5%90%E5%A9%9A%E5%90%A7-%E6%9C%80%E5%A4%A7%E5%A9%9A%E7%A6%AE%E7%B1%8C%E5%82%99app/id1356057329';

    var timeout;
    function start() {
      window.location = appurl;
      timeout = setTimeout(function(){
        if(confirm('Would you like to install the Marriage App now?')){
          document.location = appstore;
        }
      }, 1000);
    }

    window.onload = function() {
      start()
    }
  <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><p>The basic logic is to <strong>call the URL Scheme, then set a timeout. If the page hasn’t redirected after the timeout, we assume the scheme cannot be called because the app isn’t installed, and we redirect to the App Store page</strong> (though the experience is still poor and may show an error message, it at least adds automatic redirection).</p><p><strong>Universal Link</strong> is essentially a webpage of its own. If there is no redirection, it defaults to being displayed in a web browser. If you have web services, you can choose to directly open the webpage; if not, it redirects to the App Store page.</p><p>Websites with web services can add the following in <code class="language-plaintext highlighter-rouge">&lt;head&gt;&lt;/head&gt;</code>:</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"apple-itunes-app"</span> <span class="na">content=</span><span class="s">"app-id=APPID, app-argument=page-parameter"</span><span class="nt">&gt;</span>
</pre></table></code></div></div><p><a href="/assets/b08ef940c196/1*nC1JytAwIwKU04EMBBvf0A.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/1*nC1JytAwIwKU04EMBBvf0A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NDMiIGhlaWdodD0iNDk4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>When browsing the webpage version in iPhone Safari, a prompt to install the app and a button to open this page in the app will appear at the top; the parameter <code class="language-plaintext highlighter-rouge">app-argument</code> is used to pass the page value to the app.</p><p><a href="/assets/b08ef940c196/1*B-_5tIDWQpNO8NxpXQsEcA.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/1*B-_5tIDWQpNO8NxpXQsEcA.webp" alt="Flowchart for adding &quot;redirect to the App Store if not installed&quot;" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MjciIGhlaWdodD0iMTE0MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Flowchart for adding “redirect to the App Store if not installed”</p><h4 id="complete-deep-link-handling-on-the-app-side"><span class="me-2">Complete Deep Link Handling on the App Side:</span><a href="#complete-deep-link-handling-on-the-app-side" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>What we want is not just “open the app if the user has it installed,” but also to connect the source information with the app, allowing the app to automatically present the target page after opening.</p><p>The <strong>URL Scheme</strong> method can be handled in <code class="language-plaintext highlighter-rouge">func application(_ application: UIApplication, open url: URL, sourceApplication: String?, annotation: Any) -&gt; Bool</code> in AppDelegate:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="kd">open</span> <span class="nv">url</span><span class="p">:</span> <span class="kt">URL</span><span class="p">,</span> <span class="nv">sourceApplication</span><span class="p">:</span> <span class="kt">String</span><span class="p">?,</span> <span class="nv">annotation</span><span class="p">:</span> <span class="kt">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s">"marry"</span><span class="p">,</span> <span class="k">let</span> <span class="nv">params</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">queryParameters</span> <span class="p">{</span>
      <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="s">"type"</span><span class="p">]</span> <span class="o">==</span> <span class="s">"topic"</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">VC</span> <span class="o">=</span> <span class="kt">TopicViewController</span><span class="p">(</span><span class="nv">topicID</span><span class="p">:</span> <span class="n">params</span><span class="p">[</span><span class="s">"id"</span><span class="p">])</span>
        <span class="kt">UIApplication</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">keyWindow</span><span class="p">?</span><span class="o">.</span><span class="n">rootViewController</span><span class="p">?</span><span class="o">.</span><span class="nf">present</span><span class="p">(</span><span class="kt">VC</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
      <span class="p">}</span>    
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></table></code></div></div><p><strong>Universal Link</strong> is handled in <code class="language-plaintext highlighter-rouge">func application(_ application: UIApplication, continue userActivity: NSUserActivity, restorationHandler: @escaping ([Any]?) -&gt; Void) -&gt; Bool</code> in AppDelegate:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="kd">extension</span> <span class="kt">URL</span> <span class="p">{</span>
    <span class="c1">/// test=1&amp;a=b&amp;c=d =&gt; ["test":"1","a":"b","c":"d"]</span>
    <span class="c1">/// Parses the URL query into a [String: String] dictionary</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">queryParameters</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">String</span><span class="p">]?</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">components</span> <span class="o">=</span> <span class="kt">URLComponents</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="k">self</span><span class="p">,</span> <span class="nv">resolvingAgainstBaseURL</span><span class="p">:</span> <span class="kc">true</span><span class="p">),</span> <span class="k">let</span> <span class="nv">queryItems</span> <span class="o">=</span> <span class="n">components</span><span class="o">.</span><span class="n">queryItems</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">nil</span>
        <span class="p">}</span>
        
        <span class="k">var</span> <span class="nv">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">String</span><span class="p">]()</span>
        <span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="n">queryItems</span> <span class="p">{</span>
            <span class="n">parameters</span><span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">value</span>
        <span class="p">}</span>
        
        <span class="k">return</span> <span class="n">parameters</span>
    <span class="p">}</span>
    
<span class="p">}</span>
</pre></table></code></div></div><p>Here’s a URL extension method for <code class="language-plaintext highlighter-rouge">queryParameters</code>, which conveniently converts the URL query into a Swift Dictionary.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="k">continue</span> <span class="nv">userActivity</span><span class="p">:</span> <span class="kt">NSUserActivity</span><span class="p">,</span> <span class="nv">restorationHandler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">([</span><span class="kt">Any</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        
  <span class="k">if</span> <span class="n">userActivity</span><span class="o">.</span><span class="n">activityType</span> <span class="o">==</span> <span class="kt">NSUserActivityTypeBrowsingWeb</span><span class="p">,</span> <span class="k">let</span> <span class="nv">webpageURL</span> <span class="o">=</span> <span class="n">userActivity</span><span class="o">.</span><span class="n">webpageURL</span> <span class="p">{</span>
    <span class="c1">/// If the source is a universal link URL...</span>
    <span class="k">let</span> <span class="nv">params</span> <span class="o">=</span> <span class="n">webpageURL</span><span class="o">.</span><span class="n">queryParameters</span>
    
    <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="s">"type"</span><span class="p">]</span> <span class="o">==</span> <span class="s">"topic"</span> <span class="p">{</span>
      <span class="k">let</span> <span class="nv">VC</span> <span class="o">=</span> <span class="kt">TopicViewController</span><span class="p">(</span><span class="nv">topicID</span><span class="p">:</span> <span class="n">params</span><span class="p">[</span><span class="s">"id"</span><span class="p">])</span>
      <span class="kt">UIApplication</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">keyWindow</span><span class="p">?</span><span class="o">.</span><span class="n">rootViewController</span><span class="p">?</span><span class="o">.</span><span class="nf">present</span><span class="p">(</span><span class="kt">VC</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
  
  <span class="k">return</span> <span class="kc">true</span>  
<span class="p">}</span>
</pre></table></code></div></div><p><a href="/assets/b08ef940c196/1*zhtWK56EqWpE91yTVu64Lg.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/1*zhtWK56EqWpE91yTVu64Lg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDkiIGhlaWdodD0iNDI1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Done!</p><h4 id="what-else-is-missing"><span class="me-2">What else is missing?</span><a href="#what-else-is-missing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>It seems perfect so far; we’ve handled all possible scenarios, but what else is missing?</p><p><a href="/assets/b08ef940c196/1*ulrLKyvTKoChPScWD9wHyA.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/1*ulrLKyvTKoChPScWD9wHyA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjcyNyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>As shown in the diagram, if the user is not installed -&gt; installs from the App Store -&gt; opens from the App Store, the source data will be lost, and the app won’t know the source, so it will only display the homepage. The user will have to go back to the previous webpage and click to open again for the app to navigate to the intended page.</p><p><a href="/assets/b08ef940c196/1*dFdvCRRdM3vrN3lnyG8Diw.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/1*dFdvCRRdM3vrN3lnyG8Diw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY4MSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><blockquote><p><em>While this approach is not impossible, considering the drop-off rate, adding an extra step increases the likelihood of losing users, and the user experience becomes less smooth; moreover, users may not be that savvy.</em></p></blockquote><h4 id="entering-the-main-point-of-the-article"><span class="me-2">Entering the Main Point of the Article</span><a href="#entering-the-main-point-of-the-article" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>What is Deferred Deep Link? It is a delayed deep link that allows our Deep Link to retain source data even after the app is installed from the App Store.</p><p>According to Android engineers, Android has this functionality built-in, but iOS does not support this setting, and achieving this functionality is not user-friendly. Please continue reading.</p><h3 id="deferred-deep-link"><span class="me-2">Deferred Deep Link</span><a href="#deferred-deep-link" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><p><em>If you don’t want to spend time implementing this yourself, you can directly use <a href="http://branch.io" target="_blank">branch.io</a> or <a href="https://firebase.google.com/docs/dynamic-links" target="_blank">Firebase Dynamic Links</a> The method introduced in this article is the one used by Firebase.</em></p></blockquote><p><strong>To achieve the effect of Deferred Deep Link, there are two methods available online:</strong></p><p>One method calculates a hash value based on user device, IP, environment, etc., and stores data on the server when the webpage is accessed; when the app is installed and opened, it calculates the value in the same way. If the values match, it retrieves the data (this is the approach used by branch.io).</p><p>The other method, which this article will introduce, is similar to Firebase’s approach; it uses the iPhone clipboard and the shared mechanism between Safari and the app’s cookies, effectively storing data in the clipboard or cookies, which the app can read after installation.</p><p><a href="/assets/b08ef940c196/1*VVahSlHV2N2jcIw4afzr2g.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/1*VVahSlHV2N2jcIw4afzr2g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NzUiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>After clicking "Open," your clipboard will be automatically overwritten with JavaScript, copying the relevant redirect information: https://XXX.app.goo.gl/?link=https://XXX.net/topicID=1&amp;type=topic
</pre></table></code></div></div><p>Those who have used Firebase Dynamic Links will be familiar with this redirect page; once you understand the principle, you’ll realize this page cannot be removed from the flow!</p><p>Additionally, Firebase does not allow for style modifications.</p><h4 id="support-1"><span class="me-2">Support</span><a href="#support-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>First, let’s talk about the pitfalls regarding support; as mentioned earlier, it is “not user-friendly”!</p><p><a href="/assets/b08ef940c196/1*LR3MSAcwjaoSQhwvtD2sUQ.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/1*LR3MSAcwjaoSQhwvtD2sUQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NDIiIGhlaWdodD0iNzAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>If the app only considers iOS ≥ 10, it becomes much easier. The app can implement clipboard access, and the web can use JavaScript to overwrite the clipboard information, then redirect to the App Store for download.</p><p>iOS = 9 does not support automatic clipboard access via JavaScript but does support <strong>Cookie sharing between Safari and the app’s SFSafariViewController</strong>.</p><p>Additionally, the app needs to secretly load an SFSafariViewController in the background to retrieve the cookie information stored when the link was clicked.</p><blockquote><p><em>The steps are cumbersome, and link clicks are limited to the Safari browser.</em></p></blockquote><p><a href="/assets/b08ef940c196/1*tPXHlrQE3MdrjMzFbnS_4w.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/1*tPXHlrQE3MdrjMzFbnS_4w.webp" alt="[SFSafariViewController](https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTQiIGhlaWdodD0iNDQ0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller" target="_blank">SFSafariViewController</a></p><blockquote><p><em>According to official documentation, starting from iOS 11, it is no longer possible to access the user’s Safari cookies. If you need this functionality, you can use SFAuthenticationSession, but this method cannot run in the background and will always prompt the following dialog before loading:</em></p></blockquote><p><a href="/assets/b08ef940c196/1*eisreftWPWn9PTCbuLQqdw.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/1*eisreftWPWn9PTCbuLQqdw.webp" alt="_SFAuthenticationSession Prompt_" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTAiIGhlaWdodD0iMzQyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><em>SFAuthenticationSession Prompt</em></p><blockquote><p><em>Moreover, app review does not allow placing SFSafariViewController in areas where users cannot see it. (Triggering it programmatically and then adding it as a subview is not easily detectable)</em></p></blockquote><h3 id="hands-on"><span class="me-2">Hands-On</span><a href="#hands-on" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Let’s start with the simpler part, considering only users on iOS ≥ 10, using the iPhone clipboard to transfer information.</p><h4 id="web-side"><span class="me-2">Web Side:</span><a href="#web-side" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/b08ef940c196/1*P2saSHeIX7TZyCQY0StN1Q.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/1*P2saSHeIX7TZyCQY0StN1Q.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTAiIGhlaWdodD0iMTMzNCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>We created a custom page mimicking Firebase Dynamic Links, using the <code class="language-plaintext highlighter-rouge">clipboard.js</code> library to copy the information we want to send to the app to the clipboard <code class="language-plaintext highlighter-rouge">（marry://topicID=1&amp;type=topic）</code> when the user clicks “Go Now,” and then using <code class="language-plaintext highlighter-rouge">location.href</code> to redirect to the App Store page.</p><h4 id="app-side"><span class="me-2">App Side:</span><a href="#app-side" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>In the AppDelegate or main UIViewController, read the clipboard value:</p><p><code class="language-plaintext highlighter-rouge">let pasteData = UIPasteboard.general.string</code></p><p>It is recommended to wrap the information using the URL Scheme for easier identification and data resolution:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">if</span> <span class="k">let</span> <span class="nv">pasteData</span> <span class="o">=</span> <span class="kt">UIPasteboard</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="n">pasteData</span><span class="p">),</span> <span class="n">url</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s">"marry"</span><span class="p">,</span> <span class="k">let</span> <span class="nv">params</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">queryParameters</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">params</span><span class="p">[</span><span class="s">"type"</span><span class="p">]</span> <span class="o">==</span> <span class="s">"topic"</span> <span class="p">{</span>
      <span class="k">let</span> <span class="nv">VC</span> <span class="o">=</span> <span class="kt">TopicViewController</span><span class="p">(</span><span class="nv">topicID</span><span class="p">:</span> <span class="n">params</span><span class="p">[</span><span class="s">"id"</span><span class="p">])</span>
      <span class="kt">UIApplication</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">keyWindow</span><span class="p">?</span><span class="o">.</span><span class="n">rootViewController</span><span class="p">?</span><span class="o">.</span><span class="nf">present</span><span class="p">(</span><span class="kt">VC</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Finally, after processing the action, use <code class="language-plaintext highlighter-rouge">UIPasteboard.general.string = ""</code> to clear the information from the clipboard.</p><h3 id="hands-on--supporting-ios-9"><span class="me-2">Hands-On — Supporting iOS 9</span><a href="#hands-on--supporting-ios-9" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Now comes the tricky part, supporting iOS 9. As mentioned earlier, since clipboard access is not supported, we will use the <strong>Cookie sharing method</strong>.</p><h4 id="web-side-1"><span class="me-2">Web Side:</span><a href="#web-side-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The web side is relatively easy to handle; we just need to change it so that when the user clicks “Go Now,” we store the information we want to send to the app in a cookie <code class="language-plaintext highlighter-rouge">（marry://topicID=1&amp;type=topic）</code>, and then use <code class="language-plaintext highlighter-rouge">location.href</code> to redirect to the App Store page.</p><p>Here are two packaged JavaScript methods for handling cookies to speed up development:</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="c1">/// name: Cookie name</span>
<span class="c1">/// val: Cookie value</span>
<span class="c1">/// day: Cookie expiration, default is 1 day</span>
<span class="c1">/// EX1: setcookie("iosDeepLinkData","marry://topicID=1&amp;type=topic")</span>
<span class="c1">/// EX2: setcookie("hey","hi",365) = valid for one year</span>
<span class="kd">function</span> <span class="nf">setcookie</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">day</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">exdate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">();</span>
    <span class="nx">day</span> <span class="o">=</span> <span class="nx">day</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">exdate</span><span class="p">.</span><span class="nf">setDate</span><span class="p">(</span><span class="nx">exdate</span><span class="p">.</span><span class="nf">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="nx">day</span><span class="p">);</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span> <span class="o">=</span> <span class="dl">""</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">val</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">;expires=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">exdate</span><span class="p">.</span><span class="nf">toGMTString</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">/// getCookie("iosDeepLinkData") =&gt; marry://topicID=1&amp;type=topic</span>
<span class="kd">function</span> <span class="nf">getCookie</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="k">new</span> <span class="nc">RegExp</span><span class="p">(</span><span class="dl">"</span><span class="s2">(^| )</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">=([^;]*)(;|$)</span><span class="dl">"</span><span class="p">));</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">arr</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span> <span class="nf">decodeURI</span><span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><h4 id="app-side-1"><span class="me-2">App Side:</span><a href="#app-side-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>This is the most complicated part of the article.</p><p>As mentioned earlier, we need to secretly load an SFSafariViewController in the background in the main UIViewController without the user noticing.</p><p><strong>Another pitfall:</strong> The secret loading of SFSafariViewController; if its size is set to less than 1, its opacity is less than 0.05, or it is set to isHidden, SFSafariViewController will <strong>not load</strong>.</p><blockquote><p>p.s. iOS = 10 supports both Cookie and clipboard.</p></blockquote><p><a href="/assets/b08ef940c196/1*ab-6ppwHU72AsKKLYBitbw.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/1*ab-6ppwHU72AsKKLYBitbw.webp" alt="[https://stackoverflow.com/questions/39019352/ios10-sfsafariviewcontroller-not-working-when-alpha-is-set-to-0/39216788](https://stackoverflow.com/questions/39019352/ios10-sfsafariviewcontroller-not-working-when-alpha-is-set-to-0/39216788){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2OTAiIGhlaWdodD0iMjY2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://stackoverflow.com/questions/39019352/ios10-sfsafariviewcontroller-not-working-when-alpha-is-set-to-0/39216788" target="_blank">https://stackoverflow.com/questions/39019352/ios10-sfsafariviewcontroller-not-working-when-alpha-is-set-to-0/39216788</a></p><div class="language-markdown highlighter-rouge"><div class="code-header"> <span data-label-text="Markdown"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">iOS</span><span class="nv"> </span><span class="s">Deferred</span><span class="nv"> </span><span class="s">Deep</span><span class="nv"> </span><span class="s">Link</span><span class="nv"> </span><span class="s">Implementation"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2023-10-01</span>
<span class="nn">---</span>

My approach here is to place a UIView at the top of the main page's UIViewController with an arbitrary height, aligning its bottom with the top of the main page's UIView. Then, I connect the IBOutlet <span class="sb">`sharedCookieView`</span> to the class. In the <span class="sb">`viewDidLoad()`</span> method, I initialize the SFSafariViewController and add its view to <span class="sb">`sharedCookieView`</span>. So, it actually shows that it has loaded, but it runs off the screen, making it invisible to the user 🌝.

<span class="gs">**What URL should the SFSafariViewController point to?**</span>

Similar to the web sharing page, we need to create another page for reading cookies and place both pages under the same domain to avoid cross-domain cookie issues. I will attach the page content later.
<span class="p">```</span><span class="nl">swift
</span><span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">SharedCookieView</span><span class="p">:</span> <span class="kt">UIView</span><span class="o">!</span>

<span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
    
    <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span><span class="s">"http://app.marry.com.tw/loadCookie.html"</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">sharedCookieViewController</span> <span class="o">=</span> <span class="kt">SFSafariViewController</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
    <span class="kt">VC</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="kt">CGRect</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">width</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">200</span><span class="p">)</span>
    <span class="n">sharedCookieViewController</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
    
    <span class="k">self</span><span class="o">.</span><span class="nf">addChildViewController</span><span class="p">(</span><span class="n">sharedCookieViewController</span><span class="p">)</span>
    <span class="k">self</span><span class="o">.</span><span class="kt">SharedCookieView</span><span class="o">.</span><span class="nf">addSubview</span><span class="p">(</span><span class="n">sharedCookieViewController</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
    
    <span class="n">sharedCookieViewController</span><span class="o">.</span><span class="nf">beginAppearanceTransition</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>
    <span class="n">sharedCookieViewController</span><span class="o">.</span><span class="nf">didMove</span><span class="p">(</span><span class="nv">toParentViewController</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
    <span class="n">sharedCookieViewController</span><span class="o">.</span><span class="nf">endAppearanceTransition</span><span class="p">()</span>
<span class="p">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">sharedCookieViewController.delegate = self</code></p><p><code class="language-plaintext highlighter-rouge">class HomeViewController: UIViewController, SFSafariViewControllerDelegate</code></p><p>You need to add this delegate to capture the callback after the loading is complete.</p><p>We can capture the loading completion event in:</p><p><code class="language-plaintext highlighter-rouge">func safariViewController(_ controller: SFSafariViewController, didCompleteInitialLoad didLoadSuccessfully: Bool) {</code></p><p>At this point, you might think that the next step is to read the cookies from the webpage in <code class="language-plaintext highlighter-rouge">didCompleteInitialLoad</code>, and that would be it!</p><p>I haven’t found a method to read cookies from SFSafariViewController; the methods found online all return empty results.</p><blockquote><p><em>Alternatively, you might need to use JavaScript to interact with the page content, asking JavaScript to read the cookies and return them to the UIViewController.</em></p></blockquote><h4 id="the-tricky-url-scheme-method"><span class="me-2">The Tricky URL Scheme Method</span><a href="#the-tricky-url-scheme-method" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Since iOS does not know how to obtain shared cookies, we can directly let the “cookie reading page” help us “read the cookies.”</p><p>The <code class="language-plaintext highlighter-rouge">getCookie()</code> method from the JavaScript cookie handling approach mentioned earlier is used for this. Our “cookie reading page” is a blank page (since the user won’t see it), but in the JavaScript part, we need to read the cookies after the body onload:</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;title&gt;</span>Load iOS Deep Link Saved Cookie...<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;script&gt;</span>
  function checkCookie() {
    var iOSDeepLinkData = getCookie("iOSDeepLinkData");
    if (iOSDeepLinkData <span class="err">&amp;&amp;</span> iOSDeepLinkData != '') {
        setcookie("iOSDeepLinkData", "", -1);
        window.location.href = iOSDeepLinkData; /// marry://topicID=1<span class="err">&amp;</span>type=topic
    }
  }
  <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body</span> <span class="na">onload=</span><span class="s">"checkCookie();"</span><span class="nt">&gt;</span>

<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span>
</pre></table></code></div></div><p>The actual principle is summarized as follows: when <code class="language-plaintext highlighter-rouge">HomeViewController viewDidLoad</code> is called, we add the <code class="language-plaintext highlighter-rouge">SFSafariViewController</code> to stealthily load the <code class="language-plaintext highlighter-rouge">loadCookie.html</code> page. The <code class="language-plaintext highlighter-rouge">loadCookie.html</code> page checks for previously stored cookies, and if found, it reads and clears them, then uses <code class="language-plaintext highlighter-rouge">window.location.href</code> to call and trigger the <code class="language-plaintext highlighter-rouge">URL Scheme</code> mechanism.</p><p>Thus, the corresponding callback handling will return to the <code class="language-plaintext highlighter-rouge">AppDelegate</code> in the <code class="language-plaintext highlighter-rouge">func application(_ application: UIApplication, open url: URL, sourceApplication: String?, annotation: Any) -&gt; Bool</code> method for processing.</p><h3 id="done-summary"><span class="me-2">Done! Summary:</span><a href="#done-summary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/b08ef940c196/1*kp26TdlJBW5sVxw4zYa9Rg.webp" class="popup img-link blur"><img data-src="/assets/b08ef940c196/1*kp26TdlJBW5sVxw4zYa9Rg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjczIiBoZWlnaHQ9Ijg0MSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>If you find this tedious, you can directly use <a href="http://branch.io" target="_blank">branch.io</a> or <a href="https://firebase.google.com/docs/dynamic-links" target="_blank">Firebase Dynamic</a>—there’s no need to reinvent the wheel. This is because of the need for interface customization and some complex requirements, so I had to build it myself.</p><p>Users on iOS 9 are already very rare, so if it’s not necessary, you can ignore it; using the clipboard method is quick and efficient, and with the clipboard, you don’t have to limit the link to be opened in Safari!</p><p>If you have any questions or suggestions, feel free to <a href="https://www.zhgchg.li/contact" target="_blank">contact me</a>.</p><p>```</p><hr /><p>This article was first published on Medium ➡️ <a href="https://medium.com/p/b08ef940c196" target="_blank"><strong>Click Here</strong></a></p><p>Automatically converted and synchronized using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a> and <a href="https://github.com/ZhgChgLi/medium-to-jekyll-starter.github.io" target="_blank">Medium-to-jekyll-starter</a>.</p><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/en/zmediumtomarkdown/2019-11-11-b08ef940c196.md" target="_blank">Improve this page on Github.</a></p><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=🍺&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a></p><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); border-bottom: 1px solid var(--main-border-color);transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1K+ Followers</span></a></div><div style="font-size: 0.8em; cursor:default; text-align: right;"> 21,132 <span style="font-size: 0.9em;">Total Views</span><br /> <span style="font-size: 0.8em;">Last Statistics Date: 2025-08-15 | 20,950 Views on <a href="https://medium.com/p/b08ef940c196" target="_blank">Medium.</a></span></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/deeplink/" class="post-tag no-text-decoration" >deeplink</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/swift/" class="post-tag no-text-decoration" >swift</a> <a href="/tags/universal-links/" class="post-tag no-text-decoration" >universal-links</a> <a href="/tags/app-store/" class="post-tag no-text-decoration" >app-store</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=iOS%20Deferred%20Deep%20Link%20Implementation%20(Swift)%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fios-deferred-deep-link-implementation-swift-b08ef940c196%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=iOS%20Deferred%20Deep%20Link%20Implementation%20(Swift)%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fios-deferred-deep-link-implementation-swift-b08ef940c196%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fios-deferred-deep-link-implementation-swift-b08ef940c196%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/z-travel-diaries/en/travel-diary-8-days-and-7-nights-in-busan-south-korea-2025-8ace34a1a3d8/">Travel Diary: 8 Days and 7 Nights in Busan, South Korea 2025</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2025-%E9%9F%93%E5%9C%8B%E9%87%9C%E5%B1%B1-8-%E5%A4%A9-7-%E5%A4%9C%E8%87%AA%E7%94%B1%E8%A1%8C-8ace34a1a3d8/">遊記 2025 韓國釜山 8 天 7 夜自由行</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-9-11-%E5%90%8D%E5%8F%A4%E5%B1%8B%E4%B8%80%E6%97%A5%E5%BF%AB%E9%96%83%E8%87%AA%E7%94%B1%E8%A1%8C-7b8a0563c157/">遊記 9/11 名古屋一日快閃自由行</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2023-%E4%B9%9D%E5%B7%9E-10-%E6%97%A5%E8%87%AA%E7%94%B1%E8%A1%8C%E7%8D%A8%E6%97%85-d78e0b15a08a/">遊記 2023 九州 10 日自由行獨旅</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2023-%E4%BA%AC%E9%98%AA%E7%A5%9E-8-%E6%97%A5%E8%87%AA%E7%94%B1%E8%A1%8C-76d66c2e34af/">遊記 2023 京阪神 8 日自由行</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">章節 (Chapters)🔖</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/ios-deferred-deep-link-%E5%BB%B6%E9%81%B2%E6%B7%B1%E5%BA%A6%E9%80%A3%E7%B5%90%E5%AF%A6%E4%BD%9C-swift-b08ef940c196/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1573482897" data-df="ll" > Nov 11, 2019 </time><h4 class="pt-0 my-2">iOS Deferred Deep Link 延遲深度連結實作(Swift)</h4><div class="text-muted"><p>動手打造適應所有場景、不中斷的App轉跳流程</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/universal-links-%E6%96%B0%E9%AE%AE%E4%BA%8B-12c5026da33d/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1612411045" data-df="ll" > Feb 4, 2021 </time><h4 class="pt-0 my-2">Universal Links 新鮮事</h4><div class="text-muted"><p>iOS 13, iOS 14 Universal Links 新鮮事＆建立本地測試環境</p></div></div></a></article><article class="col"> <a href="/posts/exploring-the-long-standing-issues-of-xcode-virtual-directories-and-my-open-source-tool-solution-fd719053b376-en/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1740918091" data-df="ll" > Mar 2, 2025 </time><h4 class="pt-0 my-2">Exploring the Long-Standing Issues of XCode Virtual Directories and My Open Source Tool Solution</h4><div class="text-muted"><p>The occupational hazards of Apple developers using virtual directories in Xcode early on, leading to chaotic directory structures and difficulties integrating modern tools like XcodeGen and Tuist.</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-life/ios-13-1-%E4%BD%BF%E7%94%A8-%E6%8D%B7%E5%BE%91-%E8%87%AA%E5%8B%95%E5%8C%96%E5%8A%9F%E8%83%BD%E6%90%AD%E9%85%8D%E7%B1%B3%E5%AE%B6%E6%99%BA%E6%85%A7%E5%AE%B6%E5%B1%85-21119db777dd/" class="btn btn-outline-primary" aria-label="Older" ><p>iOS ≥ 13.1 使用「捷徑」自動化功能搭配米家智慧家居</p></a> <a href="/posts/zrealm-dev/ios-deferred-deep-link-%E5%BB%B6%E9%81%B2%E6%B7%B1%E5%BA%A6%E9%80%A3%E7%B5%90%E5%AF%A6%E4%BD%9C-swift-b08ef940c196/" class="btn btn-outline-primary" aria-label="Newer" ><p>iOS Deferred Deep Link 延遲深度連結實作(Swift)</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> All Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a><br/>Last updated: 2025-08-16 10:58:52 +08:00</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
