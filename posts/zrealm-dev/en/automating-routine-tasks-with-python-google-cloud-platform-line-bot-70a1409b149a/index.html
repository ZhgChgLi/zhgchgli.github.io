<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="Automating Routine Tasks with Python + Google Cloud Platform + Line Bot" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="Creating a daily automatic check-in script using a check-in reward app as an example" /><meta property="og:description" content="Creating a daily automatic check-in script using a check-in reward app as an example" /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/en/automating-routine-tasks-with-python-google-cloud-platform-line-bot-70a1409b149a/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/en/automating-routine-tasks-with-python-google-cloud-platform-line-bot-70a1409b149a/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/70a1409b149a/1*dFvxm6SynzYOmMEUALKJaA.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-02-20T19:55:51+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/70a1409b149a/1*dFvxm6SynzYOmMEUALKJaA.webp" /><meta property="twitter:title" content="Automating Routine Tasks with Python + Google Cloud Platform + Line Bot" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://medium.com/@zhgchgli/"},"dateModified":"2024-04-13T16:57:38+08:00","datePublished":"2021-02-20T19:55:51+08:00","description":"Creating a daily automatic check-in script using a check-in reward app as an example","headline":"Automating Routine Tasks with Python + Google Cloud Platform + Line Bot","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjgwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg==","url":"https://zhgchg.li/assets/70a1409b149a/1*dFvxm6SynzYOmMEUALKJaA.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/en/automating-routine-tasks-with-python-google-cloud-platform-line-bot-70a1409b149a/"},"url":"https://zhgchg.li/posts/zrealm-dev/en/automating-routine-tasks-with-python-google-cloud-platform-line-bot-70a1409b149a/"}</script><title>Automating Routine Tasks with Python + Google Cloud Platform + Line Bot | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0"> <a href="https://medium.com/@zhgchgli" target="_blank" style="display: block;text-align: center;font-style: normal;/* text-decoration: underline; */font-size: 1.2em;color: var(--heading-color);">1K+ Followers on Medium</a> An iOS, web, and automation developer from Taiwan üáπüáº who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Automating Routine Tasks with Python + Google Cloud Platform + Line Bot</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Automating Routine Tasks with Python + Google Cloud Platform + Line Bot</h1><p class="post-desc fw-light mb-4">Creating a daily automatic check-in script using a check-in reward app as an example</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1613822151" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 20, 2021 </time> </span> <span> Updated <time data-ts="1712998658" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 13, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/assets/70a1409b149a/1*dFvxm6SynzYOmMEUALKJaA.webp" class="popup img-link preview-img blur"><img data-src="/assets/70a1409b149a/1*dFvxm6SynzYOmMEUALKJaA.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjgwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://medium.com/@zhgchgli/">ZhgChgLi</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="3294 words" > <em>18 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Automating Routine Tasks with Python + Google Cloud Platform + Line Bot</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Automating Routine Tasks with Python + Google Cloud Platform + Line Bot</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><hr /><h3 id="‚ÑπÔ∏è‚ÑπÔ∏è‚ÑπÔ∏è-the-following-content-is-translated-by-openai"><span class="me-2">‚ÑπÔ∏è‚ÑπÔ∏è‚ÑπÔ∏è The following content is translated by OpenAI.</span><a href="#‚ÑπÔ∏è‚ÑπÔ∏è‚ÑπÔ∏è-the-following-content-is-translated-by-openai" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="click-here-to-view-the-original-chinese-version--ÈªûÊ≠§Êü•ÁúãÊú¨Êñá‰∏≠ÊñáÁâà"><span class="me-2"><a href="/posts/70a1409b149a/">Click here</a> to view the original Chinese version. | <a href="/posts/70a1409b149a/">ÈªûÊ≠§Êü•ÁúãÊú¨Êñá‰∏≠ÊñáÁâà</a></span><a href="#click-here-to-view-the-original-chinese-version--ÈªûÊ≠§Êü•ÁúãÊú¨Êñá‰∏≠ÊñáÁâà" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><h3 id="automating-routine-tasks-with-pythongoogle-cloud-platformline-bot"><span class="me-2">Automating Routine Tasks with Python+Google Cloud Platform+Line Bot</span><a href="#automating-routine-tasks-with-pythongoogle-cloud-platformline-bot" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Using a check-in reward app as an example, we will create a daily automatic check-in script.</p><p><a href="/assets/70a1409b149a/1*dFvxm6SynzYOmMEUALKJaA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*dFvxm6SynzYOmMEUALKJaA.webp" alt="Photo by [Pawe≈Ç Czerwi≈Ñski](https://unsplash.com/@pawel_czerwinski?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjgwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Photo by <a href="https://unsplash.com/@pawel_czerwinski?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank">Pawe≈Ç Czerwi≈Ñski</a></p><h3 id="origin"><span class="me-2">Origin</span><a href="#origin" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>I have always had a habit of using Python to create small tools; some are serious, like automatically scraping data and generating reports for work, while others are more casual, such as scheduling automatic checks for desired information or delegating tasks that I would normally perform manually to a script.</p><p>For a long time, I have been quite brute-force about automation, simply running a Python script on a computer. The advantage is that it‚Äôs simple and convenient, but the downside is that you need a device connected to the internet and power. Even a Raspberry Pi consumes a small amount of electricity and internet costs, and it can‚Äôt be remotely controlled to start or stop (it can be done, but it‚Äôs cumbersome). This time, taking advantage of a break at work, I researched free and cloud-based methods.</p><h3 id="goal"><span class="me-2">Goal</span><a href="#goal" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><p>To run Python scripts in the cloud, execute them automatically on a schedule, and be able to start/stop them via the internet.</p></blockquote><blockquote><p><em>This article uses a clever trick I devised, writing an automatic check-in script for a check-in reward app that can check in for me daily without needing to open the app; it also sends me a notification after execution.</em></p></blockquote><p><a href="/assets/70a1409b149a/1*14yKaOt2YNSMILOD_EoXLg.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*14yKaOt2YNSMILOD_EoXLg.webp" alt="Completion Notification!" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTAiIGhlaWdodD0iNDUyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Completion Notification!</p><h4 id="chapter-order"><span class="me-2">Chapter Order</span><a href="#chapter-order" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li>Using Proxyman for Man-in-the-Middle API sniffing<li>Writing a Python script to spoof the app‚Äôs API request (simulating the check-in action)<li>Deploying the Python script to Google Cloud<li>Setting up automatic scheduling in Google Cloud</ol><ul><li>Due to the sensitivity of the topic, this article will not disclose which check-in reward app is being used; readers can extend the knowledge to their own use.<li><strong>If you only want to understand how to automate execution with Python, you can skip the first half about Man-in-the-Middle API sniffing and start from Chapter 3.</strong></ul><h4 id="tools-used"><span class="me-2">Tools Used</span><a href="#tools-used" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><strong>Proxyman</strong>: Man-in-the-Middle API sniffing<li><strong>Python</strong>: Writing scripts<li><strong>Linebot</strong>: Sending notifications of script execution results to myself<li><strong>Google Cloud Function</strong>: Hosting service for Python scripts<li><strong>Google Cloud Scheduler</strong>: Automatic scheduling service</ul><h3 id="1-using-proxyman-for-man-in-the-middle-api-sniffing"><span class="me-2">1. Using Proxyman for Man-in-the-Middle API Sniffing</span><a href="#1-using-proxyman-for-man-in-the-middle-api-sniffing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Previously, I wrote an article titled ‚Äú<a href="/posts/en/46410aaada00/">Apps Use HTTPS for Transmission, Yet Data Still Gets Stolen.</a>‚Äù which has a similar principle, but this time I used Proxyman instead of mitmproxy; it‚Äôs also free but more user-friendly.</p><ul><li>Download the Proxyman tool from the official website <a href="https://proxyman.io/" target="_blank">https://proxyman.io/</a>.<li>After downloading, launch Proxyman and install the Root certificate (to perform the Man-in-the-Middle attack and unpack HTTPS traffic content).</ul><p><a href="/assets/70a1409b149a/1*jb-FAN5h1oFVFFvu1bpYgw.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*jb-FAN5h1oFVFFvu1bpYgw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MTIiIGhlaWdodD0iNDQyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>‚ÄúCertificate‚Äù -&gt; ‚ÄúInstall Certificate On this Mac‚Äù -&gt; ‚ÄúInstalled &amp; Trusted‚Äù</p><p><strong>After installing the Root certificate on the computer, switch to the phone:</strong></p><p>‚ÄúCertificate‚Äù -&gt; ‚ÄúInstall Certificate On iOS‚Äù -&gt; ‚ÄúPhysical Devices‚Ä¶‚Äù</p><p><a href="/assets/70a1409b149a/1*DBi9YVmfoaPH9WSCoPXycA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*DBi9YVmfoaPH9WSCoPXycA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NzIiIGhlaWdodD0iMTEwNyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Follow the instructions to set up the proxy on your phone and complete the certificate installation and activation.</p><ul><li>Open the app you want to sniff API transmission content on your phone.</ul><p><a href="/assets/70a1409b149a/1*q2wbmQ3MJ6nYfjFSBHL9fw.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*q2wbmQ3MJ6nYfjFSBHL9fw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjU0OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>At this point, Proxyman on the Mac will display the sniffed traffic. Click on the device IP under the app API domain you want to view; the first time you check, you need to click ‚ÄúEnable only this domain‚Äù so that subsequent traffic can be unpacked.</p><p><strong>After clicking ‚ÄúEnable only this domain,‚Äù you will see the intercepted traffic with the original Request and Response information:</strong></p><p><a href="/assets/70a1409b149a/1*dIp1k-0u-BhJ7iTs0wEIuA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*dIp1k-0u-BhJ7iTs0wEIuA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9Ijc1NCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><blockquote><p><em>We use this method to sniff which API endpoint is called and what data is sent when checking in on the app, recording this information to simulate requests directly with Python later.</em></p></blockquote><blockquote><p><em>‚ö†Ô∏è Note that some app tokens may change, causing the Python simulation requests to fail later; you need to understand how the app token exchange works.</em></p></blockquote><blockquote><p><em>‚ö†Ô∏è If you confirm that Proxyman is functioning normally but the app cannot make requests while Proxyman is running, it indicates that the app may have implemented SSL Pinning; currently, there is no solution, and you will have to abandon it.</em></p></blockquote><blockquote><p><em>‚ö†Ô∏è App developers wanting to know how to prevent sniffing can refer to <a href="/posts/en/46410aaada00/">the previous article</a>.</em></p></blockquote><h4 id="assuming-we-obtained-the-following-information"><span class="me-2"><strong>Assuming we obtained the following information:</strong></span><a href="#assuming-we-obtained-the-following-information" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>POST /usercenter HTTP/1.1
Host: zhgchg.li
Content-Type: application/x-www-form-urlencoded
Cookie: PHPSESSID=dafd27784f94904dd586d4ca19d8ae62
Connection: keep-alive
Accept: */*
User-Agent: (iPhone12,3;iOS 14.5)
Content-Length: 1076
Accept-Language: zh-tw
Accept-Encoding: gzip, deflate, br
AuthToken: 12345
</pre></table></code></div></div><h3 id="2-writing-a-python-script-to-spoof-the-apps-api-request-simulating-the-check-in-action"><span class="me-2">2. Writing a Python Script to Spoof the App‚Äôs API Request (Simulating the Check-in Action)</span><a href="#2-writing-a-python-script-to-spoof-the-apps-api-request-simulating-the-check-in-action" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><p><em>Before writing the Python script, we can use <a href="https://www.postman.com/" target="_blank">Postman</a> to debug the parameters and observe which parameters are necessary or may change over time; however, you can also directly copy them.</em></p></blockquote><p><a href="/assets/70a1409b149a/1*eVF56j1oOgXeZYbkD1m22g.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*eVF56j1oOgXeZYbkD1m22g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NTMiIGhlaWdodD0iNTIxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>checkIn.py:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">requests</span>
<span class="kn">import</span> <span class="n">json</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">try</span><span class="p">:</span>
      <span class="n">data</span> <span class="o">=</span> <span class="p">{</span> <span class="sh">"</span><span class="s">action</span><span class="sh">"</span> <span class="p">:</span> <span class="sh">"</span><span class="s">checkIn</span><span class="sh">"</span> <span class="p">}</span>
      <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span> <span class="sh">"</span><span class="s">Cookie</span><span class="sh">"</span> <span class="p">:</span> <span class="sh">"</span><span class="s">PHPSESSID=dafd27784f94904dd586d4ca19d8ae62</span><span class="sh">"</span><span class="p">,</span> 
      <span class="sh">"</span><span class="s">AuthToken</span><span class="sh">"</span> <span class="p">:</span> <span class="sh">"</span><span class="s">12345</span><span class="sh">"</span><span class="p">,</span>
      <span class="sh">"</span><span class="s">User-Agent</span><span class="sh">"</span> <span class="p">:</span> <span class="sh">"</span><span class="s">(iPhone12,3;iOS 14.5)</span><span class="sh">"</span>
      <span class="p">}</span>
      
      <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="sh">'</span><span class="s">https://zhgchg.li/usercenter</span><span class="sh">'</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">loads</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">content</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="sh">'</span><span class="s">status_code</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
        <span class="k">return</span> <span class="sh">"</span><span class="s">CheckIn Success!</span><span class="sh">"</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="sh">'</span><span class="s">message</span><span class="sh">'</span><span class="p">]</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="k">return</span> <span class="nf">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></table></code></div></div><blockquote><p>_‚ö†Ô∏è The <code class="language-plaintext highlighter-rouge">main(args)</code> here will be explained later; if you want to test locally, just call <code class="language-plaintext highlighter-rouge">main(True)</code>. _</p></blockquote><p>Using the Requests library to execute the HTTP Request, if you encounter:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ImportError: No module named requests
</pre></table></code></div></div><p>Please install the package first using <code class="language-plaintext highlighter-rouge">pip install requests</code>.</p><h4 id="adding-linebot-notification-for-execution-results"><span class="me-2">Adding Linebot Notification for Execution Results:</span><a href="#adding-linebot-notification-for-execution-results" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>This part is quite simple; I only reference it to notify myself.</p><ul><li>Go to &amp; enable <a href="https://developers.line.biz/console/" target="_blank"><strong>Line Developers Console</strong></a>.<li>Create a Provider.</ul><p><a href="/assets/70a1409b149a/1*XVYHKZXoHT-2qkbwRcK5Qw.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*XVYHKZXoHT-2qkbwRcK5Qw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NjgiIGhlaWdodD0iMjgxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>Choose ‚ÄúCreate a Messaging API channel.‚Äù</ul><p><a href="/assets/70a1409b149a/1*8l_awW31J7FlYh5EvacSmA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*8l_awW31J7FlYh5EvacSmA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY1NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Fill in the basic information on the next step and click ‚ÄúCreate‚Äù to submit.</p><ul><li>After creation, find the ‚ÄúYour user ID‚Äù section under the first ‚ÄúBasic settings‚Äù tab; this is your User ID.</ul><p><a href="/assets/70a1409b149a/1*JCmFicC5gXVJ6j3Vgi7CPQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*JCmFicC5gXVJ6j3Vgi7CPQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTYiIGhlaWdodD0iNjkwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>After creation, select the ‚ÄúMessaging API‚Äù tab, scan the QR code to add the bot as a friend.</ul><p><a href="/assets/70a1409b149a/1*dOF0mHXz6z7be13zjIubTA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*dOF0mHXz6z7be13zjIubTA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3ODkiIGhlaWdodD0iNTY5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>Scroll down to find the ‚ÄúChannel access token‚Äù section and click ‚ÄúIssue‚Äù to generate the token.</ul><p><a href="/assets/70a1409b149a/1*eNiyLol6nokoOKsrGp21kw.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*eNiyLol6nokoOKsrGp21kw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MzkiIGhlaWdodD0iNjkyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>Copy the generated token; with this token, we can send messages to users.</ul><p><a href="/assets/70a1409b149a/1*LDr_vT4urUL73Z_p--yiKA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*LDr_vT4urUL73Z_p--yiKA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjExNiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><blockquote><p><em>With the User ID and Token, we can send messages to ourselves.</em></p></blockquote><blockquote><p><em>Since there are no other functions to implement, I didn‚Äôt even install the Python Line SDK; I just send HTTP requests directly.</em></p></blockquote><p><strong>After integrating with the previous Python script‚Ä¶</strong></p><p>checkIn.py:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">requests</span>
<span class="kn">import</span> <span class="n">json</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">try</span><span class="p">:</span>
      <span class="n">data</span> <span class="o">=</span> <span class="p">{</span> <span class="sh">"</span><span class="s">action</span><span class="sh">"</span> <span class="p">:</span> <span class="sh">"</span><span class="s">checkIn</span><span class="sh">"</span> <span class="p">}</span>
      <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span> <span class="sh">"</span><span class="s">Cookie</span><span class="sh">"</span> <span class="p">:</span> <span class="sh">"</span><span class="s">PHPSESSID=dafd27784f94904dd586d4ca19d8ae62</span><span class="sh">"</span><span class="p">,</span> 
      <span class="sh">"</span><span class="s">AuthToken</span><span class="sh">"</span> <span class="p">:</span> <span class="sh">"</span><span class="s">12345</span><span class="sh">"</span><span class="p">,</span>
      <span class="sh">"</span><span class="s">User-Agent</span><span class="sh">"</span> <span class="p">:</span> <span class="sh">"</span><span class="s">(iPhone12,3;iOS 14.5)</span><span class="sh">"</span>
      <span class="p">}</span>
      
      <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="sh">'</span><span class="s">https://zhgchg.li/usercenter</span><span class="sh">'</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">loads</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">content</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="sh">'</span><span class="s">status_code</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
        <span class="nf">sendLineNotification</span><span class="p">(</span><span class="sh">"</span><span class="s">CheckIn Success!</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="sh">"</span><span class="s">CheckIn Success!</span><span class="sh">"</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="nf">sendLineNotification</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="sh">'</span><span class="s">message</span><span class="sh">'</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="sh">'</span><span class="s">message</span><span class="sh">'</span><span class="p">]</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="nf">sendLineNotification</span><span class="p">(</span><span class="nf">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
      <span class="k">return</span> <span class="nf">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
      
<span class="k">def</span> <span class="nf">sendLineNotification</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="sh">"</span><span class="s">to</span><span class="sh">"</span> <span class="p">:</span> <span class="sh">"</span><span class="s">insert your User ID here</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">messages</span><span class="sh">"</span> <span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="sh">"</span><span class="s">type</span><span class="sh">"</span> <span class="p">:</span> <span class="sh">"</span><span class="s">text</span><span class="sh">"</span><span class="p">,</span>
                <span class="sh">"</span><span class="s">text</span><span class="sh">"</span> <span class="p">:</span> <span class="n">message</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="sh">"</span><span class="s">Content-Type</span><span class="sh">"</span> <span class="p">:</span> <span class="sh">"</span><span class="s">application/json</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">Authorization</span><span class="sh">"</span> <span class="p">:</span> <span class="sh">"</span><span class="s">insert channel access token here</span><span class="sh">"</span>
    <span class="p">}</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="sh">'</span><span class="s">https://api.line.me/v2/bot/message/push</span><span class="sh">'</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</pre></table></code></div></div><p><strong>Let‚Äôs test to see if the notification was sent successfully:</strong></p><p><a href="/assets/70a1409b149a/1*7I7FMpQ-Gv5MKD0SWkIE0A.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*7I7FMpQ-Gv5MKD0SWkIE0A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MzQiIGhlaWdodD0iNjQiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><strong>Success!</strong></p><blockquote><p><em>As a side note, I initially intended to use Gmail SMTP to send notifications via email, but after deploying to Google Cloud, I found it couldn‚Äôt be used‚Ä¶</em></p></blockquote><h3 id="3-deploying-the-python-script-to-google-cloud"><span class="me-2">3. Deploying the Python Script to Google Cloud</span><a href="#3-deploying-the-python-script-to-google-cloud" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Now that the basics are covered, we will officially move on to the main event of this article: deploying the Python script to the cloud.</p><p>Initially, I considered using Google Cloud Run, but found it too complex for my needs, which are quite simple; therefore, <strong>I opted for Google Cloud Function</strong>, a serverless solution commonly used to build serverless web services.</p><ul><li>If you haven‚Äôt used Google Cloud before, please go to the <a href="https://console.cloud.google.com/" target="_blank"><strong>Console</strong></a> to create a new project and set up billing information.<li>On the project console homepage, click ‚ÄúCloud Functions‚Äù under resources.</ul><p><a href="/assets/70a1409b149a/1*pWDK9AQKpbDpgDltFfS9-g.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*pWDK9AQKpbDpgDltFfS9-g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0ODQiIGhlaWdodD0iMTczIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>At the top, select ‚ÄúCreate Function.‚Äù</ul><p><a href="/assets/70a1409b149a/1*ED2WPgfaSHEth3zWUJn05w.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*ED2WPgfaSHEth3zWUJn05w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NzciIGhlaWdodD0iMTI3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>Enter the basic information.</ul><p><a href="/assets/70a1409b149a/1*oetW_iIU9XywDbLZIa8tJQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*oetW_iIU9XywDbLZIa8tJQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTEiIGhlaWdodD0iNzAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p><em>‚ö†Ô∏è Make sure to note the ‚Äú <strong>Trigger URL</strong>‚Äú.</em></p></blockquote><p><strong>Available regions:</strong></p><ul><li><code class="language-plaintext highlighter-rouge">US-WEST1</code>, <code class="language-plaintext highlighter-rouge">US-CENTRAL1</code>, <code class="language-plaintext highlighter-rouge">US-EAST1</code> can enjoy free Cloud Storage service quotas.<li><code class="language-plaintext highlighter-rouge">asia-east2</code> (Hong Kong) is closer to us but incurs a small Cloud Storage fee.</ul><blockquote><p><em>‚ö†Ô∏è When creating Cloud Functions, Cloud Storage will be needed to host the code.</em></p></blockquote><blockquote><p><em>‚ö†Ô∏è For detailed pricing, please refer to the end of the article.</em></p></blockquote><p><strong>Trigger condition:</strong> HTTP</p><p><strong>Authentication:</strong> Based on my needs, I want to be able to execute the script from an external link, so I choose ‚ÄúAllow unauthenticated invocations‚Äù; if authentication is required, the subsequent Scheduler service will also need corresponding settings.</p><p><strong>Variables, networking, and advanced settings can be set in the variables section for Python to use (this way, if parameters change, you won‚Äôt need to modify the Python code):</strong></p><p><a href="/assets/70a1409b149a/1*qJC7rcjOnSeKWa8NiYxbpQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*qJC7rcjOnSeKWa8NiYxbpQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MzUiIGhlaWdodD0iNDAyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>How to call in Python:</strong></p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">os</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">test</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">DEFAULT VALUE</span><span class="sh">'</span><span class="p">)</span>
</pre></table></code></div></div><p>No other settings need to be changed; just click ‚ÄúSave‚Äù -&gt; ‚ÄúNext.‚Äù</p><ul><li>Select the runtime as ‚ÄúPython 3.x‚Äù and paste the written Python script, changing the entry point to ‚Äúmain.‚Äù</ul><p><a href="/assets/70a1409b149a/1*zCK21j82QwsHD1nARuZkBw.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*zCK21j82QwsHD1nARuZkBw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTU1IiBoZWlnaHQ9IjgyNyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><strong>Supplementing main(args)</strong>, as mentioned earlier, this service is more suited for serverless web applications; thus, args is actually the Request object, from which you can retrieve HTTP GET query and HTTP POST body data, as follows:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>To get GET Query information:
request_args = args.args
</pre></table></code></div></div><p>Example: ?name=zhgchgli =&gt; request_args = [‚Äúname‚Äù:‚Äùzhgchgli‚Äù]</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>To get POST Body data:
request_json = request.get_json(silent=True)
</pre></table></code></div></div><p>Example: name=zhgchgli =&gt; request_json = [‚Äúname‚Äù:‚Äùzhgchgli‚Äù]</p><p><strong>If testing POST with Postman, remember to use ‚ÄúRaw+JSON‚Äù for POST data; otherwise, there will be nothing:</strong></p><p><a href="/assets/70a1409b149a/1*jl5joofEWPMLR3JuP988BQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*jl5joofEWPMLR3JuP988BQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MjAiIGhlaWdodD0iMjMxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>After the code section is okay, switch to ‚Äúrequirements.txt‚Äù and input the necessary package dependencies:</ul><p><a href="/assets/70a1409b149a/1*2MTOKWDWlXbfjYP1qgp7Sw.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*2MTOKWDWlXbfjYP1qgp7Sw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDQiIGhlaWdodD0iMjE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>We use the ‚Äúrequests‚Äù package to help us call the API, which is not included in the native Python library; thus, we need to add it here:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>requests&gt;=2.25.1
</pre></table></code></div></div><p>You can specify the version as ‚â• 2.25.1, or simply input <code class="language-plaintext highlighter-rouge">requests</code> to install the latest version.</p><ul><li>Once everything is okay, click ‚ÄúDeploy‚Äù to start the deployment.</ul><p><a href="/assets/70a1409b149a/1*eQvtozhghRLQhxUgE9fMhw.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*eQvtozhghRLQhxUgE9fMhw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTc2IiBoZWlnaHQ9IjM3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>It will take about 1-3 minutes for the deployment to complete.</p><ul><li>After deployment, you can execute the script using the ‚Äú <strong>Trigger URL</strong> ‚Äú noted earlier to check if it runs correctly, or use ‚ÄúActions‚Äù -&gt; ‚ÄúTest Function‚Äù to perform a test.</ul><p><a href="/assets/70a1409b149a/1*yv1wMHELWSrXiEvE44c9Sw.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*yv1wMHELWSrXiEvE44c9Sw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNTgiIGhlaWdodD0iMjQ1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>If you see <code class="language-plaintext highlighter-rouge">500 Internal Server Error</code>, it means there is an error in the code. You can click on the name to view the ‚ÄúLogs‚Äù and find the reason:</p><p><a href="/assets/70a1409b149a/1*DeiRZT3wC1Z7Jv4WIRaM_Q.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*DeiRZT3wC1Z7Jv4WIRaM_Q.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjQ4MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>UnboundLocalError: local variable 'db' referenced before assignment
</pre></table></code></div></div><ul><li>After clicking on the name, you can also click ‚ÄúEdit‚Äù to modify the script content.</ul><p><a href="/assets/70a1409b149a/1*KqwYbY826bdVaSIlHUnpbA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*KqwYbY826bdVaSIlHUnpbA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjUxNyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><blockquote><p><strong><em>If testing is successful, we have successfully deployed the Python script to the cloud!</em></strong></p></blockquote><h4 id="supplement-on-variables"><span class="me-2">Supplement on Variables</span><a href="#supplement-on-variables" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>According to our needs, we need a place to store and read the token for the check-in app; since the token may expire, we need to request it again and write it for use in the next execution.</p><p>To dynamically pass variables into the script from external sources, there are the following methods:</p><ul><li>[Read Only] The previously mentioned runtime environment variables.<li>[Temp] Cloud Functions provides a /tmp directory for writing and reading files during execution, but it will be deleted after the execution ends; for details, please refer to the <a href="https://cloud.google.com/functions/docs/concepts/exec#file_system" target="_blank">official documentation</a>.<li>[Read Only] Sending data via GET/POST.<li>[Read Only] Including additional files.</ul><p><a href="/assets/70a1409b149a/1*AAXUcDRZNnRAqIFj02RnyA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*AAXUcDRZNnRAqIFj02RnyA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5ODYiIGhlaWdodD0iMzUyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><div class="language-markdown highlighter-rouge"><div class="code-header"> <span data-label-text="Markdown"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre><td class="rouge-code"><pre>In the program, using the relative path <span class="sb">`./`</span> allows for reading, <span class="gs">**but only for reading; dynamic modification is not possible**</span>; to modify, you can only do so in the console and redeploy.
<span class="gt">
&gt; _If you want to read and dynamically modify, you need to connect to other GCP services, such as: Cloud SQL, Google Storage, Firebase Cloud Firestore‚Ä¶_</span>
<span class="p">
-</span> <span class="se">\[</span>Read &amp; Write<span class="se">\]</span> Here, I chose Firebase Cloud _Firestore_ because currently, this option has a free quota available.

<span class="gs">**According to the [Getting Started Steps](https://firebase.google.com/docs/firestore/quickstart#read_data){:target="_blank"}, after setting up the Firebase project; enter the Firebase backend:**</span>

<span class="p">![](</span><span class="sx">/assets/70a1409b149a/1*0DO31noJ4a3xweb1annbSQ.webp</span><span class="p">)</span>{: lqip="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjUxMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg==" }

In the left menu, find ‚Äú <span class="gs">**Cloud Firestore**</span> ‚Äù -&gt; ‚Äú <span class="gs">**Add Collection**</span> ‚Äù

<span class="p">![](</span><span class="sx">/assets/70a1409b149a/1*7c9sA8ZbxE6uGh6f-nfiVA.webp</span><span class="p">)</span>{: lqip="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MDUiIGhlaWdodD0iMzc3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+" }

Enter the collection ID.

<span class="p">![](</span><span class="sx">/assets/70a1409b149a/1*wcp94_25maNL9EoFJTOndA.webp</span><span class="p">)</span>{: lqip="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MTUiIGhlaWdodD0iNTIyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+" }

Enter the data content.

A collection can have multiple documents, and each document can have its own field content; it is very flexible to use.

<span class="gs">**Using in Python:**</span>

First, go to <span class="p">[</span><span class="nv">GCP Console -&gt; IAM &amp; Admin -&gt; Service Accounts</span><span class="p">](</span><span class="sx">https://console.cloud.google.com/iam-admin/serviceaccounts</span><span class="p">)</span>{:target="_blank"}, and follow the steps below to download the authentication private key file:

First, select the account:

<span class="p">![](</span><span class="sx">/assets/70a1409b149a/1*JeB9m4BWzfRCZSofHq2tLg.webp</span><span class="p">)</span>{: lqip="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjIzNiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg==" }

At the bottom, ‚ÄúAdd Key‚Äù -&gt; ‚ÄúCreate New Key‚Äù

<span class="p">![](</span><span class="sx">/assets/70a1409b149a/1*xi9nQUy48-QlFI4BEdIMew.webp</span><span class="p">)</span>{: lqip="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTMiIGhlaWdodD0iNzQ3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+" }

Select ‚ÄúJSON‚Äù to download the file.

<span class="p">![](</span><span class="sx">/assets/70a1409b149a/1*bsphvdEHgg0XDnHAHMXJvg.webp</span><span class="p">)</span>{: lqip="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTgiIGhlaWdodD0iMzUyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+" }

Place this JSON file in the same project directory as your Python code.

<span class="gs">**In the local development environment:**</span>
<span class="p">```</span><span class="nl">bash
</span>pip <span class="nb">install</span> <span class="nt">--upgrade</span> firebase-admin
</pre></table></code></div></div><p>Install the firebase-admin package.</p><p>In Cloud Functions, you need to add <code class="language-plaintext highlighter-rouge">firebase-admin</code> to the <code class="language-plaintext highlighter-rouge">requirements.txt</code>.</p><p><a href="/assets/70a1409b149a/1*d67oTblFFKaBHkGC77Mapw.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*d67oTblFFKaBHkGC77Mapw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDI2IiBoZWlnaHQ9IjI3MSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Once the environment is set up, you can read the data we just added:</p><p>firebase_admin.py:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">firebase_admin</span>
<span class="kn">from</span> <span class="n">firebase_admin</span> <span class="kn">import</span> <span class="n">credentials</span>
<span class="kn">from</span> <span class="n">firebase_admin</span> <span class="kn">import</span> <span class="n">firestore</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">firebase_admin</span><span class="p">.</span><span class="n">_apps</span><span class="p">:</span>
  <span class="n">cred</span> <span class="o">=</span> <span class="n">credentials</span><span class="p">.</span><span class="nc">Certificate</span><span class="p">(</span><span class="sh">'</span><span class="s">./authentication.json</span><span class="sh">'</span><span class="p">)</span>
  <span class="n">firebase_admin</span><span class="p">.</span><span class="nf">initialize_app</span><span class="p">(</span><span class="n">cred</span><span class="p">)</span>
<span class="c1"># If you call initialize_app again, it will throw the following error
# providing an app name as the second argument. In most cases, you only need to call initialize_app() once. But if you do want to initialize multiple apps, pass a second argument to initialize_app() to give each app a unique name.
# So for safety, check if it has already been initialized before calling initialize_app.
</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">firestore</span><span class="p">.</span><span class="nf">client</span><span class="p">()</span>
<span class="n">ref</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="nf">collection</span><span class="p">(</span><span class="sa">u</span><span class="sh">'</span><span class="s">example</span><span class="sh">'</span><span class="p">)</span>  <span class="c1"># Collection name
</span><span class="n">stream</span> <span class="o">=</span> <span class="n">ref</span><span class="p">.</span><span class="nf">stream</span><span class="p">()</span>
<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
  <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">id:</span><span class="sh">"</span> <span class="o">+</span> <span class="n">data</span><span class="p">.</span><span class="nb">id</span> <span class="o">+</span> <span class="sh">"</span><span class="s">,</span><span class="sh">"</span> <span class="o">+</span> <span class="n">data</span><span class="p">.</span><span class="nf">to_dict</span><span class="p">())</span>
</pre></table></code></div></div><blockquote><p><em>If you are on Cloud Functions, besides uploading the authentication JSON file, you can also change the connection syntax to use the following:</em></p></blockquote><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">cred</span> <span class="o">=</span> <span class="n">credentials</span><span class="p">.</span><span class="nc">ApplicationDefault</span><span class="p">()</span>
<span class="n">firebase_admin</span><span class="p">.</span><span class="nf">initialize_app</span><span class="p">(</span><span class="n">cred</span><span class="p">,</span> <span class="p">{</span>
  <span class="sh">'</span><span class="s">projectId</span><span class="sh">'</span><span class="p">:</span> <span class="n">project_id</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">firestore</span><span class="p">.</span><span class="nf">client</span><span class="p">()</span>
</pre></table></code></div></div><blockquote><p><em>If you see <code class="language-plaintext highlighter-rouge">Failed to initialize a certificate credential.</code>, please check if the authentication JSON is correct.</em></p></blockquote><p>For adding, deleting, and more operations, please refer to the <a href="https://firebase.google.com/docs/firestore/manage-data/add-data" target="_blank">official documentation</a>.</p><h3 id="4-setting-up-automatic-scheduling-in-google-cloud"><span class="me-2">4. Setting Up Automatic Scheduling in Google Cloud</span><a href="#4-setting-up-automatic-scheduling-in-google-cloud" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Now that we have the script, we need to make it run automatically to achieve our ultimate goal.</p><ul><li>Go to the <a href="https://console.cloud.google.com/cloudscheduler/" target="_blank"><strong>Google Cloud Scheduler</strong></a> console homepage.<li>Click ‚ÄúCreate Job‚Äù at the top.</ul><p><a href="/assets/70a1409b149a/1*5tNybi2HssmWoyJDQyPSJQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*5tNybi2HssmWoyJDQyPSJQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NDAiIGhlaWdodD0iMTU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>Enter the basic job information.</ul><p><a href="/assets/70a1409b149a/1*yqkJnt9PVYEllOpDtK1RmQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*yqkJnt9PVYEllOpDtK1RmQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTAiIGhlaWdodD0iNjUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Execution Frequency:</strong> Input format is the same as crontab. If you are not familiar with crontab syntax, you can directly use <a href="https://crontab.guru/#15_1_*_*_*" target="_blank"><strong>crontab.guru, this amazing website</strong></a>:</p><p><a href="/assets/70a1409b149a/1*xnZBlcsMrQVJc6ewJIfAxA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*xnZBlcsMrQVJc6ewJIfAxA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NDciIGhlaWdodD0iMzMzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>It can clearly translate the actual meaning of the syntax you set. (Click <strong>next</strong> to see the next execution time.)</p><blockquote><p><em>Here, I set <code class="language-plaintext highlighter-rouge">15 1 * * *</code>, because the sign-in only needs to run once a day, scheduled to run at 1:15 AM daily.</em></p></blockquote><p><strong>URL Section:</strong> Enter the previously noted ‚Äú <strong>Trigger URL</strong> ‚Äù</p><p><strong>Timezone:</strong> Enter ‚ÄúTaiwan‚Äù, select Taipei Standard Time.</p><p><strong>HTTP Method:</strong> According to the previous Python code, we can just use GET.</p><p><strong>If you set ‚ÄúAuthentication‚Äù earlier,</strong> remember to expand ‚ÄúSHOW MORE‚Äù to configure the authentication settings.</p><p><strong>Once everything is filled out</strong>, click ‚Äú <strong>Create</strong> ‚Äù.</p><ul><li>After successful creation, you can choose ‚ÄúRun Now‚Äù to test if it works properly.</ul><p><a href="/assets/70a1409b149a/1*H_nsZNQ16iIKwThQpGJDmA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*H_nsZNQ16iIKwThQpGJDmA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjM3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/70a1409b149a/1*X6pL0J4hGL_KodhsppvsJg.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*X6pL0J4hGL_KodhsppvsJg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MTEiIGhlaWdodD0iMTIzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>You can check the execution results and the last execution date.</ul><p><a href="/assets/70a1409b149a/1*pUqTo-NM1z-srXbq1BM4rA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*pUqTo-NM1z-srXbq1BM4rA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMTAiIGhlaWdodD0iMTMyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p><em>‚ö†Ô∏è <strong>Please note, execution results marked as ‚Äúfailed‚Äù only refer to web status codes between 400-500 or errors in the Python code.</strong></em></p></blockquote><h3 id="mission-accomplished"><span class="me-2">Mission Accomplished!</span><a href="#mission-accomplished" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>We have achieved the goal of uploading the routine task Python script to the cloud and setting up automatic scheduling for it to run automatically.</p><h3 id="pricing-method"><span class="me-2">Pricing Method</span><a href="#pricing-method" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Another important aspect is the pricing method; Google Cloud and Linebot are not entirely free services, so understanding the billing method is crucial; otherwise, for a small script, paying too much money is not worth it compared to just running it on a computer.</p><h4 id="linebot"><span class="me-2">Linebot</span><a href="#linebot" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/70a1409b149a/1*cfuKJxNoW4tvCEhqdC7oIQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*cfuKJxNoW4tvCEhqdC7oIQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTExIiBoZWlnaHQ9IjU2NCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Refer to the <a href="https://tw.linebiz.com/service/account-solutions/line-official-account/" target="_blank">official pricing</a> information, which allows for 500 messages per month for free.</p><h4 id="google-cloud-functions"><span class="me-2">Google Cloud Functions</span><a href="#google-cloud-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/70a1409b149a/1*2431d2F1BNtEJUg845uDQg.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*2431d2F1BNtEJUg845uDQg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4ODUiIGhlaWdodD0iMjU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Refer to the <a href="https://cloud.google.com/functions/pricing?hl=zh-tw" target="_blank">official pricing</a> information, which includes 2 million invocations per month, 400,000 GB-seconds, and 200,000 GHz-seconds of compute time, along with 5 GB of outbound internet traffic.</p><h4 id="google-firebase-cloud-firestore"><span class="me-2">Google Firebase Cloud Firestore</span><a href="#google-firebase-cloud-firestore" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/70a1409b149a/1*2t1boe9DQX1NBgGyYTrVnA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*2t1boe9DQX1NBgGyYTrVnA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4ODUiIGhlaWdodD0iNDExIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Refer to the <a href="https://firebase.google.com/docs/firestore/quotas" target="_blank">official pricing</a> information, which includes 1 GB of storage, 10 GB of traffic per month, 50,000 reads, and 20,000 writes/deletes per day; this is sufficient for light usage!</p><h4 id="google-cloud-scheduler"><span class="me-2">Google Cloud Scheduler</span><a href="#google-cloud-scheduler" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/70a1409b149a/1*b9cvGpPqjKRFHa-45Yuzdw.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*b9cvGpPqjKRFHa-45Yuzdw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4ODIiIGhlaWdodD0iNDQ3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Refer to the <a href="https://cloud.google.com/scheduler/pricing?hl=zh-tw" target="_blank">official pricing</a> information, which allows for 3 free jobs to be set up per account.</p><blockquote><p>For scripts, the above free usage is more than enough!</p></blockquote><h4 id="google-cloud-storage-conditional-free-tier"><span class="me-2">Google Cloud Storage Conditional Free Tier</span><a href="#google-cloud-storage-conditional-free-tier" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Despite trying to avoid it, there are still services that may incur charges.</p><p>Once Cloud Functions are created, two Cloud Storage instances will be automatically created:</p><p><a href="/assets/70a1409b149a/1*OvWXsZbwnM8sNfvdtDAIOA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*OvWXsZbwnM8sNfvdtDAIOA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjE0NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>If you selected US-WEST1, US-CENTRAL1, or US-EAST1 for Cloud Functions, you can enjoy free usage quotas:</p><p><a href="/assets/70a1409b149a/1*arevMQGpsIumGlw_PE-hQQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*arevMQGpsIumGlw_PE-hQQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4ODAiIGhlaWdodD0iNTE0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>I chose US-CENTRAL1, and indeed, the first Cloud Storage instance is in US-CENTRAL1, but the second is labeled <strong>multiple regions in the US</strong>; <strong>I estimate that this will incur charges</strong>.</p><p><a href="/assets/70a1409b149a/1*kuX9HlPTfMxbEg-sa3rJOQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*kuX9HlPTfMxbEg-sa3rJOQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4ODYiIGhlaWdodD0iMzQxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Refer to the <a href="https://cloud.google.com/storage/pricing?hl=zh-tw" target="_blank">official pricing</a> information, which varies based on the region of the host.</p><p>The code is not large, but I estimate it should incur a minimum charge of 0.0X0 per month (?)</p><blockquote><p><em>‚ö†Ô∏è The above information was recorded as of 2021/02/21; actual prices may vary, and this is for reference only.</em></p></blockquote><h4 id="budget-control-notifications"><span class="me-2">Budget Control Notifications</span><a href="#budget-control-notifications" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Just in case‚Ä¶ if there are indeed situations where the free usage exceeds and charges begin, I would like to receive notifications; to avoid being unaware of potential errors in the program that could cause unexpected billing amounts‚Ä¶</p><ul><li>Go to the <a href="https://console.cloud.google.com/" target="_blank"><strong>Console</strong></a><li>Find the ‚Äú <strong>Billing</strong> ‚Äù card:</ul><p><a href="/assets/70a1409b149a/1*r0T8gZsaWroxhWxIxKwRWQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*r0T8gZsaWroxhWxIxKwRWQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NjgiIGhlaWdodD0iMjEwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Click ‚Äú <strong>View Detailed Billing History</strong> ‚Äù to enter.</p><ul><li>Expand the left menu and go to the ‚Äú <strong>Budgets &amp; Alerts</strong> ‚Äù feature.</ul><p><a href="/assets/70a1409b149a/1*GtT4Sj9Q19O_QxWTWgM5UA.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*GtT4Sj9Q19O_QxWTWgM5UA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTYiIGhlaWdodD0iODE4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>Click ‚Äú <strong>Create Budget</strong> ‚Äù at the top.</ul><p><a href="/assets/70a1409b149a/1*ytmGKw4sy6b-U3XAeI_geQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*ytmGKw4sy6b-U3XAeI_geQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTE4IiBoZWlnaHQ9IjI4MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><ul><li>Enter a custom name.</ul><p><a href="/assets/70a1409b149a/1*_qgQMB_WsCuoxtJ4vA6xgw.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*_qgQMB_WsCuoxtJ4vA6xgw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDg4IiBoZWlnaHQ9IjExMjYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>Next step.</p><ul><li>For the amount, enter the ‚Äú <strong>Target Amount</strong> ‚Äù, which can be $1 or $10; we don‚Äôt want to spend too much on small things.</ul><p><a href="/assets/70a1409b149a/1*y6fIpzReQxZZRsVpZIk-tw.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*y6fIpzReQxZZRsVpZIk-tw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NDIiIGhlaWdodD0iMjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Next step.</p><p>In the actions section, you can set notifications to trigger when the budget reaches a certain percentage.</p><p><a href="/assets/70a1409b149a/1*y4B62yjPWAy1pBQhZmiySQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*y4B62yjPWAy1pBQhZmiySQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NDMiIGhlaWdodD0iNDY0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Check</strong> ‚Äú <strong>Send alerts via email to billing administrators and users</strong> ‚Äù, so that when the conditions are met, you can receive notifications immediately.</p><p><a href="/assets/70a1409b149a/1*PTQDG_Uffa8fvHxaeYCnrQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*PTQDG_Uffa8fvHxaeYCnrQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NDgiIGhlaWdodD0iMTQ4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Click ‚ÄúFinish‚Äù to submit and save.</p><p><a href="/assets/70a1409b149a/1*QWH-bIlQAC7hhc4SVQOI5g.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*QWH-bIlQAC7hhc4SVQOI5g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDQ0IiBoZWlnaHQ9IjEyOCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/70a1409b149a/1*-BAHV1lovaYgblnCCubmSQ.webp" class="popup img-link blur"><img data-src="/assets/70a1409b149a/1*-BAHV1lovaYgblnCCubmSQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4ODUiIGhlaWdodD0iMTIzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>When the budget exceeds, we will know immediately to avoid incurring more costs.</p><h3 id="summary"><span class="me-2">Summary</span><a href="#summary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Human energy is limited, and in today‚Äôs flood of technological information, every platform and service wants to extract our limited energy; if we can use some automation scripts to share our daily lives, little by little, we can save more energy to focus on what‚Äôs important!</p><h3 id="further-reading"><span class="me-2">Further Reading</span><a href="#further-reading" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><a href="/posts/en/d61062833c1a/">Creating a Fully Automated WFH Employee Health Reporting System with Slack</a><li><a href="/posts/en/e77b80cc6f89/">Crashlytics + Big Query: Building a More Immediate and Convenient Crash Tracking Tool</a><li><a href="/posts/en/793cb8f89b72/">Crashlytics + Google Analytics: Automatically Querying App Crash-Free Users Rate</a><li><a href="/posts/en/46410aaada00/">Apps Use HTTPS for Transmission, but Data Still Gets Stolen.</a><li><a href="/posts/en/729d7b6817a4/">How to Create an Interesting Engineering CTF Competition</a><li><a href="/posts/en/8a04443024e2/">iOS 14 Clipboard Theft Panic: The Dilemma of Privacy vs. Convenience</a><li><a href="/posts/en/d414bdbdb8c9/">Using Google Apps Script to Forward Gmail Messages to Slack</a></ul><p>If you have any questions or suggestions, feel free to <a href="https://www.zhgchg.li/contact" target="_blank">contact me</a>.</p><p>If you have any automation-related optimization needs, feel free to <a href="https://www.zhgchg.li/contact" target="_blank">hire me</a>, thank you.</p><p>```</p><hr /><p>This article was first published on Medium ‚û°Ô∏è <a href="https://medium.com/p/70a1409b149a" target="_blank"><strong>Click Here</strong></a></p><p>Automatically converted and synchronized using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a> and <a href="https://github.com/ZhgChgLi/medium-to-jekyll-starter.github.io" target="_blank">Medium-to-jekyll-starter</a>.</p><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/en/zmediumtomarkdown/2021-02-20-70a1409b149a.md" target="_blank">Improve this page on Github.</a></p><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=üç∫&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a></p><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); border-bottom: 1px solid var(--main-border-color);transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1K+ Followers</span></a></div><div style="font-size: 0.8em; cursor:default; text-align: right;"> 13,659 <span style="font-size: 0.9em;">Total Views</span><br /> <span style="font-size: 0.8em;">Last Statistics Date: 2025-08-14 | 13,320 Views on <a href="https://medium.com/p/70a1409b149a" target="_blank">Medium.</a></span></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/google-cloud-platform/" class="post-tag no-text-decoration" >google-cloud-platform</a> <a href="/tags/cloud-functions/" class="post-tag no-text-decoration" >cloud-functions</a> <a href="/tags/cloud-scheduler/" class="post-tag no-text-decoration" >cloud-scheduler</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/python/" class="post-tag no-text-decoration" >python</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Automating%20Routine%20Tasks%20with%20Python%20+%20Google%20Cloud%20Platform%20+%20Line%20Bot%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fautomating-routine-tasks-with-python-google-cloud-platform-line-bot-70a1409b149a%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Automating%20Routine%20Tasks%20with%20Python%20+%20Google%20Cloud%20Platform%20+%20Line%20Bot%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fautomating-routine-tasks-with-python-google-cloud-platform-line-bot-70a1409b149a%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fautomating-routine-tasks-with-python-google-cloud-platform-line-bot-70a1409b149a%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/z-travel-diaries/en/travel-diary-8-days-and-7-nights-in-busan-south-korea-2025-8ace34a1a3d8/">Travel Diary: 8 Days and 7 Nights in Busan, South Korea 2025</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2025-%E9%9F%93%E5%9C%8B%E9%87%9C%E5%B1%B1-8-%E5%A4%A9-7-%E5%A4%9C%E8%87%AA%E7%94%B1%E8%A1%8C-8ace34a1a3d8/">ÈÅäË®ò 2025 ÈüìÂúãÈáúÂ±± 8 Â§© 7 Â§úËá™Áî±Ë°å</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-9-11-%E5%90%8D%E5%8F%A4%E5%B1%8B%E4%B8%80%E6%97%A5%E5%BF%AB%E9%96%83%E8%87%AA%E7%94%B1%E8%A1%8C-7b8a0563c157/">ÈÅäË®ò 9/11 ÂêçÂè§Â±ã‰∏ÄÊó•Âø´ÈñÉËá™Áî±Ë°å</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2023-%E4%B9%9D%E5%B7%9E-10-%E6%97%A5%E8%87%AA%E7%94%B1%E8%A1%8C%E7%8D%A8%E6%97%85-d78e0b15a08a/">ÈÅäË®ò 2023 ‰πùÂ∑û 10 Êó•Ëá™Áî±Ë°åÁç®ÊóÖ</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2023-%E4%BA%AC%E9%98%AA%E7%A5%9E-8-%E6%97%A5%E8%87%AA%E7%94%B1%E8%A1%8C-76d66c2e34af/">ÈÅäË®ò 2023 ‰∫¨Èò™Á•û 8 Êó•Ëá™Áî±Ë°å</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">ÁîüÊ¥ª</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/%E4%BD%BF%E7%94%A8-python-google-cloud-platform-line-bot-%E8%87%AA%E5%8B%95%E5%9F%B7%E8%A1%8C%E4%BE%8B%E8%A1%8C%E7%91%A3%E4%BA%8B-70a1409b149a/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1613822151" data-df="ll" > Feb 20, 2021 </time><h4 class="pt-0 my-2">‰ΩøÁî® Python+Google Cloud Platform+Line Bot Ëá™ÂãïÂü∑Ë°å‰æãË°åÁë£‰∫ã</h4><div class="text-muted"><p>‰ª•Á∞ΩÂà∞ APP ÁçéÂãµÁÇ∫‰æãÔºåÊâìÈÄ†ÊØèÊó•Ëá™ÂãïÁ∞ΩÂà∞ËÖ≥Êú¨</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/slack-chatgpt-integration-bd94cc88f9c9/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1708089421" data-df="ll" > Feb 16, 2024 </time><h4 class="pt-0 my-2">Slack & ChatGPT Integration</h4><div class="text-muted"><p>Ëá™Ë°åÊâìÈÄ† ChatGPT OpenAI API for Slack App (Google Cloud Functions &amp; Python)</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/en/slack-chatgpt-integration-bd94cc88f9c9/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1708089421" data-df="ll" > Feb 16, 2024 </time><h4 class="pt-0 my-2">Slack & ChatGPT Integration</h4><div class="text-muted"><p>Build your own ChatGPT OpenAI API for Slack App (Google Cloud Functions &amp; Python)</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/%E9%87%8D%E7%81%8C%E7%AD%86%E8%A8%981-laravel-homestead-phpmyadmin-%E7%92%B0%E5%A2%83%E5%BB%BA%E7%BD%AE-87090f101b9a/" class="btn btn-outline-primary" aria-label="Older" ><p>ÈáçÁÅåÁ≠ÜË®ò1-Laravel Homestead + phpMyAdmin Áí∞Â¢ÉÂª∫ÁΩÆ</p></a> <a href="/posts/zrealm-dev/%E4%BD%BF%E7%94%A8-python-google-cloud-platform-line-bot-%E8%87%AA%E5%8B%95%E5%9F%B7%E8%A1%8C%E4%BE%8B%E8%A1%8C%E7%91%A3%E4%BA%8B-70a1409b149a/" class="btn btn-outline-primary" aria-label="Newer" ><p>‰ΩøÁî® Python+Google Cloud Platform+Line Bot Ëá™ÂãïÂü∑Ë°å‰æãË°åÁë£‰∫ã</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>¬© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> All Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a><br/>Last updated: 2025-08-15 01:14:20 +08:00</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">ÁîüÊ¥ª</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
