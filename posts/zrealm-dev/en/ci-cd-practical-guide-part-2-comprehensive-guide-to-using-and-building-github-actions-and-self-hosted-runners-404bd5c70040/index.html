<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="CI/CD Practical Guide (Part 2): Comprehensive Guide to Using and Building GitHub Actions and Self-hosted Runners" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="A complete guide to understanding how GitHub Actions and Self-hosted Runners work, along with step-by-step usage tutorials." /><meta property="og:description" content="A complete guide to understanding how GitHub Actions and Self-hosted Runners work, along with step-by-step usage tutorials." /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/en/ci-cd-practical-guide-part-2-comprehensive-guide-to-using-and-building-github-actions-and-self-hosted-runners-404bd5c70040/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/en/ci-cd-practical-guide-part-2-comprehensive-guide-to-using-and-building-github-actions-and-self-hosted-runners-404bd5c70040/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-07-02T20:22:32+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" /><meta property="twitter:title" content="CI/CD Practical Guide (Part 2): Comprehensive Guide to Using and Building GitHub Actions and Self-hosted Runners" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://medium.com/@zhgchgli/"},"dateModified":"2025-07-12T22:49:01+08:00","datePublished":"2025-07-02T20:22:32+08:00","description":"A complete guide to understanding how GitHub Actions and Self-hosted Runners work, along with step-by-step usage tutorials.","headline":"CI/CD Practical Guide (Part 2): Comprehensive Guide to Using and Building GitHub Actions and Self-hosted Runners","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjkzMyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg==","url":"https://zhgchg.li/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/en/ci-cd-practical-guide-part-2-comprehensive-guide-to-using-and-building-github-actions-and-self-hosted-runners-404bd5c70040/"},"url":"https://zhgchg.li/posts/zrealm-dev/en/ci-cd-practical-guide-part-2-comprehensive-guide-to-using-and-building-github-actions-and-self-hosted-runners-404bd5c70040/"}</script><title>CI/CD Practical Guide (Part 2): Comprehensive Guide to Using and Building GitHub Actions and Self-hosted Runners | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0"> <a href="https://medium.com/@zhgchgli" target="_blank" style="display: block;text-align: center;font-style: normal;/* text-decoration: underline; */font-size: 1.2em;color: var(--heading-color);">1K+ Followers on Medium</a> An iOS, web, and automation developer from Taiwan üáπüáº who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>CI/CD Practical Guide (Part 2): Comprehensive Guide to Using and Building GitHub Actions and Self-hosted Runners</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>CI/CD Practical Guide (Part 2): Comprehensive Guide to Using and Building GitHub Actions and Self-hosted Runners</h1><p class="post-desc fw-light mb-4">A complete guide to understanding how GitHub Actions and Self-hosted Runners work, along with step-by-step usage tutorials.</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1751458952" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 2, 2025 </time> </span> <span> Updated <time data-ts="1752331741" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 12, 2025 </time> </span><div class="mt-3 mb-3"> <a href="/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" class="popup img-link preview-img blur"><img data-src="/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjkzMyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://medium.com/@zhgchgli/">ZhgChgLi</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="8705 words" > <em>48 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">CI/CD Practical Guide (Part 2): Comprehensive Guide to Using and Building GitHub Actions and Self-hosted Runners</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Á´†ÁØÄ (Chapters)üîñ</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">CI/CD Practical Guide (Part 2): Comprehensive Guide to Using and Building GitHub Actions and Self-hosted Runners</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><p>For SEO purposes, <strong>all post titles and descriptions were rewritten by OpenAI</strong>, the original versions are shown below.<br /> The following content is translated by OpenAI, <a href="/posts/404bd5c70040/"><strong>Click here</strong></a> to view the original Chinese version. | <a href="/posts/404bd5c70040/"><strong>ÈªûÊ≠§Êü•ÁúãÊú¨Êñá‰∏≠ÊñáÁâà</strong></a></p><hr /><h3 id="cicd-practical-guide-part-2-comprehensive-guide-to-using-and-building-github-actions-and-self-hosted-runners"><span class="me-2">CI/CD Practical Guide (Part 2): Comprehensive Guide to Using and Building GitHub Actions and Self-hosted Runners</span><a href="#cicd-practical-guide-part-2-comprehensive-guide-to-using-and-building-github-actions-and-self-hosted-runners" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>This guide will help you understand from scratch how GitHub Actions and Self-hosted Runners operate, along with hands-on tutorials.</p><p><a href="/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*_vGYh_XSI3ZDbdeT8xCihA.webp" alt="Photo by [Dan Taylor](https://unsplash.com/@theoneandonlydantaylor?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjkzMyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Photo by <a href="https://unsplash.com/@theoneandonlydantaylor?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" target="_blank">Dan Taylor</a></p><h4 id="introduction"><span class="me-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>In the previous article, ‚Äú<a href="/posts/zrealm-dev/en/ci-cd-practical-guide-part-1-what-is-ci-cd-how-to-build-a-stable-and-efficient-development-team-through-ci-cd-tool-selection-c008a9e8ceca/"><strong>CI/CD Practical Guide (Part 1): What is CI/CD? How to Build a Stable and Efficient Development Team through CI/CD? Tool Selection?</strong></a>‚Äù, we introduced what CI/CD is, the benefits it brings, and how to choose tools. <strong>This article will focus on the architecture and usage of GitHub Actions and Self-hosted Runners</strong>, guiding you step-by-step to establish several interesting automation workflows.</p><h3 id="github-actions-architecture-flowchart"><span class="me-2">GitHub Actions Architecture Flowchart</span><a href="#github-actions-architecture-flowchart" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Before we begin, let‚Äôs clarify the operational architecture and responsibilities of GitHub Actions.</p><p><a href="/assets/404bd5c70040/1*iacfyTX_b3YTSzMcn2ldjw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*iacfyTX_b3YTSzMcn2ldjw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjkzNyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h4 id="github-repo"><span class="me-2"><strong>GitHub Repo</strong></span><a href="#github-repo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>In the world of GitHub Actions, all Actions (Workflow YAML files) must be stored in a Git Repo ( <code class="language-plaintext highlighter-rouge">REPO/.github/workflows/</code> )</ul><h4 id="github-repo--actions-secrets"><span class="me-2">GitHub Repo ‚Äî Actions Secrets</span><a href="#github-repo--actions-secrets" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí Secrets.</p><ul><li>Stores Secret Keys and Tokens used in Actions steps e.g. Slack Bot Token, Apple Store Connect API .p8 Key<li><strong>Secrets content cannot be viewed in Action Logs and will be automatically obscured with * * * *</strong><li>Secrets content cannot be viewed or edited, only overwritten<li>Secrets <strong>currently only support plain text content and cannot upload files</strong> <strong>-</strong> For binary keys, please refer to the <a href="https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/using-secrets-in-github-actions#storing-base64-binary-blobs-as-secrets" target="_blank">official steps to store them after converting to Base64 encoding</a>. - For iOS development certificate storage methods, refer to the official tutorial: <a href="https://docs.github.com/en/actions/how-tos/use-cases-and-examples/deploying/installing-an-apple-certificate-on-macos-runners-for-xcode-development" target="_blank">Installing an Apple certificate on macOS runners for Xcode development</a><li>Organization-level Secrets can be stored and shared across Repos.</ul><h4 id="github-repo--actions-variables"><span class="me-2">GitHub Repo ‚Äî Actions Variables</span><a href="#github-repo--actions-variables" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí Variables.</p><ul><li>Stores commonly used variables in Actions steps e.g. Simulator iOS version, working directory<li>Variables content can be viewed and edited<li>Variables content can be output in Action Logs<li>Variables only support plain text, but can also store JSON strings for parsing and use<li>Organization-level Variables can be stored and shared across Repos.</ul><h4 id="github-actions--trigger"><span class="me-2">GitHub Actions ‚Äî Trigger</span><a href="#github-actions--trigger" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><strong>The most important starting point in GitHub Actions ‚Äî Trigger Events (Conditions)</strong><li>Only GitHub Actions that meet the trigger events will be executed<li>A complete list of events can be <a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows" target="_blank">found in the official documentation</a><li>It basically covers all CI/CD and automation scenarios encountered. However, <strong>if there are special scenarios without events, you can only use other events + conditions in Jobs or use Schedule to manually check</strong>. e.g. If there is no PR Merged event, you can only use <code class="language-plaintext highlighter-rouge">pull_request: closed</code> + Job <code class="language-plaintext highlighter-rouge">if: github.event.pull_request.merged == true</code> to achieve it.</ul><p><strong>Commonly Used Events:</strong></p><ul><li><code class="language-plaintext highlighter-rouge">schedule</code> (cron): Scheduled execution (like crontab) Can be used for automation: regularly checking PRs, packaging, executing automation scripts <strong>All executed in main / develop (Default Branch).</strong><li><code class="language-plaintext highlighter-rouge">pull_request:</code> PR related events Triggered when a PR is opened, assigned, labeled, or has a new Push Commit, etc.<li><code class="language-plaintext highlighter-rouge">issues</code>, <code class="language-plaintext highlighter-rouge">issue_comment</code>: Issue related events Triggered when an Issue is opened or has new comments, etc.<li><code class="language-plaintext highlighter-rouge">workflow_dispatch</code>: Manually triggered; fields can be set for user input, and GitHub Actions provides a simple form for users to fill in information. e.g.:</ul><p><a href="/assets/404bd5c70040/1*XogIJsCbrNPerWBto_PG8w.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*XogIJsCbrNPerWBto_PG8w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMzIiIGhlaWdodD0iNDMyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><code class="language-plaintext highlighter-rouge">workflow_call</code>: Triggers another Action (Workflow) to execute tasks.<li><code class="language-plaintext highlighter-rouge">workflow_run</code>: Triggered when another Action (Workflow) executes a task.</ul><blockquote><p><em>For more event types and configuration details, please <a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows" target="_blank">refer to the official documentation</a>.</em></p></blockquote><h4 id="github-actions--workflow"><span class="me-2"><strong>GitHub Actions ‚Äî Workflow</strong></span><a href="#github-actions--workflow" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>Also known as Action<li>Written in YAML format, with files stored in <code class="language-plaintext highlighter-rouge">REPO/.github/workflows/</code><li><strong>The Workflow YAML file in the main branch is the primary one</strong> If you cannot see the Action being developed in other branches or if there are execution errors, try merging back to the main branch.<li>The most basic unit in GitHub Actions, each Workflow represents a CI/CD or automation operation<li>Workflows can call other Workflows to execute tasks (You can use this feature to separate core Workflows from called Workflows)<li>It defines task names, execution strategies, trigger events, task operations, and all Action-related settings<li>Currently, the file structure does not support subdirectories<li>Actions are completely free (Public and Private Repos)</ul><h4 id="github-actions--workflow--job"><span class="me-2">GitHub Actions ‚Äî Workflow ‚Äî Job</span><a href="#github-actions--workflow--job" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>The execution unit in GitHub Actions<li>Defines what tasks are included in the Workflow<li>Each Workflow can have multiple Jobs<li>Each Job needs to specify which Runner Label to use, and the corresponding Runner machine will execute the task<li><strong>Multiple Jobs are executed concurrently</strong> (if there is a sequence, you can use <code class="language-plaintext highlighter-rouge">needs</code> constraints)<li><strong>Each Job should be treated as an independent execution entity (each should be considered a Sandbox)</strong>, if a Job ends and produces resource files for subsequent Jobs/Workflows, you need to Upload Artifacts or move them to a shared output directory in self-hosted.<li>A Job can output strings for reference by other Jobs. (e.g. execution result true or false)<li>Unless special process conditions are set, if one of the Jobs encounters an error, <strong>the other Jobs will still continue to execute.</strong></ul><h4 id="github-actions--reuse-workflowjob"><span class="me-2">GitHub Actions ‚Äî Reuse Workflow/Job</span><a href="#github-actions--reuse-workflowjob" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>Define <code class="language-plaintext highlighter-rouge">on: workflow_call</code> in the Workflow to encapsulate it for reuse as a Job in other Workflows<li>Can be shared across Repos within the same organization<li>Therefore, you can place CI/CD tasks that are shared across Repos into a shared Repo for use.</ul><h4 id="github-actions--workflow--job--step"><span class="me-2">GitHub Actions ‚Äî Workflow ‚Äî Job ‚Äî Step</span><a href="#github-actions--workflow--job--step" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>The smallest execution unit in GitHub Actions<li>The program that actually executes tasks in a Job<li>Each Job can have multiple Steps<li><strong>Multiple Steps are executed in order</strong><li>A Step can output strings for reference by subsequent Steps.<li><strong>Steps can directly write shell script programs</strong> You can reference <a href="https://cli.github.com/manual/gh" target="_blank">gh cli</a>, current environment variables (e.g., obtaining PR numbers), and directly perform the desired actions.<li>Unless special process conditions are set, if a Step encounters an error, <strong>it will terminate immediately</strong>, and subsequent Steps will not execute.</ul><h4 id="github-actions--workflow--job--reuse-action-step"><span class="me-2">GitHub Actions ‚Äî Workflow ‚Äî Job ‚Äî Reuse Action Step</span><a href="#github-actions--workflow--job--reuse-action-step" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><strong>You can directly reuse existing steps packaged by various experts on the <a href="https://github.com/marketplace?type=actions" target="_blank">Marketplace</a></strong> For example: <a href="https://github.com/marketplace/actions/comment-pull-request" target="_blank">Comment content to PR</a>.<li>You can also package a series of task Steps into an Action GitHub Repo for reuse by other workflows.<li>Actions from Public Repos can be listed on the Marketplace.</ul><p><strong>Packaging Actions supports:</strong></p><ul><li><strong>Docker Action</strong> ‚Äî Indicates that GitHub Actions will pass environment variables to the Docker container, and you can handle them as needed, whether it be shell scripts, Java, PHP, etc.<li><strong>JavaScript/TypeScript Action</strong> ‚Äî Directly use node.js to write the logic for GitHub Actions, and the environment variables will also be passed for your reference. e.g. <a href="https://github.com/pozil/auto-assign-issue/blob/v2/action.yml" target="_blank">pozil/auto-assign-issue</a><li><strong>Composite (YAML)</strong> ‚Äî Pure YAML describing task steps (same as GitHub Actions ‚Äî Workflow ‚Äî Job ‚Äî Step) can declare which steps to perform or directly write shell scripts. e.g. <a href="https://github.com/ZhgChgLi/ZReviewTender/blob/main/action.yml" target="_blank">ZhgChgLi/ZReviewTender</a></ul><blockquote><p><em>Due to space constraints, this article will not cover how to package GitHub Actions. For those interested, please refer to the official documentation: <a href="https://docs.github.com/en/actions/tutorials/creating-a-composite-action" target="_blank">tutorials/creating-a-composite-action</a>.</em></p></blockquote><h4 id="github-runner"><span class="me-2">GitHub Runner</span><a href="#github-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>GitHub will dispatch corresponding Jobs to Runners based on Runner Labels<li>Runners only act as listeners, polling to listen for tasks dispatched by GitHub<li>They only care about Jobs, not which Action (Workflow) it is Thus, you may see that after Action A‚Äôs Job-1 completes, the next one might be Action B‚Äôs Job-1, rather than completing all of Action A‚Äôs Jobs before switching to Action B.<li>Runners can use GitHub Hosted Runners or Self-hosted Runners.</ul><h4 id="github-hosted-runner"><span class="me-2"><strong>GitHub Hosted Runner</strong></span><a href="#github-hosted-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>Runners provided by GitHub, you can refer to the official Repo list:</ul><p><a href="https://github.com/actions/runner-images" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/b479f2537a0d7620cc8bed955bf9331e739ee02383a1715546a26bc35390a494/actions/runner-images" alt="" loading="lazy"></a></p><p><a href="/assets/404bd5c70040/1*KtQV4kDCWscEeaZ8jQI8Dg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*KtQV4kDCWscEeaZ8jQI8Dg.webp" alt="[Images list from June 2025](https://github.com/actions/runner-images){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjExNTQiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="https://github.com/actions/runner-images" target="_blank">Images list from June 2025</a></p><ul><li>You can check what is pre-installed on the Runners: e.g. <a href="https://github.com/actions/runner-images/blob/main/images/macos/macos-14-arm64-Readme.md" target="_blank">macos-14-arm64</a></ul><p><a href="/assets/404bd5c70040/1*svXtXH78-TvK1C_XXCyYLA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*svXtXH78-TvK1C_XXCyYLA.webp" alt="[macos-14-arm64](https://github.com/actions/runner-images/blob/main/images/macos/macos-14-arm64-Readme.md){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9Ijc4MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://github.com/actions/runner-images/blob/main/images/macos/macos-14-arm64-Readme.md" target="_blank">macos-14-arm64</a></p><ul><li>For iOS development, it is recommended to use the -arm64 (M series) processor Runners for faster performance.<li>Just paste the YAML Label from the table in the Job <code class="language-plaintext highlighter-rouge">run-on</code> to use that Runner for executing tasks.<li><strong>Public Repo pricing: Completely free with unlimited usage.</strong><li><strong>Ô∏è</strong> Private Repo free tier: Free tier (varies by account type, for GitHub Free as an example): Usage: 2,000 minutes free per month Storage: 500 MB<li><strong>‚ö†Ô∏èÔ∏èPrivate Repo billing method:</strong> <strong>Billing starts after exceeding the free tier (you can set limits and notifications), and the pricing varies based on the operating system and core of the Runner:</strong></ul><p><a href="/assets/404bd5c70040/1*rkhRJN4ZRas_lDOJh-pjkQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*rkhRJN4ZRas_lDOJh-pjkQ.webp" alt="[about-billing-for-github-actions](https://docs.github.com/en/billing/managing-billing-for-your-products/about-billing-for-github-actions){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTc4IiBoZWlnaHQ9IjEzMjgiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="https://docs.github.com/en/billing/managing-billing-for-your-products/about-billing-for-github-actions" target="_blank">about-billing-for-github-actions</a></p><p>You can see that the price for macOS is high due to the high equipment costs.</p><ul><li>Maximum concurrent task limits:</ul><p><a href="/assets/404bd5c70040/1*LU3zGSBe57NBVMfDwl0wdQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*LU3zGSBe57NBVMfDwl0wdQ.webp" alt="[usage-limits-billing-and-administration](https://docs.github.com/en/actions/concepts/overview/usage-limits-billing-and-administration#usage-limits){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjQ5MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://docs.github.com/en/actions/concepts/overview/usage-limits-billing-and-administration#usage-limits" target="_blank">usage-limits-billing-and-administration</a></p><blockquote><p><em>We‚Äôve digressed too much; our focus is on Self-hosted Runners.</em></p></blockquote><h4 id="self-hosted-runner-on-in-house-server"><span class="me-2">Self-hosted Runner on In-house Server</span><a href="#self-hosted-runner-on-in-house-server" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>Use your own machine as a Runner<li><strong>A physical machine can run multiple Runners concurrently to accept tasks</strong><li><strong>Free unlimited usage</strong> Only the cost of purchasing the machine, use it as much as you want after a one-time investment! For example, if you calculate with a 32G RAM M4 Mini (‚âàNT$40,900), using GitHub Hosted Runners for a month would cost 500 USD; <strong>buying one and setting it up would pay off in just over three months!</strong><li>Supports Windows, macOS, Linux (x64/ARM/ARM64)<li><strong>Runners can be shared across Repos within the same organization</strong><li><strong>‚ö†Ô∏èCurrently: actions/cache, actions/upload-artifact, actions/download-artifact only support GitHub cloud services, meaning that this content will still be uploaded to GitHub servers and counted towards storage fees.</strong> You can set up a shared directory on your own machine instead.<li>Self-hosted Runners also support <a href="https://docs.github.com/en/actions/concepts/runners/about-actions-runner-controller" target="_blank">Docker, k8s</a>, but I haven‚Äôt researched that.</ul><blockquote><p><strong><em>Setting up a Self-hosted Runner only takes a few steps (set up within 10 minutes) to go online and start accepting tasks (this article will introduce it later).</em></strong></p></blockquote><h4 id="github-workflow-x-job-x-step-x-runner-relationship-flowchart"><span class="me-2">GitHub Workflow x Job x Step x Runner Relationship Flowchart</span><a href="#github-workflow-x-job-x-step-x-runner-relationship-flowchart" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*WHIVfXdVRoEsdXGfJhu2Rw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*WHIVfXdVRoEsdXGfJhu2Rw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjczMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>This diagram summarizes the workflow and relationships, assuming we have two Workflows and two Runners:</p><ul><li>CI ‚Äî Assume R has 3 Jobs, each Job has several Steps, Runner Label (run-on) ‚Äî <code class="language-plaintext highlighter-rouge">self-hosted-app</code><li>CD ‚Äî Has 4 Jobs, each Job has several Steps, Runner Label (run-on) ‚Äî <code class="language-plaintext highlighter-rouge">self-hosted-app</code><li>Runners ‚Äî There are 2, both with the Runner Label ‚Äî <code class="language-plaintext highlighter-rouge">self-hosted-app</code></ul><p>As mentioned earlier, Runners and Workflows are dispatched and received based on Runner Labels. In this case, all use the same <code class="language-plaintext highlighter-rouge">self-hosted-app</code> Runner Label. The Jobs in the Workflow are executed concurrently by default, while the Steps are the actual execution content of each Job, executed sequentially in order. Once all Steps are completed, the Job is considered finished.</p><blockquote><p><strong><em>Therefore, the actual execution timeline of the Workflow will traverse between the two Runners executing Jobs, and they will execute concurrently. The next Job executed may not necessarily be the next Job in the same Workflow.</em></strong></p></blockquote><blockquote><p><em>‚ö†Ô∏è This is why it‚Äôs important to ensure that each Job is independent (especially in a Self-hosted Runner environment, where the output of one Job may not be cleaned up thoroughly after completion, leading us to subconsciously think that the output of this Job can be used by the next Job), and this should not be the case.</em></p></blockquote><h4 id="if-a-job-produces-output-for-subsequent-jobs-to-use"><span class="me-2">If a Job produces output for subsequent Jobs to use:</span><a href="#if-a-job-produces-output-for-subsequent-jobs-to-use" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><strong>Job Output String</strong>: Outputs plain text to variables for reference by other Jobs<li><strong>Artifact-upload/download:</strong> The last step of a Job uploads the execution result to GitHub Artifact, and the first step of another Job downloads it for further processing. e.g. For example, Job ‚Äî packaging ‚Üí uploads the packaging result .ipa to <strong>Artifact ‚Üí</strong> Job ‚Äî deployment ‚Üí downloads the .ipa ‚Üí uploads to App Store for deployment. Note: <strong>Currently, even if it‚Äôs Self-hosted, it will still go to GitHub Artifact cloud storage.</strong><li><strong>AWS/GCP‚Ä¶ cloud storage</strong>: Same as above, but using your own cloud storage service.<li><strong>[Self-hosted Only] Shared hard drive, directory:</strong> If Self-hosted Runners are all mounted to a shared directory, you can create folders based on UUID to store output results, and subsequent Jobs can read the previous Job‚Äôs Output UUID to find the corresponding storage and retrieve it for use. Note: Runners on different machines must also mount the same shared directory.<li>Complete all tasks within the same Job‚Äôs Steps.</ul><h3 id="learning-by-doing-github-actions--case-implementation"><span class="me-2">Learning by Doing GitHub Actions ‚Äî Case Implementation</span><a href="#learning-by-doing-github-actions--case-implementation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>‚ÄúBetter to act than to talk.‚Äù The definitions and process structure mentioned above may have left everyone a bit confused. Next, I will directly present three functional examples, guiding you through hands-on practice while explaining the concepts encountered along the way, learning about GitHub Actions through doing.</p><h3 id="case--1"><span class="me-2">Case ‚Äî 1</span><a href="#case--1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Automatically label the File Changes Size Label after creating a Pull Request to help the Reviewer organize their review tasks.</p><h4 id="result-image"><span class="me-2">Result Image</span><a href="#result-image" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*vjSWeu2zB-hmVpfziMDR5Q.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*vjSWeu2zB-hmVpfziMDR5Q.webp" alt="[Demo PR](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NzQiIGhlaWdodD0iMjA2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">Demo PR</a></p><h4 id="operation-process"><span class="me-2">Operation Process</span><a href="#operation-process" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>User opens PR, reopens PR, or pushes a new commit to PR<li>Triggers GitHub Actions Workflow<li>Shell script retrieves the number of file changes<li>Determines the count and labels the PR accordingly<li>Completed</ul><h4 id="hands-on-practice"><span class="me-2">Hands-On Practice</span><a href="#hands-on-practice" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo ‚Üí Actions ‚Üí New workflow ‚Üí set up a workflow yourself.</p><p><strong>File Name:</strong> <code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code></p><p>Action Workflows can have each task in a separate file or aggregate tasks with the same purpose in one file based on the triggering event. Since multiple jobs run concurrently, <strong>GitHub Actions currently does not support directory structures, so having fewer files and using hierarchical naming will make management easier</strong>.</p><p>Here, all actions related to PR events are placed in the same workflow.</p><h4 id="automation-pullrequestyml"><span class="me-2"><code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code></span><a href="#automation-pullrequestyml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) Name</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Request Automation</span>

<span class="c1"># Actions Log Title</span>
<span class="na">run-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[Pull</span><span class="nv"> </span><span class="s">Request</span><span class="nv"> </span><span class="s">Automation]</span><span class="nv"> </span><span class="s">${{</span><span class="nv"> </span><span class="s">github.event.pull_request.title</span><span class="nv"> </span><span class="s">||</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>

<span class="c1"># Trigger Events</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># PR Events</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="c1"># PR - Opened, Reopened, New Push Commit</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">,</span> <span class="nv">synchronize</span><span class="pi">,</span> <span class="nv">reopened</span><span class="pi">]</span>

<span class="c1"># In the same Concurrency Group, if there is a new Job, it will cancel the one currently running</span>
<span class="c1"># For example, if a task triggered by a Push Commit has not executed yet and another Push Commit occurs, the previous task will be canceled</span>
<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.ref_name }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># Job Items</span>
<span class="c1"># Jobs will run concurrently</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">label-pr-by-file-count</span><span class="pi">:</span>
    <span class="c1"># Job Name (optional, omitted for better readability in logs)</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Label PR by changes file count</span>

    <span class="c1"># If this Job fails, it does not affect the entire Workflow, and other Jobs continue</span>
    <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
    
    <span class="c1"># Set maximum Timeout to prevent endless waiting in case of anomalies</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">10</span>

    <span class="c1"># Runner Label - Use GitHub Hosted Runner ubuntu-latest to execute the job</span>
    <span class="c1"># If it's a Private Repo, usage will be calculated, and exceeding limits may incur costs</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="c1"># Job Steps</span>
    <span class="c1"># Steps will execute in order</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># Step Name</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Get changed file count and apply label</span>
        <span class="c1"># Step ID (optional, not needed if there are no subsequent Steps to reference Output)</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">get-changed-files-count-by-gh</span>
        <span class="c1"># Inject external environment parameters into the runtime</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="c1"># secrets.GITHUB_TOKEN is a Token automatically generated during GitHub Actions execution, no need to set it in Secrets, it has some GitHub Repo API Scopes permissions</span>
          <span class="c1"># https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows</span>
          <span class="c1"># The gh (GitHub) CLI needs to inject GH_TOKEN into ENV for permissions to operate  </span>
          <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
        <span class="c1"># Shell script</span>
        <span class="c1"># GitHub Hosted Runner has gh CLI pre-installed, no need to install it in the Job</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">#   ${{ github.xxx }} is a GitHub Actions Context expression</span>
          <span class="s">#   It is not a Shell variable, but a value replaced by GitHub Actions during the YAML parsing phase</span>
          <span class="s">#   Other parameters: https://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>
          
          <span class="s"># Get PR number:</span>
          <span class="s">PR_NUMBER=${{ github.event.pull_request.number }}</span>

          <span class="s"># Get Repo:</span>
          <span class="s">REPO=${{ github.repository }}</span>

          <span class="s"># Use GitHub API (gh CLI) to get the number of changed files</span>
          <span class="s">FILE_COUNT=$(gh pr view $PR_NUMBER --repo $REPO --json files --jq '.files | length')</span>
          
          <span class="s"># Print Log</span>
          <span class="s">echo "Changed file count: $FILE_COUNT"</span>

          <span class="s"># Label logic</span>
          <span class="s">if [ "$FILE_COUNT" -lt 5 ]; then</span>
            <span class="s">LABEL="XS"</span>
          <span class="s">elif [ "$FILE_COUNT" -lt 10 ]; then</span>
            <span class="s">LABEL="S"</span>
          <span class="s">elif [ "$FILE_COUNT" -lt 30 ]; then</span>
            <span class="s">LABEL="M"</span>
          <span class="s">elif [ "$FILE_COUNT" -lt 80 ]; then</span>
            <span class="s">LABEL="L"</span>
          <span class="s">elif [ "$FILE_COUNT" -lt 200 ]; then</span>
            <span class="s">LABEL="XL"</span>
          <span class="s">else</span>
            <span class="s">LABEL="XXL"</span>
          <span class="s">fi</span>

          <span class="s"># Use GitHub API (gh CLI) to remove the current Size Label</span>
          <span class="s">EXISTING_LABELS=$(gh pr view "$PR_NUMBER" --repo "$REPO" --json labels --jq '.labels[].name')</span>
          <span class="s">for EXISTING in $EXISTING_LABELS; do</span>
            <span class="s">case "$EXISTING" in</span>
              <span class="s">XS|S|M|L|XL|XXL)</span>
                <span class="s">echo "üßπ Removing existing label: $EXISTING"</span>
                <span class="s">gh pr edit "$PR_NUMBER" --repo "$REPO" --remove-label "$EXISTING"</span>
                <span class="s">;;</span>
            <span class="s">esac</span>
          <span class="s">done</span>

          <span class="s"># (Optional) Create the label if it does not exist</span>
          <span class="s">if ! gh label list --repo "$REPO" | grep -q "^$LABEL"; then</span>
            <span class="s">echo "üÜï Creating missing label: $LABEL"</span>
            <span class="s">gh label create "$LABEL" --repo "$REPO" --description "Size label: $LABEL" --color "ededed"</span>
          <span class="s">else</span>
            <span class="s">echo "‚úÖ Label '$LABEL' already exists"</span>
          <span class="s">fi</span>
          
          <span class="s"># Use GitHub API (gh CLI) to label the PR</span>
          <span class="s">gh pr edit $PR_NUMBER --repo $REPO --add-label "$LABEL"</span>
</pre></table></code></div></div><p>After committing the file to the main branch of the Repo, opening a new PR will automatically trigger GitHub Actions:</p><p><a href="/assets/404bd5c70040/1*wdAztL0BgPeSZdqXxqUEXg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*wdAztL0BgPeSZdqXxqUEXg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MzgiIGhlaWdodD0iNzQ0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>The Action execution status shows <strong>Queued</strong>, indicating that the task is waiting for the Runner to take over.</p><h4 id="execution-result"><span class="me-2">Execution Result</span><a href="#execution-result" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*-JoD8IQYHVrDqHmLmrXyaQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*-JoD8IQYHVrDqHmLmrXyaQ.webp" alt="[Demo PR](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9Ijg1MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">Demo PR</a></p><p>Once completed successfully, the PR will automatically be labeled with the corresponding label! The record will show that it was labeled by <code class="language-plaintext highlighter-rouge">github-actions</code>.</p><p><strong>Complete Code: <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Automation-PullRequest.yml" target="_blank">Automation-PullRequest.yml</a></strong></p><h4 id="directly-use-pre-packaged-action-steps-pascalgnsize-label-action"><span class="me-2">Directly Use Pre-Packaged Action Steps: <a href="https://github.com/pascalgn/size-label-action/tree/main" target="_blank">pascalgn/size-label-action</a></span><a href="#directly-use-pre-packaged-action-steps-pascalgnsize-label-action" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>As mentioned earlier, you can directly use pre-packaged Actions. The task of labeling PR Size Labels already has a ready-made solution available. The above example is for educational purposes; in practice, you do not need to reinvent the wheel.</p><p>You can simply use it directly in the Action Workflow Job Step:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) Name</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Request Automation</span>

<span class="c1"># Trigger Events</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># PR Events</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="c1"># PR - Opened, Reopened, New Push Commit</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">,</span> <span class="nv">synchronize</span><span class="pi">,</span> <span class="nv">reopened</span><span class="pi">]</span>

<span class="c1"># In the same Concurrency Group, if there is a new Job, it will cancel the one currently running</span>
<span class="c1"># For example, if a task triggered by a Push Commit has not executed yet and another Push Commit occurs, the previous task will be canceled</span>
<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.ref_name }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># Job Items</span>
<span class="c1"># Jobs will run concurrently</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">label-pr-by-file-count</span><span class="pi">:</span>
    <span class="c1"># Job Name (optional, omitted for better readability in logs)</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Label PR by changes file count</span>

    <span class="c1"># If this Job fails, it does not affect the entire Workflow, and other Jobs continue</span>
    <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
    
    <span class="c1"># Set maximum Timeout to prevent endless waiting in case of anomalies</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">10</span>

    <span class="c1"># Runner Label - Use GitHub Hosted Runner ubuntu-latest to execute the job</span>
    <span class="c1"># If it's a Private Repo, usage will be calculated, and exceeding limits may incur costs</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="c1"># Job Steps</span>
    <span class="c1"># Steps will execute in order</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># Step Name</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Get changed file count and apply label</span>
        <span class="c1"># Step ID (optional, not needed if there are no subsequent Steps to reference Output)</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">get-changed-files-count-by-gh</span>
        <span class="c1"># Directly use pre-packaged code</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pascalgn/size-label-action@v0.5.5"</span>
        <span class="c1"># Inject external environment parameters into the runtime</span>
        <span class="c1"># Parameter naming and available parameters should refer to the documentation: https://github.com/pascalgn/size-label-action/tree/main</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="c1"># secrets.GITHUB_TOKEN is a Token automatically generated during GitHub Actions execution (github-actions identity), no need to set it in Secrets, it has some GitHub Repo API Scopes permissions</span>
          <span class="c1"># https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows</span>
          <span class="na">GITHUB_TOKEN</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">secrets.GITHUB_TOKEN</span><span class="nv"> </span><span class="s">}}"</span>
</pre></table></code></div></div><p><a href="https://github.com/pascalgn/size-label-action/tree/main" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/1e5c6f52127032dc1a5fea71a498fa9cc585987880889f0306ef705de3990867/pascalgn/size-label-action" alt="" loading="lazy"></a></p><p>This pre-packaged Action is a JavaScript Action. You can refer to the actual execution code in the following file: <a href="https://github.com/pascalgn/size-label-action/blob/main/dist/index.js" target="_blank">dist/index.js</a>.</p><h4 id="supplement-on-name-and-run-name"><span class="me-2">Supplement on name and run-name:</span><a href="#supplement-on-name-and-run-name" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*zBmjm_3AU53NN0UhTrmOBQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*zBmjm_3AU53NN0UhTrmOBQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDEyIiBoZWlnaHQ9IjU2OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><ul><li>name: Name of the Action Workflow<li>run-name: Title of the execution record (can include PR Title or Branch or Author‚Ä¶etc) If it is an on:pull_request event, the default is the PR Title.</ul><h3 id="case--2"><span class="me-2">Case ‚Äî 2</span><a href="#case--2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Automatically assign the author to themselves and comment if there is no Assignee after creating a Pull Request. (This only executes on the initial creation.)</p><h4 id="result-image-1"><span class="me-2">Result Image</span><a href="#result-image-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*EL-0nQF7jhP34d6ZoSkJAg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*EL-0nQF7jhP34d6ZoSkJAg.webp" alt="[Demo PR](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY4MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">Demo PR</a></p><h4 id="operation-process-1"><span class="me-2">Operation Process</span><a href="#operation-process-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>User opens PR<li>Triggers GitHub Actions Workflow<li>GitHub script retrieves assignee<li>If there is no assignee, assigns the author of the PR &amp; comments the message<li>Completed</ul><h4 id="hands-on-practice-1"><span class="me-2">Hands-On Practice</span><a href="#hands-on-practice-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo ‚Üí Actions ‚Üí New workflow ‚Üí set up a workflow yourself.</p><p><strong>File Name:</strong> <code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code> (same as above)</p><h4 id="automation-pullrequestyml-1"><span class="me-2"><code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code></span><a href="#automation-pullrequestyml-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) Name</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Request Automation</span>

<span class="c1"># Actions Log Title</span>
<span class="na">run-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Pull</span><span class="nv"> </span><span class="s">Request</span><span class="nv"> </span><span class="s">Automation</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">Daily</span><span class="nv"> </span><span class="s">Checker"</span>

<span class="c1"># Trigger Events</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># PR Events</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="c1"># PR - Opened, Reopened, New Push Commit</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">,</span> <span class="nv">synchronize</span><span class="pi">,</span> <span class="nv">reopened</span><span class="pi">]</span>

<span class="c1"># In the same Concurrency Group, if there is a new Job, it will cancel the one currently running</span>
<span class="c1"># For example, if a task triggered by a Push Commit has not executed yet and another Push Commit occurs, the previous task will be canceled</span>
<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.ref_name }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># Job Items</span>
<span class="c1"># Jobs will run concurrently</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">label-pr-by-file-count</span><span class="pi">:</span>
    <span class="c1"># Please refer to the previous section, omitted....</span>
  <span class="c1"># ---------</span>
  <span class="na">assign-self-if-no-assignee</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Automatically assign to self if no assignee is specified</span>
    <span class="c1"># Since this is a shared trigger event, the Job will determine itself; it will only execute when the Pull Request is Opened (initial creation), otherwise it will be Skipped</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">github.event_name == 'pull_request' &amp;&amp; github.event.action == 'opened'</span>

    <span class="c1"># If this Job fails, it does not affect the entire Workflow, and other Jobs continue</span>
    <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
    
    <span class="c1"># Set maximum Timeout to prevent endless waiting in case of anomalies</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">10</span>
    
    <span class="c1"># Runner Label - Use GitHub Hosted Runner ubuntu-latest to execute the job</span>
    <span class="c1"># If it's a Private Repo, usage will be calculated, and exceeding limits may incur costs</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Assign self if No Assignee</span>
        <span class="c1"># Use GitHub Script (JavaScript) to write the script (Node.js environment)</span>
        <span class="c1"># Compared to writing directly in Shell Script, this is more convenient and visually appealing</span>
        <span class="c1"># No need to inject environment variables or GITHUB_TOKEN manually</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">// In github-script, context variables are automatically injected for direct reference in JavaScript</span>
            <span class="s">// https://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>

            <span class="s">const issue = context.payload.pull_request; // If you want to support Issues as well, you can write it as context.payload.issue || context.payload.pull_request</span>
            <span class="s">const assignees = issue.assignees || [];</span>
            <span class="s">const me = context.actor;</span>

            <span class="s">if (assignees.length === 0) {</span>
              <span class="s">// Set Assignee to self</span>
              <span class="s">await github.rest.issues.addAssignees({</span>
                <span class="s">owner: context.repo.owner,</span>
                <span class="s">repo: context.repo.repo,</span>
                <span class="s">issue_number: issue.number,</span>
                <span class="s">assignees: [me]</span>
              <span class="s">});</span>

              <span class="s">// Leave a comment to notify</span>
              <span class="s">await github.rest.issues.createComment({</span>
                <span class="s">owner: context.repo.owner,</span>
                <span class="s">repo: context.repo.repo,</span>
                <span class="s">issue_number: issue.number,</span>
                <span class="s">body: `üîß No assignee was set, so I have assigned this to myself (@${me}).`</span>
              <span class="s">});</span>
            <span class="s">}</span>
</pre></table></code></div></div><p>This time we demonstrate using GitHub Script (JavaScript) to write the script, which offers more flexibility and better syntax.</p><p>Of course, if you want to follow my previous suggestion of having each task in a separate file, you can remove the Job If condition and directly set the Action Workflow trigger conditions:</p><p><code class="language-plaintext highlighter-rouge">Automation-PullRequest-Auto-Assign.yml</code> <strong>:</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) Name</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Request Automation - Auto Assignee Self</span>

<span class="c1"># Trigger Events</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># PR Events</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="c1"># PR - On Open</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">assign-self-if-no-assignee</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Automatically assign to self if no assignee is specified</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># Please refer to the previous section, omitted....</span>
</pre></table></code></div></div><p>After committing the file to the main branch of the Repo, opening a new PR will automatically trigger GitHub Actions:</p><p><a href="/assets/404bd5c70040/1*Y-A6owUibNEFBoRFHnqIYg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Y-A6owUibNEFBoRFHnqIYg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjcxIiBoZWlnaHQ9IjcwOCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Now there are two Jobs to execute!</p><h4 id="execution-result-1"><span class="me-2">Execution Result</span><a href="#execution-result-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*23muCVgUJKmZt746khBMFQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*23muCVgUJKmZt746khBMFQ.webp" alt="[Demo PR](https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzUwIiBoZWlnaHQ9IjExMDEiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/pull/11" target="_blank">Demo PR</a></p><p>Once completed successfully, if the PR has no Assignees, it will automatically assign the PR author and comment the message. (All actions are performed under the <code class="language-plaintext highlighter-rouge">github-actions</code> identity)</p><p><strong>Complete Code: <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Automation-PullRequest.yml" target="_blank">Automation-PullRequest.yml</a></strong></p><h4 id="test-reopening-reopened-pr"><span class="me-2">Test Reopening (Reopened) PR</span><a href="#test-reopening-reopened-pr" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*mcDa7TZjv6mO7HtwhOE-Vw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*mcDa7TZjv6mO7HtwhOE-Vw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NjAiIGhlaWdodD0iNDA3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>You can see that only the Size Label Job will execute, while the Auto Assignee Job was Skipped.</p><blockquote><p><em>This task also has a pre-packaged Action available for reuse; you can refer to: <a href="https://github.com/pozil/auto-assign-issue" target="_blank">pozil/auto-assign-issue</a>.</em></p></blockquote><h3 id="case--3"><span class="me-2">Case ‚Äî 3</span><a href="#case--3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Automatically count the current number of PRs and how long they have been open every morning at 9 AM, sending notification messages to the Slack workgroup, and automatically closing PRs that have been open for over 3 months.</p><h4 id="result-image-2"><span class="me-2">Result Image</span><a href="#result-image-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*0stX9KpZi6PcXpG-90wyIg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*0stX9KpZi6PcXpG-90wyIg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDgiIGhlaWdodD0iMTQ3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/404bd5c70040/1*Nbg3r1zzhx24YIBEjPJnaw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Nbg3r1zzhx24YIBEjPJnaw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MjgiIGhlaWdodD0iMTg3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>Slack workgroup automatically receives reports every morning<li>Automatically closes PRs that have been open for more than 90 days</ul><h4 id="workflow"><span class="me-2">Workflow</span><a href="#workflow" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>GitHub Actions automatically triggers every morning at 9 AM<li>Triggers the GitHub Actions Workflow<li>GitHub script retrieves the list of open PRs and counts how many days they have been open<li>Sends the statistical report message to Slack<li>Closes PRs that have been open for more than 90 days<li>Done</ul><h4 id="get-started"><span class="me-2">Get Started</span><a href="#get-started" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Repo ‚Üí Actions ‚Üí New workflow ‚Üí set up a workflow yourself.</p><p><strong>File Name:</strong> <code class="language-plaintext highlighter-rouge">Automation-PullRequest-Daily.yml</code></p><h4 id="automation-pullrequest-dailyyml"><span class="me-2">Automation-PullRequest-Daily.yml</span><a href="#automation-pullrequest-dailyyml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
</pre><td class="rouge-code"><pre><span class="c1"># Workflow(Action) name</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Pull Request Automation - Daily Checker</span>

<span class="c1"># Trigger events</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># Scheduled to run automatically</span>
  <span class="c1"># https://crontab.guru/</span>
  <span class="c1"># UTC time</span>
  <span class="na">schedule</span><span class="pi">:</span>
    <span class="c1"># UTC 01:00 = 09:00 UTC+8 every day</span>
    <span class="pi">-</span> <span class="na">cron</span><span class="pi">:</span> <span class="s1">'</span><span class="s">0</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*'</span>
  <span class="c1"># Manual trigger</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>

<span class="c1"># Job tasks</span>
<span class="c1"># Jobs will run concurrently</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="c1"># Job ID</span>
  <span class="na">calculate-pr-status</span><span class="pi">:</span>
    <span class="c1"># Job name (optional, but makes logs easier to read)</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Calculate PR Status</span>
    <span class="c1"># Runner Label - uses GitHub Hosted Runner ubuntu-latest to execute the job</span>
    <span class="c1"># If it's a Private Repo, usage will be calculated, and exceeding limits may incur costs</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="c1"># Job Output</span>
    <span class="na">outputs</span><span class="pi">:</span>
      <span class="na">pr_list</span><span class="pi">:</span> <span class="s">${{ steps.pr-info.outputs.pr_list }}</span>

    <span class="c1"># Job steps</span>
    <span class="c1"># Steps will execute in order</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># Step name</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Fetch open PRs and calculate</span>
        <span class="c1"># Step needs to reference Output, must be set</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">pr-info</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">const now = new Date();</span>
            <span class="s">const per_page = 100;</span>
            <span class="s">let page = 1;</span>
            <span class="s">let allPRs = [];</span>
      
            <span class="s">while (true) {</span>
              <span class="s">const { data: prs } = await github.rest.pulls.list({</span>
                <span class="s">owner: context.repo.owner,</span>
                <span class="s">repo: context.repo.repo,</span>
                <span class="s">state: 'open',</span>
                <span class="s">per_page,</span>
                <span class="s">page,</span>
              <span class="s">});</span>
              <span class="s">if (prs.length === 0) break;</span>
              <span class="s">allPRs = allPRs.concat(prs);</span>
              <span class="s">if (prs.length &lt; per_page) break;</span>
              <span class="s">page++;</span>
            <span class="s">}</span>
      
            <span class="s">const result = allPRs.map(pr =&gt; {</span>
              <span class="s">const created = new Date(pr.created_at);</span>
              <span class="s">const daysOpen = Math.floor((now - created) / (1000 * 60 * 60 * 24));</span>
              <span class="s">return {</span>
                <span class="s">pr: pr.number.toString(),</span>
                <span class="s">title: pr.title,</span>
                <span class="s">idle: daysOpen</span>
              <span class="s">};</span>
            <span class="s">});</span>

            <span class="s">// Set back to Output, only accepts String</span>
            <span class="s">core.setOutput('pr_list', JSON.stringify(result));</span>
  <span class="c1"># ----</span>
  <span class="na">send-pr-summary-message-to-slack</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Send PR Summary Message to Slack</span>
    <span class="c1"># By default, Jobs run concurrently; using needs forces the current Job to wait until the needed Job completes</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">calculate-pr-status</span><span class="pi">]</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Generate Message</span>
        <span class="c1"># Step needs to reference Output, must be set</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">gen-msg</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">const prList = JSON.parse(`${{ needs.calculate-pr-status.outputs.pr_list }}`);</span>
            <span class="s">const blocks = [];</span>
      
            <span class="s">// Title</span>
            <span class="s">blocks.push({</span>
              <span class="s">type: "section",</span>
              <span class="s">text: {</span>
                <span class="s">type: "mrkdwn",</span>
                <span class="s">text: `üì¨ *Open PR Report*\nTotal: *${prList.length}* PR(s)`</span>
              <span class="s">}</span>
            <span class="s">});</span>
      
            <span class="s">// Each PR in a line</span>
            <span class="s">for (const pr of prList) {</span>
              <span class="s">blocks.push({</span>
                <span class="s">type: "section",</span>
                <span class="s">text: {</span>
                  <span class="s">type: "mrkdwn",</span>
                  <span class="s">text: `‚Ä¢ &lt;https://github.com/${context.repo.owner}/${context.repo.repo}/pull/${pr.pr}|PR #${pr.pr}&gt; *${pr.title}* - üïí ${pr.idle} day(s)`</span>
                <span class="s">}</span>
              <span class="s">});</span>
            <span class="s">}</span>

            <span class="s">// Set back to Output, only accepts String</span>
            <span class="s">core.setOutput('blocks', JSON.stringify(blocks));</span>

      <span class="c1"># Use the official Slack API GitHub Actions</span>
      <span class="c1"># https://tools.slack.dev/slack-github-action/sending-techniques/sending-data-slack-api-method/</span>
      <span class="c1"># Send message</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Post text to a Slack channel</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">slackapi/slack-github-action@v2.1.0</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">method</span><span class="pi">:</span> <span class="s">chat.postMessage</span>
          <span class="na">token</span><span class="pi">:</span> <span class="s">${{ secrets.SLACK_BOT_TOKEN }}</span>
          <span class="na">payload</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">channel: ${{ vars.SLACK_TEAM_CHANNEL_ID }}</span>
            <span class="s">blocks: ${{ steps.gen-msg.outputs.blocks }}</span>
  <span class="c1"># ----</span>
  <span class="na">auto-close-old-prs</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Auto Close Old PRs</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">calculate-pr-status</span><span class="pi">]</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Auto close PRs opened more than 90 days</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">const prList = JSON.parse(`${{ needs.calculate-pr-status.outputs.pr_list }}`);</span>
            <span class="s">const oldPRs = prList.filter(pr =&gt; pr.idle &gt; 90);</span>

            <span class="s">for (const pr of oldPRs) {</span>
              <span class="s">await github.rest.pulls.update({</span>
                <span class="s">owner: context.repo.owner,</span>
                <span class="s">repo: context.repo.repo,</span>
                <span class="s">pull_number: parseInt(pr.pr),</span>
                <span class="s">state: 'closed'</span>
              <span class="s">});</span>

              <span class="s">await github.rest.issues.createComment({</span>
                <span class="s">owner: context.repo.owner,</span>
                <span class="s">repo: context.repo.repo,</span>
                <span class="s">issue_number: parseInt(pr.pr),</span>
                <span class="s">body: `‚ö†Ô∏è This pull request has been automatically closed because it has been open for more than 90 days. Please reopen if needed.`</span>
              <span class="s">});</span>
            <span class="s">}</span>
            <span class="s">console.log(`Closed ${oldPRs.length} PR(s)`);</span>
</pre></table></code></div></div><p>In this example, we use:</p><ul><li>on: schedule Crontab to automatically trigger and workflow_dispatch to support manual triggering<li>Job output/Step output (both can only be strings)<li>Multiple Jobs are concurrent by default but can use <code class="language-plaintext highlighter-rouge">needs</code> for time dependency<li>Retrieve settings from Repo Secrets/Variables<li>Integrate with Slack API</ul><p><strong>Repo Secrets ‚Äî Add</strong> <code class="language-plaintext highlighter-rouge">SLACK_BOT_TOKEN</code></p><p><a href="/assets/404bd5c70040/1*YC4DBHtKmX5XGgcSSzaE5A.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*YC4DBHtKmX5XGgcSSzaE5A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjIxIiBoZWlnaHQ9Ijk4NyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><ul><li>For creating a Slack App and setting message permissions, you can refer to my <a href="/posts/zrealm-dev/en/slack-chatgpt-integration-bd94cc88f9c9/">previous article</a></ul><p><strong>Repo Variables ‚Äî Add</strong> <code class="language-plaintext highlighter-rouge">SLACK_TEAM_CHANNEL_ID</code></p><p><a href="/assets/404bd5c70040/1*X4gZ5_IRvsiehAL0O9AleQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*X4gZ5_IRvsiehAL0O9AleQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTc0IiBoZWlnaHQ9Ijk5OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>After committing the file to the main branch of the Repo, return to Actions and manually trigger it:</p><blockquote><p><em>It will automatically trigger daily in the future.</em></p></blockquote><p><a href="/assets/404bd5c70040/1*WNFKXl-QC2WGyaSWep5-DA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*WNFKXl-QC2WGyaSWep5-DA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDQ4IiBoZWlnaHQ9IjQzOCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Actions ‚Üí Pull Request Automation ‚Äî Daily Checker ‚Üí Run workflow ‚Üí Branch: main ‚Üí Run workflow.</p><p><strong>After execution, you can click to view the execution status:</strong></p><p><a href="/assets/404bd5c70040/1*4mvOxnd1uS4ZlxnNoNdHaQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*4mvOxnd1uS4ZlxnNoNdHaQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDg3IiBoZWlnaHQ9IjU0NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/404bd5c70040/1*BluzFgY2tM2E7DwoVq1jQw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*BluzFgY2tM2E7DwoVq1jQw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDMwIiBoZWlnaHQ9IjQ1OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Due to the <code class="language-plaintext highlighter-rouge">needs</code> constraint, the Jobs process will have <code class="language-plaintext highlighter-rouge">Calculate PR Status</code> complete first before concurrently executing <code class="language-plaintext highlighter-rouge">Auto Close Old PRs</code> and <code class="language-plaintext highlighter-rouge">Send PR Summary Message to Slack</code>.</p><h4 id="execution-results"><span class="me-2">Execution Results</span><a href="#execution-results" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>After all tasks successfully execute, you can check the Slack message:</strong></p><p><a href="/assets/404bd5c70040/1*0stX9KpZi6PcXpG-90wyIg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*0stX9KpZi6PcXpG-90wyIg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDgiIGhlaWdodD0iMTQ3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Success üöÄüöÄüöÄ</p><p><strong>Full code: <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Automation-PullRequest-Daily.yml" target="_blank">Automation-PullRequest-Daily.yml</a></strong></p><h3 id="summary"><span class="me-2">Summary</span><a href="#summary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><p>I hope the three examples above give you a preliminary understanding of GitHub Actions and inspire your automation workflow ideas. You can come up with your own workflows (please be sure to refer to <a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows" target="_blank">trigger events</a>), and then write scripts to execute; also remember to check the <a href="https://github.com/marketplace?type=actions" target="_blank"><strong>Marketplace</strong></a> for existing steps that you can use directly.</p></blockquote><p>This article is just an introduction (even without checking out code). The next article, ‚Äú<a href="/posts/zrealm-dev/en/ci-cd-practical-guide-3-implementing-ios-app-ci-and-cd-workflows-using-github-actions-4b001d2e8440/"><strong>CI/CD Practical Guide (3): Implementing CI and CD Workflows for App Projects Using GitHub Actions</strong></a>‚Äù, will introduce more complex and in-depth GitHub Actions Workflows.</p><h4 id="github-automation-extension-topics"><span class="me-2">GitHub Automation Extension Topics</span><a href="#github-automation-extension-topics" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>GitHub can integrate with Slack to subscribe to Repo PR update notifications, Push Default Branch notifications, etc.</p><p><a href="/assets/404bd5c70040/1*BMTT4koRBIIsQ7_mklC86w.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*BMTT4koRBIIsQ7_mklC86w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MzkiIGhlaWdodD0iNDMwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Question 1. GitHub messages cannot tag people, only tagging GitHub accounts, and Slack accounts do not receive notifications:</strong></p><p><a href="/assets/404bd5c70040/1*Ddp0cEtXE10hScM1rozmtg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Ddp0cEtXE10hScM1rozmtg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzAwIiBoZWlnaHQ9Ijk0NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/404bd5c70040/1*uHGJ7l__AdYoWT9KpvihLQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*uHGJ7l__AdYoWT9KpvihLQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDQzIiBoZWlnaHQ9Ijc3NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="https://slack.github.com/" target="_blank">Slack App</a> or search for GitHub in Apps ‚Üí open the message window ‚Üí complete the <strong>Connect GitHub Account</strong> step, so GitHub knows what your corresponding Slack UID is and can tag you.</p><p><strong>Question 2. Pull Request Reminder</strong></p><p>I remember this was originally a feature developed by a third party, but it was later integrated directly into GitHub. Don‚Äôt foolishly write scripts using GitHub Actions for this!</p><p><a href="/assets/404bd5c70040/1*BpMd2K0NBDE6xB1XzFY94Q.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*BpMd2K0NBDE6xB1XzFY94Q.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDA4IiBoZWlnaHQ9IjEyMDAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><blockquote><p><a href="https://docs.github.com/en/organizations/organizing-members-into-teams/managing-scheduled-reminders-for-your-team" target="_blank"><strong><em>GitHub has a built-in by Team setting; you need to first add a Team for the organization, add the Repo to the Team, and then you can set up Pull Request Reminders.</em></strong></a></p></blockquote><ul><li>After entering the Slack Channel and rules, it will automatically send reminder messages and tag Reviewers every day. You can refer to the setup <a href="https://michaelheap.com/github-scheduled-reminders/" target="_blank">here</a>, and the result is shown in the image below:</ul><p><a href="/assets/404bd5c70040/1*kvqFXkIKIxP79Wm8vIaN0Q.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*kvqFXkIKIxP79Wm8vIaN0Q.webp" alt="[https://michaelheap.com/github-scheduled-reminders/](https://michaelheap.com/github-scheduled-reminders/){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDAiIGhlaWdodD0iMzE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://michaelheap.com/github-scheduled-reminders/" target="_blank">https://michaelheap.com/github-scheduled-reminders/</a></p><p><strong>Question 4. GitHub PR messages, authors do not receive notifications:</strong></p><p><a href="/assets/404bd5c70040/1*wmtXwXAcQZDXqInRd0ivPw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*wmtXwXAcQZDXqInRd0ivPw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTIiIGhlaWdodD0iNTM1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p><em>This is a long-standing issue: the PR Slack message <strong>actually does not notify the author when someone replies in threads</strong>. The Slack message sent by GitHub only tags Reviewers, not the Assignee or PR author.</em></p></blockquote><p>At this point, GitHub Actions can be used to create an automation tool. We can add a Job to append the author tag at the end of the PR Description, so that when the message is sent to Slack, it will also tag the author‚Äôs Slack:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="c"># Workflow(Action) name</span>
name: Pull Request Automation
<span class="c"># Please refer to the previous text, omitted....</span>

  <span class="c"># ---------</span>
  append-author-to-pr-description:
    name: Append author to PR description
    <span class="c"># Since this is a shared trigger event, the Job will determine itself; it will only execute the Job when the Pull Request is Opened (first created), otherwise it will be Skipped</span>
    <span class="k">if</span>: github.event_name <span class="o">==</span> <span class="s1">'pull_request'</span> <span class="o">&amp;&amp;</span> github.event.action <span class="o">==</span> <span class="s1">'opened'</span>
    
    <span class="c"># If this Job fails, it does not affect the entire Workflow, and other Jobs will continue</span>
    <span class="k">continue</span><span class="nt">-on-error</span>: <span class="nb">true</span>
    
    <span class="c"># Set the maximum Timeout duration to prevent endless waiting in case of anomalies</span>
    timeout-minutes: 10
    
    <span class="c"># Runner Label - uses GitHub Hosted Runner ubuntu-latest to execute the job</span>
    <span class="c"># If it's a Private Repo, usage will be calculated, and exceeding limits may incur costs</span>
    <span class="c"># But this kind of automation task is not likely to exceed usage</span>
    runs-on: ubuntu-latest
    steps:
      - name: Append author to PR description
        <span class="nb">env</span>:
          <span class="c"># secrets.GITHUB_TOKEN is a token automatically generated during GitHub Actions execution, no need to set it in Secrets, it has some GitHub Repo API Scopes permissions</span>
          <span class="c"># gh (GitHub) CLI needs to inject GH_TOKEN into ENV for permission to operate</span>
          <span class="c"># https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows</span>
          GH_TOKEN: <span class="k">${</span><span class="p">{ secrets.GITHUB_TOKEN </span><span class="k">}</span><span class="o">}</span>

          <span class="c">#   ${{ github.xxx }} is a GitHub Actions Context expression</span>
          <span class="c">#   It is not a Shell variable, but a value replaced by GitHub Actions during the YAML parsing phase</span>
          <span class="c">#   Other parameters: https://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>
          PR_NUMBER: <span class="k">${</span><span class="p">{ github.event.pull_request.number </span><span class="k">}</span><span class="o">}</span>
          AUTHOR_TAG: <span class="s1">'@${{ github.event.pull_request.user.login }}'</span>
        run: |
          <span class="nv">PR_BODY</span><span class="o">=</span><span class="si">$(</span>gh <span class="nb">pr </span>view <span class="nv">$PR_NUMBER</span> <span class="nt">--repo</span> <span class="k">${</span><span class="p">{ github.repository </span><span class="k">}</span><span class="o">}</span> <span class="nt">--json</span> body <span class="nt">-q</span> <span class="s2">".body"</span><span class="si">)</span>
          <span class="nv">NEW_BODY</span><span class="o">=</span><span class="si">$(</span><span class="nb">printf</span> <span class="s2">"%s</span><span class="se">\n\n</span><span class="s2">Created by %s"</span> <span class="s2">"</span><span class="nv">$PR_BODY</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$AUTHOR_TAG</span><span class="s2">"</span><span class="si">)</span>
          gh <span class="nb">pr </span>edit <span class="nv">$PR_NUMBER</span> <span class="nt">--repo</span> <span class="k">${</span><span class="p">{ github.repository </span><span class="k">}</span><span class="o">}</span> <span class="nt">--body</span> <span class="s2">"</span><span class="nv">$NEW_BODY</span><span class="s2">"</span>
</pre></table></code></div></div><p><strong>Full code: <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Automation-PullRequest.yml" target="_blank">Automation-PullRequest.yml</a></strong></p><p>When opening a PR, it will automatically append the author information at the end of the description, and the Slack message will correctly tag the author:</p><p><a href="/assets/404bd5c70040/1*UtTDtIQJ0vJks79UzCQSAQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*UtTDtIQJ0vJks79UzCQSAQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NTMiIGhlaWdodD0iMzcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/404bd5c70040/1*MjVsFqE--xAq1zSQfCNVdQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*MjVsFqE--xAq1zSQfCNVdQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MTYiIGhlaWdodD0iMjQ0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Question 5. GitHub sends too many notification emails, which is very disruptive:</strong></p><p>After setting up GitHub Repo notifications and Slack, you can go to your GitHub personal settings to turn off email notifications:</p><p><a href="/assets/404bd5c70040/1*INgfO9B2bNFy-Nd1ZjnzOw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*INgfO9B2bNFy-Nd1ZjnzOw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzA2IiBoZWlnaHQ9IjY4NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h4 id="others"><span class="me-2">Others</span><a href="#others" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Actions currently do not have a directory structure, but you can pin (Pin) five Actions on the Actions page; you can also use Disable to pause a specific Action.</p><p><a href="/assets/404bd5c70040/1*ZD-5xkparhJqtnm2REeu6A.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*ZD-5xkparhJqtnm2REeu6A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjU4MSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>You can check GitHub Actions usage and execution performance in Insights:</p><p><a href="/assets/404bd5c70040/1*re91ZRtQ0frOF6GVJ-MKrw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*re91ZRtQ0frOF6GVJ-MKrw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjU5MSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h3 id="reuse-workflow-supplement"><span class="me-2">Reuse Workflow Supplement</span><a href="#reuse-workflow-supplement" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/posts/zrealm-dev/en/ci-cd-practical-guide-part-4-building-a-free-and-user-friendly-packaging-tool-platform-with-google-apps-script-web-app-and-github-actions-4273e57e7148/">The next article</a> uses the same Repo to split Reuse Workflow; here‚Äôs a supplement on an example of splitting Reuse Workflow across different Repos.</p><p>First, define a Reuse Workflow: <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo-share-actions/blob/main/.github/workflows/Automation-label-pr-base-branch.yml" target="_blank"><strong>Automation-label-pr-base-branch.yml:</strong></a> <strong>in the <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo-share-actions/blob/main/.github/workflows/Automation-label-pr-base-branch.yml" target="_blank">ZhgChgLi/github-actions-ci-cd-demo-share-actions</a> Repo</strong>.</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Automation-label-pr-base-branch</span>
<span class="na">run-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[Automation-label-pr-base-branch]</span><span class="nv"> </span><span class="s">${{</span><span class="nv"> </span><span class="s">github.event.inputs.PR_NUMBER</span><span class="nv"> </span><span class="s">||</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>

<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">${{ github.workflow }}-${{ github.event.inputs.PR_NUMBER || github.ref }}</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># Trigger events</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># Other Workflows call this Workflow to trigger</span>
  <span class="na">workflow_call</span><span class="pi">:</span>
    <span class="c1"># Input data</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="c1"># PR Number</span>
      <span class="na">PR_NUMBER</span><span class="pi">:</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="c1"># Secret inputs</span>
    <span class="na">secrets</span><span class="pi">:</span>
      <span class="na">GH_TOKEN</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">GitHub</span><span class="nv"> </span><span class="s">token</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">API</span><span class="nv"> </span><span class="s">access"</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">label-pr-base-branch</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Label PR Base Branch</span>
    <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">timeout-minutes</span><span class="pi">:</span> <span class="m">10</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Label PR by Base Branch</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">label-pr-base-branch</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">PR_NUMBER="${{ inputs.PR_NUMBER }}"</span>
          <span class="s">REPO="${{ github.repository }}"</span>

          <span class="s">echo "üì¶ Processing PR #$PR_NUMBER in repo $REPO"</span>
          <span class="s"># Get the base branch of the PR</span>
          <span class="s">BASE_BRANCH=$(gh pr view "$PR_NUMBER" --repo "$REPO" --json baseRefName --jq '.baseRefName')</span>
          <span class="s">echo "üîñ PR Base Branch: $BASE_BRANCH"</span>
          
          <span class="s"># Allowed base branch labels</span>
          <span class="s">BRANCH_LABELS=("develop" "main" "master")</span>
          
          <span class="s"># Check if the label is in the allowed list</span>
          <span class="s">if [[ " ${BRANCH_LABELS[@]} " =~ " ${BASE_BRANCH} " ]]; then</span>
            <span class="s">LABEL="$BASE_BRANCH"</span>
          <span class="s">else</span>
            <span class="s">echo "‚ö†Ô∏è Base branch '$BASE_BRANCH' not in allowed list, skipping label."</span>
            <span class="s">exit 0</span>
          <span class="s">fi</span>
          
          <span class="s"># Remove existing base branch labels</span>
          <span class="s">EXISTING_LABELS=$(gh pr view "$PR_NUMBER" --repo "$REPO" --json labels --jq '.labels[].name')</span>
          <span class="s">for EXISTING in $EXISTING_LABELS; do</span>
            <span class="s">if [[ " ${BRANCH_LABELS[@]} " =~ " ${EXISTING} " ]]; then</span>
              <span class="s">echo "üßπ Removing existing base branch label: $EXISTING"</span>
              <span class="s">gh pr edit "$PR_NUMBER" --repo "$REPO" --remove-label "$EXISTING"</span>
            <span class="s">fi</span>
          <span class="s">done</span>
          
          <span class="s"># Create the label if it doesn't exist</span>
          <span class="s">if ! gh label list --repo "$REPO" | grep -q "^$LABEL$"; then</span>
            <span class="s">echo "üÜï Creating missing label: $LABEL"</span>
            <span class="s">gh label create "$LABEL" --repo "$REPO" --description "PR targeting $LABEL branch" --color "ededed"</span>
          <span class="s">else</span>
            <span class="s">echo "‚úÖ Label '$LABEL' already exists"</span>
          <span class="s">fi</span>
          
          <span class="s"># Add the base branch label</span>
          <span class="s">echo "üè∑Ô∏è Adding label '$LABEL' to PR #$PR_NUMBER"</span>
          <span class="s">gh pr edit "$PR_NUMBER" --repo "$REPO" --add-label "$LABEL"</span>
</pre></table></code></div></div><p>Returning to our <strong>main <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Demo-Reuse-Action-From-Another-Repo.yml" target="_blank">ZhgChgLi/github-actions-ci-cd-demo</a> repo,</strong> we will add a main <strong>workflow <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Demo-Reuse-Action-From-Another-Repo.yml" target="_blank">Demo-Reuse-Action-From-Another-Repo.yml</a>:</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Automation-label-pr-base-branch</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">opened</span><span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">call-label-pr-workflow</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Call Base Branch Label Workflow</span>
    <span class="c1"># ‚úÖ If the called workflow is in the same repo:</span>
    <span class="c1">#    uses: ./.github/workflows/Automation-label-pr-base-branch.yml</span>
    <span class="c1">#    Note: This syntax cannot specify branches (it always uses the caller workflow's branch)</span>
    <span class="c1">#    Reference examples:</span>
    <span class="c1">#    - CD-Deploy-Form.yml calls this repo workflow</span>
    <span class="c1">#    - CD-Deploy.yml calls cross-repo workflow</span>
    <span class="c1">#</span>
    <span class="c1"># ‚úÖ If the called workflow is in another repo:</span>
    <span class="c1">#    uses: {owner}/{repo}/.github/workflows/{file}.yml@{branch_or_tag}</span>
    <span class="c1">#    You can specify branch or tag</span>
    <span class="c1">#    ref: https://github.com/ZhgChgLi/github-actions-ci-cd-demo-share-actions/blob/main/.github/workflows/Automation-label-pr-base-branch.yml</span>
    <span class="na">uses</span><span class="pi">:</span> <span class="s">ZhgChgLi/github-actions-ci-cd-demo-share-actions/.github/workflows/Automation-label-pr-base-branch.yml@main</span>
    <span class="na">with</span><span class="pi">:</span>
      <span class="na">PR_NUMBER</span><span class="pi">:</span> <span class="s">${{ github.event.number }}</span>
      
    <span class="c1"># If all secrets need to inherit from the caller workflow, use `inherit`</span>
    <span class="c1"># secrets: inherit</span>
    <span class="c1">#</span>
    <span class="c1"># If only specific secrets need to be passed, specify them individually</span>
    <span class="na">secrets</span><span class="pi">:</span>
      <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
</pre></table></code></div></div><p>Try opening a PR after committing the file.</p><p><strong>Workflow: Main Repo‚Äôs <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Demo-Reuse-Action-From-Another-Repo.yml" target="_blank">Demo-Reuse-Action-From-Another-Repo.yml</a> ‚Üí Calls and passes parameters to another Repo‚Äôs <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo-share-actions/blob/main/.github/workflows/Automation-label-pr-base-branch.yml" target="_blank">Automation-label-pr-base-branch.yml</a> to execute tasks ‚Üí Returns to the main Repo to report results.</strong></p><p><a href="/assets/404bd5c70040/1*13bqlAgpBkHM7UthTJAuOg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*13bqlAgpBkHM7UthTJAuOg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTE5IiBoZWlnaHQ9IjQ1MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/404bd5c70040/1*CAF3HzS4PHBveDQYu3H73g.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*CAF3HzS4PHBveDQYu3H73g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MDIiIGhlaWdodD0iMTQ1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Success!</p><h4 id="private-repo-access-issues"><span class="me-2">Private Repo Access Issues</span><a href="#private-repo-access-issues" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Here, we need to note a security issue: Public Repos have no problems, but if the Reuse Workflow is within a Private Repo, access is only possible if <strong>it is within the same organization + the other Repo is also Private + permissions are set to allow</strong> = to access and use the Private Repo Reuse Workflow.</p><ul><li><code class="language-plaintext highlighter-rouge">Public ‚Äî ZhgChgLi/ReuseRepo</code> + <code class="language-plaintext highlighter-rouge">Private or Public ‚Äî ZhgChgLi or harry/myRepo</code> = ‚úÖ<li><code class="language-plaintext highlighter-rouge">Private ‚Äî ZhgChgLi/ReuseRepo</code> + <code class="language-plaintext highlighter-rouge">Private or Public ‚Äî harry/myRepo</code> = ‚ùå<li><code class="language-plaintext highlighter-rouge">Private ‚Äî ZhgChgLi/ReuseRepo</code> + <code class="language-plaintext highlighter-rouge">Public ‚Äî ZhgChgLi/anotherRepo</code> = ‚ùå<li><code class="language-plaintext highlighter-rouge">Private ‚Äî ZhgChgLi/ReuseRepo</code> + <code class="language-plaintext highlighter-rouge">Private ‚Äî ZhgChgLi/anotherRepo</code> = ‚úÖ</ul><p><strong>To set permissions, go to the Reuse Workflow Repo ‚Üí Settings ‚Üí Actions ‚Üí General ‚Üí Access:</strong></p><p><a href="/assets/404bd5c70040/1*iZCEifgyArTJS3URMSk01g.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*iZCEifgyArTJS3URMSk01g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MjUiIGhlaWdodD0iMzAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Change the selection to:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>Accessible from repositories in the 'ZhgChgLi' organization
Workflows in other repositories that are part of the 'ZhgChgLi' organization can access the actions and reusable workflows in this repository. Access is allowed only from private repositories.
</pre></table></code></div></div><p>Click ‚ÄúSave‚Äù to complete.</p><p><strong>If you do not have permission to access, the following error message will appear:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>Invalid workflow file: .github/workflows/Demo-reuse-action-from-another-repo.yml#L21
error parsing called workflow
<span class="s2">".github/workflows/Demo-reuse-action-from-another-repo.yml"</span>
-&gt; <span class="s2">"ZhgChgLi/github-actions-ci-cd-demo-share-actions/.github/workflows/Automation-label-pr-base-branch.yml@main"</span>
: workflow was not found.
</pre></table></code></div></div><h3 id="github-actions-script-syntax-supplement"><span class="me-2">GitHub Actions Script Syntax Supplement</span><a href="#github-actions-script-syntax-supplement" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Here‚Äôs a supplement regarding the <code class="language-plaintext highlighter-rouge">${{ XXX }}</code> or <code class="language-plaintext highlighter-rouge">${XXX}</code> or <code class="language-plaintext highlighter-rouge">$XXX</code> variable syntax that might confuse some.</p><p><strong>Demo-Env-Vars- .yml:</strong></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Demo-Env-Vars</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">print-env-vars</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">print-env</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">env</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">context-vars-vs-vars</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">SAY_MY_NAME</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Heisenberg"</span>
          <span class="c1"># GitHub Actions Context expression, as explained below</span>
          <span class="na">FROM_REF</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s"># Shell Script:</span>
          <span class="s"># Referencing custom injected ENV variable content</span>
          <span class="s"># ${SAY_MY_NAME} or $SAY_MY_NAME both work</span>
          <span class="s"># ${XX} is more useful for string concatenation:</span>
          <span class="s">echo "HI: ${SAY_MY_NAME}"</span>
          
          <span class="s"># üí° GitHub Actions Context expression</span>
          <span class="s"># This is not a shell variable, but a value replaced by GitHub Actions during the YAML parsing phase</span>
          <span class="s"># ‚ö† Will fail if executed locally or outside of GitHub Actions environment</span>
          <span class="s"># üîó https://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>
          <span class="s">BRANCH_NAME_FROM_CONTEXT="${{ github.ref }}"</span>
          
          <span class="s"># üí° GitHub Actions runtime environment variables</span>
          <span class="s"># These variables are automatically injected by GitHub Actions when the runner executes the shell</span>
          <span class="s"># ‚úÖ In other environments, you can use export or ENV to predefine the same variables</span>
          <span class="s"># üîó https://docs.github.com/en/actions/learn-github-actions/environment-variables</span>
          <span class="s">BRANCH_NAME_FROM_ENV_VARS="${GITHUB_REF}"</span>
          
          <span class="s">echo "FROM_REF: ${FROM_REF}"</span>
          <span class="s">echo "BRANCH_NAME_FROM_CONTEXT: ${BRANCH_NAME_FROM_CONTEXT}"</span>
          <span class="s">echo "BRANCH_NAME_FROM_ENV_VARS: ${BRANCH_NAME_FROM_ENV_VARS}"</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">print-github-script-env</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">SAY_MY_NAME</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Heisenberg"</span>
          <span class="c1"># GitHub Actions Context expression, as explained above</span>
          <span class="na">FROM_REF</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${{</span><span class="nv"> </span><span class="s">github.ref</span><span class="nv"> </span><span class="s">}}"</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">// GitHub Script: (JavaScript (Node.js)):</span>
            <span class="s">// Retrieve ENV values from process.env</span>
            <span class="s">console.log(`HI: ${process.env.SAY_MY_NAME}`);</span>
            <span class="s">console.log(`FROM_REF: ${process.env.FROM_REF}`);</span>
            <span class="s">// In github-script, context variables are automatically injected for direct reference in JavaScript</span>
            <span class="s">// https://docs.github.com/en/actions/learn-github-actions/contexts#github-context</span>
            <span class="s">const branch_name_from_context_vars = context.ref;</span>
            <span class="s">console.log(`branch_name_from_context_vars: ${branch_name_from_context_vars}`);</span>
            <span class="s">// You can also use GitHub Actions Context expression (though it‚Äôs not very meaningful):</span>
            <span class="s">const branch_name_from_context = "${{ github.ref }}";</span>
            <span class="s">console.log(`branch_name_from_context: ${branch_name_from_context}`);</span>
            
            <span class="s">for (const [key, value] of Object.entries(process.env)) {</span>
              <span class="s">console.log(`${key}=${value}`);</span>
            <span class="s">}</span>
            <span class="s">// The github object in github-script is an Octokit REST API instance</span>
            <span class="s">// Used to interact with the GitHub API</span>
            <span class="s">// For example:</span>
            <span class="s">// await github.rest.pulls.list({</span>
            <span class="s">//   owner: context.repo.owner,</span>
            <span class="s">//   repo: context.repo.repo,</span>
            <span class="s">//   state: "open"</span>
            <span class="s">// });</span>
      <span class="c1"># gh CLI does NOT use GITHUB_TOKEN by default; requires GH_TOKEN</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">gh CLI without GH_TOKEN (expected to fail)</span>
        <span class="na">continue-on-error</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">PR_COUNT=$(gh pr list --repo $GITHUB_REPOSITORY --json number --jq 'length')</span>
          <span class="s">echo "Found $PR_COUNT open pull requests"</span>
      
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">gh CLI with GH_TOKEN (expected to succeed)</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="c1"># Assign GH_TOKEN so gh CLI can authenticate</span>
          <span class="c1"># https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows</span>
          <span class="na">GH_TOKEN</span><span class="pi">:</span> <span class="s">${{ secrets.GITHUB_TOKEN }}</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">PR_COUNT=$(gh pr list --repo $GITHUB_REPOSITORY --json number --jq 'length')</span>
          <span class="s">echo "Found $PR_COUNT open pull requests"</span>
      
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">github-script auto-authentication (no GH_TOKEN needed)</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/github-script@v7</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">// github = Octokit REST client (auto-authenticated with GITHUB_TOKEN)</span>
            <span class="s">const pulls = await github.rest.pulls.list({</span>
              <span class="s">owner: context.repo.owner,</span>
              <span class="s">repo: context.repo.repo,</span>
              <span class="s">state: "open"</span>
            <span class="s">});</span>
            <span class="s">console.log(`Found ${pulls.data.length} open pull requests`);</span>
</pre></table></code></div></div><h4 id="--xxx---github-actions-context-expression"><span class="me-2">${ { XXX } } GitHub Actions Context Expression</span><a href="#--xxx---github-actions-context-expression" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*e3jpPuwdmf005cjbaXjAwQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*e3jpPuwdmf005cjbaXjAwQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3ODkiIGhlaWdodD0iNjg0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/404bd5c70040/1*ed5Wm7Xk48xuP8yQzHpJ9w.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*ed5Wm7Xk48xuP8yQzHpJ9w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4ODAiIGhlaWdodD0iODAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><code class="language-plaintext highlighter-rouge">${{ XXX }}</code> is a GitHub Actions Context expression, <strong>which is replaced by GitHub Actions with the corresponding value during the YAML parsing phase</strong> (as shown in the above image <code class="language-plaintext highlighter-rouge">BRANCH_NAME_FROM_CONTEXT</code>)<li>For a complete list of usable expressions, refer to the official documentation <a href="https://docs.github.com/en/actions/learn-github-actions/contexts#github-context" target="_blank">here</a><li><code class="language-plaintext highlighter-rouge">${XXX}</code> or <code class="language-plaintext highlighter-rouge">$XXX</code> are real environment variables, and <code class="language-plaintext highlighter-rouge">${XXX}</code> is more useful for string concatenation<li>GitHub Actions automatically injects some environment variables; for a complete list, refer to the official documentation <a href="https://docs.github.com/en/actions/learn-github-actions/environment-variables" target="_blank">here</a></ul><h4 id="actionsgithub-scriptv7"><span class="me-2">actions/github-script@v7</span><a href="#actionsgithub-scriptv7" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*TjJQnlAAU3VRwS9_dFz1yA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*TjJQnlAAU3VRwS9_dFz1yA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MTgiIGhlaWdodD0iOTEzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="/assets/404bd5c70040/1*5bHEdjrGsVdWnYSQgpnsZA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*5bHEdjrGsVdWnYSQgpnsZA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDE4IiBoZWlnaHQ9IjExNTAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><ul><li>In <code class="language-plaintext highlighter-rouge">github-script</code>, you can also use <code class="language-plaintext highlighter-rouge">${{ XXX }}</code> as a GitHub Actions Context expression, but it‚Äôs not very meaningful; because <strong>in the github-script environment, context variables are automatically injected for direct reference in JavaScript</strong><li>The <code class="language-plaintext highlighter-rouge">github</code> object in <code class="language-plaintext highlighter-rouge">github-script</code> is an Octokit REST API instance<li><code class="language-plaintext highlighter-rouge">github-script</code> can also inject variables from <code class="language-plaintext highlighter-rouge">env:</code>, but you need to access them using <code class="language-plaintext highlighter-rouge">${process.env.xxx}</code><li>Some environment variables are also automatically injected; for a complete list, refer to the official documentation <a href="https://docs.github.com/en/actions/learn-github-actions/environment-variables" target="_blank">here</a> using <code class="language-plaintext highlighter-rouge">${process.env.xxx}</code>; but since context variables are already available, accessing them from there is not very meaningful.</ul><p><a href="/assets/404bd5c70040/1*oW85Sju0sN4caXiaLSg32A.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*oW85Sju0sN4caXiaLSg32A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MzUiIGhlaWdodD0iNDA4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><code class="language-plaintext highlighter-rouge">github-script</code> automatically includes <code class="language-plaintext highlighter-rouge">github-token</code>, no need to specify.</ul><h4 id="gh-cli-gh_token"><span class="me-2">gh cli GH_TOKEN</span><a href="#gh-cli-gh_token" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*NUfaaKIobZWVBuXrGg0TPw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*NUfaaKIobZWVBuXrGg0TPw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NjYiIGhlaWdodD0iNDMxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li>When using <code class="language-plaintext highlighter-rouge">gh cli</code> in GitHub Actions Shell Script, you need to specify the <code class="language-plaintext highlighter-rouge">GH_TOKEN</code> parameter.<li>You can directly use the default Token ‚Äî <code class="language-plaintext highlighter-rouge">secrets.GITHUB_TOKEN</code> (automatically generated during GitHub Actions execution).<li><strong>The default Token has some basic permissions; if the command you want to execute does not have enough permissions, you will need to use a <a href="https://docs.github.com/en/actions/how-tos/security-for-github-actions/security-guides/use-github_token-in-workflows" target="_blank">Personal Access Token</a>. It is recommended to create a PAT using a shared account for team use.</strong></ul><p><strong>Complete code: <a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo/blob/main/.github/workflows/Demo-Env-Vars-.yml" target="_blank">Demo-Env-Vars- .yml</a></strong></p><p>GitHub Actions has been developed; the next step is to replace the GitHub Hosted Runner with our own Self-hosted Runner.</p><blockquote><p><em>GitHub Hosted Runner has a free quota of 2,000 minutes per month (starting), running such small automation tasks doesn‚Äôt take much time, and since it runs on Linux machines, the cost is very low, possibly not even reaching the free limit; <strong>there‚Äôs no need to switch to a Self-hosted Runner</strong>. Changing the Runner also requires ensuring the Runner environment is correct (for example, GitHub Hosted Runner comes with gh cli, while self-hosted Runner needs to have it installed properly), <strong>this article is purely for educational purposes to demonstrate the switch</strong>.</em></p></blockquote><blockquote><p><em>If it‚Äôs for executing CI/CD tasks, then using a Self-hosted Runner is necessary.</em></p></blockquote><h4 id="adding-a-self-hosted-runner"><span class="me-2">Adding a Self-hosted Runner</span><a href="#adding-a-self-hosted-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p><em>This article uses <strong>macOS M1</strong> as an example.</em></p></blockquote><p><a href="/assets/404bd5c70040/1*mEInaj-tLaprMAa2OfowCw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*mEInaj-tLaprMAa2OfowCw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjExMTMiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><ul><li>Settings ‚Üí Actions ‚Üí Runners ‚Üí New self-hosted runner.<li><strong>Runner image:</strong> macOS<li><strong>Architecture:</strong> For M1, remember to select ARM64 for faster execution.</ul><p><strong>Open a Terminal on your physical computer.</strong></p><p><strong>Follow the Download steps to complete on your local computer:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c"># Create a Runner directory at your desired path</span>
<span class="nb">mkdir </span>actions-runner <span class="o">&amp;&amp;</span> <span class="nb">cd </span>actions-runner
<span class="c"># Download the Runner image</span>
curl <span class="nt">-o</span> actions-runner-osx-x64-2.325.0.tar.gz <span class="nt">-L</span> https://github.com/actions/runner/releases/download/v2.325.0/actions-runner-osx-x64-2.325.0.tar.gz

<span class="c"># Optional: Validate the hash</span>
<span class="nb">echo</span> <span class="s2">"0562bd934b27ca0c6d8a357df00809fbc7b4d5524d4aeb6ec152e14fd520a4c3  actions-runner-osx-x64-2.325.0.tar.gz"</span> | shasum <span class="nt">-a</span> 256 <span class="nt">-c</span>

<span class="c"># Unzip</span>
<span class="nb">tar </span>xzf ./actions-runner-osx-x64-2.325.0.tar.gz
</pre></table></code></div></div><blockquote><p><em>The above is just a reference; it is recommended to follow the steps on your settings page to ensure you have the latest version of the Runner image.</em></p></blockquote><p><a href="/assets/404bd5c70040/1*Q0k0EPjrY2V4owseESe5lg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Q0k0EPjrY2V4owseESe5lg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTYxIiBoZWlnaHQ9IjE5NyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><strong>Configure Settings:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># Please refer to the commands on the settings page; the token will change over time</span>
./config.sh <span class="nt">--url</span> https://github.com/ORG/REPO <span class="nt">--token</span> XXX
</pre></table></code></div></div><p>You will be prompted to enter:</p><ul><li>Enter the name of the runner group to add this runner to: [press Enter for Default] <strong>Just press Enter</strong> *Only runners registered at the organization level will have the group feature.<li>Enter the name of runner: [press Enter for ZhgChgLideMacBook-Pro] <strong>You can enter a desired runner name e.g.</strong> <code class="language-plaintext highlighter-rouge">app-runner-1</code> <strong>or just press Enter</strong><li>This runner will have the following labels: ‚Äòself-hosted‚Äô, ‚ÄòmacOS‚Äô, ‚ÄòX64‚Äô Enter any additional labels (ex. label-1,label-2): [press Enter to skip] <strong>Enter the desired runner label; you can add multiple custom labels for easier future use.</strong> As mentioned earlier, GitHub Actions/Runner finds tasks based on corresponding labels, <strong>if you only use the default label, the runner may pick up other runners in the organization to execute jobs, so it‚Äôs safest to create a custom one.</strong> I randomly set a label <code class="language-plaintext highlighter-rouge">self-hosted-zhgchgli</code>.<li>Enter name of work folder: [press Enter for _work] <strong>Just press Enter</strong></ul><p>When you see ‚àö Settings Saved, it means the setup is complete.</p><p><a href="/assets/404bd5c70040/1*yxLfii0rWhzsiFuYVmPgFw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*yxLfii0rWhzsiFuYVmPgFw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MjkiIGhlaWdodD0iNTAxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Start the Runner:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>./run.sh
</pre></table></code></div></div><p>When you see ‚àö Connected to GitHub, Listening for Jobs, it means it is now listening for Actions tasks:</p><p><a href="/assets/404bd5c70040/1*1RmPPOosAoCxHA9tg_WE2w.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*1RmPPOosAoCxHA9tg_WE2w.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyOTAiIGhlaWdodD0iOTgiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><blockquote><p><strong><em>This Terminal window must remain open to continuously receive tasks.</em></strong></p></blockquote><blockquote><p><strong><em>üöÄüöÄüöÄ You can open multiple Terminals on the same computer in different directories to run multiple Runners.</em></strong></p></blockquote><p><strong>Returning to the Repo settings page, you can also see the Runner waiting for tasks:</strong></p><p><a href="/assets/404bd5c70040/1*jjq5NTPYMuC3gH3ey_VTtg.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*jjq5NTPYMuC3gH3ey_VTtg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDIiIGhlaWdodD0iMjQ3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Status:</strong></p><ul><li>Idle: Waiting for tasks<li>Active: A task is currently running<li>Offline: Runner is not online</ul><h4 id="workflow-github-actions-runner-switching-to-self-hosted-runner"><span class="me-2">Workflow (GitHub Actions) Runner Switching to Self-hosted Runner</span><a href="#workflow-github-actions-runner-switching-to-self-hosted-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Taking <code class="language-plaintext highlighter-rouge">Automation-PullRequest.yml</code> as an example:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c1"># Please refer to the previous text, omitted....</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">label-pr-by-file-count</span><span class="pi">:</span>
    <span class="c1"># Please refer to the previous text, omitted....</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">self-hosted-zhgchgli</span><span class="pi">]</span>
    <span class="c1"># Please refer to the previous text, omitted....</span>
  <span class="c1"># ---------</span>
  <span class="na">assign-self-if-no-assignee</span><span class="pi">:</span>
    <span class="c1"># Please refer to the previous text, omitted....</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">self-hosted-zhgchgli</span><span class="pi">]</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="c1"># Please refer to the previous text, omitted....</span>
</pre></table></code></div></div><p>After committing the file to the main branch of the repo, reopen the PR to trigger the validation of Actions.</p><p><strong>Back in the Runner Terminal, you can see that a new task has come in and is currently executing with the execution results:</strong></p><p><a href="/assets/404bd5c70040/1*Hu0DxKQbenPmBEw8swv65A.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*Hu0DxKQbenPmBEw8swv65A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MjgiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>It failed because my local computer does not have the <a href="https://github.com/cli/cli" target="_blank">gh cli</a> environment installed:</p><p><a href="/assets/404bd5c70040/1*9xguacdPATIeEZdbFszmHw.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*9xguacdPATIeEZdbFszmHw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NzMiIGhlaWdodD0iMTIzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>After installing gh on the physical computer using <code class="language-plaintext highlighter-rouge">brew install gh</code>, I triggered the execution again:</p><p><a href="/assets/404bd5c70040/1*TbkAt00K89Ysbix33dK8ZA.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*TbkAt00K89Ysbix33dK8ZA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MzEiIGhlaWdodD0iMjkiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>Success! Now this task is completely running on our own computer, without using GitHub Hosted Runner, and without incurring costs.</p><p><strong>We can click into the Action Log to see which Runner and machine the task is executing on:</strong></p><p><a href="/assets/404bd5c70040/1*oqLcWfn6cbWsCt9fVsrikQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*oqLcWfn6cbWsCt9fVsrikQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDkyIiBoZWlnaHQ9IjgyNiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><h4 id="runs-on--runner-label-setting"><span class="me-2">runs-on: [ <strong>Runner Label</strong> Setting</span><a href="#runs-on--runner-label-setting" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Here it is AND, not OR; GitHub Runner does not currently support OR selection of Runners for execution.</p><p>For example: <code class="language-plaintext highlighter-rouge">[self-hosted, macOS, app]</code> ‚Üí means the Runner must <strong>have all</strong> three Labels <code class="language-plaintext highlighter-rouge">self-hosted, macOS, app</code> to match and take on the task for execution.</p><p>If a Job wants to test results under different Runner environments simultaneously, you can use the <code class="language-plaintext highlighter-rouge">matrix</code> parameter:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">test</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">${{ matrix.runner }}</span>
    <span class="na">strategy</span><span class="pi">:</span>
      <span class="na">matrix</span><span class="pi">:</span>
        <span class="na">runner</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="pi">[</span><span class="nv">self-hosted</span><span class="pi">,</span> <span class="nv">linux</span><span class="pi">,</span> <span class="nv">high-memory</span><span class="pi">]</span>
          <span class="pi">-</span> <span class="pi">[</span><span class="nv">self-hosted</span><span class="pi">,</span> <span class="nv">macos</span><span class="pi">,</span> <span class="nv">xcode-15</span><span class="pi">]</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">echo "Running on ${{ matrix.runner }}"</span>
</pre></table></code></div></div><p>This way, this Job will run once in parallel on the following two Runner Labels:</p><ul><li>self-hosted, linux, high-memory<li>self-hosted, macos, xcode-15</ul><blockquote><p><strong><em>Currently, Runner does not support:</em></strong></p></blockquote><blockquote><p><em>- OR selection of Runners</em></p></blockquote><blockquote><p><em>- Runner weight settings</em></p></blockquote><h4 id="registering-runner-as-a-service"><span class="me-2">Registering Runner as a Service</span><a href="#registering-runner-as-a-service" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>You can refer to the official documentation on ‚Äú<a href="https://docs.github.com/en/actions/how-tos/hosting-your-own-runners/managing-self-hosted-runners/configuring-the-self-hosted-runner-application-as-a-service?platform=mac" target="_blank">Configuring the self-hosted runner application as a service</a>‚Äù to register the Runner directly as a system Service, allowing it to run in the background (without opening Terminal in the foreground) and automatically start after booting.</p><p>If you have multiple Runners, remember to adjust the ‚Äú<a href="https://docs.github.com/en/actions/how-tos/hosting-your-own-runners/managing-self-hosted-runners/configuring-the-self-hosted-runner-application-as-a-service?platform=mac#customizing-the-self-hosted-runner-service-1" target="_blank">Customizing the self-hosted runner service</a>‚Äù settings to register different names.</p><blockquote><p><em>I have a pending issue to research regarding iOS, <strong>which is that after switching to the background Service, I encountered an error during Archive (suspected to be related to keychain permissions)</strong>. At that time, I didn‚Äôt have time to resolve it, so I continued using the foreground Terminal Runner.</em></p></blockquote><p>If you want to achieve automatic startup on boot in the traditional foreground way, you need to add an automatic startup configuration file in <code class="language-plaintext highlighter-rouge">~/Library/LaunchAgents</code>:</p><p><code class="language-plaintext highlighter-rouge">actions.runner.REPO.RUNNER_NAME.plist</code>:</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span>
<span class="nt">&lt;plist</span> <span class="na">version=</span><span class="s">"1.0"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;dict&gt;</span>
  <span class="nt">&lt;key&gt;</span>Label<span class="nt">&lt;/key&gt;</span>
  <span class="nt">&lt;string&gt;</span>actions.runner.REPO.RUNNER_NAME<span class="nt">&lt;/string&gt;</span>
  <span class="c">&lt;!-- Specify Terminal.app to start --&gt;</span>
  <span class="nt">&lt;key&gt;</span>ProgramArguments<span class="nt">&lt;/key&gt;</span>
  <span class="nt">&lt;array&gt;</span>
   <span class="nt">&lt;string&gt;</span>/usr/bin/open<span class="nt">&lt;/string&gt;</span>
   <span class="nt">&lt;string&gt;</span>-a<span class="nt">&lt;/string&gt;</span>
   <span class="nt">&lt;string&gt;</span>Terminal<span class="nt">&lt;/string&gt;</span>
   <span class="nt">&lt;string&gt;</span>/Users/zhgchgli/Documents/actions-runner/run.sh<span class="nt">&lt;/string&gt;</span>
  <span class="nt">&lt;/array&gt;</span>
  <span class="nt">&lt;key&gt;</span>RunAtLoad<span class="nt">&lt;/key&gt;</span>
  <span class="nt">&lt;true/&gt;</span>
  <span class="nt">&lt;key&gt;</span>WorkingDirectory<span class="nt">&lt;/key&gt;</span>
  <span class="nt">&lt;string&gt;</span>/Users/zhgchgli/Documents/actions-runner<span class="nt">&lt;/string&gt;</span>
 <span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/plist&gt;</span>
</pre></table></code></div></div><blockquote><p><em>For those interested in delving deeper into DevOps, you can refer to the official <a href="https://docs.github.com/en/actions/concepts/runners/about-actions-runner-controller#scaling-runners" target="_blank">k8s Runner</a> documentation.</em></p></blockquote><h4 id="complete-project-repo"><span class="me-2">Complete Project Repo</span><a href="#complete-project-repo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://github.com/ZhgChgLi/github-actions-ci-cd-demo" target="_blank" class="img-link shimmer" ><img src="https://opengraph.githubassets.com/8b25f8eae56bc35c92b97c5d7e7834aa5cb87673e718a1ce829f5bb80f3edebb/ZhgChgLi/github-actions-ci-cd-demo" alt="" loading="lazy"></a></p><h3 id="official-documentation"><span class="me-2">Official Documentation</span><a href="#official-documentation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://docs.github.com/en/actions/get-started/quickstart" target="_blank" class="img-link shimmer" ><img src="https://docs.github.com/assets/cb-345/images/social-cards/actions.png" alt="" loading="lazy"></a></p><p>For more detailed setup methods, be sure to refer to the official manual.</p><h4 id="ai-can-help"><span class="me-2">AI Can Help!</span><a href="#ai-can-help" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/404bd5c70040/1*JecNUCqujV1oeAvHA14X-g.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*JecNUCqujV1oeAvHA14X-g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTE0IiBoZWlnaHQ9IjExNDAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>In practice, providing ChatGPT with the complete steps and timing can help you write GitHub Actions ready for direct use!</p><h3 id="summary-1"><span class="me-2">Summary</span><a href="#summary-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Now you should have a certain understanding of GitHub Actions + Self-hosted Runner. In the next article, I will start building the entire process step-by-step using App (iOS) CI/CD as a case study.</p><h3 id="series-articles"><span class="me-2">Series Articles:</span><a href="#series-articles" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><a href="/posts/zrealm-dev/en/ci-cd-practical-guide-part-1-what-is-ci-cd-how-to-build-a-stable-and-efficient-development-team-through-ci-cd-tool-selection-c008a9e8ceca/"><strong>CI/CD Practical Guide (1): What is CI/CD? How to build a stable and efficient development team through CI/CD? Tool selection?</strong></a><li><a href="/posts/zrealm-dev/en/ci-cd-practical-guide-part-2-comprehensive-guide-to-using-and-building-github-actions-and-self-hosted-runners-404bd5c70040/"><strong>CI/CD Practical Guide (2): Comprehensive use and construction of GitHub Actions and self-hosted Runners</strong></a><li><a href="/posts/zrealm-dev/en/ci-cd-practical-guide-3-implementing-ios-app-ci-and-cd-workflows-using-github-actions-4b001d2e8440/"><strong>CI/CD Practical Guide (3): Implementing CI and CD workflows for App projects using GitHub Actions</strong></a><li><a href="/posts/zrealm-dev/en/ci-cd-practical-guide-part-4-building-a-free-and-user-friendly-packaging-tool-platform-with-google-apps-script-web-app-and-github-actions-4273e57e7148/"><strong>CI/CD Practical Guide (4): Using Google Apps Script Web App to connect GitHub Actions to build a free and easy-to-use packaging tool platform</strong></a></ul><h4 id="buy-me-a-coffee"><span class="me-2"><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank">Buy me a coffee</a></span><a href="#buy-me-a-coffee" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank"><strong><em>This series of articles has taken a significant amount of time and effort to write. If the content has been helpful to you and has made a tangible improvement in your team‚Äôs work efficiency and product quality, feel free to buy me a coffee as a token of appreciation!</em></strong></a></p></blockquote><p><a href="/assets/404bd5c70040/1*QJj54G9gOjtQS-rbHVT1SQ.webp" class="popup img-link blur"><img data-src="/assets/404bd5c70040/1*QJj54G9gOjtQS-rbHVT1SQ.webp" alt="[Buy me a coffee](https://www.buymeacoffee.com/zhgchgli){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MDAiIGhlaWdodD0iNzAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank">Buy me a coffee</a></p><p>If you have any questions or suggestions, feel free to <a href="https://www.zhgchg.li/contact" target="_blank">contact me</a>.</p><hr /><p>This article was first published on Medium ‚û°Ô∏è <a href="https://medium.com/p/404bd5c70040" target="_blank"><strong>Click Here</strong></a></p><p>Automatically converted and synchronized using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a> and <a href="https://github.com/ZhgChgLi/medium-to-jekyll-starter.github.io" target="_blank">Medium-to-jekyll-starter</a>.</p><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/en/zmediumtomarkdown/2025-07-02-404bd5c70040.md" target="_blank">Improve this page on Github.</a></p><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=üç∫&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a></p><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); border-bottom: 1px solid var(--main-border-color);transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1K+ Followers</span></a></div><div style="font-size: 0.8em; cursor:default; text-align: right;"> 193 <span style="font-size: 0.9em;">Total Views</span><br /> <span style="font-size: 0.8em;">Last Statistics Date: 2025-08-17 | 181 Views on <a href="https://medium.com/p/404bd5c70040" target="_blank">Medium.</a></span></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/cicd/" class="post-tag no-text-decoration" >cicd</a> <a href="/tags/github-actions/" class="post-tag no-text-decoration" >github-actions</a> <a href="/tags/github/" class="post-tag no-text-decoration" >github</a> <a href="/tags/self-hosted/" class="post-tag no-text-decoration" >self-hosted</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=CI/CD%20Practical%20Guide%20(Part%202):%20Comprehensive%20Guide%20to%20Using%20and%20Building%20GitHub%20Actions%20and%20Self-hosted%20Runners%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fci-cd-practical-guide-part-2-comprehensive-guide-to-using-and-building-github-actions-and-self-hosted-runners-404bd5c70040%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=CI/CD%20Practical%20Guide%20(Part%202):%20Comprehensive%20Guide%20to%20Using%20and%20Building%20GitHub%20Actions%20and%20Self-hosted%20Runners%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fci-cd-practical-guide-part-2-comprehensive-guide-to-using-and-building-github-actions-and-self-hosted-runners-404bd5c70040%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fci-cd-practical-guide-part-2-comprehensive-guide-to-using-and-building-github-actions-and-self-hosted-runners-404bd5c70040%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/apple-watch-%E7%B1%B3%E8%98%AD%E9%8C%B6%E5%B8%B6%E9%96%8B%E7%AE%B1-%E5%8E%9F%E5%BB%A0%E4%B8%8D%E9%8F%BD%E9%8B%BC%E7%9F%B3%E5%A2%A8%E8%89%B2%E5%84%AA%E7%BC%BA%E9%BB%9E%E5%85%A8%E8%A7%A3%E6%9E%90-c0f99f987d9c/">Apple Watch ÂéüÂª†‰∏çÈèΩÈãºÁ±≥Ëò≠Èå∂Â∏∂ÈñãÁÆ±</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%87%9C%E5%B1%B1%E8%87%AA%E7%94%B1%E8%A1%8C%E6%94%BB%E7%95%A5-8%E5%A4%A97%E5%A4%9C%E5%BF%85%E5%8E%BB%E6%99%AF%E9%BB%9E-%E7%BE%8E%E9%A3%9F%E8%88%87%E4%BA%A4%E9%80%9A%E5%85%A8%E8%A7%A3%E6%9E%90-%E9%87%9C%E5%B1%B1%E9%80%9A%E8%A1%8C%E8%AD%89%E7%9C%81%E9%8C%A2%E7%A7%98%E8%A8%A3-8ace34a1a3d8/">ÈÅäË®ò 2025 ÈüìÂúãÈáúÂ±± 8 Â§© 7 Â§úËá™Áî±Ë°å</a><li class="text-truncate lh-lg"> <a href="/posts/z-travel-diaries/en/travel-diary-8-days-and-7-nights-in-busan-south-korea-2025-8ace34a1a3d8/">Travel Diary: 8 Days and 7 Nights in Busan, South Korea 2025</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E5%90%8D%E5%8F%A4%E5%B1%8B%E4%B8%80%E6%97%A5%E5%BF%AB%E9%96%83%E8%87%AA%E7%94%B1%E8%A1%8C-%E6%A8%82%E6%A1%83%E8%88%AA%E7%A9%BA%E7%B4%85%E7%9C%BC%E7%8F%AD%E6%A9%9F%E7%9C%81%E9%8C%A2%E6%94%BB%E7%95%A5%E8%88%87%E8%A1%8C%E7%A8%8B%E8%A6%8F%E5%8A%83-7b8a0563c157/">ÈÅäË®ò 9/11 ÂêçÂè§Â±ã‰∏ÄÊó•Âø´ÈñÉËá™Áî±Ë°å</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E4%B9%9D%E5%B7%9E%E8%87%AA%E7%94%B1%E8%A1%8C%E6%94%BB%E7%95%A5-%E7%A6%8F%E5%B2%A1-%E9%95%B7%E5%B4%8E-%E7%86%8A%E6%9C%AC10%E6%97%A5%E7%8D%A8%E6%97%85%E5%85%A8%E7%B4%80%E9%8C%84%E8%88%87%E4%BA%A4%E9%80%9A%E4%BD%8F%E5%AE%BF%E5%AF%A6%E6%88%B0%E7%B6%93%E9%A9%97-d78e0b15a08a/">ÈÅäË®ò 2023 ‰πùÂ∑û 10 Êó•Ëá™Áî±Ë°åÁç®ÊóÖ</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">ÁîüÊ¥ª</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Á´†ÁØÄ (Chapters)üîñ</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1751458952" data-df="ll" > Jul 2, 2025 </time><h4 class="pt-0 my-2">CI/CD ÂØ¶Êà∞ÊåáÂçóÔºà‰∫åÔºâÔºöGitHub Actions Ëàá Self-hosted Runner ‰ΩøÁî®ËàáÂª∫ÁΩÆÂ§ßÂÖ®</h4><div class="text-muted"><p>Â∏∂ÊÇ®ÂæûÈ†≠‰∫ÜËß£ GitHub Actions/Self-hosted Runner ÈÅã‰ΩúÊñπÂºèËàáÊâãÊääÊâã‰ΩøÁî®ÊïôÂ≠∏„ÄÇ</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/%E7%84%A1%E7%97%9B%E8%BD%89%E7%A7%BB-medium-%E6%96%87%E7%AB%A0%E5%88%B0%E8%87%AA%E6%9E%B6-jekyll-%E9%9D%9C%E6%85%8B%E7%B6%B2%E7%AB%99-%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E8%88%87%E8%87%AA%E5%8B%95%E5%90%8C%E6%AD%A5%E6%95%99%E5%AD%B8-a0c08d579ab1/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1657987247" data-df="ll" > Jul 17, 2022 </time><h4 class="pt-0 my-2">ÁÑ°ÁóõËΩâÁßª Medium ÊñáÁ´†Âà∞Ëá™Êû∂ Jekyll ÈùúÊÖãÁ∂≤Á´ôÔΩúÂø´ÈÄüÈÉ®ÁΩ≤ËàáËá™ÂãïÂêåÊ≠•ÊïôÂ≠∏</h4><div class="text-muted"><p>Ëß£Ê±∫ Medium ÊñáÁ´†ÁÑ°Ê≥ïËá™‰∏ªÊéåÊéßÁöÑÁóõÈªûÔºåÈÄèÈÅé Jekyll Ëàá Github Pages Êê≠Âª∫ÈùúÊÖãÁ∂≤Á´ôÔºåÂØ¶ÁèæÂø´ÈÄüËºâÂÖ•ËàáÂÆ¢Ë£ΩÂåñÂäüËÉΩÔºå‰∏¶Âà©Áî® Github Actions Ëá™ÂãïÂêåÊ≠• Medium ÊñáÁ´†ÔºåÁ¢∫‰øùÂÖßÂÆπÂÆâÂÖ®ËàáÊµÅÊö¢Èñ±ËÆÄÈ´îÈ©ó„ÄÇ</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/en/seamless-migration-from-medium-to-self-hosted-website-a0c08d579ab1/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1657987247" data-df="ll" > Jul 17, 2022 </time><h4 class="pt-0 my-2">Seamless Migration from Medium to Self-Hosted Website</h4><div class="text-muted"><p>Migrating Medium content to GitHub Pages (with Jekyll/Chirpy)</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/ci-cd-%E6%98%AF%E4%BB%80%E9%BA%BC-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A9%A9%E5%AE%9A%E9%96%8B%E7%99%BC%E5%9C%98%E9%9A%8A%E7%9A%84%E9%97%9C%E9%8D%B5%E6%B5%81%E7%A8%8B%E8%88%87%E5%B7%A5%E5%85%B7%E9%81%B8%E6%93%87-c008a9e8ceca/" class="btn btn-outline-primary" aria-label="Older" ><p>CI/CD ÊòØ‰ªÄÈ∫ºÔΩúÊâìÈÄ†È´òÊïàÁ©©ÂÆöÈñãÁôºÂúòÈöäÁöÑÈóúÈçµÊµÅÁ®ãËàáÂ∑•ÂÖ∑ÈÅ∏Êìá</p></a> <a href="/posts/zrealm-dev/github-actions-self-hosted-runner-%E8%A9%B3%E8%A7%A3%E8%88%87%E5%AF%A6%E6%88%B0%E6%A1%88%E4%BE%8B-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%BB%BA%E7%BD%AE-404bd5c70040/" class="btn btn-outline-primary" aria-label="Newer" ><p>CI/CD ÂØ¶Êà∞ÊåáÂçóÔºà‰∫åÔºâÔºöGitHub Actions Ëàá Self-hosted Runner ‰ΩøÁî®ËàáÂª∫ÁΩÆÂ§ßÂÖ®</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>¬© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a><br/>Last updated: 2025-08-18 13:50:35 +08:00</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">ÁîüÊ¥ª</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
