<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="The APP Uses HTTPS for Transmission, But Data Still Gets Stolen." /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="Using mitmproxy for man-in-the-middle attacks to sniff API data transmission on iOS and macOS." /><meta property="og:description" content="Using mitmproxy for man-in-the-middle attacks to sniff API data transmission on iOS and macOS." /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/en/the-app-uses-https-for-transmission-but-data-still-gets-stolen-46410aaada00/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/en/the-app-uses-https-for-transmission-but-data-still-gets-stolen-46410aaada00/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/46410aaada00/1*VTtl6EUMOTV4oRNUjRQHNg.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-09-20T18:01:01+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/46410aaada00/1*VTtl6EUMOTV4oRNUjRQHNg.webp" /><meta property="twitter:title" content="The APP Uses HTTPS for Transmission, But Data Still Gets Stolen." /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://medium.com/@zhgchgli/"},"dateModified":"2024-04-13T15:56:08+08:00","datePublished":"2019-09-20T18:01:01+08:00","description":"Using mitmproxy for man-in-the-middle attacks to sniff API data transmission on iOS and macOS.","headline":"The APP Uses HTTPS for Transmission, But Data Still Gets Stolen.","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iNDc3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+","url":"https://zhgchg.li/assets/46410aaada00/1*VTtl6EUMOTV4oRNUjRQHNg.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/en/the-app-uses-https-for-transmission-but-data-still-gets-stolen-46410aaada00/"},"url":"https://zhgchg.li/posts/zrealm-dev/en/the-app-uses-https-for-transmission-but-data-still-gets-stolen-46410aaada00/"}</script><title>The APP Uses HTTPS for Transmission, But Data Still Gets Stolen. | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0"> <a href="https://medium.com/@zhgchgli" target="_blank" style="display: block;text-align: center;font-style: normal;/* text-decoration: underline; */font-size: 1.2em;color: var(--heading-color);">1K+ Followers on Medium</a> An iOS, web, and automation developer from Taiwan 🇹🇼 who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>The APP Uses HTTPS for Transmission, But Data Still Gets Stolen.</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>The APP Uses HTTPS for Transmission, But Data Still Gets Stolen.</h1><p class="post-desc fw-light mb-4">Using mitmproxy for man-in-the-middle attacks to sniff API data transmission on iOS and macOS.</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1568973661" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Sep 20, 2019 </time> </span> <span> Updated <time data-ts="1712994968" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 13, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/assets/46410aaada00/1*VTtl6EUMOTV4oRNUjRQHNg.webp" class="popup img-link preview-img blur"><img data-src="/assets/46410aaada00/1*VTtl6EUMOTV4oRNUjRQHNg.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iNDc3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://medium.com/@zhgchgli/">ZhgChgLi</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1969 words" > <em>10 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">The APP Uses HTTPS for Transmission, But Data Still Gets Stolen.</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">章節 (Chapters)🔖</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">The APP Uses HTTPS for Transmission, But Data Still Gets Stolen.</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><hr /><h3 id="ℹ️ℹ️ℹ️-the-following-content-is-translated-by-openai"><span class="me-2">ℹ️ℹ️ℹ️ The following content is translated by OpenAI.</span><a href="#ℹ️ℹ️ℹ️-the-following-content-is-translated-by-openai" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="click-here-to-view-the-original-chinese-version--點此查看本文中文版"><span class="me-2"><a href="/posts/46410aaada00/">Click here</a> to view the original Chinese version. | <a href="/posts/46410aaada00/">點此查看本文中文版</a></span><a href="#click-here-to-view-the-original-chinese-version--點此查看本文中文版" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><h3 id="the-app-uses-https-for-transmission-but-data-still-gets-stolen"><span class="me-2">The APP Uses HTTPS for Transmission, But Data Still Gets Stolen.</span><a href="#the-app-uses-https-for-transmission-but-data-still-gets-stolen" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>This article provides a tutorial on using mitmproxy for man-in-the-middle attacks to sniff API data transmission on iOS and macOS, as well as how to prevent such attacks.</p><h3 id="introduction"><span class="me-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Recently, we held an internal <a href="/posts/zrealm-dev/en/how-to-create-an-engaging-engineering-ctf-competition-729d7b6817a4/">CTF competition</a> at my company. While brainstorming topics, I recalled a project I worked on during college when I was involved in backend development (PHP). It was a point-collection APP that had a task list, and upon completing certain conditions, it would call an API to earn points. My boss believed that calling the API over HTTPS encrypted the data, making it secure—until I demonstrated a man-in-the-middle attack, directly sniffing the transmitted data and spoofing API calls to earn points…</p><p>Moreover, in recent years, the rise of big data has led to a proliferation of web crawlers; the battle between crawlers and defenses has become increasingly intense, with <a href="https://coolcao.com/2018/06/09/tips-of-anti-spider-in-fe/" target="_blank">numerous tricks emerging in the battle between crawling and anti-crawling</a>. It can only be said that as the techniques improve, so do the countermeasures!</p><p>Crawlers also target APP APIs, and without any defenses, it’s almost like leaving the door wide open; they are not only easy to operate but also have clean formats that are harder to identify and block. Therefore, if the web version has already exhausted all efforts to block access, yet data is still being crawled, it might be worth checking if there are any vulnerabilities in the APP’s API.</p><p>Since I wasn’t sure how to present this topic in the CTF competition, I decided to write an article to document it. This piece is just a basic overview—<a href="http://www.aqee.net/post/man-in-the-middle-attack.html" target="_blank">HTTPS can decrypt transmitted content through certificate replacement</a> and how to enhance security to prevent such attacks. The actual network theory isn’t my strong suit, and I’ve already returned that knowledge to my teachers. If you already have a grasp of this topic, you can skip this article or scroll down to see how to protect your APP!</p><h3 id="practical-operation"><span class="me-2">Practical Operation</span><a href="#practical-operation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Environment: MacOS + iOS</p><blockquote><p><em>Android users can directly download <a href="https://play.google.com/store/apps/details?id=app.greyshirts.sslcapture&amp;hl=en" target="_blank">Packet Capture</a> (free), while iOS users can use <a href="https://apps.apple.com/us/app/surge-3/id1442620678" target="_blank">Surge 4</a> (paid) to unlock man-in-the-middle attack features. MacOS users can also use another paid software, Charles.</em></p></blockquote><blockquote><p><em>This article mainly explains how to operate using the <strong>free</strong> mitmproxy on iOS. If you have the above environment, you can simply open the APP on your phone and mount a VPN to replace the certificate for the man-in-the-middle attack! (Again, please scroll down to see how to protect it!)</em></p></blockquote><p><strong>[2021/02/25 Update]:</strong> A new free graphical interface program for Mac, ( <a href="https://proxyman.io/" target="_blank">Proxyman</a> ), is available, which can be used in conjunction with <a href="/posts/zrealm-dev/en/automating-routine-tasks-with-python-google-cloud-platform-line-bot-70a1409b149a/">the first part of this article</a>.</p><h4 id="install-mitmproxy"><span class="me-2">Install <a href="https://mitmproxy.org" target="_blank">mitmproxy</a></span><a href="#install-mitmproxy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>Install directly using brew</strong>:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>brew <span class="nb">install </span>mitmproxy
</pre></table></code></div></div><p><strong>Installation complete!</strong></p><p><em>p.s. If you encounter “brew: command not found,” please first install the <a href="https://brew.sh/index_zh-tw" target="_blank">brew</a> package management tool</em>:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>/usr/bin/ruby <span class="nt">-e</span> <span class="s2">"</span><span class="si">$(</span>curl <span class="nt">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/master/install<span class="si">)</span><span class="s2">"</span>
</pre></table></code></div></div><h4 id="using-mitmproxy"><span class="me-2">Using mitmproxy</span><a href="#using-mitmproxy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>After installation, enter the following command in Terminal to activate:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>mitmproxy
</pre></table></code></div></div><p><a href="/assets/46410aaada00/1*VTtl6EUMOTV4oRNUjRQHNg.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*VTtl6EUMOTV4oRNUjRQHNg.webp" alt="Startup Successful" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iNDc3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Startup successful.</p><h4 id="ensure-the-phone-and-mac-are-on-the-same-local-network--obtain-macs-ip-address"><span class="me-2">Ensure the Phone and Mac Are on the Same Local Network &amp; Obtain Mac’s IP Address</span><a href="#ensure-the-phone-and-mac-are-on-the-same-local-network--obtain-macs-ip-address" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Method (1): Connect Mac to WiFi, and have the phone use the same WiFi. <strong>Mac’s IP Address =</strong> “System Preferences” -&gt; “Network” -&gt; “Wi-Fi” -&gt; “IP Address”</p><p>Method (2): Connect Mac via wired network, enable internet sharing; connect the phone to that hotspot:</p><p><a href="/assets/46410aaada00/1*R9fthpHlrWzTh4R3fEwO5Q.gif" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*R9fthpHlrWzTh4R3fEwO5Q.gif" alt="System Preferences -&gt; Sharing -&gt; Select &quot;Ethernet&quot; -&gt; Check &quot;Wi-Fi&quot; -&gt; Enable &quot;Internet Sharing&quot;" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NjgiIGhlaWdodD0iNDg0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Mac’s IP Address = 192.168.2.1</strong> (⚠️ Note: This is not the Ethernet network IP; it’s the IP used by Mac as the internet sharing base station.)</p><h4 id="phone-network-settings-wifi--proxy-server-information"><span class="me-2">Phone Network Settings WiFi — Proxy Server Information</span><a href="#phone-network-settings-wifi--proxy-server-information" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/46410aaada00/1*ziIFrGQaMr2kYrQHwLYNJg.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*ziIFrGQaMr2kYrQHwLYNJg.webp" alt="Settings -&gt; WiFi -&gt; HTTP Proxy -&gt; Manual -&gt; Enter **Mac's IP Address** -&gt; Enter **8080** -&gt; Save" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjEwNjUiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>Settings -&gt; WiFi -&gt; HTTP Proxy -&gt; Manual -&gt; Enter <strong>Mac’s IP Address</strong> -&gt; Enter <strong>8080</strong> -&gt; Save</p><blockquote><p><em>At this point, if the webpage doesn’t open and a certificate error appears, that’s normal; let’s continue…</em></p></blockquote><h4 id="install-mitmproxy-custom-https-certificate"><span class="me-2">Install mitmproxy Custom HTTPS Certificate</span><a href="#install-mitmproxy-custom-https-certificate" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>As mentioned above, the implementation of a man-in-the-middle attack involves using your own certificate to replace and decrypt data during communication; therefore, we also need to install this custom certificate on the phone.</p><p><strong>1. Open Safari on your phone and go to <a href="http://mitm.it" target="_blank">http://mitm.it</a></strong></p><p><a href="/assets/46410aaada00/1*BuvCYx9WRzG0ECO3H_BS0A.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*BuvCYx9WRzG0ECO3H_BS0A.webp" alt="Left side shows Proxy settings ✅ Right side indicates Proxy settings are incorrect 🚫" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjEyNDMiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>Left side shows Proxy settings ✅ / Right side indicates Proxy settings are incorrect 🚫</p><p><a href="/assets/46410aaada00/1*qKDHxi9HxUP41oDJahBfBA.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*qKDHxi9HxUP41oDJahBfBA.webp" alt="Apple -&gt; Install Profile -&gt; Install" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjYyNCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Apple -&gt; Install Profile -&gt; Install</p><blockquote><p><em>⚠️ We’re not done yet; we still need to enable the profile in the settings.</em></p></blockquote><p><a href="/assets/46410aaada00/1*mOijblpQepazFPIwob4r8Q.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*mOijblpQepazFPIwob4r8Q.webp" alt="General -&gt; About -&gt; Certificate Trust Settings -&gt; Enable mitmproxy" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjEwNjUiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>General -&gt; About -&gt; Certificate Trust Settings -&gt; Enable mitmproxy</p><p><strong>Done! Now we can return to the browser and browse the web normally.</strong></p><h4 id="return-to-mac-to-operate-mitmproxy"><span class="me-2">Return to Mac to Operate mitmproxy</span><a href="#return-to-mac-to-operate-mitmproxy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/46410aaada00/1*kiEPaTm5bhnFLBfQngQPgA.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*kiEPaTm5bhnFLBfQngQPgA.webp" alt="You can see the data transmission records from the phone on the mitmproxy Terminal" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iNDc3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>You can see the data transmission records from the phone on the mitmproxy Terminal.</p><p><a href="/assets/46410aaada00/1*5I6l9cO3LeXfcwGLpWGKPQ.gif" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*5I6l9cO3LeXfcwGLpWGKPQ.gif" alt="Find the desired sniffing record to view Request (parameters sent) Response (content returned)" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MzgiIGhlaWdodD0iNTAyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Find the desired sniffing record to view Request (parameters sent) / Response (content returned).</p><h4 id="common-operation-key-set"><span class="me-2">Common Operation Key Set:</span><a href="#common-operation-key-set" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>「 ? 」= View key operation documentation
「 k 」/「⬆」= Up 
「 j 」/「⬇」= Down 
「 h 」/「⬅」= Left 
「 l 」/「➡️」️= Right 
「 space 」= Next page
「 enter 」= Enter to view details
「 q 」= Return to the previous page/exit
「 b 」= Export response body to specified path text file 
「 f 」= Filter record conditions
「 z 」= Clear all records
「 e 」= Edit Request (cookie, headers, params...)
「 r 」= Resend Request
</pre></table></code></div></div><h4 id="not-used-to-cli-no-problem-you-can-switch-to-web-gui"><span class="me-2">Not Used to CLI? No Problem, You Can Switch to Web GUI!</span><a href="#not-used-to-cli-no-problem-you-can-switch-to-web-gui" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>In addition to the mitmproxy activation method, we can switch to:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>mitmweb
</pre></table></code></div></div><p>This allows you to use the new Web GUI for observation and operation.</p><p><a href="/assets/46410aaada00/1*Stbf8gUk8iXwNkozOKyOjA.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*Stbf8gUk8iXwNkozOKyOjA.webp" alt="mitmweb" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjMzIiBoZWlnaHQ9Ijg5MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>mitmweb.</p><h4 id="the-main-event-sniffing-app-data"><span class="me-2">The Main Event: Sniffing APP Data</span><a href="#the-main-event-sniffing-app-data" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Once the above environment is set up and familiar, we can enter the main event; sniffing the data transmission content of the APP API!</p><blockquote><p><em>Here, we will use a housing APP as an example, with no malicious intent, purely for academic exchange!</em></p></blockquote><blockquote><p><em>We want to know how the object list API requests and what content it returns!</em></p></blockquote><p><a href="/assets/46410aaada00/1*HKppSomeMK5U3Z0kbaRvkQ.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*HKppSomeMK5U3Z0kbaRvkQ.webp" alt="First, press &quot;z&quot; to clear all records (to avoid confusion)" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NzEiIGhlaWdodD0iNjMxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>First, press “z” to clear all records (to avoid confusion).</p><p><a href="/assets/46410aaada00/1*mpNLXzUwb7-jiikrHkoTcA.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*mpNLXzUwb7-jiikrHkoTcA.webp" alt="Open the target APP" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTAiIGhlaWdodD0iMTMzNCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Open the target APP.</p><p>Open the target APP and try to “pull down to refresh” or trigger the action to “load the next page.”</p><blockquote><p><strong><em>🛑 If your target APP doesn’t open or connect; then sorry, it means the APP has implemented defenses that prevent sniffing. Please scroll directly to the section on how to protect it. 🛑</em></strong></p></blockquote><p><a href="/assets/46410aaada00/1*KOkJugn95bcUCPl-dZEaRA.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*KOkJugn95bcUCPl-dZEaRA.webp" alt="mitmproxy records" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NzEiIGhlaWdodD0iNjMxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>mitmproxy records.</p><p>Return to mitmproxy to check the records, channel your inner detective to guess which API request record is what we want and enter to view the details!</p><p><a href="/assets/46410aaada00/1*n6mUgej-2_U8PRUbQo_j1g.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*n6mUgej-2_U8PRUbQo_j1g.webp" alt="Request" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MjciIGhlaWdodD0iNTg3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Request.</p><p>In the Request section, you can see which parameters were passed in the request.</p><p>By using “e” to edit and “r” to resend, and observing the Response, you can guess the purpose of each parameter!</p><p><a href="/assets/46410aaada00/1*zxdLiXMP-KapoEYou_TlZg.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*zxdLiXMP-KapoEYou_TlZg.webp" alt="Response" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NzEiIGhlaWdodD0iNjMxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Response.</p><p>You can also directly obtain the original returned content from the Response.</p><blockquote><p><strong><em>🛑 If the Response content is a bunch of encoded data; then sorry, it means the APP may have its own encryption and decryption process, making it impossible to sniff using this method. Please scroll directly to the section on how to protect it. 🛑</em></strong></p></blockquote><p>Is it hard to read? Is there garbled Chinese? No worries, you can use “b” to export it as a text file to your desktop, then copy the content to <a href="https://jsoneditoronline.org/" target="_blank">Json Editor Online</a> for parsing!</p><p><a href="/assets/46410aaada00/1*7qOTLAIQHH6V782OnvFVFQ.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*7qOTLAIQHH6V782OnvFVFQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjgzMSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><blockquote><p><strong><em>* Alternatively, you can directly use mitmweb to browse and operate through the web GUI.</em></strong></p></blockquote><p><a href="/assets/46410aaada00/1*ujOlDBdjp8tECeAwRzWRPw.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*ujOlDBdjp8tECeAwRzWRPw.webp" alt="mitmweb" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjM1IiBoZWlnaHQ9Ijg4MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>mitmweb.</p><p>After sniffing, observing, filtering, and testing, you will understand how the APP API operates, allowing you to use it to scrape data with a crawler.</p><blockquote><p><em>* After collecting the necessary information, remember to close mitmproxy and change the phone’s network Proxy settings back to automatic to use the internet normally.</em></p></blockquote><h3 id="how-should-the-app-protect-itself"><span class="me-2">How Should the APP Protect Itself?</span><a href="#how-should-the-app-protect-itself" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If you find that the APP cannot be used after mounting mitmproxy, or the returned content is encoded, it means the APP has implemented protections.</p><p><strong>Method (1):</strong></p><p>Generally, this involves placing a copy of the certificate information within the APP. If the current HTTPS certificate does not match the information in the APP, access is denied. For more details, <a href="https://www.anquanke.com/post/id/147090" target="_blank">see this</a> or look for resources on <a href="https://medium.com/@dzungnguyen.hcm/ios-ssl-pinning-bffd2ee9efc" target="_blank">SSL Pinning</a>. The downside is that you need to pay attention to the certificate’s validity period!</p><p><a href="/assets/46410aaada00/1*31rODDIlYPidTP3L8W_C7A.webp" class="popup img-link blur"><img data-src="/assets/46410aaada00/1*31rODDIlYPidTP3L8W_C7A.webp" alt="[https://medium.com/@dzungnguyen.hcm/ios-ssl-pinning-bffd2ee9efc](https://medium.com/@dzungnguyen.hcm/ios-ssl-pinning-bffd2ee9efc){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTYwIiBoZWlnaHQ9IjEyMDAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="https://medium.com/@dzungnguyen.hcm/ios-ssl-pinning-bffd2ee9efc" target="_blank">https://medium.com/@dzungnguyen.hcm/ios-ssl-pinning-bffd2ee9efc</a></p><p><strong>Method (2):</strong></p><p>Before transmitting data, the APP encrypts the data, and the API backend decrypts it to obtain the original request content. Similarly, the API encrypts the returned content before sending it back, and the APP decrypts it upon receipt. This process is cumbersome and resource-intensive, but it is indeed a method; as far as I know, some digital banks use this method for protection!</p><h4 id="however"><span class="me-2">However…</span><a href="#however" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Method 1 still has ways to be bypassed: <a href="https://www.anquanke.com/post/id/179514" target="_blank">How to Bypass SSL Pinning on iOS 12</a>.</p><p>Method 2 can also be compromised through reverse engineering to obtain the keys used for encoding and encryption.</p><p><strong>⚠️ There is no 100% security ⚠️</strong></p><p><code class="language-plaintext highlighter-rouge">Or simply leave a hole for it to crawl, collect various evidence, and then resolve it legally (？)</code></p><h4 id="still-the-saying-goes"><span class="me-2">Still, the saying goes:</span><a href="#still-the-saying-goes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><blockquote><p>“NEVER TRUST THE CLIENT.”</p></blockquote><h3 id="more-ways-to-use-mitmproxy"><span class="me-2">More Ways to Use mitmproxy:</span><a href="#more-ways-to-use-mitmproxy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>1. Use mitmdump</strong></p><p>In addition to <code class="language-plaintext highlighter-rouge">mitmproxy</code> and <code class="language-plaintext highlighter-rouge">mitmweb</code>, <code class="language-plaintext highlighter-rouge">mitmdump</code> can directly export all records to a text file:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>mitmdump <span class="nt">-w</span> /log.txt
</pre></table></code></div></div><p>You can also use <strong>Method (2)</strong> with a Python script to set parameters and filter traffic:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>mitmdump <span class="nt">-ns</span> examples/filter.py <span class="nt">-r</span> /log.txt <span class="nt">-w</span> /result.txt
</pre></table></code></div></div><p><strong>2. Use a Python script for request parameter settings, access control, and redirection:</strong></p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">mitmproxy</span> <span class="kn">import</span> <span class="n">http</span>

<span class="k">def</span> <span class="nf">request</span><span class="p">(</span><span class="n">flow</span><span class="p">:</span> <span class="n">http</span><span class="p">.</span><span class="n">HTTPFlow</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># pretty_host takes the "Host" header of the request into account,
</span>    <span class="c1"># which is useful in transparent mode where we usually only have the IP
</span>    <span class="c1"># otherwise.
</span>    
    <span class="c1"># Request parameter settings Example:
</span>    <span class="n">flow</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="p">[</span><span class="sh">'</span><span class="s">User-Agent</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="sh">'</span><span class="s">MitmProxy</span><span class="sh">'</span>
    
    <span class="k">if</span> <span class="n">flow</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">pretty_host</span> <span class="o">==</span> <span class="sh">"</span><span class="s">123.com.tw</span><span class="sh">"</span><span class="p">:</span>
        <span class="n">flow</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">host</span> <span class="o">=</span> <span class="sh">"</span><span class="s">456.com.tw</span><span class="sh">"</span>
    <span class="c1"># Redirect all access from 123.com.tw to 456.com.tw
</span></pre></table></code></div></div><p>To enable mitmproxy with the script, add the parameter:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>mitmproxy -s /redirect.py
or
mitmweb -s /redirect.py
or
mitmdump -s /redirect.py
</pre></table></code></div></div><h3 id="a-pitfall"><span class="me-2">A Pitfall</span><a href="#a-pitfall" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>When using mitmproxy to observe HTTP 1.1 requests with Accept-Ranges: bytes and Content-Range for long connections that continuously fetch resources, it will wait until the entire response is returned before displaying it, rather than showing it in segments while using persistent connections to continue downloading!</p><p><a href="/posts//en/avplayer-streaming-and-caching-practical-guide-ee47f8f1e2d2/">Read about the pitfall here</a>.</p><h3 id="further-reading"><span class="me-2">Further Reading</span><a href="#further-reading" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><a href="/posts/zrealm-dev/en/automating-routine-tasks-with-python-google-cloud-platform-line-bot-70a1409b149a/">Using a Check-in Reward APP as an Example to Create a Daily Automatic Check-in Script</a><li><a href="/posts/zrealm-dev/en/how-to-create-an-engaging-engineering-ctf-competition-729d7b6817a4/">How to Create an Interesting Engineering CTF Competition</a><li><a href="/posts/zrealm-dev/en/revealing-a-clever-website-vulnerability-discovered-a-few-years-ago-142244e5f07a/">Revealing a Clever Website Vulnerability Discovered a Few Years Ago</a><li><a href="https://medium.com/zrealm-ios-dev/ios-15-macos-monterey-safari-%E5%B0%87%E8%83%BD%E9%9A%B1%E8%97%8F%E7%9C%9F%E5%AF%A6-ip-755a8b6acc35" target="_blank">iOS 15 / MacOS Monterey Safari Will Be Able to Hide Real IP</a></ul><h3 id="postscript"><span class="me-2">Postscript</span><a href="#postscript" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-markdown highlighter-rouge"><div class="code-header"> <span data-label-text="Markdown"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">iPlayground</span><span class="nv"> </span><span class="s">2019</span><span class="nv"> </span><span class="s">Experience"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2019-09-20</span>
<span class="nn">---</span>

Since I don't have domain permissions to obtain SSL certificate information, I can't implement it; looking at the code, it doesn't seem too difficult. Although there's no 100% secure method, having an additional layer of protection can at least make it a bit safer. Continuing to attack would require a lot of time for research, but it should deter about 90% of crawlers!

This article might be a bit lacking in substance, as I've neglected Medium for a while (went off to play with my DSLR). This is mainly to warm up my writing skills ahead of this weekend's <span class="p">[</span><span class="nv">iPlayground 2019</span><span class="p">](</span><span class="sx">https://iplayground.io/2019/</span><span class="p">)</span>{:target="_blank"}; I'm looking forward to this year's agenda 🤩 and hope to come back with more quality articles!
<span class="gt">
&gt; **_\[2019/02/22 Updated Article\] [What is the Experience of iPlayground 2019?](/posts/en/4079036c85c2/)_**</span>

If you have any questions or suggestions, feel free to <span class="p">[</span><span class="nv">contact me</span><span class="p">](</span><span class="sx">https://www.zhgchg.li/contact</span><span class="p">)</span>{:target="_blank"}.<span class="sb">


</span></pre></table></code></div></div><hr /><p>This article was first published on Medium ➡️ <a href="https://medium.com/p/46410aaada00" target="_blank"><strong>Click Here</strong></a></p><p>Automatically converted and synchronized using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a> and <a href="https://github.com/ZhgChgLi/medium-to-jekyll-starter.github.io" target="_blank">Medium-to-jekyll-starter</a>.</p><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/en/zmediumtomarkdown/2019-09-20-46410aaada00.md" target="_blank">Improve this page on Github.</a></p><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=🍺&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a></p><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); border-bottom: 1px solid var(--main-border-color);transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1K+ Followers</span></a></div><div style="font-size: 0.8em; cursor:default; text-align: right;"> 10,134 <span style="font-size: 0.9em;">Total Views</span><br /> <span style="font-size: 0.8em;">Last Statistics Date: 2025-08-16 | 10,083 Views on <a href="https://medium.com/p/46410aaada00" target="_blank">Medium.</a></span></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/mitmproxy/" class="post-tag no-text-decoration" >mitmproxy</a> <a href="/tags/man-in-the-middle/" class="post-tag no-text-decoration" >man-in-the-middle</a> <a href="/tags/ios/" class="post-tag no-text-decoration" >ios</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/hacking/" class="post-tag no-text-decoration" >hacking</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=The%20APP%20Uses%20HTTPS%20for%20Transmission,%20But%20Data%20Still%20Gets%20Stolen.%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fthe-app-uses-https-for-transmission-but-data-still-gets-stolen-46410aaada00%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=The%20APP%20Uses%20HTTPS%20for%20Transmission,%20But%20Data%20Still%20Gets%20Stolen.%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fthe-app-uses-https-for-transmission-but-data-still-gets-stolen-46410aaada00%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-dev%2Fen%2Fthe-app-uses-https-for-transmission-but-data-still-gets-stolen-46410aaada00%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2025-%E9%9F%93%E5%9C%8B%E9%87%9C%E5%B1%B1-8-%E5%A4%A9-7-%E5%A4%9C%E8%87%AA%E7%94%B1%E8%A1%8C-8ace34a1a3d8/">遊記 2025 韓國釜山 8 天 7 夜自由行</a><li class="text-truncate lh-lg"> <a href="/posts/z-travel-diaries/en/travel-diary-8-days-and-7-nights-in-busan-south-korea-2025-8ace34a1a3d8/">Travel Diary: 8 Days and 7 Nights in Busan, South Korea 2025</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-9-11-%E5%90%8D%E5%8F%A4%E5%B1%8B%E4%B8%80%E6%97%A5%E5%BF%AB%E9%96%83%E8%87%AA%E7%94%B1%E8%A1%8C-7b8a0563c157/">遊記 9/11 名古屋一日快閃自由行</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2023-%E4%B9%9D%E5%B7%9E-10-%E6%97%A5%E8%87%AA%E7%94%B1%E8%A1%8C%E7%8D%A8%E6%97%85-d78e0b15a08a/">遊記 2023 九州 10 日自由行獨旅</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%81%8A%E8%A8%98-2023-%E4%BA%AC%E9%98%AA%E7%A5%9E-8-%E6%97%A5%E8%87%AA%E7%94%B1%E8%A1%8C-76d66c2e34af/">遊記 2023 京阪神 8 日自由行</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">章節 (Chapters)🔖</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/app%E6%9C%89%E7%94%A8https%E5%82%B3%E8%BC%B8-%E4%BD%86%E8%B3%87%E6%96%99%E9%82%84%E6%98%AF%E8%A2%AB%E5%81%B7%E4%BA%86-46410aaada00/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1568973661" data-df="ll" > Sep 20, 2019 </time><h4 class="pt-0 my-2">APP有用HTTPS傳輸，但資料還是被偷了。</h4><div class="text-muted"><p>iOS+MacOS 使用 mitmproxy 進行中間人攻擊(Man-in-the-middle attack) 嗅探API傳輸資料</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/ios-14-%E5%89%AA%E8%B2%BC%E7%B0%BF%E7%AB%8A%E8%B3%87%E6%81%90%E6%85%8C-%E9%9A%B1%E7%A7%81%E8%88%87%E4%BE%BF%E5%88%A9%E7%9A%84%E5%85%A9%E9%9B%A3-8a04443024e2/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1593697896" data-df="ll" > Jul 2, 2020 </time><h4 class="pt-0 my-2">iOS 14 剪貼簿竊資恐慌，隱私與便利的兩難</h4><div class="text-muted"><p>為何那麼多 iOS APP 會讀取你的剪貼簿？</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/en/ios-14-clipboard-privacy-panic-the-dilemma-of-privacy-vs-convenience-8a04443024e2/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1593697896" data-df="ll" > Jul 2, 2020 </time><h4 class="pt-0 my-2">iOS 14 Clipboard Privacy Panic: The Dilemma of Privacy vs. Convenience</h4><div class="text-muted"><p>Why do so many iOS apps read your clipboard?</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/%E5%A6%82%E4%BD%95%E6%89%93%E9%80%A0%E4%B8%80%E5%A0%B4%E6%9C%89%E8%B6%A3%E7%9A%84%E5%B7%A5%E7%A8%8Bctf%E7%AB%B6%E8%B3%BD-729d7b6817a4/" class="btn btn-outline-primary" aria-label="Older" ><p>如何打造一場有趣的工程CTF競賽</p></a> <a href="/posts/zrealm-dev/app%E6%9C%89%E7%94%A8https%E5%82%B3%E8%BC%B8-%E4%BD%86%E8%B3%87%E6%96%99%E9%82%84%E6%98%AF%E8%A2%AB%E5%81%B7%E4%BA%86-46410aaada00/" class="btn btn-outline-primary" aria-label="Newer" ><p>APP有用HTTPS傳輸，但資料還是被偷了。</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> All Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a><br/>Last updated: 2025-08-17 11:01:33 +08:00</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll/">jekyll</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
