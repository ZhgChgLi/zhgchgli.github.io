<!doctype html><html lang="zh-tw" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="iOS UUID 解析｜Swift裝置唯一識別與IDFV替代方案全攻略" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="zh_tw" /><meta name="description" content="針對iOS開發者面臨UUID限制與封鎖問題，解析Swift中UUID取得方法及IDFV替代方案，並提供Key-Chain持久化UUID實作，助你穩定辨識裝置唯一值，避免重裝APP導致識別碼變動，提升用戶追蹤與資料一致性。" /><meta property="og:description" content="針對iOS開發者面臨UUID限制與封鎖問題，解析Swift中UUID取得方法及IDFV替代方案，並提供Key-Chain持久化UUID實作，助你穩定辨識裝置唯一值，避免重裝APP導致識別碼變動，提升用戶追蹤與資料一致性。" /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-dev/ios-uuid-%E8%A7%A3%E6%9E%90-swift%E8%A3%9D%E7%BD%AE%E5%94%AF%E4%B8%80%E8%AD%98%E5%88%A5%E8%88%87idfv%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%E5%85%A8%E6%94%BB%E7%95%A5-a4bc3bce7513/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-dev/ios-uuid-%E8%A7%A3%E6%9E%90-swift%E8%A3%9D%E7%BD%AE%E5%94%AF%E4%B8%80%E8%AD%98%E5%88%A5%E8%88%87idfv%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%E5%85%A8%E6%94%BB%E7%95%A5-a4bc3bce7513/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/a4bc3bce7513/1*gEmmuDOD92d2b2fLp4AKsw.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-10-25T22:26:20+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/a4bc3bce7513/1*gEmmuDOD92d2b2fLp4AKsw.webp" /><meta property="twitter:title" content="iOS UUID 解析｜Swift裝置唯一識別與IDFV替代方案全攻略" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://www.linkedin.com/in/zhgchgli"},"dateModified":"2024-04-13T15:21:43+08:00","datePublished":"2018-10-25T22:26:20+08:00","description":"針對iOS開發者面臨UUID限制與封鎖問題，解析Swift中UUID取得方法及IDFV替代方案，並提供Key-Chain持久化UUID實作，助你穩定辨識裝置唯一值，避免重裝APP導致識別碼變動，提升用戶追蹤與資料一致性。","headline":"iOS UUID 解析｜Swift裝置唯一識別與IDFV替代方案全攻略","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+","url":"https://zhgchg.li/assets/a4bc3bce7513/1*gEmmuDOD92d2b2fLp4AKsw.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-dev/ios-uuid-%E8%A7%A3%E6%9E%90-swift%E8%A3%9D%E7%BD%AE%E5%94%AF%E4%B8%80%E8%AD%98%E5%88%A5%E8%88%87idfv%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%E5%85%A8%E6%94%BB%E7%95%A5-a4bc3bce7513/"},"url":"https://zhgchg.li/posts/zrealm-dev/ios-uuid-%E8%A7%A3%E6%9E%90-swift%E8%A3%9D%E7%BD%AE%E5%94%AF%E4%B8%80%E8%AD%98%E5%88%A5%E8%88%87idfv%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%E5%85%A8%E6%94%BB%E7%95%A5-a4bc3bce7513/"}</script><title>iOS UUID 解析｜Swift裝置唯一識別與IDFV替代方案全攻略 | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/zh.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=false" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script><link rel="alternate" hreflang="en" href="https://en.zhgchg.li/posts/zrealm-dev/ios-uuid-explained-swift-techniques-for-unique-device-identification-a4bc3bce7513/"><link rel="alternate" hreflang="ja" href="https://jp.zhgchg.li/posts/zrealm%E3%81%AE%E9%96%8B%E7%99%BA/ios-uuid%E3%81%AE%E5%9F%BA%E7%A4%8E%E3%81%A8%E5%BF%9C%E7%94%A8-swift%E3%81%A7uuid%E7%AE%A1%E7%90%86%E3%82%92%E6%9C%80%E9%81%A9%E5%8C%96%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95-a4bc3bce7513/"><link rel="alternate" hreflang="zh-Hans" href="https://zh-hans.zhgchg.li/posts/zrealm-dev/ios-uuid-%E8%A7%A3%E6%9E%90-swift%E8%A3%85%E7%BD%AE%E5%94%AF%E4%B8%80%E8%AF%86%E5%88%AB%E4%B8%8Eidfv%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%E5%85%A8%E6%94%BB%E7%95%A5-a4bc3bce7513/"><link rel="alternate" hreflang="zh-Hant" href="https://zhgchg.li/posts/zrealm-dev/ios-uuid-%E8%A7%A3%E6%9E%90-swift%E8%A3%9D%E7%BD%AE%E5%94%AF%E4%B8%80%E8%AD%98%E5%88%A5%E8%88%87idfv%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%E5%85%A8%E6%94%BB%E7%95%A5-a4bc3bce7513/"><link rel="alternate" hreflang="x-default" href="https://zhgchg.li/posts/zrealm-dev/ios-uuid-%E8%A7%A3%E6%9E%90-swift%E8%A3%9D%E7%BD%AE%E5%94%AF%E4%B8%80%E8%AD%98%E5%88%A5%E8%88%87idfv%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%E5%85%A8%E6%94%BB%E7%95%A5-a4bc3bce7513/"> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"FAQPage","mainEntity":[{"@type":"Question","name":"如何在iOS中安全且穩定地取得裝置唯一識別碼(UUID)？","acceptedAnswer":{"@type":"Answer","text":"使用IDFV(Identifier For Vendor)結合Key-Chain存取UUID，可以避免刪除重裝APP導致UUID變動，確保裝置識別穩定且不受系統限制影響。"}},{"@type":"Question","name":"為何不能再使用MAC Address或傳統UUID來辨識iOS裝置？","acceptedAnswer":{"@type":"Answer","text":"蘋果禁止使用MAC Address和傳統UUID作為裝置識別碼，因為這些方法可能侵犯用戶隱私並被濫用，導致API限制及封鎖，必須改用蘋果官方推薦的IDFV等替代方案。"}},{"@type":"Question","name":"使用IDFV時刪除所有同廠商APP會有什麼影響？","acceptedAnswer":{"@type":"Answer","text":"當裝置上所有同一Vendor的APP都被刪除後，重新安裝會產生新的UUID，因此無法持續追蹤裝置唯一性，需搭配Key-Chain等方式保存UUID以避免此問題。"}},{"@type":"Question","name":"如何透過Key-Chain實作UUID的持久化存取？","acceptedAnswer":{"@type":"Answer","text":"先嘗試從Key-Chain讀取UUID，若無則使用IDFV生成並寫入Key-Chain，透過SecItemAdd和SecItemCopyMatching API確保UUID在APP刪除重裝後依然可被取用。"}},{"@type":"Question","name":"有哪些替代UUID辨識裝置的技術可用於iOS開發？","acceptedAnswer":{"@type":"Answer","text":"除了IDFV外，可考慮使用UIPasteboard共享資料、canOpenURL檢測APP安裝、或Finger Printing技術，但IDFV搭配Key-Chain仍是最穩定且被蘋果允許的主流解法。"}}]} </script><link rel="stylesheet" href="/assets/css/post-toc.css"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0">An iOS, web, and automation developer from Taiwan 🇹🇼 who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item" style="padding:0 15px 0 15px;"> <a href="https://medium.com/@zhgchgli" class="nav-link" target="_blank" style="background:#EDF4FF;color:#0A84FF;font-size:15px;transition:background-color .2s,color .2s;" onmouseover="this.style.backgroundColor='#0A84FF';this.style.color='#ffffff';" onmouseout="this.style.backgroundColor='#EDF4FF';this.style.color='#0A84FF';"> <i class="fa-brands fa-medium"></i> <span><span style="font-size: 18px; font-weight: boild;">Follow Me on Medium!</span><br/><u>1,053+</u> Followers</span> </a><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>首頁</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>分類</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>標籤</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>歸檔</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>關於我</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>聯絡我</span> </a><li class="nav-item"><div aria-label="Language switch" style="display:flex;align-items:center;justify-content:center;gap:5px;"> <a href="https://zhgchg.li/posts/zrealm-dev/ios-uuid-%E8%A7%A3%E6%9E%90-swift%E8%A3%9D%E7%BD%AE%E5%94%AF%E4%B8%80%E8%AD%98%E5%88%A5%E8%88%87idfv%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%E5%85%A8%E6%94%BB%E7%95%A5-a4bc3bce7513/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #666;background:#111;color:#fff;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> 正體中文 </a> <span style="width:1px;height:18px;background:rgba(0,0,0,.12);"></span> <a href="https://zh-hans.zhgchg.li/posts/zrealm-dev/ios-uuid-%E8%A7%A3%E6%9E%90-swift%E8%A3%85%E7%BD%AE%E5%94%AF%E4%B8%80%E8%AF%86%E5%88%AB%E4%B8%8Eidfv%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%E5%85%A8%E6%94%BB%E7%95%A5-a4bc3bce7513/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #ccc;background:#f3f3f3;color:#555;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> 简体中文 </a></div><div aria-label="Language switch" style="display:flex;align-items:center;justify-content:center;gap:5px;margin-top:5px;"> <a href="https://en.zhgchg.li/posts/zrealm-dev/ios-uuid-explained-swift-techniques-for-unique-device-identification-a4bc3bce7513/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #ccc;background:#f3f3f3;color:#555;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> English </a> <span style="width:1px;height:18px;background:rgba(0,0,0,.12);"></span> <a href="https://jp.zhgchg.li/posts/zrealm%E3%81%AE%E9%96%8B%E7%99%BA/ios-uuid%E3%81%AE%E5%9F%BA%E7%A4%8E%E3%81%A8%E5%BF%9C%E7%94%A8-swift%E3%81%A7uuid%E7%AE%A1%E7%90%86%E3%82%92%E6%9C%80%E9%81%A9%E5%8C%96%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95-a4bc3bce7513/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #ccc;background:#f3f3f3;color:#555;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> 日本語 </a></div></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">首頁</a> </span> <span>iOS UUID 解析｜Swift裝置唯一識別與IDFV替代方案全攻略</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> 文章</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜尋..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">取消</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>iOS UUID 解析｜Swift裝置唯一識別與IDFV替代方案全攻略</h1><p class="post-desc fw-light mb-4">針對iOS開發者面臨UUID限制與封鎖問題，解析Swift中UUID取得方法及IDFV替代方案，並提供Key-Chain持久化UUID實作，助你穩定辨識裝置唯一值，避免重裝APP導致識別碼變動，提升用戶追蹤與資料一致性。</p><div class="post-meta text-muted"> <span> 發佈於 <time data-ts="1540477580" data-df="YYYY 年 M 月 D 日" data-bs-toggle="tooltip" data-bs-placement="bottom" > 2018 年 10 月 25 日 </time> </span> <span> 更新於 <time data-ts="1712992903" data-df="YYYY 年 M 月 D 日" data-bs-toggle="tooltip" data-bs-placement="bottom" > 2024 年 04 月 13 日 </time> </span><div class="mt-3 mb-3"> <a href="/assets/a4bc3bce7513/1*gEmmuDOD92d2b2fLp4AKsw.webp" class="popup img-link preview-img blur"><img data-src="/assets/a4bc3bce7513/1*gEmmuDOD92d2b2fLp4AKsw.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></div><div class="d-flex justify-content-between"> <span style="display: inline-flex; align-items: center; gap: 4px;"> 作者 <em> <a href="https://www.linkedin.com/in/zhgchgli">ZhgChgLi</a> </em> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" style="display: block; "><path fill="#007bff" d="M271.2 56C265.1 49.8 256.2 47.3 247.8 49.6C239.4 51.9 232.9 58.4 230.8 66.8L215.5 127C214.4 131.4 209.9 134 205.6 132.7L145.8 115.9C137.4 113.5 128.4 115.9 122.3 122C116.2 128.1 113.8 137.1 116.2 145.5L133.1 205.3C134.3 209.6 131.7 214.1 127.4 215.2L67.1 230.5C58.7 232.6 52.1 239.2 49.8 247.6C47.5 256 50 264.9 56.2 271L100.7 314.3C103.9 317.4 103.9 322.6 100.7 325.8L56.3 369.1C50.1 375.2 47.6 384.1 49.9 392.5C52.2 400.9 58.8 407.4 67.2 409.6L127.4 424.9C131.8 426 134.4 430.5 133.1 434.8L116.2 494.5C113.8 502.9 116.2 511.9 122.3 518C128.4 524.1 137.4 526.5 145.8 524.1L205.6 507.2C209.9 506 214.4 508.6 215.5 512.9L230.8 573.1C232.9 581.5 239.5 588.1 247.9 590.4C256.3 592.7 265.2 590.2 271.3 584L314.6 539.5C317.7 536.3 322.9 536.3 326.1 539.5L369.3 584C375.4 590.2 384.3 592.7 392.7 590.4C401.1 588.1 407.6 581.5 409.8 573.1L425.1 513C426.2 508.6 430.7 506 435 507.3L494.8 524.2C503.2 526.6 512.2 524.2 518.3 518.1C524.4 512 526.8 503 524.4 494.6L507.5 434.8C506.3 430.5 508.9 426 513.2 424.9L573.4 409.6C581.8 407.5 588.4 400.9 590.7 392.5C593 384.1 590.5 375.1 584.3 369.1L539.8 325.8C536.6 322.7 536.6 317.5 539.8 314.3L584.3 271C590.5 264.9 593 256 590.7 247.6C588.4 239.2 581.8 232.7 573.4 230.5L513.2 215.2C508.8 214.1 506.2 209.6 507.5 205.3L524.4 145.5C526.8 137.1 524.4 128.1 518.3 122C512.2 115.9 503.2 113.5 494.8 115.9L435 132.8C430.7 134 426.2 131.4 425.1 127.1L409.8 66.8C407.7 58.4 401.1 51.8 392.7 49.5C384.3 47.2 375.4 49.7 369.3 55.9L326 100.5C322.9 103.7 317.7 103.7 314.5 100.5L271.2 56z"/><path d="M250 330 l60 60 100 -140" stroke="#ffffff" stroke-width="40" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1809 字" > <em>10 分鐘</em>閱讀</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">iOS UUID 解析｜Swift裝置唯一識別與IDFV替代方案全攻略</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">章節目錄 🔖</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">iOS UUID 解析｜Swift裝置唯一識別與IDFV替代方案全攻略</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><div aria-label="Language switch" style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;"><div aria-label="Views" style="display:inline-flex;align-items:center;gap:6px;font-size:.85rem;"> <span style="display:inline-flex;align-items:center;justify-content:center;"> 瀏覽次數: <span style="margin-left:4px;" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-original-title="最後更新時間: 2026-01-27 11:12:53 +08:00"><u>4,863+</u></span> </span></div><div style="display:flex;align-items:center;justify-content:flex-end;gap:8px;flex-wrap:wrap;"> <a href="https://zhgchg.li/posts/zrealm-dev/ios-uuid-%E8%A7%A3%E6%9E%90-swift%E8%A3%9D%E7%BD%AE%E5%94%AF%E4%B8%80%E8%AD%98%E5%88%A5%E8%88%87idfv%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%E5%85%A8%E6%94%BB%E7%95%A5-a4bc3bce7513/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid #dc3545;background:#dc3545;color:#fff !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> 正體中文 </a> <a href="https://zh-hans.zhgchg.li/posts/zrealm-dev/ios-uuid-%E8%A7%A3%E6%9E%90-swift%E8%A3%85%E7%BD%AE%E5%94%AF%E4%B8%80%E8%AF%86%E5%88%AB%E4%B8%8Eidfv%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%E5%85%A8%E6%94%BB%E7%95%A5-a4bc3bce7513/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(220,53,69,.35);background:rgba(220,53,69,.08);color:#dc3545 !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> 简体中文 </a> <a href="https://en.zhgchg.li/posts/zrealm-dev/ios-uuid-explained-swift-techniques-for-unique-device-identification-a4bc3bce7513/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(220,53,69,.35);background:rgba(220,53,69,.08);color:#dc3545 !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> English </a> <a href="https://jp.zhgchg.li/posts/zrealm%E3%81%AE%E9%96%8B%E7%99%BA/ios-uuid%E3%81%AE%E5%9F%BA%E7%A4%8E%E3%81%A8%E5%BF%9C%E7%94%A8-swift%E3%81%A7uuid%E7%AE%A1%E7%90%86%E3%82%92%E6%9C%80%E9%81%A9%E5%8C%96%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95-a4bc3bce7513/" style="display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(220,53,69,.35);background:rgba(220,53,69,.08);color:#dc3545 !important;font-size:12px;font-weight:600;line-height:1;text-decoration:none;"> 日本語 </a></div></div><blockquote class="prompt-info"><p>基於 SEO 考量，本文標題與描述經 AI 調整，原始版本請參考內文。</p></blockquote><h4 id="zhgchgli-table-of-contents">文章目錄</h4><nav class="zhgchgli-toc"><ul class="zhgchgli-toc-list"><li><a href="#ios-uuid-的那些事-swiftios--6">iOS UUID 的那些事 (Swift/iOS ≥ 6)</a></li><li><a href="#前言">前言</a></li><li class="has-children"><details><summary>UUID的那些事 <a href="#uuid的那些事">#</a></summary><ul><li><a href="#替代方案">替代方案</a></li><li><a href="#id-entifier-f-or-v-endor-idfv">ID entifier F or V endor (IDFV)</a></li><li><a href="#完整code">完整CODE</a></li></ul></details></li></ul></nav><hr /><h3 id="ios-uuid-的那些事-swiftios--6"><span class="me-2">iOS UUID 的那些事 (Swift/iOS ≥ 6)</span><a href="#ios-uuid-的那些事-swiftios--6" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>iPlayground 2018 回來 &amp; UUID那些事</p><h3 id="前言"><span class="me-2">前言：</span><a href="#前言" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>上週六、日跑去參加 <a href="https://iplayground.io/" target="_blank">iPlayground</a> Apple 軟體開發者研討會，這個活動訊息是同事PASS過來的，去之前我也不清楚這個活動。</p><p><a href="/assets/a4bc3bce7513/1*gEmmuDOD92d2b2fLp4AKsw.webp" class="popup img-link blur"><img data-src="/assets/a4bc3bce7513/1*gEmmuDOD92d2b2fLp4AKsw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjEwNDkiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>兩天下來，整題活動跟時程安排流暢，議程內容：</p><ol><li>趣味的：腳踏車、凋零的Code、iOS/API 演進史、威利在哪裡(CoreML Vision)<li>實用的：測試類 (XCUITest、依賴注入)、SpriteKit 做動畫效果的替代方案、GraphQL<li>真功夫：深入拆解Swift、iOS 越獄/Tweak開發、Redux</ol><p>腳踏車Project 印象深刻，用iPhone手機當感測器感測腳踏車踏板轉動，直接在台上騎腳踏車切換投影片(前輩主要目標是要做開源版zwift，也分享了許多地雷，例如Client/Sever通信、延遲問題、磁場干擾)</p><p>凋零的Dirty Code；聽得心有戚戚，在心裡會心一笑；技術債就是這樣一直累積下來的，開發時程趕，所以用架構性較差的快速做法，後人接手改也沒時間重構，就越積越多；到最後可能真的只有打掉這條路了</p><p>測試類(Design Patterns in XCUITest) <a href="https://www.facebook.com/TestingWithKK/" target="_blank">KKBOX的前輩</a> ，完全沒藏私直接公開他們的作法及程式範例細節還有遇到的雷、解決辦法，這堂也是對我們工作上最有幫助的項目；測試這塊是我一直想加強的部分，可以回去好好研究研究</p><p>Lighting Talk的部分在台下聽得也好想上去分享😂 下次要提早做好準備了!</p><p>會後的offical party，酒水食物場地都很有誠意，聽前輩們的真心話吐露，很輕鬆有趣之外還吸收許多職場軟實力．</p><p><a href="/assets/a4bc3bce7513/1*Xwk_96lVKcMKgeL7IOC70g.webp" class="popup img-link blur"><img data-src="/assets/a4bc3bce7513/1*Xwk_96lVKcMKgeL7IOC70g.webp" alt="台大後台咖啡" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjkwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>台大後台咖啡</p><p>我才知道原來這是第一屆，真的有榮幸能夠參加，所有工作人員跟講者辛苦了！</p><p>去參加研討會的目的不外乎就是要： <strong>增加廣度</strong> ，吸收新知、了解生態、碰一些平常不會接觸的項目跟 <strong>增加深度</strong> ，如果是自己已經摸過的項目就是去聽聽看有沒有遺漏的地方或是還有其他做法沒發現．</p><p>抄了許多筆記可以回來慢慢研究回味。</p><h3 id="uuid的那些事"><span class="me-2">UUID的那些事</span><a href="#uuid的那些事" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>因為我聽完回去後馬上實際應用到APP上；這堂是由Zonble前輩主講，我聽到從iPhone OS 2寫到iOS 12我就跪了；由於入行較晚，我是從iOS 11/Swift 4 才開始寫，所以沒碰到那些因為蘋果修改API的動亂時期。</p><p>想想UUID從可以取得到封鎖也是蠻合理的；如果是用在良善的地方：辨識使用者裝置、廣告或第三方運用唯一性去做廣告操作；但如果有廠商想做惡，也可以透過這個機制反查，知道你這隻手機的主人是怎麼樣的人？(例如有裝旅遊+台北等公車＋BMW APP+嬰兒照護 就能推測你很常出國家裡有小孩而且住在台北 之類的資訊)再加上你在APP上輸入的個資，能拿去做什麼應用不敢想像</p><p>但這其中也波及到很多正當守法的用戶，像是本來用UUID當使用者的資料解密KEY或用UUID當裝置判斷都受到很大的影響；真佩服那個時期的工程師前輩們，這些影響老闆跟使用者一定會狂罵，要急中生智找其他替代辦法．</p><h4 id="替代方案"><span class="me-2">替代方案：</span><a href="#替代方案" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>本篇文章以取得UUID辨識裝置唯一值為主，如果是要找知道使用者裝了哪些APP的替代方案可參考以下關鍵字搜尋做法： <a href="https://link.medium.com/YTheNPnHH7" target="_blank">UIPasteboard pasteboardWithName: create: (運用剪貼簿在APP間共享)</a> 、canOpenURL: info.plist LSApplicationQueriesSchmes (運用canOpenURL檢查APO有無安裝，要在info.plist列舉，最多50筆)</p><ol><li>用MAC Address當UUID，但後來也被BAN了<li><a href="https://medium.com/@ravielakshmanan/web-browser-uniqueness-and-fingerprinting-7eac3c381805" target="_blank">Finger Printing (Canvas/User-Agent…)</a> ：沒研究，不過這項目主要拿來讓safari跟app能產生同樣的UUID， <a href="https://www.jianshu.com/p/fa48387d56ea" target="_blank">Deferred Deep Linking</a> (延遲深度連結)用 <a href="https://amiunique.org/" target="_blank">AmIUnique?</a><li><a href="https://www.jianshu.com/p/b810d7e007ad" target="_blank"><strong>ID</strong> entifier <strong>F</strong> or <strong>V</strong> endor</a> (IDFV)：目前主流的解決方案🏆 概念是蘋果會根據你的Bundle ID前輟為使用者產生UUID，相同的Bundle ID前輟會產生相同的UUID，例如:com.518.work/com.518.job 同個裝置會得到相同的UUID 如同原文ID For Vendor，相同的前輟蘋果認為即是相同廠商的APP，所以共享UUID是允許的。</ol><h4 id="id-entifier-f-or-v-endor-idfv"><span class="me-2"><strong>ID</strong> entifier <strong>F</strong> or <strong>V</strong> endor (IDFV)：</span><a href="#id-entifier-f-or-v-endor-idfv" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已複製！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">let</span> <span class="nv">DEVICE_UUID</span><span class="p">:</span><span class="kt">String</span> <span class="o">=</span> <span class="kt">UIDevice</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">identifierForVendor</span><span class="p">?</span><span class="o">.</span><span class="n">uuidString</span> <span class="p">??</span> <span class="kt">UUID</span><span class="p">()</span><span class="o">.</span><span class="n">uuidString</span>
</pre></table></code></div></div><p><strong>唯需注意：當所有同Vendor的APP都移除後再重裝就會產生新的UUID (</strong> com.518.work跟com.518.job都被刪除，再裝回com.518.work這時就會產生新的UUID <strong>)</strong> <strong>同理如果你只有一個APP，刪掉重裝就會產生新的UUID</strong></p><p>因為這個特性，我們公司的其他APP是使用Key-Chain來解決這個問題，聽了講者前輩的指點也驗證了這個做法是正確的！</p><p><strong>流程如下：</strong></p><p><a href="/assets/a4bc3bce7513/1*-8rufG1QW-J5tn6ZadT17A.webp" class="popup img-link blur"><img data-src="/assets/a4bc3bce7513/1*-8rufG1QW-J5tn6ZadT17A.webp" alt="Key-Chain UUID欄位有值時取值，無則取IDFA的UUID值並回寫" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MDEiIGhlaWdodD0iNDQxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Key-Chain UUID欄位有值時取值，無則取IDFA的UUID值並回寫</p><p>Key-Chain 寫入方式：</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已複製！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">if</span> <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="kt">DEVICE_UUID</span><span class="o">.</span><span class="nf">data</span><span class="p">(</span><span class="nv">using</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">kSecClass</span> <span class="k">as</span> <span class="kt">String</span>       <span class="p">:</span> <span class="n">kSecClassGenericPassword</span> <span class="k">as</span> <span class="kt">String</span><span class="p">,</span>
        <span class="n">kSecAttrAccount</span> <span class="k">as</span> <span class="kt">String</span> <span class="p">:</span> <span class="s">"DEVICE_UUID"</span><span class="p">,</span>
        <span class="n">kSecValueData</span> <span class="k">as</span> <span class="kt">String</span>   <span class="p">:</span> <span class="n">data</span> <span class="p">]</span> <span class="k">as</span> <span class="p">[</span><span class="kt">String</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]</span>
    
    <span class="kt">SecItemDelete</span><span class="p">(</span><span class="n">query</span> <span class="k">as</span> <span class="kt">CFDictionary</span><span class="p">)</span>
    <span class="kt">SecItemAdd</span><span class="p">(</span><span class="n">query</span> <span class="k">as</span> <span class="kt">CFDictionary</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Key-Chain 讀取方式：</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已複製！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">kSecClass</span> <span class="k">as</span> <span class="kt">String</span>       <span class="p">:</span> <span class="n">kSecClassGenericPassword</span><span class="p">,</span>
    <span class="n">kSecAttrAccount</span> <span class="k">as</span> <span class="kt">String</span> <span class="p">:</span> <span class="s">"DEVICE_UUID"</span><span class="p">,</span>
    <span class="n">kSecReturnData</span> <span class="k">as</span> <span class="kt">String</span>  <span class="p">:</span> <span class="n">kCFBooleanTrue</span><span class="p">,</span>
    <span class="n">kSecMatchLimit</span> <span class="k">as</span> <span class="kt">String</span>  <span class="p">:</span> <span class="n">kSecMatchLimitOne</span> <span class="p">]</span> <span class="k">as</span> <span class="p">[</span><span class="kt">String</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]</span>

<span class="k">var</span> <span class="nv">dataTypeRef</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span>
<span class="k">let</span> <span class="nv">status</span><span class="p">:</span> <span class="kt">OSStatus</span> <span class="o">=</span> <span class="kt">SecItemCopyMatching</span><span class="p">(</span><span class="n">query</span> <span class="k">as</span> <span class="kt">CFDictionary</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dataTypeRef</span><span class="p">)</span>
<span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">noErr</span><span class="p">,</span><span class="k">let</span> <span class="nv">dataTypeRef</span> <span class="o">=</span> <span class="n">dataTypeRef</span> <span class="k">as?</span> <span class="kt">Data</span><span class="p">,</span><span class="k">let</span> <span class="nv">uuid</span> <span class="o">=</span> <span class="kt">String</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span><span class="n">dataTypeRef</span><span class="p">,</span> <span class="nv">encoding</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//uuid</span>
<span class="p">}</span> 
</pre></table></code></div></div><p>如果嫌 Key-Chain 操作太繁瑣可以自行封裝或使用第三方套件。</p><h4 id="完整code"><span class="me-2">完整CODE：</span><a href="#完整code" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已複製！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="k">let</span> <span class="nv">DEVICE_UUID</span><span class="p">:</span><span class="kt">String</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">kSecClass</span> <span class="k">as</span> <span class="kt">String</span>       <span class="p">:</span> <span class="n">kSecClassGenericPassword</span><span class="p">,</span>
        <span class="n">kSecAttrAccount</span> <span class="k">as</span> <span class="kt">String</span> <span class="p">:</span> <span class="s">"DEVICE_UUID"</span><span class="p">,</span>
        <span class="n">kSecReturnData</span> <span class="k">as</span> <span class="kt">String</span>  <span class="p">:</span> <span class="n">kCFBooleanTrue</span><span class="p">,</span>
        <span class="n">kSecMatchLimit</span> <span class="k">as</span> <span class="kt">String</span>  <span class="p">:</span> <span class="n">kSecMatchLimitOne</span> <span class="p">]</span> <span class="k">as</span> <span class="p">[</span><span class="kt">String</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]</span>
    
    <span class="k">var</span> <span class="nv">dataTypeRef</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span>
    <span class="k">let</span> <span class="nv">status</span><span class="p">:</span> <span class="kt">OSStatus</span> <span class="o">=</span> <span class="kt">SecItemCopyMatching</span><span class="p">(</span><span class="n">query</span> <span class="k">as</span> <span class="kt">CFDictionary</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dataTypeRef</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">noErr</span><span class="p">,</span><span class="k">let</span> <span class="nv">dataTypeRef</span> <span class="o">=</span> <span class="n">dataTypeRef</span> <span class="k">as?</span> <span class="kt">Data</span><span class="p">,</span><span class="k">let</span> <span class="nv">uuid</span> <span class="o">=</span> <span class="kt">String</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span><span class="n">dataTypeRef</span><span class="p">,</span> <span class="nv">encoding</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">uuid</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">DEVICE_UUID</span><span class="p">:</span><span class="kt">String</span> <span class="o">=</span> <span class="kt">UIDevice</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">identifierForVendor</span><span class="p">?</span><span class="o">.</span><span class="n">uuidString</span> <span class="p">??</span> <span class="kt">UUID</span><span class="p">()</span><span class="o">.</span><span class="n">uuidString</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="kt">DEVICE_UUID</span><span class="o">.</span><span class="nf">data</span><span class="p">(</span><span class="nv">using</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">kSecClass</span> <span class="k">as</span> <span class="kt">String</span>       <span class="p">:</span> <span class="n">kSecClassGenericPassword</span> <span class="k">as</span> <span class="kt">String</span><span class="p">,</span>
                <span class="n">kSecAttrAccount</span> <span class="k">as</span> <span class="kt">String</span> <span class="p">:</span> <span class="s">"DEVICE_UUID"</span><span class="p">,</span>
                <span class="n">kSecValueData</span> <span class="k">as</span> <span class="kt">String</span>   <span class="p">:</span> <span class="n">data</span> <span class="p">]</span> <span class="k">as</span> <span class="p">[</span><span class="kt">String</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]</span>
        
            <span class="kt">SecItemDelete</span><span class="p">(</span><span class="n">query</span> <span class="k">as</span> <span class="kt">CFDictionary</span><span class="p">)</span>
            <span class="kt">SecItemAdd</span><span class="p">(</span><span class="n">query</span> <span class="k">as</span> <span class="kt">CFDictionary</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kt">DEVICE_UUID</span>
    <span class="p">}</span>
<span class="p">}()</span>
</pre></table></code></div></div><p>因為我在其他Extension Target也需要參照所以直接包成一個閉包參數使用</p><p>有任何問題及指教歡迎 <a href="https://www.zhgchg.li/contact" target="_blank">與我聯絡</a> 。</p><script src="/assets/clipboard.min.js"></script><div style=" display:flex; align-items:center; gap:10px; border:1px solid #e5e7eb; background:#f9fafb; padding:12px 16px; border-radius:12px; margin:18px 0; box-shadow:0 3px 8px rgba(0,0,0,0.05); width: auto;"> <input id="share-url" value="https://zhgchg.li/posts/a4bc3bce7513/" readonly="" style=" flex:1; border:1px solid #d1d5db; border-radius:8px; padding:10px 12px; font-size:0.9rem; background:#ffffff; color:#111827; outline:none; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; " /> <button class="btn" data-clipboard-target="#share-url" id="copy-btn" style=" border:none; background:#3b82f6; color:white; padding:10px 16px; border-radius:10px; cursor:pointer; font-size:0.85rem; font-weight:600; display:flex; align-items:center; gap:6px; transition:all .15s ease; box-shadow:0 2px 5px rgba(59,130,246,0.35); " onmouseover="this.style.opacity='0.92';" onmouseout="this.style.opacity='1';"> <span style="font-size:1rem;">🔗</span> <span id="copy-btn-text">Copy link to share!</span> </button></div><script> new ClipboardJS('.btn'); var btn = document.getElementById("copy-btn"); var text = document.getElementById("copy-btn-text"); btn.addEventListener("click", function () { text.textContent = "Copied!"; btn.style.background = "#16a34a"; btn.style.boxShadow = "0 2px 6px rgba(22,163,74,0.35)"; setTimeout(() => { text.textContent = "Copy link to share!"; btn.style.background = "#3b82f6"; btn.style.boxShadow = "0 2px 5px rgba(59,130,246,0.35)"; }, 1500); });</script><hr /><p><a href="/contact" target="_blank" rel="noopener" style="display:block;margin:12px 0;text-align:center;align-items:center;justify-content:center;padding:10px 22px;border-radius:999px;text-decoration:none;background:linear-gradient(135deg,#ffd54f,#ffb300);color:#000;font-size:16px;font-weight:700;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;box-shadow:0 4px 10px rgba(0,0,0,.15);cursor:pointer;transition:all .15s ease;width:350px" onmouseover="this.style.background=&quot;linear-gradient(135deg,#FFE082,#FFC107)&quot;,this.style.transform=&quot;translateY(-1px)&quot;,this.style.boxShadow=&quot;0 6px 14px rgba(0,0,0,0.2)&quot;" onmouseout="this.style.background=&quot;linear-gradient(135deg,#FFD54F,#FFB300)&quot;,this.style.transform=&quot;translateY(0)&quot;,this.style.boxShadow=&quot;0 4px 10px rgba(0,0,0,0.15)&quot;">🍺 Buy me a beer on PayPal</a></p><blockquote class="prompt-tip"><p>👉👉👉 <a href="https://medium.com/@zhgchgli" target="_blank"><strong>Follow Me On Medium!</strong> (1,053+ Followers)</a> 👈👈👈</p></blockquote><blockquote class="prompt-info"><p>本文首次發表於 Medium (<a href="https://medium.com/p/a4bc3bce7513" target="_blank"><strong>點此查看原始版本</strong></a>)，由 <a href="/posts/tools/medium-to-jekyll/" target="_blank">ZMediumToMarkdown</a> 提供自動轉換與同步技術。</p></blockquote><blockquote class="prompt-info"><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/zh-tw/zmediumtomarkdown/2018-10-25-a4bc3bce7513.md" target="_blank">Improve this page on Github.</a></p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-dev/">ZRealm Dev.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/iplayground/" class="post-tag no-text-decoration" >iplayground</a> <a href="/tags/swift/" class="post-tag no-text-decoration" >swift</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios-app-development</a> <a href="/tags/uuid/" class="post-tag no-text-decoration" >uuid</a> <a href="/tags/idfv/" class="post-tag no-text-decoration" >idfv</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> 本文由作者以 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh-hant"> CC BY 4.0 </a> 授權。</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=iOS%20UUID%20%E8%A7%A3%E6%9E%90%EF%BD%9CSwift%E8%A3%9D%E7%BD%AE%E5%94%AF%E4%B8%80%E8%AD%98%E5%88%A5%E8%88%87IDFV%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%E5%85%A8%E6%94%BB%E7%95%A5%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fa4bc3bce7513%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=iOS%20UUID%20%E8%A7%A3%E6%9E%90%EF%BD%9CSwift%E8%A3%9D%E7%BD%AE%E5%94%AF%E4%B8%80%E8%AD%98%E5%88%A5%E8%88%87IDFV%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%E5%85%A8%E6%94%BB%E7%95%A5%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fa4bc3bce7513%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fa4bc3bce7513%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="複製連結" data-title-succeed="連結已成功複製！" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">最近更新</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/tools/ios-android-flutter-%E6%AF%8F%E6%97%A5%E8%87%AA%E5%8B%95%E8%81%B7%E7%BC%BA%E9%80%9A%E7%9F%A5-%E5%B9%AB%E4%BD%A0%E6%8A%93%E4%BD%8F%E6%9C%80%E6%96%B0%E5%B7%A5%E4%BD%9C%E6%A9%9F%E6%9C%83-appjobstw/">iOS/Android/Flutter 每日自動職缺通知，幫你抓住最新工作機會</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E5%B1%B1%E9%99%BD-%E5%B1%B1%E9%99%B0%E6%97%85%E9%81%8A%E5%85%A8%E6%94%BB%E7%95%A5-%E5%BB%A3%E5%B3%B6-%E5%B2%A1%E5%B1%B1%E6%99%AF%E9%BB%9E%E8%88%87%E4%BA%BA%E6%96%87%E6%AD%B7%E5%8F%B2%E4%B8%80%E6%AC%A1%E6%90%9E%E6%87%82-%E5%90%AB%E4%BA%A4%E9%80%9A-%E8%A1%8C%E7%A8%8B%E8%88%87%E6%8E%A5%E5%B1%B1%E9%99%B0%E7%8E%A9%E6%B3%95-sanin/">山陽×山陰旅遊全攻略：廣島、岡山景點與人文歷史一次搞懂（含交通、行程與接山陰玩法）</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/2026-%E7%86%B1%E6%B5%B7%E5%A4%8F%E5%AD%A3%E8%8A%B1%E7%81%AB%E5%A4%A7%E6%9C%83%E5%AE%8C%E5%85%A8%E6%94%BB%E7%95%A5-%E8%A7%80%E8%B3%9E%E5%9C%B0%E9%BB%9E-%E4%BA%A4%E9%80%9A-%E7%BE%8E%E9%A3%9F-%E4%BD%8F%E5%AE%BF-%E9%99%84%E8%BF%91%E6%99%AF%E9%BB%9E-%E4%B8%80%E6%97%A5%E9%81%8A%E8%A1%8C%E7%A8%8B-atami/">2026 熱海夏季花火大會完全攻略：觀賞地點、交通、美食、住宿、附近景點、一日遊行程</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/%E8%87%AA%E7%84%B6%E4%BA%BA%E6%86%91%E8%AD%89%E7%94%B3%E8%BE%A6%E8%88%87%E4%BD%BF%E7%94%A8%E5%85%A8%E6%94%BB%E7%95%A5-%E8%B2%BB%E7%94%A8-pin-%E8%AE%80%E5%8D%A1%E6%A9%9F-%E6%89%8B%E6%A9%9Fnfc-%E8%A1%8C%E5%8B%95%E8%87%AA%E7%84%B6%E4%BA%BA%E6%86%91%E8%AD%89-%E7%94%A8%E9%80%94%E4%B8%80%E6%AC%A1%E6%90%9E%E6%87%82-cdc/">自然人憑證申辦與使用全攻略：費用、PIN、讀卡機、手機NFC、行動自然人憑證、用途一次搞懂</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/ios-certificates-identifiers%E8%88%87profiles%E8%A9%B3%E8%A7%A3-fastlane-match%E7%B5%B1%E4%B8%80%E7%AE%A1%E7%90%86%E6%86%91%E8%AD%89%E8%88%87ci-cd%E6%95%B4%E5%90%88%E5%AF%A6%E6%88%B0-823ac523ccc8/">iOS Certificates, Identifiers & Profiles 是什麼及 Fastlane Match 統一管理憑證與 CI/CD 的一些筆記</a></ul></section><section><h2 class="panel-heading">熱門標籤</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E9%96%8B%E7%AE%B1/">開箱</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/travel/">travel</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">章節目錄 🔖</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">延伸閱讀</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-dev/iplayground-2019-%E5%8F%B0%E5%A4%A7%E5%8D%9A%E9%9B%85%E9%A4%A8%E6%8A%80%E8%A1%93%E7%9B%9B%E6%9C%83%E5%85%A8%E7%B4%80%E9%8C%84%E8%88%87swiftui-app%E5%AE%89%E5%85%A8%E7%B2%BE%E8%8F%AF%E8%A7%A3%E6%9E%90-4079036c85c2/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1569160038" data-df="YYYY 年 M 月 D 日" > 2019 年 09 月 22 日 </time><h4 class="pt-0 my-2">iPlayground 2019 是怎麼樣的體驗？</h4><div class="text-muted"><p>iPlayground 2019 火熱熱參加心得</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/ios-timer-%E8%88%87-dispatchsourcetimer-%E9%81%B8%E6%93%87%E8%88%87%E5%AE%89%E5%85%A8%E5%B0%81%E8%A3%9D%E6%8A%80%E5%B7%A7-%E6%9C%89%E9%99%90%E7%8B%80%E6%85%8B%E6%A9%9F%E9%98%B2%E6%AD%A2%E9%96%83%E9%80%80-62f68ebeecd3/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1765700226" data-df="YYYY 年 M 月 D 日" > 2025 年 12 月 14 日 </time><h4 class="pt-0 my-2">iOS Timer 與 DispatchSourceTimer 如何選擇與安全的使用?</h4><div class="text-muted"><p>使用有限狀態機與 Design Patterns 封裝 DispatchSourceTimer，使其更安全易用。</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-dev/xcode-%E5%8D%87%E7%B4%9A%E5%BF%85%E6%B8%AC-build-settings-%E5%84%AA%E5%8C%96%E7%AD%89%E7%B4%9A%E8%AA%BF%E6%95%B4%E5%BF%AB%E9%80%9F%E5%AE%9A%E4%BD%8D-release-%E7%89%88%E5%B9%BD%E9%9D%88%E9%96%83%E9%80%80%E5%95%8F%E9%A1%8C-ios-%E9%96%8B%E7%99%BC%E5%AF%A6%E6%88%B0%E6%8A%80%E5%B7%A7-7508328d8b8d/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1744383031" data-df="YYYY 年 M 月 D 日" > 2025 年 04 月 11 日 </time><h4 class="pt-0 my-2">通靈筆記 XCode 升級時最好測一下的事…</h4><div class="text-muted"><p>遇到僅在 Build Configuration Release (正式版、線上版)才會出現的幽靈閃退或程式邏輯問題，但是 Debug 安然無恙。</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/ios-app-3d-touch-%E5%8A%9F%E8%83%BD%E5%AF%A6%E4%BD%9C-swift-%E6%95%99%E5%AD%B8%E8%88%87%E9%A0%90%E8%A6%BD-%E6%8D%B7%E5%BE%91%E5%95%9F%E5%8B%95%E6%8A%80%E5%B7%A7-1ca246e27273/" class="btn btn-outline-primary" aria-label="上一篇" ><p>iOS APP 3D Touch 功能實作｜Swift 教學與預覽、捷徑啟動技巧</p></a> <a href="/posts/zrealm-dev/ios-12-%E9%9D%9C%E9%9F%B3%E6%8E%A8%E6%92%AD%E9%80%9A%E7%9F%A5%E6%AC%8A%E9%99%90-swift-%E8%87%A8%E6%99%82%E6%8E%88%E6%AC%8A%E5%AF%A6%E4%BD%9C%E8%88%87%E6%9C%80%E4%BD%B3%E5%8C%96%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90-ade9e745a4bf/" class="btn btn-outline-primary" aria-label="下一篇" ><p>什麼？iOS 12 不需使用者授權就能收到推播通知(Swift)</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2018 - 2026</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="除非另有註明，本網站上的所有文章皆由作者依據 創用 CC 姓名標示 4.0 國際授權條款（CC BY 4.0）授權使用。" >版權所有。</span> <br/> 瀏覽次數: <u>825,589+</u>, 最後更新時間: <u>2026-01-27 11:12:53 +08:00</u></p><p>本站使用 <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> 主題建置於 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>。<br/> Medium 文章由 <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a> 轉換而成。</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">熱門標籤</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/japan/">japan</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E9%96%8B%E7%AE%B1/">開箱</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a> <a class="post-tag btn btn-outline-primary" href="/tags/travel/">travel</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">發現有新的內容版本。</p><button type="button" class="btn btn-primary" aria-label="Update"> 更新 </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'zh-TW';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'General', 'data-category-id': 'DIC_kwDOHdowL84CU-q5', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">找不到符合的結果。</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
