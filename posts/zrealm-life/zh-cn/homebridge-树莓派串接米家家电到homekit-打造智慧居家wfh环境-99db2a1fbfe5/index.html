<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="HomeBridge｜树莓派串接米家家电到HomeKit，打造智慧居家WFH环境" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="透过树莓派架设HomeBridge主机，将米家智慧家电无缝接入Apple HomeKit，解决多APP切换与反应慢问题，达成iPhone一指控管家电、提升WFH居家舒适度与效率。" /><meta property="og:description" content="透过树莓派架设HomeBridge主机，将米家智慧家电无缝接入Apple HomeKit，解决多APP切换与反应慢问题，达成iPhone一指控管家电、提升WFH居家舒适度与效率。" /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-life/zh-cn/homebridge-%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E7%94%B5%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%8E%AF%E5%A2%83-99db2a1fbfe5/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-life/zh-cn/homebridge-%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E7%94%B5%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%8E%AF%E5%A2%83-99db2a1fbfe5/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-04-20T22:37:49+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp" /><meta property="twitter:title" content="HomeBridge｜树莓派串接米家家电到HomeKit，打造智慧居家WFH环境" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://www.linkedin.com/in/zhgchgli"},"dateModified":"2024-04-13T16:16:28+08:00","datePublished":"2020-04-20T22:37:49+08:00","description":"透过树莓派架设HomeBridge主机，将米家智慧家电无缝接入Apple HomeKit，解决多APP切换与反应慢问题，达成iPhone一指控管家电、提升WFH居家舒适度与效率。","headline":"HomeBridge｜树莓派串接米家家电到HomeKit，打造智慧居家WFH环境","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+","url":"https://zhgchg.li/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-life/zh-cn/homebridge-%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E7%94%B5%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%8E%AF%E5%A2%83-99db2a1fbfe5/"},"url":"https://zhgchg.li/posts/zrealm-life/zh-cn/homebridge-%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E7%94%B5%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%8E%AF%E5%A2%83-99db2a1fbfe5/"}</script><title>HomeBridge｜树莓派串接米家家电到HomeKit，打造智慧居家WFH环境 | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=false" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script><link rel="alternate" hreflang="en" href="/posts/zrealm-life/en/smart-wfh-home-setup-control-all-appliances-with-homekit-raspberry-pi-99db2a1fbfe5/"><link rel="alternate" hreflang="zh-Hant" href="/posts/zrealm-life/homebridge-%E6%A8%B9%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E9%9B%BB%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%92%B0%E5%A2%83-99db2a1fbfe5/"><link rel="alternate" hreflang="zh-Hans" href="/posts/zrealm-life/zh-cn/homebridge-%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E7%94%B5%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%8E%AF%E5%A2%83-99db2a1fbfe5/"><link rel="alternate" hreflang="x-default" href="/posts/zrealm-life/zh-cn/homebridge-%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E7%94%B5%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%8E%AF%E5%A2%83-99db2a1fbfe5/"><link rel="stylesheet" href="/assets/css/post-toc.css"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0">An iOS, web, and automation developer from Taiwan 🇹🇼 who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="https://medium.com/@zhgchgli" class="nav-link" target="_blank" style="background: #EDF4FF; color: #0A84FF;"> <i class="fa-brands fa-medium"></i> <span>Follow Me!<br/><strong>1,050+</strong> Followers</span> </a><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a><li class="nav-item"> <a href="/english/" class="nav-link"> <i class="fa-fw fa fa-solid fa-language"></i> <span>ENGLISH POSTS</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>HomeBridge｜树莓派串接米家家电到HomeKit，打造智慧居家WFH环境</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>HomeBridge｜树莓派串接米家家电到HomeKit，打造智慧居家WFH环境</h1><p class="post-desc fw-light mb-4">透过树莓派架设HomeBridge主机，将米家智慧家电无缝接入Apple HomeKit，解决多APP切换与反应慢问题，达成iPhone一指控管家电、提升WFH居家舒适度与效率。</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1587393469" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 20, 2020 </time> </span> <span> Updated <time data-ts="1712996188" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 13, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp" class="popup img-link preview-img blur"><img data-src="/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></div><div class="d-flex justify-content-between"> <span style="display: inline-flex; align-items: center; gap: 4px;"> By <em> <a href="https://www.linkedin.com/in/zhgchgli">ZhgChgLi</a> </em> | <em><a href="https://www.linkedin.com/in/zhgchgli" target="_blank">Senior Software Engineer</a></em><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" style="display: block; "><path fill="#007bff" d="M271.2 56C265.1 49.8 256.2 47.3 247.8 49.6C239.4 51.9 232.9 58.4 230.8 66.8L215.5 127C214.4 131.4 209.9 134 205.6 132.7L145.8 115.9C137.4 113.5 128.4 115.9 122.3 122C116.2 128.1 113.8 137.1 116.2 145.5L133.1 205.3C134.3 209.6 131.7 214.1 127.4 215.2L67.1 230.5C58.7 232.6 52.1 239.2 49.8 247.6C47.5 256 50 264.9 56.2 271L100.7 314.3C103.9 317.4 103.9 322.6 100.7 325.8L56.3 369.1C50.1 375.2 47.6 384.1 49.9 392.5C52.2 400.9 58.8 407.4 67.2 409.6L127.4 424.9C131.8 426 134.4 430.5 133.1 434.8L116.2 494.5C113.8 502.9 116.2 511.9 122.3 518C128.4 524.1 137.4 526.5 145.8 524.1L205.6 507.2C209.9 506 214.4 508.6 215.5 512.9L230.8 573.1C232.9 581.5 239.5 588.1 247.9 590.4C256.3 592.7 265.2 590.2 271.3 584L314.6 539.5C317.7 536.3 322.9 536.3 326.1 539.5L369.3 584C375.4 590.2 384.3 592.7 392.7 590.4C401.1 588.1 407.6 581.5 409.8 573.1L425.1 513C426.2 508.6 430.7 506 435 507.3L494.8 524.2C503.2 526.6 512.2 524.2 518.3 518.1C524.4 512 526.8 503 524.4 494.6L507.5 434.8C506.3 430.5 508.9 426 513.2 424.9L573.4 409.6C581.8 407.5 588.4 400.9 590.7 392.5C593 384.1 590.5 375.1 584.3 369.1L539.8 325.8C536.6 322.7 536.6 317.5 539.8 314.3L584.3 271C590.5 264.9 593 256 590.7 247.6C588.4 239.2 581.8 232.7 573.4 230.5L513.2 215.2C508.8 214.1 506.2 209.6 507.5 205.3L524.4 145.5C526.8 137.1 524.4 128.1 518.3 122C512.2 115.9 503.2 113.5 494.8 115.9L435 132.8C430.7 134 426.2 131.4 425.1 127.1L409.8 66.8C407.7 58.4 401.1 51.8 392.7 49.5C384.3 47.2 375.4 49.7 369.3 55.9L326 100.5C322.9 103.7 317.7 103.7 314.5 100.5L271.2 56z"/><path d="M250 330 l60 60 100 -140" stroke="#ffffff" stroke-width="40" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="6882 words" > <em>38 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">HomeBridge｜树莓派串接米家家电到HomeKit，打造智慧居家WFH环境</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Chapters 🔖</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">HomeBridge｜树莓派串接米家家电到HomeKit，打造智慧居家WFH环境</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><blockquote class="prompt-tip"><p><a href="/posts/zrealm-life/en/smart-wfh-home-setup-control-all-appliances-with-homekit-raspberry-pi-99db2a1fbfe5/"><strong>Click here</strong></a> to view the English version of this article.</p></blockquote><blockquote class="prompt-tip"><p><a href="/posts/zrealm-life/homebridge-%E6%A8%B9%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E9%9B%BB%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%92%B0%E5%A2%83-99db2a1fbfe5/"><strong>點擊這裡</strong></a>查看本文章正體中文版本。</p></blockquote><blockquote class="prompt-info"><p>基于 SEO 考量，本文标题与描述经 AI 调整，原始版本请参考内文。</p></blockquote><h4 id="zhgchgli-table-of-contents">文章目录</h4><nav class="zhgchgli-toc"><ul class="zhgchgli-toc-list"><li><a href="#打造舒适的-wfh-智慧居家环境控制家电尽在指尖">打造舒适的 WFH 智慧居家环境，控制家电尽在指尖</a></li><li><a href="#关于">关于</a></li><li><a href="#我的米家智慧家居项目">我的米家智慧家居项目</a></li><li><a href="#运作原理">运作原理</a></li><li><a href="#需求环境">需求环境</a></li><li class="has-children"><details><summary>树莓派环境设定 <a href="#树莓派环境设定">#</a></summary><ul><li><a href="#烧录作业系统">烧录作业系统</a></li></ul></details></li><li class="has-children"><details><summary>设定树莓派 <a href="#设定树莓派">#</a></summary><ul><li><a href="#查看树莓派分配到的-ip-位置">查看树莓派分配到的 IP 位置</a></li><li><a href="#使用-ssh-连入树莓派进行操作">使用 SSH 连入树莓派进行操作</a></li><li><a href="#树莓派基本工具安装设定">树莓派基本工具安装、设定</a></li><li><a href="#启用树莓派-vnc-远端桌面功能">启用树莓派 VNC 远端桌面功能</a></li><li><a href="#将-vnc-远端桌面服务加入到开机自动启动项">将 VNC 远端桌面服务加入到开机自动启动项</a></li><li><a href="#使用-vnc-client-进行连线">使用 VNC Client 进行连线</a></li><li><a href="#完成树莓派初始化设定">完成树莓派初始化设定</a></li></ul></details></li><li class="has-children"><details><summary>HomeBridge 安装 <a href="#homebridge-安装">#</a></summary><ul><li><a href="#建立修改设定档configjson">建立/修改设定档(config.json)</a></li><li><a href="#绑定-homebridge-到-homekit">绑定 HomeBridge 到 Homekit</a></li><li><a href="#将-homebridge-服务加入树莓派开机自动启动项目">将 HomeBridge 服务加入树莓派开机自动启动项目</a></li></ul></details></li><li><a href="#米家智慧家电串接前准备">米家智慧家电串接前准备</a></li><li class="has-children"><details><summary>将米家智慧家电逐个串入 HomeBridge <a href="#将米家智慧家电逐个串入-homebridge">#</a></summary><ul><li><a href="#1米家摄影机云台版">1.米家摄影机云台版</a></li><li><a href="#2米家直流变频电风扇">2.米家直流变频电风扇</a></li><li><a href="#3小米空气净化器-3">3.小米空气净化器 3</a></li><li><a href="#4米家-led-智慧台灯">4.米家 LED 智慧台灯</a></li><li><a href="#其他米家智慧家电-homebridge-套件">其他米家智慧家电 homebridge 套件</a></li></ul></details></li><li><a href="#小叮咛">小叮咛</a></li><li class="has-children"><details><summary>结语 <a href="#结语">#</a></summary><ul><li><a href="#home-assistant">Home assistant</a></li><li><a href="#参考资料">参考资料</a></li></ul></details></li><li><a href="#延伸阅读">延伸阅读</a></li></ul></nav><hr /><h3 id="打造舒适的-wfh-智慧居家环境控制家电尽在指尖"><span class="me-2">打造舒适的 WFH 智慧居家环境，控制家电尽在指尖</span><a href="#打造舒适的-wfh-智慧居家环境控制家电尽在指尖" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>示范使用树莓派当 HomeBridge 主机，将所有米家家电串上 HomeKit</p><p><a href="/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp" alt="photo by [picjumbo.com](https://www.pexels.com/zh-tw/@picjumbo-com-55570?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjkzMyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>photo by <a href="https://www.pexels.com/zh-tw/@picjumbo-com-55570?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" target="_blank">picjumbo.com</a></p><h3 id="关于"><span class="me-2">关于</span><a href="#关于" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>因为疫情的关系，在家时间变长了；尤其是要 Work From Home 的话，家里的电器设备最好都能在 APP 上智能控制，就不用一下子离开去开灯、一下子去开电锅…等等，很浪费时间。</p><p>之前写过一篇「 <a href="/posts/zrealm-life/zh-cn/apple-homekit-%E4%B8%8E%E5%B0%8F%E7%B1%B3%E7%B1%B3%E5%AE%B6%E6%99%BA%E6%85%A7%E5%AE%B6%E5%B1%85%E6%95%B4%E5%90%88%E6%94%BB%E7%95%A5-homebridge-%E4%B8%B2%E6%8E%A5%E8%AE%BE%E5%AE%9A%E4%B8%8E%E8%87%AA%E5%8A%A8%E5%8C%96%E6%95%99%E5%AD%A6-c3150cdc85dd/"><strong>智慧家居初体验 — Apple HomeKit &amp; 小米米家</strong></a> <strong>」</strong> ，初试使用 HomeBridge 将小米家电串上 HomeKit，实证理论上可行，但实际应用提到的不多，今天这篇算是综合前篇的进阶完整版，包含选择树莓派当主机的话该怎么设定，从头到尾手把手教学。</p><p>起因是最近换了 iPhone 11 Pro 能支援 iOS ≥ 13 捷径的 NFC 自动化功能，就是手机感应到 NFC Tag 就能执行相应的捷径；虽然 <strong>可以直接拿旧的悠游卡当 NFC Tag</strong> ，但太占空间也没那么多张卡；我去光华问了一圈都没有再卖 NFC Tag 感应贴纸，最后才在虾皮找到 $50 一张，买了 5 张来玩玩，卖家还很贴心的帮我用颜色区隔开。</p><p><a href="/assets/99db2a1fbfe5/1*6ftbgAxlvmdv-35of98ohA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*6ftbgAxlvmdv-35of98ohA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNDM1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><em>*NFC 自动化功能是绑机型的，只有 iPhone XS/XS max/XR/11/11pro/11pro max 支援这个功能，之前拿 iPhone 8 完全没 NFC这选项。</em></p><p>稍微把玩了一下发现有个问题，就是执行米家 APP 的捷径时一定要打开「执行时显示」选项（否则不会真的执行）， <strong>感应到 Tag 要执行时还要解锁 iPhone 、执行时也会开启捷径，无法在后台直接感应执行</strong> ；另外实测了如果捷径是原生苹果的服务（如：HomeKit 的家电）就能在背景&amp;免解锁下直接执行；而且 homeKit 的反应速度、稳定度都比米家好很多。</p><p>这在爽度上有很大的差别，所以就又深入研究了将米家智慧家居系列的产品都接上 HomeKit，有支援 HomeKit 的就直接绑定本篇不赘述；不支援的就照此文教学也一起绑定上去！</p><h3 id="我的米家智慧家居项目"><span class="me-2">我的米家智慧家居项目</span><a href="#我的米家智慧家居项目" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><p>米家智慧摄影机 云台版 1080P</p><li><p>米家直流变频电风扇</p><li><p>米家 LED 智慧台灯</p><li><p>小米空气净化器 3</p><li><p>米家台灯 Pro（本身就支援 HomeKit）</p><li><p>米家 LED 智慧灯泡 彩光版 * 2 （本身就支援 HomeKit）</p></ol><h3 id="运作原理"><span class="me-2">运作原理</span><a href="#运作原理" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/99db2a1fbfe5/1*7p0ehajJqdqb4-_w9uHt7g.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*7p0ehajJqdqb4-_w9uHt7g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MzgiIGhlaWdodD0iNjgxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>做了一张简易的参考图，如果智慧家电有支援 HomeKit 就直接串上去、 <strong>不支援的智慧家电透过架设「HomeBridge」服务主机（要一直开机）也能桥接串上去</strong> ；在同一个网路环境下（EX: 同个 WiFi）iPhone 可以自由地控制 HomeKit 中的所有家电项目；但若在外部网路，如 <strong>4G 行动网路情况下，就需要有一台 Apple TV/HomePod 或 iPad 当家庭中枢主机，在家待命（一样要一直开著）</strong> 才能在外面控制家中的 HomeKit，若无家庭中枢在外面打开家庭 APP 会显示「 <strong>无回应</strong> 」。</p><blockquote><p>*若是米家的话，会经由米家伺服器控制家里的电器，要说的话 <strong>会有安全问题，资料都要经过大陆</strong> 。</p></blockquote><h3 id="需求环境"><span class="me-2">需求环境</span><a href="#需求环境" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>所以一共有两个设备要一直开著待命，一台是 Apple TV/HomePod 或 iPad 家庭中枢主机；这部分目前无解，无法用其他方式模拟，只能想办法取得这些设备，如果没有就只能在家使用 HomeKit <strong>。</strong></p><p>另一台只要是能 24 hr 待命的电脑（如您的 iMac/MacBook）、闲置的主机（旧的 iMac、Mac Mini）或树莓派都可以。</p><blockquote><p>*windows 系列未尝试，不过应该也可以！</p></blockquote><p>亦或是你想玩玩也可以直接用目前的电脑来用（可搭配 <a href="/posts/zrealm-life/zh-cn/apple-homekit-%E4%B8%8E%E5%B0%8F%E7%B1%B3%E7%B1%B3%E5%AE%B6%E6%99%BA%E6%85%A7%E5%AE%B6%E5%B1%85%E6%95%B4%E5%90%88%E6%94%BB%E7%95%A5-homebridge-%E4%B8%B2%E6%8E%A5%E8%AE%BE%E5%AE%9A%E4%B8%8E%E8%87%AA%E5%8A%A8%E5%8C%96%E6%95%99%E5%AD%A6-c3150cdc85dd/">前篇文章</a> 一起服用）。</p><p>本文将以树莓派（Raspberry Pi 3B）、使用 Macbook Pro (MacOS 10.15.4) 操作下作示范，从设定树莓派的环境从头开始讲；若不是使用树莓派的朋友可以直接略过跳到 HomeBridge 串接 HomeKit 的部分（这里都一样）。</p><p><a href="/assets/99db2a1fbfe5/1*go-wGMdV1VVbJ3c00rh0_w.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*go-wGMdV1VVbJ3c00rh0_w.webp" alt="Raspberry Pi 3B (special thanks to [Lu Xun Huang](https://medium.com/u/b32ce1b681f8){:target=&quot;_blank&quot;} )" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjE4NjciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>Raspberry Pi 3B (special thanks to <a href="https://medium.com/u/b32ce1b681f8" target="_blank">Lu Xun Huang</a> )</p><p><strong>若是使用树莓派还需要一张 micro SD 记忆卡（不用太大，我用 8G）、读卡机、网路线（设定用，之后可连 WiFi）；还有树莓派需要的软体：</strong></p><ol><li><p><a href="https://downloads.raspberrypi.org/raspbian_latest" target="_blank">树莓派桌面版作业系统（方便大家入门，使用 GUI 版）</a></p><li><p><a href="https://www.balena.io/etcher/" target="_blank">Etcher 烧录软体</a></p></ol><h3 id="树莓派环境设定"><span class="me-2">树莓派环境设定</span><a href="#树莓派环境设定" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="烧录作业系统"><span class="me-2">烧录作业系统</span><a href="#烧录作业系统" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>下载完需求的两个软体后，我们先将记忆卡放入读卡机插上电脑；打开 Etcher 程式（balenaEtcher）</p><p><a href="/assets/99db2a1fbfe5/1*3YcqdSf9z5RNqD6KJkd4Nw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*3YcqdSf9z5RNqD6KJkd4Nw.webp" alt="第一项选择刚下载的树莓派作业系统「xxxx.img」、第二项选择你的记忆卡装置，然后点击「Flash!」开始烧录！" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNTkyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>第一项选择刚下载的树莓派作业系统「xxxx.img」、第二项选择你的记忆卡装置，然后点击「Flash!」开始烧录！</p><p><a href="/assets/99db2a1fbfe5/1*o9XE1WYrBpeKSE31Ob9gcQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*o9XE1WYrBpeKSE31Ob9gcQ.webp" alt="此时会跳出要你输入 **MacOS 的密码** ，输入后按「Ok」继续。" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MzIiIGhlaWdodD0iMjg3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>此时会跳出要你输入 <strong>MacOS 的密码</strong> ，输入后按「Ok」继续。</p><p><a href="/assets/99db2a1fbfe5/1*Z9oOKg9KPMpj3TZfvOvYeA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Z9oOKg9KPMpj3TZfvOvYeA.webp" alt="烧录中…请稍候…." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNTkyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>烧录中…请稍候….</p><p><a href="/assets/99db2a1fbfe5/1*2G930lN4q4MVs4LCeE5y1w.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*2G930lN4q4MVs4LCeE5y1w.webp" alt="验证中…请稍候…." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNTkyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>验证中…请稍候….</p><p><a href="/assets/99db2a1fbfe5/1*CEB4bAMTQshY3u7MEC3q5w.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*CEB4bAMTQshY3u7MEC3q5w.webp" alt="烧录成功！" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNTkyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>烧录成功！</p><blockquote><p>*若有出现红色的 Error ，可尝试将记忆卡格式化后再次烧录。</p></blockquote><p>重新将读卡机接上电脑，并在记忆卡内容目录下建立一个空的 「ssh」 档案（ <a href="https://drive.google.com/file/d/1vSiMkRB1-5tO1hD4YnXxUcULTnCJBIFX/view?usp=sharing" target="_blank">或点此下载</a> ）内容空白、不用副档名，就是个「ssh」档；让我们可以用 <strong>Terminal</strong> 连线进树莓派。</p><p><a href="/assets/99db2a1fbfe5/1*aGJHebPl5MMf4iy0Um9bjg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*aGJHebPl5MMf4iy0Um9bjg.webp" alt="ssh" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTQ1IiBoZWlnaHQ9Ijc5NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>ssh</p><h3 id="设定树莓派"><span class="me-2">设定树莓派</span><a href="#设定树莓派" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>将记忆卡退出，插入树莓派上并接上网路线，然后通电开机；并让 MacBook 跟树莓派在同个网路环境下。</p><h4 id="查看树莓派分配到的-ip-位置"><span class="me-2"><strong>查看树莓派分配到的 IP 位置</strong></span><a href="#查看树莓派分配到的-ip-位置" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/99db2a1fbfe5/1*6HZ0Fqp6cgpn1F3_4UwM0Q.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*6HZ0Fqp6cgpn1F3_4UwM0Q.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjQ1NCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>得到 树莓派分配到的 IP 位置是： <strong>192.168.0.110 (本文所有出现的 IP 请自行更换成你查到的结果)</strong></p><blockquote><p><strong><em>建议将树莓派设定为指定/保留 IP，否则开机重连后 IP 位置可能会变动，要重新查。</em></strong></p></blockquote><h4 id="使用-ssh-连入树莓派进行操作"><span class="me-2">使用 SSH 连入树莓派进行操作</span><a href="#使用-ssh-连入树莓派进行操作" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>打开 Terminal 输入：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh pi@你的树莓派IP位址
</pre></table></code></div></div><p>有询问就输入 <code class="language-plaintext highlighter-rouge">yes</code> ，密码输入预设密码： <code class="language-plaintext highlighter-rouge">raspberry</code></p><p><a href="/assets/99db2a1fbfe5/1*okEJeW9xZN8XFfRYJyp4Xg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*okEJeW9xZN8XFfRYJyp4Xg.webp" alt="**连线成功！**" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NzIiIGhlaWdodD0iNDA1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>连线成功！</strong></p><blockquote><p>*若有出现 WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED 之类的错误讯息就先去 /Users/xxxx/.ssh/known_hosts 用文字编辑器打开清空即可</p></blockquote><h4 id="树莓派基本工具安装设定"><span class="me-2">树莓派基本工具安装、设定</span><a href="#树莓派基本工具安装设定" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li><strong>输入以下指令安装 Vim 编辑器：</strong></ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get <span class="nb">install </span>vim
</pre></table></code></div></div><p><a href="/assets/99db2a1fbfe5/1*QfhJwWvicEGfk_8PFLy7pA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*QfhJwWvicEGfk_8PFLy7pA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMTAiIGhlaWdodD0iMTYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><strong>2.解决以下语系警告：</strong></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
    LANGUAGE = (unset),
    LC_ALL = (unset),
    LC_LANG = "zh_TW.UTF-8",
    LANG = "zh_TW.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").
</pre></table></code></div></div><p><strong>输入</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>vi .bashrc
</pre></table></code></div></div><p>按「Enter」进入</p><p>按「 <code class="language-plaintext highlighter-rouge">i</code> 」进入编辑模式</p><p>移动到文件最底部，加上一行「 <code class="language-plaintext highlighter-rouge">export LC_ALL=C</code> 」</p><p>按「Esc」输入「 <code class="language-plaintext highlighter-rouge">:wq!</code> 」储存退出。</p><p>再下「 <code class="language-plaintext highlighter-rouge">source .bashrc</code> 」更新即可。</p><p><a href="/assets/99db2a1fbfe5/1*Z3E5QTXErDmmNVRd5QYo8g.gif" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Z3E5QTXErDmmNVRd5QYo8g.gif" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1ODgiIGhlaWdodD0iNDc0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>3.安装 nvm 管理 nodejs/npm：</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>curl <span class="nt">-o-</span> https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh <span class="se">\\</span>| bash
</pre></table></code></div></div><p><strong>4.用 nvm 安装最新版 <a href="https://nodejs.org/en/" target="_blank">nodejs</a> ：</strong></p><p><code class="language-plaintext highlighter-rouge">nvm install 12.16.2</code></p><blockquote><p>*这边选择安装「12.16.2」版本</p></blockquote><p><strong>5.确认环境安装完成：</strong></p><p><strong>输入以下指令</strong></p><p><code class="language-plaintext highlighter-rouge">npm -v</code></p><p><strong>和</strong></p><p><code class="language-plaintext highlighter-rouge">node -v</code></p><p><strong>确认</strong></p><p><a href="/assets/99db2a1fbfe5/1*u3xgdplBB-7DyvSpAJU4dA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*u3xgdplBB-7DyvSpAJU4dA.webp" alt="没错误讯息即可！" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MTIiIGhlaWdodD0iMjExIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>没错误讯息即可！</p><p><strong>6.建立 nodejs 连结</strong></p><p><strong>输入以下指令</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>which node
</pre></table></code></div></div><p>取得 nodejs 所在路径资讯</p><p><strong>再输入</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo ln</span> <span class="nt">-fs</span> 这边贴上你 which node 查到的路径<span class="o">(</span>不用<span class="s2">"双引号) /usr/local/bin/node
</span></pre></table></code></div></div><p><strong>建立连结</strong></p><p><a href="/assets/99db2a1fbfe5/1*L5C-2SCUV-Cf4yCDwYy8eg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*L5C-2SCUV-Cf4yCDwYy8eg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MTciIGhlaWdodD0iMjM5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>设定完成！</strong></p><h4 id="启用树莓派-vnc-远端桌面功能"><span class="me-2"><strong>启用树莓派 VNC 远端桌面功能</strong></span><a href="#启用树莓派-vnc-远端桌面功能" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>这边我们虽然是装 GUI 版，你当然可以直接将树莓派接上键盘、HDMI 当一般电脑使用，但为了方便我们将使用远端桌面的方式控制树莓派。</p><p><strong>输入：</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>raspi-config
</pre></table></code></div></div><p><a href="/assets/99db2a1fbfe5/1*_Hwvt6tkKhsNE9TDkOaYAA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*_Hwvt6tkKhsNE9TDkOaYAA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDciIGhlaWdodD0iMjExIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>进入设定：</strong></p><p><a href="/assets/99db2a1fbfe5/1*_EMj-6phsY5PjrPjqeavDg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*_EMj-6phsY5PjrPjqeavDg.webp" alt="选择第五项「 **Interfacing Options** 」" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTQiIGhlaWdodD0iNzE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>选择第五项「 <strong>Interfacing Options</strong> 」</p><p><a href="/assets/99db2a1fbfe5/1*CAHN3qczUpajbGGU9gaD9g.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*CAHN3qczUpajbGGU9gaD9g.webp" alt="选择第三项「 **P3 VNC** 」" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTQiIGhlaWdodD0iNzE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>选择第三项「 <strong>P3 VNC</strong> 」</p><p><a href="/assets/99db2a1fbfe5/1*wq4S5b33MpAJUiqt9z1EMg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*wq4S5b33MpAJUiqt9z1EMg.webp" alt="使用 「 **←** 」选择「 **Yes** 」打开" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTQiIGhlaWdodD0iNzE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>使用 「 <strong>←</strong> 」选择「 <strong>Yes</strong> 」打开</p><p><a href="/assets/99db2a1fbfe5/1*sTZ8x9M-_5FRwdqy4mKvPw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*sTZ8x9M-_5FRwdqy4mKvPw.webp" alt="**VNC 远端桌面功能启用成功！**" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTQiIGhlaWdodD0iNzE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>VNC 远端桌面功能启用成功！</strong></p><p><a href="/assets/99db2a1fbfe5/1*81Y7wZjbSS8Tf5Z_OHi3Rw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*81Y7wZjbSS8Tf5Z_OHi3Rw.webp" alt="使用 「 **→** 」直接切到「 **Finish** 」退出设定介面。" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTQiIGhlaWdodD0iNzE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>使用 「 <strong>→</strong> 」直接切到「 <strong>Finish</strong> 」退出设定介面。</p><h4 id="将-vnc-远端桌面服务加入到开机自动启动项"><span class="me-2"><strong>将 VNC 远端桌面服务加入到开机自动启动项</strong></span><a href="#将-vnc-远端桌面服务加入到开机自动启动项" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>我们希望 VNC 远端桌面服务是树莓派开机后就自动启用的。</p><p><strong>输入</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/init.d/vncserver
</pre></table></code></div></div><p>按「Enter」进入</p><p>按「 <code class="language-plaintext highlighter-rouge">i</code> 」进入编辑模式</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>
<span class="c">### BEGIN INIT INFO</span>
<span class="c"># Provides:          vncserver</span>
<span class="c"># Required-Start:    $local_fs</span>
<span class="c"># Required-Stop:     $local_fs</span>
<span class="c"># Default-Start:     2 3 4 5</span>
<span class="c"># Default-Stop:      0 1 6</span>
<span class="c"># Short-Description: Start/stop vncserver</span>
<span class="c">### END INIT INFO</span>

<span class="c"># More details see:</span>
<span class="c"># http://www.penguintutor.com/linux/vnc</span>

<span class="c">### Customize this entry</span>
<span class="c"># Set the USER variable to the name of the user to start vncserver under</span>
<span class="nb">export </span><span class="nv">USER</span><span class="o">=</span><span class="s1">'pi'</span>
<span class="c">### End customization required</span>

<span class="nb">eval cd</span> ~<span class="nv">$USER</span>

<span class="k">case</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="k">in
  </span>start<span class="p">)</span>
    su <span class="nv">$USER</span> <span class="nt">-c</span> <span class="s1">'/usr/bin/vncserver -depth 16 -geometry 1024x768 :1'</span>
    <span class="nb">echo</span> <span class="s2">"Starting VNC server for </span><span class="nv">$USER</span><span class="s2"> "</span>
    <span class="p">;;</span>
  stop<span class="p">)</span>
    su <span class="nv">$USER</span> <span class="nt">-c</span> <span class="s1">'/usr/bin/vncserver -kill :1'</span>
    <span class="nb">echo</span> <span class="s2">"vncserver stopped"</span>
    <span class="p">;;</span>
  <span class="k">*</span><span class="p">)</span>
    <span class="nb">echo</span> <span class="s2">"Usage: /etc/init.d/vncserver {start</span><span class="se">\\</span><span class="s2">|stop}"</span>
    <span class="nb">exit </span>1
    <span class="p">;;</span>
<span class="k">esac</span>
<span class="nb">exit </span>0
</pre></table></code></div></div><p>「Commend」＋「C」、「Commend」＋「V」复制贴上以上内容进去，按「Esc」输入「:wq!」储存退出。</p><p><strong>再输入：</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo chmod </span>755 /etc/init.d/vncserver
</pre></table></code></div></div><p>修改文件权限。</p><p><strong>再输入：</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>update-rc.d vncserver defaults
</pre></table></code></div></div><p>加入到开机自动启动项目。</p><p><strong>最后输入：</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>reboot
</pre></table></code></div></div><p><strong>重新启动树莓派。</strong></p><blockquote><p>*重新启动完成后，再照之前的步骤重新使用 ssh 连线进来。</p></blockquote><h4 id="使用-vnc-client-进行连线"><span class="me-2"><strong>使用 VNC Client 进行连线：</strong></span><a href="#使用-vnc-client-进行连线" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>这边使用的是 Chrome 的 APP 「 <a href="https://chrome.google.com/webstore/detail/vnc%C2%AE-viewer-for-google-ch/iabmpiboiopbgfabjmgeedhcmjenhbla" target="_blank">VNC® Viewer for Google Chrome™</a> 」，安装完启动后，输入 <strong>树莓派 IP 位置:1</strong> ，请注意后面的 <strong>Port:1</strong> 要加上！</p><blockquote><p>*我使用 Mac 自带的 VNC:// 无法连线，不确定原因。</p></blockquote><p><a href="/assets/99db2a1fbfe5/1*83cR8b2ajhPc1IwariNVBw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*83cR8b2ajhPc1IwariNVBw.webp" alt="点选「 **Connect** 」。" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>点选「 <strong>Connect</strong> 」。</p><p><a href="/assets/99db2a1fbfe5/1*B0esYM-GvrYUVXIwpq4vvQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*B0esYM-GvrYUVXIwpq4vvQ.webp" alt="点选「 **ＯＫ** 」。" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>点选「 <strong>ＯＫ</strong> 」。</p><p><a href="/assets/99db2a1fbfe5/1*jJ8cdRrc4bGHDxPvF7xXhw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*jJ8cdRrc4bGHDxPvF7xXhw.webp" alt="**输入登入帐号密码** ，同 SSH 连线，帐号 `pi` 预设密码 `raspberry` 。" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>输入登入帐号密码</strong> ，同 SSH 连线，帐号 <code class="language-plaintext highlighter-rouge">pi</code> 预设密码 <code class="language-plaintext highlighter-rouge">raspberry</code> 。</p><p><a href="/assets/99db2a1fbfe5/1*vIUEmBrO-t_-6xy_kPNLNQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*vIUEmBrO-t_-6xy_kPNLNQ.webp" alt="**成功连入！**" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>成功连入！</strong></p><h4 id="完成树莓派初始化设定"><span class="me-2"><strong>完成树莓派初始化设定：</strong></span><a href="#完成树莓派初始化设定" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>再来都是图形介面！很容易！</p><p><a href="/assets/99db2a1fbfe5/1*w9qXfybKr4REKN8hrJJUBw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*w9qXfybKr4REKN8hrJJUBw.webp" alt="设定语言、地区、时区。" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>设定语言、地区、时区。</p><p><a href="/assets/99db2a1fbfe5/1*xeb6Pr5FUwQGYHhzmid-6w.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*xeb6Pr5FUwQGYHhzmid-6w.webp" alt="更改树莓派预设密码，输入你要设定的密码。" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NjgiIGhlaWdodD0iNzEyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>更改树莓派预设密码，输入你要设定的密码。</p><p><a href="/assets/99db2a1fbfe5/1*o-LCjlYXdW7hmxYjIE6Axw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*o-LCjlYXdW7hmxYjIE6Axw.webp" alt="直接下一步「 **Next** 」。" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>直接下一步「 <strong>Next</strong> 」。</p><p><a href="/assets/99db2a1fbfe5/1*NPZqliJZslnmvzzkW-Zj6g.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*NPZqliJZslnmvzzkW-Zj6g.webp" alt="设定使用 WiFi 连线，之后就不用在插线了。" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>设定使用 WiFi 连线，之后就不用在插线了。</p><blockquote><p>*但请注意树莓派 IP位置可能会改变，要再进路由器查询</p></blockquote><p><a href="/assets/99db2a1fbfe5/1*lsnk0BDb_z1VKkXYxUi7fg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*lsnk0BDb_z1VKkXYxUi7fg.webp" alt="是否要更新当前作业系统，不赶时间就选「 **Next** 」更新吧！" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>是否要更新当前作业系统，不赶时间就选「 <strong>Next</strong> 」更新吧！</p><blockquote><p>*更新大约需要20~30分钟（依照你的网路速度）</p></blockquote><p><a href="/assets/99db2a1fbfe5/1*Xgm6NMQNoom_Zee3QHWXZg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Xgm6NMQNoom_Zee3QHWXZg.webp" alt="更新完成后，点击「 **Restart** 」重新启动。" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>更新完成后，点击「 <strong>Restart</strong> 」重新启动。</p><p><strong>树莓派环境设定完成！</strong></p><h3 id="homebridge-安装"><span class="me-2">HomeBridge 安装</span><a href="#homebridge-安装" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>正式进入重头戏，安装使用 HomeBridge。</p><p>使用Terminal ssh 连线进树莓派或直接使用 VNC 远端桌面里的 Terminal。</p><p><strong>输入：</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nt">-g</span> <span class="nb">install </span>homebridge - unsafe-perm
</pre></table></code></div></div><p>^( <strong>不加 sudo</strong> )</p><p>安装 <strong>HomeBridge</strong></p><p><a href="/assets/99db2a1fbfe5/1*feOCt_Gyy8DEW7qHA2bpQw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*feOCt_Gyy8DEW7qHA2bpQw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTQiIGhlaWdodD0iMjUzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>安装完成！</strong></p><h4 id="建立修改设定档configjson"><span class="me-2">建立/修改设定档(config.json)：</span><a href="#建立修改设定档configjson" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>为了方便编辑，使用 VNC 远端桌面连线至树莓派</strong> (也可直接用指令) <strong>：</strong></p><p>点左上角打开「 <strong>档案管理程式</strong> 」-&gt; 进入「 <strong>/home/pi/.homebridge</strong> 」</p><p>若没看到「config.json」档案则在空白处点右键「 <strong>New File</strong> 」-&gt; 输入档案名称「 <strong>config.json</strong> 」</p><p>在「 <strong>config.json</strong> 」上按右键用「 <strong>Text Editor</strong> 」打开</p><p><a href="/assets/99db2a1fbfe5/1*Zk_cWdHZ4Um5zCX4dr5IdQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Zk_cWdHZ4Um5zCX4dr5IdQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDE0IiBoZWlnaHQ9Ijc2NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><strong>贴上以下基础设定内容：</strong></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"bridge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">51826</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123-45-568"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p><strong>内容不用特别更改，直接照搬即可！</strong></p><blockquote><p><strong><em>记得存档！</em></strong></p></blockquote><p><a href="/assets/99db2a1fbfe5/1*Jm3Ykku3Yll1aiuKWbR-EQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Jm3Ykku3Yll1aiuKWbR-EQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDIiIGhlaWdodD0iNjQ4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>完成！</strong></p><h4 id="绑定-homebridge-到-homekit"><span class="me-2">绑定 HomeBridge 到 Homekit</span><a href="#绑定-homebridge-到-homekit" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>输入：</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>homebridge start
</pre></table></code></div></div><p>^( <strong>不加 sudo</strong> )</p><p><strong>启用</strong></p><p><a href="/assets/99db2a1fbfe5/1*uMEuC33I-R6KlLxS-L6Grw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*uMEuC33I-R6KlLxS-L6Grw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NDMiIGhlaWdodD0iNzAxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p>*若出现 Error: Service name is already in use on the network / port被占用之类的错误可尝试砍掉服务、改用 <code class="language-plaintext highlighter-rouge">homebridge restart</code> 重启、或重新开机。</p></blockquote><blockquote><p>*若出现was not registered by any plugin之类的错误则代表你还没有安装相应的homebridge plugin。</p></blockquote><blockquote><p><strong><em>启动中有更改 设定档(config.json)内容的话要改下：</em></strong></p></blockquote><blockquote><p><code class="language-plaintext highlighter-rouge">sudo homebridge restart</code></p></blockquote><blockquote><p><strong><em>重新启动 HomeBridge</em></strong></p></blockquote><blockquote><p>*按「Control」+「C」可在 Terminal 关闭退出 HomeBridge 服务。</p></blockquote><p>拿出 iPhone 打开「家庭」APP，在「家庭」右上角点「+」，选「加入配件」， <strong>扫描你出现的 QRCode</strong> 。</p><p><a href="/assets/99db2a1fbfe5/1*IFt2yQBfKfooraaAgCxGkA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*IFt2yQBfKfooraaAgCxGkA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>这时应该会出现「 <strong>找不到配件</strong> 」，别担心！因为我们还没有加入任何配件到 HomeBridge 桥接器上，没关系，让我们继续往下看。</p><p><strong>至少要有一个配件才能扫描加入! ! !</strong> (这边以摄影机为范例) <strong>：</strong> <strong>至少要有一个配件才能扫描加入! ! !</strong> (这边以摄影机为范例) <strong>：</strong> <strong>至少要有一个配件才能扫描加入! ! !</strong> (这边以摄影机为范例) <strong>：</strong></p><p><a href="/assets/99db2a1fbfe5/1*HC1CSkt1RpBXYEZ3aa8Eyw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*HC1CSkt1RpBXYEZ3aa8Eyw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/99db2a1fbfe5/1*Wi1np5MvjBkwJkInD49aRA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Wi1np5MvjBkwJkInD49aRA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>第一次扫描加入会出现警告视窗，按「强制加入」即可！</p><blockquote><p><strong><em>加入过一次后，后面再新增的配件都不用再次扫描了，会自己更新进去！</em></strong></p></blockquote><h4 id="将-homebridge-服务加入树莓派开机自动启动项目"><span class="me-2">将 HomeBridge 服务加入树莓派开机自动启动项目</span><a href="#将-homebridge-服务加入树莓派开机自动启动项目" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>同 VNC 远端桌面服务，我们也希望 HomeBridge 服务是树莓派开机后就自动启用的，不然一但重开机就要再次手动连进来启用。</p><p><strong>输入：</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>which homebridge
</pre></table></code></div></div><p><strong>取得 homebridge 路径资讯</strong></p><p><a href="/assets/99db2a1fbfe5/1*L8-E7jZqv6TjO4zKaayAuA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*L8-E7jZqv6TjO4zKaayAuA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2OTYiIGhlaWdodD0iMjExIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>记下此路径。</strong></p><p><strong>再输入：</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/init.d/homebridge
</pre></table></code></div></div><p>按「Enter」进入</p><p>按「 <code class="language-plaintext highlighter-rouge">i</code> 」进入编辑模式</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
</pre><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>
<span class="c">### BEGIN INIT INFO</span>
<span class="c"># Provides:</span>
<span class="c"># Required-Start:    $remote_fs $syslog</span>
<span class="c"># Required-Stop:     $remote_fs $syslog</span>
<span class="c"># Default-Start:     2 3 4 5</span>
<span class="c"># Default-Stop:      0 1 6</span>
<span class="c"># Short-Description: Start daemon at boot time</span>
<span class="c"># Description:       Enable service provided by daemon.</span>
<span class="c">### END INIT INFO</span>


<span class="nb">dir</span><span class="o">=</span><span class="s2">"/home/pi"</span>
<span class="nv">cmd</span><span class="o">=</span><span class="s2">"DEBUG=* 这边贴上你 which homebridge 查到的路径"</span>
<span class="nv">user</span><span class="o">=</span><span class="s2">"pi"</span>


<span class="nv">name</span><span class="o">=</span><span class="sb">`</span><span class="nb">basename</span> <span class="nv">$0</span><span class="sb">`</span>
<span class="nv">pid_file</span><span class="o">=</span><span class="s2">"/var/run/</span><span class="nv">$name</span><span class="s2">.pid"</span>
<span class="nv">stdout_log</span><span class="o">=</span><span class="s2">"/var/log/</span><span class="nv">$name</span><span class="s2">.log"</span>
<span class="nv">stderr_log</span><span class="o">=</span><span class="s2">"/var/log/</span><span class="nv">$name</span><span class="s2">.err"</span>


get_pid<span class="o">()</span> <span class="o">{</span>
<span class="nb">cat</span> <span class="s2">"</span><span class="nv">$pid_file</span><span class="s2">"</span>
<span class="o">}</span>


is_running<span class="o">()</span> <span class="o">{</span>
<span class="o">[</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$pid_file</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> ps <span class="nt">-p</span> <span class="sb">`</span>get_pid<span class="sb">`</span> <span class="o">&gt;</span> /dev/null 2&gt;&amp;1
<span class="o">}</span>


<span class="k">case</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="k">in
</span>start<span class="p">)</span>
<span class="k">if </span>is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">echo</span> <span class="s2">"Already started"</span>
<span class="k">else
</span><span class="nb">echo</span> <span class="s2">"Starting </span><span class="nv">$name</span><span class="s2">"</span>
<span class="nb">cd</span> <span class="s2">"</span><span class="nv">$dir</span><span class="s2">"</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$user</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
</span><span class="nb">sudo</span> <span class="nv">$cmd</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$stdout_log</span><span class="s2">"</span> 2&gt;&gt; <span class="s2">"</span><span class="nv">$stderr_log</span><span class="s2">"</span> &amp;
<span class="k">else
</span><span class="nb">sudo</span> <span class="nt">-u</span> <span class="s2">"</span><span class="nv">$user</span><span class="s2">"</span> <span class="nv">$cmd</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$stdout_log</span><span class="s2">"</span> 2&gt;&gt; <span class="s2">"</span><span class="nv">$stderr_log</span><span class="s2">"</span> &amp;
<span class="k">fi
</span><span class="nb">echo</span> <span class="nv">$!</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$pid_file</span><span class="s2">"</span>
<span class="k">if</span> <span class="o">!</span> is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">echo</span> <span class="s2">"Unable to start, see </span><span class="nv">$stdout_log</span><span class="s2"> and </span><span class="nv">$stderr_log</span><span class="s2">"</span>
<span class="nb">exit </span>1
<span class="k">fi
fi</span>
<span class="p">;;</span>
stop<span class="p">)</span>
<span class="k">if </span>is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"Stopping </span><span class="nv">$name</span><span class="s2">.."</span>
<span class="nb">kill</span> <span class="sb">`</span>get_pid<span class="sb">`</span>
<span class="k">for </span>i <span class="k">in </span>1 2 3 4 5 6 7 8 9 10
<span class="c"># for i in `seq 10`</span>
<span class="k">do
if</span> <span class="o">!</span> is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">break
</span><span class="k">fi


</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"."</span>
<span class="nb">sleep </span>1
<span class="k">done
</span><span class="nb">echo


</span><span class="k">if </span>is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">echo</span> <span class="s2">"Not stopped; may still be shutting down or shutdown may have failed"</span>
<span class="nb">exit </span>1
<span class="k">else
</span><span class="nb">echo</span> <span class="s2">"Stopped"</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$pid_file</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
</span><span class="nb">rm</span> <span class="s2">"</span><span class="nv">$pid_file</span><span class="s2">"</span>
<span class="k">fi
fi
else
</span><span class="nb">echo</span> <span class="s2">"Not running"</span>
<span class="k">fi</span>
<span class="p">;;</span>
restart<span class="p">)</span>
<span class="nv">$0</span> stop
<span class="k">if </span>is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">echo</span> <span class="s2">"Unable to stop, will not attempt to start"</span>
<span class="nb">exit </span>1
<span class="k">fi</span>
<span class="nv">$0</span> start
<span class="p">;;</span>
status<span class="p">)</span>
<span class="k">if </span>is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">echo</span> <span class="s2">"Running"</span>
<span class="k">else
</span><span class="nb">echo</span> <span class="s2">"Stopped"</span>
<span class="nb">exit </span>1
<span class="k">fi</span>
<span class="p">;;</span>
<span class="k">*</span><span class="p">)</span>
<span class="nb">echo</span> <span class="s2">"Usage: </span><span class="nv">$0</span><span class="s2"> {start</span><span class="se">\\</span><span class="s2">|stop</span><span class="se">\\</span><span class="s2">|restart</span><span class="se">\\</span><span class="s2">|status}"</span>
<span class="nb">exit </span>1
<span class="p">;;</span>
<span class="k">esac</span>
<span class="nb">exit </span>0
</pre></table></code></div></div><p><strong>将：</strong></p><p><code class="language-plaintext highlighter-rouge">cmd=”DEBUG=* 这边贴上你 which homebridge 查到的路径”</code></p><p><strong>替换入你查到的路径资讯（不用“双引号）</strong></p><p>「Commend」＋「C」、「Commend」＋「V」复制贴上以上内容进去，按「Esc」输入「:wq!」储存退出。</p><p><strong>再输入：</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo chmod </span>755 /etc/init.d/homebridge
</pre></table></code></div></div><p>修改文件权限。</p><p><strong>最后输入：</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>update-rc.d homebridge defaults
</pre></table></code></div></div><p>加入到开机自动启动项目。</p><p><strong>完成！</strong></p><blockquote><p>可直接使用 <code class="language-plaintext highlighter-rouge">sudo /etc/init.d/homebridge start</code> 启用 <code class="language-plaintext highlighter-rouge">homebridge</code> 服务。</p></blockquote><blockquote><p>另可使用： <code class="language-plaintext highlighter-rouge">tail -f /var/log/homebridge.err</code> 查看启动错误讯息、 <code class="language-plaintext highlighter-rouge">tail -f /var/log/homebridge.log</code> 查看 log 。</p></blockquote><p><a href="/assets/99db2a1fbfe5/1*P_3Zg1GDuUVKJyO-kknCLA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*P_3Zg1GDuUVKJyO-kknCLA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MTciIGhlaWdodD0iMjM5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><h3 id="米家智慧家电串接前准备"><span class="me-2">米家智慧家电串接前准备</span><a href="#米家智慧家电串接前准备" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Homebridge on 起来后，我们就可以开始逐个将所有米家家电加入至 Homebridge 接上 homeKit！</p><p><strong>首先我们要先将米家智慧家电都加入「 <a href="https://apps.apple.com/tw/app/%E7%B1%B3%E5%AE%B6-%E6%99%BA%E6%85%A7%E7%94%9F%E6%B4%BB%E6%96%B0%E9%AB%94%E9%A9%97/id957323480" target="_blank">米家APP</a> 」</strong> ，我们要从其中获取串接上 HomeBridge 的资讯。</p><p><strong>智慧家电都加入米家 APP 后：</strong></p><p>将 iPhone 接上 Mac 电脑，打开 Finder/Itunes 介面，选择接上的手机</p><p>选备份到「 <strong>这部电脑</strong> 」、 「 <strong>不要勾！替本机备份加密」</strong> ，点「 <strong>立即备份</strong> 」</p><p><a href="/assets/99db2a1fbfe5/1*nS68ECAURNSVbuJRYdhCvw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*nS68ECAURNSVbuJRYdhCvw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDcxIiBoZWlnaHQ9IjY4NCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>备份完成后， <a href="http://www.imactools.com/iphonebackupviewer/download/mac" target="_blank">下载</a> 安装备份查看软体： <a href="http://www.imactools.com/iphonebackupviewer/download/mac" target="_blank"><strong>iBackupViewer</strong></a></p><p>打开「 <strong>iBackupViewer</strong> 」</p><blockquote><p>初次启动会要你去 Mac「系统偏好设定」- 「安全性与隐私权」-「隐私权」-「+」- 加入「iBackupViewer」</p></blockquote><blockquote><p><strong>**如有隐私顾虑可关闭网路使用这套软体、并在使用后移除</strong>*</p></blockquote><p><a href="/assets/99db2a1fbfe5/0*VMTW7WxQEl_ZFU7E.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/0*VMTW7WxQEl_ZFU7E.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3ODAiIGhlaWdodD0iNjg1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>再次打开「 <strong>iBackupViewer</strong> 」成功读取到备份档后，点击「刚备份的手机」</p><p><a href="/assets/99db2a1fbfe5/1*Qqyp11Gc-dnK1Me08KKwbw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Qqyp11Gc-dnK1Me08KKwbw.webp" alt="选择「 **App Stroe** 」Icon" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MTIiIGhlaWdodD0iODM0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>选择「 <strong>App Stroe</strong> 」Icon</p><p><a href="/assets/99db2a1fbfe5/1*VlGVYTHKG88GIiH4C745Vg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*VlGVYTHKG88GIiH4C745Vg.webp" alt="左方找到「米家 APP (MiHome.app)」-&gt; 右方找到「 **数字_mihome.sqlite」** 这个档案并「 **选择** 」 -&gt; 右上角「 **Export** 」-&gt; 「 **Selected Files** 」" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjA2IiBoZWlnaHQ9IjgzNCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>左方找到「米家 APP (MiHome.app)」-&gt; 右方找到「 <strong>数字_mihome.sqlite」</strong> 这个档案并「 <strong>选择</strong> 」 -&gt; 右上角「 <strong>Export</strong> 」-&gt; 「 <strong>Selected Files</strong> 」</p><blockquote><p>*若有两个 「数字_mihome.sqlite」档案，则挑 Created 建立时间最新的来用。</p></blockquote><p>将刚刚汇出的 <strong>数字_mihome.sqlite</strong> 档案 <strong>拖曳进这个网站查看内容：</strong></p><p><a href="https://inloop.github.io/sqlite-viewer/" target="_blank" class="img-link shimmer" ><img src="https://inloop.github.io/sqlite-viewer/img/icon.png" alt="" loading="lazy"></a></p><p><strong>可将查询语法换成：</strong></p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">SELECT</span> <span class="nv">`ZDID`</span><span class="p">,</span><span class="nv">`ZNAME`</span><span class="p">,</span><span class="nv">`ZTOKEN`</span> <span class="k">FROM</span> <span class="s1">'ZDEVICE'</span> <span class="k">LIMIT</span> <span class="mi">0</span><span class="p">,</span><span class="mi">30</span>
</pre></table></code></div></div><p>仅显示我们需要的栏位资讯 （若有特别的家电套件需要其他的栏位资讯也可以加上去做筛选）</p><p><a href="/assets/99db2a1fbfe5/1*VWdrF905GGB_yXrCD5CpPg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*VWdrF905GGB_yXrCD5CpPg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTMyIiBoZWlnaHQ9IjQzNSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><ol><li><p>ZDID: 装置 ID</p><li><p>ZNAME: 装置名称</p><li><p>ZTOKEN: 装置 ZToken</p></ol><blockquote><p><strong><em>ZTOKEN 不能直接用，要转换成 “Token” 才能使用。</em></strong></p></blockquote><p>这边以摄影机的 ZToken 转换 Token 为例：</p><p>首先，我们从上面列表取得摄影机的 ZToken 栏位内容</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>7f1a3541f0433b3ccda94beb856c2f5ba2b15f293ce0cc398ea08b549f9c74050143db63ee66b0cdff9f69917680151e
</pre></table></code></div></div><p>但这边拿到的 TOKEN 还不能用，我们还需要将他转换</p><p><strong>打开 <a href="http://aes.online-domain-tools.com/" target="_blank">http://aes.online-domain-tools.com/</a> 这个网站：</strong></p><ol><li><p>将刚刚复制出来的 ZTOKEN 贴在「Input Text」，选「Hex」</p><li><p>Key输入「00000000000000000000000000000000」32个0，ㄧ样选「Hex」</p><li><p>然后按下「Decrypt!」转换</p><li><p>全选复制右下角两行的输出内容＆去掉空格后就是我们要的结果 <strong>Token</strong></p></ol><p><a href="/assets/99db2a1fbfe5/1*aQ7RfRx9ATjflYgMysnn3A.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*aQ7RfRx9ATjflYgMysnn3A.webp" alt="「 **6d304e6867384b704b4f714d45314a34** 」就是我们要的 Token 结果！" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTEiIGhlaWdodD0iNTczIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>「 <strong>6d304e6867384b704b4f714d45314a34</strong> 」就是我们要的 Token 结果！</p><blockquote><p>*Token 去得方式这块有尝试用「miio」直接嗅探的方式，但好像是米家韧体有更新过，已无法用这个方法快速方便得到 Token 了！</p></blockquote><p>最后，我们还要知道 <strong>装置的 IP 位址</strong> (这边一样以摄影机为例)：</p><p><a href="/assets/99db2a1fbfe5/0*OvqmDU7ARvoG96J0.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/0*OvqmDU7ARvoG96J0.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTAiIGhlaWdodD0iNzUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>打开米家APP → 摄影机 → 右上角「…」→设定→网路讯息，得到 <strong>IP位址</strong> ！</p><blockquote><p><strong><em>记录下 ZDID/Token/IP 这些资讯，供后续使用。</em></strong></p></blockquote><h3 id="将米家智慧家电逐个串入-homebridge"><span class="me-2">将米家智慧家电逐个串入 HomeBridge</span><a href="#将米家智慧家电逐个串入-homebridge" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>依照个别装置需要用到的套件、连线资讯不同，逐个安装、设定，加入至 HomeBridge。</p><blockquote><p><strong><em>再来打开 Terminal ssh 连线进树莓派或直接使用 VNC 远端桌面里的 Terminal，继续后续作业….</em></strong></p></blockquote><h4 id="1米家摄影机云台版"><span class="me-2"><strong>1.米家摄影机云台版：</strong></span><a href="#1米家摄影机云台版" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>在 Terminal 下命令安装 <a href="https://github.com/josepramon/homebridge-mijia-camera" target="_blank">MijiaCamera</a> 这个 homebridge 套件 ( <strong>不加 sudo</strong> )：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">-g</span> homebridge-mijia-camera
</pre></table></code></div></div><p><a href="/assets/99db2a1fbfe5/1*V7hZyogacXS9m_XN4qVtFw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*V7hZyogacXS9m_XN4qVtFw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NzciIGhlaWdodD0iMjExIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>参考前文的修改设定档(config.json)教学，在档案中加入 <strong>accessories</strong> 区块 <strong>：</strong></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"bridge"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="mi">51826</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"123-45-568"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"accessories"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"accessory"</span><span class="p">:</span><span class="s2">"MijiaCamera"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Mi Camera"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"ip"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">""</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">accessories:</code> 加入米家摄影机的设定资讯，ip 带入摄影机 ip、token 带入带入前文教学教的 token</p><blockquote><p><strong><em>记得存档！</em></strong></p></blockquote><p>然后照 Homebridge 章节教的，启动/重新启动/扫描加入 Homebridge；就能在「家庭」APP 中看到摄影机的控制项目了。</p><p><a href="/assets/99db2a1fbfe5/0*fHtbNC-8IL9KQUyu.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/0*fHtbNC-8IL9KQUyu.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTAiIGhlaWdodD0iNDQ2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>可控制项目：摄影机开/关</p><h4 id="2米家直流变频电风扇"><span class="me-2">2.米家直流变频电风扇</span><a href="#2米家直流变频电风扇" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>在 Terminal 下命令安装 <a href="https://github.com/YinHangCode/homebridge-mi-fan" target="_blank">homebridge-mi-fan</a> 这个 homebridge 套件 <strong>(不加 sudo)</strong> ：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">-g</span> homebridge-mi-fan
</pre></table></code></div></div><p><a href="/assets/99db2a1fbfe5/1*vwe7fapof2mA4me_3_HyfA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*vwe7fapof2mA4me_3_HyfA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1ODQiIGhlaWdodD0iMjExIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>参考前文的修改设定档(config.json)教学，在档案中加入 <strong>platforms</strong> 区块(若已有则在区块内「,」新增一个子区块) <strong>：</strong></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"bridge"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="mi">51826</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"123-45-568"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"platforms"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"platform"</span><span class="p">:</span><span class="s2">"MiFanPlatform"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"deviceCfgs"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
               </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"MiDCVariableFrequencyFan"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"ip"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
               </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
               </span><span class="nl">"fanName"</span><span class="p">:</span><span class="s2">"room fan"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"fanDisable"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
               </span><span class="nl">"temperatureName"</span><span class="p">:</span><span class="s2">"room temperature"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"temperatureDisable"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
               </span><span class="nl">"humidityName"</span><span class="p">:</span><span class="s2">"room humidity"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"humidityDisable"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
               </span><span class="nl">"buzzerSwitchName"</span><span class="p">:</span><span class="s2">"fan buzzer switch"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"buzzerSwitchDisable"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
               </span><span class="nl">"ledBulbName"</span><span class="p">:</span><span class="s2">"fan led switch"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"ledBulbDisable"</span><span class="p">:</span><span class="kc">true</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">platforms:</code> 加入米家电风扇设定资讯，ip 带入摄影机 ip、token 带入前文教学教的 token、humidity/temperature 可控制是否连动显示温湿度计资讯、 <strong>type 需带入对应型号的文字</strong> ，支援四种不同型号的电风扇：</p><ol><li><p>智米直流变频落地扇：ZhiMiDCVariableFrequencyFan</p><li><p>智米自然风风扇：ZhiMiNaturalWindFan</p><li><p>米家直流变频：MiDCVariableFrequencyFan (台湾卖的)</p><li><p>米家风扇：DmakerFan</p></ol><p>请自行带入自己的风扇型号。</p><blockquote><p><strong><em>记得存档！</em></strong></p></blockquote><p>然后照 Homebridge 章节教的，启动/重新启动/扫描加入 Homebridge；就能在「家庭」APP 中看到摄影机的控制项目了。</p><p><a href="/assets/99db2a1fbfe5/1*N_N5_WCnHNsepVv7HvAjmQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*N_N5_WCnHNsepVv7HvAjmQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9Ijc4NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>可控制项目：电风扇开/关、风力大小调整</p><h4 id="3小米空气净化器-3"><span class="me-2">3.小米空气净化器 3</span><a href="#3小米空气净化器-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>在 Terminal 下命令安装 <a href="https://github.com/rgavril/homebridge-xiaomi-air-purifier3" target="_blank">homebridge-xiaomi-air-purifier3</a> 这个 homebridge 套件 <strong>(不加 sudo)</strong> ：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">-g</span> homebridge-xiaomi-air-purifier3
</pre></table></code></div></div><p><a href="/assets/99db2a1fbfe5/1*VxEYnHaBwQVLxxXOLb1Jkg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*VxEYnHaBwQVLxxXOLb1Jkg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iMjY3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>参考前文的修改设定档(config.json)教学，在档案中加入 <strong>accessories</strong> 区块(若已有则在区块内「,」新增一个子区块) <strong>：</strong></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"bridge"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="mi">51826</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"123-45-568"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"accessories"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"accessory"</span><span class="p">:</span><span class="s2">"XiaomiAirPurifier3"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Xiaomi Air Purifier"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"did"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"ip"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"pm25_breakpoints"</span><span class="p">:[</span><span class="w">
            </span><span class="mi">5</span><span class="p">,</span><span class="w">
            </span><span class="mi">12</span><span class="p">,</span><span class="w">
            </span><span class="mi">35</span><span class="p">,</span><span class="w">
            </span><span class="mi">55</span><span class="w">
         </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">accessories:</code> 加入米家电风扇设定资讯，ip 带入摄影机 ip、token 带入前文教学教的 token、did 带入 zdid</p><blockquote><p><strong><em>记得存档！</em></strong></p></blockquote><p>然后照 Homebridge 章节教的，启动/重新启动/扫描加入 Homebridge；就能在「家庭」APP 中看到摄影机的控制项目了。</p><p><a href="/assets/99db2a1fbfe5/1*R1bxhdiGuY3SyFnrhCO6iw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*R1bxhdiGuY3SyFnrhCO6iw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="/assets/99db2a1fbfe5/1*05s08YdF6vQUWAG7nmTnfA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*05s08YdF6vQUWAG7nmTnfA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>可控制项目：空气清净机开关、风力大小调整 可查看项目：当前温湿度</p><h4 id="4米家-led-智慧台灯"><span class="me-2">4.米家 LED 智慧台灯</span><a href="#4米家-led-智慧台灯" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>在 Terminal 下命令安装 <a href="https://github.com/vieira/homebridge-yeelight-wifi" target="_blank">homebridge-yeelight-wifi</a> 这个 homebridge 套件 <strong>(不加 sudo)</strong> ：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">-g</span> homebridge-yeelight-wifi
</pre></table></code></div></div><p><a href="/assets/99db2a1fbfe5/1*1fQJ9UTCJRghUk00iT2WcQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*1fQJ9UTCJRghUk00iT2WcQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iMjY3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>参考前文的修改设定档(config.json)教学，在档案中加入 <strong>platforms</strong> 区块(若已有则在区块内「,」新增一个子区块) <strong>：</strong></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"bridge"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="mi">51826</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"123-45-568"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"platforms"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"platform"</span><span class="p">:</span><span class="s2">"yeelight"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Yeelight"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>不用特别带什么参数进去！若要做更细节的设定可参考 <a href="https://github.com/vieira/homebridge-yeelight-wifi" target="_blank">官方文件</a> (如亮度/色温…)</p><blockquote><p><strong><em>记得存档！</em></strong></p></blockquote><p>智慧台灯还需改绑定到「 <a href="https://apps.apple.com/tw/app/yeelight/id977125608" target="_blank">Yeelight</a> 」APP，然后将「区域网路控制」打开才能给 Homebridge 控制。</p><p>1.在 iPhone 上下载安装「 <a href="https://apps.apple.com/tw/app/yeelight/id977125608" target="_blank">Yeelight</a> 」APP</p><p><a href="/assets/99db2a1fbfe5/1*3m-UOoI7uam4a_N5dxU5VQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*3m-UOoI7uam4a_N5dxU5VQ.webp" alt="App Store 搜寻「Yeelight」安装" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>App Store 搜寻「Yeelight」安装</p><p><a href="/assets/99db2a1fbfe5/1*G9-12giq1DVIw5zTKOaF4A.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*G9-12giq1DVIw5zTKOaF4A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="/assets/99db2a1fbfe5/1*usLJKkehTDKeeFG95KDe4g.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*usLJKkehTDKeeFG95KDe4g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="/assets/99db2a1fbfe5/1*cWBMAqa_xkL01SoURNSO8g.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*cWBMAqa_xkL01SoURNSO8g.webp" alt="安装完打开 Yeelight APP -&gt; 「增加装置」-&gt; 找到「米家台灯」-&gt; 重新配对绑定" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>安装完打开 Yeelight APP -&gt; 「增加装置」-&gt; 找到「米家台灯」-&gt; 重新配对绑定</p><p><a href="/assets/99db2a1fbfe5/1*8un0THsUf3ZesFPGSj_p-g.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*8un0THsUf3ZesFPGSj_p-g.webp" alt="最后一步记得打开「 **区域网路控制** 」" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>最后一步记得打开「 <strong>区域网路控制</strong> 」</p><blockquote><p>*如果不小心没点到打开，可以在「装置」页 -&gt; 选台灯装置进入 -&gt; 点右下角「△」Tab -&gt; 点「局域网控制」进入设定 -&gt; 打开区域网路控制</p></blockquote><blockquote><p><strong><em>吐槽一下这个真的有够烂，米家本身的 APP 没有此开关功能，一定要绑到 Yeelight APP，也不能解绑或重绑回米家…否则会失效。</em></strong></p></blockquote><p>然后照 Homebridge 章节教的，启动/重新启动/扫描加入 Homebridge；就能在「家庭」APP 中看到摄影机的控制项目了。</p><p><a href="/assets/99db2a1fbfe5/1*vyAiFirZgDB6_OSsHIdEPw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*vyAiFirZgDB6_OSsHIdEPw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>可控制项目：灯开关、色温调整、亮度调整</p><h4 id="其他米家智慧家电-homebridge-套件"><span class="me-2">其他米家智慧家电 homebridge 套件：</span><a href="#其他米家智慧家电-homebridge-套件" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>我最终的 config.json 长这样：</strong></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"bridge"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="mi">51826</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"123-45-568"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"accessories"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"accessory"</span><span class="p">:</span><span class="s2">"MijiaCamera"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Mi Camera"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"ip"</span><span class="p">:</span><span class="s2">"192.168.0.105"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">"6d304e6867384b704b4f714d45314a34"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"accessory"</span><span class="p">:</span><span class="s2">"XiaomiAirPurifier3"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Xiaomi Air Purifier"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"did"</span><span class="p">:</span><span class="s2">"270033668"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"ip"</span><span class="p">:</span><span class="s2">"192.168.0.108"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">"5c3eeb03065fd8fc6ad10cae1f7cce7c"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"pm25_breakpoints"</span><span class="p">:[</span><span class="w">
            </span><span class="mi">5</span><span class="p">,</span><span class="w">
            </span><span class="mi">12</span><span class="p">,</span><span class="w">
            </span><span class="mi">35</span><span class="p">,</span><span class="w">
            </span><span class="mi">55</span><span class="w">
         </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nl">"platforms"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"platform"</span><span class="p">:</span><span class="s2">"MiFanPlatform"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"deviceCfgs"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
               </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"MiDCVariableFrequencyFan"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"ip"</span><span class="p">:</span><span class="s2">"192.168.0.106"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">"dd1b6f582ba6ce34f959bbbc1c1ca59f"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"fanName"</span><span class="p">:</span><span class="s2">"room fan"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"fanDisable"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
               </span><span class="nl">"temperatureName"</span><span class="p">:</span><span class="s2">"room temperature"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"temperatureDisable"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
               </span><span class="nl">"humidityName"</span><span class="p">:</span><span class="s2">"room humidity"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"humidityDisable"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
               </span><span class="nl">"buzzerSwitchName"</span><span class="p">:</span><span class="s2">"fan buzzer switch"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"buzzerSwitchDisable"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
               </span><span class="nl">"ledBulbName"</span><span class="p">:</span><span class="s2">"fan led switch"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"ledBulbDisable"</span><span class="p">:</span><span class="kc">true</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"platform"</span><span class="p">:</span><span class="s2">"yeelight"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Yeelight"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p><strong>给大家做参考！</strong></p><p>我有用到的米家家电如上教学，其他我没有的就没去试了，大家可以自己 <a href="https://www.npmjs.com/search?q=keywords%3Ahomebridge-plugin%20mi%20camera" target="_blank"><strong>上 npm 查询（homebridge-plugin XXX英文名称）</strong></a> ，然后照上面逻辑大同小异安装、设定串接上去！</p><p>这边附上几个我找到但没试过的 homebridge 套件(不保证能用)：</p><ol><li><p>小米空气清净机1代： <a href="https://github.com/seikan/homebridge-mi-air-purifier" target="_blank">homebridge-mi-air-purifier</a></p><li><p>米家智能插座系列： <a href="https://github.com/YinHangCode/homebridge-mi-outlet" target="_blank">homebridge-mi-outlet</a></p><li><p>小米扫地机器人： <a href="https://github.com/YinHangCode/homebridge-mi-robot_vacuum" target="_blank">homebridge-mi-robot_vacuum</a></p><li><p>米家智能网关： <a href="https://github.com/YinHangCode/homebridge-mi-aqara" target="_blank">homebridge-mi-aqara</a></p></ol><h3 id="小叮咛"><span class="me-2">小叮咛</span><a href="#小叮咛" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><p>建议到路由器将所有米家家电设定为指定/保留 IP，否则 IP 位置可能会变动，要重新更改 config.json 设定。</p><li><p>如果发现步骤都对但就是串不起来出现错误或是在 HomeKit 上一直显示「无回应」，可以重新尝试看看；如果还是一样可能代表套件已失效，要找其他的套件来串接了。(可查看 github issue)</p><li><p>功能失效、反应慢；这个也无解，可以发 issue 告知作者等作者更新，由于是开源专案，不可要求太多了!</p><li><p><strong>绑定完每个家电，都可以启动一次 Homebridge，再回到 iPhone 上看能不能运作，能的话可以再下「Controle」＋「C」终止；当全部家电都绑定好后，可重新启动树莓派，让他在重启后自己在后台启动 homebridge 服务；这才是我们要的。</strong></p></ol><h3 id="结语"><span class="me-2">结语</span><a href="#结语" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/99db2a1fbfe5/1*w7WnAn3XHNW2f5fJbRd_Zw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*w7WnAn3XHNW2f5fJbRd_Zw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="/assets/99db2a1fbfe5/1*ph8BfcF0ivvlZyKNF9mubQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*ph8BfcF0ivvlZyKNF9mubQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/99db2a1fbfe5/1*e1FAJuyCLOWEkA6MAeENkA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*e1FAJuyCLOWEkA6MAeENkA.webp" alt="另外可以在「设定」-&gt;「控制中心」-&gt;「自订」中将「家庭」APP 拉上去就能在下拉控制中心中快速操作 HomeKit !" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>另外可以在「设定」-&gt;「控制中心」-&gt;「自订」中将「家庭」APP 拉上去就能在下拉控制中心中快速操作 HomeKit !</p><p>全部串上 HomeKit 后只有一个字「爽」！开关的反应更快，只差我没有家庭中枢没办法远端控制而已，此篇进阶 Homebridge 也到此结束，感谢阅读。</p><p>回到文章开头，全都加入 HomeKit 后我们就可以无痛使用 iOS ≥ 13的捷径自动化功能了。</p><p>之后再想要来研究 homebridge 套件是怎么做的？感觉很有趣呢！所以如果有 HomeBridge 套件不合你的操作需求、有套件坏了找不到替代的，就在等我去研究吧！</p><h4 id="home-assistant"><span class="me-2">Home assistant</span><a href="#home-assistant" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>还有另一个智慧家庭的平台 <a href="https://www.home-assistant.io/" target="_blank">Homeassistant</a> 可以刷入树莓派使用（ <strong>但请注意：需要 2A 的电源才有办法启动</strong> ）； <a href="https://www.home-assistant.io/" target="_blank">Homeassistant</a> 我也有灌来玩玩看，全 GUI 图型操作，点一点就能串入家电；之后再来深入研究，感觉他等同于另一个米家平台而已，如果有很多不同厂商的 IOT 元件，更适合使用这个。</p><h4 id="参考资料"><span class="me-2">参考资料</span><a href="#参考资料" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li><p><a href="https://www.domoticz.cn/forum/viewtopic.php?t=52" target="_blank">https://www.domoticz.cn/forum/viewtopic.php?t=52</a></p><li><p><a href="https://or2.in/2017/07/02/Homekit-and-MiJia-with-pi/#3-%E5%8F%B7%E5%A4%96-%E5%BC%80%E5%90%AF%E5%8F%AF%E8%A7%86%E5%8C%96VNC" target="_blank">https://or2.in/2017/07/02/Homekit-and-MiJia-with-pi/#3-%E5%8F%B7%E5%A4%96-%E5%BC%80%E5%90%AF%E5%8F%AF%E8%A7%86%E5%8C%96VNC</a></p></ol><h3 id="延伸阅读"><span class="me-2">延伸阅读</span><a href="#延伸阅读" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><p><a href="/posts/zrealm-life/zh-cn/%E5%B0%8F%E7%B1%B3%E6%99%BA%E6%85%A7%E5%AE%B6%E5%B1%85%E6%96%B0%E6%B7%BB%E8%B4%AD-ai%E9%9F%B3%E7%AE%B1-%E6%B8%A9%E6%B9%BF%E5%BA%A6%E6%84%9F%E5%BA%94%E5%99%A8-%E4%BD%93%E9%87%8D%E8%AE%A1%E4%B8%8E%E7%9B%B4%E6%B5%81%E5%8F%98%E9%A2%91%E7%94%B5%E9%A3%8E%E6%89%87%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97-bcff7c157941/">小米智慧家居新添购（AI音箱、温湿度感应器、体重计2、直流变频电风扇）</a></p><li><p><a href="/posts/zrealm-life/zh-cn/ios-13-1-%E4%BB%A5%E4%B8%8A%E6%8D%B7%E5%BE%84%E8%87%AA%E5%8A%A8%E5%8C%96-%E5%BF%AB%E9%80%9F%E6%95%B4%E5%90%88%E7%B1%B3%E5%AE%B6%E6%99%BA%E6%85%A7%E5%AE%B6%E5%B1%85%E5%9C%BA%E6%99%AF%E8%AE%BE%E5%AE%9A%E6%95%99%E5%AD%A6-21119db777dd/">iOS ≥ 13.1 使用「捷径」自动化功能搭配米家智慧家居（直接使用 iOS ≥ 13.1 内建的捷径APP完成自动化操作）</a></p><li><p><a href="/posts/zrealm-life/zh-cn/%E7%B1%B3%E5%AE%B6-app-%E5%9C%B0%E5%8C%BA%E8%AE%BE%E5%AE%9A%E9%97%AE%E9%A2%98-%E5%B0%8F%E7%88%B1%E9%9F%B3%E7%AE%B1%E4%B8%8E%E7%A9%BA%E6%B0%94%E5%87%80%E5%8C%96%E5%99%A8%E8%BF%9E%E5%8A%A8%E6%94%BB%E7%95%A5-94a4020edb82/">米家 APP / 小爱音箱地区问题</a></p><li><p><a href="/posts/zrealm-life/zh-cn/apple-homekit-%E4%B8%8E%E5%B0%8F%E7%B1%B3%E7%B1%B3%E5%AE%B6%E6%99%BA%E6%85%A7%E5%AE%B6%E5%B1%85%E6%95%B4%E5%90%88%E6%94%BB%E7%95%A5-homebridge-%E4%B8%B2%E6%8E%A5%E8%AE%BE%E5%AE%9A%E4%B8%8E%E8%87%AA%E5%8A%A8%E5%8C%96%E6%95%99%E5%AD%A6-c3150cdc85dd/">智慧家居初体验 — Apple HomeKit &amp; 小米米家 （米家智慧摄影机及米家智慧台灯、Homekit设定教学）</a></p></ol><p>有任何问题及指教欢迎 <a href="https://www.zhgchg.li/contact" target="_blank">与我联络</a> 。</p><script src="/assets/clipboard.min.js"></script><div style=" display:flex; align-items:center; gap:10px; border:1px solid #e5e7eb; background:#f9fafb; padding:12px 16px; border-radius:12px; margin:18px 0; box-shadow:0 3px 8px rgba(0,0,0,0.05); width: auto;"> <input id="share-url" value="https://zhgchg.li/posts/zrealm-life/zh-cn/homebridge-%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E7%94%B5%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%8E%AF%E5%A2%83-99db2a1fbfe5/" readonly="" style=" flex:1; border:1px solid #d1d5db; border-radius:8px; padding:10px 12px; font-size:0.9rem; background:#ffffff; color:#111827; outline:none; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; " /> <button class="btn" data-clipboard-target="#share-url" id="copy-btn" style=" border:none; background:#3b82f6; color:white; padding:10px 16px; border-radius:10px; cursor:pointer; font-size:0.85rem; font-weight:600; display:flex; align-items:center; gap:6px; transition:all .15s ease; box-shadow:0 2px 5px rgba(59,130,246,0.35); " onmouseover="this.style.opacity='0.92';" onmouseout="this.style.opacity='1';"> <span style="font-size:1rem;">🔗</span> <span id="copy-btn-text">Copy link to share!</span> </button></div><script> new ClipboardJS('.btn'); var btn = document.getElementById("copy-btn"); var text = document.getElementById("copy-btn-text"); btn.addEventListener("click", function () { text.textContent = "Copied!"; btn.style.background = "#16a34a"; btn.style.boxShadow = "0 2px 6px rgba(22,163,74,0.35)"; setTimeout(() => { text.textContent = "Copy link to share!"; btn.style.background = "#3b82f6"; btn.style.boxShadow = "0 2px 5px rgba(59,130,246,0.35)"; }, 1500); });</script><hr /><p><a href="https://www.paypal.com/ncp/payment/CMALMPT8UUTY2" target="_blank" rel="noopener" style="display:block;margin:12px 0;text-align:center;align-items:center;justify-content:center;padding:10px 22px;border-radius:999px;text-decoration:none;background:linear-gradient(135deg,#ffd54f,#ffb300);color:#000;font-size:16px;font-weight:700;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;box-shadow:0 4px 10px rgba(0,0,0,.15);cursor:pointer;transition:all .15s ease;width:350px" onmouseover="this.style.background=&quot;linear-gradient(135deg,#FFE082,#FFC107)&quot;,this.style.transform=&quot;translateY(-1px)&quot;,this.style.boxShadow=&quot;0 6px 14px rgba(0,0,0,0.2)&quot;" onmouseout="this.style.background=&quot;linear-gradient(135deg,#FFD54F,#FFB300)&quot;,this.style.transform=&quot;translateY(0)&quot;,this.style.boxShadow=&quot;0 4px 10px rgba(0,0,0,0.15)&quot;">🍺 Buy me a beer on PayPal</a></p><blockquote class="prompt-info"><p>本文首次发表于 Medium (<a href="https://medium.com/p/99db2a1fbfe5" target="_blank"><strong>点击查看原始版本</strong></a>)，由 <a href="/posts/tools/medium-to-jekyll/" target="_blank">ZMediumToMarkdown</a> 提供自动转换与同步技术。</p></blockquote><blockquote class="prompt-info"><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/zh-cn/zmediumtomarkdown/2020-04-20-99db2a1fbfe5.md" target="_blank">Improve this page on Github.</a></p></blockquote><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1,050+ Followers</span></a></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-life/">ZRealm Life.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/simplified-chinese/" class="post-tag no-text-decoration" >simplified-chinese</a> <a href="/tags/homekit/" class="post-tag no-text-decoration" >homekit</a> <a href="/tags/iphone/" class="post-tag no-text-decoration" >iphone</a> <a href="/tags/homebridge/" class="post-tag no-text-decoration" >homebridge</a> <a href="/tags/%E7%B1%B3%E5%AE%B6/" class="post-tag no-text-decoration" >米家</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" class="post-tag no-text-decoration" >生活</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=HomeBridge%EF%BD%9C%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E7%94%B5%E5%88%B0HomeKit%EF%BC%8C%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6WFH%E7%8E%AF%E5%A2%83%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-life%2Fzh-cn%2Fhomebridge-%25E6%25A0%2591%25E8%258E%2593%25E6%25B4%25BE%25E4%25B8%25B2%25E6%258E%25A5%25E7%25B1%25B3%25E5%25AE%25B6%25E5%25AE%25B6%25E7%2594%25B5%25E5%2588%25B0homekit-%25E6%2589%2593%25E9%2580%25A0%25E6%2599%25BA%25E6%2585%25A7%25E5%25B1%2585%25E5%25AE%25B6wfh%25E7%258E%25AF%25E5%25A2%2583-99db2a1fbfe5%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=HomeBridge%EF%BD%9C%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E7%94%B5%E5%88%B0HomeKit%EF%BC%8C%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6WFH%E7%8E%AF%E5%A2%83%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-life%2Fzh-cn%2Fhomebridge-%25E6%25A0%2591%25E8%258E%2593%25E6%25B4%25BE%25E4%25B8%25B2%25E6%258E%25A5%25E7%25B1%25B3%25E5%25AE%25B6%25E5%25AE%25B6%25E7%2594%25B5%25E5%2588%25B0homekit-%25E6%2589%2593%25E9%2580%25A0%25E6%2599%25BA%25E6%2585%25A7%25E5%25B1%2585%25E5%25AE%25B6wfh%25E7%258E%25AF%25E5%25A2%2583-99db2a1fbfe5%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-life%2Fzh-cn%2Fhomebridge-%25E6%25A0%2591%25E8%258E%2593%25E6%25B4%25BE%25E4%25B8%25B2%25E6%258E%25A5%25E7%25B1%25B3%25E5%25AE%25B6%25E5%25AE%25B6%25E7%2594%25B5%25E5%2588%25B0homekit-%25E6%2589%2593%25E9%2580%25A0%25E6%2599%25BA%25E6%2585%25A7%25E5%25B1%2585%25E5%25AE%25B6wfh%25E7%258E%25AF%25E5%25A2%2583-99db2a1fbfe5%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/en/app-store-connect-api-webhook-automate-ci-cd-workflows-seamlessly-7c0974856393/">App Store Connect API Webhook｜Automate CI/CD Workflows Seamlessly</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/zh-cn/app-store-connect-api-webhook-%E4%B8%B2%E6%8E%A5-%E6%8F%90%E5%8D%87-ios-ci-cd-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%95%88%E7%8E%87%E4%B8%8E%E9%80%9A%E7%9F%A5%E6%B5%81%E7%A8%8B-7c0974856393/">CI/CD 使用 App Store Connect API Webhook 串接自动化工作流程</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/app-store-connect-api-webhook-%E4%B8%B2%E6%8E%A5-%E6%8F%90%E5%8D%87-ios-ci-cd-%E8%87%AA%E5%8B%95%E5%8C%96%E6%95%88%E7%8E%87%E8%88%87%E9%80%9A%E7%9F%A5%E6%B5%81%E7%A8%8B-7c0974856393/">CI/CD 使用 App Store Connect API Webhook 串接自動化工作流程</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/en/ci-cd-explained-boost-ios-app-development-stability-and-efficiency-tool-selection-guide-c008a9e8ceca/">CI/CD Explained: Boost iOS App Development Stability and Efficiency｜Tool Selection Guide</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-dev/zh-cn/ci-cd-%E6%98%AF%E4%BB%80%E4%B9%88-%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E7%A8%B3%E5%AE%9A%E5%BC%80%E5%8F%91%E5%9B%A2%E9%98%9F%E7%9A%84%E5%85%B3%E9%94%AE%E6%B5%81%E7%A8%8B%E4%B8%8E%E5%B7%A5%E5%85%B7%E9%80%89%E6%8B%A9-c008a9e8ceca/">CI/CD 实战指南（一）：CI/CD 是什么？如何透过 CI/CD 打造稳定高效的开发团队？工具选择？</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Chapters 🔖</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-life/homebridge-%E6%A8%B9%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E9%9B%BB%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%92%B0%E5%A2%83-99db2a1fbfe5/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1587393469" data-df="ll" > Apr 20, 2020 </time><h4 class="pt-0 my-2">打造舒適的 WFH 智慧居家環境，控制家電盡在指尖</h4><div class="text-muted"><p>示範使用樹莓派當 HomeBridge 主機，將所有米家家電串上 HomeKit</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-life/zh-cn/apple-homekit-%E4%B8%8E%E5%B0%8F%E7%B1%B3%E7%B1%B3%E5%AE%B6%E6%99%BA%E6%85%A7%E5%AE%B6%E5%B1%85%E6%95%B4%E5%90%88%E6%94%BB%E7%95%A5-homebridge-%E4%B8%B2%E6%8E%A5%E8%AE%BE%E5%AE%9A%E4%B8%8E%E8%87%AA%E5%8A%A8%E5%8C%96%E6%95%99%E5%AD%A6-c3150cdc85dd/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1562346827" data-df="ll" > Jul 6, 2019 </time><h4 class="pt-0 my-2">Apple HomeKit 与小米米家智慧家居整合攻略｜HomeBridge 串接设定与自动化教学</h4><div class="text-muted"><p>针对想用Apple HomeKit与小米米家打造智慧家庭的使用者，详解HomeBridge安装与设定流程，解决不支援HomeKit装置整合难题，并示范如何利用捷径与IFTTT实现GPS自动化，提升居家便利与安全性。</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-life/zh-cn/iphone-%E9%80%8F%E8%A7%86%E9%80%8F%E6%98%8E%E6%89%8B%E6%9C%BA%E6%A1%8C%E5%B8%83%E5%88%B6%E4%BD%9C%E6%95%99%E5%AD%A6-imovie-%E7%BB%BF%E5%B9%95%E6%8A%A0%E5%9B%BE%E5%BF%AB%E9%80%9F%E5%90%88%E6%88%90%E6%8A%80%E5%B7%A7-2e4429f410d6/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1589096262" data-df="ll" > May 10, 2020 </time><h4 class="pt-0 my-2">使用 iPhone 简单制作「伪」透视透明手机桌布</h4><div class="text-muted"><p>应用 iMovie 绿幕抠图功能合成影片</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-life/en/smart-wfh-home-setup-control-all-appliances-with-homekit-raspberry-pi-99db2a1fbfe5/" class="btn btn-outline-primary" aria-label="Older" ><p>Smart WFH Home Setup｜Control All Appliances with HomeKit & Raspberry Pi</p></a> <a href="/posts/zrealm-life/homebridge-%E6%A8%B9%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E9%9B%BB%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%92%B0%E5%A2%83-99db2a1fbfe5/" class="btn btn-outline-primary" aria-label="Newer" ><p>打造舒適的 WFH 智慧居家環境，控制家電盡在指尖</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span> <a href="/">正體中文</a> | <a href="/tags/simplified-chinese">简体中文</a> | <a href="/tags/english/">English</a> <br/> Last updated: 2025-12-28 11:12:50 +08:00</p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
