<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="Smart WFH Home Setup｜Control All Appliances with HomeKit &amp; Raspberry Pi" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="Discover how to transform your WFH environment by integrating Xiaomi appliances with HomeKit using Raspberry Pi as a HomeBridge server, enabling seamless smart home control at your fingertips." /><meta property="og:description" content="Discover how to transform your WFH environment by integrating Xiaomi appliances with HomeKit using Raspberry Pi as a HomeBridge server, enabling seamless smart home control at your fingertips." /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-life/en/smart-wfh-home-setup-control-all-appliances-with-homekit-raspberry-pi-99db2a1fbfe5/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-life/en/smart-wfh-home-setup-control-all-appliances-with-homekit-raspberry-pi-99db2a1fbfe5/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-04-20T22:37:49+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp" /><meta property="twitter:title" content="Smart WFH Home Setup｜Control All Appliances with HomeKit &amp; Raspberry Pi" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://medium.com/@zhgchgli/"},"dateModified":"2024-04-13T16:16:28+08:00","datePublished":"2020-04-20T22:37:49+08:00","description":"Discover how to transform your WFH environment by integrating Xiaomi appliances with HomeKit using Raspberry Pi as a HomeBridge server, enabling seamless smart home control at your fingertips.","headline":"Smart WFH Home Setup｜Control All Appliances with HomeKit &amp; Raspberry Pi","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+","url":"https://zhgchg.li/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-life/en/smart-wfh-home-setup-control-all-appliances-with-homekit-raspberry-pi-99db2a1fbfe5/"},"url":"https://zhgchg.li/posts/zrealm-life/en/smart-wfh-home-setup-control-all-appliances-with-homekit-raspberry-pi-99db2a1fbfe5/"}</script><title>Smart WFH Home Setup｜Control All Appliances with HomeKit & Raspberry Pi | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script><link rel="alternate" hreflang="zh-Hans" href="/posts/zrealm-life/zh-cn/homebridge-%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E7%94%B5%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%8E%AF%E5%A2%83-99db2a1fbfe5/"><link rel="alternate" hreflang="zh-Hant" href="/posts/zrealm-life/homebridge-%E6%A8%B9%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E9%9B%BB%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%92%B0%E5%A2%83-99db2a1fbfe5/"><link rel="alternate" hreflang="en" href="/posts/zrealm-life/en/smart-wfh-home-setup-control-all-appliances-with-homekit-raspberry-pi-99db2a1fbfe5/"><link rel="alternate" hreflang="x-default" href="/posts/zrealm-life/en/smart-wfh-home-setup-control-all-appliances-with-homekit-raspberry-pi-99db2a1fbfe5/"><link rel="stylesheet" href="/assets/css/post-toc.css"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0">An iOS, web, and automation developer from Taiwan 🇹🇼 who also loves sharing, traveling, and writing.</p><a href="https://medium.com/@zhgchgli" target="_blank" style="display: block;text-align: center;font-style: normal;/* text-decoration: underline; */font-size: 1.2em;color: var(--heading-color);">1K+ Followers on Medium</a></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a><li class="nav-item"> <a href="/english/" class="nav-link"> <i class="fa-fw fa fa-solid fa-language"></i> <span>ENGLISH POSTS</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Smart WFH Home Setup｜Control All Appliances with HomeKit & Raspberry Pi</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Smart WFH Home Setup｜Control All Appliances with HomeKit & Raspberry Pi</h1><p class="post-desc fw-light mb-4">Discover how to transform your WFH environment by integrating Xiaomi appliances with HomeKit using Raspberry Pi as a HomeBridge server, enabling seamless smart home control at your fingertips.</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1587393469" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 20, 2020 </time> </span> <span> Updated <time data-ts="1712996188" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 13, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp" class="popup img-link preview-img blur"><img data-src="/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNjAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></div><div class="d-flex justify-content-between"> <span style="display: inline-flex; align-items: center; gap: 4px;"> By <em> <a href="https://medium.com/@zhgchgli/">ZhgChgLi</a> </em> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" style="display: block; "><path fill="#007bff" d="M271.2 56C265.1 49.8 256.2 47.3 247.8 49.6C239.4 51.9 232.9 58.4 230.8 66.8L215.5 127C214.4 131.4 209.9 134 205.6 132.7L145.8 115.9C137.4 113.5 128.4 115.9 122.3 122C116.2 128.1 113.8 137.1 116.2 145.5L133.1 205.3C134.3 209.6 131.7 214.1 127.4 215.2L67.1 230.5C58.7 232.6 52.1 239.2 49.8 247.6C47.5 256 50 264.9 56.2 271L100.7 314.3C103.9 317.4 103.9 322.6 100.7 325.8L56.3 369.1C50.1 375.2 47.6 384.1 49.9 392.5C52.2 400.9 58.8 407.4 67.2 409.6L127.4 424.9C131.8 426 134.4 430.5 133.1 434.8L116.2 494.5C113.8 502.9 116.2 511.9 122.3 518C128.4 524.1 137.4 526.5 145.8 524.1L205.6 507.2C209.9 506 214.4 508.6 215.5 512.9L230.8 573.1C232.9 581.5 239.5 588.1 247.9 590.4C256.3 592.7 265.2 590.2 271.3 584L314.6 539.5C317.7 536.3 322.9 536.3 326.1 539.5L369.3 584C375.4 590.2 384.3 592.7 392.7 590.4C401.1 588.1 407.6 581.5 409.8 573.1L425.1 513C426.2 508.6 430.7 506 435 507.3L494.8 524.2C503.2 526.6 512.2 524.2 518.3 518.1C524.4 512 526.8 503 524.4 494.6L507.5 434.8C506.3 430.5 508.9 426 513.2 424.9L573.4 409.6C581.8 407.5 588.4 400.9 590.7 392.5C593 384.1 590.5 375.1 584.3 369.1L539.8 325.8C536.6 322.7 536.6 317.5 539.8 314.3L584.3 271C590.5 264.9 593 256 590.7 247.6C588.4 239.2 581.8 232.7 573.4 230.5L513.2 215.2C508.8 214.1 506.2 209.6 507.5 205.3L524.4 145.5C526.8 137.1 524.4 128.1 518.3 122C512.2 115.9 503.2 113.5 494.8 115.9L435 132.8C430.7 134 426.2 131.4 425.1 127.1L409.8 66.8C407.7 58.4 401.1 51.8 392.7 49.5C384.3 47.2 375.4 49.7 369.3 55.9L326 100.5C322.9 103.7 317.7 103.7 314.5 100.5L271.2 56z"/><path d="M250 330 l60 60 100 -140" stroke="#ffffff" stroke-width="40" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="4932 words" > <em>27 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Smart WFH Home Setup｜Control All Appliances with HomeKit & Raspberry Pi</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">章節 (Chapters)🔖</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Smart WFH Home Setup｜Control All Appliances with HomeKit & Raspberry Pi</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><blockquote class="prompt-tip"><p><a href="/posts/zrealm-life/zh-cn/homebridge-%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E7%94%B5%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%8E%AF%E5%A2%83-99db2a1fbfe5/"><strong>点击这里</strong></a>查看本文章简体中文版本。</p></blockquote><blockquote class="prompt-tip"><p><a href="/posts/zrealm-life/homebridge-%E6%A8%B9%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E9%9B%BB%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%92%B0%E5%A2%83-99db2a1fbfe5/"><strong>點擊這裡</strong></a>查看本文章正體中文版本。</p></blockquote><blockquote class="prompt-info"><p>This post was translated with AI assistance — let me know if anything sounds off!</p></blockquote><h4 id="zhgchgli-table-of-contents">Table of Contents</h4><nav class="zhgchgli-toc"><ul class="zhgchgli-toc-list"><li><a href="#creating-a-comfortable-wfh-smart-home-environment-control-appliances-at-your-fingertips">Creating a Comfortable WFH Smart Home Environment, Control Appliances at Your Fingertips</a></li><li><a href="#about">About</a></li><li><a href="#my-mi-home-smart-home-project">My Mi Home Smart Home Project</a></li><li><a href="#how-it-works">How It Works</a></li><li><a href="#required-environment">Required Environment</a></li><li class="has-children"><details><summary>Raspberry Pi Environment Setup <a href="#raspberry-pi-environment-setup">#</a></summary><ul><li><a href="#burning-the-operating-system">Burning the Operating System</a></li></ul></details></li><li class="has-children"><details><summary>Setting up Raspberry Pi <a href="#setting-up-raspberry-pi">#</a></summary><ul><li><a href="#check-the-ip-address-assigned-to-the-raspberry-pi">Check the IP Address Assigned to the Raspberry Pi</a></li><li><a href="#use-ssh-to-access-the-raspberry-pi-for-operations">Use SSH to Access the Raspberry Pi for Operations</a></li><li><a href="#basic-raspberry-pi-tools-installation-and-setup">Basic Raspberry Pi Tools Installation and Setup</a></li><li><a href="#enable-raspberry-pi-vnc-remote-desktop-function">Enable Raspberry Pi VNC Remote Desktop Function</a></li><li><a href="#add-vnc-remote-desktop-service-to-startup-items">Add VNC Remote Desktop Service to Startup Items</a></li><li><a href="#connecting-using-a-vnc-client">Connecting Using a VNC Client</a></li><li><a href="#complete-raspberry-pi-initialization-setup">Complete Raspberry Pi Initialization Setup</a></li></ul></details></li><li class="has-children"><details><summary>HomeBridge Installation <a href="#homebridge-installation">#</a></summary><ul><li><a href="#createmodify-configuration-file-configjson">Create/Modify Configuration File (config.json)</a></li><li><a href="#binding-homebridge-to-homekit">Binding HomeBridge to Homekit</a></li><li><a href="#add-homebridge-service-to-raspberry-pi-startup-items-automatically">Add HomeBridge Service to Raspberry Pi Startup Items Automatically</a></li></ul></details></li><li><a href="#preparation-before-connecting-mijia-smart-appliances">Preparation Before Connecting Mijia Smart Appliances</a></li><li class="has-children"><details><summary>Integrate Mijia Smart Appliances into HomeBridge One by One <a href="#integrate-mijia-smart-appliances-into-homebridge-one-by-one">#</a></summary><ul><li><a href="#1-mijia-camera-ptz-version">1. Mijia Camera PTZ Version</a></li><li><a href="#2-mijia-dc-inverter-electric-fan">2. Mijia DC Inverter Electric Fan</a></li><li><a href="#3-xiaomi-air-purifier-3">3. Xiaomi Air Purifier 3</a></li><li><a href="#4-mijia-led-smart-desk-lamp">4. Mijia LED Smart Desk Lamp</a></li><li><a href="#other-mijia-smart-home-appliances-homebridge-packages">Other Mijia smart home appliances homebridge packages</a></li></ul></details></li><li><a href="#tips">Tips</a></li><li class="has-children"><details><summary>Conclusion <a href="#conclusion">#</a></summary><ul><li><a href="#home-assistant">Home assistant</a></li><li><a href="#references">References</a></li></ul></details></li><li><a href="#further-reading">Further Reading</a></li></ul></nav><hr /><h3 id="creating-a-comfortable-wfh-smart-home-environment-control-appliances-at-your-fingertips"><span class="me-2">Creating a Comfortable WFH Smart Home Environment, Control Appliances at Your Fingertips</span><a href="#creating-a-comfortable-wfh-smart-home-environment-control-appliances-at-your-fingertips" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Demonstration of Using Raspberry Pi as a HomeBridge Host to Connect All Mijia Appliances to HomeKit</p><p><a href="/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*qZeTn0r2u_MKJXubV17XvQ.webp" alt="photo by [picjumbo.com](https://www.pexels.com/zh-tw/@picjumbo-com-55570?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjkzMyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>photo by <a href="https://www.pexels.com/zh-tw/@picjumbo-com-55570?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" target="_blank">picjumbo.com</a></p><h3 id="about"><span class="me-2">About</span><a href="#about" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Due to the pandemic, people have been spending more time at home; especially when working from home, it’s best if all home appliances can be smartly controlled via an app. This way, you don’t have to keep getting up to turn on the lights or the rice cooker, which wastes a lot of time.</p><p>I previously wrote an article titled “<a href="/posts/zrealm-life/en/apple-homekit-xiaomi-mijia-smart-home-setup-step-by-step-guide-for-beginners-c3150cdc85dd/"><strong>First Experience with Smart Home — Apple HomeKit &amp; Xiaomi Mijia</strong></a>,” where I tried using HomeBridge to connect Xiaomi appliances to HomeKit. It proved theoretically feasible, but practical applications were rarely mentioned. This article is an advanced, comprehensive version of the previous one, including how to set up a Raspberry Pi as the host, with a step-by-step tutorial from start to finish.</p><p>The reason is that I recently switched to an iPhone 11 Pro, which supports NFC automation in Shortcuts for iOS ≥ 13. This means the phone can execute corresponding shortcuts when it senses an NFC tag. Although <strong>you can directly use an old EasyCard as an NFC tag</strong>, it takes up too much space and I don’t have that many cards. I asked around Guanghua but couldn’t find NFC tag stickers for sale. Finally, I found some on Shopee for $50 each and bought 5 to try out. The seller was thoughtful enough to separate them by color.</p><p><a href="/assets/99db2a1fbfe5/1*6ftbgAxlvmdv-35of98ohA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*6ftbgAxlvmdv-35of98ohA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNDM1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>NFC automation features are device-specific and only supported on iPhone XS/XS Max/XR/11/11 Pro/11 Pro Max. Earlier models like iPhone 8 do not have the NFC option.</strong></p><p>After testing a bit, I found an issue: when running the Mi Home app shortcut, you must enable the “Show When Run” option (otherwise it won’t actually execute). <strong>When the Tag is detected and the shortcut needs to run, you still have to unlock the iPhone, and the shortcut opens visibly during execution, so it can’t run silently in the background.</strong> Additionally, I tested that if the shortcut uses native Apple services (like HomeKit appliances), it can run directly in the background without unlocking. Also, HomeKit’s response speed and stability are much better than Mi Home.</p><p>This makes a big difference in user experience, so I further explored connecting the Mi Home smart home series products to HomeKit. For those that support HomeKit, just bind them directly as this article does not repeat; for those that don’t support it, follow the tutorial in this article to bind them as well!</p><h3 id="my-mi-home-smart-home-project"><span class="me-2">My Mi Home Smart Home Project</span><a href="#my-mi-home-smart-home-project" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><p>Mi Home Smart Camera Pan-Tilt Version 1080P</p><li><p>Mi Home DC Inverter Electric Fan</p><li><p>Mijia LED Smart Desk Lamp</p><li><p>Xiaomi Air Purifier 3</p><li><p>Mijia Desk Lamp Pro (supports HomeKit natively)</p><li><p>Mi Home LED Smart Bulb Color Version * 2 (natively supports HomeKit)</p></ol><h3 id="how-it-works"><span class="me-2">How It Works</span><a href="#how-it-works" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/99db2a1fbfe5/1*7p0ehajJqdqb4-_w9uHt7g.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*7p0ehajJqdqb4-_w9uHt7g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MzgiIGhlaWdodD0iNjgxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Here is a simple reference diagram: if a smart appliance supports HomeKit, it can connect directly. <strong>For smart appliances that do not support HomeKit, setting up a “HomeBridge” server (which must stay powered on) can bridge and connect them</strong>; within the same network environment (e.g., the same WiFi), the iPhone can freely control all HomeKit devices. However, when outside the local network, such as using a <strong>4G mobile network, an Apple TV, HomePod, or iPad must act as the home hub and stay powered on at home</strong> to control HomeKit devices remotely. Without a home hub, opening the Home app outside will show “<strong>No Response</strong>.”</p><blockquote><p>*If it is Xiaomi, the home appliances are controlled through Xiaomi’s servers. To be clear, <strong>there are security concerns as all data passes through Mainland China</strong>.</p></blockquote><h3 id="required-environment"><span class="me-2">Required Environment</span><a href="#required-environment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>So, there are two devices that must always be on standby: one is the Apple TV/HomePod or iPad acting as the Home Hub. Currently, there is no solution to simulate this with other methods; you have to obtain these devices. Without them, you can only use HomeKit at home.** **</p><p>Another computer that can be on standby 24 hours a day (such as your iMac/MacBook), an idle host (old iMac, Mac Mini), or a Raspberry Pi will work.</p><blockquote><p>*The Windows series has not been tested, but it should work as well!</p></blockquote><p>Or if you want to try it out, you can directly use your current computer (can be combined with the <a href="/posts/zrealm-life/en/apple-homekit-xiaomi-mijia-smart-home-setup-step-by-step-guide-for-beginners-c3150cdc85dd/">previous article</a>).</p><p>This article will demonstrate using a Raspberry Pi (Raspberry Pi 3B) operated on a MacBook Pro (MacOS 10.15.4), starting from setting up the Raspberry Pi environment from scratch. If you are not using a Raspberry Pi, you can skip directly to the HomeBridge integration with HomeKit section (the steps are the same there).</p><p><a href="/assets/99db2a1fbfe5/1*go-wGMdV1VVbJ3c00rh0_w.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*go-wGMdV1VVbJ3c00rh0_w.webp" alt="Raspberry Pi 3B (special thanks to [Lu Xun Huang](https://medium.com/u/b32ce1b681f8){:target=&quot;_blank&quot;} )" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjE4NjciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>Raspberry Pi 3B (special thanks to <a href="https://medium.com/u/b32ce1b681f8" target="_blank">Lu Xun Huang</a> )</p><p><strong>If using a Raspberry Pi, you will also need a micro SD card (not too large, I use 8GB), a card reader, an Ethernet cable (for setup, later you can connect via WiFi); and the necessary software for the Raspberry Pi:</strong></p><ol><li><p><a href="https://downloads.raspberrypi.org/raspbian_latest" target="_blank">Raspberry Pi Desktop Operating System (Easy for Beginners, GUI Version)</a></p><li><p><a href="https://www.balena.io/etcher/" target="_blank">Etcher burning software</a></p></ol><h3 id="raspberry-pi-environment-setup"><span class="me-2">Raspberry Pi Environment Setup</span><a href="#raspberry-pi-environment-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="burning-the-operating-system"><span class="me-2">Burning the Operating System</span><a href="#burning-the-operating-system" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>After downloading the two required software, first insert the memory card into the card reader and connect it to the computer; then open the Etcher program (balenaEtcher)</p><p><a href="/assets/99db2a1fbfe5/1*3YcqdSf9z5RNqD6KJkd4Nw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*3YcqdSf9z5RNqD6KJkd4Nw.webp" alt="First, select the recently downloaded Raspberry Pi OS file &quot;xxxx.img&quot;. Second, choose your memory card device, then click &quot;Flash!&quot; to start writing!" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNTkyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>For the first option, select the newly downloaded Raspberry Pi OS image file “xxxx.img”. For the second option, choose your memory card device, then click “Flash!” to start writing!</p><p><a href="/assets/99db2a1fbfe5/1*o9XE1WYrBpeKSE31Ob9gcQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*o9XE1WYrBpeKSE31Ob9gcQ.webp" alt="At this point, a prompt will appear asking you to enter your **MacOS password**. After entering it, click &quot;Ok&quot; to continue." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MzIiIGhlaWdodD0iMjg3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>At this point, a prompt will appear asking you to enter your <strong>MacOS password</strong>. After entering it, click “Ok” to continue.</p><p><a href="/assets/99db2a1fbfe5/1*Z9oOKg9KPMpj3TZfvOvYeA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Z9oOKg9KPMpj3TZfvOvYeA.webp" alt="Burning... Please wait...." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNTkyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Burning in progress… please wait….</p><p><a href="/assets/99db2a1fbfe5/1*2G930lN4q4MVs4LCeE5y1w.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*2G930lN4q4MVs4LCeE5y1w.webp" alt="Verifying… Please wait…." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNTkyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Verifying… please wait….</p><p><a href="/assets/99db2a1fbfe5/1*CEB4bAMTQshY3u7MEC3q5w.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*CEB4bAMTQshY3u7MEC3q5w.webp" alt="Burn Successful!" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNTkyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Burning successful!</p><blockquote><p>*If a red Error appears, try formatting the memory card and burning it again.</p></blockquote><p>Reconnect the card reader to the computer, and create an empty file named “ssh” ( <a href="https://drive.google.com/file/d/1vSiMkRB1-5tO1hD4YnXxUcULTnCJBIFX/view?usp=sharing" target="_blank">or download here</a> ) in the memory card directory. The file should be blank, with no extension, just a plain “ssh” file; this allows us to connect to the Raspberry Pi using <strong>Terminal</strong>.</p><p><a href="/assets/99db2a1fbfe5/1*aGJHebPl5MMf4iy0Um9bjg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*aGJHebPl5MMf4iy0Um9bjg.webp" alt="ssh" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTQ1IiBoZWlnaHQ9Ijc5NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>ssh</p><h3 id="setting-up-raspberry-pi"><span class="me-2">Setting up Raspberry Pi</span><a href="#setting-up-raspberry-pi" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Eject the memory card, insert it into the Raspberry Pi, connect the network cable, and power it on; ensure the MacBook and Raspberry Pi are on the same network.</p><h4 id="check-the-ip-address-assigned-to-the-raspberry-pi"><span class="me-2"><strong>Check the IP Address Assigned to the Raspberry Pi</strong></span><a href="#check-the-ip-address-assigned-to-the-raspberry-pi" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/99db2a1fbfe5/1*6HZ0Fqp6cgpn1F3_4UwM0Q.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*6HZ0Fqp6cgpn1F3_4UwM0Q.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjQ1NCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>The assigned IP address of the Raspberry Pi is: <strong>192.168.0.110 (Please replace all IP addresses mentioned in this article with the ones you have found)</strong></p><blockquote><p><strong><em>It is recommended to set the Raspberry Pi to a static/reserved IP; otherwise, the IP address may change after rebooting and reconnecting, requiring you to check it again.</em></strong></p></blockquote><h4 id="use-ssh-to-access-the-raspberry-pi-for-operations"><span class="me-2">Use SSH to Access the Raspberry Pi for Operations</span><a href="#use-ssh-to-access-the-raspberry-pi-for-operations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Open Terminal and enter:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh pi@your_raspberry_pi_IP_address
</pre></table></code></div></div><p>If prompted, enter <code class="language-plaintext highlighter-rouge">yes</code>. The default password is: <code class="language-plaintext highlighter-rouge">raspberry</code></p><p><a href="/assets/99db2a1fbfe5/1*okEJeW9xZN8XFfRYJyp4Xg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*okEJeW9xZN8XFfRYJyp4Xg.webp" alt="**Connection Successful!**" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NzIiIGhlaWdodD0iNDA1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Connection Successful!</strong></p><blockquote><p>*If you encounter a WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED error message, open /Users/xxxx/.ssh/known_hosts with a text editor and clear its contents.</p></blockquote><h4 id="basic-raspberry-pi-tools-installation-and-setup"><span class="me-2">Basic Raspberry Pi Tools Installation and Setup</span><a href="#basic-raspberry-pi-tools-installation-and-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li><strong>Enter the following command to install the Vim editor:</strong></ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get <span class="nb">install </span>vim
</pre></table></code></div></div><p><a href="/assets/99db2a1fbfe5/1*QfhJwWvicEGfk_8PFLy7pA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*QfhJwWvicEGfk_8PFLy7pA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMTAiIGhlaWdodD0iMTYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><strong>2. Fix the following language warnings:</strong></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
    LANGUAGE = (unset),
    LC_ALL = (unset),
    LC_LANG = "zh_TW.UTF-8",
    LANG = "zh_TW.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").
</pre></table></code></div></div><p><strong>Input</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>vi .bashrc
</pre></table></code></div></div><p>Press “Enter” to proceed</p><p>Press “<code class="language-plaintext highlighter-rouge">i</code>” to enter insert mode</p><p>Move to the very bottom of the file and add a line: <code class="language-plaintext highlighter-rouge">export LC_ALL=C</code></p><p>Press “Esc” and type “<code class="language-plaintext highlighter-rouge">:wq!</code>” to save and exit.</p><p>Then run <code class="language-plaintext highlighter-rouge">source .bashrc</code> to update.</p><p><a href="/assets/99db2a1fbfe5/1*Z3E5QTXErDmmNVRd5QYo8g.gif" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Z3E5QTXErDmmNVRd5QYo8g.gif" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1ODgiIGhlaWdodD0iNDc0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>3. Install nvm to manage nodejs/npm:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>curl <span class="nt">-o-</span> https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh <span class="se">\\</span>| bash
</pre></table></code></div></div><p><strong>4. Install the latest version of <a href="https://nodejs.org/en/" target="_blank">nodejs</a> using nvm:</strong></p><p><code class="language-plaintext highlighter-rouge">nvm install 12.16.2</code></p><blockquote><p>*Here, choose to install version “12.16.2”</p></blockquote><p><strong>5. Confirm Environment Installation Completion:</strong></p><p><strong>Enter the following command</strong></p><p><code class="language-plaintext highlighter-rouge">npm -v</code></p><p><strong>and</strong></p><p><code class="language-plaintext highlighter-rouge">node -v</code></p><p><strong>Confirmation</strong></p><p><a href="/assets/99db2a1fbfe5/1*u3xgdplBB-7DyvSpAJU4dA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*u3xgdplBB-7DyvSpAJU4dA.webp" alt="No error message means success!" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MTIiIGhlaWdodD0iMjExIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>No error messages!</p><p><strong>6. Establish nodejs connection</strong></p><p><strong>Enter the following command</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>which node
</pre></table></code></div></div><p>Get the path information of nodejs location</p><p><strong>Enter Again</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo ln</span> <span class="nt">-fs</span> <span class="nb">paste </span>the path found by which node here <span class="o">(</span>without <span class="s2">"double quotes"</span><span class="o">)</span> /usr/local/bin/node
</pre></table></code></div></div><p><strong>Create Links</strong></p><p><a href="/assets/99db2a1fbfe5/1*L5C-2SCUV-Cf4yCDwYy8eg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*L5C-2SCUV-Cf4yCDwYy8eg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MTciIGhlaWdodD0iMjM5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Setup Complete!</strong></p><h4 id="enable-raspberry-pi-vnc-remote-desktop-function"><span class="me-2"><strong>Enable Raspberry Pi VNC Remote Desktop Function</strong></span><a href="#enable-raspberry-pi-vnc-remote-desktop-function" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Here, although we are installing the GUI version, you can of course connect the Raspberry Pi to a keyboard and HDMI and use it like a regular computer. However, for convenience, we will control the Raspberry Pi via remote desktop.</p><p><strong>Input:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>raspi-config
</pre></table></code></div></div><p><a href="/assets/99db2a1fbfe5/1*_Hwvt6tkKhsNE9TDkOaYAA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*_Hwvt6tkKhsNE9TDkOaYAA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDciIGhlaWdodD0iMjExIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Enter Settings:</strong></p><p><a href="/assets/99db2a1fbfe5/1*_EMj-6phsY5PjrPjqeavDg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*_EMj-6phsY5PjrPjqeavDg.webp" alt="Select the fifth item &quot;**Interfacing Options**&quot;" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTQiIGhlaWdodD0iNzE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Select the fifth item, “<strong>Interfacing Options</strong>”</p><p><a href="/assets/99db2a1fbfe5/1*CAHN3qczUpajbGGU9gaD9g.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*CAHN3qczUpajbGGU9gaD9g.webp" alt="Select the third option &quot;**P3 VNC**&quot;" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTQiIGhlaWdodD0iNzE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Choose the third option “<strong>P3 VNC</strong>”</p><p><a href="/assets/99db2a1fbfe5/1*wq4S5b33MpAJUiqt9z1EMg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*wq4S5b33MpAJUiqt9z1EMg.webp" alt="Use &quot; **←** &quot; to select &quot; **Yes** &quot; to open" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTQiIGhlaWdodD0iNzE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Use “ <strong>←</strong> “ to select “ <strong>Yes</strong> “ to turn on</p><p><a href="/assets/99db2a1fbfe5/1*sTZ8x9M-_5FRwdqy4mKvPw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*sTZ8x9M-_5FRwdqy4mKvPw.webp" alt="**VNC Remote Desktop Feature Enabled Successfully!**" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTQiIGhlaWdodD0iNzE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>VNC Remote Desktop Function Enabled Successfully!</strong></p><p><a href="/assets/99db2a1fbfe5/1*81Y7wZjbSS8Tf5Z_OHi3Rw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*81Y7wZjbSS8Tf5Z_OHi3Rw.webp" alt="Use &quot; **→** &quot; to directly jump to &quot; **Finish** &quot; and exit the settings interface." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTQiIGhlaWdodD0iNzE1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Use “<strong>→</strong>” to go directly to “<strong>Finish</strong>” to exit the settings interface.</p><h4 id="add-vnc-remote-desktop-service-to-startup-items"><span class="me-2"><strong>Add VNC Remote Desktop Service to Startup Items</strong></span><a href="#add-vnc-remote-desktop-service-to-startup-items" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>We want the VNC remote desktop service to start automatically when the Raspberry Pi boots up.</p><p><strong>Input</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/init.d/vncserver
</pre></table></code></div></div><p>Press “Enter” to proceed</p><p>Press “<code class="language-plaintext highlighter-rouge">i</code>” to enter insert mode</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>
<span class="c">### BEGIN INIT INFO</span>
<span class="c"># Provides:          vncserver</span>
<span class="c"># Required-Start:    $local_fs</span>
<span class="c"># Required-Stop:     $local_fs</span>
<span class="c"># Default-Start:     2 3 4 5</span>
<span class="c"># Default-Stop:      0 1 6</span>
<span class="c"># Short-Description: Start/stop vncserver</span>
<span class="c">### END INIT INFO</span>

<span class="c"># More details see:</span>
<span class="c"># http://www.penguintutor.com/linux/vnc</span>

<span class="c">### Customize this entry</span>
<span class="c"># Set the USER variable to the name of the user to start vncserver under</span>
<span class="nb">export </span><span class="nv">USER</span><span class="o">=</span><span class="s1">'pi'</span>
<span class="c">### End customization required</span>

<span class="nb">eval cd</span> ~<span class="nv">$USER</span>

<span class="k">case</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="k">in
  </span>start<span class="p">)</span>
    su <span class="nv">$USER</span> <span class="nt">-c</span> <span class="s1">'/usr/bin/vncserver -depth 16 -geometry 1024x768 :1'</span>
    <span class="nb">echo</span> <span class="s2">"Starting VNC server for </span><span class="nv">$USER</span><span class="s2"> "</span>
    <span class="p">;;</span>
  stop<span class="p">)</span>
    su <span class="nv">$USER</span> <span class="nt">-c</span> <span class="s1">'/usr/bin/vncserver -kill :1'</span>
    <span class="nb">echo</span> <span class="s2">"vncserver stopped"</span>
    <span class="p">;;</span>
  <span class="k">*</span><span class="p">)</span>
    <span class="nb">echo</span> <span class="s2">"Usage: /etc/init.d/vncserver {start</span><span class="se">\\</span><span class="s2">|stop}"</span>
    <span class="nb">exit </span>1
    <span class="p">;;</span>
<span class="k">esac</span>
<span class="nb">exit </span>0
</pre></table></code></div></div><p>Press “Command” + “C” and “Command” + “V” to copy and paste the above content, then press “Esc” and type “:wq!” to save and exit.</p><p><strong>Input again:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo chmod </span>755 /etc/init.d/vncserver
</pre></table></code></div></div><p>Modify file permissions.</p><p><strong>Input again:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>update-rc.d vncserver defaults
</pre></table></code></div></div><p>Add to startup items.</p><p><strong>Final Input:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>reboot
</pre></table></code></div></div><p><strong>Restart the Raspberry Pi.</strong></p><blockquote><ul><li>After the restart is complete, reconnect via SSH following the previous steps.</ul></blockquote><h4 id="connecting-using-a-vnc-client"><span class="me-2"><strong>Connecting Using a VNC Client:</strong></span><a href="#connecting-using-a-vnc-client" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Here, the Chrome app “<a href="https://chrome.google.com/webstore/detail/vnc%C2%AE-viewer-for-google-ch/iabmpiboiopbgfabjmgeedhcmjenhbla" target="_blank">VNC® Viewer for Google Chrome™</a>” is used. After installation and launch, enter <strong>Raspberry Pi IP address:1</strong>. Please note that the <strong>Port:1</strong> must be added!</p><blockquote><p>*I cannot connect using the Mac’s built-in VNC://, unsure of the reason.</p></blockquote><p><a href="/assets/99db2a1fbfe5/1*83cR8b2ajhPc1IwariNVBw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*83cR8b2ajhPc1IwariNVBw.webp" alt="Click &quot;**Connect**&quot;." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Click “<strong>Connect</strong>”.</p><p><a href="/assets/99db2a1fbfe5/1*B0esYM-GvrYUVXIwpq4vvQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*B0esYM-GvrYUVXIwpq4vvQ.webp" alt="Click &quot;**OK**&quot;." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Click “<strong>OK</strong>”.</p><p><a href="/assets/99db2a1fbfe5/1*jJ8cdRrc4bGHDxPvF7xXhw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*jJ8cdRrc4bGHDxPvF7xXhw.webp" alt="**Enter login username and password**, same as SSH connection, username `pi` default password `raspberry`." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Enter login username and password</strong>, same as SSH connection, username <code class="language-plaintext highlighter-rouge">pi</code> with default password <code class="language-plaintext highlighter-rouge">raspberry</code>.</p><p><a href="/assets/99db2a1fbfe5/1*vIUEmBrO-t_-6xy_kPNLNQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*vIUEmBrO-t_-6xy_kPNLNQ.webp" alt="**Successfully Connected!**" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Successfully connected!</strong></p><h4 id="complete-raspberry-pi-initialization-setup"><span class="me-2"><strong>Complete Raspberry Pi Initialization Setup:</strong></span><a href="#complete-raspberry-pi-initialization-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Next are all graphical interfaces! Very easy!</p><p><a href="/assets/99db2a1fbfe5/1*w9qXfybKr4REKN8hrJJUBw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*w9qXfybKr4REKN8hrJJUBw.webp" alt="Set language, region, and time zone." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Set Language, Region, and Time Zone.</p><p><a href="/assets/99db2a1fbfe5/1*xeb6Pr5FUwQGYHhzmid-6w.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*xeb6Pr5FUwQGYHhzmid-6w.webp" alt="Change the default Raspberry Pi password by entering the password you want to set." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NjgiIGhlaWdodD0iNzEyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Change the default Raspberry Pi password by entering the password you want to set.</p><p><a href="/assets/99db2a1fbfe5/1*o-LCjlYXdW7hmxYjIE6Axw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*o-LCjlYXdW7hmxYjIE6Axw.webp" alt="Directly click &quot; **Next** &quot;." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Directly proceed to the “<strong>Next</strong>” step.</p><p><a href="/assets/99db2a1fbfe5/1*NPZqliJZslnmvzzkW-Zj6g.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*NPZqliJZslnmvzzkW-Zj6g.webp" alt="Set up WiFi connection, so you don't need to plug in the cable anymore." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Set up WiFi connection, so you don’t need to plug in the cable afterward.</p><blockquote><p>*Note that the Raspberry Pi’s IP address may change, so check the router again.</p></blockquote><p><a href="/assets/99db2a1fbfe5/1*lsnk0BDb_z1VKkXYxUi7fg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*lsnk0BDb_z1VKkXYxUi7fg.webp" alt="Do you want to update the current operating system? If you're not in a hurry, choose &quot;**Next**&quot; to update!" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>If you’re not in a hurry, choose “<strong>Next</strong>” to update the current operating system!</p><blockquote><p>*The update takes about 20 to 30 minutes (depending on your internet speed)</p></blockquote><p><a href="/assets/99db2a1fbfe5/1*Xgm6NMQNoom_Zee3QHWXZg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Xgm6NMQNoom_Zee3QHWXZg.webp" alt="After the update is complete, click &quot;**Restart**&quot; to reboot." data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MTIiIGhlaWdodD0iNzU2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>After the update is complete, click “<strong>Restart</strong>” to reboot.</p><p><strong>Raspberry Pi Environment Setup Complete!</strong></p><h3 id="homebridge-installation"><span class="me-2">HomeBridge Installation</span><a href="#homebridge-installation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Officially entering the main event: installing and using HomeBridge.</p><p>Use Terminal to SSH into the Raspberry Pi or directly use the Terminal within the VNC remote desktop.</p><p><strong>Input:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nt">-g</span> <span class="nb">install </span>homebridge <span class="nt">--unsafe-perm</span>
</pre></table></code></div></div><p>^( <strong>Without sudo</strong> )</p><p>Install <strong>HomeBridge</strong></p><p><a href="/assets/99db2a1fbfe5/1*feOCt_Gyy8DEW7qHA2bpQw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*feOCt_Gyy8DEW7qHA2bpQw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OTQiIGhlaWdodD0iMjUzIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Installation Complete!</strong></p><h4 id="createmodify-configuration-file-configjson"><span class="me-2">Create/Modify Configuration File (config.json):</span><a href="#createmodify-configuration-file-configjson" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>To facilitate editing, use VNC remote desktop to connect to the Raspberry Pi</strong> (or directly use commands) <strong>:</strong></p><p>Click the top-left corner to open “<strong>File Manager</strong>” -&gt; Go to “<strong>/home/pi/.homebridge</strong>”</p><p>If you don’t see the “config.json” file, right-click on the blank area, select “<strong>New File</strong>” -&gt; enter the file name “<strong>config.json</strong>”</p><p>Right-click on “<strong>config.json</strong>” and open it with “<strong>Text Editor</strong>”.</p><p><a href="/assets/99db2a1fbfe5/1*Zk_cWdHZ4Um5zCX4dr5IdQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Zk_cWdHZ4Um5zCX4dr5IdQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDE0IiBoZWlnaHQ9Ijc2NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><strong>Paste the following basic configuration content:</strong></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"bridge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">51826</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123-45-568"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p><strong>No need to make special changes to the content, just copy it as is!</strong></p><blockquote><p><strong><em>Remember to save your work!</em></strong></p></blockquote><p><a href="/assets/99db2a1fbfe5/1*Jm3Ykku3Yll1aiuKWbR-EQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Jm3Ykku3Yll1aiuKWbR-EQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDIiIGhlaWdodD0iNjQ4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Done!</strong></p><h4 id="binding-homebridge-to-homekit"><span class="me-2">Binding HomeBridge to Homekit</span><a href="#binding-homebridge-to-homekit" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>Input:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>homebridge start
</pre></table></code></div></div><p>^( <strong>Without sudo</strong> )</p><p><strong>Enable</strong></p><p><a href="/assets/99db2a1fbfe5/1*uMEuC33I-R6KlLxS-L6Grw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*uMEuC33I-R6KlLxS-L6Grw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NDMiIGhlaWdodD0iNzAxIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><blockquote><p>*If you encounter an error like “Error: Service name is already in use on the network” or the port is occupied, try deleting the service, using <code class="language-plaintext highlighter-rouge">homebridge restart</code> to restart, or rebooting the device.</p></blockquote><blockquote><ul><li>If you see an error like “was not registered by any plugin,” it means you haven’t installed the corresponding homebridge plugin yet.</ul></blockquote><blockquote><p><strong><em>If you make changes to the configuration file (config.json) during startup, you need to update it accordingly:</em></strong></p></blockquote><blockquote><p><code class="language-plaintext highlighter-rouge">sudo homebridge restart</code></p></blockquote><blockquote><p><strong><em>Restart HomeBridge</em></strong></p></blockquote><blockquote><ul><li>Press “Control” + “C” to close and exit the HomeBridge service in Terminal.</ul></blockquote><p>Take out your iPhone and open the “Home” app. Tap the “+” in the top right corner of “Home,” select “Add Accessory,” and <strong>scan the QR code that appears</strong>.</p><p><a href="/assets/99db2a1fbfe5/1*IFt2yQBfKfooraaAgCxGkA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*IFt2yQBfKfooraaAgCxGkA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>At this point, you should see “<strong>Accessory Not Found</strong>.” Don’t worry! This is because we haven’t added any accessories to the HomeBridge bridge yet. It’s okay, let’s continue.</p><p><strong>At least one accessory is required to scan and add! ! !</strong> (Using a camera as an example) <strong>:</strong><br /> <strong>At least one accessory is required to scan and add! ! !</strong> (Using a camera as an example) <strong>:</strong><br /> <strong>At least one accessory is required to scan and add! ! !</strong> (Using a camera as an example) <strong>:</strong></p><p><a href="/assets/99db2a1fbfe5/1*HC1CSkt1RpBXYEZ3aa8Eyw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*HC1CSkt1RpBXYEZ3aa8Eyw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/99db2a1fbfe5/1*Wi1np5MvjBkwJkInD49aRA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Wi1np5MvjBkwJkInD49aRA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>The first time you scan, a warning window will appear. Just click “Force Join” to proceed!</p><blockquote><p><strong><em>After adding once, you don’t need to scan additional accessories again; they will update automatically!</em></strong></p></blockquote><h4 id="add-homebridge-service-to-raspberry-pi-startup-items-automatically"><span class="me-2">Add HomeBridge Service to Raspberry Pi Startup Items Automatically</span><a href="#add-homebridge-service-to-raspberry-pi-startup-items-automatically" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Like VNC remote desktop service, we also want the HomeBridge service to start automatically when the Raspberry Pi boots up. Otherwise, we would have to manually connect and enable it again after each reboot.</p><p><strong>Input:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>which homebridge
</pre></table></code></div></div><p><strong>Get homebridge Path Information</strong></p><p><a href="/assets/99db2a1fbfe5/1*L8-E7jZqv6TjO4zKaayAuA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*L8-E7jZqv6TjO4zKaayAuA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2OTYiIGhlaWdodD0iMjExIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Remember this path.</strong></p><p><strong>Enter again:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/init.d/homebridge
</pre></table></code></div></div><p>Press “Enter” to proceed</p><p>Press “<code class="language-plaintext highlighter-rouge">i</code>” to enter edit mode</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
</pre><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>
<span class="c">### BEGIN INIT INFO</span>
<span class="c"># Provides:</span>
<span class="c"># Required-Start:    $remote_fs $syslog</span>
<span class="c"># Required-Stop:     $remote_fs $syslog</span>
<span class="c"># Default-Start:     2 3 4 5</span>
<span class="c"># Default-Stop:      0 1 6</span>
<span class="c"># Short-Description: Start daemon at boot time</span>
<span class="c"># Description:       Enable service provided by daemon.</span>
<span class="c">### END INIT INFO</span>


<span class="nb">dir</span><span class="o">=</span><span class="s2">"/home/pi"</span>
<span class="nv">cmd</span><span class="o">=</span><span class="s2">"DEBUG=* Paste the path found by which homebridge here"</span>
<span class="nv">user</span><span class="o">=</span><span class="s2">"pi"</span>


<span class="nv">name</span><span class="o">=</span><span class="sb">`</span><span class="nb">basename</span> <span class="nv">$0</span><span class="sb">`</span>
<span class="nv">pid_file</span><span class="o">=</span><span class="s2">"/var/run/</span><span class="nv">$name</span><span class="s2">.pid"</span>
<span class="nv">stdout_log</span><span class="o">=</span><span class="s2">"/var/log/</span><span class="nv">$name</span><span class="s2">.log"</span>
<span class="nv">stderr_log</span><span class="o">=</span><span class="s2">"/var/log/</span><span class="nv">$name</span><span class="s2">.err"</span>


get_pid<span class="o">()</span> <span class="o">{</span>
<span class="nb">cat</span> <span class="s2">"</span><span class="nv">$pid_file</span><span class="s2">"</span>
<span class="o">}</span>


is_running<span class="o">()</span> <span class="o">{</span>
<span class="o">[</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$pid_file</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> ps <span class="nt">-p</span> <span class="sb">`</span>get_pid<span class="sb">`</span> <span class="o">&gt;</span> /dev/null 2&gt;&amp;1
<span class="o">}</span>


<span class="k">case</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="k">in
</span>start<span class="p">)</span>
<span class="k">if </span>is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">echo</span> <span class="s2">"Already started"</span>
<span class="k">else
</span><span class="nb">echo</span> <span class="s2">"Starting </span><span class="nv">$name</span><span class="s2">"</span>
<span class="nb">cd</span> <span class="s2">"</span><span class="nv">$dir</span><span class="s2">"</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$user</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
</span><span class="nb">sudo</span> <span class="nv">$cmd</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$stdout_log</span><span class="s2">"</span> 2&gt;&gt; <span class="s2">"</span><span class="nv">$stderr_log</span><span class="s2">"</span> &amp;
<span class="k">else
</span><span class="nb">sudo</span> <span class="nt">-u</span> <span class="s2">"</span><span class="nv">$user</span><span class="s2">"</span> <span class="nv">$cmd</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$stdout_log</span><span class="s2">"</span> 2&gt;&gt; <span class="s2">"</span><span class="nv">$stderr_log</span><span class="s2">"</span> &amp;
<span class="k">fi
</span><span class="nb">echo</span> <span class="nv">$!</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$pid_file</span><span class="s2">"</span>
<span class="k">if</span> <span class="o">!</span> is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">echo</span> <span class="s2">"Unable to start, see </span><span class="nv">$stdout_log</span><span class="s2"> and </span><span class="nv">$stderr_log</span><span class="s2">"</span>
<span class="nb">exit </span>1
<span class="k">fi
fi</span>
<span class="p">;;</span>
stop<span class="p">)</span>
<span class="k">if </span>is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"Stopping </span><span class="nv">$name</span><span class="s2">.."</span>
<span class="nb">kill</span> <span class="sb">`</span>get_pid<span class="sb">`</span>
<span class="k">for </span>i <span class="k">in </span>1 2 3 4 5 6 7 8 9 10
<span class="c"># for i in `seq 10`</span>
<span class="k">do
if</span> <span class="o">!</span> is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">break
</span><span class="k">fi


</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"."</span>
<span class="nb">sleep </span>1
<span class="k">done
</span><span class="nb">echo


</span><span class="k">if </span>is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">echo</span> <span class="s2">"Not stopped; may still be shutting down or shutdown may have failed"</span>
<span class="nb">exit </span>1
<span class="k">else
</span><span class="nb">echo</span> <span class="s2">"Stopped"</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$pid_file</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
</span><span class="nb">rm</span> <span class="s2">"</span><span class="nv">$pid_file</span><span class="s2">"</span>
<span class="k">fi
fi
else
</span><span class="nb">echo</span> <span class="s2">"Not running"</span>
<span class="k">fi</span>
<span class="p">;;</span>
restart<span class="p">)</span>
<span class="nv">$0</span> stop
<span class="k">if </span>is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">echo</span> <span class="s2">"Unable to stop, will not attempt to start"</span>
<span class="nb">exit </span>1
<span class="k">fi</span>
<span class="nv">$0</span> start
<span class="p">;;</span>
status<span class="p">)</span>
<span class="k">if </span>is_running<span class="p">;</span> <span class="k">then
</span><span class="nb">echo</span> <span class="s2">"Running"</span>
<span class="k">else
</span><span class="nb">echo</span> <span class="s2">"Stopped"</span>
<span class="nb">exit </span>1
<span class="k">fi</span>
<span class="p">;;</span>
<span class="k">*</span><span class="p">)</span>
<span class="nb">echo</span> <span class="s2">"Usage: </span><span class="nv">$0</span><span class="s2"> {start</span><span class="se">\\</span><span class="s2">|stop</span><span class="se">\\</span><span class="s2">|restart</span><span class="se">\\</span><span class="s2">|status}"</span>
<span class="nb">exit </span>1
<span class="p">;;</span>
<span class="k">esac</span>
<span class="nb">exit </span>0
</pre></table></code></div></div><p><strong>To:</strong></p><p><code class="language-plaintext highlighter-rouge">cmd="DEBUG=* Paste here the path you found with which homebridge"</code></p><p><strong>Replace with the path information you found (no quotation marks needed)</strong></p><p>Type “Commend” + “C” and “Commend” + “V” to copy and paste the above content, then press “Esc” and type “:wq!” to save and exit.</p><p><strong>Enter again:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo chmod </span>755 /etc/init.d/homebridge
</pre></table></code></div></div><p>Change file permissions.</p><p><strong>Final Input:</strong></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>update-rc.d homebridge defaults
</pre></table></code></div></div><p>Add to startup items.</p><p><strong>Done!</strong></p><blockquote><p>You can directly use <code class="language-plaintext highlighter-rouge">sudo /etc/init.d/homebridge start</code> to start the <code class="language-plaintext highlighter-rouge">homebridge</code> service.</p></blockquote><blockquote><p>You can also use: <code class="language-plaintext highlighter-rouge">tail -f /var/log/homebridge.err</code> to view startup error messages, and <code class="language-plaintext highlighter-rouge">tail -f /var/log/homebridge.log</code> to view logs.</p></blockquote><p><a href="/assets/99db2a1fbfe5/1*P_3Zg1GDuUVKJyO-kknCLA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*P_3Zg1GDuUVKJyO-kknCLA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MTciIGhlaWdodD0iMjM5Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><h3 id="preparation-before-connecting-mijia-smart-appliances"><span class="me-2">Preparation Before Connecting Mijia Smart Appliances</span><a href="#preparation-before-connecting-mijia-smart-appliances" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>After Homebridge is up and running, we can start adding all Mi Home appliances to Homebridge and connect them to HomeKit one by one!</p><p><strong>First, we need to add all Mijia smart appliances to the “<a href="https://apps.apple.com/tw/app/%E7%B1%B3%E5%AE%B6-%E6%99%BA%E6%85%A7%E7%94%9F%E6%B4%BB%E6%96%B0%E9%AB%94%E9%A9%97/id957323480" target="_blank">Mijia APP</a>“</strong>, as we will obtain the information to connect to HomeBridge from it.</p><p><strong>After Smart Appliances Are Added to the Mi Home App:</strong></p><p>Connect the iPhone to the Mac, open the Finder/iTunes interface, and select the connected phone.</p><p>Select backup to “<strong>This Computer</strong>”, do <strong>not</strong> check “<strong>Encrypt local backup</strong>”, then click “<strong>Back Up Now</strong>”.</p><p><a href="/assets/99db2a1fbfe5/1*nS68ECAURNSVbuJRYdhCvw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*nS68ECAURNSVbuJRYdhCvw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDcxIiBoZWlnaHQ9IjY4NCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>After completing the backup, <a href="http://www.imactools.com/iphonebackupviewer/download/mac" target="_blank">download</a> and install the backup viewer software: <a href="http://www.imactools.com/iphonebackupviewer/download/mac" target="_blank"><strong>iBackupViewer</strong></a></p><p>Open “<strong>iBackupViewer</strong>”</p><blockquote><p>At first launch, you will be prompted to go to Mac “System Preferences” - “Security &amp; Privacy” - “Privacy” - “+” - add “iBackupViewer”</p></blockquote><blockquote><p><strong>**If you have privacy concerns, you can disable internet access for this software and remove it after use</strong>*</p></blockquote><p><a href="/assets/99db2a1fbfe5/0*VMTW7WxQEl_ZFU7E.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/0*VMTW7WxQEl_ZFU7E.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3ODAiIGhlaWdodD0iNjg1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>After reopening <strong>iBackupViewer</strong> and successfully loading the backup file, click on the “Recently Backed Up Phone.”</p><p><a href="/assets/99db2a1fbfe5/1*Qqyp11Gc-dnK1Me08KKwbw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*Qqyp11Gc-dnK1Me08KKwbw.webp" alt="Select the &quot;**App Store**&quot; Icon" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MTIiIGhlaWdodD0iODM0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Select the “<strong>App Store</strong>” Icon</p><p><a href="/assets/99db2a1fbfe5/1*VlGVYTHKG88GIiH4C745Vg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*VlGVYTHKG88GIiH4C745Vg.webp" alt="On the left, find &quot;MiHome APP (MiHome.app)&quot; -&gt; On the right, find the &quot;**number_mihome.sqlite**&quot; file and &quot;**select**&quot; it -&gt; Top right corner &quot;**Export**&quot; -&gt; &quot;**Selected Files**&quot;" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjA2IiBoZWlnaHQ9IjgzNCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>On the left, find “Mi Home APP (MiHome.app)” -&gt; on the right, locate the “<strong>digital_mihome.sqlite</strong>” file and “<strong>select</strong>” it -&gt; top right corner “<strong>Export</strong>” -&gt; “<strong>Selected Files</strong>”</p><blockquote><p>*If there are two “number_mihome.sqlite” files, choose the one with the newest Created time.</p></blockquote><p>Drag the exported <strong>數字_mihome.sqlite</strong> file into this website to view its contents:</p><p><a href="https://inloop.github.io/sqlite-viewer/" target="_blank" class="img-link shimmer" ><img src="https://inloop.github.io/sqlite-viewer/img/icon.png" alt="" loading="lazy"></a></p><p><strong>You can change the query syntax to:</strong></p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">SELECT</span> <span class="nv">`ZDID`</span><span class="p">,</span><span class="nv">`ZNAME`</span><span class="p">,</span><span class="nv">`ZTOKEN`</span> <span class="k">FROM</span> <span class="s1">'ZDEVICE'</span> <span class="k">LIMIT</span> <span class="mi">0</span><span class="p">,</span><span class="mi">30</span>
</pre></table></code></div></div><p>Only display the required field information (if specific appliance kits need additional field information, you can add those for filtering).</p><p><a href="/assets/99db2a1fbfe5/1*VWdrF905GGB_yXrCD5CpPg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*VWdrF905GGB_yXrCD5CpPg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTMyIiBoZWlnaHQ9IjQzNSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><ol><li><p>ZDID: Device ID</p><li><p>ZNAME: Device Name</p><li><p>ZTOKEN: Install ZToken</p></ol><blockquote><p><strong><em>ZTOKEN cannot be used directly; it must be converted to “Token” before use.</em></strong></p></blockquote><p>Here is an example of converting a camera’s ZToken to a Token:</p><p>First, we get the content of the camera’s ZToken field from the list above.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>7f1a3541f0433b3ccda94beb856c2f5ba2b15f293ce0cc398ea08b549f9c74050143db63ee66b0cdff9f69917680151e
</pre></table></code></div></div><p>But the TOKEN obtained here cannot be used yet; we still need to convert it.</p><p><strong>Open the website <a href="http://aes.online-domain-tools.com/" target="_blank">http://aes.online-domain-tools.com/</a>:</strong></p><ol><li><p>Paste the copied ZTOKEN into the “Input Text” field and select “Hex”.</p><li><p>Enter the key “00000000000000000000000000000000” with 32 zeros, still select “Hex”.</p><li><p>Then press “Decrypt!” to convert.</p><li><p>Select all and copy the output content of the two lines at the bottom right &amp; remove the spaces to get the result we want <strong>Token</strong>.</p></ol><p><a href="/assets/99db2a1fbfe5/1*aQ7RfRx9ATjflYgMysnn3A.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*aQ7RfRx9ATjflYgMysnn3A.webp" alt="“**6d304e6867384b704b4f714d45314a34**” is the Token result we want!" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTEiIGhlaWdodD0iNTczIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>“<strong>6d304e6867384b704b4f714d45314a34</strong>” is the Token result we need!</p><blockquote><p>*For obtaining the Token, I tried using “miio” to sniff it directly, but it seems the Mi Home firmware has been updated, making this method no longer a quick and convenient way to get the Token!</p></blockquote><p>Finally, we also need to know the <strong>device’s IP address</strong> (using the camera as an example here):</p><p><a href="/assets/99db2a1fbfe5/0*OvqmDU7ARvoG96J0.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/0*OvqmDU7ARvoG96J0.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTAiIGhlaWdodD0iNzUwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Open the Mi Home APP → Camera → Top right corner “…” → Settings → Network Information to get the <strong>IP address</strong>!</p><blockquote><p><strong><em>Record ZDID/Token/IP information for later use.</em></strong></p></blockquote><h3 id="integrate-mijia-smart-appliances-into-homebridge-one-by-one"><span class="me-2">Integrate Mijia Smart Appliances into HomeBridge One by One</span><a href="#integrate-mijia-smart-appliances-into-homebridge-one-by-one" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>According to the packages and connection information required by each device, install and configure them one by one, then add them to HomeBridge.</p><blockquote><p><strong><em>Next, open Terminal to SSH into the Raspberry Pi or directly use the Terminal in the VNC remote desktop to continue the following tasks….</em></strong></p></blockquote><h4 id="1-mijia-camera-ptz-version"><span class="me-2"><strong>1. Mijia Camera PTZ Version:</strong></span><a href="#1-mijia-camera-ptz-version" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Install the <a href="https://github.com/josepramon/homebridge-mijia-camera" target="_blank">MijiaCamera</a> homebridge plugin via Terminal ( <strong>without sudo</strong> ):</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">-g</span> homebridge-mijia-camera
</pre></table></code></div></div><p><a href="/assets/99db2a1fbfe5/1*V7hZyogacXS9m_XN4qVtFw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*V7hZyogacXS9m_XN4qVtFw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NzciIGhlaWdodD0iMjExIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Referring to the previous tutorial on modifying the configuration file (config.json), add the <strong>accessories</strong> section <strong>to the file:</strong></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"bridge"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="mi">51826</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"123-45-568"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"accessories"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"accessory"</span><span class="p">:</span><span class="s2">"MijiaCamera"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Mi Camera"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"ip"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">""</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">accessories:</code> Add the Mi Home camera settings, with ip set to the camera’s IP and token set to the token from the previous tutorial.</p><blockquote><p><strong><em>Remember to save your work!</em></strong></p></blockquote><p>Then, follow the Homebridge section instructions to start/restart/scan and add Homebridge; you will be able to see the camera controls in the “Home” app.</p><p><a href="/assets/99db2a1fbfe5/0*fHtbNC-8IL9KQUyu.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/0*fHtbNC-8IL9KQUyu.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTAiIGhlaWdodD0iNDQ2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Controllable item: Camera On/Off</p><h4 id="2-mijia-dc-inverter-electric-fan"><span class="me-2">2. Mijia DC Inverter Electric Fan</span><a href="#2-mijia-dc-inverter-electric-fan" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Run the command below in Terminal to install the <a href="https://github.com/YinHangCode/homebridge-mi-fan" target="_blank">homebridge-mi-fan</a> homebridge plugin <strong>(without sudo)</strong>:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">-g</span> homebridge-mi-fan
</pre></table></code></div></div><p><a href="/assets/99db2a1fbfe5/1*vwe7fapof2mA4me_3_HyfA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*vwe7fapof2mA4me_3_HyfA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1ODQiIGhlaWdodD0iMjExIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Referring to the previous tutorial on modifying the configuration file (config.json), add the <strong>platforms</strong> section in the file (if it already exists, add a new subsection within it separated by a comma):</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"bridge"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="mi">51826</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"123-45-568"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"platforms"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"platform"</span><span class="p">:</span><span class="s2">"MiFanPlatform"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"deviceCfgs"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
               </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"MiDCVariableFrequencyFan"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"ip"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
               </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
               </span><span class="nl">"fanName"</span><span class="p">:</span><span class="s2">"room fan"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"fanDisable"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
               </span><span class="nl">"temperatureName"</span><span class="p">:</span><span class="s2">"room temperature"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"temperatureDisable"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
               </span><span class="nl">"humidityName"</span><span class="p">:</span><span class="s2">"room humidity"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"humidityDisable"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
               </span><span class="nl">"buzzerSwitchName"</span><span class="p">:</span><span class="s2">"fan buzzer switch"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"buzzerSwitchDisable"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
               </span><span class="nl">"ledBulbName"</span><span class="p">:</span><span class="s2">"fan led switch"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"ledBulbDisable"</span><span class="p">:</span><span class="kc">true</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">platforms:</code> Add Mi Home fan configuration info, with ip set to the camera’s ip, token set to the token from the previous tutorial, and humidity/temperature controlling whether to link and display humidity and temperature meter info.<br /> <strong>type must include the corresponding model text</strong>, supporting four different fan models:</p><ol><li><p>ZhiMi DC Variable Frequency Floor Fan: ZhiMi DC Variable Frequency Floor Fan</p><li><p>ZhiMi Natural Wind Fan: ZhiMiNaturalWindFan</p><li><p>Mi Home DC Inverter: MiDCVariableFrequencyFan (Sold in Taiwan)</p><li><p>Mijia Fan: DmakerFan</p></ol><p>Please enter your own fan model.</p><blockquote><p><strong><em>Remember to save your work!</em></strong></p></blockquote><p>Then, follow the Homebridge chapter to start/restart/scan and add Homebridge; you will be able to see the camera controls in the “Home” app.</p><p><a href="/assets/99db2a1fbfe5/1*N_N5_WCnHNsepVv7HvAjmQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*N_N5_WCnHNsepVv7HvAjmQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9Ijc4NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Controllable items: Fan on/off, wind speed adjustment</p><h4 id="3-xiaomi-air-purifier-3"><span class="me-2">3. Xiaomi Air Purifier 3</span><a href="#3-xiaomi-air-purifier-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Run the following command in Terminal to install the <a href="https://github.com/rgavril/homebridge-xiaomi-air-purifier3" target="_blank">homebridge-xiaomi-air-purifier3</a> homebridge plugin <strong>(without sudo)</strong>:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">-g</span> homebridge-xiaomi-air-purifier3
</pre></table></code></div></div><p><a href="/assets/99db2a1fbfe5/1*VxEYnHaBwQVLxxXOLb1Jkg.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*VxEYnHaBwQVLxxXOLb1Jkg.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iMjY3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Refer to the previous tutorial on modifying the configuration file (config.json), add the <strong>accessories</strong> section to the file (if it already exists, add a new subsection within it separated by a comma) <strong>:</strong></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"bridge"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="mi">51826</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"123-45-568"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"accessories"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"accessory"</span><span class="p">:</span><span class="s2">"XiaomiAirPurifier3"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Xiaomi Air Purifier"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"did"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"ip"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"pm25_breakpoints"</span><span class="p">:[</span><span class="w">
            </span><span class="mi">5</span><span class="p">,</span><span class="w">
            </span><span class="mi">12</span><span class="p">,</span><span class="w">
            </span><span class="mi">35</span><span class="p">,</span><span class="w">
            </span><span class="mi">55</span><span class="w">
         </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">accessories:</code> Add Mi Home fan configuration info, with ip set to the camera’s ip, token set to the token from the previous tutorial, and did set to zdid</p><blockquote><p><strong><em>Remember to save your work!</em></strong></p></blockquote><p>Then, follow the Homebridge section instructions to start/restart/scan and add Homebridge; you will be able to see the camera controls in the “Home” app.</p><p><a href="/assets/99db2a1fbfe5/1*R1bxhdiGuY3SyFnrhCO6iw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*R1bxhdiGuY3SyFnrhCO6iw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="/assets/99db2a1fbfe5/1*05s08YdF6vQUWAG7nmTnfA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*05s08YdF6vQUWAG7nmTnfA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Controllable items: Air purifier power switch, fan speed adjustment<br /> Viewable items: Current temperature and humidity</p><h4 id="4-mijia-led-smart-desk-lamp"><span class="me-2">4. Mijia LED Smart Desk Lamp</span><a href="#4-mijia-led-smart-desk-lamp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Install the <a href="https://github.com/vieira/homebridge-yeelight-wifi" target="_blank">homebridge-yeelight-wifi</a> homebridge plugin via Terminal <strong>(without sudo)</strong>:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">-g</span> homebridge-yeelight-wifi
</pre></table></code></div></div><p><a href="/assets/99db2a1fbfe5/1*1fQJ9UTCJRghUk00iT2WcQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*1fQJ9UTCJRghUk00iT2WcQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2ODIiIGhlaWdodD0iMjY3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p>Referring to the previous tutorial on modifying the configuration file (config.json), add the <strong>platforms</strong> section in the file (if it already exists, add a new subsection within it separated by a comma) <strong>:</strong></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"bridge"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="mi">51826</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"123-45-568"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"platforms"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"platform"</span><span class="p">:</span><span class="s2">"yeelight"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Yeelight"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>No need to pass any special parameters! For more detailed settings, refer to the <a href="https://github.com/vieira/homebridge-yeelight-wifi" target="_blank">official documentation</a> (such as brightness/color temperature…).</p><blockquote><p><strong><em>Remember to save your work!</em></strong></p></blockquote><p>The smart desk lamp also needs to be linked to the <a href="https://apps.apple.com/tw/app/yeelight/id977125608" target="_blank">Yeelight</a> app, and then enable “Local Network Control” to allow Homebridge to control it.</p><ol><li>Download and install the “<a href="https://apps.apple.com/tw/app/yeelight/id977125608" target="_blank">Yeelight</a>” app on your iPhone</ol><p><a href="/assets/99db2a1fbfe5/1*3m-UOoI7uam4a_N5dxU5VQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*3m-UOoI7uam4a_N5dxU5VQ.webp" alt="App Store search for &quot;Yeelight&quot; installation" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Search “Yeelight” on the App Store and install it</p><p><a href="/assets/99db2a1fbfe5/1*G9-12giq1DVIw5zTKOaF4A.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*G9-12giq1DVIw5zTKOaF4A.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="/assets/99db2a1fbfe5/1*usLJKkehTDKeeFG95KDe4g.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*usLJKkehTDKeeFG95KDe4g.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="/assets/99db2a1fbfe5/1*cWBMAqa_xkL01SoURNSO8g.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*cWBMAqa_xkL01SoURNSO8g.webp" alt="After installation, open the Yeelight APP -&gt; &quot;Add Device&quot; -&gt; Find &quot;Mi Home Desk Lamp&quot; -&gt; Re-pair and bind" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>After installation, open the Yeelight APP -&gt; “Add Device” -&gt; find “Mi Home Desk Lamp” -&gt; re-pair and bind.</p><p><a href="/assets/99db2a1fbfe5/1*8un0THsUf3ZesFPGSj_p-g.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*8un0THsUf3ZesFPGSj_p-g.webp" alt="Last step, remember to enable &quot;**Local Network Control**&quot;" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p>The final step is to enable “<strong>Local Network Control</strong>”.</p><blockquote><p><em>If you accidentally didn’t open it, go to the “Devices” page -&gt; select the desk lamp device -&gt; tap the “△” tab at the bottom right -&gt; tap “Local Network Control” to enter settings -&gt; turn on Local Network Control</em></p></blockquote><blockquote><p><strong><em>Honestly, this is really bad. The Mi Home app itself doesn’t have this toggle feature; you have to bind it to the Yeelight app, and you can’t unbind or rebind it back to Mi Home… otherwise, it will stop working.</em></strong></p></blockquote><p>Then, follow the Homebridge section instructions to start/restart/scan and add Homebridge; you will be able to see the camera controls in the “Home” app.</p><p><a href="/assets/99db2a1fbfe5/1*vyAiFirZgDB6_OSsHIdEPw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*vyAiFirZgDB6_OSsHIdEPw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Controllable Items: Light switch, color temperature adjustment, brightness adjustment</p><h4 id="other-mijia-smart-home-appliances-homebridge-packages"><span class="me-2">Other Mijia smart home appliances homebridge packages:</span><a href="#other-mijia-smart-home-appliances-homebridge-packages" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>My final config.json looks like this:</strong></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"bridge"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Homebridge"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="s2">"CC:22:3D:E3:CE:30"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="mi">51826</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"123-45-568"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"accessories"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"accessory"</span><span class="p">:</span><span class="s2">"MijiaCamera"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Mi Camera"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"ip"</span><span class="p">:</span><span class="s2">"192.168.0.105"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">"6d304e6867384b704b4f714d45314a34"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"accessory"</span><span class="p">:</span><span class="s2">"XiaomiAirPurifier3"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Xiaomi Air Purifier"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"did"</span><span class="p">:</span><span class="s2">"270033668"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"ip"</span><span class="p">:</span><span class="s2">"192.168.0.108"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">"5c3eeb03065fd8fc6ad10cae1f7cce7c"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"pm25_breakpoints"</span><span class="p">:[</span><span class="w">
            </span><span class="mi">5</span><span class="p">,</span><span class="w">
            </span><span class="mi">12</span><span class="p">,</span><span class="w">
            </span><span class="mi">35</span><span class="p">,</span><span class="w">
            </span><span class="mi">55</span><span class="w">
         </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nl">"platforms"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"platform"</span><span class="p">:</span><span class="s2">"MiFanPlatform"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"deviceCfgs"</span><span class="p">:[</span><span class="w">
            </span><span class="p">{</span><span class="w">
               </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"MiDCVariableFrequencyFan"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"ip"</span><span class="p">:</span><span class="s2">"192.168.0.106"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">"dd1b6f582ba6ce34f959bbbc1c1ca59f"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"fanName"</span><span class="p">:</span><span class="s2">"room fan"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"fanDisable"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
               </span><span class="nl">"temperatureName"</span><span class="p">:</span><span class="s2">"room temperature"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"temperatureDisable"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
               </span><span class="nl">"humidityName"</span><span class="p">:</span><span class="s2">"room humidity"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"humidityDisable"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
               </span><span class="nl">"buzzerSwitchName"</span><span class="p">:</span><span class="s2">"fan buzzer switch"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"buzzerSwitchDisable"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
               </span><span class="nl">"ledBulbName"</span><span class="p">:</span><span class="s2">"fan led switch"</span><span class="p">,</span><span class="w">
               </span><span class="nl">"ledBulbDisable"</span><span class="p">:</span><span class="kc">true</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"platform"</span><span class="p">:</span><span class="s2">"yeelight"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Yeelight"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p><strong>For everyone’s reference!</strong></p><p>The Mi Home appliances I used are as shown in the tutorial above. For others I don’t have, I didn’t try them. You can check yourself on <a href="https://www.npmjs.com/search?q=keywords%3Ahomebridge-plugin%20mi%20camera" target="_blank"><strong>npm (homebridge-plugin XXX English name)</strong></a>, then follow the similar installation and setup steps as above to integrate them!</p><p>Here are a few Homebridge plugins I found but haven’t tried (no guarantee they work):</p><ol><li><p>Xiaomi Air Purifier 1st Gen: <a href="https://github.com/seikan/homebridge-mi-air-purifier" target="_blank">homebridge-mi-air-purifier</a></p><li><p>Mi Home Smart Socket Series: <a href="https://github.com/YinHangCode/homebridge-mi-outlet" target="_blank">homebridge-mi-outlet</a></p><li><p>Xiaomi Robot Vacuum: <a href="https://github.com/YinHangCode/homebridge-mi-robot_vacuum" target="_blank">homebridge-mi-robot_vacuum</a></p><li><p>Mi Home Smart Gateway: <a href="https://github.com/YinHangCode/homebridge-mi-aqara" target="_blank">homebridge-mi-aqara</a></p></ol><h3 id="tips"><span class="me-2">Tips</span><a href="#tips" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><p>It is recommended to set all Mi Home appliances to static/reserved IPs on the router. Otherwise, the IP addresses may change, requiring you to update the config.json settings again.</p><li><p>If you find that all the steps are correct but errors still occur or HomeKit keeps showing “No Response,” try again; if the issue persists, it may mean the plugin is no longer valid and you need to find another plugin to connect. (You can check the GitHub issues)</p><li><p>Functionality failure and slow response; this is also unresolved. You can submit an issue to notify the author and wait for an update. Since it is an open-source project, you can’t expect too much!</p><li><p><strong>After binding each appliance, you can start Homebridge once, then check on your iPhone if it works. If it does, you can press “Control” + “C” to stop it; after all appliances are bound, restart the Raspberry Pi so it automatically starts the Homebridge service in the background after reboot. This is what we want.</strong></p></ol><h3 id="conclusion"><span class="me-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/99db2a1fbfe5/1*w7WnAn3XHNW2f5fJbRd_Zw.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*w7WnAn3XHNW2f5fJbRd_Zw.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTI1IiBoZWlnaHQ9IjI0MzYiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><a href="/assets/99db2a1fbfe5/1*ph8BfcF0ivvlZyKNF9mubQ.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*ph8BfcF0ivvlZyKNF9mubQ.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><a href="/assets/99db2a1fbfe5/1*e1FAJuyCLOWEkA6MAeENkA.webp" class="popup img-link blur"><img data-src="/assets/99db2a1fbfe5/1*e1FAJuyCLOWEkA6MAeENkA.webp" alt="You can also go to &quot;Settings&quot; -&gt; &quot;Control Center&quot; -&gt; &quot;Customize Controls&quot; and add the &quot;Home&quot; app to quickly control HomeKit from the Control Center pull-down!" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTQiIGhlaWdodD0iMTIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>You can also go to “Settings” -&gt; “Control Center” -&gt; “Customize” and add the “Home” app to quickly access HomeKit from the Control Center dropdown!</p><p>After connecting everything to HomeKit, there’s only one word: “Awesome”! The switches respond faster; the only downside is I don’t have a home hub to enable remote control. This concludes the advanced Homebridge guide. Thank you for reading.</p><p>Back to the beginning of the article, once everything is added to HomeKit, we can seamlessly use the automation features of iOS ≥ 13 Shortcuts.</p><p>Later, I want to study how the Homebridge plugin works. It seems very interesting! So if a Homebridge plugin doesn’t meet your needs or a plugin breaks and you can’t find a replacement, just wait for me to research it!</p><h4 id="home-assistant"><span class="me-2">Home assistant</span><a href="#home-assistant" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>There is another smart home platform called <a href="https://www.home-assistant.io/" target="_blank">Homeassistant</a> that can be installed on a Raspberry Pi (<strong>but note: a 2A power supply is required to start it</strong>); I have also installed <a href="https://www.home-assistant.io/" target="_blank">Homeassistant</a> to try it out. It offers a full GUI with graphical operations, allowing you to connect home appliances with just a few clicks. I plan to explore it further later. It feels like an alternative to the Mi Home platform, and it is more suitable if you have many IoT devices from different manufacturers.</p><h4 id="references"><span class="me-2">References</span><a href="#references" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li><p><a href="https://www.domoticz.cn/forum/viewtopic.php?t=52" target="_blank">https://www.domoticz.cn/forum/viewtopic.php?t=52</a></p><li><p><a href="https://or2.in/2017/07/02/Homekit-and-MiJia-with-pi/#3-%E5%8F%B7%E5%A4%96-%E5%BC%80%E5%90%AF%E5%8F%AF%E8%A7%86%E5%8C%96VNC" target="_blank">https://or2.in/2017/07/02/Homekit-and-MiJia-with-pi/#3-%E5%8F%B7%E5%A4%96-%E5%BC%80%E5%90%AF%E5%8F%AF%E8%A7%86%E5%8C%96VNC</a></p></ol><h3 id="further-reading"><span class="me-2">Further Reading</span><a href="#further-reading" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><p><a href="/posts/zrealm-life/en/xiaomi-smart-home-devices-ai-speaker-sensor-dc-fan-integration-bcff7c157941/">Xiaomi Smart Home New Purchases (AI Speaker, Temperature and Humidity Sensor, Scale 2, DC Inverter Fan)</a></p><li><p><a href="/posts/zrealm-life/en/ios-13-1-shortcuts-automation-seamless-integration-with-mi-home-smart-devices-21119db777dd/">iOS ≥ 13.1 Automation with “Shortcuts” for Mijia Smart Home (Using the built-in Shortcuts app in iOS ≥ 13.1 to complete automation)</a></p><li><p><a href="/posts/zrealm-life/en/mi-home-app-xiao-ai-speaker-region-issues-resolve-connectivity-for-xiaomi-air-purifier-3-94a4020edb82/">Mi Home APP / Xiao Ai Speaker Region Issues</a></p><li><p><a href="/posts/zrealm-life/en/apple-homekit-xiaomi-mijia-smart-home-setup-step-by-step-guide-for-beginners-c3150cdc85dd/">Smart Home First Experience — Apple HomeKit &amp; Xiaomi Mijia (Mijia Smart Camera and Mijia Smart Desk Lamp, HomeKit Setup Tutorial)</a></p></ol><p>If you have any questions or feedback, feel free to <a href="https://www.zhgchg.li/contact" target="_blank">contact me</a>.</p><hr /><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=🍺&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a><br /></p><blockquote class="prompt-info"><p>This post was originally published on Medium (<a href="https://medium.com/p/99db2a1fbfe5" target="_blank"><strong>View original post</strong></a>), and automatically converted and synced by <a href="/posts/tools/medium-to-jekyll/" target="_blank">ZMediumToMarkdown</a>.</p></blockquote><blockquote class="prompt-info"><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/en/zmediumtomarkdown/2020-04-20-99db2a1fbfe5.md" target="_blank">Improve this page on Github.</a></p></blockquote><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic><script async src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1K+ Followers</span></a></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-life/">ZRealm Life.</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/english/" class="post-tag no-text-decoration" >english</a> <a href="/tags/ai-translation/" class="post-tag no-text-decoration" >ai-translation</a> <a href="/tags/homekit/" class="post-tag no-text-decoration" >homekit</a> <a href="/tags/iphone/" class="post-tag no-text-decoration" >iphone</a> <a href="/tags/homebridge/" class="post-tag no-text-decoration" >homebridge</a> <a href="/tags/mi-home/" class="post-tag no-text-decoration" >mi-home</a> <a href="/tags/lifestyle/" class="post-tag no-text-decoration" >lifestyle</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Smart%20WFH%20Home%20Setup%EF%BD%9CControl%20All%20Appliances%20with%20HomeKit%20&%20Raspberry%20Pi%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-life%2Fen%2Fsmart-wfh-home-setup-control-all-appliances-with-homekit-raspberry-pi-99db2a1fbfe5%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Smart%20WFH%20Home%20Setup%EF%BD%9CControl%20All%20Appliances%20with%20HomeKit%20&%20Raspberry%20Pi%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-life%2Fen%2Fsmart-wfh-home-setup-control-all-appliances-with-homekit-raspberry-pi-99db2a1fbfe5%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-life%2Fen%2Fsmart-wfh-home-setup-control-all-appliances-with-homekit-raspberry-pi-99db2a1fbfe5%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/en/japan-overseas-shopping-rakuten-consolidated-shipping-for-taiwan-buy-from-rakuten-amazon-bea62c251f1b/">Japan Overseas Shopping｜Rakuten Consolidated Shipping for Taiwan｜Buy from Rakuten & Amazon</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/zh-cn/%E6%97%A5%E6%9C%AC%E4%B9%90%E5%A4%A9%E9%9B%86%E8%BF%90%E6%95%99%E5%AD%A6-%E5%BF%AB%E9%80%9F%E8%B4%AD%E4%B9%B0horie%E9%92%9B%E6%9D%AF%E4%B8%8Eamazon%E5%95%86%E5%93%81%E5%AF%84%E9%80%81%E5%8F%B0%E6%B9%BE%E5%85%A8%E6%94%BB%E7%95%A5-bea62c251f1b/">日本海外购物寄送台湾教学 — 使用乐天集运购买乐天拍卖与 Amazon 商品 (Horie 钛杯)</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/%E6%97%A5%E6%9C%AC%E6%A8%82%E5%A4%A9%E9%9B%86%E9%81%8B%E6%95%99%E5%AD%B8-%E5%BF%AB%E9%80%9F%E8%B3%BC%E8%B2%B7horie%E9%88%A6%E6%9D%AF%E8%88%87amazon%E5%95%86%E5%93%81%E5%AF%84%E9%80%81%E5%8F%B0%E7%81%A3%E5%85%A8%E6%94%BB%E7%95%A5-bea62c251f1b/">日本海外購物寄送台灣教學 — 使用樂天集運購買樂天拍賣與 Amazon 商品 (Horie 鈦杯)</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/en/line-bank-to-firstrade-transfer-fast-deposit-150-nt-fee-guide-with-account-upgrade-fee-subsidy-e4d139fe0685/">LINE Bank to Firstrade Transfer｜Fast Deposit & 150 NT Fee Guide with Account Upgrade & Fee Subsidy</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/zh-cn/line-bank-%E5%85%A5%E9%87%91-firstrade-%E6%95%99%E5%AD%A6-%E5%BF%AB%E9%80%9F%E5%88%B0%E5%B8%90-%E4%BD%8E%E6%89%8B%E7%BB%AD%E8%B4%B9150%E5%85%83-%E5%B8%90%E6%88%B7%E5%8D%87%E7%BA%A7%E4%B8%8E%E6%89%8B%E7%BB%AD%E8%B4%B9%E8%A1%A5%E5%8A%A9%E7%94%B3%E8%AF%B7%E5%85%A8%E6%94%BB%E7%95%A5-e4d139fe0685/">手把手教学 — LINE Bank 入金 Firstrade 快速到帐、手续费只要 150 元及帐户升级/约定转帐/手续费补助申请教学</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">章節 (Chapters)🔖</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-life/en/create-fake-transparent-iphone-wallpapers-easily-imovie-green-screen-editing-tips-2e4429f410d6/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1589096262" data-df="ll" > May 10, 2020 </time><h4 class="pt-0 my-2">Create Fake Transparent iPhone Wallpapers Easily｜iMovie Green Screen Editing Tips</h4><div class="text-muted"><p>iPhone users struggling with static wallpapers can create fake transparent backgrounds using iMovie&#39;s green screen feature, enhancing visual appeal without complex tools.</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-life/en/apple-homekit-xiaomi-mijia-smart-home-setup-step-by-step-guide-for-beginners-c3150cdc85dd/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1562346827" data-df="ll" > Jul 6, 2019 </time><h4 class="pt-0 my-2">Apple HomeKit & Xiaomi Mijia Smart Home Setup｜Step-by-Step Guide for Beginners</h4><div class="text-muted"><p>Discover how to seamlessly integrate Xiaomi Mijia smart cameras and lamps with Apple HomeKit. This guide solves setup challenges, enabling smooth device control and enhanced home automation for beg...</p></div></div></a></article><article class="col"> <a href="/posts/travel-journals/en/san-in-kansai-7-day-solo-trip-explore-izumo-matsue-tottori-himeji-osaka-kobe-aacd5f5cacd1/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1733155496" data-df="ll" > Dec 3, 2024 </time><h4 class="pt-0 my-2">San'in & Kansai 7-Day Solo Trip｜Explore Izumo, Matsue, Tottori, Himeji, Osaka, Kobe</h4><div class="text-muted"><p>Solo travelers seeking a comprehensive 7-day itinerary covering San&#39;in and Kansai regions can follow a 1,000 km route from Okayama through Izumo, Matsue, Tottori, Himeji, Osaka, and Kobe, completin...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/ios-hls-cache-%E5%AF%A6%E4%BD%9C%E5%85%A8%E6%94%BB%E7%95%A5-avplayer-%E4%B8%B2%E6%B5%81%E9%82%8A%E6%92%AD%E9%82%8A%E5%BF%AB%E5%8F%96%E6%8A%80%E8%A1%93%E8%A7%A3%E6%9E%90-d796bf8e661e/" class="btn btn-outline-primary" aria-label="Older" ><p>iOS HLS Cache 實作全攻略｜AVPlayer 串流邊播邊快取技術解析</p></a> <a href="/posts/zrealm-life/zh-cn/homebridge-%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%B2%E6%8E%A5%E7%B1%B3%E5%AE%B6%E5%AE%B6%E7%94%B5%E5%88%B0homekit-%E6%89%93%E9%80%A0%E6%99%BA%E6%85%A7%E5%B1%85%E5%AE%B6wfh%E7%8E%AF%E5%A2%83-99db2a1fbfe5/" class="btn btn-outline-primary" aria-label="Newer" ><p>打造舒适的 WFH 智慧居家环境，控制家电尽在指尖</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span> <a href="/">中文</a>|<a href="/tags/simplified-chinese">简中</a>|<a href="/tags/english/">English</a></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a> <br/></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/english/">english</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai-translation/">ai-translation</a> <a class="post-tag btn btn-outline-primary" href="/tags/simplified-chinese/">simplified-chinese</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/google-apps-script/">google-apps-script</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
