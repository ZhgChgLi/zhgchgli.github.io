<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="iOS Notification Service Extension｜Enhance Push Notifications with Swift" /><meta name="author" content="ZhgChgLi" /><meta property="og:locale" content="en" /><meta name="description" content="Discover how to implement Notification Service Extension in iOS 10+ to optimize image push notifications, enable pre-display processing, and track notification display stats for improved user engagement." /><meta property="og:description" content="Discover how to implement Notification Service Extension in iOS 10+ to optimize image push notifications, enable pre-display processing, and track notification display stats for improved user engagement." /><link rel="canonical" href="https://zhgchg.li/posts/zrealm-development/en/ios-notification-service-extension-enhance-push-notifications-with-swift-cb6eba52a342/" /><meta property="og:url" content="https://zhgchg.li/posts/zrealm-development/en/ios-notification-service-extension-enhance-push-notifications-with-swift-cb6eba52a342/" /><meta property="og:site_name" content="ZhgChgLi (Harry Li)" /><meta property="og:image" content="https://zhgchg.li/assets/cb6eba52a342/1*8juoKO7BZiT3PQjqufWcrA.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-10-15T23:44:01+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zhgchg.li/assets/cb6eba52a342/1*8juoKO7BZiT3PQjqufWcrA.webp" /><meta property="twitter:title" content="iOS Notification Service Extension｜Enhance Push Notifications with Swift" /><meta name="twitter:site" content="@zhgchgli" /><meta name="twitter:creator" content="@zhgchgli" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ZhgChgLi","url":"https://medium.com/@zhgchgli/"},"dateModified":"2024-04-13T15:13:08+08:00","datePublished":"2018-10-15T23:44:01+08:00","description":"Discover how to implement Notification Service Extension in iOS 10+ to optimize image push notifications, enable pre-display processing, and track notification display stats for improved user engagement.","headline":"iOS Notification Service Extension｜Enhance Push Notifications with Swift","image":{"lqip":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTA2IiBoZWlnaHQ9IjI1OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg==","url":"https://zhgchg.li/assets/cb6eba52a342/1*8juoKO7BZiT3PQjqufWcrA.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhgchg.li/posts/zrealm-development/en/ios-notification-service-extension-enhance-push-notifications-with-swift-cb6eba52a342/"},"url":"https://zhgchg.li/posts/zrealm-development/en/ios-notification-service-extension-enhance-push-notifications-with-swift-cb6eba52a342/"}</script><title>iOS Notification Service Extension｜Enhance Push Notifications with Swift | ZhgChgLi (Harry Li)</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ZhgChgLi (Harry Li)"><meta name="application-name" content="ZhgChgLi (Harry Li)"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6WZJENT8WR"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-6WZJENT8WR'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3184248473087645" crossorigin="anonymous"></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/zhgchgli.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ZhgChgLi (Harry Li)</a><p class="site-subtitle fst-italic mb-0"> <a href="https://medium.com/@zhgchgli" target="_blank" style="display: block;text-align: center;font-style: normal;/* text-decoration: underline; */font-size: 1.2em;color: var(--heading-color);">1K+ Followers on Medium</a> An iOS, web, and automation developer from Taiwan 🇹🇼 who also loves sharing, traveling, and writing.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa fa-envelope-open"></i> <span>CONTACT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://link.zhgchg.li" aria-label="link" target="_blank" rel="noopener noreferrer" > <i class="fas fa-link"></i> </a> <a href="https://www.linkedin.com/in/zhgchgli" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['zhgchgli','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>iOS Notification Service Extension｜Enhance Push Notifications with Swift</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>iOS Notification Service Extension｜Enhance Push Notifications with Swift</h1><p class="post-desc fw-light mb-4">Discover how to implement Notification Service Extension in iOS 10+ to optimize image push notifications, enable pre-display processing, and track notification display stats for improved user engagement.</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1539618241" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Oct 15, 2018 </time> </span> <span> Updated <time data-ts="1712992388" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 13, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/assets/cb6eba52a342/1*8juoKO7BZiT3PQjqufWcrA.webp" class="popup img-link preview-img blur"><img data-src="/assets/cb6eba52a342/1*8juoKO7BZiT3PQjqufWcrA.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTA2IiBoZWlnaHQ9IjI1OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://medium.com/@zhgchgli/">ZhgChgLi</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1257 words" > <em>6 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">iOS Notification Service Extension｜Enhance Push Notifications with Swift</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">章節 (Chapters)🔖</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">iOS Notification Service Extension｜Enhance Push Notifications with Swift</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"> <widgetic id="64ce7263ecb2a197598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><blockquote class="prompt-info"><p>The following content is translated by OpenAI, <a href="/posts/cb6eba52a342/"><strong>Click here</strong></a> to view the original Chinese version. <a href="/posts/cb6eba52a342/"><strong>點此查看中文版</strong></a></p></blockquote><hr /><h3 id="ios--10-notification-service-extension-application-swift"><span class="me-2">iOS ≥ 10 Notification Service Extension Application (Swift)</span><a href="#ios--10-notification-service-extension-application-swift" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Image Push Notifications, Push Notification Display Statistics, Push Notification Display Preprocessing</p><p>Regarding the basics of push notification setup and principles, there is plenty of information available online, so it will not be discussed here. This article focuses on how to enable image push notifications in the app and use new features to achieve more precise push display statistics.</p><p><a href="/assets/cb6eba52a342/1*8juoKO7BZiT3PQjqufWcrA.webp" class="popup img-link blur"><img data-src="/assets/cb6eba52a342/1*8juoKO7BZiT3PQjqufWcrA.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTA2IiBoZWlnaHQ9IjI1OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>As shown in the above image, the Notification Service Extension allows you to preprocess the push notification after the app receives it, before displaying the notification content.</p><p>The official documentation states that when processing incoming push notifications, the processing time limit is about 30 seconds. If there is no callback within 30 seconds, the push notification will continue to be delivered and appear on the user’s device.</p><h4 id="support-level"><span class="me-2">Support Level</span><a href="#support-level" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>iOS ≥ 10.0</p><h4 id="what-can-you-do-in-30-seconds"><span class="me-2">What can you do in 30 seconds?</span><a href="#what-can-you-do-in-30-seconds" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>(Goal 1) Download images from the image link field in the push notification content and attach them to the push notification content 🏆</ul><p><a href="/assets/cb6eba52a342/1*dd2kRizi6v-AIXcMWourow.webp" class="popup img-link blur"><img data-src="/assets/cb6eba52a342/1*dd2kRizi6v-AIXcMWourow.webp" alt="" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MzYiIGhlaWdodD0iMTk0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><ul><li><p>(Goal 2) Track whether push notifications are displayed 🏆</p><li><p>Push Notification Content Modification and Reorganization</p><li><p>Push Notification Content Encryption and Decryption (Decryption) Display</p><li><p><em>Decide whether to show push notifications?</em> =&gt; <strong>Answer: No</strong></p></ul><h4 id="first-the-payload-part-of-the-backend-push-notification-program"><span class="me-2">First, the Payload part of the backend push notification program</span><a href="#first-the-payload-part-of-the-backend-push-notification-program" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The backend must add a line <code class="language-plaintext highlighter-rouge">"mutable-content":1</code> in the push notification structure for the system to execute the Notification Service Extension upon receiving the notification.</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"aps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"alert"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New Article Recommended for You"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Check it out now"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"mutable-content"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"sound"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"badge"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><h4 id="and-step-1-create-a-new-target-for-the-project"><span class="me-2">And… Step 1, Create a New Target for the Project</span><a href="#and-step-1-create-a-new-target-for-the-project" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="/assets/cb6eba52a342/1*ZjPVTxLR6ywAdk70Y7_J7A.webp" class="popup img-link blur"><img data-src="/assets/cb6eba52a342/1*ZjPVTxLR6ywAdk70Y7_J7A.webp" alt="**Step 1.** Xcode -&gt; File -&gt; New -&gt; Target" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjQ4MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p><strong>Step 1.</strong> Xcode -&gt; File -&gt; New -&gt; Target</p><p><a href="/assets/cb6eba52a342/1*2KRusR8MJUim7UH1CmS7pw.webp" class="popup img-link blur"><img data-src="/assets/cb6eba52a342/1*2KRusR8MJUim7UH1CmS7pw.webp" alt="**Step 2.** iOS -&gt; Notification Service Extension -&gt; Next" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjEwMDgiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><strong>Step 2.</strong> iOS -&gt; Notification Service Extension -&gt; Next</p><p><a href="/assets/cb6eba52a342/1*sAuzxJPpohTGp-KV13yupg.webp" class="popup img-link blur"><img data-src="/assets/cb6eba52a342/1*sAuzxJPpohTGp-KV13yupg.webp" alt="**Step 3.** Enter Product Name -&gt; Finish" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAwIiBoZWlnaHQ9IjEwMDgiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImdyZXkiLz48L3N2Zz4="></a></p><p><strong>Step 3.</strong> Enter Product Name -&gt; Finish</p><p><a href="/assets/cb6eba52a342/1*3DF_fMQLSrGxTbmLY6CJAg.webp" class="popup img-link blur"><img data-src="/assets/cb6eba52a342/1*3DF_fMQLSrGxTbmLY6CJAg.webp" alt="**Step 4.** Click Activate" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NTAiIGhlaWdodD0iNDQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><strong>Step 4.</strong> Click Activate</p><p><strong>Step 2: Write the Push Notification Content Handler</strong></p><p><a href="/assets/cb6eba52a342/1*UsCd2btDPK6GWKrYEA9LbQ.webp" class="popup img-link blur"><img data-src="/assets/cb6eba52a342/1*UsCd2btDPK6GWKrYEA9LbQ.webp" alt="Found Product Name/NotificationService.swift file" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9Ijc2MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iZ3JleSIvPjwvc3ZnPg=="></a></p><p>Found Product Name/NotificationService.swift file</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">UserNotifications</span>

<span class="kd">class</span> <span class="kt">NotificationService</span><span class="p">:</span> <span class="kt">UNNotificationServiceExtension</span> <span class="p">{</span>

    <span class="k">var</span> <span class="nv">contentHandler</span><span class="p">:</span> <span class="p">((</span><span class="kt">UNNotificationContent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)?</span>
    <span class="k">var</span> <span class="nv">bestAttemptContent</span><span class="p">:</span> <span class="kt">UNMutableNotificationContent</span><span class="p">?</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">didReceive</span><span class="p">(</span><span class="n">_</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">UNNotificationRequest</span><span class="p">,</span> <span class="n">withContentHandler</span> <span class="nv">contentHandler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">UNNotificationContent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">contentHandler</span> <span class="o">=</span> <span class="n">contentHandler</span>
        <span class="n">bestAttemptContent</span> <span class="o">=</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="nf">mutableCopy</span><span class="p">()</span> <span class="k">as?</span> <span class="kt">UNMutableNotificationContent</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="k">let</span> <span class="nv">bestAttemptContent</span> <span class="o">=</span> <span class="n">bestAttemptContent</span> <span class="p">{</span>
            <span class="c1">// Modify the notification content here...</span>
            <span class="c1">// Handle push notification content here, load image back</span>
            <span class="n">bestAttemptContent</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s">"</span><span class="se">\(</span><span class="n">bestAttemptContent</span><span class="o">.</span><span class="n">title</span><span class="se">)</span><span class="s"> [modified]"</span>
            
            <span class="nf">contentHandler</span><span class="p">(</span><span class="n">bestAttemptContent</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">serviceExtensionTimeWillExpire</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Called just before the extension will be terminated by the system.</span>
        <span class="c1">// Use this as an opportunity to deliver your "best attempt" at modified content, otherwise the original push payload will be used.</span>
        <span class="c1">// Time is about to expire, just modify the title without loading image</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">contentHandler</span> <span class="o">=</span> <span class="n">contentHandler</span><span class="p">,</span> <span class="k">let</span> <span class="nv">bestAttemptContent</span> <span class="o">=</span>  <span class="n">bestAttemptContent</span> <span class="p">{</span>
            <span class="nf">contentHandler</span><span class="p">(</span><span class="n">bestAttemptContent</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></table></code></div></div><p>As shown in the code above, NotificationService has two interfaces; the first is <code class="language-plaintext highlighter-rouge">didReceive</code>, which is triggered when a push notification arrives. After processing, you need to call the callback method <code class="language-plaintext highlighter-rouge">contentHandler(bestAttemptContent)</code> to inform the system.</p><p>If the CallBack Method is not called within the time limit, the second function <code class="language-plaintext highlighter-rouge">serviceExtensionTimeWillExpire()</code> will be triggered due to timeout. At this point, it’s basically too late to recover, and you can only perform some cleanup tasks (e.g., simply modifying the title or content without loading network data).</p><h4 id="practical-example"><span class="me-2">Practical Example</span><a href="#practical-example" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Here we assume our Payload is as follows</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"aps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"alert"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"push_id"</span><span class="p">:</span><span class="s2">"2018001"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New Article Recommended for You"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Check it out now"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d2uju15hmm6f78.cloudfront.net/image/2016/12/04/3113/2018/09/28/trim_153813426461775700_450x300.jpg"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"mutable-content"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"sound"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"badge"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>“push_id” and “image” are both custom fields. push_id is used to identify the push notification for easy tracking and reporting back to the server; image is the URL of the image to be attached to the push notification.</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
</pre><td class="rouge-code"><pre><span class="k">override</span> <span class="kd">func</span> <span class="nf">didReceive</span><span class="p">(</span><span class="n">_</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">UNNotificationRequest</span><span class="p">,</span> <span class="n">withContentHandler</span> <span class="nv">contentHandler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">UNNotificationContent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="n">contentHandler</span> <span class="o">=</span> <span class="n">contentHandler</span>
    <span class="n">bestAttemptContent</span> <span class="o">=</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="nf">mutableCopy</span><span class="p">()</span> <span class="k">as?</span> <span class="kt">UNMutableNotificationContent</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="k">let</span> <span class="nv">bestAttemptContent</span> <span class="o">=</span> <span class="n">bestAttemptContent</span> <span class="p">{</span>
        
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">info</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">userInfo</span><span class="p">[</span><span class="s">"aps"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">NSDictionary</span><span class="p">,</span><span class="k">let</span> <span class="nv">alert</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s">"alert"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">Dictionary</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span><span class="kt">String</span><span class="o">&gt;</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nf">contentHandler</span><span class="p">(</span><span class="n">bestAttemptContent</span><span class="p">)</span>
            <span class="k">return</span>
            <span class="c1">// Notification content format is not as expected, do not process</span>
        <span class="p">}</span>
        
        <span class="c1">// Goal 2:</span>
        <span class="c1">// Send back to Server to notify that the notification was displayed</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">push_id</span> <span class="o">=</span> <span class="n">alert</span><span class="p">[</span><span class="s">"push_id"</span><span class="p">],</span><span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"顯示統計API網址"</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">var</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">URLRequest</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="nv">cachePolicy</span><span class="p">:</span> <span class="o">.</span><span class="n">reloadIgnoringLocalCacheData</span><span class="p">,</span> <span class="nv">timeoutInterval</span><span class="p">:</span> <span class="mi">30</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">httpMethod</span> <span class="o">=</span> <span class="s">"POST"</span>
            <span class="n">request</span><span class="o">.</span><span class="nf">addValue</span><span class="p">(</span><span class="kt">UserAgent</span><span class="p">,</span> <span class="nv">forHTTPHeaderField</span><span class="p">:</span> <span class="s">"User-Agent"</span><span class="p">)</span>
            
            <span class="k">var</span> <span class="nv">httpBody</span> <span class="o">=</span> <span class="s">"push_id=</span><span class="se">\(</span><span class="n">push_id</span><span class="se">)</span><span class="s">"</span>
            <span class="n">request</span><span class="o">.</span><span class="nf">addValue</span><span class="p">(</span><span class="s">"application/x-www-form-urlencoded"</span><span class="p">,</span> <span class="nv">forHTTPHeaderField</span><span class="p">:</span> <span class="s">"Content-Type"</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">httpBody</span> <span class="o">=</span> <span class="n">httpBody</span><span class="o">.</span><span class="nf">data</span><span class="p">(</span><span class="nv">using</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span>
            
            <span class="k">let</span> <span class="nv">task</span> <span class="o">=</span> <span class="kt">URLSession</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">dataTask</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">request</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
                
            <span class="p">}</span>
            <span class="kt">DispatchQueue</span><span class="o">.</span><span class="nf">global</span><span class="p">()</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span>
                <span class="n">task</span><span class="o">.</span><span class="nf">resume</span><span class="p">()</span>
                <span class="c1">// Asynchronous processing, ignore result</span>
            <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="c1">// Goal 1:</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">imageURLString</span> <span class="o">=</span> <span class="n">alert</span><span class="p">[</span><span class="s">"image"</span><span class="p">],</span><span class="k">let</span> <span class="nv">imageURL</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="n">imageURLString</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nf">contentHandler</span><span class="p">(</span><span class="n">bestAttemptContent</span><span class="p">)</span>
            <span class="k">return</span>
            <span class="c1">// If no image is attached, no special handling needed</span>
        <span class="p">}</span>
        
        
        <span class="k">let</span> <span class="nv">dataTask</span> <span class="o">=</span> <span class="kt">URLSession</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">dataTask</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">imageURL</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
            <span class="k">guard</span> <span class="k">let</span> <span class="nv">fileURL</span> <span class="o">=</span> <span class="kt">NSURL</span><span class="p">(</span><span class="nv">fileURLWithPath</span><span class="p">:</span> <span class="kt">NSTemporaryDirectory</span><span class="p">())</span><span class="o">.</span><span class="nf">appendingPathComponent</span><span class="p">(</span><span class="n">imageURL</span><span class="o">.</span><span class="n">lastPathComponent</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nf">contentHandler</span><span class="p">(</span><span class="n">bestAttemptContent</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="p">}</span>
            <span class="nf">guard</span> <span class="p">(</span><span class="k">try</span><span class="p">?</span> <span class="n">data</span><span class="p">?</span><span class="o">.</span><span class="nf">write</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="n">fileURL</span><span class="p">))</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nf">contentHandler</span><span class="p">(</span><span class="n">bestAttemptContent</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="p">}</span>
            
            <span class="k">guard</span> <span class="k">let</span> <span class="nv">attachment</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="kt">UNNotificationAttachment</span><span class="p">(</span><span class="nv">identifier</span><span class="p">:</span> <span class="s">"image"</span><span class="p">,</span> <span class="nv">url</span><span class="p">:</span> <span class="n">fileURL</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nf">contentHandler</span><span class="p">(</span><span class="n">bestAttemptContent</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="p">}</span>
            <span class="c1">// Above reads the image URL, downloads it to the device, and creates a UNNotificationAttachment</span>
            
            <span class="n">bestAttemptContent</span><span class="o">.</span><span class="n">categoryIdentifier</span> <span class="o">=</span> <span class="s">"image"</span>
            <span class="n">bestAttemptContent</span><span class="o">.</span><span class="n">attachments</span> <span class="o">=</span> <span class="p">[</span><span class="n">attachment</span><span class="p">]</span>
            <span class="c1">// Add the image attachment to the notification</span>
            
            <span class="n">bestAttemptContent</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="p">(</span><span class="n">bestAttemptContent</span><span class="o">.</span><span class="n">body</span> <span class="o">==</span> <span class="s">""</span><span class="p">)</span> <span class="p">?</span> <span class="p">(</span><span class="s">"View Now"</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="n">bestAttemptContent</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
            <span class="c1">// If the body is empty, use default text "View Now"</span>
            
            <span class="nf">contentHandler</span><span class="p">(</span><span class="n">bestAttemptContent</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="n">dataTask</span><span class="o">.</span><span class="nf">resume</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>I didn’t do anything special with the <code class="language-plaintext highlighter-rouge">serviceExtensionTimeWillExpire</code> part, so I won’t include it; the key is still the <code class="language-plaintext highlighter-rouge">didReceive</code> code above.</p><p>You can see that when a push notification is received, we first call an API to inform the backend that the notification has been received and displayed, which helps with push notification statistics; then, if there is an attached image, we process the image.</p><h4 id="when-in-app"><span class="me-2">When In-App:</span><a href="#when-in-app" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>It will still trigger the Notification Service Extension didReceive, which then triggers the AppDelegate’s <strong>func</strong> application( <strong>_</strong> application: UIApplication, didReceiveRemoteNotification userInfo: [AnyHashable : <strong>Any</strong> ], fetchCompletionHandler completionHandler: <strong>@escaping</strong> (UIBackgroundFetchResult) -&gt; Void) method.</p><h4 id="note-regarding-image-push-notifications-you-can-also"><span class="me-2">Note: Regarding image push notifications, you can also….</span><a href="#note-regarding-image-push-notifications-you-can-also" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Using Notification Content Extension to customize the UIView displayed when a push notification is pressed (can be custom designed), as well as handling the press action.</p><p>You can refer to this article: <a href="https://www.jianshu.com/p/78ef7bc04655#UNNotificationContentExtension-%E9%80%9A%E7%9F%A5%E5%86%85%E5%AE%B9%E6%89%A9%E5%B1%95" target="_blank">iOS10 Push Notification Advanced (Notification Extension)</a></p><p>iOS 12 and later support more action handling: <a href="https://www.appcoda.com.tw/user-notifications-ios12/" target="_blank">iOS 12 New Notification Features: Adding Interactivity Implementing Complex Functions in Notifications</a></p><p>For the Notification Content Extension part, I only added a UIView that can display image notifications and didn’t put much thought into it:</p><p><a href="/assets/cb6eba52a342/1*SepeUiS7CN7xmGFxariPjA.webp" class="popup img-link blur"><img data-src="/assets/cb6eba52a342/1*SepeUiS7CN7xmGFxariPjA.webp" alt="[結婚吧APP](https://itunes.apple.com/tw/app/%E7%B5%90%E5%A9%9A%E5%90%A7-%E4%B8%8D%E6%89%BE%E6%9C%80%E8%B2%B4-%E5%8F%AA%E6%89%BE%E6%9C%80%E5%B0%8D/id1356057329?ls=1&amp;mt=8){:target=&quot;_blank&quot;}" data-lqip="true" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NTAiIGhlaWdodD0iNjI0Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJncmV5Ii8+PC9zdmc+"></a></p><p><a href="https://itunes.apple.com/tw/app/%E7%B5%90%E5%A9%9A%E5%90%A7-%E4%B8%8D%E6%89%BE%E6%9C%80%E8%B2%B4-%E5%8F%AA%E6%89%BE%E6%9C%80%E5%B0%8D/id1356057329?ls=1&amp;mt=8" target="_blank">結婚吧APP</a></p><p>If you have any questions or feedback, feel free to <a href="https://www.zhgchg.li/contact" target="_blank">contact me</a>.</p><p><em><a href="https://medium.com/zrealm-ios-dev/ios-10-notification-service-extension-%E6%87%89%E7%94%A8-swift-cb6eba52a342" target="_blank">Post</a> converted from Medium by <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a>.</em></p><hr /><blockquote class="prompt-info"><p>This article was first published on Medium ➡️ <a href="https://medium.com/p/cb6eba52a342" target="_blank"><strong>Click Here</strong></a>, automatically converted and synchronized using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a> and <a href="https://github.com/ZhgChgLi/medium-to-jekyll-starter.github.io" target="_blank">Medium-to-jekyll-starter</a>.</p></blockquote><blockquote class="prompt-info"><p><a href="https://github.com/ZhgChgLi/zhgchgli.github.io/blob/main/_posts/en/zmediumtomarkdown/2018-10-15-cb6eba52a342.md" target="_blank">Improve this page on Github.</a></p></blockquote><p><a href="https://www.buymeacoffee.com/zhgchgli" target="_blank" style="display:block !important;" class="img-link shimmer" ><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a beer&amp;emoji=🍺&amp;slug=zhgchgli&amp;button_colour=FFDD00&amp;font_colour=000000&amp;font_family=Bree&amp;outline_colour=000000&amp;coffee_colour=ffffff" alt="Buy me a beer" loading="lazy"></a></p><widgetic id="64ce71d5ecb2a165598b4567" resize="fill-width" height="50" autoscale="on"></widgetic> <script async="" src="https://widgetic.com/sdk/sdk.js"></script><div onclick="this.style.position='';" style="text-align: center; position: -webkit-sticky; position: sticky; bottom: 0; z-index: 1; margin: 0 -1rem; padding: 5px; background: var(--main-bg); border-bottom: 1px solid var(--main-border-color);transition: all .2s ease-in-out;"><a href="https://medium.com/@zhgchgli" target="_blank" style="display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 20px;font-size:16px;font-weight:bold;color:#ffffff;background-color:#00ab6c;border-radius:5px;text-decoration:none;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:all 0.3s ease;cursor:pointer;" onmouseover="this.style.backgroundColor='#008f5a';this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 10px rgba(0,0,0,0.15)';" onmouseout="this.style.backgroundColor='#00ab6c';this.style.transform='translateY(0)';this.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';">Follow Me on Medium <span style="font-size:14px;color:rgba(255,255,255,0.9);font-weight:normal;opacity:0.9;">1K+ Followers</span></a></div><div style="font-size: 0.8em; cursor:default; text-align: right;"> 5,526 <span style="font-size: 0.9em;">Total Views</span><br /> <span style="font-size: 0.8em;">Last Statistics Date: 2025-08-19 | 5,365 Views on <a href="https://medium.com/p/cb6eba52a342" target="_blank">Medium.</a></span></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/zrealm-development/">ZRealm Development</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/swift/" class="post-tag no-text-decoration" >swift</a> <a href="/tags/push-notification/" class="post-tag no-text-decoration" >push notification</a> <a href="/tags/notification-service/" class="post-tag no-text-decoration" >notification service</a> <a href="/tags/ios/" class="post-tag no-text-decoration" >ios</a> <a href="/tags/ios-app-development/" class="post-tag no-text-decoration" >ios app development</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=iOS%20Notification%20Service%20Extension%EF%BD%9CEnhance%20Push%20Notifications%20with%20Swift%20-%20ZhgChgLi%20(Harry%20Li)&url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-development%2Fen%2Fios-notification-service-extension-enhance-push-notifications-with-swift-cb6eba52a342%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=iOS%20Notification%20Service%20Extension%EF%BD%9CEnhance%20Push%20Notifications%20with%20Swift%20-%20ZhgChgLi%20(Harry%20Li)&u=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-development%2Fen%2Fios-notification-service-extension-enhance-push-notifications-with-swift-cb6eba52a342%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fzhgchg.li%2Fposts%2Fzrealm-development%2Fen%2Fios-notification-service-extension-enhance-push-notifications-with-swift-cb6eba52a342%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/en/apple-watch-stainless-steel-milanese-loop-unboxing-premium-44mm-graphite-band-review-c0f99f987d9c/">Apple Watch Stainless Steel Milanese Loop Unboxing｜Premium 44mm Graphite Band Review</a><li class="text-truncate lh-lg"> <a href="/posts/zrealm-life/apple-watch-%E7%B1%B3%E8%98%AD%E9%8C%B6%E5%B8%B6%E9%96%8B%E7%AE%B1-%E5%8E%9F%E5%BB%A0%E4%B8%8D%E9%8F%BD%E9%8B%BC%E7%9F%B3%E5%A2%A8%E8%89%B2%E5%84%AA%E7%BC%BA%E9%BB%9E%E5%85%A8%E8%A7%A3%E6%9E%90-c0f99f987d9c/">Apple Watch 原廠不鏽鋼米蘭錶帶開箱</a><li class="text-truncate lh-lg"> <a href="/posts/travel-journals/en/busan-travel-guide-8-day-itinerary-with-visit-busan-pass-for-seamless-exploration-8ace34a1a3d8/">Busan Travel Guide｜8-Day Itinerary with VISIT BUSAN PASS for Seamless Exploration</a><li class="text-truncate lh-lg"> <a href="/posts/z-%E5%BA%A6%E6%97%85%E8%A1%8C%E9%81%8A%E8%A8%98/%E9%87%9C%E5%B1%B1%E8%87%AA%E7%94%B1%E8%A1%8C%E6%94%BB%E7%95%A5-8%E5%A4%A97%E5%A4%9C%E5%BF%85%E5%8E%BB%E6%99%AF%E9%BB%9E-%E7%BE%8E%E9%A3%9F%E8%88%87%E4%BA%A4%E9%80%9A%E5%85%A8%E8%A7%A3%E6%9E%90-%E9%87%9C%E5%B1%B1%E9%80%9A%E8%A1%8C%E8%AD%89%E7%9C%81%E9%8C%A2%E7%A7%98%E8%A8%A3-8ace34a1a3d8/">遊記 2025 韓國釜山 8 天 7 夜自由行</a><li class="text-truncate lh-lg"> <a href="/posts/travel-journals/en/nagoya-one-day-quick-trip-peach-aviation-flight-experience-and-travel-tips-7b8a0563c157/">Nagoya One-Day Quick Trip｜Peach Aviation Flight Experience and Travel Tips</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">iOS App Development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">iOS</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios app development</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">Swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">章節 (Chapters)🔖</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/zrealm-development/en/coreml-2-0-automate-article-classification-with-custom-trained-machine-learning-models-793bf2cdda0f/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1539789635" data-df="ll" > Oct 17, 2018 </time><h4 class="pt-0 my-2">CoreML 2.0｜Automate Article Classification with Custom-Trained Machine Learning Models</h4><div class="text-muted"><p>Discover how iOS developers leverage CoreML 2.0 to train and convert machine learning models, enabling automatic article classification and seamless integration into real-world apps for improved ac...</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-development/en/vision-face-detection-swift-app-auto-crop-profile-pictures-with-precision-9a9aa892f9a9/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1539705684" data-df="ll" > Oct 17, 2018 </time><h4 class="pt-0 my-2">Vision Face Detection｜Swift App Auto Crop Profile Pictures with Precision</h4><div class="text-muted"><p>Discover how Swift developers automate face detection and cropping in profile picture uploads using Vision. Solve manual editing pain points and enhance user experience with accurate, real-time fac...</p></div></div></a></article><article class="col"> <a href="/posts/zrealm-development/en/ios-uitextview-text-wrap-editor-swift-implementation-for-seamless-layout-e37d66ea1146/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1539454069" data-df="ll" > Oct 14, 2018 </time><h4 class="pt-0 my-2">iOS UITextView Text Wrap Editor｜Swift Implementation for Seamless Layout</h4><div class="text-muted"><p>Discover how to implement a UITextView text wrap editor in Swift that resolves layout challenges and enhances text editing efficiency. This guide helps developers streamline text flow around images...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/zrealm-dev/ios-uitextview-%E6%96%87%E7%B9%9E%E5%9C%96%E7%B7%A8%E8%BC%AF%E5%99%A8%E9%96%8B%E7%99%BC%E6%94%BB%E7%95%A5-swift-%E5%9C%96%E7%89%87%E6%8F%92%E5%85%A5%E8%88%87%E8%A8%98%E6%86%B6%E9%AB%94%E5%84%AA%E5%8C%96%E5%AF%A6%E6%88%B0-e37d66ea1146/" class="btn btn-outline-primary" aria-label="Older" ><p>iOS UITextView 文繞圖編輯器開發攻略｜Swift 圖片插入與記憶體優化實戰</p></a> <a href="/posts/zrealm-dev/ios-notification-service-extension-swift-%E5%AF%A6%E4%BD%9C%E5%9C%96%E7%89%87%E6%8E%A8%E6%92%AD%E8%88%87%E9%A1%AF%E7%A4%BA%E7%B5%B1%E8%A8%88%E6%8A%80%E5%B7%A7-cb6eba52a342/" class="btn btn-outline-primary" aria-label="Newer" ><p>iOS ≥ 10 Notification Service Extension 應用 (Swift)</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://medium.com/@zhgchgli">ZhgChgLi</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >All rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. <br/> Medium articles were converted using <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown.</a><br/>Last updated: 2025-08-20 23:47:22 +08:00</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios-app-development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">iOS App Development</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">ios</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios/">iOS</a> <a class="post-tag btn btn-outline-primary" href="/tags/medium/">medium</a> <a class="post-tag btn btn-outline-primary" href="/tags/ios-app-development/">ios app development</a> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">Swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ZhgChgLi/zhgchgli.github.io', 'data-repo-id': 'R_kgDOHdowLw', 'data-category': 'Q&A', 'data-category-id': 'DIC_kwDOHdowL84CU-q6', 'data-mapping': 'url', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
